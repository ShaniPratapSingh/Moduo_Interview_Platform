{
  "version": 3,
  "sources": ["../../sdp/sdp.js", "../../sdp-transform/lib/grammar.js", "../../sdp-transform/lib/parser.js", "../../sdp-transform/lib/writer.js", "../../sdp-transform/lib/index.js", "../../ua-parser-js/src/ua-parser.js", "../../webrtc-adapter/src/js/utils.js", "../../webrtc-adapter/src/js/chrome/chrome_shim.js", "../../webrtc-adapter/src/js/chrome/getusermedia.js", "../../webrtc-adapter/src/js/chrome/getdisplaymedia.js", "../../webrtc-adapter/src/js/firefox/firefox_shim.js", "../../webrtc-adapter/src/js/firefox/getusermedia.js", "../../webrtc-adapter/src/js/firefox/getdisplaymedia.js", "../../webrtc-adapter/src/js/safari/safari_shim.js", "../../webrtc-adapter/src/js/common_shim.js", "../../webrtc-adapter/src/js/adapter_factory.js", "../../webrtc-adapter/src/js/adapter_core.js", "../../@protobuf-ts/runtime/build/es2015/json-typings.js", "../../@protobuf-ts/runtime/build/es2015/base64.js", "../../@protobuf-ts/runtime/build/es2015/binary-format-contract.js", "../../@protobuf-ts/runtime/build/es2015/goog-varint.js", "../../@protobuf-ts/runtime/build/es2015/pb-long.js", "../../@protobuf-ts/runtime/build/es2015/binary-reader.js", "../../@protobuf-ts/runtime/build/es2015/assert.js", "../../@protobuf-ts/runtime/build/es2015/binary-writer.js", "../../@protobuf-ts/runtime/build/es2015/json-format-contract.js", "../../@protobuf-ts/runtime/build/es2015/message-type-contract.js", "../../@protobuf-ts/runtime/build/es2015/lower-camel-case.js", "../../@protobuf-ts/runtime/build/es2015/reflection-info.js", "../../@protobuf-ts/runtime/build/es2015/oneof.js", "../../@protobuf-ts/runtime/build/es2015/reflection-type-check.js", "../../@protobuf-ts/runtime/build/es2015/reflection-long-convert.js", "../../@protobuf-ts/runtime/build/es2015/reflection-json-reader.js", "../../@protobuf-ts/runtime/build/es2015/reflection-json-writer.js", "../../@protobuf-ts/runtime/build/es2015/reflection-scalar-default.js", "../../@protobuf-ts/runtime/build/es2015/reflection-binary-reader.js", "../../@protobuf-ts/runtime/build/es2015/reflection-binary-writer.js", "../../@protobuf-ts/runtime/build/es2015/reflection-create.js", "../../@protobuf-ts/runtime/build/es2015/reflection-merge-partial.js", "../../@protobuf-ts/runtime/build/es2015/reflection-equals.js", "../../@protobuf-ts/runtime/build/es2015/message-type.js", "../../@protobuf-ts/runtime-rpc/build/es2015/reflection-info.js", "../../@protobuf-ts/runtime-rpc/build/es2015/service-type.js", "../../@protobuf-ts/runtime-rpc/build/es2015/rpc-error.js", "../../@protobuf-ts/runtime-rpc/build/es2015/rpc-options.js", "../../@protobuf-ts/runtime-rpc/build/es2015/deferred.js", "../../@protobuf-ts/runtime-rpc/build/es2015/rpc-output-stream.js", "../../@protobuf-ts/runtime-rpc/build/es2015/unary-call.js", "../../@protobuf-ts/runtime-rpc/build/es2015/server-streaming-call.js", "../../@protobuf-ts/runtime-rpc/build/es2015/client-streaming-call.js", "../../@protobuf-ts/runtime-rpc/build/es2015/duplex-streaming-call.js", "../../@protobuf-ts/runtime-rpc/build/es2015/test-transport.js", "../../@protobuf-ts/runtime-rpc/build/es2015/rpc-interceptor.js", "../../@protobuf-ts/twirp-transport/build/es2015/twitch-twirp-error-code.js", "../../@protobuf-ts/twirp-transport/build/es2015/twirp-format.js", "../../@protobuf-ts/twirp-transport/build/es2015/twirp-transport.js", "../../@stream-io/logger/src/utils/is-react-native.ts", "../../@stream-io/logger/src/index.ts", "../../rxjs/src/internal/util/isFunction.ts", "../../rxjs/src/internal/util/createErrorClass.ts", "../../rxjs/src/internal/util/UnsubscriptionError.ts", "../../rxjs/src/internal/util/arrRemove.ts", "../../rxjs/src/internal/Subscription.ts", "../../rxjs/src/internal/config.ts", "../../rxjs/src/internal/scheduler/timeoutProvider.ts", "../../rxjs/src/internal/util/reportUnhandledError.ts", "../../rxjs/src/internal/util/noop.ts", "../../rxjs/src/internal/NotificationFactories.ts", "../../rxjs/src/internal/util/errorContext.ts", "../../rxjs/src/internal/Subscriber.ts", "../../rxjs/src/internal/symbol/observable.ts", "../../rxjs/src/internal/util/identity.ts", "../../rxjs/src/internal/util/pipe.ts", "../../rxjs/src/internal/Observable.ts", "../../rxjs/src/internal/util/lift.ts", "../../rxjs/src/internal/operators/OperatorSubscriber.ts", "../../rxjs/src/internal/operators/refCount.ts", "../../rxjs/src/internal/observable/ConnectableObservable.ts", "../../rxjs/src/internal/scheduler/performanceTimestampProvider.ts", "../../rxjs/src/internal/scheduler/animationFrameProvider.ts", "../../rxjs/src/internal/observable/dom/animationFrames.ts", "../../rxjs/src/internal/util/ObjectUnsubscribedError.ts", "../../rxjs/src/internal/Subject.ts", "../../rxjs/src/internal/BehaviorSubject.ts", "../../rxjs/src/internal/scheduler/dateTimestampProvider.ts", "../../rxjs/src/internal/ReplaySubject.ts", "../../rxjs/src/internal/AsyncSubject.ts", "../../rxjs/src/internal/scheduler/Action.ts", "../../rxjs/src/internal/scheduler/intervalProvider.ts", "../../rxjs/src/internal/scheduler/AsyncAction.ts", "../../rxjs/src/internal/util/Immediate.ts", "../../rxjs/src/internal/scheduler/immediateProvider.ts", "../../rxjs/src/internal/scheduler/AsapAction.ts", "../../rxjs/src/internal/Scheduler.ts", "../../rxjs/src/internal/scheduler/AsyncScheduler.ts", "../../rxjs/src/internal/scheduler/AsapScheduler.ts", "../../rxjs/src/internal/scheduler/asap.ts", "../../rxjs/src/internal/scheduler/async.ts", "../../rxjs/src/internal/scheduler/QueueAction.ts", "../../rxjs/src/internal/scheduler/QueueScheduler.ts", "../../rxjs/src/internal/scheduler/queue.ts", "../../rxjs/src/internal/scheduler/AnimationFrameAction.ts", "../../rxjs/src/internal/scheduler/AnimationFrameScheduler.ts", "../../rxjs/src/internal/scheduler/animationFrame.ts", "../../rxjs/src/internal/scheduler/VirtualTimeScheduler.ts", "../../rxjs/src/internal/observable/empty.ts", "../../rxjs/src/internal/util/isScheduler.ts", "../../rxjs/src/internal/util/args.ts", "../../rxjs/src/internal/util/isArrayLike.ts", "../../rxjs/src/internal/util/isPromise.ts", "../../rxjs/src/internal/util/isInteropObservable.ts", "../../rxjs/src/internal/util/isAsyncIterable.ts", "../../rxjs/src/internal/util/throwUnobservableError.ts", "../../rxjs/src/internal/symbol/iterator.ts", "../../rxjs/src/internal/util/isIterable.ts", "../../rxjs/src/internal/util/isReadableStreamLike.ts", "../../rxjs/src/internal/observable/innerFrom.ts", "../../rxjs/src/internal/util/executeSchedule.ts", "../../rxjs/src/internal/operators/observeOn.ts", "../../rxjs/src/internal/operators/subscribeOn.ts", "../../rxjs/src/internal/scheduled/scheduleObservable.ts", "../../rxjs/src/internal/scheduled/schedulePromise.ts", "../../rxjs/src/internal/scheduled/scheduleArray.ts", "../../rxjs/src/internal/scheduled/scheduleIterable.ts", "../../rxjs/src/internal/scheduled/scheduleAsyncIterable.ts", "../../rxjs/src/internal/scheduled/scheduleReadableStreamLike.ts", "../../rxjs/src/internal/scheduled/scheduled.ts", "../../rxjs/src/internal/observable/from.ts", "../../rxjs/src/internal/observable/of.ts", "../../rxjs/src/internal/observable/throwError.ts", "../../rxjs/src/internal/Notification.ts", "../../rxjs/src/internal/util/EmptyError.ts", "../../rxjs/src/internal/util/ArgumentOutOfRangeError.ts", "../../rxjs/src/internal/util/NotFoundError.ts", "../../rxjs/src/internal/util/SequenceError.ts", "../../rxjs/src/internal/operators/timeout.ts", "../../rxjs/src/internal/operators/map.ts", "../../rxjs/src/internal/util/mapOneOrManyArgs.ts", "../../rxjs/src/internal/util/argsArgArrayOrObject.ts", "../../rxjs/src/internal/util/createObject.ts", "../../rxjs/src/internal/observable/combineLatest.ts", "../../rxjs/src/internal/operators/mergeInternals.ts", "../../rxjs/src/internal/operators/mergeMap.ts", "../../rxjs/src/internal/operators/mergeAll.ts", "../../rxjs/src/internal/operators/concatAll.ts", "../../rxjs/src/internal/observable/concat.ts", "../../rxjs/src/internal/observable/fromEvent.ts", "../../rxjs/src/internal/observable/fromEventPattern.ts", "../../rxjs/src/internal/observable/merge.ts", "../../rxjs/src/internal/observable/never.ts", "../../rxjs/src/internal/operators/concatMap.ts", "../../rxjs/src/internal/operators/debounceTime.ts", "../../rxjs/src/internal/operators/distinctUntilChanged.ts", "../../rxjs/src/internal/operators/distinctUntilKeyChanged.ts", "../../rxjs/src/internal/operators/pairwise.ts", "../../rxjs/src/internal/operators/share.ts", "../../rxjs/src/internal/operators/shareReplay.ts", "../../rxjs/src/internal/operators/startWith.ts", "../../rxjs/src/internal/operators/takeWhile.ts", "../../rxjs/src/internal/operators/tap.ts", "../../@stream-io/worker-timer/src/worker.build.ts", "../../@stream-io/worker-timer/src/index.ts", "../../@stream-io/src/gen/coordinator/index.ts", "../../@stream-io/src/coordinator/connection/types.ts", "../../@stream-io/src/gen/google/protobuf/struct.ts", "../../@stream-io/src/gen/google/protobuf/timestamp.ts", "../../@stream-io/src/gen/video/sfu/models/models.ts", "../../@stream-io/src/gen/video/sfu/signal_rpc/signal.ts", "../../@stream-io/src/gen/video/sfu/event/events.ts", "../../@stream-io/src/types.ts", "../../@stream-io/src/gen/video/sfu/signal_rpc/signal.client.ts", "../../@stream-io/src/rpc/createClient.ts", "../../@stream-io/src/coordinator/connection/utils.ts", "../../@stream-io/src/helpers/platforms.ts", "../../@stream-io/src/logger.ts", "../../@stream-io/src/rpc/retryable.ts", "../../@stream-io/src/rtc/helpers/sdp.ts", "../../@stream-io/src/rtc/codecs.ts", "../../@stream-io/src/rtc/Dispatcher.ts", "../../@stream-io/src/rtc/IceTrickleBuffer.ts", "../../@stream-io/src/helpers/concurrency.ts", "../../@stream-io/src/store/rxUtils.ts", "../../@stream-io/src/store/CallingState.ts", "../../@stream-io/src/store/stateStore.ts", "../../@stream-io/src/sorting/comparator.ts", "../../@stream-io/src/helpers/participantUtils.ts", "../../@stream-io/src/sorting/participants.ts", "../../@stream-io/src/sorting/presets.ts", "../../@stream-io/src/store/CallState.ts", "../../@stream-io/src/rtc/NegotiationError.ts", "../../@stream-io/src/stats/utils.ts", "../../@stream-io/src/helpers/client-details.ts", "../../@stream-io/src/helpers/browsers.ts", "../../@stream-io/src/stats/CallStateStatsReporter.ts", "../../@stream-io/src/stats/SfuStatsReporter.ts", "../../@stream-io/src/stats/rtc/pc.ts", "../../@stream-io/src/stats/rtc/StatsTracer.ts", "../../@stream-io/src/stats/rtc/Tracer.ts", "../../@stream-io/src/rtc/BasePeerConnection.ts", "../../@stream-io/src/rtc/TransceiverCache.ts", "../../@stream-io/src/helpers/ensureExhausted.ts", "../../@stream-io/src/rtc/helpers/tracks.ts", "../../@stream-io/src/rtc/layers.ts", "../../@stream-io/src/rtc/Publisher.ts", "../../@stream-io/src/rtc/Subscriber.ts", "../../@stream-io/src/rtc/signal.ts", "../../@stream-io/src/rtc/helpers/rtcConfiguration.ts", "../../@stream-io/src/helpers/promise.ts", "../../@stream-io/src/helpers/lazy.ts", "../../@stream-io/src/timers/index.ts", "../../@stream-io/src/StreamSfuClient.ts", "../../@stream-io/src/events/call.ts", "../../@stream-io/src/events/call-permissions.ts", "../../@stream-io/src/helpers/array.ts", "../../@stream-io/src/events/internal.ts", "../../@stream-io/src/events/mutes.ts", "../../@stream-io/src/events/participant.ts", "../../@stream-io/src/events/speaker.ts", "../../@stream-io/src/events/callEventHandlers.ts", "../../@stream-io/src/helpers/ViewportTracker.ts", "../../@stream-io/src/helpers/DynascaleManager.ts", "../../@stream-io/src/permissions/PermissionsContext.ts", "../../@stream-io/src/CallType.ts", "../../@stream-io/src/devices/utils.ts", "../../@stream-io/src/devices/BrowserPermission.ts", "../../@stream-io/src/devices/devices.ts", "../../@stream-io/src/helpers/compatibility.ts", "../../@stream-io/src/devices/DeviceManager.ts", "../../@stream-io/src/devices/DeviceManagerState.ts", "../../@stream-io/src/devices/CameraManagerState.ts", "../../@stream-io/src/devices/CameraManager.ts", "../../@stream-io/src/devices/AudioDeviceManager.ts", "../../@stream-io/src/devices/AudioDeviceManagerState.ts", "../../@stream-io/src/devices/MicrophoneManagerState.ts", "../../@stream-io/src/helpers/sound-detector.ts", "../../@stream-io/src/helpers/RNSpeechDetector.ts", "../../@stream-io/src/devices/MicrophoneManager.ts", "../../@stream-io/src/devices/ScreenShareState.ts", "../../@stream-io/src/devices/ScreenShareManager.ts", "../../@stream-io/src/devices/SpeakerState.ts", "../../@stream-io/src/devices/SpeakerManager.ts", "../../@stream-io/src/Call.ts", "../../@stream-io/video-client/https", "../../@stream-io/src/coordinator/connection/errors.ts", "../../@stream-io/src/coordinator/connection/connection.ts", "../../@stream-io/src/coordinator/connection/signing.ts", "../../@stream-io/src/coordinator/connection/token_manager.ts", "../../@stream-io/src/coordinator/connection/location.ts", "../../@stream-io/src/coordinator/connection/client.ts", "../../@stream-io/src/helpers/clientUtils.ts", "../../@stream-io/src/StreamVideoClient.ts", "../../@stream-io/src/contexts/StreamCallContext.tsx", "../../@stream-io/src/i18n/StreamI18n.ts", "../../@stream-io/src/contexts/StreamI18nContext.tsx", "../../@stream-io/src/contexts/StreamVideoContext.tsx", "../../@stream-io/src/helpers/platforms.ts", "../../@stream-io/src/hooks/useObservableValue.ts", "../../@stream-io/src/hooks/callStateHooks.ts", "../../@stream-io/src/hooks/useEffectEvent.ts", "../../@stream-io/src/hooks/store.ts", "../../@stream-io/src/hooks/callUtilHooks.ts", "../../@stream-io/src/hooks/index.ts", "../../@stream-io/src/wrappers/Restricted.tsx", "../../wasm-feature-detect/dist/esm/index.js", "../../@mediapipe/tasks-vision/vision_bundle.mjs", "../../@stream-io/src/compatibility.ts", "../../@stream-io/src/legacy/helpers/webglHelper.ts", "../../@stream-io/src/legacy/webgl2/backgroundBlurStage.ts", "../../@stream-io/src/legacy/webgl2/backgroundImageStage.ts", "../../@stream-io/src/legacy/webgl2/jointBilateralFilterStage.ts", "../../@stream-io/src/legacy/webgl2/resizingStage.ts", "../../@stream-io/src/legacy/webgl2/softmaxStage.ts", "../../@stream-io/src/legacy/webgl2/webgl2Pipeline.ts", "../../@stream-io/src/legacy/segmentation.ts", "../../@stream-io/src/legacy/createRenderer.ts", "../../@stream-io/video-filters-web/src/legacy/tflite-simd.js", "../../@stream-io/src/version.ts", "../../@stream-io/src/legacy/tflite.ts", "../../@stream-io/src/mediapipe.ts", "../../@stream-io/src/types.ts", "../../@stream-io/src/WebGLRenderer.ts", "../../@stream-io/src/FallbackGenerator.ts", "../../@stream-io/src/FallbackProcessor.ts", "../../@stream-io/src/VirtualBackground.ts", "../../@stream-io/src/core/components/Audio/Audio.tsx", "../../@stream-io/src/core/components/Audio/ParticipantsAudio.tsx", "../../@stream-io/src/core/components/ParticipantView/ParticipantViewContext.tsx", "../../@stream-io/src/hooks/useFloatingUIPreset.ts", "../../@stream-io/src/hooks/usePersistedDevicePreferences.ts", "../../@stream-io/src/hooks/useScrollPosition.ts", "../../@stream-io/src/hooks/useRequestPermission.ts", "../../@stream-io/src/hooks/useDeviceList.tsx", "../../@stream-io/src/components/Menu/MenuToggle.tsx", "../../@stream-io/src/components/Menu/GenericMenu.tsx", "../../@stream-io/src/components/Icon/Icon.tsx", "../../@stream-io/src/core/hooks/usePictureInPictureState.ts", "../../@stream-io/src/core/components/ParticipantView/ParticipantActionsContextMenu.tsx", "../../@stream-io/src/utilities/isComponentType.ts", "../../@stream-io/src/utilities/chunk.ts", "../../@stream-io/src/utilities/applyElementToRef.ts", "../../@stream-io/src/core/components/Video/BaseVideo.tsx", "../../@stream-io/src/core/components/Video/BaseVideoPlaceholder.tsx", "../../@stream-io/src/core/components/Video/DefaultVideoPlaceholder.tsx", "../../@stream-io/src/core/components/Video/DefaultPictureInPicturePlaceholder.tsx", "../../@stream-io/src/core/components/Video/Video.tsx", "../../@stream-io/src/core/hooks/useTrackElementVisibility.ts", "../../@stream-io/src/components/Avatar/Avatar.tsx", "../../@stream-io/src/components/BackgroundFilters/BackgroundFilters.tsx", "../../@stream-io/src/components/Button/IconButton.tsx", "../../@stream-io/src/components/Button/CompositeButton.tsx", "../../@stream-io/src/components/Button/TextButton.tsx", "../../@stream-io/src/components/CallControls/AcceptCallButton.tsx", "../../@stream-io/src/components/Notification/Notification.tsx", "../../@stream-io/src/components/Notification/PermissionNotification.tsx", "../../@stream-io/src/components/Notification/SpeakingWhileMutedNotification.tsx", "../../@stream-io/src/components/Notification/RecordingInProgressNotification.tsx", "../../@stream-io/src/components/LoadingIndicator/LoadingIndicator.tsx", "../../@stream-io/src/components/Tooltip/Tooltip.tsx", "../../@stream-io/src/components/Tooltip/hooks/useEnterLeaveHandlers.ts", "../../@stream-io/src/components/Tooltip/WithTooltip.tsx", "../../@stream-io/src/components/CallControls/RecordCallButton.tsx", "../../@stream-io/src/components/Reaction/Reaction.tsx", "../../@stream-io/src/components/CallControls/ReactionsButton.tsx", "../../@stream-io/src/utilities/callControlHandler.ts", "../../@stream-io/src/components/CallControls/ScreenShareButton.tsx", "../../@stream-io/src/components/DeviceSettings/AudioVolumeIndicator.tsx", "../../@stream-io/src/components/DropdownSelect/DropdownSelect.tsx", "../../@stream-io/src/components/DeviceSettings/DeviceSelector.tsx", "../../@stream-io/src/components/DeviceSettings/SpeakerTest.tsx", "../../@stream-io/src/components/DeviceSettings/DeviceSelectorAudio.tsx", "../../@stream-io/src/components/DeviceSettings/DeviceSelectorVideo.tsx", "../../@stream-io/src/components/DeviceSettings/DeviceSettings.tsx", "../../@stream-io/src/components/CallControls/ToggleAudioButton.tsx", "../../@stream-io/src/components/CallControls/ToggleVideoButton.tsx", "../../@stream-io/src/components/CallControls/CancelCallButton.tsx", "../../@stream-io/src/components/CallControls/CallControls.tsx", "../../@stream-io/src/components/CallStats/CallStats.tsx", "../../@stream-io/src/components/CallControls/CallStatsButton.tsx", "../../@stream-io/src/components/CallControls/ToggleAudioOutputButton.tsx", "../../@stream-io/src/components/CallParticipantsList/BlockedUserListing.tsx", "../../@stream-io/src/components/CallParticipantsList/CallParticipantListHeader.tsx", "../../@stream-io/src/components/CallParticipantsList/CallParticipantListingItem.tsx", "../../@stream-io/src/components/CallParticipantsList/CallParticipantListing.tsx", "../../@stream-io/src/components/CallParticipantsList/EmptyParticipantSearchList.tsx", "../../@stream-io/src/components/Search/SearchInput.tsx", "../../@stream-io/src/components/Search/SearchResults.tsx", "../../@stream-io/src/components/Search/hooks/useSearch.ts", "../../@stream-io/src/components/CallParticipantsList/CallParticipantsList.tsx", "../../@stream-io/src/components/CallPreview/CallPreview.tsx", "../../@stream-io/src/components/CallRecordingList/CallRecordingListHeader.tsx", "../../@stream-io/src/components/CallRecordingList/CallRecordingListItem.tsx", "../../@stream-io/src/components/CallRecordingList/EmptyCallRecordingListing.tsx", "../../@stream-io/src/components/CallRecordingList/LoadingCallRecordingListing.tsx", "../../@stream-io/src/components/CallRecordingList/CallRecordingList.tsx", "../../@stream-io/src/components/NoiseCancellation/NoiseCancellationProvider.tsx", "../../@stream-io/src/components/RingingCall/RingingCallControls.tsx", "../../@stream-io/src/components/RingingCall/RingingCall.tsx", "../../@stream-io/src/components/Permissions/PermissionRequests.tsx", "../../@stream-io/src/components/StreamTheme/StreamTheme.tsx", "../../@stream-io/src/components/VideoPreview/VideoPreview.tsx", "../../@stream-io/src/core/components/ParticipantView/DefaultParticipantViewUI.tsx", "../../@stream-io/src/core/components/ParticipantView/ParticipantView.tsx", "../../@stream-io/src/core/components/StreamCall/StreamCall.tsx", "../../@stream-io/src/translations/index.ts", "../../@stream-io/src/core/components/StreamVideo/StreamVideo.tsx", "../../@stream-io/src/utilities/filter.ts", "../../@stream-io/src/core/components/CallLayout/hooks.ts", "../../@stream-io/src/core/components/CallLayout/LivestreamLayout.tsx", "../../@stream-io/src/core/components/CallLayout/PaginatedGridLayout.tsx", "../../@stream-io/src/core/hooks/useCalculateHardLimit.ts", "../../@stream-io/src/core/components/CallLayout/SpeakerLayout.tsx", "../../@stream-io/src/core/components/CallLayout/PipLayout.tsx", "../../@stream-io/src/wrappers/LivestreamPlayer/LivestreamPlayer.tsx", "../../@stream-io/index.ts"],
  "sourcesContent": ["/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nconst SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substring(2, 12);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(line => line.trim());\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  const parts = blob.split('\\nm=');\n  return parts.map((part, index) => (index > 0 ?\n    'm=' + part : part).trim() + '\\r\\n');\n};\n\n// Returns the session description.\nSDPUtils.getDescription = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// Returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(line => line.indexOf(prefix) === 0);\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\n// Input can be prefixed with a=.\nSDPUtils.parseCandidate = function(line) {\n  let parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  const candidate = {\n    foundation: parts[0],\n    component: {1: 'rtp', 2: 'rtcp'}[parts[1]] || parts[1],\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7],\n  };\n\n  for (let i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compatibility.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag. Don't overwrite.\n        if (candidate[parts[i]] === undefined) {\n          candidate[parts[i]] = parts[i + 1];\n        }\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\n// This does not include the a= prefix!\nSDPUtils.writeCandidate = function(candidate) {\n  const sdp = [];\n  sdp.push(candidate.foundation);\n\n  const component = candidate.component;\n  if (component === 'rtp') {\n    sdp.push(1);\n  } else if (component === 'rtcp') {\n    sdp.push(2);\n  } else {\n    sdp.push(component);\n  }\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  const type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// Sample input:\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substring(14).split(' ');\n};\n\n// Parses a rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  let parts = line.substring(9).split(' ');\n  const parsed = {\n    payloadType: parseInt(parts.shift(), 10), // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generates a rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  const channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses a extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  const parts = line.substring(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1],\n    attributes: parts.slice(2).join(' '),\n  };\n};\n\n// Generates an extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri +\n      (headerExtension.attributes ? ' ' + headerExtension.attributes : '') +\n      '\\r\\n';\n};\n\n// Parses a fmtp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\n// Non-key-value such as telephone-events `0-15` get parsed as\n// {`0-15`:undefined}\nSDPUtils.parseFmtp = function(line) {\n  const parsed = {};\n  let kv;\n  const parts = line.substring(line.indexOf(' ') + 1).split(';');\n  for (let j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates a fmtp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  let line = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    const params = [];\n    Object.keys(codec.parameters).forEach(param => {\n      if (codec.parameters[param] !== undefined) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses a rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  const parts = line.substring(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' '),\n  };\n};\n\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  let lines = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(fb => {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses a RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  const sp = line.indexOf(' ');\n  const parts = {\n    ssrc: parseInt(line.substring(7, sp), 10),\n  };\n  const colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substring(sp + 1, colon);\n    parts.value = line.substring(colon + 1);\n  } else {\n    parts.attribute = line.substring(sp + 1);\n  }\n  return parts;\n};\n\n// Parse a ssrc-group line (see RFC 5576). Sample input:\n// a=ssrc-group:semantics 12 34\nSDPUtils.parseSsrcGroup = function(line) {\n  const parts = line.substring(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(ssrc => parseInt(ssrc, 10)),\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// Returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  const mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substring(6);\n  }\n};\n\n// Parses a fingerprint line for DTLS-SRTP.\nSDPUtils.parseFingerprint = function(line) {\n  const parts = line.substring(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1].toUpperCase(), // the definition is upper-case in RFC 4572.\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint),\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  let sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(fp => {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  const parts = line.substring(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  const parts = keyParams.substring(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES parameters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  const ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  const pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substring(12),\n    password: pwd.substring(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  let sdp = 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n  if (params.iceLite) {\n    sdp += 'a=ice-lite\\r\\n';\n  }\n  return sdp;\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  const description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: [],\n  };\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  description.profile = mline[2];\n  for (let i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    const pt = mline[i];\n    const rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      const codec = SDPUtils.parseRtpMap(rtpmapline);\n      const fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(line => {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  const wildcardRtcpFb = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-fb:* ')\n    .map(SDPUtils.parseRtcpFb);\n  description.codecs.forEach(codec => {\n    wildcardRtcpFb.forEach(fb=> {\n      const duplicate = codec.rtcpFeedback.find(existingFeedback => {\n        return existingFeedback.type === fb.type &&\n          existingFeedback.parameter === fb.parameter;\n      });\n      if (!duplicate) {\n        codec.rtcpFeedback.push(fb);\n      }\n    });\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  let sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' ' + (caps.profile || 'UDP/TLS/RTP/SAVPF') + ' ';\n  sdp += caps.codecs.map(codec => {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(codec => {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  let maxptime = 0;\n  caps.codecs.forEach(codec => {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(extension => {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  const encodingParameters = [];\n  const description = SDPUtils.parseRtpParameters(mediaSection);\n  const hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  const hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  const ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(parts => parts.attribute === 'cname');\n  const primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  let secondarySsrc;\n\n  const flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(line => {\n      const parts = line.substring(17).split(' ');\n      return parts.map(part => parseInt(part, 10));\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(codec => {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      let encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red',\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc,\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  let bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substring(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substring(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(params => {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  const rtcpParameters = {};\n\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  const remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(obj => obj.attribute === 'cname')[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  const rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrÑ–bute.\n  // Note that Edge does not support unmuxed RTCP.\n  const mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\nSDPUtils.writeRtcpParameters = function(rtcpParameters) {\n  let sdp = '';\n  if (rtcpParameters.reducedSize) {\n    sdp += 'a=rtcp-rsize\\r\\n';\n  }\n  if (rtcpParameters.mux) {\n    sdp += 'a=rtcp-mux\\r\\n';\n  }\n  if (rtcpParameters.ssrc !== undefined && rtcpParameters.cname) {\n    sdp += 'a=ssrc:' + rtcpParameters.ssrc +\n      ' cname:' + rtcpParameters.cname + '\\r\\n';\n  }\n  return sdp;\n};\n\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  let parts;\n  const spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substring(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  const planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(msidParts => msidParts.attribute === 'msid');\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  const mline = SDPUtils.parseMLine(mediaSection);\n  const maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  let maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substring(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  const sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substring(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize,\n    };\n  }\n  const sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    const parts = sctpMapLines[0]\n      .substring(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize,\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  let output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n',\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n',\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 22);\n};\n\n// Write boiler plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  let sessionId;\n  const version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  const user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  const lines = SDPUtils.splitLines(mediaSection);\n  for (let i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substring(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  return mline[0].substring(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const parts = lines[0].substring(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' '),\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  const line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  const parts = line.substring(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5],\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  const lines = SDPUtils.splitLines(blob);\n  for (let i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n", "var grammar = module.exports = {\n  v: [{\n    name: 'version',\n    reg: /^(\\d*)$/\n  }],\n  o: [{\n    // o=- 20518 0 IN IP4 203.0.113.1\n    // NB: sessionId will be a String in most cases because it is huge\n    name: 'origin',\n    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n    format: '%s %s %d %s IP%d %s'\n  }],\n  // default parsing of these only (though some of these feel outdated)\n  s: [{ name: 'name' }],\n  i: [{ name: 'description' }],\n  u: [{ name: 'uri' }],\n  e: [{ name: 'email' }],\n  p: [{ name: 'phone' }],\n  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly...\n  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n  // k: [{}], // outdated thing ignored\n  t: [{\n    // t=0 0\n    name: 'timing',\n    reg: /^(\\d*) (\\d*)/,\n    names: ['start', 'stop'],\n    format: '%d %d'\n  }],\n  c: [{\n    // c=IN IP4 10.47.197.26\n    name: 'connection',\n    reg: /^IN IP(\\d) (\\S*)/,\n    names: ['version', 'ip'],\n    format: 'IN IP%d %s'\n  }],\n  b: [{\n    // b=AS:4000\n    push: 'bandwidth',\n    reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n    names: ['type', 'limit'],\n    format: '%s:%s'\n  }],\n  m: [{\n    // m=video 51744 RTP/AVP 126 97 98 34 31\n    // NB: special - pushes to session\n    // TODO: rtp/fmtp should be filtered by the payloads found here?\n    reg: /^(\\w*) (\\d*) ([\\w/]*)(?: (.*))?/,\n    names: ['type', 'port', 'protocol', 'payloads'],\n    format: '%s %d %s %s'\n  }],\n  a: [\n    {\n      // a=rtpmap:110 opus/48000/2\n      push: 'rtp',\n      reg: /^rtpmap:(\\d*) ([\\w\\-.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n      names: ['payload', 'codec', 'rate', 'encoding'],\n      format: function (o) {\n        return (o.encoding)\n          ? 'rtpmap:%d %s/%s/%s'\n          : o.rate\n            ? 'rtpmap:%d %s/%s'\n            : 'rtpmap:%d %s';\n      }\n    },\n    {\n      // a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n      // a=fmtp:111 minptime=10; useinbandfec=1\n      push: 'fmtp',\n      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n      names: ['payload', 'config'],\n      format: 'fmtp:%d %s'\n    },\n    {\n      // a=control:streamid=0\n      name: 'control',\n      reg: /^control:(.*)/,\n      format: 'control:%s'\n    },\n    {\n      // a=rtcp:65179 IN IP4 193.84.77.194\n      name: 'rtcp',\n      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n      names: ['port', 'netType', 'ipVer', 'address'],\n      format: function (o) {\n        return (o.address != null)\n          ? 'rtcp:%d %s IP%d %s'\n          : 'rtcp:%d';\n      }\n    },\n    {\n      // a=rtcp-fb:98 trr-int 100\n      push: 'rtcpFbTrrInt',\n      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n      names: ['payload', 'value'],\n      format: 'rtcp-fb:%s trr-int %d'\n    },\n    {\n      // a=rtcp-fb:98 nack rpsi\n      push: 'rtcpFb',\n      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n      names: ['payload', 'type', 'subtype'],\n      format: function (o) {\n        return (o.subtype != null)\n          ? 'rtcp-fb:%s %s %s'\n          : 'rtcp-fb:%s %s';\n      }\n    },\n    {\n      // a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n      // a=extmap:1/recvonly URI-gps-string\n      // a=extmap:3 urn:ietf:params:rtp-hdrext:encrypt urn:ietf:params:rtp-hdrext:smpte-tc 25@600/24\n      push: 'ext',\n      reg: /^extmap:(\\d+)(?:\\/(\\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\\S*)(?: (\\S*))?/,\n      names: ['value', 'direction', 'encrypt-uri', 'uri', 'config'],\n      format: function (o) {\n        return (\n          'extmap:%d' +\n          (o.direction ? '/%s' : '%v') +\n          (o['encrypt-uri'] ? ' %s' : '%v') +\n          ' %s' +\n          (o.config ? ' %s' : '')\n        );\n      }\n    },\n    {\n      // a=extmap-allow-mixed\n      name: 'extmapAllowMixed',\n      reg: /^(extmap-allow-mixed)/\n    },\n    {\n      // a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n      push: 'crypto',\n      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n      names: ['id', 'suite', 'config', 'sessionConfig'],\n      format: function (o) {\n        return (o.sessionConfig != null)\n          ? 'crypto:%d %s %s %s'\n          : 'crypto:%d %s %s';\n      }\n    },\n    {\n      // a=setup:actpass\n      name: 'setup',\n      reg: /^setup:(\\w*)/,\n      format: 'setup:%s'\n    },\n    {\n      // a=connection:new\n      name: 'connectionType',\n      reg: /^connection:(new|existing)/,\n      format: 'connection:%s'\n    },\n    {\n      // a=mid:1\n      name: 'mid',\n      reg: /^mid:([^\\s]*)/,\n      format: 'mid:%s'\n    },\n    {\n      // a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n      name: 'msid',\n      reg: /^msid:(.*)/,\n      format: 'msid:%s'\n    },\n    {\n      // a=ptime:20\n      name: 'ptime',\n      reg: /^ptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'ptime:%d'\n    },\n    {\n      // a=maxptime:60\n      name: 'maxptime',\n      reg: /^maxptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'maxptime:%d'\n    },\n    {\n      // a=sendrecv\n      name: 'direction',\n      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n    },\n    {\n      // a=ice-lite\n      name: 'icelite',\n      reg: /^(ice-lite)/\n    },\n    {\n      // a=ice-ufrag:F7gI\n      name: 'iceUfrag',\n      reg: /^ice-ufrag:(\\S*)/,\n      format: 'ice-ufrag:%s'\n    },\n    {\n      // a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n      name: 'icePwd',\n      reg: /^ice-pwd:(\\S*)/,\n      format: 'ice-pwd:%s'\n    },\n    {\n      // a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n      name: 'fingerprint',\n      reg: /^fingerprint:(\\S*) (\\S*)/,\n      names: ['type', 'hash'],\n      format: 'fingerprint:%s %s'\n    },\n    {\n      // a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n      // a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10\n      // a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10\n      push:'candidates',\n      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,\n      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],\n      format: function (o) {\n        var str = 'candidate:%s %d %s %d %s %d typ %s';\n\n        str += (o.raddr != null) ? ' raddr %s rport %d' : '%v%v';\n\n        // NB: candidate has three optional chunks, so %void middles one if it's missing\n        str += (o.tcptype != null) ? ' tcptype %s' : '%v';\n\n        if (o.generation != null) {\n          str += ' generation %d';\n        }\n\n        str += (o['network-id'] != null) ? ' network-id %d' : '%v';\n        str += (o['network-cost'] != null) ? ' network-cost %d' : '%v';\n        return str;\n      }\n    },\n    {\n      // a=end-of-candidates (keep after the candidates line for readability)\n      name: 'endOfCandidates',\n      reg: /^(end-of-candidates)/\n    },\n    {\n      // a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n      name: 'remoteCandidates',\n      reg: /^remote-candidates:(.*)/,\n      format: 'remote-candidates:%s'\n    },\n    {\n      // a=ice-options:google-ice\n      name: 'iceOptions',\n      reg: /^ice-options:(\\S*)/,\n      format: 'ice-options:%s'\n    },\n    {\n      // a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n      push: 'ssrcs',\n      reg: /^ssrc:(\\d*) ([\\w_-]*)(?::(.*))?/,\n      names: ['id', 'attribute', 'value'],\n      format: function (o) {\n        var str = 'ssrc:%d';\n        if (o.attribute != null) {\n          str += ' %s';\n          if (o.value != null) {\n            str += ':%s';\n          }\n        }\n        return str;\n      }\n    },\n    {\n      // a=ssrc-group:FEC 1 2\n      // a=ssrc-group:FEC-FR 3004364195 1080772241\n      push: 'ssrcGroups',\n      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E\n      reg: /^ssrc-group:([\\x21\\x23\\x24\\x25\\x26\\x27\\x2A\\x2B\\x2D\\x2E\\w]*) (.*)/,\n      names: ['semantics', 'ssrcs'],\n      format: 'ssrc-group:%s %s'\n    },\n    {\n      // a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n      name: 'msidSemantic',\n      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n      names: ['semantic', 'token'],\n      format: 'msid-semantic: %s %s' // space after ':' is not accidental\n    },\n    {\n      // a=group:BUNDLE audio video\n      push: 'groups',\n      reg: /^group:(\\w*) (.*)/,\n      names: ['type', 'mids'],\n      format: 'group:%s %s'\n    },\n    {\n      // a=rtcp-mux\n      name: 'rtcpMux',\n      reg: /^(rtcp-mux)/\n    },\n    {\n      // a=rtcp-rsize\n      name: 'rtcpRsize',\n      reg: /^(rtcp-rsize)/\n    },\n    {\n      // a=sctpmap:5000 webrtc-datachannel 1024\n      name: 'sctpmap',\n      reg: /^sctpmap:([\\w_/]*) (\\S*)(?: (\\S*))?/,\n      names: ['sctpmapNumber', 'app', 'maxMessageSize'],\n      format: function (o) {\n        return (o.maxMessageSize != null)\n          ? 'sctpmap:%s %s %s'\n          : 'sctpmap:%s %s';\n      }\n    },\n    {\n      // a=x-google-flag:conference\n      name: 'xGoogleFlag',\n      reg: /^x-google-flag:([^\\s]*)/,\n      format: 'x-google-flag:%s'\n    },\n    {\n      // a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0\n      push: 'rids',\n      reg: /^rid:([\\d\\w]+) (\\w+)(?: ([\\S| ]*))?/,\n      names: ['id', 'direction', 'params'],\n      format: function (o) {\n        return (o.params) ? 'rid:%s %s %s' : 'rid:%s %s';\n      }\n    },\n    {\n      // a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]\n      // a=imageattr:* send [x=800,y=640] recv *\n      // a=imageattr:100 recv [x=320,y=240]\n      push: 'imageattrs',\n      reg: new RegExp(\n        // a=imageattr:97\n        '^imageattr:(\\\\d+|\\\\*)' +\n        // send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320]\n        '[\\\\s\\\\t]+(send|recv)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*)' +\n        // recv [x=330,y=250]\n        '(?:[\\\\s\\\\t]+(recv|send)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*))?'\n      ),\n      names: ['pt', 'dir1', 'attrs1', 'dir2', 'attrs2'],\n      format: function (o) {\n        return 'imageattr:%s %s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8\n      // a=simulcast:recv 1;4,5 send 6;7\n      name: 'simulcast',\n      reg: new RegExp(\n        // a=simulcast:\n        '^simulcast:' +\n        // send 1,2,3;~4,~5\n        '(send|recv) ([a-zA-Z0-9\\\\-_~;,]+)' +\n        // space + recv 6;~7,~8\n        '(?:\\\\s?(send|recv) ([a-zA-Z0-9\\\\-_~;,]+))?' +\n        // end\n        '$'\n      ),\n      names: ['dir1', 'list1', 'dir2', 'list2'],\n      format: function (o) {\n        return 'simulcast:%s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // old simulcast draft 03 (implemented by Firefox)\n      //   https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03\n      // a=simulcast: recv pt=97;98 send pt=97\n      // a=simulcast: send rid=5;6;7 paused=6,7\n      name: 'simulcast_03',\n      reg: /^simulcast:[\\s\\t]+([\\S+\\s\\t]+)$/,\n      names: ['value'],\n      format: 'simulcast: %s'\n    },\n    {\n      // a=framerate:25\n      // a=framerate:29.97\n      name: 'framerate',\n      reg: /^framerate:(\\d+(?:$|\\.\\d+))/,\n      format: 'framerate:%s'\n    },\n    {\n      // RFC4570\n      // a=source-filter: incl IN IP4 239.5.2.31 10.1.15.5\n      name: 'sourceFilter',\n      reg: /^source-filter: *(excl|incl) (\\S*) (IP4|IP6|\\*) (\\S*) (.*)/,\n      names: ['filterMode', 'netType', 'addressTypes', 'destAddress', 'srcList'],\n      format: 'source-filter: %s %s %s %s %s'\n    },\n    {\n      // a=bundle-only\n      name: 'bundleOnly',\n      reg: /^(bundle-only)/\n    },\n    {\n      // a=label:1\n      name: 'label',\n      reg: /^label:(.+)/,\n      format: 'label:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-5\n      name: 'sctpPort',\n      reg: /^sctp-port:(\\d+)$/,\n      format: 'sctp-port:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-6\n      name: 'maxMessageSize',\n      reg: /^max-message-size:(\\d+)$/,\n      format: 'max-message-size:%s'\n    },\n    {\n      // RFC7273\n      // a=ts-refclk:ptp=IEEE1588-2008:39-A7-94-FF-FE-07-CB-D0:37\n      push:'tsRefClocks',\n      reg: /^ts-refclk:([^\\s=]*)(?:=(\\S*))?/,\n      names: ['clksrc', 'clksrcExt'],\n      format: function (o) {\n        return 'ts-refclk:%s' + (o.clksrcExt != null ? '=%s' : '');\n      }\n    },\n    {\n      // RFC7273\n      // a=mediaclk:direct=963214424\n      name:'mediaClk',\n      reg: /^mediaclk:(?:id=(\\S*))? *([^\\s=]*)(?:=(\\S*))?(?: *rate=(\\d+)\\/(\\d+))?/,\n      names: ['id', 'mediaClockName', 'mediaClockValue', 'rateNumerator', 'rateDenominator'],\n      format: function (o) {\n        var str = 'mediaclk:';\n        str += (o.id != null ? 'id=%s %s' : '%v%s');\n        str += (o.mediaClockValue != null ? '=%s' : '');\n        str += (o.rateNumerator != null ? ' rate=%s' : '');\n        str += (o.rateDenominator != null ? '/%s' : '');\n        return str;\n      }\n    },\n    {\n      // a=keywds:keywords\n      name: 'keywords',\n      reg: /^keywds:(.+)$/,\n      format: 'keywds:%s'\n    },\n    {\n      // a=content:main\n      name: 'content',\n      reg: /^content:(.+)/,\n      format: 'content:%s'\n    },\n    // BFCP https://tools.ietf.org/html/rfc4583\n    {\n      // a=floorctrl:c-s\n      name: 'bfcpFloorCtrl',\n      reg: /^floorctrl:(c-only|s-only|c-s)/,\n      format: 'floorctrl:%s'\n    },\n    {\n      // a=confid:1\n      name: 'bfcpConfId',\n      reg: /^confid:(\\d+)/,\n      format: 'confid:%s'\n    },\n    {\n      // a=userid:1\n      name: 'bfcpUserId',\n      reg: /^userid:(\\d+)/,\n      format: 'userid:%s'\n    },\n    {\n      // a=floorid:1\n      name: 'bfcpFloorId',\n      reg: /^floorid:(.+) (?:m-stream|mstrm):(.+)/,\n      names: ['id', 'mStream'],\n      format: 'floorid:%s mstrm:%s'\n    },\n    {\n      // any a= that we don't understand is kept verbatim on media.invalid\n      push: 'invalid',\n      names: ['value']\n    }\n  ]\n};\n\n// set sensible defaults to avoid polluting the grammar with boring details\nObject.keys(grammar).forEach(function (key) {\n  var objs = grammar[key];\n  objs.forEach(function (obj) {\n    if (!obj.reg) {\n      obj.reg = /(.*)/;\n    }\n    if (!obj.format) {\n      obj.format = '%s';\n    }\n  });\n});\n", "var toIntIfInt = function (v) {\n  return String(Number(v)) === v ? Number(v) : v;\n};\n\nvar attachProperties = function (match, location, names, rawName) {\n  if (rawName && !names) {\n    location[rawName] = toIntIfInt(match[1]);\n  }\n  else {\n    for (var i = 0; i < names.length; i += 1) {\n      if (match[i+1] != null) {\n        location[names[i]] = toIntIfInt(match[i+1]);\n      }\n    }\n  }\n};\n\nvar parseReg = function (obj, location, content) {\n  var needsBlank = obj.name && obj.names;\n  if (obj.push && !location[obj.push]) {\n    location[obj.push] = [];\n  }\n  else if (needsBlank && !location[obj.name]) {\n    location[obj.name] = {};\n  }\n  var keyLocation = obj.push ?\n    {} :  // blank object that will be pushed\n    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\n  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\n  if (obj.push) {\n    location[obj.push].push(keyLocation);\n  }\n};\n\nvar grammar = require('./grammar');\nvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\nexports.parse = function (sdp) {\n  var session = {}\n    , media = []\n    , location = session; // points at where properties go under (one of the above)\n\n  // parse lines we understand\n  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n    var type = l[0];\n    var content = l.slice(2);\n    if (type === 'm') {\n      media.push({rtp: [], fmtp: []});\n      location = media[media.length-1]; // point at latest media line\n    }\n\n    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n      var obj = grammar[type][j];\n      if (obj.reg.test(content)) {\n        return parseReg(obj, location, content);\n      }\n    }\n  });\n\n  session.media = media; // link it up\n  return session;\n};\n\nvar paramReducer = function (acc, expr) {\n  var s = expr.split(/=(.+)/, 2);\n  if (s.length === 2) {\n    acc[s[0]] = toIntIfInt(s[1]);\n  } else if (s.length === 1 && expr.length > 1) {\n    acc[s[0]] = undefined;\n  }\n  return acc;\n};\n\nexports.parseParams = function (str) {\n  return str.split(/;\\s?/).reduce(paramReducer, {});\n};\n\n// For backward compatibility - alias will be removed in 3.0.0\nexports.parseFmtpConfig = exports.parseParams;\n\nexports.parsePayloads = function (str) {\n  return str.toString().split(' ').map(Number);\n};\n\nexports.parseRemoteCandidates = function (str) {\n  var candidates = [];\n  var parts = str.split(' ').map(toIntIfInt);\n  for (var i = 0; i < parts.length; i += 3) {\n    candidates.push({\n      component: parts[i],\n      ip: parts[i + 1],\n      port: parts[i + 2]\n    });\n  }\n  return candidates;\n};\n\nexports.parseImageAttributes = function (str) {\n  return str.split(' ').map(function (item) {\n    return item.substring(1, item.length-1).split(',').reduce(paramReducer, {});\n  });\n};\n\nexports.parseSimulcastStreamList = function (str) {\n  return str.split(';').map(function (stream) {\n    return stream.split(',').map(function (format) {\n      var scid, paused = false;\n\n      if (format[0] !== '~') {\n        scid = toIntIfInt(format);\n      } else {\n        scid = toIntIfInt(format.substring(1, format.length));\n        paused = true;\n      }\n\n      return {\n        scid: scid,\n        paused: paused\n      };\n    });\n  });\n};\n", "var grammar = require('./grammar');\n\n// customized util.format - discards excess arguments and can void middle ones\nvar formatRegExp = /%[sdv%]/g;\nvar format = function (formatStr) {\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  return formatStr.replace(formatRegExp, function (x) {\n    if (i >= len) {\n      return x; // missing argument\n    }\n    var arg = args[i];\n    i += 1;\n    switch (x) {\n    case '%%':\n      return '%';\n    case '%s':\n      return String(arg);\n    case '%d':\n      return Number(arg);\n    case '%v':\n      return '';\n    }\n  });\n  // NB: we discard excess arguments - they are typically undefined from makeLine\n};\n\nvar makeLine = function (type, obj, location) {\n  var str = obj.format instanceof Function ?\n    (obj.format(obj.push ? location : location[obj.name])) :\n    obj.format;\n\n  var args = [type + '=' + str];\n  if (obj.names) {\n    for (var i = 0; i < obj.names.length; i += 1) {\n      var n = obj.names[i];\n      if (obj.name) {\n        args.push(location[obj.name][n]);\n      }\n      else { // for mLine and push attributes\n        args.push(location[obj.names[i]]);\n      }\n    }\n  }\n  else {\n    args.push(location[obj.name]);\n  }\n  return format.apply(null, args);\n};\n\n// RFC specified order\n// TODO: extend this with all the rest\nvar defaultOuterOrder = [\n  'v', 'o', 's', 'i',\n  'u', 'e', 'p', 'c',\n  'b', 't', 'r', 'z', 'a'\n];\nvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\n\nmodule.exports = function (session, opts) {\n  opts = opts || {};\n  // ensure certain properties exist\n  if (session.version == null) {\n    session.version = 0; // 'v=0' must be there (only defined version atm)\n  }\n  if (session.name == null) {\n    session.name = ' '; // 's= ' must be there if no meaningful name set\n  }\n  session.media.forEach(function (mLine) {\n    if (mLine.payloads == null) {\n      mLine.payloads = '';\n    }\n  });\n\n  var outerOrder = opts.outerOrder || defaultOuterOrder;\n  var innerOrder = opts.innerOrder || defaultInnerOrder;\n  var sdp = [];\n\n  // loop through outerOrder for matching properties on session\n  outerOrder.forEach(function (type) {\n    grammar[type].forEach(function (obj) {\n      if (obj.name in session && session[obj.name] != null) {\n        sdp.push(makeLine(type, obj, session));\n      }\n      else if (obj.push in session && session[obj.push] != null) {\n        session[obj.push].forEach(function (el) {\n          sdp.push(makeLine(type, obj, el));\n        });\n      }\n    });\n  });\n\n  // then for each media line, follow the innerOrder\n  session.media.forEach(function (mLine) {\n    sdp.push(makeLine('m', grammar.m[0], mLine));\n\n    innerOrder.forEach(function (type) {\n      grammar[type].forEach(function (obj) {\n        if (obj.name in mLine && mLine[obj.name] != null) {\n          sdp.push(makeLine(type, obj, mLine));\n        }\n        else if (obj.push in mLine && mLine[obj.push] != null) {\n          mLine[obj.push].forEach(function (el) {\n            sdp.push(makeLine(type, obj, el));\n          });\n        }\n      });\n    });\n  });\n\n  return sdp.join('\\r\\n') + '\\r\\n';\n};\n", "var parser = require('./parser');\nvar writer = require('./writer');\nvar grammar = require('./grammar');\n\nexports.grammar = grammar;\nexports.write = writer;\nexports.parse = parser.parse;\nexports.parseParams = parser.parseParams;\nexports.parseFmtpConfig = parser.parseFmtpConfig; // Alias of parseParams().\nexports.parsePayloads = parser.parsePayloads;\nexports.parseRemoteCandidates = parser.parseRemoteCandidates;\nexports.parseImageAttributes = parser.parseImageAttributes;\nexports.parseSimulcastStreamList = parser.parseSimulcastStreamList;\n", "/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v1.0.41\n   Copyright Â© 2012-2025 Faisal Salman <f@faisalman.com>\n   MIT License *//*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment. \n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '1.0.41',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major',\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 500;\n\n    var AMAZON  = 'Amazon',\n        APPLE   = 'Apple',\n        ASUS    = 'ASUS',\n        BLACKBERRY = 'BlackBerry',\n        BROWSER = 'Browser',\n        CHROME  = 'Chrome',\n        EDGE    = 'Edge',\n        FIREFOX = 'Firefox',\n        GOOGLE  = 'Google',\n        HONOR   = 'Honor',\n        HUAWEI  = 'Huawei',\n        LENOVO  = 'Lenovo',\n        LG      = 'LG',\n        MICROSOFT = 'Microsoft',\n        MOTOROLA  = 'Motorola',\n        NVIDIA  = 'Nvidia',\n        ONEPLUS = 'OnePlus',\n        OPERA   = 'Opera',\n        OPPO    = 'OPPO',\n        SAMSUNG = 'Samsung',\n        SHARP   = 'Sharp',\n        SONY    = 'Sony',\n        XIAOMI  = 'Xiaomi',\n        ZEBRA   = 'Zebra',\n        FACEBOOK    = 'Facebook',\n        CHROMIUM_OS = 'Chromium OS',\n        MAC_OS  = 'Mac OS',\n        SUFFIX_BROWSER = ' Browser';\n\n    ///////////\n    // Helper\n    //////////\n\n    var extend = function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        enumerize = function (arr) {\n            var enums = {};\n            for (var i=0; i<arr.length; i++) {\n                enums[arr[i].toUpperCase()] = arr[i];\n            }\n            return enums;\n        },\n        has = function (str1, str2) {\n            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n        },\n        lowerize = function (str) {\n            return str.toLowerCase();\n        },\n        majorize = function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split('.')[0] : undefined;\n        },\n        trim = function (str, len) {\n            if (typeof(str) === STR_TYPE) {\n                str = str.replace(/^\\s\\s*/, EMPTY);\n                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n            }\n    };\n\n    ///////////////\n    // Map helper\n    //////////////\n\n    var rgxMapper = function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    if (!regex[j]) { break; }\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length === 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length === 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length === 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        strMapper = function (str, map) {\n\n            for (var i in map) {\n                // check if current value is array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return map.hasOwnProperty('*') ? map['*'] : str;\n    };\n\n    ///////////////\n    // String map\n    //////////////\n\n    // Safari < 3.0\n    var oldSafariMap = {\n            '1.0'   : '/8',\n            '1.2'   : '/1',\n            '1.3'   : '/3',\n            '2.0'   : '/412',\n            '2.0.2' : '/416',\n            '2.0.3' : '/417',\n            '2.0.4' : '/419',\n            '?'     : '/'\n        },\n        windowsVersionMap = {\n            'ME'        : '4.90',\n            'NT 3.11'   : 'NT3.51',\n            'NT 4.0'    : 'NT4.0',\n            '2000'      : 'NT 5.0',\n            'XP'        : ['NT 5.1', 'NT 5.2'],\n            'Vista'     : 'NT 6.0',\n            '7'         : 'NT 6.1',\n            '8'         : 'NT 6.2',\n            '8.1'       : 'NT 6.3',\n            '10'        : ['NT 6.4', 'NT 10.0'],\n            'RT'        : 'ARM'\n    };\n\n    //////////////\n    // Regex map\n    /////////////\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera mini)\\/([-\\w\\.]+)/i,                                        // Opera Mini\n            /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,                 // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i                           // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/ ]+([\\w\\.]+)/i                                             // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, OPERA+' Mini']], [\n            /\\bop(?:rg)?x\\/([\\w\\.]+)/i                                          // Opera GX\n            ], [VERSION, [NAME, OPERA+' GX']], [\n            /\\bopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, OPERA]], [\n\n            // Mixed\n            /\\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\\/ ]?([\\w\\.]+)/i            // Baidu\n            ], [VERSION, [NAME, 'Baidu']], [\n            /\\b(?:mxbrowser|mxios|myie2)\\/?([-\\w\\.]*)\\b/i                       // Maxthon\n            ], [VERSION, [NAME, 'Maxthon']], [\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\\/ ]?([\\w\\.]*)/i,      \n                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer/Sleipnir\n            // Trident based\n            /(avant|iemobile|slim(?:browser|boat|jet))[\\/ ]?([\\d\\.]*)/i,        // Avant/IEMobile/SlimBrowser/SlimBoat/Slimjet\n            /(?:ms|\\()(ie) ([\\w\\.]+)/i,                                         // Internet Explorer\n\n            // Blink/Webkit/KHTML based                                         // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\\/([-\\w\\.]+)/i,\n                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ//Vivaldi/DuckDuckGo/Klar/Helio/Dragon\n            /(heytap|ovi|115)browser\\/([\\d\\.]+)/i,                              // HeyTap/Ovi/115\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /quark(?:pc)?\\/([-\\w\\.]+)/i                                         // Quark\n            ], [VERSION, [NAME, 'Quark']], [\n            /\\bddg\\/([\\w\\.]+)/i                                                 // DuckDuckGo\n            ], [VERSION, [NAME, 'DuckDuckGo']], [\n            /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i                 // UCBrowser\n            ], [VERSION, [NAME, 'UC'+BROWSER]], [\n            /microm.+\\bqbcore\\/([\\w\\.]+)/i,                                     // WeChat Desktop for Windows Built-in Browser\n            /\\bqbcore\\/([\\w\\.]+).+microm/i,\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i                       // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /ya(?:search)?browser\\/([\\w\\.]+)/i                                  // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /slbrowser\\/([\\w\\.]+)/i                                             // Smart Lenovo Browser\n            ], [VERSION, [NAME, 'Smart Lenovo '+BROWSER]], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [\n            /\\bfocus\\/([\\w\\.]+)/i                                               // Firefox Focus\n            ], [VERSION, [NAME, FIREFOX+' Focus']], [\n            /\\bopt\\/([\\w\\.]+)/i                                                 // Opera Touch\n            ], [VERSION, [NAME, OPERA+' Touch']], [\n            /coc_coc\\w+\\/([\\w\\.]+)/i                                            // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, OPERA+' Coast']], [\n            /miuibrowser\\/([\\w\\.]+)/i                                           // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI' + SUFFIX_BROWSER]], [\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, FIREFOX]], [\n            /\\bqihoobrowser\\/?([\\w\\.]*)/i                                       // 360\n            ], [VERSION, [NAME, '360']], [\n            /\\b(qq)\\/([\\w\\.]+)/i                                                // QQ\n            ], [[NAME, /(.+)/, '$1Browser'], VERSION], [\n            /(oculus|sailfish|huawei|vivo|pico)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1' + SUFFIX_BROWSER], VERSION], [              // Oculus/Sailfish/HuaweiBrowser/VivoBrowser/PicoBrowser\n            /samsungbrowser\\/([\\w\\.]+)/i                                        // Samsung Internet\n            ], [VERSION, [NAME, SAMSUNG + ' Internet']], [\n            /metasr[\\/ ]?([\\d\\.]+)/i                                            // Sogou Explorer\n            ], [VERSION, [NAME, 'Sogou Explorer']], [\n            /(sogou)mo\\w+\\/([\\d\\.]+)/i                                          // Sogou Mobile\n            ], [[NAME, 'Sogou Mobile'], VERSION], [\n            /(electron)\\/([\\w\\.]+) safari/i,                                    // Electron-based App\n            /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,                   // Tesla\n            /m?(qqbrowser|2345(?=browser|chrome|explorer))\\w*[\\/ ]?v?([\\w\\.]+)/i   // QQ/2345\n            ], [NAME, VERSION], [\n            /(lbbrowser|rekonq)/i,                                              // LieBao Browser/Rekonq\n            /\\[(linkedin)app\\]/i                                                // LinkedIn App for iOS & Android\n            ], [NAME], [\n            /ome\\/([\\w\\.]+) \\w* ?(iron) saf/i,                                  // Iron\n            /ome\\/([\\w\\.]+).+qihu (360)[es]e/i                                  // 360\n            ], [VERSION, NAME], [\n\n            // WebView\n            /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i       // Facebook App for iOS & Android\n            ], [[NAME, FACEBOOK], VERSION], [\n            /(Klarna)\\/([\\w\\.]+)/i,                                             // Klarna Shopping Browser for iOS & Android\n            /(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,                             // Kakao App\n            /(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,                                  // Naver InApp\n            /(daum)apps[\\/ ]([\\w\\.]+)/i,                                        // Daum App\n            /safari (line)\\/([\\w\\.]+)/i,                                        // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(alipay)client\\/([\\w\\.]+)/i,                                       // Alipay\n            /(twitter)(?:and| f.+e\\/([\\w\\.]+))/i,                               // Twitter\n            /(chromium|instagram|snapchat)[\\/ ]([-\\w\\.]+)/i                     // Chromium/Instagram/Snapchat\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+) .*safari\\//i                                      // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n            /musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i                        // TikTok\n            ], [VERSION, [NAME, 'TikTok']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)| )/i                                  // Chrome Headless\n            ], [VERSION, [NAME, CHROME+' Headless']], [\n\n            / wv\\).+(chrome)\\/([\\w\\.]+)/i                                       // Chrome WebView\n            ], [[NAME, CHROME+' WebView'], VERSION], [\n\n            /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i           // Android Browser\n            ], [VERSION, [NAME, 'Android '+BROWSER]], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i                      // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i                // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i                      // Safari < 3.0\n            ], [NAME, [VERSION, strMapper, oldSafariMap]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i                              // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /(wolvic|librewolf)\\/([\\w\\.]+)/i                                    // Wolvic/LibreWolf\n            ], [NAME, VERSION], [\n            /mobile vr; rv:([\\w\\.]+)\\).+firefox/i                               // Firefox Reality\n            ], [VERSION, [NAME, FIREFOX+' Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\\/ ]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)/i,                                            // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,                         // Mozilla\n\n            // Other\n            /(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Obigo/Mosaic/Go/ICE/UP.Browser/Ladybird\n            /\\b(links) \\(([\\w\\.]+)/i                                            // Links\n            ], [NAME, [VERSION, /_/g, '.']], [\n            \n            /(cobalt)\\/([\\w\\.]+)/i                                              // Cobalt\n            ], [NAME, [VERSION, /master.|lts./, \"\"]]\n        ],\n\n        cpu : [[\n\n            /\\b((amd|x|x86[-_]?|wow|win)64)\\b/i                                 // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i,                                                     // IA32 (quicktime)\n            /\\b((i[346]|x)86)(pc)?\\b/i                                          // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|arm(v?[89]e?l?|_?64))\\b/i                               // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(v[67])?ht?n?[fl]p?)\\b/i                                     // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /( (ce|mobile); ppc;|\\/[\\w\\.]+arm\\b)/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((ppc|powerpc)(64)?)( mac|;|\\))/i                                  // PowerPC\n            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [\n\n            / sun4\\w[;\\)]/i                                                     // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /\\b(avr32|ia64(?=;)|68k(?=\\))|\\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-(?![lr])\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,\n            /samsung[- ]((?!sm-[lr])[-\\w]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [\n\n            // Apple\n            /(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i                          // iPod/iPhone\n            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [\n            /\\((ipad);[-\\w\\),; ]+apple/i,                                       // iPad\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [\n            /(macintosh);/i\n            ], [MODEL, [VENDOR, APPLE]], [\n\n            // Sharp\n            /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n            ], [MODEL, [VENDOR, SHARP], [TYPE, MOBILE]], [\n\n            // Honor\n            /\\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\\)|;)/i\n            ], [MODEL, [VENDOR, HONOR], [TYPE, TABLET]], [\n            /honor([-\\w ]+)[;\\)]/i\n            ], [MODEL, [VENDOR, HONOR], [TYPE, MOBILE]], [\n\n            // Huawei\n            /\\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\\w\\. ]*(?= bui|\\)))\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [\n            /(?:huawei)([-\\w ]+)[;\\)]/i,\n            /\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /oid[^\\)]+; (2[\\dbc]{4}(182|283|rp\\w{2})[cgl]|m2105k81a?c)(?: bui|\\))/i,\n            /\\b((?:red)?mi[-_ ]?pad[\\w- ]*)(?: bui|\\))/i                                // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [\n\n            /\\b(poco[\\w ]+|m2\\d{3}j\\d\\d[a-z]{2})(?: bui|\\))/i,                  // Xiaomi POCO\n            /\\b; (\\w+) build\\/hm\\1/i,                                           // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,                             // Xiaomi Hongmi\n            /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,                   // Xiaomi Redmi\n            /oid[^\\)]+; (m?[12][0-389][01]\\w{3,6}[c-y])( bui|; wv|\\))/i,        // Xiaomi Redmi 'numeric' models\n            /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\\))/i, // Xiaomi Mi\n            / ([\\w ]+) miui\\/v?\\d/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [\n\n            // OPPO\n            /; (\\w+) bui.+ oppo/i,\n            /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n            ], [MODEL, [VENDOR, OPPO], [TYPE, MOBILE]], [\n            /\\b(opd2(\\d{3}a?))(?: bui|\\))/i\n            ], [MODEL, [VENDOR, strMapper, { 'OnePlus' : ['304', '403', '203'], '*' : OPPO }], [TYPE, TABLET]], [\n\n            // Vivo\n            /vivo (\\w+)(?: bui|\\))/i,\n            /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\b(rmx[1-3]\\d{3})(?: bui|;|\\))/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n            /\\bmot(?:orola)?[- ](\\w*)/i,\n            /((?:moto(?! 360)[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [\n            /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [\n            /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n            /\\blg[-e;\\/ ]+((?!browser|netcast|android tv|watch)\\w+)/i,\n            /\\blg-?([\\d\\w]+) bui/i\n            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[-\\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\\d{3,4}(?:f[cu]|xu|[av])|yt\\d?-[jx]?\\d+[lfmx])( bui|;|\\)|\\/)/i,\n            /lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\\w- ]+?)|tb[\\w-]{6,7})( bui|;|\\)|\\/)/i\n            ], [MODEL, [VENDOR, LENOVO], [TYPE, TABLET]], [\n\n            // Nokia\n            /(nokia) (t[12][01])/i\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n            /(?:maemo|nokia).*(n900|lumia \\d+|rm-\\d+)/i,\n            /nokia[-_ ]?(([-\\w\\. ]*))/i\n            ], [[MODEL, /_/g, ' '], [TYPE, MOBILE], [VENDOR, 'Nokia']], [\n\n            // Google\n            /(pixel (c|tablet))\\b/i                                             // Google Pixel C/Tablet\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [\n            /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i                         // Google Pixel\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+; (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [\n            /sony tablet [ps]/i,\n            /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [\n\n            // OnePlus\n            / (kb2005|in20[12]5|be20[12][59])\\b/i,\n            /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n            ], [MODEL, [VENDOR, ONEPLUS], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi|aeo(?!bc)\\w\\w)( bui|\\))/i,                           // Kindle Fire without Silk / Echo Show\n            /(kf[a-z]+)( bui|\\)).+silk\\//i                                      // Kindle Fire HD\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [\n            /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i                     // Fire Phone\n            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /(playbook);[-\\w\\),; ]+(rim)/i                                      // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10; (\\w+)/i                                                    // BlackBerry 10\n            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [\n            / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus 9)/i                                                        // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,                         // HTC\n\n            // ZTE\n            /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n            /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // TCL\n            /droid [\\w\\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\\w*(\\)| bui)/i\n            ], [MODEL, [VENDOR, 'TCL'], [TYPE, TABLET]], [\n\n            // itel\n            /(itel) ((\\w+))/i\n            ], [[VENDOR, lowerize], MODEL, [TYPE, strMapper, { 'tablet' : ['p10001l', 'w7001'], '*' : 'mobile' }]], [\n\n            // Acer\n            /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+; (m[1-5] note) bui/i,\n            /\\bmz-([-\\w]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n                \n            // Ulefone\n            /; ((?:power )?armor(?:[\\w ]{0,8}))(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Ulefone'], [TYPE, MOBILE]], [\n\n            // Energizer\n            /; (energy ?\\w+)(?: bui|\\))/i,\n            /; energizer ([\\w ]+)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Energizer'], [TYPE, MOBILE]], [\n\n            // Cat\n            /; cat (b35);/i,\n            /; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Cat'], [TYPE, MOBILE]], [\n\n            // Smartfren\n            /((?:new )?andromax[\\w- ]+)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Smartfren'], [TYPE, MOBILE]], [\n\n            // Nothing\n            /droid.+; (a(?:015|06[35]|142p?))/i\n            ], [MODEL, [VENDOR, 'Nothing'], [TYPE, MOBILE]], [\n\n            // Archos\n            /; (x67 5g|tikeasy \\w+|ac[1789]\\d\\w+)( b|\\))/i,\n            /archos ?(5|gamepad2?|([\\w ]*[t1789]|hello) ?\\d+[\\w ]*)( b|\\))/i\n            ], [MODEL, [VENDOR, 'Archos'], [TYPE, TABLET]], [\n            /archos ([\\w ]+)( b|\\))/i,\n            /; (ac[3-6]\\d\\w{2,8})( b|\\))/i \n            ], [MODEL, [VENDOR, 'Archos'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(imo) (tab \\w+)/i,                                                 // IMO\n            /(infinix) (x1101b?)/i                                              // Infinix XPad\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\\w]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron/Infinix/Tecno/Micromax/Advan\n            /; (hmd|imo) ([\\w ]+?)(?: bui|\\))/i,                                // HMD/IMO\n            /(hp) ([\\w ]+\\w)/i,                                                 // HP iPAQ\n            /(microsoft); (lumia[\\w ]+)/i,                                      // Microsoft Lumia\n            /(lenovo)[-_ ]?([-\\w ]+?)(?: bui|\\)|\\/)/i,                          // Lenovo\n            /(oppo) ?([\\w ]+) bui/i                                             // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(kobo)\\s(ereader|touch)/i,                                         // Kobo\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(nook)[\\w ]+build\\/(\\w+)/i,                                        // Nook\n            /(dell) (strea[kpr\\d ]*[\\dko])/i,                                   // Dell Streak\n            /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,                                  // Le Pan Tablets\n            /(trinity)[- ]*(t\\d{3}) bui/i,                                      // Trinity Tablets\n            /(gigaset)[- ]+(q\\w{1,9}) bui/i,                                    // Gigaset Tablets\n            /(vodafone) ([\\w ]+)(?:\\)| bui)/i                                   // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(surface duo)/i                                                    // Surface Duo\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [\n            /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i                                 // Fairphone\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /(u304aa)/i                                                         // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /\\bsie-(\\w*)/i                                                      // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /\\b(rct\\w+) b/i                                                     // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /\\b(venue[\\d ]{2,7}) b/i                                            // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /\\b(q(?:mv|ta)\\w+) b/i                                              // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i                       // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /\\b(tm\\d{3}\\w+) b/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /\\b(k88) b/i                                                        // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /\\b(nx\\d{3}j) b/i                                                   // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /\\b(gen\\d{3}) b.+49h/i                                              // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /\\b(zur\\d{3}) b/i                                                   // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /\\b((zeki)?tb.*\\b) b/i                                              // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /\\b([yr]\\d{2}) b/i,\n            /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i                                // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /\\b(ns-?\\w{0,9}) b/i                                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /\\b((nxa|next)-?\\w{0,9}) b/i                                        // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [\n            /\\b(lvtel\\-)?(v1[12]) b/i                                           // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /\\b(ph-1) /i                                                        // Essential PH-1\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [\n            /\\b(v(100md|700na|7011|917g).*\\b) b/i                               // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /\\b(trio[-\\w\\. ]+) b/i                                              // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /\\btu_(1491) b/i                                                    // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /((?:tegranote|shield t(?!.+d tv))[\\w- ]*?)(?: b|\\))/i              // Nvidia Tablets\n            ], [MODEL, [VENDOR, NVIDIA], [TYPE, TABLET]], [\n            /(sprint) (\\w+)/i                                                   // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [\n            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i             // Zebra\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [\n            /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [\n            /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i        // LG SmartTV\n            ], [[VENDOR, LG], [TYPE, SMARTTV]], [\n            /(apple) ?tv/i                                                      // Apple TV\n            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [\n            /droid.+aft(\\w+)( bui|\\))/i                                         // Fire TV\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [\n            /(shield \\w+ tv)/i                                                  // Nvidia Shield TV\n            ], [MODEL, [VENDOR, NVIDIA], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i,\n            /(aquos-tv[\\w ]+)\\)/i                                               // Sharp\n            ], [MODEL, [VENDOR, SHARP], [TYPE, SMARTTV]],[\n            /(bravia[\\w ]+)( bui|\\))/i                                              // Sony\n            ], [MODEL, [VENDOR, SONY], [TYPE, SMARTTV]], [\n            /(mi(tv|box)-?\\w+) bui/i                                            // Xiaomi\n            ], [MODEL, [VENDOR, XIAOMI], [TYPE, SMARTTV]], [\n            /Hbbtv.*(technisat) (.*);/i                                         // TechniSAT\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,                          // Roku\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i         // HbbTV devices\n            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [\n                                                                                // SmartTV from Unidentified Vendors\n            /droid.+; ([\\w- ]+) (?:android tv|smart[- ]?tv)/i\n            ], [MODEL, [TYPE, SMARTTV]], [\n            /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /(ouya)/i,                                                          // Ouya\n            /(nintendo) ([wids3utch]+)/i                                        // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+; (shield)( bui|\\))/i                                       // Nvidia Portable\n            ], [MODEL, [VENDOR, NVIDIA], [TYPE, CONSOLE]], [\n            /(playstation \\w+)/i                                                // Playstation\n            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [\n            /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i                                // Microsoft Xbox\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /\\b(sm-[lr]\\d\\d[0156][fnuw]?s?|gear live)\\b/i                       // Samsung Galaxy Watch\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, WEARABLE]], [\n            /((pebble))app/i,                                                   // Pebble\n            /(asus|google|lg|oppo) ((pixel |zen)?watch[\\w ]*)( bui|\\))/i        // Asus ZenWatch / LG Watch / Pixel Watch\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /(ow(?:19|20)?we?[1-3]{1,3})/i                                      // Oppo Watch\n            ], [MODEL, [VENDOR, OPPO], [TYPE, WEARABLE]], [\n            /(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i                              // Apple Watch\n            ], [MODEL, [VENDOR, APPLE], [TYPE, WEARABLE]], [\n            /(opwwe\\d{3})/i                                                     // OnePlus Watch\n            ], [MODEL, [VENDOR, ONEPLUS], [TYPE, WEARABLE]], [\n            /(moto 360)/i                                                       // Motorola 360\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, WEARABLE]], [\n            /(smartwatch 3)/i                                                   // Sony SmartWatch\n            ], [MODEL, [VENDOR, SONY], [TYPE, WEARABLE]], [\n            /(g watch r)/i                                                      // LG G Watch R\n            ], [MODEL, [VENDOR, LG], [TYPE, WEARABLE]], [\n            /droid.+; (wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // XR\n            ///////////////////\n\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /(pico) (4|neo3(?: link|pro)?)/i                                    // Pico\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /; (quest( \\d| pro)?)/i                                             // Oculus Quest\n            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i                              // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n            /(aeobc)\\b/i                                                        // Echo Dot\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, EMBEDDED]], [\n            /(homepod).+mac os/i                                                // Apple HomePod\n            ], [MODEL, [VENDOR, APPLE], [TYPE, EMBEDDED]], [\n            /windows iot/i\n            ], [[TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: bui|; wv\\)|\\) applew).+? mobile safari/i    // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i                      // Unidentifiable Tablet\n            ], [[TYPE, TABLET]], [\n            /(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i    // Unidentifiable Mobile\n            ], [[TYPE, MOBILE]], [\n            /droid .+?; ([\\w\\. -]+)( bui|\\))/i                                  // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n        ],\n\n        engine : [[\n\n            /windows.+ edge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, EDGE+'HTML']], [\n\n            /(arkweb)\\/([\\w\\.]+)/i                                              // ArkWeb\n            ], [NAME, VERSION], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna/Servo\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,                           // KHTML/Tasman/Links\n            /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,                                      // iCab\n\n            /\\b(libweb)/i                                                       // LibWeb\n            ], [NAME, VERSION], [\n            /ladybird\\//i\n            ], [[NAME, 'LibWeb']], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows (?:phone(?: os)?|mobile|iot))[\\/ ]?([\\d\\.\\w ]*)/i         // Windows Phone\n            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [\n            /windows nt 6\\.2; (arm)/i,                                          // Windows RT\n            /windows[\\/ ]([ntce\\d\\. ]+\\w)(?!.+xbox)/i,\n            /(?:win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n            ], [[VERSION, strMapper, windowsVersionMap], [NAME, 'Windows']], [\n\n            // iOS/macOS\n            /[adehimnop]{4,7}\\b(?:.*os ([\\w]+) like mac|; opera)/i,             // iOS\n            /(?:ios;fbsv\\/|iphone.+ios[\\/ ])([\\d\\.]+)/i,\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac os x) ?([\\w\\. ]*)/i,\n            /(macintosh|mac_powerpc\\b)(?!.+haiku)/i                             // Mac OS\n            ], [[NAME, MAC_OS], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes\n            /droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i                    // Android-x86/HarmonyOS\n            ], [VERSION, NAME], [                                               \n            /(ubuntu) ([\\w\\.]+) like android/i                                  // Ubuntu Touch\n            ], [[NAME, /(.+)/, '$1 Touch'], VERSION], [\n                                                                                // Android/Blackberry/WebOS/QNX/Bada/RIM/KaiOS/Maemo/MeeGo/S40/Sailfish OS/OpenHarmony/Tizen\n            /(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\\w*[-\\/; ]?([\\d\\.]*)/i\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, BLACKBERRY]], [\n            /(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\\/ ]?([\\w\\.]*)/i       // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n            ], [VERSION, [NAME, FIREFOX+' OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n            /watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i                              // watchOS\n            ], [VERSION, [NAME, 'watchOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, CHROME+'cast']], [\n            /(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i                                  // Chromium OS\n            ], [[NAME, CHROMIUM_OS], VERSION],[\n\n            // Smart TVs\n            /panasonic;(viera)/i,                                               // Panasonic Viera\n            /(netrange)mmh/i,                                                   // Netrange\n            /(nettv)\\/(\\d+\\.[\\w\\.]+)/i,                                         // NetTV\n\n            // Console\n            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation\n            /(xbox); +xbox ([^\\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // Other\n            /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,                            // Joli/Palm\n            /(mint)[\\/\\(\\) ]?(\\w*)/i,                                           // Mint\n            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux\n            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n            /(hurd|linux)(?: arm\\w*| x86\\w*| ?)([\\w\\.]*)/i,                     // Hurd/Linux\n            /(gnu) ?([\\w\\.]*)/i,                                                // GNU\n            /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n            /(haiku) (\\w+)/i                                                    // Haiku\n            ], [NAME, VERSION], [\n            /(sunos) ?([\\w\\.\\d]*)/i                                             // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,                              // Solaris\n            /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,                                  // AIX\n            /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i, // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX/SerenityOS\n            /(unix) ?([\\w\\.]*)/i                                                // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === OBJ_TYPE) {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _navigator = (typeof window !== UNDEF_TYPE && window.navigator) ? window.navigator : undefined;\n        var _ua = ua || ((_navigator && _navigator.userAgent) ? _navigator.userAgent : EMPTY);\n        var _uach = (_navigator && _navigator.userAgentData) ? _navigator.userAgentData : undefined;\n        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n        var _isSelfNav = _navigator && _navigator.userAgent == _ua;\n\n        this.getBrowser = function () {\n            var _browser = {};\n            _browser[NAME] = undefined;\n            _browser[VERSION] = undefined;\n            rgxMapper.call(_browser, _ua, _rgxmap.browser);\n            _browser[MAJOR] = majorize(_browser[VERSION]);\n            // Brave-specific detection\n            if (_isSelfNav && _navigator && _navigator.brave && typeof _navigator.brave.isBrave == FUNC_TYPE) {\n                _browser[NAME] = 'Brave';\n            }\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = {};\n            _cpu[ARCHITECTURE] = undefined;\n            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = {};\n            _device[VENDOR] = undefined;\n            _device[MODEL] = undefined;\n            _device[TYPE] = undefined;\n            rgxMapper.call(_device, _ua, _rgxmap.device);\n            if (_isSelfNav && !_device[TYPE] && _uach && _uach.mobile) {\n                _device[TYPE] = MOBILE;\n            }\n            // iPadOS-specific detection: identified as Mac, but has some iOS-only properties\n            if (_isSelfNav && _device[MODEL] == 'Macintosh' && _navigator && typeof _navigator.standalone !== UNDEF_TYPE && _navigator.maxTouchPoints && _navigator.maxTouchPoints > 2) {\n                _device[MODEL] = 'iPad';\n                _device[TYPE] = TABLET;\n            }\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = {};\n            _engine[NAME] = undefined;\n            _engine[VERSION] = undefined;\n            rgxMapper.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = {};\n            _os[NAME] = undefined;\n            _os[VERSION] = undefined;\n            rgxMapper.call(_os, _ua, _rgxmap.os);\n            if (_isSelfNav && !_os[NAME] && _uach && _uach.platform && _uach.platform != 'Unknown') {\n                _os[NAME] = _uach.platform  \n                                    .replace(/chrome os/i, CHROMIUM_OS)\n                                    .replace(/macos/i, MAC_OS);           // backward compatibility\n            }\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);\n    UAParser.CPU = enumerize([ARCHITECTURE]);\n    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\n    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n    ///////////\n    // Export\n    //////////\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (typeof window !== UNDEF_TYPE) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (ua) {\n            parser.setUA(ua);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n", "/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseFloat(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n          this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n          this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n    'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator ||\n      !window.navigator.userAgent) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  const {navigator} = window;\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = parseInt(extractVersion(navigator.userAgent,\n      /Firefox\\/(\\d+)\\./, 1));\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = parseInt(extractVersion(navigator.userAgent,\n      /Chrom(e|ium)\\/(\\d+)\\./, 2));\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = parseInt(extractVersion(navigator.userAgent,\n      /AppleWebKit\\/(\\d+)\\./, 1));\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n    // Only for internal usage.\n    result._safariVersion = extractVersion(navigator.userAgent,\n      /Version\\/(\\d+(\\.?\\d+))/, 1);\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nexport function compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nexport function walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nexport function filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n", "/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = (e) => {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', te => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === te.track.id);\n              } else {\n                receiver = {track: te.track};\n              }\n\n              const event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(track => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === track.id);\n              } else {\n                receiver = {track};\n              }\n              const event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nexport function shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack =\n        function addTrack(track, stream) {\n          let sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack =\n        function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          const idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(track => {\n          const sender = this._senders.find(s => s.track === track);\n          if (sender) { // remove sender\n            this._senders.splice(this._senders.indexOf(sender), 1);\n          }\n        });\n      };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nexport function shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        selector]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        utils.filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers =\n        function getReceivers() {\n          const receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(receiver => receiver._pc = this);\n          return receivers;\n        };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        utils.filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams)\n        .map(streamId => this._shimmedLocalStreams[streamId][0]);\n    };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      const sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            this._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (this._shimmedLocalStreams[streamId].length === 1) {\n            delete this._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n}\n\nexport function shimAddTrackRemoveTrack(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n    .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      const nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n      delete this._reverseStreams[(this._streams[stream.id] ?\n        this._streams[stream.id].id : stream.id)];\n      delete this._streams[stream.id];\n    };\n\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      const streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(t => t === track)) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      const oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(() => {\n          this.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        const newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(s => s.track === track);\n    };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n        externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n        internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    const methodObj = {[method]() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n        .then(description => replaceInternalStreamId(this, description));\n    }};\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n    window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n    'localDescription', {\n      get() {\n        const description = origLocalDescription.get.apply(this);\n        if (description.type === '') {\n          return description;\n        }\n        return replaceInternalStreamId(this, description);\n      }\n    });\n\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      const isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n          'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      let stream;\n      Object.keys(this._streams).forEach(streamid => {\n        const hasTrack = this._streams[streamid].getTracks()\n          .find(track => sender.track === track);\n        if (hasTrack) {\n          stream = this._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        const methodObj = {[method]() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n            window.RTCIceCandidate :\n            window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        }};\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n  }\n}\n\n// Attempt to fix ONN in plan-b mode.\nexport function fixNegotiationNeeded(window, browserDetails) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (browserDetails.version < 72 || (pc.getConfiguration &&\n        pc.getConfiguration().sdpSemantics === 'plan-b')) {\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n    }\n    return e;\n  });\n}\n", "/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n            .then(devices => {\n              devices = devices.filter(d => d.kind === 'videoinput');\n              let dev = devices.find(d => matches.some(match =>\n                d.label.toLowerCase().includes(match)));\n              if (!dev && devices.length && matches.includes('back')) {\n                dev = devices[devices.length - 1]; // more likely the back cam\n              }\n              if (dev) {\n                constraints.video.deviceId = face.exact\n                  ? {exact: dev.deviceId}\n                  : {ideal: dev.deviceId};\n              }\n              constraints.video = constraintsToChrome_(constraints.video);\n              logging('chrome: ' + JSON.stringify(constraints));\n              return func(constraints);\n            });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n", "/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nexport function shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      return getSourceId(constraints)\n        .then(sourceId => {\n          const widthSpecified = constraints.video && constraints.video.width;\n          const heightSpecified = constraints.video &&\n            constraints.video.height;\n          const frameRateSpecified = constraints.video &&\n            constraints.video.frameRate;\n          constraints.video = {\n            mandatory: {\n              chromeMediaSource: 'desktop',\n              chromeMediaSourceId: sourceId,\n              maxFrameRate: frameRateSpecified || 3\n            }\n          };\n          if (widthSpecified) {\n            constraints.video.mandatory.maxWidth = widthSpecified;\n          }\n          if (heightSpecified) {\n            constraints.video.mandatory.maxHeight = heightSpecified;\n          }\n          return window.navigator.mediaDevices.getUserMedia(constraints);\n        });\n    };\n}\n", "/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        const methodObj = {[method]() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n            window.RTCIceCandidate :\n            window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        }};\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n      Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nexport function shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver =\n      function addTransceiver() {\n        this.setParametersPromises = [];\n        // WebIDL input coercion and validation\n        let sendEncodings = arguments[1] && arguments[1].sendEncodings;\n        if (sendEncodings === undefined) {\n          sendEncodings = [];\n        }\n        sendEncodings = [...sendEncodings];\n        const shouldPerformCheck = sendEncodings.length > 0;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          sendEncodings.forEach((encodingParam) => {\n            if ('rid' in encodingParam) {\n              const ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        const transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          const {sender} = transceiver;\n          const params = sender.getParameters();\n          if (!('encodings' in params) ||\n              // Avoid being fooled by patched getParameters() below.\n              (params.encodings.length === 1 &&\n               Object.keys(params.encodings[0]).length === 0)) {\n            params.encodings = sendEncodings;\n            sender.sendEncodings = sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params)\n              .then(() => {\n                delete sender.sendEncodings;\n              }).catch(() => {\n                delete sender.sendEncodings;\n              })\n            );\n          }\n        }\n        return transceiver;\n      };\n  }\n}\n\nexport function shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters =\n      function getParameters() {\n        const params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n  }\n}\n\nexport function shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n        .then(() => {\n          return origCreateOffer.apply(this, arguments);\n        })\n        .finally(() => {\n          this.setParametersPromises = [];\n        });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nexport function shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n        .then(() => {\n          return origCreateAnswer.apply(this, arguments);\n        })\n        .finally(() => {\n          this.setParametersPromises = [];\n        });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n", "/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n      'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n", "/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n", "/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n        .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (server.urls === undefined && server.url) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio', {direction: 'recvonly'});\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video', {direction: 'recvonly'});\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n\n", "/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport SDPUtils from 'sdp';\nimport * as utils from './utils';\n\nexport function shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substring(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      for (const key in parsedCandidate) {\n        if (!(key in nativeCandidate)) {\n          Object.defineProperty(nativeCandidate, key,\n            {value: parsedCandidate[key]});\n        }\n      }\n\n      // Override serializer to not serialize the extra attributes.\n      nativeCandidate.toJSON = function toJSON() {\n        return {\n          candidate: nativeCandidate.candidate,\n          sdpMid: nativeCandidate.sdpMid,\n          sdpMLineIndex: nativeCandidate.sdpMLineIndex,\n          usernameFragment: nativeCandidate.usernameFragment,\n        };\n      };\n      return nativeCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nexport function shimRTCIceCandidateRelayProtocol(window) {\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'relayProtocol' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      const parsedCandidate = SDPUtils.parseCandidate(e.candidate.candidate);\n      if (parsedCandidate.type === 'relay') {\n        // This is a libwebrtc-specific mapping of local type preference\n        // to relayProtocol.\n        e.candidate.relayProtocol = {\n          0: 'tls',\n          1: 'tcp',\n          2: 'udp',\n        }[parsedCandidate.priority >> 24];\n      }\n    }\n    return e;\n  });\n}\n\nexport function shimMaxMessageSize(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    const sections = SDPUtils.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = SDPUtils.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = SDPUtils.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substring(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n    function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        const {sdpSemantics} = this.getConfiguration();\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        let maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        const sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n}\n\nexport function shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function send() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel =\n    function createDataChannel() {\n      const dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nexport function shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n          this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n          this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nexport function removeExtmapAllowMixed(window, browserDetails) {\n  /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  if (browserDetails.browser === 'safari' &&\n      browserDetails._safariVersion >= 13.1) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n  function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      const sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n      // Safari enforces read-only-ness of RTCSessionDescription fields.\n      if (window.RTCSessionDescription &&\n          desc instanceof window.RTCSessionDescription) {\n        arguments[0] = new window.RTCSessionDescription({\n          type: desc.type,\n          sdp,\n        });\n      } else {\n        desc.sdp = sdp;\n      }\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n\nexport function shimAddIceCandidateNullOrEmpty(window, browserDetails) {\n  // Support for addIceCandidate(null or undefined)\n  // as well as addIceCandidate({candidate: \"\", ...})\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=978582\n  // Note: must be called before other polyfills which change the signature.\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      // Native support for ignoring exists for Chrome M77+.\n      // Safari ignores as well, exact version unknown but works in the same\n      // version that also ignores addIceCandidate(null).\n      if (((browserDetails.browser === 'chrome' && browserDetails.version < 78)\n           || (browserDetails.browser === 'firefox'\n               && browserDetails.version < 68)\n           || (browserDetails.browser === 'safari'))\n          && arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n}\n\n// Note: Make sure to call this ahead of APIs that modify\n// setLocalDescription.length\nexport function shimParameterlessSetLocalDescription(window, browserDetails) {\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  if (!nativeSetLocalDescription || nativeSetLocalDescription.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      let desc = arguments[0] || {};\n      if (typeof desc !== 'object' || (desc.type && desc.sdp)) {\n        return nativeSetLocalDescription.apply(this, arguments);\n      }\n      // The remaining steps should technically happen when SLD comes off the\n      // RTCPeerConnection's operations chain (not ahead of going on it), but\n      // this is too difficult to shim. Instead, this shim only covers the\n      // common case where the operations chain is empty. This is imperfect, but\n      // should cover many cases. Rationale: Even if we can't reduce the glare\n      // window to zero on imperfect implementations, there's value in tapping\n      // into the perfect negotiation pattern that several browsers support.\n      desc = {type: desc.type, sdp: desc.sdp};\n      if (!desc.type) {\n        switch (this.signalingState) {\n          case 'stable':\n          case 'have-local-offer':\n          case 'have-remote-pranswer':\n            desc.type = 'offer';\n            break;\n          default:\n            desc.type = 'answer';\n            break;\n        }\n      }\n      if (desc.sdp || (desc.type !== 'offer' && desc.type !== 'answer')) {\n        return nativeSetLocalDescription.apply(this, [desc]);\n      }\n      const func = desc.type === 'offer' ? this.createOffer : this.createAnswer;\n      return func.apply(this)\n        .then(d => nativeSetLocalDescription.apply(this, [d]));\n    };\n}\n", "/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nimport * as utils from './utils';\n\n// Browser shims.\nimport * as chromeShim from './chrome/chrome_shim';\nimport * as firefoxShim from './firefox/firefox_shim';\nimport * as safariShim from './safari/safari_shim';\nimport * as commonShim from './common_shim';\nimport * as sdp from 'sdp';\n\n// Shimming starts here.\nexport function adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = utils.log;\n  const browserDetails = utils.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings,\n    // Expose sdp as a convenience. For production apps include directly.\n    sdp,\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      if (browserDetails.version === null) {\n        logging('Chrome shim can not determine version, not shimming.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      chromeShim.shimGetUserMedia(window, browserDetails);\n      chromeShim.shimMediaStream(window, browserDetails);\n      chromeShim.shimPeerConnection(window, browserDetails);\n      chromeShim.shimOnTrack(window, browserDetails);\n      chromeShim.shimAddTrackRemoveTrack(window, browserDetails);\n      chromeShim.shimGetSendersWithDtmf(window, browserDetails);\n      chromeShim.shimGetStats(window, browserDetails);\n      chromeShim.shimSenderReceiverGetStats(window, browserDetails);\n      chromeShim.fixNegotiationNeeded(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimRTCIceCandidateRelayProtocol(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      firefoxShim.shimGetUserMedia(window, browserDetails);\n      firefoxShim.shimPeerConnection(window, browserDetails);\n      firefoxShim.shimOnTrack(window, browserDetails);\n      firefoxShim.shimRemoveStream(window, browserDetails);\n      firefoxShim.shimSenderGetStats(window, browserDetails);\n      firefoxShim.shimReceiverGetStats(window, browserDetails);\n      firefoxShim.shimRTCDataChannel(window, browserDetails);\n      firefoxShim.shimAddTransceiver(window, browserDetails);\n      firefoxShim.shimGetParameters(window, browserDetails);\n      firefoxShim.shimCreateOffer(window, browserDetails);\n      firefoxShim.shimCreateAnswer(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      // Must be called before shimCallbackAPI.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      safariShim.shimRTCIceServerUrls(window, browserDetails);\n      safariShim.shimCreateOfferLegacy(window, browserDetails);\n      safariShim.shimCallbacksAPI(window, browserDetails);\n      safariShim.shimLocalStreamsAPI(window, browserDetails);\n      safariShim.shimRemoteStreamsAPI(window, browserDetails);\n      safariShim.shimTrackEventTransceiver(window, browserDetails);\n      safariShim.shimGetUserMedia(window, browserDetails);\n      safariShim.shimAudioContext(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimRTCIceCandidateRelayProtocol(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n", "/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nimport {adapterFactory} from './adapter_factory.js';\n\nconst adapter =\n  adapterFactory({window: typeof window === 'undefined' ? undefined : window});\nexport default adapter;\n", "/**\n * Get the type of a JSON value.\n * Distinguishes between array, null and object.\n */\nexport function typeofJsonValue(value) {\n    let t = typeof value;\n    if (t == \"object\") {\n        if (Array.isArray(value))\n            return \"array\";\n        if (value === null)\n            return \"null\";\n    }\n    return t;\n}\n/**\n * Is this a JSON object (instead of an array or null)?\n */\nexport function isJsonObject(value) {\n    return value !== null && typeof value == \"object\" && !Array.isArray(value);\n}\n", "// lookup table from base64 character to byte\nlet encTable = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n// lookup table from base64 character *code* to byte because lookup by number is fast\nlet decTable = [];\nfor (let i = 0; i < encTable.length; i++)\n    decTable[encTable[i].charCodeAt(0)] = i;\n// support base64url variants\ndecTable[\"-\".charCodeAt(0)] = encTable.indexOf(\"+\");\ndecTable[\"_\".charCodeAt(0)] = encTable.indexOf(\"/\");\n/**\n * Decodes a base64 string to a byte array.\n *\n * - ignores white-space, including line breaks and tabs\n * - allows inner padding (can decode concatenated base64 strings)\n * - does not require padding\n * - understands base64url encoding:\n *   \"-\" instead of \"+\",\n *   \"_\" instead of \"/\",\n *   no padding\n */\nexport function base64decode(base64Str) {\n    // estimate byte size, not accounting for inner padding and whitespace\n    let es = base64Str.length * 3 / 4;\n    // if (es % 3 !== 0)\n    // throw new Error('invalid base64 string');\n    if (base64Str[base64Str.length - 2] == '=')\n        es -= 2;\n    else if (base64Str[base64Str.length - 1] == '=')\n        es -= 1;\n    let bytes = new Uint8Array(es), bytePos = 0, // position in byte array\n    groupPos = 0, // position in base64 group\n    b, // current byte\n    p = 0 // previous byte\n    ;\n    for (let i = 0; i < base64Str.length; i++) {\n        b = decTable[base64Str.charCodeAt(i)];\n        if (b === undefined) {\n            // noinspection FallThroughInSwitchStatementJS\n            switch (base64Str[i]) {\n                case '=':\n                    groupPos = 0; // reset state when padding found\n                case '\\n':\n                case '\\r':\n                case '\\t':\n                case ' ':\n                    continue; // skip white-space, and padding\n                default:\n                    throw Error(`invalid base64 string.`);\n            }\n        }\n        switch (groupPos) {\n            case 0:\n                p = b;\n                groupPos = 1;\n                break;\n            case 1:\n                bytes[bytePos++] = p << 2 | (b & 48) >> 4;\n                p = b;\n                groupPos = 2;\n                break;\n            case 2:\n                bytes[bytePos++] = (p & 15) << 4 | (b & 60) >> 2;\n                p = b;\n                groupPos = 3;\n                break;\n            case 3:\n                bytes[bytePos++] = (p & 3) << 6 | b;\n                groupPos = 0;\n                break;\n        }\n    }\n    if (groupPos == 1)\n        throw Error(`invalid base64 string.`);\n    return bytes.subarray(0, bytePos);\n}\n/**\n * Encodes a byte array to a base64 string.\n * Adds padding at the end.\n * Does not insert newlines.\n */\nexport function base64encode(bytes) {\n    let base64 = '', groupPos = 0, // position in base64 group\n    b, // current byte\n    p = 0; // carry over from previous byte\n    for (let i = 0; i < bytes.length; i++) {\n        b = bytes[i];\n        switch (groupPos) {\n            case 0:\n                base64 += encTable[b >> 2];\n                p = (b & 3) << 4;\n                groupPos = 1;\n                break;\n            case 1:\n                base64 += encTable[p | b >> 4];\n                p = (b & 15) << 2;\n                groupPos = 2;\n                break;\n            case 2:\n                base64 += encTable[p | b >> 6];\n                base64 += encTable[b & 63];\n                groupPos = 0;\n                break;\n        }\n    }\n    // padding required?\n    if (groupPos) {\n        base64 += encTable[p];\n        base64 += '=';\n        if (groupPos == 1)\n            base64 += '=';\n    }\n    return base64;\n}\n", "/**\n * This handler implements the default behaviour for unknown fields.\n * When reading data, unknown fields are stored on the message, in a\n * symbol property.\n * When writing data, the symbol property is queried and unknown fields\n * are serialized into the output again.\n */\nexport var UnknownFieldHandler;\n(function (UnknownFieldHandler) {\n    /**\n     * The symbol used to store unknown fields for a message.\n     * The property must conform to `UnknownFieldContainer`.\n     */\n    UnknownFieldHandler.symbol = Symbol.for(\"protobuf-ts/unknown\");\n    /**\n     * Store an unknown field during binary read directly on the message.\n     * This method is compatible with `BinaryReadOptions.readUnknownField`.\n     */\n    UnknownFieldHandler.onRead = (typeName, message, fieldNo, wireType, data) => {\n        let container = is(message) ? message[UnknownFieldHandler.symbol] : message[UnknownFieldHandler.symbol] = [];\n        container.push({ no: fieldNo, wireType, data });\n    };\n    /**\n     * Write unknown fields stored for the message to the writer.\n     * This method is compatible with `BinaryWriteOptions.writeUnknownFields`.\n     */\n    UnknownFieldHandler.onWrite = (typeName, message, writer) => {\n        for (let { no, wireType, data } of UnknownFieldHandler.list(message))\n            writer.tag(no, wireType).raw(data);\n    };\n    /**\n     * List unknown fields stored for the message.\n     * Note that there may be multiples fields with the same number.\n     */\n    UnknownFieldHandler.list = (message, fieldNo) => {\n        if (is(message)) {\n            let all = message[UnknownFieldHandler.symbol];\n            return fieldNo ? all.filter(uf => uf.no == fieldNo) : all;\n        }\n        return [];\n    };\n    /**\n     * Returns the last unknown field by field number.\n     */\n    UnknownFieldHandler.last = (message, fieldNo) => UnknownFieldHandler.list(message, fieldNo).slice(-1)[0];\n    const is = (message) => message && Array.isArray(message[UnknownFieldHandler.symbol]);\n})(UnknownFieldHandler || (UnknownFieldHandler = {}));\n/**\n * Merges binary write or read options. Later values override earlier values.\n */\nexport function mergeBinaryOptions(a, b) {\n    return Object.assign(Object.assign({}, a), b);\n}\n/**\n * Protobuf binary format wire types.\n *\n * A wire type provides just enough information to find the length of the\n * following value.\n *\n * See https://developers.google.com/protocol-buffers/docs/encoding#structure\n */\nexport var WireType;\n(function (WireType) {\n    /**\n     * Used for int32, int64, uint32, uint64, sint32, sint64, bool, enum\n     */\n    WireType[WireType[\"Varint\"] = 0] = \"Varint\";\n    /**\n     * Used for fixed64, sfixed64, double.\n     * Always 8 bytes with little-endian byte order.\n     */\n    WireType[WireType[\"Bit64\"] = 1] = \"Bit64\";\n    /**\n     * Used for string, bytes, embedded messages, packed repeated fields\n     *\n     * Only repeated numeric types (types which use the varint, 32-bit,\n     * or 64-bit wire types) can be packed. In proto3, such fields are\n     * packed by default.\n     */\n    WireType[WireType[\"LengthDelimited\"] = 2] = \"LengthDelimited\";\n    /**\n     * Used for groups\n     * @deprecated\n     */\n    WireType[WireType[\"StartGroup\"] = 3] = \"StartGroup\";\n    /**\n     * Used for groups\n     * @deprecated\n     */\n    WireType[WireType[\"EndGroup\"] = 4] = \"EndGroup\";\n    /**\n     * Used for fixed32, sfixed32, float.\n     * Always 4 bytes with little-endian byte order.\n     */\n    WireType[WireType[\"Bit32\"] = 5] = \"Bit32\";\n})(WireType || (WireType = {}));\n", "// Copyright 2008 Google Inc.  All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// Code generated by the Protocol Buffer compiler is owned by the owner\n// of the input file used when generating it.  This code is not\n// standalone and requires a support library to be linked with it.  This\n// support library is itself covered by the above license.\n/**\n * Read a 64 bit varint as two JS numbers.\n *\n * Returns tuple:\n * [0]: low bits\n * [0]: high bits\n *\n * Copyright 2008 Google Inc.  All rights reserved.\n *\n * See https://github.com/protocolbuffers/protobuf/blob/8a71927d74a4ce34efe2d8769fda198f52d20d12/js/experimental/runtime/kernel/buffer_decoder.js#L175\n */\nexport function varint64read() {\n    let lowBits = 0;\n    let highBits = 0;\n    for (let shift = 0; shift < 28; shift += 7) {\n        let b = this.buf[this.pos++];\n        lowBits |= (b & 0x7F) << shift;\n        if ((b & 0x80) == 0) {\n            this.assertBounds();\n            return [lowBits, highBits];\n        }\n    }\n    let middleByte = this.buf[this.pos++];\n    // last four bits of the first 32 bit number\n    lowBits |= (middleByte & 0x0F) << 28;\n    // 3 upper bits are part of the next 32 bit number\n    highBits = (middleByte & 0x70) >> 4;\n    if ((middleByte & 0x80) == 0) {\n        this.assertBounds();\n        return [lowBits, highBits];\n    }\n    for (let shift = 3; shift <= 31; shift += 7) {\n        let b = this.buf[this.pos++];\n        highBits |= (b & 0x7F) << shift;\n        if ((b & 0x80) == 0) {\n            this.assertBounds();\n            return [lowBits, highBits];\n        }\n    }\n    throw new Error('invalid varint');\n}\n/**\n * Write a 64 bit varint, given as two JS numbers, to the given bytes array.\n *\n * Copyright 2008 Google Inc.  All rights reserved.\n *\n * See https://github.com/protocolbuffers/protobuf/blob/8a71927d74a4ce34efe2d8769fda198f52d20d12/js/experimental/runtime/kernel/writer.js#L344\n */\nexport function varint64write(lo, hi, bytes) {\n    for (let i = 0; i < 28; i = i + 7) {\n        const shift = lo >>> i;\n        const hasNext = !((shift >>> 7) == 0 && hi == 0);\n        const byte = (hasNext ? shift | 0x80 : shift) & 0xFF;\n        bytes.push(byte);\n        if (!hasNext) {\n            return;\n        }\n    }\n    const splitBits = ((lo >>> 28) & 0x0F) | ((hi & 0x07) << 4);\n    const hasMoreBits = !((hi >> 3) == 0);\n    bytes.push((hasMoreBits ? splitBits | 0x80 : splitBits) & 0xFF);\n    if (!hasMoreBits) {\n        return;\n    }\n    for (let i = 3; i < 31; i = i + 7) {\n        const shift = hi >>> i;\n        const hasNext = !((shift >>> 7) == 0);\n        const byte = (hasNext ? shift | 0x80 : shift) & 0xFF;\n        bytes.push(byte);\n        if (!hasNext) {\n            return;\n        }\n    }\n    bytes.push((hi >>> 31) & 0x01);\n}\n// constants for binary math\nconst TWO_PWR_32_DBL = (1 << 16) * (1 << 16);\n/**\n * Parse decimal string of 64 bit integer value as two JS numbers.\n *\n * Returns tuple:\n * [0]: minus sign?\n * [1]: low bits\n * [2]: high bits\n *\n * Copyright 2008 Google Inc.\n */\nexport function int64fromString(dec) {\n    // Check for minus sign.\n    let minus = dec[0] == '-';\n    if (minus)\n        dec = dec.slice(1);\n    // Work 6 decimal digits at a time, acting like we're converting base 1e6\n    // digits to binary. This is safe to do with floating point math because\n    // Number.isSafeInteger(ALL_32_BITS * 1e6) == true.\n    const base = 1e6;\n    let lowBits = 0;\n    let highBits = 0;\n    function add1e6digit(begin, end) {\n        // Note: Number('') is 0.\n        const digit1e6 = Number(dec.slice(begin, end));\n        highBits *= base;\n        lowBits = lowBits * base + digit1e6;\n        // Carry bits from lowBits to highBits\n        if (lowBits >= TWO_PWR_32_DBL) {\n            highBits = highBits + ((lowBits / TWO_PWR_32_DBL) | 0);\n            lowBits = lowBits % TWO_PWR_32_DBL;\n        }\n    }\n    add1e6digit(-24, -18);\n    add1e6digit(-18, -12);\n    add1e6digit(-12, -6);\n    add1e6digit(-6);\n    return [minus, lowBits, highBits];\n}\n/**\n * Format 64 bit integer value (as two JS numbers) to decimal string.\n *\n * Copyright 2008 Google Inc.\n */\nexport function int64toString(bitsLow, bitsHigh) {\n    // Skip the expensive conversion if the number is small enough to use the\n    // built-in conversions.\n    if ((bitsHigh >>> 0) <= 0x1FFFFF) {\n        return '' + (TWO_PWR_32_DBL * bitsHigh + (bitsLow >>> 0));\n    }\n    // What this code is doing is essentially converting the input number from\n    // base-2 to base-1e7, which allows us to represent the 64-bit range with\n    // only 3 (very large) digits. Those digits are then trivial to convert to\n    // a base-10 string.\n    // The magic numbers used here are -\n    // 2^24 = 16777216 = (1,6777216) in base-1e7.\n    // 2^48 = 281474976710656 = (2,8147497,6710656) in base-1e7.\n    // Split 32:32 representation into 16:24:24 representation so our\n    // intermediate digits don't overflow.\n    let low = bitsLow & 0xFFFFFF;\n    let mid = (((bitsLow >>> 24) | (bitsHigh << 8)) >>> 0) & 0xFFFFFF;\n    let high = (bitsHigh >> 16) & 0xFFFF;\n    // Assemble our three base-1e7 digits, ignoring carries. The maximum\n    // value in a digit at this step is representable as a 48-bit integer, which\n    // can be stored in a 64-bit floating point number.\n    let digitA = low + (mid * 6777216) + (high * 6710656);\n    let digitB = mid + (high * 8147497);\n    let digitC = (high * 2);\n    // Apply carries from A to B and from B to C.\n    let base = 10000000;\n    if (digitA >= base) {\n        digitB += Math.floor(digitA / base);\n        digitA %= base;\n    }\n    if (digitB >= base) {\n        digitC += Math.floor(digitB / base);\n        digitB %= base;\n    }\n    // Convert base-1e7 digits to base-10, with optional leading zeroes.\n    function decimalFrom1e7(digit1e7, needLeadingZeros) {\n        let partial = digit1e7 ? String(digit1e7) : '';\n        if (needLeadingZeros) {\n            return '0000000'.slice(partial.length) + partial;\n        }\n        return partial;\n    }\n    return decimalFrom1e7(digitC, /*needLeadingZeros=*/ 0) +\n        decimalFrom1e7(digitB, /*needLeadingZeros=*/ digitC) +\n        // If the final 1e7 digit didn't need leading zeros, we would have\n        // returned via the trivial code path at the top.\n        decimalFrom1e7(digitA, /*needLeadingZeros=*/ 1);\n}\n/**\n * Write a 32 bit varint, signed or unsigned. Same as `varint64write(0, value, bytes)`\n *\n * Copyright 2008 Google Inc.  All rights reserved.\n *\n * See https://github.com/protocolbuffers/protobuf/blob/1b18833f4f2a2f681f4e4a25cdf3b0a43115ec26/js/binary/encoder.js#L144\n */\nexport function varint32write(value, bytes) {\n    if (value >= 0) {\n        // write value as varint 32\n        while (value > 0x7f) {\n            bytes.push((value & 0x7f) | 0x80);\n            value = value >>> 7;\n        }\n        bytes.push(value);\n    }\n    else {\n        for (let i = 0; i < 9; i++) {\n            bytes.push(value & 127 | 128);\n            value = value >> 7;\n        }\n        bytes.push(1);\n    }\n}\n/**\n * Read an unsigned 32 bit varint.\n *\n * See https://github.com/protocolbuffers/protobuf/blob/8a71927d74a4ce34efe2d8769fda198f52d20d12/js/experimental/runtime/kernel/buffer_decoder.js#L220\n */\nexport function varint32read() {\n    let b = this.buf[this.pos++];\n    let result = b & 0x7F;\n    if ((b & 0x80) == 0) {\n        this.assertBounds();\n        return result;\n    }\n    b = this.buf[this.pos++];\n    result |= (b & 0x7F) << 7;\n    if ((b & 0x80) == 0) {\n        this.assertBounds();\n        return result;\n    }\n    b = this.buf[this.pos++];\n    result |= (b & 0x7F) << 14;\n    if ((b & 0x80) == 0) {\n        this.assertBounds();\n        return result;\n    }\n    b = this.buf[this.pos++];\n    result |= (b & 0x7F) << 21;\n    if ((b & 0x80) == 0) {\n        this.assertBounds();\n        return result;\n    }\n    // Extract only last 4 bits\n    b = this.buf[this.pos++];\n    result |= (b & 0x0F) << 28;\n    for (let readBytes = 5; ((b & 0x80) !== 0) && readBytes < 10; readBytes++)\n        b = this.buf[this.pos++];\n    if ((b & 0x80) != 0)\n        throw new Error('invalid varint');\n    this.assertBounds();\n    // Result can have 32 bits, convert it to unsigned\n    return result >>> 0;\n}\n", "import { int64fromString, int64toString } from \"./goog-varint\";\nlet BI;\nexport function detectBi() {\n    const dv = new DataView(new ArrayBuffer(8));\n    const ok = globalThis.BigInt !== undefined\n        && typeof dv.getBigInt64 === \"function\"\n        && typeof dv.getBigUint64 === \"function\"\n        && typeof dv.setBigInt64 === \"function\"\n        && typeof dv.setBigUint64 === \"function\";\n    BI = ok ? {\n        MIN: BigInt(\"-9223372036854775808\"),\n        MAX: BigInt(\"9223372036854775807\"),\n        UMIN: BigInt(\"0\"),\n        UMAX: BigInt(\"18446744073709551615\"),\n        C: BigInt,\n        V: dv,\n    } : undefined;\n}\ndetectBi();\nfunction assertBi(bi) {\n    if (!bi)\n        throw new Error(\"BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support\");\n}\n// used to validate from(string) input (when bigint is unavailable)\nconst RE_DECIMAL_STR = /^-?[0-9]+$/;\n// constants for binary math\nconst TWO_PWR_32_DBL = 0x100000000;\nconst HALF_2_PWR_32 = 0x080000000;\n// base class for PbLong and PbULong provides shared code\nclass SharedPbLong {\n    /**\n     * Create a new instance with the given bits.\n     */\n    constructor(lo, hi) {\n        this.lo = lo | 0;\n        this.hi = hi | 0;\n    }\n    /**\n     * Is this instance equal to 0?\n     */\n    isZero() {\n        return this.lo == 0 && this.hi == 0;\n    }\n    /**\n     * Convert to a native number.\n     */\n    toNumber() {\n        let result = this.hi * TWO_PWR_32_DBL + (this.lo >>> 0);\n        if (!Number.isSafeInteger(result))\n            throw new Error(\"cannot convert to safe number\");\n        return result;\n    }\n}\n/**\n * 64-bit unsigned integer as two 32-bit values.\n * Converts between `string`, `number` and `bigint` representations.\n */\nexport class PbULong extends SharedPbLong {\n    /**\n     * Create instance from a `string`, `number` or `bigint`.\n     */\n    static from(value) {\n        if (BI)\n            // noinspection FallThroughInSwitchStatementJS\n            switch (typeof value) {\n                case \"string\":\n                    if (value == \"0\")\n                        return this.ZERO;\n                    if (value == \"\")\n                        throw new Error('string is no integer');\n                    value = BI.C(value);\n                case \"number\":\n                    if (value === 0)\n                        return this.ZERO;\n                    value = BI.C(value);\n                case \"bigint\":\n                    if (!value)\n                        return this.ZERO;\n                    if (value < BI.UMIN)\n                        throw new Error('signed value for ulong');\n                    if (value > BI.UMAX)\n                        throw new Error('ulong too large');\n                    BI.V.setBigUint64(0, value, true);\n                    return new PbULong(BI.V.getInt32(0, true), BI.V.getInt32(4, true));\n            }\n        else\n            switch (typeof value) {\n                case \"string\":\n                    if (value == \"0\")\n                        return this.ZERO;\n                    value = value.trim();\n                    if (!RE_DECIMAL_STR.test(value))\n                        throw new Error('string is no integer');\n                    let [minus, lo, hi] = int64fromString(value);\n                    if (minus)\n                        throw new Error('signed value for ulong');\n                    return new PbULong(lo, hi);\n                case \"number\":\n                    if (value == 0)\n                        return this.ZERO;\n                    if (!Number.isSafeInteger(value))\n                        throw new Error('number is no integer');\n                    if (value < 0)\n                        throw new Error('signed value for ulong');\n                    return new PbULong(value, value / TWO_PWR_32_DBL);\n            }\n        throw new Error('unknown value ' + typeof value);\n    }\n    /**\n     * Convert to decimal string.\n     */\n    toString() {\n        return BI ? this.toBigInt().toString() : int64toString(this.lo, this.hi);\n    }\n    /**\n     * Convert to native bigint.\n     */\n    toBigInt() {\n        assertBi(BI);\n        BI.V.setInt32(0, this.lo, true);\n        BI.V.setInt32(4, this.hi, true);\n        return BI.V.getBigUint64(0, true);\n    }\n}\n/**\n * ulong 0 singleton.\n */\nPbULong.ZERO = new PbULong(0, 0);\n/**\n * 64-bit signed integer as two 32-bit values.\n * Converts between `string`, `number` and `bigint` representations.\n */\nexport class PbLong extends SharedPbLong {\n    /**\n     * Create instance from a `string`, `number` or `bigint`.\n     */\n    static from(value) {\n        if (BI)\n            // noinspection FallThroughInSwitchStatementJS\n            switch (typeof value) {\n                case \"string\":\n                    if (value == \"0\")\n                        return this.ZERO;\n                    if (value == \"\")\n                        throw new Error('string is no integer');\n                    value = BI.C(value);\n                case \"number\":\n                    if (value === 0)\n                        return this.ZERO;\n                    value = BI.C(value);\n                case \"bigint\":\n                    if (!value)\n                        return this.ZERO;\n                    if (value < BI.MIN)\n                        throw new Error('signed long too small');\n                    if (value > BI.MAX)\n                        throw new Error('signed long too large');\n                    BI.V.setBigInt64(0, value, true);\n                    return new PbLong(BI.V.getInt32(0, true), BI.V.getInt32(4, true));\n            }\n        else\n            switch (typeof value) {\n                case \"string\":\n                    if (value == \"0\")\n                        return this.ZERO;\n                    value = value.trim();\n                    if (!RE_DECIMAL_STR.test(value))\n                        throw new Error('string is no integer');\n                    let [minus, lo, hi] = int64fromString(value);\n                    if (minus) {\n                        if (hi > HALF_2_PWR_32 || (hi == HALF_2_PWR_32 && lo != 0))\n                            throw new Error('signed long too small');\n                    }\n                    else if (hi >= HALF_2_PWR_32)\n                        throw new Error('signed long too large');\n                    let pbl = new PbLong(lo, hi);\n                    return minus ? pbl.negate() : pbl;\n                case \"number\":\n                    if (value == 0)\n                        return this.ZERO;\n                    if (!Number.isSafeInteger(value))\n                        throw new Error('number is no integer');\n                    return value > 0\n                        ? new PbLong(value, value / TWO_PWR_32_DBL)\n                        : new PbLong(-value, -value / TWO_PWR_32_DBL).negate();\n            }\n        throw new Error('unknown value ' + typeof value);\n    }\n    /**\n     * Do we have a minus sign?\n     */\n    isNegative() {\n        return (this.hi & HALF_2_PWR_32) !== 0;\n    }\n    /**\n     * Negate two's complement.\n     * Invert all the bits and add one to the result.\n     */\n    negate() {\n        let hi = ~this.hi, lo = this.lo;\n        if (lo)\n            lo = ~lo + 1;\n        else\n            hi += 1;\n        return new PbLong(lo, hi);\n    }\n    /**\n     * Convert to decimal string.\n     */\n    toString() {\n        if (BI)\n            return this.toBigInt().toString();\n        if (this.isNegative()) {\n            let n = this.negate();\n            return '-' + int64toString(n.lo, n.hi);\n        }\n        return int64toString(this.lo, this.hi);\n    }\n    /**\n     * Convert to native bigint.\n     */\n    toBigInt() {\n        assertBi(BI);\n        BI.V.setInt32(0, this.lo, true);\n        BI.V.setInt32(4, this.hi, true);\n        return BI.V.getBigInt64(0, true);\n    }\n}\n/**\n * long 0 singleton.\n */\nPbLong.ZERO = new PbLong(0, 0);\n", "import { WireType } from \"./binary-format-contract\";\nimport { PbLong, PbULong } from \"./pb-long\";\nimport { varint32read, varint64read } from \"./goog-varint\";\nconst defaultsRead = {\n    readUnknownField: true,\n    readerFactory: bytes => new BinaryReader(bytes),\n};\n/**\n * Make options for reading binary data form partial options.\n */\nexport function binaryReadOptions(options) {\n    return options ? Object.assign(Object.assign({}, defaultsRead), options) : defaultsRead;\n}\nexport class BinaryReader {\n    constructor(buf, textDecoder) {\n        this.varint64 = varint64read; // dirty cast for `this`\n        /**\n         * Read a `uint32` field, an unsigned 32 bit varint.\n         */\n        this.uint32 = varint32read; // dirty cast for `this` and access to protected `buf`\n        this.buf = buf;\n        this.len = buf.length;\n        this.pos = 0;\n        this.view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength);\n        this.textDecoder = textDecoder !== null && textDecoder !== void 0 ? textDecoder : new TextDecoder(\"utf-8\", {\n            fatal: true,\n            ignoreBOM: true,\n        });\n    }\n    /**\n     * Reads a tag - field number and wire type.\n     */\n    tag() {\n        let tag = this.uint32(), fieldNo = tag >>> 3, wireType = tag & 7;\n        if (fieldNo <= 0 || wireType < 0 || wireType > 5)\n            throw new Error(\"illegal tag: field no \" + fieldNo + \" wire type \" + wireType);\n        return [fieldNo, wireType];\n    }\n    /**\n     * Skip one element on the wire and return the skipped data.\n     * Supports WireType.StartGroup since v2.0.0-alpha.23.\n     */\n    skip(wireType) {\n        let start = this.pos;\n        // noinspection FallThroughInSwitchStatementJS\n        switch (wireType) {\n            case WireType.Varint:\n                while (this.buf[this.pos++] & 0x80) {\n                    // ignore\n                }\n                break;\n            case WireType.Bit64:\n                this.pos += 4;\n            case WireType.Bit32:\n                this.pos += 4;\n                break;\n            case WireType.LengthDelimited:\n                let len = this.uint32();\n                this.pos += len;\n                break;\n            case WireType.StartGroup:\n                // From descriptor.proto: Group type is deprecated, not supported in proto3.\n                // But we must still be able to parse and treat as unknown.\n                let t;\n                while ((t = this.tag()[1]) !== WireType.EndGroup) {\n                    this.skip(t);\n                }\n                break;\n            default:\n                throw new Error(\"cant skip wire type \" + wireType);\n        }\n        this.assertBounds();\n        return this.buf.subarray(start, this.pos);\n    }\n    /**\n     * Throws error if position in byte array is out of range.\n     */\n    assertBounds() {\n        if (this.pos > this.len)\n            throw new RangeError(\"premature EOF\");\n    }\n    /**\n     * Read a `int32` field, a signed 32 bit varint.\n     */\n    int32() {\n        return this.uint32() | 0;\n    }\n    /**\n     * Read a `sint32` field, a signed, zigzag-encoded 32-bit varint.\n     */\n    sint32() {\n        let zze = this.uint32();\n        // decode zigzag\n        return (zze >>> 1) ^ -(zze & 1);\n    }\n    /**\n     * Read a `int64` field, a signed 64-bit varint.\n     */\n    int64() {\n        return new PbLong(...this.varint64());\n    }\n    /**\n     * Read a `uint64` field, an unsigned 64-bit varint.\n     */\n    uint64() {\n        return new PbULong(...this.varint64());\n    }\n    /**\n     * Read a `sint64` field, a signed, zig-zag-encoded 64-bit varint.\n     */\n    sint64() {\n        let [lo, hi] = this.varint64();\n        // decode zig zag\n        let s = -(lo & 1);\n        lo = ((lo >>> 1 | (hi & 1) << 31) ^ s);\n        hi = (hi >>> 1 ^ s);\n        return new PbLong(lo, hi);\n    }\n    /**\n     * Read a `bool` field, a variant.\n     */\n    bool() {\n        let [lo, hi] = this.varint64();\n        return lo !== 0 || hi !== 0;\n    }\n    /**\n     * Read a `fixed32` field, an unsigned, fixed-length 32-bit integer.\n     */\n    fixed32() {\n        return this.view.getUint32((this.pos += 4) - 4, true);\n    }\n    /**\n     * Read a `sfixed32` field, a signed, fixed-length 32-bit integer.\n     */\n    sfixed32() {\n        return this.view.getInt32((this.pos += 4) - 4, true);\n    }\n    /**\n     * Read a `fixed64` field, an unsigned, fixed-length 64 bit integer.\n     */\n    fixed64() {\n        return new PbULong(this.sfixed32(), this.sfixed32());\n    }\n    /**\n     * Read a `fixed64` field, a signed, fixed-length 64-bit integer.\n     */\n    sfixed64() {\n        return new PbLong(this.sfixed32(), this.sfixed32());\n    }\n    /**\n     * Read a `float` field, 32-bit floating point number.\n     */\n    float() {\n        return this.view.getFloat32((this.pos += 4) - 4, true);\n    }\n    /**\n     * Read a `double` field, a 64-bit floating point number.\n     */\n    double() {\n        return this.view.getFloat64((this.pos += 8) - 8, true);\n    }\n    /**\n     * Read a `bytes` field, length-delimited arbitrary data.\n     */\n    bytes() {\n        let len = this.uint32();\n        let start = this.pos;\n        this.pos += len;\n        this.assertBounds();\n        return this.buf.subarray(start, start + len);\n    }\n    /**\n     * Read a `string` field, length-delimited data converted to UTF-8 text.\n     */\n    string() {\n        return this.textDecoder.decode(this.bytes());\n    }\n}\n", "/**\n * assert that condition is true or throw error (with message)\n */\nexport function assert(condition, msg) {\n    if (!condition) {\n        throw new Error(msg);\n    }\n}\n/**\n * assert that value cannot exist = type `never`. throw runtime error if it does.\n */\nexport function assertNever(value, msg) {\n    throw new Error(msg !== null && msg !== void 0 ? msg : 'Unexpected object: ' + value);\n}\nconst FLOAT32_MAX = 3.4028234663852886e+38, FLOAT32_MIN = -3.4028234663852886e+38, UINT32_MAX = 0xFFFFFFFF, INT32_MAX = 0X7FFFFFFF, INT32_MIN = -0X80000000;\nexport function assertInt32(arg) {\n    if (typeof arg !== \"number\")\n        throw new Error('invalid int 32: ' + typeof arg);\n    if (!Number.isInteger(arg) || arg > INT32_MAX || arg < INT32_MIN)\n        throw new Error('invalid int 32: ' + arg);\n}\nexport function assertUInt32(arg) {\n    if (typeof arg !== \"number\")\n        throw new Error('invalid uint 32: ' + typeof arg);\n    if (!Number.isInteger(arg) || arg > UINT32_MAX || arg < 0)\n        throw new Error('invalid uint 32: ' + arg);\n}\nexport function assertFloat32(arg) {\n    if (typeof arg !== \"number\")\n        throw new Error('invalid float 32: ' + typeof arg);\n    if (!Number.isFinite(arg))\n        return;\n    if (arg > FLOAT32_MAX || arg < FLOAT32_MIN)\n        throw new Error('invalid float 32: ' + arg);\n}\n", "import { PbLong, PbULong } from \"./pb-long\";\nimport { varint32write, varint64write } from \"./goog-varint\";\nimport { assertFloat32, assertInt32, assertUInt32 } from \"./assert\";\nconst defaultsWrite = {\n    writeUnknownFields: true,\n    writerFactory: () => new BinaryWriter(),\n};\n/**\n * Make options for writing binary data form partial options.\n */\nexport function binaryWriteOptions(options) {\n    return options ? Object.assign(Object.assign({}, defaultsWrite), options) : defaultsWrite;\n}\nexport class BinaryWriter {\n    constructor(textEncoder) {\n        /**\n         * Previous fork states.\n         */\n        this.stack = [];\n        this.textEncoder = textEncoder !== null && textEncoder !== void 0 ? textEncoder : new TextEncoder();\n        this.chunks = [];\n        this.buf = [];\n    }\n    /**\n     * Return all bytes written and reset this writer.\n     */\n    finish() {\n        this.chunks.push(new Uint8Array(this.buf)); // flush the buffer\n        let len = 0;\n        for (let i = 0; i < this.chunks.length; i++)\n            len += this.chunks[i].length;\n        let bytes = new Uint8Array(len);\n        let offset = 0;\n        for (let i = 0; i < this.chunks.length; i++) {\n            bytes.set(this.chunks[i], offset);\n            offset += this.chunks[i].length;\n        }\n        this.chunks = [];\n        return bytes;\n    }\n    /**\n     * Start a new fork for length-delimited data like a message\n     * or a packed repeated field.\n     *\n     * Must be joined later with `join()`.\n     */\n    fork() {\n        this.stack.push({ chunks: this.chunks, buf: this.buf });\n        this.chunks = [];\n        this.buf = [];\n        return this;\n    }\n    /**\n     * Join the last fork. Write its length and bytes, then\n     * return to the previous state.\n     */\n    join() {\n        // get chunk of fork\n        let chunk = this.finish();\n        // restore previous state\n        let prev = this.stack.pop();\n        if (!prev)\n            throw new Error('invalid state, fork stack empty');\n        this.chunks = prev.chunks;\n        this.buf = prev.buf;\n        // write length of chunk as varint\n        this.uint32(chunk.byteLength);\n        return this.raw(chunk);\n    }\n    /**\n     * Writes a tag (field number and wire type).\n     *\n     * Equivalent to `uint32( (fieldNo << 3 | type) >>> 0 )`.\n     *\n     * Generated code should compute the tag ahead of time and call `uint32()`.\n     */\n    tag(fieldNo, type) {\n        return this.uint32((fieldNo << 3 | type) >>> 0);\n    }\n    /**\n     * Write a chunk of raw bytes.\n     */\n    raw(chunk) {\n        if (this.buf.length) {\n            this.chunks.push(new Uint8Array(this.buf));\n            this.buf = [];\n        }\n        this.chunks.push(chunk);\n        return this;\n    }\n    /**\n     * Write a `uint32` value, an unsigned 32 bit varint.\n     */\n    uint32(value) {\n        assertUInt32(value);\n        // write value as varint 32, inlined for speed\n        while (value > 0x7f) {\n            this.buf.push((value & 0x7f) | 0x80);\n            value = value >>> 7;\n        }\n        this.buf.push(value);\n        return this;\n    }\n    /**\n     * Write a `int32` value, a signed 32 bit varint.\n     */\n    int32(value) {\n        assertInt32(value);\n        varint32write(value, this.buf);\n        return this;\n    }\n    /**\n     * Write a `bool` value, a variant.\n     */\n    bool(value) {\n        this.buf.push(value ? 1 : 0);\n        return this;\n    }\n    /**\n     * Write a `bytes` value, length-delimited arbitrary data.\n     */\n    bytes(value) {\n        this.uint32(value.byteLength); // write length of chunk as varint\n        return this.raw(value);\n    }\n    /**\n     * Write a `string` value, length-delimited data converted to UTF-8 text.\n     */\n    string(value) {\n        let chunk = this.textEncoder.encode(value);\n        this.uint32(chunk.byteLength); // write length of chunk as varint\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `float` value, 32-bit floating point number.\n     */\n    float(value) {\n        assertFloat32(value);\n        let chunk = new Uint8Array(4);\n        new DataView(chunk.buffer).setFloat32(0, value, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `double` value, a 64-bit floating point number.\n     */\n    double(value) {\n        let chunk = new Uint8Array(8);\n        new DataView(chunk.buffer).setFloat64(0, value, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `fixed32` value, an unsigned, fixed-length 32-bit integer.\n     */\n    fixed32(value) {\n        assertUInt32(value);\n        let chunk = new Uint8Array(4);\n        new DataView(chunk.buffer).setUint32(0, value, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `sfixed32` value, a signed, fixed-length 32-bit integer.\n     */\n    sfixed32(value) {\n        assertInt32(value);\n        let chunk = new Uint8Array(4);\n        new DataView(chunk.buffer).setInt32(0, value, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `sint32` value, a signed, zigzag-encoded 32-bit varint.\n     */\n    sint32(value) {\n        assertInt32(value);\n        // zigzag encode\n        value = ((value << 1) ^ (value >> 31)) >>> 0;\n        varint32write(value, this.buf);\n        return this;\n    }\n    /**\n     * Write a `fixed64` value, a signed, fixed-length 64-bit integer.\n     */\n    sfixed64(value) {\n        let chunk = new Uint8Array(8);\n        let view = new DataView(chunk.buffer);\n        let long = PbLong.from(value);\n        view.setInt32(0, long.lo, true);\n        view.setInt32(4, long.hi, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `fixed64` value, an unsigned, fixed-length 64 bit integer.\n     */\n    fixed64(value) {\n        let chunk = new Uint8Array(8);\n        let view = new DataView(chunk.buffer);\n        let long = PbULong.from(value);\n        view.setInt32(0, long.lo, true);\n        view.setInt32(4, long.hi, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `int64` value, a signed 64-bit varint.\n     */\n    int64(value) {\n        let long = PbLong.from(value);\n        varint64write(long.lo, long.hi, this.buf);\n        return this;\n    }\n    /**\n     * Write a `sint64` value, a signed, zig-zag-encoded 64-bit varint.\n     */\n    sint64(value) {\n        let long = PbLong.from(value), \n        // zigzag encode\n        sign = long.hi >> 31, lo = (long.lo << 1) ^ sign, hi = ((long.hi << 1) | (long.lo >>> 31)) ^ sign;\n        varint64write(lo, hi, this.buf);\n        return this;\n    }\n    /**\n     * Write a `uint64` value, an unsigned 64-bit varint.\n     */\n    uint64(value) {\n        let long = PbULong.from(value);\n        varint64write(long.lo, long.hi, this.buf);\n        return this;\n    }\n}\n", "const defaultsWrite = {\n    emitDefaultValues: false,\n    enumAsInteger: false,\n    useProtoFieldName: false,\n    prettySpaces: 0,\n}, defaultsRead = {\n    ignoreUnknownFields: false,\n};\n/**\n * Make options for reading JSON data from partial options.\n */\nexport function jsonReadOptions(options) {\n    return options ? Object.assign(Object.assign({}, defaultsRead), options) : defaultsRead;\n}\n/**\n * Make options for writing JSON data from partial options.\n */\nexport function jsonWriteOptions(options) {\n    return options ? Object.assign(Object.assign({}, defaultsWrite), options) : defaultsWrite;\n}\n/**\n * Merges JSON write or read options. Later values override earlier values. Type registries are merged.\n */\nexport function mergeJsonOptions(a, b) {\n    var _a, _b;\n    let c = Object.assign(Object.assign({}, a), b);\n    c.typeRegistry = [...((_a = a === null || a === void 0 ? void 0 : a.typeRegistry) !== null && _a !== void 0 ? _a : []), ...((_b = b === null || b === void 0 ? void 0 : b.typeRegistry) !== null && _b !== void 0 ? _b : [])];\n    return c;\n}\n", "/**\n * The symbol used as a key on message objects to store the message type.\n *\n * Note that this is an experimental feature - it is here to stay, but\n * implementation details may change without notice.\n */\nexport const MESSAGE_TYPE = Symbol.for(\"protobuf-ts/message-type\");\n", "/**\n * Converts snake_case to lowerCamelCase.\n *\n * Should behave like protoc:\n * https://github.com/protocolbuffers/protobuf/blob/e8ae137c96444ea313485ed1118c5e43b2099cf1/src/google/protobuf/compiler/java/java_helpers.cc#L118\n */\nexport function lowerCamelCase(snakeCase) {\n    let capNext = false;\n    const sb = [];\n    for (let i = 0; i < snakeCase.length; i++) {\n        let next = snakeCase.charAt(i);\n        if (next == '_') {\n            capNext = true;\n        }\n        else if (/\\d/.test(next)) {\n            sb.push(next);\n            capNext = true;\n        }\n        else if (capNext) {\n            sb.push(next.toUpperCase());\n            capNext = false;\n        }\n        else if (i == 0) {\n            sb.push(next.toLowerCase());\n        }\n        else {\n            sb.push(next);\n        }\n    }\n    return sb.join('');\n}\n", "import { lowerCamelCase } from \"./lower-camel-case\";\n/**\n * Scalar value types. This is a subset of field types declared by protobuf\n * enum google.protobuf.FieldDescriptorProto.Type The types GROUP and MESSAGE\n * are omitted, but the numerical values are identical.\n */\nexport var ScalarType;\n(function (ScalarType) {\n    // 0 is reserved for errors.\n    // Order is weird for historical reasons.\n    ScalarType[ScalarType[\"DOUBLE\"] = 1] = \"DOUBLE\";\n    ScalarType[ScalarType[\"FLOAT\"] = 2] = \"FLOAT\";\n    // Not ZigZag encoded.  Negative numbers take 10 bytes.  Use TYPE_SINT64 if\n    // negative values are likely.\n    ScalarType[ScalarType[\"INT64\"] = 3] = \"INT64\";\n    ScalarType[ScalarType[\"UINT64\"] = 4] = \"UINT64\";\n    // Not ZigZag encoded.  Negative numbers take 10 bytes.  Use TYPE_SINT32 if\n    // negative values are likely.\n    ScalarType[ScalarType[\"INT32\"] = 5] = \"INT32\";\n    ScalarType[ScalarType[\"FIXED64\"] = 6] = \"FIXED64\";\n    ScalarType[ScalarType[\"FIXED32\"] = 7] = \"FIXED32\";\n    ScalarType[ScalarType[\"BOOL\"] = 8] = \"BOOL\";\n    ScalarType[ScalarType[\"STRING\"] = 9] = \"STRING\";\n    // Tag-delimited aggregate.\n    // Group type is deprecated and not supported in proto3. However, Proto3\n    // implementations should still be able to parse the group wire format and\n    // treat group fields as unknown fields.\n    // TYPE_GROUP = 10,\n    // TYPE_MESSAGE = 11,  // Length-delimited aggregate.\n    // New in version 2.\n    ScalarType[ScalarType[\"BYTES\"] = 12] = \"BYTES\";\n    ScalarType[ScalarType[\"UINT32\"] = 13] = \"UINT32\";\n    // TYPE_ENUM = 14,\n    ScalarType[ScalarType[\"SFIXED32\"] = 15] = \"SFIXED32\";\n    ScalarType[ScalarType[\"SFIXED64\"] = 16] = \"SFIXED64\";\n    ScalarType[ScalarType[\"SINT32\"] = 17] = \"SINT32\";\n    ScalarType[ScalarType[\"SINT64\"] = 18] = \"SINT64\";\n})(ScalarType || (ScalarType = {}));\n/**\n * JavaScript representation of 64 bit integral types. Equivalent to the\n * field option \"jstype\".\n *\n * By default, protobuf-ts represents 64 bit types as `bigint`.\n *\n * You can change the default behaviour by enabling the plugin parameter\n * `long_type_string`, which will represent 64 bit types as `string`.\n *\n * Alternatively, you can change the behaviour for individual fields\n * with the field option \"jstype\":\n *\n * ```protobuf\n * uint64 my_field = 1 [jstype = JS_STRING];\n * uint64 other_field = 2 [jstype = JS_NUMBER];\n * ```\n */\nexport var LongType;\n(function (LongType) {\n    /**\n     * Use JavaScript `bigint`.\n     *\n     * Field option `[jstype = JS_NORMAL]`.\n     */\n    LongType[LongType[\"BIGINT\"] = 0] = \"BIGINT\";\n    /**\n     * Use JavaScript `string`.\n     *\n     * Field option `[jstype = JS_STRING]`.\n     */\n    LongType[LongType[\"STRING\"] = 1] = \"STRING\";\n    /**\n     * Use JavaScript `number`.\n     *\n     * Large values will loose precision.\n     *\n     * Field option `[jstype = JS_NUMBER]`.\n     */\n    LongType[LongType[\"NUMBER\"] = 2] = \"NUMBER\";\n})(LongType || (LongType = {}));\n/**\n * Protobuf 2.1.0 introduced packed repeated fields.\n * Setting the field option `[packed = true]` enables packing.\n *\n * In proto3, all repeated fields are packed by default.\n * Setting the field option `[packed = false]` disables packing.\n *\n * Packed repeated fields are encoded with a single tag,\n * then a length-delimiter, then the element values.\n *\n * Unpacked repeated fields are encoded with a tag and\n * value for each element.\n *\n * `bytes` and `string` cannot be packed.\n */\nexport var RepeatType;\n(function (RepeatType) {\n    /**\n     * The field is not repeated.\n     */\n    RepeatType[RepeatType[\"NO\"] = 0] = \"NO\";\n    /**\n     * The field is repeated and should be packed.\n     * Invalid for `bytes` and `string`, they cannot be packed.\n     */\n    RepeatType[RepeatType[\"PACKED\"] = 1] = \"PACKED\";\n    /**\n     * The field is repeated but should not be packed.\n     * The only valid repeat type for repeated `bytes` and `string`.\n     */\n    RepeatType[RepeatType[\"UNPACKED\"] = 2] = \"UNPACKED\";\n})(RepeatType || (RepeatType = {}));\n/**\n * Turns PartialFieldInfo into FieldInfo.\n */\nexport function normalizeFieldInfo(field) {\n    var _a, _b, _c, _d;\n    field.localName = (_a = field.localName) !== null && _a !== void 0 ? _a : lowerCamelCase(field.name);\n    field.jsonName = (_b = field.jsonName) !== null && _b !== void 0 ? _b : lowerCamelCase(field.name);\n    field.repeat = (_c = field.repeat) !== null && _c !== void 0 ? _c : RepeatType.NO;\n    field.opt = (_d = field.opt) !== null && _d !== void 0 ? _d : (field.repeat ? false : field.oneof ? false : field.kind == \"message\");\n    return field;\n}\n/**\n * Read custom field options from a generated message type.\n *\n * @deprecated use readFieldOption()\n */\nexport function readFieldOptions(messageType, fieldName, extensionName, extensionType) {\n    var _a;\n    const options = (_a = messageType.fields.find((m, i) => m.localName == fieldName || i == fieldName)) === null || _a === void 0 ? void 0 : _a.options;\n    return options && options[extensionName] ? extensionType.fromJson(options[extensionName]) : undefined;\n}\nexport function readFieldOption(messageType, fieldName, extensionName, extensionType) {\n    var _a;\n    const options = (_a = messageType.fields.find((m, i) => m.localName == fieldName || i == fieldName)) === null || _a === void 0 ? void 0 : _a.options;\n    if (!options) {\n        return undefined;\n    }\n    const optionVal = options[extensionName];\n    if (optionVal === undefined) {\n        return optionVal;\n    }\n    return extensionType ? extensionType.fromJson(optionVal) : optionVal;\n}\nexport function readMessageOption(messageType, extensionName, extensionType) {\n    const options = messageType.options;\n    const optionVal = options[extensionName];\n    if (optionVal === undefined) {\n        return optionVal;\n    }\n    return extensionType ? extensionType.fromJson(optionVal) : optionVal;\n}\n", "/**\n * Is the given value a valid oneof group?\n *\n * We represent protobuf `oneof` as algebraic data types (ADT) in generated\n * code. But when working with messages of unknown type, the ADT does not\n * help us.\n *\n * This type guard checks if the given object adheres to the ADT rules, which\n * are as follows:\n *\n * 1) Must be an object.\n *\n * 2) Must have a \"oneofKind\" discriminator property.\n *\n * 3) If \"oneofKind\" is `undefined`, no member field is selected. The object\n * must not have any other properties.\n *\n * 4) If \"oneofKind\" is a `string`, the member field with this name is\n * selected.\n *\n * 5) If a member field is selected, the object must have a second property\n * with this name. The property must not be `undefined`.\n *\n * 6) No extra properties are allowed. The object has either one property\n * (no selection) or two properties (selection).\n *\n */\nexport function isOneofGroup(any) {\n    if (typeof any != 'object' || any === null || !any.hasOwnProperty('oneofKind')) {\n        return false;\n    }\n    switch (typeof any.oneofKind) {\n        case \"string\":\n            if (any[any.oneofKind] === undefined)\n                return false;\n            return Object.keys(any).length == 2;\n        case \"undefined\":\n            return Object.keys(any).length == 1;\n        default:\n            return false;\n    }\n}\n/**\n * Returns the value of the given field in a oneof group.\n */\nexport function getOneofValue(oneof, kind) {\n    return oneof[kind];\n}\nexport function setOneofValue(oneof, kind, value) {\n    if (oneof.oneofKind !== undefined) {\n        delete oneof[oneof.oneofKind];\n    }\n    oneof.oneofKind = kind;\n    if (value !== undefined) {\n        oneof[kind] = value;\n    }\n}\nexport function setUnknownOneofValue(oneof, kind, value) {\n    if (oneof.oneofKind !== undefined) {\n        delete oneof[oneof.oneofKind];\n    }\n    oneof.oneofKind = kind;\n    if (value !== undefined && kind !== undefined) {\n        oneof[kind] = value;\n    }\n}\n/**\n * Removes the selected field in a oneof group.\n *\n * Note that the recommended way to modify a oneof group is to set\n * a new object:\n *\n * ```ts\n * message.result = { oneofKind: undefined };\n * ```\n */\nexport function clearOneofValue(oneof) {\n    if (oneof.oneofKind !== undefined) {\n        delete oneof[oneof.oneofKind];\n    }\n    oneof.oneofKind = undefined;\n}\n/**\n * Returns the selected value of the given oneof group.\n *\n * Not that the recommended way to access a oneof group is to check\n * the \"oneofKind\" property and let TypeScript narrow down the union\n * type for you:\n *\n * ```ts\n * if (message.result.oneofKind === \"error\") {\n *   message.result.error; // string\n * }\n * ```\n *\n * In the rare case you just need the value, and do not care about\n * which protobuf field is selected, you can use this function\n * for convenience.\n */\nexport function getSelectedOneofValue(oneof) {\n    if (oneof.oneofKind === undefined) {\n        return undefined;\n    }\n    return oneof[oneof.oneofKind];\n}\n", "import { LongType, ScalarType } from \"./reflection-info\";\nimport { isOneofGroup } from \"./oneof\";\n// noinspection JSMethodCanBeStatic\nexport class ReflectionTypeCheck {\n    constructor(info) {\n        var _a;\n        this.fields = (_a = info.fields) !== null && _a !== void 0 ? _a : [];\n    }\n    prepare() {\n        if (this.data)\n            return;\n        const req = [], known = [], oneofs = [];\n        for (let field of this.fields) {\n            if (field.oneof) {\n                if (!oneofs.includes(field.oneof)) {\n                    oneofs.push(field.oneof);\n                    req.push(field.oneof);\n                    known.push(field.oneof);\n                }\n            }\n            else {\n                known.push(field.localName);\n                switch (field.kind) {\n                    case \"scalar\":\n                    case \"enum\":\n                        if (!field.opt || field.repeat)\n                            req.push(field.localName);\n                        break;\n                    case \"message\":\n                        if (field.repeat)\n                            req.push(field.localName);\n                        break;\n                    case \"map\":\n                        req.push(field.localName);\n                        break;\n                }\n            }\n        }\n        this.data = { req, known, oneofs: Object.values(oneofs) };\n    }\n    /**\n     * Is the argument a valid message as specified by the\n     * reflection information?\n     *\n     * Checks all field types recursively. The `depth`\n     * specifies how deep into the structure the check will be.\n     *\n     * With a depth of 0, only the presence of fields\n     * is checked.\n     *\n     * With a depth of 1 or more, the field types are checked.\n     *\n     * With a depth of 2 or more, the members of map, repeated\n     * and message fields are checked.\n     *\n     * Message fields will be checked recursively with depth - 1.\n     *\n     * The number of map entries / repeated values being checked\n     * is < depth.\n     */\n    is(message, depth, allowExcessProperties = false) {\n        if (depth < 0)\n            return true;\n        if (message === null || message === undefined || typeof message != 'object')\n            return false;\n        this.prepare();\n        let keys = Object.keys(message), data = this.data;\n        // if a required field is missing in arg, this cannot be a T\n        if (keys.length < data.req.length || data.req.some(n => !keys.includes(n)))\n            return false;\n        if (!allowExcessProperties) {\n            // if the arg contains a key we dont know, this is not a literal T\n            if (keys.some(k => !data.known.includes(k)))\n                return false;\n        }\n        // \"With a depth of 0, only the presence and absence of fields is checked.\"\n        // \"With a depth of 1 or more, the field types are checked.\"\n        if (depth < 1) {\n            return true;\n        }\n        // check oneof group\n        for (const name of data.oneofs) {\n            const group = message[name];\n            if (!isOneofGroup(group))\n                return false;\n            if (group.oneofKind === undefined)\n                continue;\n            const field = this.fields.find(f => f.localName === group.oneofKind);\n            if (!field)\n                return false; // we found no field, but have a kind, something is wrong\n            if (!this.field(group[group.oneofKind], field, allowExcessProperties, depth))\n                return false;\n        }\n        // check types\n        for (const field of this.fields) {\n            if (field.oneof !== undefined)\n                continue;\n            if (!this.field(message[field.localName], field, allowExcessProperties, depth))\n                return false;\n        }\n        return true;\n    }\n    field(arg, field, allowExcessProperties, depth) {\n        let repeated = field.repeat;\n        switch (field.kind) {\n            case \"scalar\":\n                if (arg === undefined)\n                    return field.opt;\n                if (repeated)\n                    return this.scalars(arg, field.T, depth, field.L);\n                return this.scalar(arg, field.T, field.L);\n            case \"enum\":\n                if (arg === undefined)\n                    return field.opt;\n                if (repeated)\n                    return this.scalars(arg, ScalarType.INT32, depth);\n                return this.scalar(arg, ScalarType.INT32);\n            case \"message\":\n                if (arg === undefined)\n                    return true;\n                if (repeated)\n                    return this.messages(arg, field.T(), allowExcessProperties, depth);\n                return this.message(arg, field.T(), allowExcessProperties, depth);\n            case \"map\":\n                if (typeof arg != 'object' || arg === null)\n                    return false;\n                if (depth < 2)\n                    return true;\n                if (!this.mapKeys(arg, field.K, depth))\n                    return false;\n                switch (field.V.kind) {\n                    case \"scalar\":\n                        return this.scalars(Object.values(arg), field.V.T, depth, field.V.L);\n                    case \"enum\":\n                        return this.scalars(Object.values(arg), ScalarType.INT32, depth);\n                    case \"message\":\n                        return this.messages(Object.values(arg), field.V.T(), allowExcessProperties, depth);\n                }\n                break;\n        }\n        return true;\n    }\n    message(arg, type, allowExcessProperties, depth) {\n        if (allowExcessProperties) {\n            return type.isAssignable(arg, depth);\n        }\n        return type.is(arg, depth);\n    }\n    messages(arg, type, allowExcessProperties, depth) {\n        if (!Array.isArray(arg))\n            return false;\n        if (depth < 2)\n            return true;\n        if (allowExcessProperties) {\n            for (let i = 0; i < arg.length && i < depth; i++)\n                if (!type.isAssignable(arg[i], depth - 1))\n                    return false;\n        }\n        else {\n            for (let i = 0; i < arg.length && i < depth; i++)\n                if (!type.is(arg[i], depth - 1))\n                    return false;\n        }\n        return true;\n    }\n    scalar(arg, type, longType) {\n        let argType = typeof arg;\n        switch (type) {\n            case ScalarType.UINT64:\n            case ScalarType.FIXED64:\n            case ScalarType.INT64:\n            case ScalarType.SFIXED64:\n            case ScalarType.SINT64:\n                switch (longType) {\n                    case LongType.BIGINT:\n                        return argType == \"bigint\";\n                    case LongType.NUMBER:\n                        return argType == \"number\" && !isNaN(arg);\n                    default:\n                        return argType == \"string\";\n                }\n            case ScalarType.BOOL:\n                return argType == 'boolean';\n            case ScalarType.STRING:\n                return argType == 'string';\n            case ScalarType.BYTES:\n                return arg instanceof Uint8Array;\n            case ScalarType.DOUBLE:\n            case ScalarType.FLOAT:\n                return argType == 'number' && !isNaN(arg);\n            default:\n                // case ScalarType.UINT32:\n                // case ScalarType.FIXED32:\n                // case ScalarType.INT32:\n                // case ScalarType.SINT32:\n                // case ScalarType.SFIXED32:\n                return argType == 'number' && Number.isInteger(arg);\n        }\n    }\n    scalars(arg, type, depth, longType) {\n        if (!Array.isArray(arg))\n            return false;\n        if (depth < 2)\n            return true;\n        if (Array.isArray(arg))\n            for (let i = 0; i < arg.length && i < depth; i++)\n                if (!this.scalar(arg[i], type, longType))\n                    return false;\n        return true;\n    }\n    mapKeys(map, type, depth) {\n        let keys = Object.keys(map);\n        switch (type) {\n            case ScalarType.INT32:\n            case ScalarType.FIXED32:\n            case ScalarType.SFIXED32:\n            case ScalarType.SINT32:\n            case ScalarType.UINT32:\n                return this.scalars(keys.slice(0, depth).map(k => parseInt(k)), type, depth);\n            case ScalarType.BOOL:\n                return this.scalars(keys.slice(0, depth).map(k => k == 'true' ? true : k == 'false' ? false : k), type, depth);\n            default:\n                return this.scalars(keys, type, depth, LongType.STRING);\n        }\n    }\n}\n", "import { LongType } from \"./reflection-info\";\n/**\n * Utility method to convert a PbLong or PbUlong to a JavaScript\n * representation during runtime.\n *\n * Works with generated field information, `undefined` is equivalent\n * to `STRING`.\n */\nexport function reflectionLongConvert(long, type) {\n    switch (type) {\n        case LongType.BIGINT:\n            return long.toBigInt();\n        case LongType.NUMBER:\n            return long.toNumber();\n        default:\n            // case undefined:\n            // case LongType.STRING:\n            return long.toString();\n    }\n}\n", "import { isJsonObject, typeofJsonValue } from \"./json-typings\";\nimport { base64decode } from \"./base64\";\nimport { LongType, ScalarType } from \"./reflection-info\";\nimport { PbLong, PbULong } from \"./pb-long\";\nimport { assert, assertFloat32, assertInt32, assertUInt32 } from \"./assert\";\nimport { reflectionLongConvert } from \"./reflection-long-convert\";\n/**\n * Reads proto3 messages in canonical JSON format using reflection information.\n *\n * https://developers.google.com/protocol-buffers/docs/proto3#json\n */\nexport class ReflectionJsonReader {\n    constructor(info) {\n        this.info = info;\n    }\n    prepare() {\n        var _a;\n        if (this.fMap === undefined) {\n            this.fMap = {};\n            const fieldsInput = (_a = this.info.fields) !== null && _a !== void 0 ? _a : [];\n            for (const field of fieldsInput) {\n                this.fMap[field.name] = field;\n                this.fMap[field.jsonName] = field;\n                this.fMap[field.localName] = field;\n            }\n        }\n    }\n    // Cannot parse JSON <type of jsonValue> for <type name>#<fieldName>.\n    assert(condition, fieldName, jsonValue) {\n        if (!condition) {\n            let what = typeofJsonValue(jsonValue);\n            if (what == \"number\" || what == \"boolean\")\n                what = jsonValue.toString();\n            throw new Error(`Cannot parse JSON ${what} for ${this.info.typeName}#${fieldName}`);\n        }\n    }\n    /**\n     * Reads a message from canonical JSON format into the target message.\n     *\n     * Repeated fields are appended. Map entries are added, overwriting\n     * existing keys.\n     *\n     * If a message field is already present, it will be merged with the\n     * new data.\n     */\n    read(input, message, options) {\n        this.prepare();\n        const oneofsHandled = [];\n        for (const [jsonKey, jsonValue] of Object.entries(input)) {\n            const field = this.fMap[jsonKey];\n            if (!field) {\n                if (!options.ignoreUnknownFields)\n                    throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${jsonKey}`);\n                continue;\n            }\n            const localName = field.localName;\n            // handle oneof ADT\n            let target; // this will be the target for the field value, whether it is member of a oneof or not\n            if (field.oneof) {\n                if (jsonValue === null && (field.kind !== 'enum' || field.T()[0] !== 'google.protobuf.NullValue')) {\n                    continue;\n                }\n                // since json objects are unordered by specification, it is not possible to take the last of multiple oneofs\n                if (oneofsHandled.includes(field.oneof))\n                    throw new Error(`Multiple members of the oneof group \"${field.oneof}\" of ${this.info.typeName} are present in JSON.`);\n                oneofsHandled.push(field.oneof);\n                target = message[field.oneof] = {\n                    oneofKind: localName\n                };\n            }\n            else {\n                target = message;\n            }\n            // we have handled oneof above. we just have read the value into `target`.\n            if (field.kind == 'map') {\n                if (jsonValue === null) {\n                    continue;\n                }\n                // check input\n                this.assert(isJsonObject(jsonValue), field.name, jsonValue);\n                // our target to put map entries into\n                const fieldObj = target[localName];\n                // read entries\n                for (const [jsonObjKey, jsonObjValue] of Object.entries(jsonValue)) {\n                    this.assert(jsonObjValue !== null, field.name + \" map value\", null);\n                    // read value\n                    let val;\n                    switch (field.V.kind) {\n                        case \"message\":\n                            val = field.V.T().internalJsonRead(jsonObjValue, options);\n                            break;\n                        case \"enum\":\n                            val = this.enum(field.V.T(), jsonObjValue, field.name, options.ignoreUnknownFields);\n                            if (val === false)\n                                continue;\n                            break;\n                        case \"scalar\":\n                            val = this.scalar(jsonObjValue, field.V.T, field.V.L, field.name);\n                            break;\n                    }\n                    this.assert(val !== undefined, field.name + \" map value\", jsonObjValue);\n                    // read key\n                    let key = jsonObjKey;\n                    if (field.K == ScalarType.BOOL)\n                        key = key == \"true\" ? true : key == \"false\" ? false : key;\n                    key = this.scalar(key, field.K, LongType.STRING, field.name).toString();\n                    fieldObj[key] = val;\n                }\n            }\n            else if (field.repeat) {\n                if (jsonValue === null)\n                    continue;\n                // check input\n                this.assert(Array.isArray(jsonValue), field.name, jsonValue);\n                // our target to put array entries into\n                const fieldArr = target[localName];\n                // read array entries\n                for (const jsonItem of jsonValue) {\n                    this.assert(jsonItem !== null, field.name, null);\n                    let val;\n                    switch (field.kind) {\n                        case \"message\":\n                            val = field.T().internalJsonRead(jsonItem, options);\n                            break;\n                        case \"enum\":\n                            val = this.enum(field.T(), jsonItem, field.name, options.ignoreUnknownFields);\n                            if (val === false)\n                                continue;\n                            break;\n                        case \"scalar\":\n                            val = this.scalar(jsonItem, field.T, field.L, field.name);\n                            break;\n                    }\n                    this.assert(val !== undefined, field.name, jsonValue);\n                    fieldArr.push(val);\n                }\n            }\n            else {\n                switch (field.kind) {\n                    case \"message\":\n                        if (jsonValue === null && field.T().typeName != 'google.protobuf.Value') {\n                            this.assert(field.oneof === undefined, field.name + \" (oneof member)\", null);\n                            continue;\n                        }\n                        target[localName] = field.T().internalJsonRead(jsonValue, options, target[localName]);\n                        break;\n                    case \"enum\":\n                        if (jsonValue === null)\n                            continue;\n                        let val = this.enum(field.T(), jsonValue, field.name, options.ignoreUnknownFields);\n                        if (val === false)\n                            continue;\n                        target[localName] = val;\n                        break;\n                    case \"scalar\":\n                        if (jsonValue === null)\n                            continue;\n                        target[localName] = this.scalar(jsonValue, field.T, field.L, field.name);\n                        break;\n                }\n            }\n        }\n    }\n    /**\n     * Returns `false` for unrecognized string representations.\n     *\n     * google.protobuf.NullValue accepts only JSON `null` (or the old `\"NULL_VALUE\"`).\n     */\n    enum(type, json, fieldName, ignoreUnknownFields) {\n        if (type[0] == 'google.protobuf.NullValue')\n            assert(json === null || json === \"NULL_VALUE\", `Unable to parse field ${this.info.typeName}#${fieldName}, enum ${type[0]} only accepts null.`);\n        if (json === null)\n            // we require 0 to be default value for all enums\n            return 0;\n        switch (typeof json) {\n            case \"number\":\n                assert(Number.isInteger(json), `Unable to parse field ${this.info.typeName}#${fieldName}, enum can only be integral number, got ${json}.`);\n                return json;\n            case \"string\":\n                let localEnumName = json;\n                if (type[2] && json.substring(0, type[2].length) === type[2])\n                    // lookup without the shared prefix\n                    localEnumName = json.substring(type[2].length);\n                let enumNumber = type[1][localEnumName];\n                if (typeof enumNumber === 'undefined' && ignoreUnknownFields) {\n                    return false;\n                }\n                assert(typeof enumNumber == \"number\", `Unable to parse field ${this.info.typeName}#${fieldName}, enum ${type[0]} has no value for \"${json}\".`);\n                return enumNumber;\n        }\n        assert(false, `Unable to parse field ${this.info.typeName}#${fieldName}, cannot parse enum value from ${typeof json}\".`);\n    }\n    scalar(json, type, longType, fieldName) {\n        let e;\n        try {\n            switch (type) {\n                // float, double: JSON value will be a number or one of the special string values \"NaN\", \"Infinity\", and \"-Infinity\".\n                // Either numbers or strings are accepted. Exponent notation is also accepted.\n                case ScalarType.DOUBLE:\n                case ScalarType.FLOAT:\n                    if (json === null)\n                        return .0;\n                    if (json === \"NaN\")\n                        return Number.NaN;\n                    if (json === \"Infinity\")\n                        return Number.POSITIVE_INFINITY;\n                    if (json === \"-Infinity\")\n                        return Number.NEGATIVE_INFINITY;\n                    if (json === \"\") {\n                        e = \"empty string\";\n                        break;\n                    }\n                    if (typeof json == \"string\" && json.trim().length !== json.length) {\n                        e = \"extra whitespace\";\n                        break;\n                    }\n                    if (typeof json != \"string\" && typeof json != \"number\") {\n                        break;\n                    }\n                    let float = Number(json);\n                    if (Number.isNaN(float)) {\n                        e = \"not a number\";\n                        break;\n                    }\n                    if (!Number.isFinite(float)) {\n                        // infinity and -infinity are handled by string representation above, so this is an error\n                        e = \"too large or small\";\n                        break;\n                    }\n                    if (type == ScalarType.FLOAT)\n                        assertFloat32(float);\n                    return float;\n                // int32, fixed32, uint32: JSON value will be a decimal number. Either numbers or strings are accepted.\n                case ScalarType.INT32:\n                case ScalarType.FIXED32:\n                case ScalarType.SFIXED32:\n                case ScalarType.SINT32:\n                case ScalarType.UINT32:\n                    if (json === null)\n                        return 0;\n                    let int32;\n                    if (typeof json == \"number\")\n                        int32 = json;\n                    else if (json === \"\")\n                        e = \"empty string\";\n                    else if (typeof json == \"string\") {\n                        if (json.trim().length !== json.length)\n                            e = \"extra whitespace\";\n                        else\n                            int32 = Number(json);\n                    }\n                    if (int32 === undefined)\n                        break;\n                    if (type == ScalarType.UINT32)\n                        assertUInt32(int32);\n                    else\n                        assertInt32(int32);\n                    return int32;\n                // int64, fixed64, uint64: JSON value will be a decimal string. Either numbers or strings are accepted.\n                case ScalarType.INT64:\n                case ScalarType.SFIXED64:\n                case ScalarType.SINT64:\n                    if (json === null)\n                        return reflectionLongConvert(PbLong.ZERO, longType);\n                    if (typeof json != \"number\" && typeof json != \"string\")\n                        break;\n                    return reflectionLongConvert(PbLong.from(json), longType);\n                case ScalarType.FIXED64:\n                case ScalarType.UINT64:\n                    if (json === null)\n                        return reflectionLongConvert(PbULong.ZERO, longType);\n                    if (typeof json != \"number\" && typeof json != \"string\")\n                        break;\n                    return reflectionLongConvert(PbULong.from(json), longType);\n                // bool:\n                case ScalarType.BOOL:\n                    if (json === null)\n                        return false;\n                    if (typeof json !== \"boolean\")\n                        break;\n                    return json;\n                // string:\n                case ScalarType.STRING:\n                    if (json === null)\n                        return \"\";\n                    if (typeof json !== \"string\") {\n                        e = \"extra whitespace\";\n                        break;\n                    }\n                    try {\n                        encodeURIComponent(json);\n                    }\n                    catch (e) {\n                        e = \"invalid UTF8\";\n                        break;\n                    }\n                    return json;\n                // bytes: JSON value will be the data encoded as a string using standard base64 encoding with paddings.\n                // Either standard or URL-safe base64 encoding with/without paddings are accepted.\n                case ScalarType.BYTES:\n                    if (json === null || json === \"\")\n                        return new Uint8Array(0);\n                    if (typeof json !== 'string')\n                        break;\n                    return base64decode(json);\n            }\n        }\n        catch (error) {\n            e = error.message;\n        }\n        this.assert(false, fieldName + (e ? \" - \" + e : \"\"), json);\n    }\n}\n", "import { base64encode } from \"./base64\";\nimport { PbLong, PbULong } from \"./pb-long\";\nimport { ScalarType } from \"./reflection-info\";\nimport { assert, assertFloat32, assertInt32, assertUInt32 } from \"./assert\";\n/**\n * Writes proto3 messages in canonical JSON format using reflection\n * information.\n *\n * https://developers.google.com/protocol-buffers/docs/proto3#json\n */\nexport class ReflectionJsonWriter {\n    constructor(info) {\n        var _a;\n        this.fields = (_a = info.fields) !== null && _a !== void 0 ? _a : [];\n    }\n    /**\n     * Converts the message to a JSON object, based on the field descriptors.\n     */\n    write(message, options) {\n        const json = {}, source = message;\n        for (const field of this.fields) {\n            // field is not part of a oneof, simply write as is\n            if (!field.oneof) {\n                let jsonValue = this.field(field, source[field.localName], options);\n                if (jsonValue !== undefined)\n                    json[options.useProtoFieldName ? field.name : field.jsonName] = jsonValue;\n                continue;\n            }\n            // field is part of a oneof\n            const group = source[field.oneof];\n            if (group.oneofKind !== field.localName)\n                continue; // not selected, skip\n            const opt = field.kind == 'scalar' || field.kind == 'enum'\n                ? Object.assign(Object.assign({}, options), { emitDefaultValues: true }) : options;\n            let jsonValue = this.field(field, group[field.localName], opt);\n            assert(jsonValue !== undefined);\n            json[options.useProtoFieldName ? field.name : field.jsonName] = jsonValue;\n        }\n        return json;\n    }\n    field(field, value, options) {\n        let jsonValue = undefined;\n        if (field.kind == 'map') {\n            assert(typeof value == \"object\" && value !== null);\n            const jsonObj = {};\n            switch (field.V.kind) {\n                case \"scalar\":\n                    for (const [entryKey, entryValue] of Object.entries(value)) {\n                        const val = this.scalar(field.V.T, entryValue, field.name, false, true);\n                        assert(val !== undefined);\n                        jsonObj[entryKey.toString()] = val; // JSON standard allows only (double quoted) string as property key\n                    }\n                    break;\n                case \"message\":\n                    const messageType = field.V.T();\n                    for (const [entryKey, entryValue] of Object.entries(value)) {\n                        const val = this.message(messageType, entryValue, field.name, options);\n                        assert(val !== undefined);\n                        jsonObj[entryKey.toString()] = val; // JSON standard allows only (double quoted) string as property key\n                    }\n                    break;\n                case \"enum\":\n                    const enumInfo = field.V.T();\n                    for (const [entryKey, entryValue] of Object.entries(value)) {\n                        assert(entryValue === undefined || typeof entryValue == 'number');\n                        const val = this.enum(enumInfo, entryValue, field.name, false, true, options.enumAsInteger);\n                        assert(val !== undefined);\n                        jsonObj[entryKey.toString()] = val; // JSON standard allows only (double quoted) string as property key\n                    }\n                    break;\n            }\n            if (options.emitDefaultValues || Object.keys(jsonObj).length > 0)\n                jsonValue = jsonObj;\n        }\n        else if (field.repeat) {\n            assert(Array.isArray(value));\n            const jsonArr = [];\n            switch (field.kind) {\n                case \"scalar\":\n                    for (let i = 0; i < value.length; i++) {\n                        const val = this.scalar(field.T, value[i], field.name, field.opt, true);\n                        assert(val !== undefined);\n                        jsonArr.push(val);\n                    }\n                    break;\n                case \"enum\":\n                    const enumInfo = field.T();\n                    for (let i = 0; i < value.length; i++) {\n                        assert(value[i] === undefined || typeof value[i] == 'number');\n                        const val = this.enum(enumInfo, value[i], field.name, field.opt, true, options.enumAsInteger);\n                        assert(val !== undefined);\n                        jsonArr.push(val);\n                    }\n                    break;\n                case \"message\":\n                    const messageType = field.T();\n                    for (let i = 0; i < value.length; i++) {\n                        const val = this.message(messageType, value[i], field.name, options);\n                        assert(val !== undefined);\n                        jsonArr.push(val);\n                    }\n                    break;\n            }\n            // add converted array to json output\n            if (options.emitDefaultValues || jsonArr.length > 0 || options.emitDefaultValues)\n                jsonValue = jsonArr;\n        }\n        else {\n            switch (field.kind) {\n                case \"scalar\":\n                    jsonValue = this.scalar(field.T, value, field.name, field.opt, options.emitDefaultValues);\n                    break;\n                case \"enum\":\n                    jsonValue = this.enum(field.T(), value, field.name, field.opt, options.emitDefaultValues, options.enumAsInteger);\n                    break;\n                case \"message\":\n                    jsonValue = this.message(field.T(), value, field.name, options);\n                    break;\n            }\n        }\n        return jsonValue;\n    }\n    /**\n     * Returns `null` as the default for google.protobuf.NullValue.\n     */\n    enum(type, value, fieldName, optional, emitDefaultValues, enumAsInteger) {\n        if (type[0] == 'google.protobuf.NullValue')\n            return !emitDefaultValues && !optional ? undefined : null;\n        if (value === undefined) {\n            assert(optional);\n            return undefined;\n        }\n        if (value === 0 && !emitDefaultValues && !optional)\n            // we require 0 to be default value for all enums\n            return undefined;\n        assert(typeof value == 'number');\n        assert(Number.isInteger(value));\n        if (enumAsInteger || !type[1].hasOwnProperty(value))\n            // if we don't now the enum value, just return the number\n            return value;\n        if (type[2])\n            // restore the dropped prefix\n            return type[2] + type[1][value];\n        return type[1][value];\n    }\n    message(type, value, fieldName, options) {\n        if (value === undefined)\n            return options.emitDefaultValues ? null : undefined;\n        return type.internalJsonWrite(value, options);\n    }\n    scalar(type, value, fieldName, optional, emitDefaultValues) {\n        if (value === undefined) {\n            assert(optional);\n            return undefined;\n        }\n        const ed = emitDefaultValues || optional;\n        // noinspection FallThroughInSwitchStatementJS\n        switch (type) {\n            // int32, fixed32, uint32: JSON value will be a decimal number. Either numbers or strings are accepted.\n            case ScalarType.INT32:\n            case ScalarType.SFIXED32:\n            case ScalarType.SINT32:\n                if (value === 0)\n                    return ed ? 0 : undefined;\n                assertInt32(value);\n                return value;\n            case ScalarType.FIXED32:\n            case ScalarType.UINT32:\n                if (value === 0)\n                    return ed ? 0 : undefined;\n                assertUInt32(value);\n                return value;\n            // float, double: JSON value will be a number or one of the special string values \"NaN\", \"Infinity\", and \"-Infinity\".\n            // Either numbers or strings are accepted. Exponent notation is also accepted.\n            case ScalarType.FLOAT:\n                assertFloat32(value);\n            case ScalarType.DOUBLE:\n                if (value === 0)\n                    return ed ? 0 : undefined;\n                assert(typeof value == 'number');\n                if (Number.isNaN(value))\n                    return 'NaN';\n                if (value === Number.POSITIVE_INFINITY)\n                    return 'Infinity';\n                if (value === Number.NEGATIVE_INFINITY)\n                    return '-Infinity';\n                return value;\n            // string:\n            case ScalarType.STRING:\n                if (value === \"\")\n                    return ed ? '' : undefined;\n                assert(typeof value == 'string');\n                return value;\n            // bool:\n            case ScalarType.BOOL:\n                if (value === false)\n                    return ed ? false : undefined;\n                assert(typeof value == 'boolean');\n                return value;\n            // JSON value will be a decimal string. Either numbers or strings are accepted.\n            case ScalarType.UINT64:\n            case ScalarType.FIXED64:\n                assert(typeof value == 'number' || typeof value == 'string' || typeof value == 'bigint');\n                let ulong = PbULong.from(value);\n                if (ulong.isZero() && !ed)\n                    return undefined;\n                return ulong.toString();\n            // JSON value will be a decimal string. Either numbers or strings are accepted.\n            case ScalarType.INT64:\n            case ScalarType.SFIXED64:\n            case ScalarType.SINT64:\n                assert(typeof value == 'number' || typeof value == 'string' || typeof value == 'bigint');\n                let long = PbLong.from(value);\n                if (long.isZero() && !ed)\n                    return undefined;\n                return long.toString();\n            // bytes: JSON value will be the data encoded as a string using standard base64 encoding with paddings.\n            // Either standard or URL-safe base64 encoding with/without paddings are accepted.\n            case ScalarType.BYTES:\n                assert(value instanceof Uint8Array);\n                if (!value.byteLength)\n                    return ed ? \"\" : undefined;\n                return base64encode(value);\n        }\n    }\n}\n", "import { LongType, ScalarType } from \"./reflection-info\";\nimport { reflectionLongConvert } from \"./reflection-long-convert\";\nimport { PbLong, PbULong } from \"./pb-long\";\n/**\n * Creates the default value for a scalar type.\n */\nexport function reflectionScalarDefault(type, longType = LongType.STRING) {\n    switch (type) {\n        case ScalarType.BOOL:\n            return false;\n        case ScalarType.UINT64:\n        case ScalarType.FIXED64:\n            return reflectionLongConvert(PbULong.ZERO, longType);\n        case ScalarType.INT64:\n        case ScalarType.SFIXED64:\n        case ScalarType.SINT64:\n            return reflectionLongConvert(PbLong.ZERO, longType);\n        case ScalarType.DOUBLE:\n        case ScalarType.FLOAT:\n            return 0.0;\n        case ScalarType.BYTES:\n            return new Uint8Array(0);\n        case ScalarType.STRING:\n            return \"\";\n        default:\n            // case ScalarType.INT32:\n            // case ScalarType.UINT32:\n            // case ScalarType.SINT32:\n            // case ScalarType.FIXED32:\n            // case ScalarType.SFIXED32:\n            return 0;\n    }\n}\n", "import { UnknownFieldHandler, WireType } from \"./binary-format-contract\";\nimport { LongType, ScalarType } from \"./reflection-info\";\nimport { reflectionLongConvert } from \"./reflection-long-convert\";\nimport { reflectionScalarDefault } from \"./reflection-scalar-default\";\n/**\n * Reads proto3 messages in binary format using reflection information.\n *\n * https://developers.google.com/protocol-buffers/docs/encoding\n */\nexport class ReflectionBinaryReader {\n    constructor(info) {\n        this.info = info;\n    }\n    prepare() {\n        var _a;\n        if (!this.fieldNoToField) {\n            const fieldsInput = (_a = this.info.fields) !== null && _a !== void 0 ? _a : [];\n            this.fieldNoToField = new Map(fieldsInput.map(field => [field.no, field]));\n        }\n    }\n    /**\n     * Reads a message from binary format into the target message.\n     *\n     * Repeated fields are appended. Map entries are added, overwriting\n     * existing keys.\n     *\n     * If a message field is already present, it will be merged with the\n     * new data.\n     */\n    read(reader, message, options, length) {\n        this.prepare();\n        const end = length === undefined ? reader.len : reader.pos + length;\n        while (reader.pos < end) {\n            // read the tag and find the field\n            const [fieldNo, wireType] = reader.tag(), field = this.fieldNoToField.get(fieldNo);\n            if (!field) {\n                let u = options.readUnknownField;\n                if (u == \"throw\")\n                    throw new Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.info.typeName}`);\n                let d = reader.skip(wireType);\n                if (u !== false)\n                    (u === true ? UnknownFieldHandler.onRead : u)(this.info.typeName, message, fieldNo, wireType, d);\n                continue;\n            }\n            // target object for the field we are reading\n            let target = message, repeated = field.repeat, localName = field.localName;\n            // if field is member of oneof ADT, use ADT as target\n            if (field.oneof) {\n                target = target[field.oneof];\n                // if other oneof member selected, set new ADT\n                if (target.oneofKind !== localName)\n                    target = message[field.oneof] = {\n                        oneofKind: localName\n                    };\n            }\n            // we have handled oneof above, we just have read the value into `target[localName]`\n            switch (field.kind) {\n                case \"scalar\":\n                case \"enum\":\n                    let T = field.kind == \"enum\" ? ScalarType.INT32 : field.T;\n                    let L = field.kind == \"scalar\" ? field.L : undefined;\n                    if (repeated) {\n                        let arr = target[localName]; // safe to assume presence of array, oneof cannot contain repeated values\n                        if (wireType == WireType.LengthDelimited && T != ScalarType.STRING && T != ScalarType.BYTES) {\n                            let e = reader.uint32() + reader.pos;\n                            while (reader.pos < e)\n                                arr.push(this.scalar(reader, T, L));\n                        }\n                        else\n                            arr.push(this.scalar(reader, T, L));\n                    }\n                    else\n                        target[localName] = this.scalar(reader, T, L);\n                    break;\n                case \"message\":\n                    if (repeated) {\n                        let arr = target[localName]; // safe to assume presence of array, oneof cannot contain repeated values\n                        let msg = field.T().internalBinaryRead(reader, reader.uint32(), options);\n                        arr.push(msg);\n                    }\n                    else\n                        target[localName] = field.T().internalBinaryRead(reader, reader.uint32(), options, target[localName]);\n                    break;\n                case \"map\":\n                    let [mapKey, mapVal] = this.mapEntry(field, reader, options);\n                    // safe to assume presence of map object, oneof cannot contain repeated values\n                    target[localName][mapKey] = mapVal;\n                    break;\n            }\n        }\n    }\n    /**\n     * Read a map field, expecting key field = 1, value field = 2\n     */\n    mapEntry(field, reader, options) {\n        let length = reader.uint32();\n        let end = reader.pos + length;\n        let key = undefined; // javascript only allows number or string for object properties\n        let val = undefined;\n        while (reader.pos < end) {\n            let [fieldNo, wireType] = reader.tag();\n            switch (fieldNo) {\n                case 1:\n                    if (field.K == ScalarType.BOOL)\n                        key = reader.bool().toString();\n                    else\n                        // long types are read as string, number types are okay as number\n                        key = this.scalar(reader, field.K, LongType.STRING);\n                    break;\n                case 2:\n                    switch (field.V.kind) {\n                        case \"scalar\":\n                            val = this.scalar(reader, field.V.T, field.V.L);\n                            break;\n                        case \"enum\":\n                            val = reader.int32();\n                            break;\n                        case \"message\":\n                            val = field.V.T().internalBinaryRead(reader, reader.uint32(), options);\n                            break;\n                    }\n                    break;\n                default:\n                    throw new Error(`Unknown field ${fieldNo} (wire type ${wireType}) in map entry for ${this.info.typeName}#${field.name}`);\n            }\n        }\n        if (key === undefined) {\n            let keyRaw = reflectionScalarDefault(field.K);\n            key = field.K == ScalarType.BOOL ? keyRaw.toString() : keyRaw;\n        }\n        if (val === undefined)\n            switch (field.V.kind) {\n                case \"scalar\":\n                    val = reflectionScalarDefault(field.V.T, field.V.L);\n                    break;\n                case \"enum\":\n                    val = 0;\n                    break;\n                case \"message\":\n                    val = field.V.T().create();\n                    break;\n            }\n        return [key, val];\n    }\n    scalar(reader, type, longType) {\n        switch (type) {\n            case ScalarType.INT32:\n                return reader.int32();\n            case ScalarType.STRING:\n                return reader.string();\n            case ScalarType.BOOL:\n                return reader.bool();\n            case ScalarType.DOUBLE:\n                return reader.double();\n            case ScalarType.FLOAT:\n                return reader.float();\n            case ScalarType.INT64:\n                return reflectionLongConvert(reader.int64(), longType);\n            case ScalarType.UINT64:\n                return reflectionLongConvert(reader.uint64(), longType);\n            case ScalarType.FIXED64:\n                return reflectionLongConvert(reader.fixed64(), longType);\n            case ScalarType.FIXED32:\n                return reader.fixed32();\n            case ScalarType.BYTES:\n                return reader.bytes();\n            case ScalarType.UINT32:\n                return reader.uint32();\n            case ScalarType.SFIXED32:\n                return reader.sfixed32();\n            case ScalarType.SFIXED64:\n                return reflectionLongConvert(reader.sfixed64(), longType);\n            case ScalarType.SINT32:\n                return reader.sint32();\n            case ScalarType.SINT64:\n                return reflectionLongConvert(reader.sint64(), longType);\n        }\n    }\n}\n", "import { UnknownFieldHandler, WireType } from \"./binary-format-contract\";\nimport { RepeatType, ScalarType } from \"./reflection-info\";\nimport { assert } from \"./assert\";\nimport { PbLong, PbULong } from \"./pb-long\";\n/**\n * Writes proto3 messages in binary format using reflection information.\n *\n * https://developers.google.com/protocol-buffers/docs/encoding\n */\nexport class ReflectionBinaryWriter {\n    constructor(info) {\n        this.info = info;\n    }\n    prepare() {\n        if (!this.fields) {\n            const fieldsInput = this.info.fields ? this.info.fields.concat() : [];\n            this.fields = fieldsInput.sort((a, b) => a.no - b.no);\n        }\n    }\n    /**\n     * Writes the message to binary format.\n     */\n    write(message, writer, options) {\n        this.prepare();\n        for (const field of this.fields) {\n            let value, // this will be our field value, whether it is member of a oneof or not\n            emitDefault, // whether we emit the default value (only true for oneof members)\n            repeated = field.repeat, localName = field.localName;\n            // handle oneof ADT\n            if (field.oneof) {\n                const group = message[field.oneof];\n                if (group.oneofKind !== localName)\n                    continue; // if field is not selected, skip\n                value = group[localName];\n                emitDefault = true;\n            }\n            else {\n                value = message[localName];\n                emitDefault = false;\n            }\n            // we have handled oneof above. we just have to honor `emitDefault`.\n            switch (field.kind) {\n                case \"scalar\":\n                case \"enum\":\n                    let T = field.kind == \"enum\" ? ScalarType.INT32 : field.T;\n                    if (repeated) {\n                        assert(Array.isArray(value));\n                        if (repeated == RepeatType.PACKED)\n                            this.packed(writer, T, field.no, value);\n                        else\n                            for (const item of value)\n                                this.scalar(writer, T, field.no, item, true);\n                    }\n                    else if (value === undefined)\n                        assert(field.opt);\n                    else\n                        this.scalar(writer, T, field.no, value, emitDefault || field.opt);\n                    break;\n                case \"message\":\n                    if (repeated) {\n                        assert(Array.isArray(value));\n                        for (const item of value)\n                            this.message(writer, options, field.T(), field.no, item);\n                    }\n                    else {\n                        this.message(writer, options, field.T(), field.no, value);\n                    }\n                    break;\n                case \"map\":\n                    assert(typeof value == 'object' && value !== null);\n                    for (const [key, val] of Object.entries(value))\n                        this.mapEntry(writer, options, field, key, val);\n                    break;\n            }\n        }\n        let u = options.writeUnknownFields;\n        if (u !== false)\n            (u === true ? UnknownFieldHandler.onWrite : u)(this.info.typeName, message, writer);\n    }\n    mapEntry(writer, options, field, key, value) {\n        writer.tag(field.no, WireType.LengthDelimited);\n        writer.fork();\n        // javascript only allows number or string for object properties\n        // we convert from our representation to the protobuf type\n        let keyValue = key;\n        switch (field.K) {\n            case ScalarType.INT32:\n            case ScalarType.FIXED32:\n            case ScalarType.UINT32:\n            case ScalarType.SFIXED32:\n            case ScalarType.SINT32:\n                keyValue = Number.parseInt(key);\n                break;\n            case ScalarType.BOOL:\n                assert(key == 'true' || key == 'false');\n                keyValue = key == 'true';\n                break;\n        }\n        // write key, expecting key field number = 1\n        this.scalar(writer, field.K, 1, keyValue, true);\n        // write value, expecting value field number = 2\n        switch (field.V.kind) {\n            case 'scalar':\n                this.scalar(writer, field.V.T, 2, value, true);\n                break;\n            case 'enum':\n                this.scalar(writer, ScalarType.INT32, 2, value, true);\n                break;\n            case 'message':\n                this.message(writer, options, field.V.T(), 2, value);\n                break;\n        }\n        writer.join();\n    }\n    message(writer, options, handler, fieldNo, value) {\n        if (value === undefined)\n            return;\n        handler.internalBinaryWrite(value, writer.tag(fieldNo, WireType.LengthDelimited).fork(), options);\n        writer.join();\n    }\n    /**\n     * Write a single scalar value.\n     */\n    scalar(writer, type, fieldNo, value, emitDefault) {\n        let [wireType, method, isDefault] = this.scalarInfo(type, value);\n        if (!isDefault || emitDefault) {\n            writer.tag(fieldNo, wireType);\n            writer[method](value);\n        }\n    }\n    /**\n     * Write an array of scalar values in packed format.\n     */\n    packed(writer, type, fieldNo, value) {\n        if (!value.length)\n            return;\n        assert(type !== ScalarType.BYTES && type !== ScalarType.STRING);\n        // write tag\n        writer.tag(fieldNo, WireType.LengthDelimited);\n        // begin length-delimited\n        writer.fork();\n        // write values without tags\n        let [, method,] = this.scalarInfo(type);\n        for (let i = 0; i < value.length; i++)\n            writer[method](value[i]);\n        // end length delimited\n        writer.join();\n    }\n    /**\n     * Get information for writing a scalar value.\n     *\n     * Returns tuple:\n     * [0]: appropriate WireType\n     * [1]: name of the appropriate method of IBinaryWriter\n     * [2]: whether the given value is a default value\n     *\n     * If argument `value` is omitted, [2] is always false.\n     */\n    scalarInfo(type, value) {\n        let t = WireType.Varint;\n        let m;\n        let i = value === undefined;\n        let d = value === 0;\n        switch (type) {\n            case ScalarType.INT32:\n                m = \"int32\";\n                break;\n            case ScalarType.STRING:\n                d = i || !value.length;\n                t = WireType.LengthDelimited;\n                m = \"string\";\n                break;\n            case ScalarType.BOOL:\n                d = value === false;\n                m = \"bool\";\n                break;\n            case ScalarType.UINT32:\n                m = \"uint32\";\n                break;\n            case ScalarType.DOUBLE:\n                t = WireType.Bit64;\n                m = \"double\";\n                break;\n            case ScalarType.FLOAT:\n                t = WireType.Bit32;\n                m = \"float\";\n                break;\n            case ScalarType.INT64:\n                d = i || PbLong.from(value).isZero();\n                m = \"int64\";\n                break;\n            case ScalarType.UINT64:\n                d = i || PbULong.from(value).isZero();\n                m = \"uint64\";\n                break;\n            case ScalarType.FIXED64:\n                d = i || PbULong.from(value).isZero();\n                t = WireType.Bit64;\n                m = \"fixed64\";\n                break;\n            case ScalarType.BYTES:\n                d = i || !value.byteLength;\n                t = WireType.LengthDelimited;\n                m = \"bytes\";\n                break;\n            case ScalarType.FIXED32:\n                t = WireType.Bit32;\n                m = \"fixed32\";\n                break;\n            case ScalarType.SFIXED32:\n                t = WireType.Bit32;\n                m = \"sfixed32\";\n                break;\n            case ScalarType.SFIXED64:\n                d = i || PbLong.from(value).isZero();\n                t = WireType.Bit64;\n                m = \"sfixed64\";\n                break;\n            case ScalarType.SINT32:\n                m = \"sint32\";\n                break;\n            case ScalarType.SINT64:\n                d = i || PbLong.from(value).isZero();\n                m = \"sint64\";\n                break;\n        }\n        return [t, m, i || d];\n    }\n}\n", "import { reflectionScalarDefault } from \"./reflection-scalar-default\";\nimport { MESSAGE_TYPE } from './message-type-contract';\n/**\n * Creates an instance of the generic message, using the field\n * information.\n */\nexport function reflectionCreate(type) {\n    /**\n     * This ternary can be removed in the next major version.\n     * The `Object.create()` code path utilizes a new `messagePrototype`\n     * property on the `IMessageType` which has this same `MESSAGE_TYPE`\n     * non-enumerable property on it. Doing it this way means that we only\n     * pay the cost of `Object.defineProperty()` once per `IMessageType`\n     * class of once per \"instance\". The falsy code path is only provided\n     * for backwards compatibility in cases where the runtime library is\n     * updated without also updating the generated code.\n     */\n    const msg = type.messagePrototype\n        ? Object.create(type.messagePrototype)\n        : Object.defineProperty({}, MESSAGE_TYPE, { value: type });\n    for (let field of type.fields) {\n        let name = field.localName;\n        if (field.opt)\n            continue;\n        if (field.oneof)\n            msg[field.oneof] = { oneofKind: undefined };\n        else if (field.repeat)\n            msg[name] = [];\n        else\n            switch (field.kind) {\n                case \"scalar\":\n                    msg[name] = reflectionScalarDefault(field.T, field.L);\n                    break;\n                case \"enum\":\n                    // we require 0 to be default value for all enums\n                    msg[name] = 0;\n                    break;\n                case \"map\":\n                    msg[name] = {};\n                    break;\n            }\n    }\n    return msg;\n}\n", "/**\n * Copy partial data into the target message.\n *\n * If a singular scalar or enum field is present in the source, it\n * replaces the field in the target.\n *\n * If a singular message field is present in the source, it is merged\n * with the target field by calling mergePartial() of the responsible\n * message type.\n *\n * If a repeated field is present in the source, its values replace\n * all values in the target array, removing extraneous values.\n * Repeated message fields are copied, not merged.\n *\n * If a map field is present in the source, entries are added to the\n * target map, replacing entries with the same key. Entries that only\n * exist in the target remain. Entries with message values are copied,\n * not merged.\n *\n * Note that this function differs from protobuf merge semantics,\n * which appends repeated fields.\n */\nexport function reflectionMergePartial(info, target, source) {\n    let fieldValue, // the field value we are working with\n    input = source, output; // where we want our field value to go\n    for (let field of info.fields) {\n        let name = field.localName;\n        if (field.oneof) {\n            const group = input[field.oneof]; // this is the oneof`s group in the source\n            if ((group === null || group === void 0 ? void 0 : group.oneofKind) == undefined) { // the user is free to omit\n                continue; // we skip this field, and all other members too\n            }\n            fieldValue = group[name]; // our value comes from the the oneof group of the source\n            output = target[field.oneof]; // and our output is the oneof group of the target\n            output.oneofKind = group.oneofKind; // always update discriminator\n            if (fieldValue == undefined) {\n                delete output[name]; // remove any existing value\n                continue; // skip further work on field\n            }\n        }\n        else {\n            fieldValue = input[name]; // we are using the source directly\n            output = target; // we want our field value to go directly into the target\n            if (fieldValue == undefined) {\n                continue; // skip further work on field, existing value is used as is\n            }\n        }\n        if (field.repeat)\n            output[name].length = fieldValue.length; // resize target array to match source array\n        // now we just work with `fieldValue` and `output` to merge the value\n        switch (field.kind) {\n            case \"scalar\":\n            case \"enum\":\n                if (field.repeat)\n                    for (let i = 0; i < fieldValue.length; i++)\n                        output[name][i] = fieldValue[i]; // not a reference type\n                else\n                    output[name] = fieldValue; // not a reference type\n                break;\n            case \"message\":\n                let T = field.T();\n                if (field.repeat)\n                    for (let i = 0; i < fieldValue.length; i++)\n                        output[name][i] = T.create(fieldValue[i]);\n                else if (output[name] === undefined)\n                    output[name] = T.create(fieldValue); // nothing to merge with\n                else\n                    T.mergePartial(output[name], fieldValue);\n                break;\n            case \"map\":\n                // Map and repeated fields are simply overwritten, not appended or merged\n                switch (field.V.kind) {\n                    case \"scalar\":\n                    case \"enum\":\n                        Object.assign(output[name], fieldValue); // elements are not reference types\n                        break;\n                    case \"message\":\n                        let T = field.V.T();\n                        for (let k of Object.keys(fieldValue))\n                            output[name][k] = T.create(fieldValue[k]);\n                        break;\n                }\n                break;\n        }\n    }\n}\n", "import { ScalarType } from \"./reflection-info\";\n/**\n * Determines whether two message of the same type have the same field values.\n * Checks for deep equality, traversing repeated fields, oneof groups, maps\n * and messages recursively.\n * Will also return true if both messages are `undefined`.\n */\nexport function reflectionEquals(info, a, b) {\n    if (a === b)\n        return true;\n    if (!a || !b)\n        return false;\n    for (let field of info.fields) {\n        let localName = field.localName;\n        let val_a = field.oneof ? a[field.oneof][localName] : a[localName];\n        let val_b = field.oneof ? b[field.oneof][localName] : b[localName];\n        switch (field.kind) {\n            case \"enum\":\n            case \"scalar\":\n                let t = field.kind == \"enum\" ? ScalarType.INT32 : field.T;\n                if (!(field.repeat\n                    ? repeatedPrimitiveEq(t, val_a, val_b)\n                    : primitiveEq(t, val_a, val_b)))\n                    return false;\n                break;\n            case \"map\":\n                if (!(field.V.kind == \"message\"\n                    ? repeatedMsgEq(field.V.T(), objectValues(val_a), objectValues(val_b))\n                    : repeatedPrimitiveEq(field.V.kind == \"enum\" ? ScalarType.INT32 : field.V.T, objectValues(val_a), objectValues(val_b))))\n                    return false;\n                break;\n            case \"message\":\n                let T = field.T();\n                if (!(field.repeat\n                    ? repeatedMsgEq(T, val_a, val_b)\n                    : T.equals(val_a, val_b)))\n                    return false;\n                break;\n        }\n    }\n    return true;\n}\nconst objectValues = Object.values;\nfunction primitiveEq(type, a, b) {\n    if (a === b)\n        return true;\n    if (type !== ScalarType.BYTES)\n        return false;\n    let ba = a;\n    let bb = b;\n    if (ba.length !== bb.length)\n        return false;\n    for (let i = 0; i < ba.length; i++)\n        if (ba[i] != bb[i])\n            return false;\n    return true;\n}\nfunction repeatedPrimitiveEq(type, a, b) {\n    if (a.length !== b.length)\n        return false;\n    for (let i = 0; i < a.length; i++)\n        if (!primitiveEq(type, a[i], b[i]))\n            return false;\n    return true;\n}\nfunction repeatedMsgEq(type, a, b) {\n    if (a.length !== b.length)\n        return false;\n    for (let i = 0; i < a.length; i++)\n        if (!type.equals(a[i], b[i]))\n            return false;\n    return true;\n}\n", "import { MESSAGE_TYPE } from \"./message-type-contract\";\nimport { normalizeFieldInfo } from \"./reflection-info\";\nimport { ReflectionTypeCheck } from \"./reflection-type-check\";\nimport { ReflectionJsonReader } from \"./reflection-json-reader\";\nimport { ReflectionJsonWriter } from \"./reflection-json-writer\";\nimport { ReflectionBinaryReader } from \"./reflection-binary-reader\";\nimport { ReflectionBinaryWriter } from \"./reflection-binary-writer\";\nimport { reflectionCreate } from \"./reflection-create\";\nimport { reflectionMergePartial } from \"./reflection-merge-partial\";\nimport { typeofJsonValue } from \"./json-typings\";\nimport { jsonReadOptions, jsonWriteOptions, } from \"./json-format-contract\";\nimport { reflectionEquals } from \"./reflection-equals\";\nimport { binaryWriteOptions } from \"./binary-writer\";\nimport { binaryReadOptions } from \"./binary-reader\";\nconst baseDescriptors = Object.getOwnPropertyDescriptors(Object.getPrototypeOf({}));\nconst messageTypeDescriptor = baseDescriptors[MESSAGE_TYPE] = {};\n/**\n * This standard message type provides reflection-based\n * operations to work with a message.\n */\nexport class MessageType {\n    constructor(name, fields, options) {\n        this.defaultCheckDepth = 16;\n        this.typeName = name;\n        this.fields = fields.map(normalizeFieldInfo);\n        this.options = options !== null && options !== void 0 ? options : {};\n        messageTypeDescriptor.value = this;\n        this.messagePrototype = Object.create(null, baseDescriptors);\n        this.refTypeCheck = new ReflectionTypeCheck(this);\n        this.refJsonReader = new ReflectionJsonReader(this);\n        this.refJsonWriter = new ReflectionJsonWriter(this);\n        this.refBinReader = new ReflectionBinaryReader(this);\n        this.refBinWriter = new ReflectionBinaryWriter(this);\n    }\n    create(value) {\n        let message = reflectionCreate(this);\n        if (value !== undefined) {\n            reflectionMergePartial(this, message, value);\n        }\n        return message;\n    }\n    /**\n     * Clone the message.\n     *\n     * Unknown fields are discarded.\n     */\n    clone(message) {\n        let copy = this.create();\n        reflectionMergePartial(this, copy, message);\n        return copy;\n    }\n    /**\n     * Determines whether two message of the same type have the same field values.\n     * Checks for deep equality, traversing repeated fields, oneof groups, maps\n     * and messages recursively.\n     * Will also return true if both messages are `undefined`.\n     */\n    equals(a, b) {\n        return reflectionEquals(this, a, b);\n    }\n    /**\n     * Is the given value assignable to our message type\n     * and contains no [excess properties](https://www.typescriptlang.org/docs/handbook/interfaces.html#excess-property-checks)?\n     */\n    is(arg, depth = this.defaultCheckDepth) {\n        return this.refTypeCheck.is(arg, depth, false);\n    }\n    /**\n     * Is the given value assignable to our message type,\n     * regardless of [excess properties](https://www.typescriptlang.org/docs/handbook/interfaces.html#excess-property-checks)?\n     */\n    isAssignable(arg, depth = this.defaultCheckDepth) {\n        return this.refTypeCheck.is(arg, depth, true);\n    }\n    /**\n     * Copy partial data into the target message.\n     */\n    mergePartial(target, source) {\n        reflectionMergePartial(this, target, source);\n    }\n    /**\n     * Create a new message from binary format.\n     */\n    fromBinary(data, options) {\n        let opt = binaryReadOptions(options);\n        return this.internalBinaryRead(opt.readerFactory(data), data.byteLength, opt);\n    }\n    /**\n     * Read a new message from a JSON value.\n     */\n    fromJson(json, options) {\n        return this.internalJsonRead(json, jsonReadOptions(options));\n    }\n    /**\n     * Read a new message from a JSON string.\n     * This is equivalent to `T.fromJson(JSON.parse(json))`.\n     */\n    fromJsonString(json, options) {\n        let value = JSON.parse(json);\n        return this.fromJson(value, options);\n    }\n    /**\n     * Write the message to canonical JSON value.\n     */\n    toJson(message, options) {\n        return this.internalJsonWrite(message, jsonWriteOptions(options));\n    }\n    /**\n     * Convert the message to canonical JSON string.\n     * This is equivalent to `JSON.stringify(T.toJson(t))`\n     */\n    toJsonString(message, options) {\n        var _a;\n        let value = this.toJson(message, options);\n        return JSON.stringify(value, null, (_a = options === null || options === void 0 ? void 0 : options.prettySpaces) !== null && _a !== void 0 ? _a : 0);\n    }\n    /**\n     * Write the message to binary format.\n     */\n    toBinary(message, options) {\n        let opt = binaryWriteOptions(options);\n        return this.internalBinaryWrite(message, opt.writerFactory(), opt).finish();\n    }\n    /**\n     * This is an internal method. If you just want to read a message from\n     * JSON, use `fromJson()` or `fromJsonString()`.\n     *\n     * Reads JSON value and merges the fields into the target\n     * according to protobuf rules. If the target is omitted,\n     * a new instance is created first.\n     */\n    internalJsonRead(json, options, target) {\n        if (json !== null && typeof json == \"object\" && !Array.isArray(json)) {\n            let message = target !== null && target !== void 0 ? target : this.create();\n            this.refJsonReader.read(json, message, options);\n            return message;\n        }\n        throw new Error(`Unable to parse message ${this.typeName} from JSON ${typeofJsonValue(json)}.`);\n    }\n    /**\n     * This is an internal method. If you just want to write a message\n     * to JSON, use `toJson()` or `toJsonString().\n     *\n     * Writes JSON value and returns it.\n     */\n    internalJsonWrite(message, options) {\n        return this.refJsonWriter.write(message, options);\n    }\n    /**\n     * This is an internal method. If you just want to write a message\n     * in binary format, use `toBinary()`.\n     *\n     * Serializes the message in binary format and appends it to the given\n     * writer. Returns passed writer.\n     */\n    internalBinaryWrite(message, writer, options) {\n        this.refBinWriter.write(message, writer, options);\n        return writer;\n    }\n    /**\n     * This is an internal method. If you just want to read a message from\n     * binary data, use `fromBinary()`.\n     *\n     * Reads data from binary format and merges the fields into\n     * the target according to protobuf rules. If the target is\n     * omitted, a new instance is created first.\n     */\n    internalBinaryRead(reader, length, options, target) {\n        let message = target !== null && target !== void 0 ? target : this.create();\n        this.refBinReader.read(reader, message, options, length);\n        return message;\n    }\n}\n", "import { lowerCamelCase } from \"@protobuf-ts/runtime\";\n/**\n * Turns PartialMethodInfo into MethodInfo.\n */\nexport function normalizeMethodInfo(method, service) {\n    var _a, _b, _c;\n    let m = method;\n    m.service = service;\n    m.localName = (_a = m.localName) !== null && _a !== void 0 ? _a : lowerCamelCase(m.name);\n    // noinspection PointlessBooleanExpressionJS\n    m.serverStreaming = !!m.serverStreaming;\n    // noinspection PointlessBooleanExpressionJS\n    m.clientStreaming = !!m.clientStreaming;\n    m.options = (_b = m.options) !== null && _b !== void 0 ? _b : {};\n    m.idempotency = (_c = m.idempotency) !== null && _c !== void 0 ? _c : undefined;\n    return m;\n}\n/**\n * Read custom method options from a generated service client.\n *\n * @deprecated use readMethodOption()\n */\nexport function readMethodOptions(service, methodName, extensionName, extensionType) {\n    var _a;\n    const options = (_a = service.methods.find((m, i) => m.localName === methodName || i === methodName)) === null || _a === void 0 ? void 0 : _a.options;\n    return options && options[extensionName] ? extensionType.fromJson(options[extensionName]) : undefined;\n}\nexport function readMethodOption(service, methodName, extensionName, extensionType) {\n    var _a;\n    const options = (_a = service.methods.find((m, i) => m.localName === methodName || i === methodName)) === null || _a === void 0 ? void 0 : _a.options;\n    if (!options) {\n        return undefined;\n    }\n    const optionVal = options[extensionName];\n    if (optionVal === undefined) {\n        return optionVal;\n    }\n    return extensionType ? extensionType.fromJson(optionVal) : optionVal;\n}\nexport function readServiceOption(service, extensionName, extensionType) {\n    const options = service.options;\n    if (!options) {\n        return undefined;\n    }\n    const optionVal = options[extensionName];\n    if (optionVal === undefined) {\n        return optionVal;\n    }\n    return extensionType ? extensionType.fromJson(optionVal) : optionVal;\n}\n", "import { normalizeMethodInfo } from \"./reflection-info\";\nexport class ServiceType {\n    constructor(typeName, methods, options) {\n        this.typeName = typeName;\n        this.methods = methods.map(i => normalizeMethodInfo(i, this));\n        this.options = options !== null && options !== void 0 ? options : {};\n    }\n}\n", "/**\n * An error that occurred while calling a RPC method.\n */\nexport class RpcError extends Error {\n    constructor(message, code = 'UNKNOWN', meta) {\n        super(message);\n        this.name = 'RpcError';\n        // see https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-2.html#example\n        Object.setPrototypeOf(this, new.target.prototype);\n        this.code = code;\n        this.meta = meta !== null && meta !== void 0 ? meta : {};\n    }\n    toString() {\n        const l = [this.name + ': ' + this.message];\n        if (this.code) {\n            l.push('');\n            l.push('Code: ' + this.code);\n        }\n        if (this.serviceName && this.methodName) {\n            l.push('Method: ' + this.serviceName + '/' + this.methodName);\n        }\n        let m = Object.entries(this.meta);\n        if (m.length) {\n            l.push('');\n            l.push('Meta:');\n            for (let [k, v] of m) {\n                l.push(`  ${k}: ${v}`);\n            }\n        }\n        return l.join('\\n');\n    }\n}\n", "import { mergeBinaryOptions, mergeJsonOptions } from \"@protobuf-ts/runtime\";\n/**\n * Merges custom RPC options with defaults. Returns a new instance and keeps\n * the \"defaults\" and the \"options\" unmodified.\n *\n * Merges `RpcMetadata` \"meta\", overwriting values from \"defaults\" with\n * values from \"options\". Does not append values to existing entries.\n *\n * Merges \"jsonOptions\", including \"jsonOptions.typeRegistry\", by creating\n * a new array that contains types from \"options.jsonOptions.typeRegistry\"\n * first, then types from \"defaults.jsonOptions.typeRegistry\".\n *\n * Merges \"binaryOptions\".\n *\n * Merges \"interceptors\" by creating a new array that contains interceptors\n * from \"defaults\" first, then interceptors from \"options\".\n *\n * Works with objects that extend `RpcOptions`, but only if the added\n * properties are of type Date, primitive like string, boolean, or Array\n * of primitives. If you have other property types, you have to merge them\n * yourself.\n */\nexport function mergeRpcOptions(defaults, options) {\n    if (!options)\n        return defaults;\n    let o = {};\n    copy(defaults, o);\n    copy(options, o);\n    for (let key of Object.keys(options)) {\n        let val = options[key];\n        switch (key) {\n            case \"jsonOptions\":\n                o.jsonOptions = mergeJsonOptions(defaults.jsonOptions, o.jsonOptions);\n                break;\n            case \"binaryOptions\":\n                o.binaryOptions = mergeBinaryOptions(defaults.binaryOptions, o.binaryOptions);\n                break;\n            case \"meta\":\n                o.meta = {};\n                copy(defaults.meta, o.meta);\n                copy(options.meta, o.meta);\n                break;\n            case \"interceptors\":\n                o.interceptors = defaults.interceptors ? defaults.interceptors.concat(val) : val.concat();\n                break;\n        }\n    }\n    return o;\n}\nfunction copy(a, into) {\n    if (!a)\n        return;\n    let c = into;\n    for (let [k, v] of Object.entries(a)) {\n        if (v instanceof Date)\n            c[k] = new Date(v.getTime());\n        else if (Array.isArray(v))\n            c[k] = v.concat();\n        else\n            c[k] = v;\n    }\n}\n", "export var DeferredState;\n(function (DeferredState) {\n    DeferredState[DeferredState[\"PENDING\"] = 0] = \"PENDING\";\n    DeferredState[DeferredState[\"REJECTED\"] = 1] = \"REJECTED\";\n    DeferredState[DeferredState[\"RESOLVED\"] = 2] = \"RESOLVED\";\n})(DeferredState || (DeferredState = {}));\n/**\n * A deferred promise. This is a \"controller\" for a promise, which lets you\n * pass a promise around and reject or resolve it from the outside.\n *\n * Warning: This class is to be used with care. Using it can make code very\n * difficult to read. It is intended for use in library code that exposes\n * promises, not for regular business logic.\n */\nexport class Deferred {\n    /**\n     * @param preventUnhandledRejectionWarning - prevents the warning\n     * \"Unhandled Promise rejection\" by adding a noop rejection handler.\n     * Working with calls returned from the runtime-rpc package in an\n     * async function usually means awaiting one call property after\n     * the other. This means that the \"status\" is not being awaited when\n     * an earlier await for the \"headers\" is rejected. This causes the\n     * \"unhandled promise reject\" warning. A more correct behaviour for\n     * calls might be to become aware whether at least one of the\n     * promises is handled and swallow the rejection warning for the\n     * others.\n     */\n    constructor(preventUnhandledRejectionWarning = true) {\n        this._state = DeferredState.PENDING;\n        this._promise = new Promise((resolve, reject) => {\n            this._resolve = resolve;\n            this._reject = reject;\n        });\n        if (preventUnhandledRejectionWarning) {\n            this._promise.catch(_ => { });\n        }\n    }\n    /**\n     * Get the current state of the promise.\n     */\n    get state() {\n        return this._state;\n    }\n    /**\n     * Get the deferred promise.\n     */\n    get promise() {\n        return this._promise;\n    }\n    /**\n     * Resolve the promise. Throws if the promise is already resolved or rejected.\n     */\n    resolve(value) {\n        if (this.state !== DeferredState.PENDING)\n            throw new Error(`cannot resolve ${DeferredState[this.state].toLowerCase()}`);\n        this._resolve(value);\n        this._state = DeferredState.RESOLVED;\n    }\n    /**\n     * Reject the promise. Throws if the promise is already resolved or rejected.\n     */\n    reject(reason) {\n        if (this.state !== DeferredState.PENDING)\n            throw new Error(`cannot reject ${DeferredState[this.state].toLowerCase()}`);\n        this._reject(reason);\n        this._state = DeferredState.REJECTED;\n    }\n    /**\n     * Resolve the promise. Ignore if not pending.\n     */\n    resolvePending(val) {\n        if (this._state === DeferredState.PENDING)\n            this.resolve(val);\n    }\n    /**\n     * Reject the promise. Ignore if not pending.\n     */\n    rejectPending(reason) {\n        if (this._state === DeferredState.PENDING)\n            this.reject(reason);\n    }\n}\n", "import { Deferred, DeferredState } from \"./deferred\";\nimport { assert } from \"@protobuf-ts/runtime\";\n/**\n * A `RpcOutputStream` that you control.\n */\nexport class RpcOutputStreamController {\n    constructor() {\n        this._lis = {\n            nxt: [],\n            msg: [],\n            err: [],\n            cmp: [],\n        };\n        this._closed = false;\n        // --- RpcOutputStream async iterator API\n        // iterator state.\n        // is undefined when no iterator has been acquired yet.\n        this._itState = { q: [] };\n    }\n    // --- RpcOutputStream callback API\n    onNext(callback) {\n        return this.addLis(callback, this._lis.nxt);\n    }\n    onMessage(callback) {\n        return this.addLis(callback, this._lis.msg);\n    }\n    onError(callback) {\n        return this.addLis(callback, this._lis.err);\n    }\n    onComplete(callback) {\n        return this.addLis(callback, this._lis.cmp);\n    }\n    addLis(callback, list) {\n        list.push(callback);\n        return () => {\n            let i = list.indexOf(callback);\n            if (i >= 0)\n                list.splice(i, 1);\n        };\n    }\n    // remove all listeners\n    clearLis() {\n        for (let l of Object.values(this._lis))\n            l.splice(0, l.length);\n    }\n    // --- Controller API\n    /**\n     * Is this stream already closed by a completion or error?\n     */\n    get closed() {\n        return this._closed !== false;\n    }\n    /**\n     * Emit message, close with error, or close successfully, but only one\n     * at a time.\n     * Can be used to wrap a stream by using the other stream's `onNext`.\n     */\n    notifyNext(message, error, complete) {\n        assert((message ? 1 : 0) + (error ? 1 : 0) + (complete ? 1 : 0) <= 1, 'only one emission at a time');\n        if (message)\n            this.notifyMessage(message);\n        if (error)\n            this.notifyError(error);\n        if (complete)\n            this.notifyComplete();\n    }\n    /**\n     * Emits a new message. Throws if stream is closed.\n     *\n     * Triggers onNext and onMessage callbacks.\n     */\n    notifyMessage(message) {\n        assert(!this.closed, 'stream is closed');\n        this.pushIt({ value: message, done: false });\n        this._lis.msg.forEach(l => l(message));\n        this._lis.nxt.forEach(l => l(message, undefined, false));\n    }\n    /**\n     * Closes the stream with an error. Throws if stream is closed.\n     *\n     * Triggers onNext and onError callbacks.\n     */\n    notifyError(error) {\n        assert(!this.closed, 'stream is closed');\n        this._closed = error;\n        this.pushIt(error);\n        this._lis.err.forEach(l => l(error));\n        this._lis.nxt.forEach(l => l(undefined, error, false));\n        this.clearLis();\n    }\n    /**\n     * Closes the stream successfully. Throws if stream is closed.\n     *\n     * Triggers onNext and onComplete callbacks.\n     */\n    notifyComplete() {\n        assert(!this.closed, 'stream is closed');\n        this._closed = true;\n        this.pushIt({ value: null, done: true });\n        this._lis.cmp.forEach(l => l());\n        this._lis.nxt.forEach(l => l(undefined, undefined, true));\n        this.clearLis();\n    }\n    /**\n     * Creates an async iterator (that can be used with `for await {...}`)\n     * to consume the stream.\n     *\n     * Some things to note:\n     * - If an error occurs, the `for await` will throw it.\n     * - If an error occurred before the `for await` was started, `for await`\n     *   will re-throw it.\n     * - If the stream is already complete, the `for await` will be empty.\n     * - If your `for await` consumes slower than the stream produces,\n     *   for example because you are relaying messages in a slow operation,\n     *   messages are queued.\n     */\n    [Symbol.asyncIterator]() {\n        // if we are closed, we are definitely not receiving any more messages.\n        // but we can't let the iterator get stuck. we want to either:\n        // a) finish the new iterator immediately, because we are completed\n        // b) reject the new iterator, because we errored\n        if (this._closed === true)\n            this.pushIt({ value: null, done: true });\n        else if (this._closed !== false)\n            this.pushIt(this._closed);\n        // the async iterator\n        return {\n            next: () => {\n                let state = this._itState;\n                assert(state, \"bad state\"); // if we don't have a state here, code is broken\n                // there should be no pending result.\n                // did the consumer call next() before we resolved our previous result promise?\n                assert(!state.p, \"iterator contract broken\");\n                // did we produce faster than the iterator consumed?\n                // return the oldest result from the queue.\n                let first = state.q.shift();\n                if (first)\n                    return (\"value\" in first) ? Promise.resolve(first) : Promise.reject(first);\n                // we have no result ATM, but we promise one.\n                // as soon as we have a result, we must resolve promise.\n                state.p = new Deferred();\n                return state.p.promise;\n            },\n        };\n    }\n    // \"push\" a new iterator result.\n    // this either resolves a pending promise, or enqueues the result.\n    pushIt(result) {\n        let state = this._itState;\n        // is the consumer waiting for us?\n        if (state.p) {\n            // yes, consumer is waiting for this promise.\n            const p = state.p;\n            assert(p.state == DeferredState.PENDING, \"iterator contract broken\");\n            // resolve the promise\n            (\"value\" in result) ? p.resolve(result) : p.reject(result);\n            // must cleanup, otherwise iterator.next() would pick it up again.\n            delete state.p;\n        }\n        else {\n            // we are producing faster than the iterator consumes.\n            // push result onto queue.\n            state.q.push(result);\n        }\n    }\n}\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/**\n * A unary RPC call. Unary means there is exactly one input message and\n * exactly one output message unless an error occurred.\n */\nexport class UnaryCall {\n    constructor(method, requestHeaders, request, headers, response, status, trailers) {\n        this.method = method;\n        this.requestHeaders = requestHeaders;\n        this.request = request;\n        this.headers = headers;\n        this.response = response;\n        this.status = status;\n        this.trailers = trailers;\n    }\n    /**\n     * If you are only interested in the final outcome of this call,\n     * you can await it to receive a `FinishedUnaryCall`.\n     */\n    then(onfulfilled, onrejected) {\n        return this.promiseFinished().then(value => onfulfilled ? Promise.resolve(onfulfilled(value)) : value, reason => onrejected ? Promise.resolve(onrejected(reason)) : Promise.reject(reason));\n    }\n    promiseFinished() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let [headers, response, status, trailers] = yield Promise.all([this.headers, this.response, this.status, this.trailers]);\n            return {\n                method: this.method,\n                requestHeaders: this.requestHeaders,\n                request: this.request,\n                headers,\n                response,\n                status,\n                trailers\n            };\n        });\n    }\n}\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/**\n * A server streaming RPC call. The client provides exactly one input message\n * but the server may respond with 0, 1, or more messages.\n */\nexport class ServerStreamingCall {\n    constructor(method, requestHeaders, request, headers, response, status, trailers) {\n        this.method = method;\n        this.requestHeaders = requestHeaders;\n        this.request = request;\n        this.headers = headers;\n        this.responses = response;\n        this.status = status;\n        this.trailers = trailers;\n    }\n    /**\n     * Instead of awaiting the response status and trailers, you can\n     * just as well await this call itself to receive the server outcome.\n     * You should first setup some listeners to the `request` to\n     * see the actual messages the server replied with.\n     */\n    then(onfulfilled, onrejected) {\n        return this.promiseFinished().then(value => onfulfilled ? Promise.resolve(onfulfilled(value)) : value, reason => onrejected ? Promise.resolve(onrejected(reason)) : Promise.reject(reason));\n    }\n    promiseFinished() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let [headers, status, trailers] = yield Promise.all([this.headers, this.status, this.trailers]);\n            return {\n                method: this.method,\n                requestHeaders: this.requestHeaders,\n                request: this.request,\n                headers,\n                status,\n                trailers,\n            };\n        });\n    }\n}\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/**\n * A client streaming RPC call. This means that the clients sends 0, 1, or\n * more messages to the server, and the server replies with exactly one\n * message.\n */\nexport class ClientStreamingCall {\n    constructor(method, requestHeaders, request, headers, response, status, trailers) {\n        this.method = method;\n        this.requestHeaders = requestHeaders;\n        this.requests = request;\n        this.headers = headers;\n        this.response = response;\n        this.status = status;\n        this.trailers = trailers;\n    }\n    /**\n     * Instead of awaiting the response status and trailers, you can\n     * just as well await this call itself to receive the server outcome.\n     * Note that it may still be valid to send more request messages.\n     */\n    then(onfulfilled, onrejected) {\n        return this.promiseFinished().then(value => onfulfilled ? Promise.resolve(onfulfilled(value)) : value, reason => onrejected ? Promise.resolve(onrejected(reason)) : Promise.reject(reason));\n    }\n    promiseFinished() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let [headers, response, status, trailers] = yield Promise.all([this.headers, this.response, this.status, this.trailers]);\n            return {\n                method: this.method,\n                requestHeaders: this.requestHeaders,\n                headers,\n                response,\n                status,\n                trailers\n            };\n        });\n    }\n}\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/**\n * A duplex streaming RPC call. This means that the clients sends an\n * arbitrary amount of messages to the server, while at the same time,\n * the server sends an arbitrary amount of messages to the client.\n */\nexport class DuplexStreamingCall {\n    constructor(method, requestHeaders, request, headers, response, status, trailers) {\n        this.method = method;\n        this.requestHeaders = requestHeaders;\n        this.requests = request;\n        this.headers = headers;\n        this.responses = response;\n        this.status = status;\n        this.trailers = trailers;\n    }\n    /**\n     * Instead of awaiting the response status and trailers, you can\n     * just as well await this call itself to receive the server outcome.\n     * Note that it may still be valid to send more request messages.\n     */\n    then(onfulfilled, onrejected) {\n        return this.promiseFinished().then(value => onfulfilled ? Promise.resolve(onfulfilled(value)) : value, reason => onrejected ? Promise.resolve(onrejected(reason)) : Promise.reject(reason));\n    }\n    promiseFinished() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let [headers, status, trailers] = yield Promise.all([this.headers, this.status, this.trailers]);\n            return {\n                method: this.method,\n                requestHeaders: this.requestHeaders,\n                headers,\n                status,\n                trailers,\n            };\n        });\n    }\n}\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { RpcError } from \"./rpc-error\";\nimport { assert } from \"@protobuf-ts/runtime\";\nimport { RpcOutputStreamController } from \"./rpc-output-stream\";\nimport { mergeRpcOptions } from \"./rpc-options\";\nimport { UnaryCall } from \"./unary-call\";\nimport { ServerStreamingCall } from \"./server-streaming-call\";\nimport { ClientStreamingCall } from \"./client-streaming-call\";\nimport { DuplexStreamingCall } from \"./duplex-streaming-call\";\n/**\n * Transport for testing.\n */\nexport class TestTransport {\n    /**\n     * Initialize with mock data. Omitted fields have default value.\n     */\n    constructor(data) {\n        /**\n         * Suppress warning / error about uncaught rejections of\n         * \"status\" and \"trailers\".\n         */\n        this.suppressUncaughtRejections = true;\n        this.headerDelay = 10;\n        this.responseDelay = 50;\n        this.betweenResponseDelay = 10;\n        this.afterResponseDelay = 10;\n        this.data = data !== null && data !== void 0 ? data : {};\n    }\n    /**\n     * Sent message(s) during the last operation.\n     */\n    get sentMessages() {\n        if (this.lastInput instanceof TestInputStream) {\n            return this.lastInput.sent;\n        }\n        else if (typeof this.lastInput == \"object\") {\n            return [this.lastInput.single];\n        }\n        return [];\n    }\n    /**\n     * Sending message(s) completed?\n     */\n    get sendComplete() {\n        if (this.lastInput instanceof TestInputStream) {\n            return this.lastInput.completed;\n        }\n        else if (typeof this.lastInput == \"object\") {\n            return true;\n        }\n        return false;\n    }\n    // Creates a promise for response headers from the mock data.\n    promiseHeaders() {\n        var _a;\n        const headers = (_a = this.data.headers) !== null && _a !== void 0 ? _a : TestTransport.defaultHeaders;\n        return headers instanceof RpcError\n            ? Promise.reject(headers)\n            : Promise.resolve(headers);\n    }\n    // Creates a promise for a single, valid, message from the mock data.\n    promiseSingleResponse(method) {\n        if (this.data.response instanceof RpcError) {\n            return Promise.reject(this.data.response);\n        }\n        let r;\n        if (Array.isArray(this.data.response)) {\n            assert(this.data.response.length > 0);\n            r = this.data.response[0];\n        }\n        else if (this.data.response !== undefined) {\n            r = this.data.response;\n        }\n        else {\n            r = method.O.create();\n        }\n        assert(method.O.is(r));\n        return Promise.resolve(r);\n    }\n    /**\n     * Pushes response messages from the mock data to the output stream.\n     * If an error response, status or trailers are mocked, the stream is\n     * closed with the respective error.\n     * Otherwise, stream is completed successfully.\n     *\n     * The returned promise resolves when the stream is closed. It should\n     * not reject. If it does, code is broken.\n     */\n    streamResponses(method, stream, abort) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // normalize \"data.response\" into an array of valid output messages\n            const messages = [];\n            if (this.data.response === undefined) {\n                messages.push(method.O.create());\n            }\n            else if (Array.isArray(this.data.response)) {\n                for (let msg of this.data.response) {\n                    assert(method.O.is(msg));\n                    messages.push(msg);\n                }\n            }\n            else if (!(this.data.response instanceof RpcError)) {\n                assert(method.O.is(this.data.response));\n                messages.push(this.data.response);\n            }\n            // start the stream with an initial delay.\n            // if the request is cancelled, notify() error and exit.\n            try {\n                yield delay(this.responseDelay, abort)(undefined);\n            }\n            catch (error) {\n                stream.notifyError(error);\n                return;\n            }\n            // if error response was mocked, notify() error (stream is now closed with error) and exit.\n            if (this.data.response instanceof RpcError) {\n                stream.notifyError(this.data.response);\n                return;\n            }\n            // regular response messages were mocked. notify() them.\n            for (let msg of messages) {\n                stream.notifyMessage(msg);\n                // add a short delay between responses\n                // if the request is cancelled, notify() error and exit.\n                try {\n                    yield delay(this.betweenResponseDelay, abort)(undefined);\n                }\n                catch (error) {\n                    stream.notifyError(error);\n                    return;\n                }\n            }\n            // error status was mocked, notify() error (stream is now closed with error) and exit.\n            if (this.data.status instanceof RpcError) {\n                stream.notifyError(this.data.status);\n                return;\n            }\n            // error trailers were mocked, notify() error (stream is now closed with error) and exit.\n            if (this.data.trailers instanceof RpcError) {\n                stream.notifyError(this.data.trailers);\n                return;\n            }\n            // stream completed successfully\n            stream.notifyComplete();\n        });\n    }\n    // Creates a promise for response status from the mock data.\n    promiseStatus() {\n        var _a;\n        const status = (_a = this.data.status) !== null && _a !== void 0 ? _a : TestTransport.defaultStatus;\n        return status instanceof RpcError\n            ? Promise.reject(status)\n            : Promise.resolve(status);\n    }\n    // Creates a promise for response trailers from the mock data.\n    promiseTrailers() {\n        var _a;\n        const trailers = (_a = this.data.trailers) !== null && _a !== void 0 ? _a : TestTransport.defaultTrailers;\n        return trailers instanceof RpcError\n            ? Promise.reject(trailers)\n            : Promise.resolve(trailers);\n    }\n    maybeSuppressUncaught(...promise) {\n        if (this.suppressUncaughtRejections) {\n            for (let p of promise) {\n                p.catch(() => {\n                });\n            }\n        }\n    }\n    mergeOptions(options) {\n        return mergeRpcOptions({}, options);\n    }\n    unary(method, input, options) {\n        var _a;\n        const requestHeaders = (_a = options.meta) !== null && _a !== void 0 ? _a : {}, headersPromise = this.promiseHeaders()\n            .then(delay(this.headerDelay, options.abort)), responsePromise = headersPromise\n            .catch(_ => {\n        })\n            .then(delay(this.responseDelay, options.abort))\n            .then(_ => this.promiseSingleResponse(method)), statusPromise = responsePromise\n            .catch(_ => {\n        })\n            .then(delay(this.afterResponseDelay, options.abort))\n            .then(_ => this.promiseStatus()), trailersPromise = responsePromise\n            .catch(_ => {\n        })\n            .then(delay(this.afterResponseDelay, options.abort))\n            .then(_ => this.promiseTrailers());\n        this.maybeSuppressUncaught(statusPromise, trailersPromise);\n        this.lastInput = { single: input };\n        return new UnaryCall(method, requestHeaders, input, headersPromise, responsePromise, statusPromise, trailersPromise);\n    }\n    serverStreaming(method, input, options) {\n        var _a;\n        const requestHeaders = (_a = options.meta) !== null && _a !== void 0 ? _a : {}, headersPromise = this.promiseHeaders()\n            .then(delay(this.headerDelay, options.abort)), outputStream = new RpcOutputStreamController(), responseStreamClosedPromise = headersPromise\n            .then(delay(this.responseDelay, options.abort))\n            .catch(() => {\n        })\n            .then(() => this.streamResponses(method, outputStream, options.abort))\n            .then(delay(this.afterResponseDelay, options.abort)), statusPromise = responseStreamClosedPromise\n            .then(() => this.promiseStatus()), trailersPromise = responseStreamClosedPromise\n            .then(() => this.promiseTrailers());\n        this.maybeSuppressUncaught(statusPromise, trailersPromise);\n        this.lastInput = { single: input };\n        return new ServerStreamingCall(method, requestHeaders, input, headersPromise, outputStream, statusPromise, trailersPromise);\n    }\n    clientStreaming(method, options) {\n        var _a;\n        const requestHeaders = (_a = options.meta) !== null && _a !== void 0 ? _a : {}, headersPromise = this.promiseHeaders()\n            .then(delay(this.headerDelay, options.abort)), responsePromise = headersPromise\n            .catch(_ => {\n        })\n            .then(delay(this.responseDelay, options.abort))\n            .then(_ => this.promiseSingleResponse(method)), statusPromise = responsePromise\n            .catch(_ => {\n        })\n            .then(delay(this.afterResponseDelay, options.abort))\n            .then(_ => this.promiseStatus()), trailersPromise = responsePromise\n            .catch(_ => {\n        })\n            .then(delay(this.afterResponseDelay, options.abort))\n            .then(_ => this.promiseTrailers());\n        this.maybeSuppressUncaught(statusPromise, trailersPromise);\n        this.lastInput = new TestInputStream(this.data, options.abort);\n        return new ClientStreamingCall(method, requestHeaders, this.lastInput, headersPromise, responsePromise, statusPromise, trailersPromise);\n    }\n    duplex(method, options) {\n        var _a;\n        const requestHeaders = (_a = options.meta) !== null && _a !== void 0 ? _a : {}, headersPromise = this.promiseHeaders()\n            .then(delay(this.headerDelay, options.abort)), outputStream = new RpcOutputStreamController(), responseStreamClosedPromise = headersPromise\n            .then(delay(this.responseDelay, options.abort))\n            .catch(() => {\n        })\n            .then(() => this.streamResponses(method, outputStream, options.abort))\n            .then(delay(this.afterResponseDelay, options.abort)), statusPromise = responseStreamClosedPromise\n            .then(() => this.promiseStatus()), trailersPromise = responseStreamClosedPromise\n            .then(() => this.promiseTrailers());\n        this.maybeSuppressUncaught(statusPromise, trailersPromise);\n        this.lastInput = new TestInputStream(this.data, options.abort);\n        return new DuplexStreamingCall(method, requestHeaders, this.lastInput, headersPromise, outputStream, statusPromise, trailersPromise);\n    }\n}\nTestTransport.defaultHeaders = {\n    responseHeader: \"test\"\n};\nTestTransport.defaultStatus = {\n    code: \"OK\", detail: \"all good\"\n};\nTestTransport.defaultTrailers = {\n    responseTrailer: \"test\"\n};\nfunction delay(ms, abort) {\n    return (v) => new Promise((resolve, reject) => {\n        if (abort === null || abort === void 0 ? void 0 : abort.aborted) {\n            reject(new RpcError(\"user cancel\", \"CANCELLED\"));\n        }\n        else {\n            const id = setTimeout(() => resolve(v), ms);\n            if (abort) {\n                abort.addEventListener(\"abort\", ev => {\n                    clearTimeout(id);\n                    reject(new RpcError(\"user cancel\", \"CANCELLED\"));\n                });\n            }\n        }\n    });\n}\nclass TestInputStream {\n    constructor(data, abort) {\n        this._completed = false;\n        this._sent = [];\n        this.data = data;\n        this.abort = abort;\n    }\n    get sent() {\n        return this._sent;\n    }\n    get completed() {\n        return this._completed;\n    }\n    send(message) {\n        if (this.data.inputMessage instanceof RpcError) {\n            return Promise.reject(this.data.inputMessage);\n        }\n        const delayMs = this.data.inputMessage === undefined\n            ? 10\n            : this.data.inputMessage;\n        return Promise.resolve(undefined)\n            .then(() => {\n            this._sent.push(message);\n        })\n            .then(delay(delayMs, this.abort));\n    }\n    complete() {\n        if (this.data.inputComplete instanceof RpcError) {\n            return Promise.reject(this.data.inputComplete);\n        }\n        const delayMs = this.data.inputComplete === undefined\n            ? 10\n            : this.data.inputComplete;\n        return Promise.resolve(undefined)\n            .then(() => {\n            this._completed = true;\n        })\n            .then(delay(delayMs, this.abort));\n    }\n}\n", "import { assertNever } from \"@protobuf-ts/runtime\";\n/**\n * Creates a \"stack\" of of all interceptors specified in the given `RpcOptions`.\n * Used by generated client implementations.\n * @internal\n */\nexport function stackIntercept(kind, transport, method, options, input) {\n    var _a, _b, _c, _d;\n    if (kind == \"unary\") {\n        let tail = (mtd, inp, opt) => transport.unary(mtd, inp, opt);\n        for (const curr of ((_a = options.interceptors) !== null && _a !== void 0 ? _a : []).filter(i => i.interceptUnary).reverse()) {\n            const next = tail;\n            tail = (mtd, inp, opt) => curr.interceptUnary(next, mtd, inp, opt);\n        }\n        return tail(method, input, options);\n    }\n    if (kind == \"serverStreaming\") {\n        let tail = (mtd, inp, opt) => transport.serverStreaming(mtd, inp, opt);\n        for (const curr of ((_b = options.interceptors) !== null && _b !== void 0 ? _b : []).filter(i => i.interceptServerStreaming).reverse()) {\n            const next = tail;\n            tail = (mtd, inp, opt) => curr.interceptServerStreaming(next, mtd, inp, opt);\n        }\n        return tail(method, input, options);\n    }\n    if (kind == \"clientStreaming\") {\n        let tail = (mtd, opt) => transport.clientStreaming(mtd, opt);\n        for (const curr of ((_c = options.interceptors) !== null && _c !== void 0 ? _c : []).filter(i => i.interceptClientStreaming).reverse()) {\n            const next = tail;\n            tail = (mtd, opt) => curr.interceptClientStreaming(next, mtd, opt);\n        }\n        return tail(method, options);\n    }\n    if (kind == \"duplex\") {\n        let tail = (mtd, opt) => transport.duplex(mtd, opt);\n        for (const curr of ((_d = options.interceptors) !== null && _d !== void 0 ? _d : []).filter(i => i.interceptDuplex).reverse()) {\n            const next = tail;\n            tail = (mtd, opt) => curr.interceptDuplex(next, mtd, opt);\n        }\n        return tail(method, options);\n    }\n    assertNever(kind);\n}\n/**\n * @deprecated replaced by `stackIntercept()`, still here to support older generated code\n */\nexport function stackUnaryInterceptors(transport, method, input, options) {\n    return stackIntercept(\"unary\", transport, method, options, input);\n}\n/**\n * @deprecated replaced by `stackIntercept()`, still here to support older generated code\n */\nexport function stackServerStreamingInterceptors(transport, method, input, options) {\n    return stackIntercept(\"serverStreaming\", transport, method, options, input);\n}\n/**\n * @deprecated replaced by `stackIntercept()`, still here to support older generated code\n */\nexport function stackClientStreamingInterceptors(transport, method, options) {\n    return stackIntercept(\"clientStreaming\", transport, method, options);\n}\n/**\n * @deprecated replaced by `stackIntercept()`, still here to support older generated code\n */\nexport function stackDuplexStreamingInterceptors(transport, method, options) {\n    return stackIntercept(\"duplex\", transport, method, options);\n}\n", "// Copyright 2018 Twitch Interactive, Inc.  All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\"). You may not\n// use this file except in compliance with the License. A copy of the License is\n// located at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n// CONDITIONS OF ANY KIND, either express or implied. See the License\n// for the specific language governing permissions and limitations under\n// the License.\n/**\n * See https://twitchtv.github.io/twirp/docs/spec_v5.html#error-codes\n *\n * Names and descriptions from [twirp / errors.go](https://github.com/twitchtv/twirp/blob/b2ecb97cf02a9bb55d730920f6a1cb5243899093/errors.go)\n *\n * Copyright 2018 by Twitch Interactive, Inc.\n */\nexport var TwirpErrorCode;\n(function (TwirpErrorCode) {\n    /**\n     * The operation was cancelled.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"cancelled\"] = 0] = \"cancelled\";\n    /**\n     * An unknown error occurred. For example, this can be used when handling\n     * errors raised by APIs that do not return any error information.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"unknown\"] = 1] = \"unknown\";\n    /**\n     * The client specified an invalid argument. This indicates arguments that\n     * are invalid regardless of the state of the system (i.e. a malformed\n     * file name, required argument, number out of range, etc.).\n     */\n    TwirpErrorCode[TwirpErrorCode[\"invalid_argument\"] = 2] = \"invalid_argument\";\n    /**\n     * The client sent a message which could not be decoded. This may mean that\n     * the message was encoded improperly or that the client and server have\n     * incompatible message definitions.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"malformed\"] = 3] = \"malformed\";\n    /**\n     * Operation expired before completion. For operations that change the state\n     * of the system, this error may be returned even if the operation has\n     * completed successfully (timeout).\n     */\n    TwirpErrorCode[TwirpErrorCode[\"deadline_exceeded\"] = 4] = \"deadline_exceeded\";\n    /**\n     * Some requested entity was not found.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"not_found\"] = 5] = \"not_found\";\n    /**\n     * The requested URL path wasn't routable to a Twirp service and method.\n     * This is returned by generated server code and should not be returned\n     * by application code (use \"not_found\" or \"unimplemented\" instead).\n     */\n    TwirpErrorCode[TwirpErrorCode[\"bad_route\"] = 6] = \"bad_route\";\n    /**\n     * An attempt to create an entity failed because one already exists.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"already_exists\"] = 7] = \"already_exists\";\n    /**\n     * The caller does not have permission to execute the specified operation.\n     * It must not be used if the caller cannot be identified (use\n     * \"unauthenticated\" instead).\n     */\n    TwirpErrorCode[TwirpErrorCode[\"permission_denied\"] = 8] = \"permission_denied\";\n    /**\n     * The request does not have valid authentication credentials for the\n     * operation.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"unauthenticated\"] = 9] = \"unauthenticated\";\n    /**\n     * Some resource has been exhausted, perhaps a per-user quota, or\n     * perhaps the entire file system is out of space.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"resource_exhausted\"] = 10] = \"resource_exhausted\";\n    /**\n     * The operation was rejected because the system is not in a state\n     * required for the operation's execution. For example, doing an rmdir\n     * operation on a directory that is non-empty, or on a non-directory\n     * object, or when having conflicting read-modify-write on the same\n     * resource.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"failed_precondition\"] = 11] = \"failed_precondition\";\n    /**\n     * The operation was aborted, typically due to a concurrency issue\n     * like sequencer check failures, transaction aborts, etc.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"aborted\"] = 12] = \"aborted\";\n    /**\n     * The operation was attempted past the valid range. For example, seeking\n     * or reading past end of a paginated collection. Unlike\n     * \"invalid_argument\", this error indicates a problem that may be fixed if\n     * the system state changes (i.e. adding more items to the collection).\n     * There is a fair bit of overlap between \"failed_precondition\" and\n     * \"out_of_range\". We recommend using \"out_of_range\" (the more specific\n     * error) when it applies so that callers who are iterating through a space\n     * can easily look for an \"out_of_range\" error to detect when they are done.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"out_of_range\"] = 13] = \"out_of_range\";\n    /**\n     * The operation is not implemented or not supported/enabled in this service.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"unimplemented\"] = 14] = \"unimplemented\";\n    /**\n     * When some invariants expected by the underlying system have been broken.\n     * In other words, something bad happened in the library or backend service.\n     * Twirp specific issues like wire and serialization problems are also\n     * reported as \"internal\" errors.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"internal\"] = 15] = \"internal\";\n    /**\n     * The service is currently unavailable. This is most likely a transient\n     * condition and may be corrected by retrying with a backoff.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"unavailable\"] = 16] = \"unavailable\";\n    /**\n     * The operation resulted in unrecoverable data loss or corruption.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"dataloss\"] = 17] = \"dataloss\";\n})(TwirpErrorCode || (TwirpErrorCode = {}));\n", "import { isJsonObject } from \"@protobuf-ts/runtime\";\nimport { RpcError } from \"@protobuf-ts/runtime-rpc\";\nimport { TwirpErrorCode } from \"./twitch-twirp-error-code\";\n/**\n * Create fetch API headers for a Twirp request.\n */\nexport function createTwirpRequestHeader(headers, sendJson, meta) {\n    // add meta as headers\n    if (meta) {\n        for (let [k, v] of Object.entries(meta)) {\n            if (typeof v == \"string\")\n                headers.append(k, v);\n            else\n                for (let i of v)\n                    headers.append(k, i);\n        }\n    }\n    // set standard headers (possibly overwriting meta)\n    headers.set('Content-Type', sendJson ? \"application/json\" : \"application/protobuf\");\n    headers.set('Accept', sendJson ? \"application/json\" : \"application/protobuf, application/json\");\n    return headers;\n}\n/**\n * Parse Twirp error message from JSON and create RpcError from the Twirp error.\n *\n * see https://twitchtv.github.io/twirp/docs/spec_v5.html\n */\nexport function parseTwirpErrorResponse(json) {\n    if (!isJsonObject(json) || typeof json.code !== \"string\" || typeof json.msg !== \"string\")\n        return new RpcError('cannot read twirp error response', TwirpErrorCode[TwirpErrorCode.internal]);\n    let meta = {};\n    if (isJsonObject(json.meta)) {\n        for (let [k, v] of Object.entries(json.meta)) {\n            if (typeof v == \"string\")\n                meta[k] = v;\n        }\n    }\n    return new RpcError(json.msg, json.code, meta);\n}\n/**\n * Parses fetch API response headers to RpcMetaData.\n * Drops the headers Content-Type and Content-Length.\n */\nexport function parseMetadataFromResponseHeaders(headers) {\n    let meta = {};\n    headers.forEach((value, key) => {\n        if (key.toLowerCase() === 'content-type')\n            return;\n        if (key.toLowerCase() === 'content-length')\n            return;\n        if (meta.hasOwnProperty(key))\n            meta[key].push(value);\n        else\n            meta[key] = value;\n    });\n    return meta;\n}\n", "import { createTwirpRequestHeader, parseMetadataFromResponseHeaders, parseTwirpErrorResponse } from \"./twirp-format\";\nimport { Deferred, mergeRpcOptions, RpcError, UnaryCall } from \"@protobuf-ts/runtime-rpc\";\nimport { lowerCamelCase } from \"@protobuf-ts/runtime\";\nimport { TwirpErrorCode } from \"./twitch-twirp-error-code\";\n/**\n * Implements the Twirp protocol, supporting JSON or binary format on\n * the wire. Uses the fetch API to do the HTTP requests.\n *\n * See https://twitchtv.github.io/twirp/docs/spec_v5.html\n */\nexport class TwirpFetchTransport {\n    constructor(options) {\n        this.defaultOptions = options;\n    }\n    mergeOptions(options) {\n        return mergeRpcOptions(this.defaultOptions, options);\n    }\n    unary(method, input, options) {\n        var _a, _b, _c;\n        let opt = options, url = this.makeUrl(method, opt), fetchInit = (_a = opt.fetchInit) !== null && _a !== void 0 ? _a : {}, requestBody = opt.sendJson ? method.I.toJsonString(input, opt.jsonOptions) : method.I.toBinary(input, opt.binaryOptions), defHeader = new Deferred(), defMessage = new Deferred(), defStatus = new Deferred(), defTrailer = new Deferred();\n        globalThis.fetch(url, Object.assign(Object.assign({}, fetchInit), { method: 'POST', headers: createTwirpRequestHeader(new globalThis.Headers(), !!opt.sendJson, opt.meta), body: requestBody, signal: (_b = options.abort) !== null && _b !== void 0 ? _b : null // node-fetch@3.0.0-beta.9 rejects `undefined`\n         }))\n            .then(fetchResponse => {\n            defHeader.resolve(parseMetadataFromResponseHeaders(fetchResponse.headers));\n            // Cloudflare Workers throw when the type property of a fetch response\n            // is accessed, so wrap access with try/catch. See:\n            // * https://developers.cloudflare.com/workers/runtime-apis/response/#properties\n            // * https://github.com/cloudflare/miniflare/blob/72f046e/packages/core/src/standards/http.ts#L646\n            let responseType;\n            try {\n                responseType = fetchResponse.type;\n            }\n            catch (_a) { }\n            switch (responseType) {\n                case \"error\":\n                case \"opaque\":\n                case \"opaqueredirect\":\n                    // see https://developer.mozilla.org/en-US/docs/Web/API/Response/type\n                    throw new RpcError(`fetch response type ${fetchResponse.type}`, TwirpErrorCode[TwirpErrorCode.unknown]);\n            }\n            if (!fetchResponse.ok) {\n                return fetchResponse.json().then(value => {\n                    throw parseTwirpErrorResponse(value);\n                }, () => {\n                    throw new RpcError('received HTTP ' + fetchResponse.status + ', unable to read response body as json', TwirpErrorCode[TwirpErrorCode.internal]);\n                });\n            }\n            if (opt.sendJson) {\n                return fetchResponse.json().then(value => method.O.fromJson(value, opt.jsonOptions), () => {\n                    throw new RpcError('unable to read response body as json', TwirpErrorCode[TwirpErrorCode.dataloss]);\n                });\n            }\n            return fetchResponse.arrayBuffer().then(value => method.O.fromBinary(new Uint8Array(value), opt.binaryOptions), () => {\n                throw new RpcError('unable to read response body', TwirpErrorCode[TwirpErrorCode.dataloss]);\n            });\n        }, (reason) => {\n            // failed to fetch, aborted, wrong url or network problem\n            if (reason instanceof Error && reason.name === 'AbortError')\n                throw new RpcError(reason.message, TwirpErrorCode[TwirpErrorCode.cancelled]);\n            throw new RpcError(reason instanceof Error ? reason.message : reason);\n        })\n            .then(message => {\n            defMessage.resolve(message);\n            defStatus.resolve({ code: 'OK', detail: '' });\n            defTrailer.resolve({});\n        })\n            .catch((reason) => {\n            // RpcErrors are thrown by us, everything else is an internal error\n            let error = reason instanceof RpcError ? reason\n                : new RpcError(reason instanceof Error ? reason.message : reason, TwirpErrorCode[TwirpErrorCode.internal]);\n            error.methodName = method.name;\n            error.serviceName = method.service.typeName;\n            defHeader.rejectPending(error);\n            defMessage.rejectPending(error);\n            defStatus.rejectPending(error);\n            defTrailer.rejectPending(error);\n        });\n        return new UnaryCall(method, (_c = opt.meta) !== null && _c !== void 0 ? _c : {}, input, defHeader.promise, defMessage.promise, defStatus.promise, defTrailer.promise);\n    }\n    /**\n     * Create an URI for a RPC call.\n     *\n     * Takes the `baseUrl` option and appends:\n     * - slash \"/\"\n     * - package name\n     * - dot \".\"\n     * - service name\n     * - slash \"/\"\n     * - method name\n     *\n     * If the service was declared without a package, the package name and dot\n     * are omitted.\n     *\n     * The method name is CamelCased just as it would be in Go, unless the\n     * option `useProtoMethodName` is `true`.\n     */\n    makeUrl(method, options) {\n        let base = options.baseUrl;\n        if (base.endsWith('/'))\n            base = base.substring(0, base.length - 1);\n        let methodName = method.name;\n        if (options.useProtoMethodName !== true) {\n            methodName = lowerCamelCase(methodName);\n            methodName = methodName.substring(0, 1).toUpperCase() + methodName.substring(1);\n        }\n        return `${base}/${method.service.typeName}/${methodName}`;\n    }\n    clientStreaming(method /*, options: RpcOptions*/) {\n        const e = new RpcError('Client streaming is not supported by Twirp', TwirpErrorCode[TwirpErrorCode.unimplemented]);\n        e.methodName = method.name;\n        e.serviceName = method.service.typeName;\n        throw e;\n    }\n    duplex(method /*, options: RpcOptions*/) {\n        const e = new RpcError('Duplex streaming is not supported by Twirp', TwirpErrorCode[TwirpErrorCode.unimplemented]);\n        e.methodName = method.name;\n        e.serviceName = method.service.typeName;\n        throw e;\n    }\n    serverStreaming(method /*, input: I, options?: RpcOptions*/) {\n        const e = new RpcError('Server streaming is not supported by Twirp', TwirpErrorCode[TwirpErrorCode.unimplemented]);\n        e.methodName = method.name;\n        e.serviceName = method.service.typeName;\n        throw e;\n    }\n}\n", "/**\n * Checks whether we are using React Native\n */\nexport const isReactNative = () => {\n\tif (typeof navigator === \"undefined\") return false;\n\treturn navigator.product?.toLowerCase() === \"reactnative\";\n};\n", "import { isReactNative } from \"./utils/is-react-native.ts\";\n\nexport enum LogLevelEnum {\n\ttrace,\n\tdebug,\n\tinfo,\n\twarn,\n\terror,\n}\n\nexport type LogLevel = keyof typeof LogLevelEnum;\nexport type Sink = (logLevel: LogLevel, message: string, ...data: any[]) => void;\n\nconst logToConsole: Sink = (logLevel, message, ...rest) => {\n\tlet logMethod;\n\tswitch (logLevel) {\n\t\tcase \"error\":\n\t\t\tif (isReactNative()) {\n\t\t\t\tmessage = `ERROR: ${message}`;\n\t\t\t\tlogMethod = console.info;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlogMethod = console.error;\n\t\t\tbreak;\n\t\tcase \"warn\":\n\t\t\tif (isReactNative()) {\n\t\t\t\tmessage = `WARN: ${message}`;\n\t\t\t\tlogMethod = console.info;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlogMethod = console.warn;\n\t\t\tbreak;\n\t\tcase \"info\":\n\t\t\tlogMethod = console.info;\n\t\t\tbreak;\n\t\tcase \"trace\":\n\t\t\tlogMethod = console.trace;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tlogMethod = console.log;\n\t\t\tbreak;\n\t}\n\n\tlogMethod(message, ...rest);\n};\n\nconst DEFAULT_LOG_LEVEL: LogLevel = \"info\";\nconst DEFAULT_SINK: Sink = logToConsole;\n\ntype DefaultStringType = string & {};\n\nexport type Logger<T extends string = DefaultStringType> = {\n\twithExtraTags: (...extraTags: string[]) => Logger<T>;\n\tgetLogLevel: () => LogLevel;\n} & Record<LogLevel, (message: string, ...data: any[]) => void>;\n\nexport type ConfigureLoggersOptions<T extends string = DefaultStringType> =\n\tT extends \"default\"\n\t\t? never\n\t\t: Partial<{\n\t\t\t\t[K in T | \"default\"]: Partial<{\n\t\t\t\t\tsink: K extends \"default\" ? Sink : Sink | null;\n\t\t\t\t\tlevel: K extends \"default\" ? LogLevel : LogLevel | null;\n\t\t\t\t}>;\n\t\t\t}>;\n\nexport type LoggerSystem<T extends string = DefaultStringType> = {\n\tgetLogger: (scope: T, options?: { tags?: string[] }) => Logger<T>;\n\tconfigureLoggers: (optionsByScope?: ConfigureLoggersOptions<T>) => void;\n\trestoreDefaults: () => void;\n};\n\nexport const createLoggerSystem = <T extends string = DefaultStringType>(): LoggerSystem <T>=> {\n\tconst sinkByScope = new Map<string, Sink>([[\"default\", DEFAULT_SINK]]);\n\tconst logLevelByScope = new Map<string, LogLevel>([[\"default\", DEFAULT_LOG_LEVEL]]);\n\n\tconst getLogger = (scope: T, options: { tags?: string[] } = {}): Logger<T> => {\n\t\tconst tagString = (options.tags ?? []).filter(Boolean).join(\",\");\n\n\t\tconst constructLogFunction =\n\t\t\t(logLevel: LogLevel) =>\n\t\t\t(message: string, ...data: any[]) => {\n\t\t\t\tconst scopedLogLevel =\n\t\t\t\t\tlogLevelByScope.get(scope) ?? logLevelByScope.get(\"default\")!;\n\n\t\t\t\tif (LogLevelEnum[logLevel] >= LogLevelEnum[scopedLogLevel]) {\n\t\t\t\t\tconst scopedSink = sinkByScope.get(scope) ?? sinkByScope.get(\"default\")!;\n\n\t\t\t\t\tscopedSink(\n\t\t\t\t\t\tlogLevel,\n\t\t\t\t\t\t`[${scope}]${tagString.length ? `(${tagString})` : \"\"}: ${message}`,\n\t\t\t\t\t\t...data,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t};\n\n\t\treturn {\n\t\t\twithExtraTags: (...extraTags: string[]) => {\n\t\t\t\treturn getLogger(scope, {\n\t\t\t\t\t...options,\n\t\t\t\t\ttags: options.tags ? options.tags.concat(extraTags) : extraTags,\n\t\t\t\t});\n\t\t\t},\n\t\t\tgetLogLevel: () => {\n\t\t\t\treturn logLevelByScope.get(scope) ?? logLevelByScope.get(\"default\")!;\n\t\t\t},\n\t\t\t...({\n\t\t\t\terror: constructLogFunction(\"error\"),\n\t\t\t\ttrace: constructLogFunction(\"trace\"),\n\t\t\t\tdebug: constructLogFunction(\"debug\"),\n\t\t\t\tinfo: constructLogFunction(\"info\"),\n\t\t\t\twarn: constructLogFunction(\"warn\"),\n\t\t\t} satisfies Record<LogLevel, ReturnType<typeof constructLogFunction>>),\n\t\t};\n\t};\n\n\tconst configureLoggers = (optionsByScope?: ConfigureLoggersOptions<T>) => {\n\t\tfor (const scope in optionsByScope) {\n\t\t\tconst options = optionsByScope[scope]!;\n\n\t\t\tif (options.sink) {\n\t\t\t\tsinkByScope.set(scope, options.sink);\n\t\t\t} else if (options.sink === null && scope !== \"default\") {\n\t\t\t\tsinkByScope.delete(scope);\n\t\t\t}\n\n\t\t\tif (options.level) {\n\t\t\t\tlogLevelByScope.set(scope, options.level);\n\t\t\t} else if (options.level === null && scope !== \"default\") {\n\t\t\t\tlogLevelByScope.delete(scope);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst restoreDefaults = () => {\n\t\tsinkByScope.clear();\n\t\tlogLevelByScope.clear();\n\t\tsinkByScope.set(\"default\", DEFAULT_SINK);\n\t\tlogLevelByScope.set(\"default\", DEFAULT_LOG_LEVEL);\n\t};\n\n\treturn {\n\t\tgetLogger,\n\t\tconfigureLoggers,\n\t\trestoreDefaults,\n\t};\n};\n", "/**\n * Returns true if the object is a function.\n * @param value The value to check\n */\nexport function isFunction(value: any): value is (...args: any[]) => any {\n  return typeof value === 'function';\n}\n", "/**\n * Used to create Error subclasses until the community moves away from ES5.\n *\n * This is because compiling from TypeScript down to ES5 has issues with subclassing Errors\n * as well as other built-in types: https://github.com/Microsoft/TypeScript/issues/12123\n *\n * @param createImpl A factory function to create the actual constructor implementation. The returned\n * function should be a named function that calls `_super` internally.\n */\nexport function createErrorClass<T>(createImpl: (_super: any) => any): T {\n  const _super = (instance: any) => {\n    Error.call(instance);\n    instance.stack = new Error().stack;\n  };\n\n  const ctorFunc = createImpl(_super);\n  ctorFunc.prototype = Object.create(Error.prototype);\n  ctorFunc.prototype.constructor = ctorFunc;\n  return ctorFunc;\n}\n", "import { createErrorClass } from './createErrorClass';\n\nexport interface UnsubscriptionError extends Error {\n  readonly errors: any[];\n}\n\nexport interface UnsubscriptionErrorCtor {\n  /**\n   * @deprecated Internal implementation detail. Do not construct error instances.\n   * Cannot be tagged as internal: https://github.com/ReactiveX/rxjs/issues/6269\n   */\n  new (errors: any[]): UnsubscriptionError;\n}\n\n/**\n * An error thrown when one or more errors have occurred during the\n * `unsubscribe` of a {@link Subscription}.\n */\nexport const UnsubscriptionError: UnsubscriptionErrorCtor = createErrorClass(\n  (_super) =>\n    function UnsubscriptionErrorImpl(this: any, errors: (Error | string)[]) {\n      _super(this);\n      this.message = errors\n        ? `${errors.length} errors occurred during unsubscription:\n${errors.map((err, i) => `${i + 1}) ${err.toString()}`).join('\\n  ')}`\n        : '';\n      this.name = 'UnsubscriptionError';\n      this.errors = errors;\n    }\n);\n", "/**\n * Removes an item from an array, mutating it.\n * @param arr The array to remove the item from\n * @param item The item to remove\n */\nexport function arrRemove<T>(arr: T[] | undefined | null, item: T) {\n  if (arr) {\n    const index = arr.indexOf(item);\n    0 <= index && arr.splice(index, 1);\n  }\n}\n", "import { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { SubscriptionLike, TeardownLogic, Unsubscribable } from './types';\nimport { arrRemove } from './util/arrRemove';\n\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n */\nexport class Subscription implements SubscriptionLike {\n  public static EMPTY = (() => {\n    const empty = new Subscription();\n    empty.closed = true;\n    return empty;\n  })();\n\n  /**\n   * A flag to indicate whether this Subscription has already been unsubscribed.\n   */\n  public closed = false;\n\n  private _parentage: Subscription[] | Subscription | null = null;\n\n  /**\n   * The list of registered finalizers to execute upon unsubscription. Adding and removing from this\n   * list occurs in the {@link #add} and {@link #remove} methods.\n   */\n  private _finalizers: Exclude<TeardownLogic, void>[] | null = null;\n\n  /**\n   * @param initialTeardown A function executed first as part of the finalization\n   * process that is kicked off when {@link #unsubscribe} is called.\n   */\n  constructor(private initialTeardown?: () => void) {}\n\n  /**\n   * Disposes the resources held by the subscription. May, for instance, cancel\n   * an ongoing Observable execution or cancel any other type of work that\n   * started when the Subscription was created.\n   */\n  unsubscribe(): void {\n    let errors: any[] | undefined;\n\n    if (!this.closed) {\n      this.closed = true;\n\n      // Remove this from it's parents.\n      const { _parentage } = this;\n      if (_parentage) {\n        this._parentage = null;\n        if (Array.isArray(_parentage)) {\n          for (const parent of _parentage) {\n            parent.remove(this);\n          }\n        } else {\n          _parentage.remove(this);\n        }\n      }\n\n      const { initialTeardown: initialFinalizer } = this;\n      if (isFunction(initialFinalizer)) {\n        try {\n          initialFinalizer();\n        } catch (e) {\n          errors = e instanceof UnsubscriptionError ? e.errors : [e];\n        }\n      }\n\n      const { _finalizers } = this;\n      if (_finalizers) {\n        this._finalizers = null;\n        for (const finalizer of _finalizers) {\n          try {\n            execFinalizer(finalizer);\n          } catch (err) {\n            errors = errors ?? [];\n            if (err instanceof UnsubscriptionError) {\n              errors = [...errors, ...err.errors];\n            } else {\n              errors.push(err);\n            }\n          }\n        }\n      }\n\n      if (errors) {\n        throw new UnsubscriptionError(errors);\n      }\n    }\n  }\n\n  /**\n   * Adds a finalizer to this subscription, so that finalization will be unsubscribed/called\n   * when this subscription is unsubscribed. If this subscription is already {@link #closed},\n   * because it has already been unsubscribed, then whatever finalizer is passed to it\n   * will automatically be executed (unless the finalizer itself is also a closed subscription).\n   *\n   * Closed Subscriptions cannot be added as finalizers to any subscription. Adding a closed\n   * subscription to a any subscription will result in no operation. (A noop).\n   *\n   * Adding a subscription to itself, or adding `null` or `undefined` will not perform any\n   * operation at all. (A noop).\n   *\n   * `Subscription` instances that are added to this instance will automatically remove themselves\n   * if they are unsubscribed. Functions and {@link Unsubscribable} objects that you wish to remove\n   * will need to be removed manually with {@link #remove}\n   *\n   * @param teardown The finalization logic to add to this subscription.\n   */\n  add(teardown: TeardownLogic): void {\n    // Only add the finalizer if it's not undefined\n    // and don't add a subscription to itself.\n    if (teardown && teardown !== this) {\n      if (this.closed) {\n        // If this subscription is already closed,\n        // execute whatever finalizer is handed to it automatically.\n        execFinalizer(teardown);\n      } else {\n        if (teardown instanceof Subscription) {\n          // We don't add closed subscriptions, and we don't add the same subscription\n          // twice. Subscription unsubscribe is idempotent.\n          if (teardown.closed || teardown._hasParent(this)) {\n            return;\n          }\n          teardown._addParent(this);\n        }\n        (this._finalizers = this._finalizers ?? []).push(teardown);\n      }\n    }\n  }\n\n  /**\n   * Checks to see if a this subscription already has a particular parent.\n   * This will signal that this subscription has already been added to the parent in question.\n   * @param parent the parent to check for\n   */\n  private _hasParent(parent: Subscription) {\n    const { _parentage } = this;\n    return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n  }\n\n  /**\n   * Adds a parent to this subscription so it can be removed from the parent if it\n   * unsubscribes on it's own.\n   *\n   * NOTE: THIS ASSUMES THAT {@link _hasParent} HAS ALREADY BEEN CHECKED.\n   * @param parent The parent subscription to add\n   */\n  private _addParent(parent: Subscription) {\n    const { _parentage } = this;\n    this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n  }\n\n  /**\n   * Called on a child when it is removed via {@link #remove}.\n   * @param parent The parent to remove\n   */\n  private _removeParent(parent: Subscription) {\n    const { _parentage } = this;\n    if (_parentage === parent) {\n      this._parentage = null;\n    } else if (Array.isArray(_parentage)) {\n      arrRemove(_parentage, parent);\n    }\n  }\n\n  /**\n   * Removes a finalizer from this subscription that was previously added with the {@link #add} method.\n   *\n   * Note that `Subscription` instances, when unsubscribed, will automatically remove themselves\n   * from every other `Subscription` they have been added to. This means that using the `remove` method\n   * is not a common thing and should be used thoughtfully.\n   *\n   * If you add the same finalizer instance of a function or an unsubscribable object to a `Subscription` instance\n   * more than once, you will need to call `remove` the same number of times to remove all instances.\n   *\n   * All finalizer instances are removed to free up memory upon unsubscription.\n   *\n   * @param teardown The finalizer to remove from this subscription\n   */\n  remove(teardown: Exclude<TeardownLogic, void>): void {\n    const { _finalizers } = this;\n    _finalizers && arrRemove(_finalizers, teardown);\n\n    if (teardown instanceof Subscription) {\n      teardown._removeParent(this);\n    }\n  }\n}\n\nexport const EMPTY_SUBSCRIPTION = Subscription.EMPTY;\n\nexport function isSubscription(value: any): value is Subscription {\n  return (\n    value instanceof Subscription ||\n    (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe))\n  );\n}\n\nfunction execFinalizer(finalizer: Unsubscribable | (() => void)) {\n  if (isFunction(finalizer)) {\n    finalizer();\n  } else {\n    finalizer.unsubscribe();\n  }\n}\n", "import { Subscriber } from './Subscriber';\nimport { ObservableNotification } from './types';\n\n/**\n * The {@link GlobalConfig} object for RxJS. It is used to configure things\n * like how to react on unhandled errors.\n */\nexport const config: GlobalConfig = {\n  onUnhandledError: null,\n  onStoppedNotification: null,\n  Promise: undefined,\n  useDeprecatedSynchronousErrorHandling: false,\n  useDeprecatedNextContext: false,\n};\n\n/**\n * The global configuration object for RxJS, used to configure things\n * like how to react on unhandled errors. Accessible via {@link config}\n * object.\n */\nexport interface GlobalConfig {\n  /**\n   * A registration point for unhandled errors from RxJS. These are errors that\n   * cannot were not handled by consuming code in the usual subscription path. For\n   * example, if you have this configured, and you subscribe to an observable without\n   * providing an error handler, errors from that subscription will end up here. This\n   * will _always_ be called asynchronously on another job in the runtime. This is because\n   * we do not want errors thrown in this user-configured handler to interfere with the\n   * behavior of the library.\n   */\n  onUnhandledError: ((err: any) => void) | null;\n\n  /**\n   * A registration point for notifications that cannot be sent to subscribers because they\n   * have completed, errored or have been explicitly unsubscribed. By default, next, complete\n   * and error notifications sent to stopped subscribers are noops. However, sometimes callers\n   * might want a different behavior. For example, with sources that attempt to report errors\n   * to stopped subscribers, a caller can configure RxJS to throw an unhandled error instead.\n   * This will _always_ be called asynchronously on another job in the runtime. This is because\n   * we do not want errors thrown in this user-configured handler to interfere with the\n   * behavior of the library.\n   */\n  onStoppedNotification: ((notification: ObservableNotification<any>, subscriber: Subscriber<any>) => void) | null;\n\n  /**\n   * The promise constructor used by default for {@link Observable#toPromise toPromise} and {@link Observable#forEach forEach}\n   * methods.\n   *\n   * @deprecated As of version 8, RxJS will no longer support this sort of injection of a\n   * Promise constructor. If you need a Promise implementation other than native promises,\n   * please polyfill/patch Promise as you see appropriate. Will be removed in v8.\n   */\n  Promise?: PromiseConstructorLike;\n\n  /**\n   * If true, turns on synchronous error rethrowing, which is a deprecated behavior\n   * in v6 and higher. This behavior enables bad patterns like wrapping a subscribe\n   * call in a try/catch block. It also enables producer interference, a nasty bug\n   * where a multicast can be broken for all observers by a downstream consumer with\n   * an unhandled error. DO NOT USE THIS FLAG UNLESS IT'S NEEDED TO BUY TIME\n   * FOR MIGRATION REASONS.\n   *\n   * @deprecated As of version 8, RxJS will no longer support synchronous throwing\n   * of unhandled errors. All errors will be thrown on a separate call stack to prevent bad\n   * behaviors described above. Will be removed in v8.\n   */\n  useDeprecatedSynchronousErrorHandling: boolean;\n\n  /**\n   * If true, enables an as-of-yet undocumented feature from v5: The ability to access\n   * `unsubscribe()` via `this` context in `next` functions created in observers passed\n   * to `subscribe`.\n   *\n   * This is being removed because the performance was severely problematic, and it could also cause\n   * issues when types other than POJOs are passed to subscribe as subscribers, as they will likely have\n   * their `this` context overwritten.\n   *\n   * @deprecated As of version 8, RxJS will no longer support altering the\n   * context of next functions provided as part of an observer to Subscribe. Instead,\n   * you will have access to a subscription or a signal or token that will allow you to do things like\n   * unsubscribe and test closed status. Will be removed in v8.\n   */\n  useDeprecatedNextContext: boolean;\n}\n", "import type { TimerHandle } from './timerHandle';\ntype SetTimeoutFunction = (handler: () => void, timeout?: number, ...args: any[]) => TimerHandle;\ntype ClearTimeoutFunction = (handle: TimerHandle) => void;\n\ninterface TimeoutProvider {\n  setTimeout: SetTimeoutFunction;\n  clearTimeout: ClearTimeoutFunction;\n  delegate:\n    | {\n        setTimeout: SetTimeoutFunction;\n        clearTimeout: ClearTimeoutFunction;\n      }\n    | undefined;\n}\n\nexport const timeoutProvider: TimeoutProvider = {\n  // When accessing the delegate, use the variable rather than `this` so that\n  // the functions can be called without being bound to the provider.\n  setTimeout(handler: () => void, timeout?: number, ...args) {\n    const { delegate } = timeoutProvider;\n    if (delegate?.setTimeout) {\n      return delegate.setTimeout(handler, timeout, ...args);\n    }\n    return setTimeout(handler, timeout, ...args);\n  },\n  clearTimeout(handle) {\n    const { delegate } = timeoutProvider;\n    return (delegate?.clearTimeout || clearTimeout)(handle as any);\n  },\n  delegate: undefined,\n};\n", "import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\n\n/**\n * Handles an error on another job either with the user-configured {@link onUnhandledError},\n * or by throwing it on that new job so it can be picked up by `window.onerror`, `process.on('error')`, etc.\n *\n * This should be called whenever there is an error that is out-of-band with the subscription\n * or when an error hits a terminal boundary of the subscription and no error handler was provided.\n *\n * @param err the error to report\n */\nexport function reportUnhandledError(err: any) {\n  timeoutProvider.setTimeout(() => {\n    const { onUnhandledError } = config;\n    if (onUnhandledError) {\n      // Execute the user-configured error handler.\n      onUnhandledError(err);\n    } else {\n      // Throw so it is picked up by the runtime's uncaught error mechanism.\n      throw err;\n    }\n  });\n}\n", "/* tslint:disable:no-empty */\nexport function noop() { }\n", "import { CompleteNotification, NextNotification, ErrorNotification } from './types';\n\n/**\n * A completion object optimized for memory use and created to be the\n * same \"shape\" as other notifications in v8.\n * @internal\n */\nexport const COMPLETE_NOTIFICATION = (() => createNotification('C', undefined, undefined) as CompleteNotification)();\n\n/**\n * Internal use only. Creates an optimized error notification that is the same \"shape\"\n * as other notifications.\n * @internal\n */\nexport function errorNotification(error: any): ErrorNotification {\n  return createNotification('E', undefined, error) as any;\n}\n\n/**\n * Internal use only. Creates an optimized next notification that is the same \"shape\"\n * as other notifications.\n * @internal\n */\nexport function nextNotification<T>(value: T) {\n  return createNotification('N', value, undefined) as NextNotification<T>;\n}\n\n/**\n * Ensures that all notifications created internally have the same \"shape\" in v8.\n *\n * TODO: This is only exported to support a crazy legacy test in `groupBy`.\n * @internal\n */\nexport function createNotification(kind: 'N' | 'E' | 'C', value: any, error: any) {\n  return {\n    kind,\n    value,\n    error,\n  };\n}\n", "import { config } from '../config';\n\nlet context: { errorThrown: boolean; error: any } | null = null;\n\n/**\n * Handles dealing with errors for super-gross mode. Creates a context, in which\n * any synchronously thrown errors will be passed to {@link captureError}. Which\n * will record the error such that it will be rethrown after the call back is complete.\n * TODO: Remove in v8\n * @param cb An immediately executed function.\n */\nexport function errorContext(cb: () => void) {\n  if (config.useDeprecatedSynchronousErrorHandling) {\n    const isRoot = !context;\n    if (isRoot) {\n      context = { errorThrown: false, error: null };\n    }\n    cb();\n    if (isRoot) {\n      const { errorThrown, error } = context!;\n      context = null;\n      if (errorThrown) {\n        throw error;\n      }\n    }\n  } else {\n    // This is the general non-deprecated path for everyone that\n    // isn't crazy enough to use super-gross mode (useDeprecatedSynchronousErrorHandling)\n    cb();\n  }\n}\n\n/**\n * Captures errors only in super-gross mode.\n * @param err the error to capture\n */\nexport function captureError(err: any) {\n  if (config.useDeprecatedSynchronousErrorHandling && context) {\n    context.errorThrown = true;\n    context.error = err;\n  }\n}\n", "import { isFunction } from './util/isFunction';\nimport { Observer, ObservableNotification } from './types';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\n\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n */\nexport class Subscriber<T> extends Subscription implements Observer<T> {\n  /**\n   * A static factory for a Subscriber, given a (potentially partial) definition\n   * of an Observer.\n   * @param next The `next` callback of an Observer.\n   * @param error The `error` callback of an\n   * Observer.\n   * @param complete The `complete` callback of an\n   * Observer.\n   * @return A Subscriber wrapping the (partially defined)\n   * Observer represented by the given arguments.\n   * @deprecated Do not use. Will be removed in v8. There is no replacement for this\n   * method, and there is no reason to be creating instances of `Subscriber` directly.\n   * If you have a specific use case, please file an issue.\n   */\n  static create<T>(next?: (x?: T) => void, error?: (e?: any) => void, complete?: () => void): Subscriber<T> {\n    return new SafeSubscriber(next, error, complete);\n  }\n\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  protected isStopped: boolean = false;\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  protected destination: Subscriber<any> | Observer<any>; // this `any` is the escape hatch to erase extra type param (e.g. R)\n\n  /**\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\n   * There is no reason to directly create an instance of Subscriber. This type is exported for typings reasons.\n   */\n  constructor(destination?: Subscriber<any> | Observer<any>) {\n    super();\n    if (destination) {\n      this.destination = destination;\n      // Automatically chain subscriptions together here.\n      // if destination is a Subscription, then it is a Subscriber.\n      if (isSubscription(destination)) {\n        destination.add(this);\n      }\n    } else {\n      this.destination = EMPTY_OBSERVER;\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive notifications of type `next` from\n   * the Observable, with a value. The Observable may call this method 0 or more\n   * times.\n   * @param value The `next` value.\n   */\n  next(value: T): void {\n    if (this.isStopped) {\n      handleStoppedNotification(nextNotification(value), this);\n    } else {\n      this._next(value!);\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive notifications of type `error` from\n   * the Observable, with an attached `Error`. Notifies the Observer that\n   * the Observable has experienced an error condition.\n   * @param err The `error` exception.\n   */\n  error(err?: any): void {\n    if (this.isStopped) {\n      handleStoppedNotification(errorNotification(err), this);\n    } else {\n      this.isStopped = true;\n      this._error(err);\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive a valueless notification of type\n   * `complete` from the Observable. Notifies the Observer that the Observable\n   * has finished sending push-based notifications.\n   */\n  complete(): void {\n    if (this.isStopped) {\n      handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n    } else {\n      this.isStopped = true;\n      this._complete();\n    }\n  }\n\n  unsubscribe(): void {\n    if (!this.closed) {\n      this.isStopped = true;\n      super.unsubscribe();\n      this.destination = null!;\n    }\n  }\n\n  protected _next(value: T): void {\n    this.destination.next(value);\n  }\n\n  protected _error(err: any): void {\n    try {\n      this.destination.error(err);\n    } finally {\n      this.unsubscribe();\n    }\n  }\n\n  protected _complete(): void {\n    try {\n      this.destination.complete();\n    } finally {\n      this.unsubscribe();\n    }\n  }\n}\n\n/**\n * This bind is captured here because we want to be able to have\n * compatibility with monoid libraries that tend to use a method named\n * `bind`. In particular, a library called Monio requires this.\n */\nconst _bind = Function.prototype.bind;\n\nfunction bind<Fn extends (...args: any[]) => any>(fn: Fn, thisArg: any): Fn {\n  return _bind.call(fn, thisArg);\n}\n\n/**\n * Internal optimization only, DO NOT EXPOSE.\n * @internal\n */\nclass ConsumerObserver<T> implements Observer<T> {\n  constructor(private partialObserver: Partial<Observer<T>>) {}\n\n  next(value: T): void {\n    const { partialObserver } = this;\n    if (partialObserver.next) {\n      try {\n        partialObserver.next(value);\n      } catch (error) {\n        handleUnhandledError(error);\n      }\n    }\n  }\n\n  error(err: any): void {\n    const { partialObserver } = this;\n    if (partialObserver.error) {\n      try {\n        partialObserver.error(err);\n      } catch (error) {\n        handleUnhandledError(error);\n      }\n    } else {\n      handleUnhandledError(err);\n    }\n  }\n\n  complete(): void {\n    const { partialObserver } = this;\n    if (partialObserver.complete) {\n      try {\n        partialObserver.complete();\n      } catch (error) {\n        handleUnhandledError(error);\n      }\n    }\n  }\n}\n\nexport class SafeSubscriber<T> extends Subscriber<T> {\n  constructor(\n    observerOrNext?: Partial<Observer<T>> | ((value: T) => void) | null,\n    error?: ((e?: any) => void) | null,\n    complete?: (() => void) | null\n  ) {\n    super();\n\n    let partialObserver: Partial<Observer<T>>;\n    if (isFunction(observerOrNext) || !observerOrNext) {\n      // The first argument is a function, not an observer. The next\n      // two arguments *could* be observers, or they could be empty.\n      partialObserver = {\n        next: (observerOrNext ?? undefined) as ((value: T) => void) | undefined,\n        error: error ?? undefined,\n        complete: complete ?? undefined,\n      };\n    } else {\n      // The first argument is a partial observer.\n      let context: any;\n      if (this && config.useDeprecatedNextContext) {\n        // This is a deprecated path that made `this.unsubscribe()` available in\n        // next handler functions passed to subscribe. This only exists behind a flag\n        // now, as it is *very* slow.\n        context = Object.create(observerOrNext);\n        context.unsubscribe = () => this.unsubscribe();\n        partialObserver = {\n          next: observerOrNext.next && bind(observerOrNext.next, context),\n          error: observerOrNext.error && bind(observerOrNext.error, context),\n          complete: observerOrNext.complete && bind(observerOrNext.complete, context),\n        };\n      } else {\n        // The \"normal\" path. Just use the partial observer directly.\n        partialObserver = observerOrNext;\n      }\n    }\n\n    // Wrap the partial observer to ensure it's a full observer, and\n    // make sure proper error handling is accounted for.\n    this.destination = new ConsumerObserver(partialObserver);\n  }\n}\n\nfunction handleUnhandledError(error: any) {\n  if (config.useDeprecatedSynchronousErrorHandling) {\n    captureError(error);\n  } else {\n    // Ideal path, we report this as an unhandled error,\n    // which is thrown on a new call stack.\n    reportUnhandledError(error);\n  }\n}\n\n/**\n * An error handler used when no error handler was supplied\n * to the SafeSubscriber -- meaning no error handler was supplied\n * do the `subscribe` call on our observable.\n * @param err The error to handle\n */\nfunction defaultErrorHandler(err: any) {\n  throw err;\n}\n\n/**\n * A handler for notifications that cannot be sent to a stopped subscriber.\n * @param notification The notification being sent.\n * @param subscriber The stopped subscriber.\n */\nfunction handleStoppedNotification(notification: ObservableNotification<any>, subscriber: Subscriber<any>) {\n  const { onStoppedNotification } = config;\n  onStoppedNotification && timeoutProvider.setTimeout(() => onStoppedNotification(notification, subscriber));\n}\n\n/**\n * The observer used as a stub for subscriptions where the user did not\n * pass any arguments to `subscribe`. Comes with the default error handling\n * behavior.\n */\nexport const EMPTY_OBSERVER: Readonly<Observer<any>> & { closed: true } = {\n  closed: true,\n  next: noop,\n  error: defaultErrorHandler,\n  complete: noop,\n};\n", "/**\n * Symbol.observable or a string \"@@observable\". Used for interop\n *\n * @deprecated We will no longer be exporting this symbol in upcoming versions of RxJS.\n * Instead polyfill and use Symbol.observable directly *or* use https://www.npmjs.com/package/symbol-observable\n */\nexport const observable: string | symbol = (() => (typeof Symbol === 'function' && Symbol.observable) || '@@observable')();\n", "/**\n * This function takes one parameter and just returns it. Simply put,\n * this is like `<T>(x: T): T => x`.\n *\n * ## Examples\n *\n * This is useful in some cases when using things like `mergeMap`\n *\n * ```ts\n * import { interval, take, map, range, mergeMap, identity } from 'rxjs';\n *\n * const source$ = interval(1000).pipe(take(5));\n *\n * const result$ = source$.pipe(\n *   map(i => range(i)),\n *   mergeMap(identity) // same as mergeMap(x => x)\n * );\n *\n * result$.subscribe({\n *   next: console.log\n * });\n * ```\n *\n * Or when you want to selectively apply an operator\n *\n * ```ts\n * import { interval, take, identity } from 'rxjs';\n *\n * const shouldLimit = () => Math.random() < 0.5;\n *\n * const source$ = interval(1000);\n *\n * const result$ = source$.pipe(shouldLimit() ? take(5) : identity);\n *\n * result$.subscribe({\n *   next: console.log\n * });\n * ```\n *\n * @param x Any value that is returned by this function\n * @returns The value passed as the first parameter to this function\n */\nexport function identity<T>(x: T): T {\n  return x;\n}\n", "import { identity } from './identity';\nimport { UnaryFunction } from '../types';\n\nexport function pipe(): typeof identity;\nexport function pipe<T, A>(fn1: UnaryFunction<T, A>): UnaryFunction<T, A>;\nexport function pipe<T, A, B>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>): UnaryFunction<T, B>;\nexport function pipe<T, A, B, C>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>): UnaryFunction<T, C>;\nexport function pipe<T, A, B, C, D>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>\n): UnaryFunction<T, D>;\nexport function pipe<T, A, B, C, D, E>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>\n): UnaryFunction<T, E>;\nexport function pipe<T, A, B, C, D, E, F>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>,\n  fn6: UnaryFunction<E, F>\n): UnaryFunction<T, F>;\nexport function pipe<T, A, B, C, D, E, F, G>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>,\n  fn6: UnaryFunction<E, F>,\n  fn7: UnaryFunction<F, G>\n): UnaryFunction<T, G>;\nexport function pipe<T, A, B, C, D, E, F, G, H>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>,\n  fn6: UnaryFunction<E, F>,\n  fn7: UnaryFunction<F, G>,\n  fn8: UnaryFunction<G, H>\n): UnaryFunction<T, H>;\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>,\n  fn6: UnaryFunction<E, F>,\n  fn7: UnaryFunction<F, G>,\n  fn8: UnaryFunction<G, H>,\n  fn9: UnaryFunction<H, I>\n): UnaryFunction<T, I>;\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>,\n  fn6: UnaryFunction<E, F>,\n  fn7: UnaryFunction<F, G>,\n  fn8: UnaryFunction<G, H>,\n  fn9: UnaryFunction<H, I>,\n  ...fns: UnaryFunction<any, any>[]\n): UnaryFunction<T, unknown>;\n\n/**\n * pipe() can be called on one or more functions, each of which can take one argument (\"UnaryFunction\")\n * and uses it to return a value.\n * It returns a function that takes one argument, passes it to the first UnaryFunction, and then\n * passes the result to the next one, passes that result to the next one, and so on.  \n */\nexport function pipe(...fns: Array<UnaryFunction<any, any>>): UnaryFunction<any, any> {\n  return pipeFromArray(fns);\n}\n\n/** @internal */\nexport function pipeFromArray<T, R>(fns: Array<UnaryFunction<T, R>>): UnaryFunction<T, R> {\n  if (fns.length === 0) {\n    return identity as UnaryFunction<any, any>;\n  }\n\n  if (fns.length === 1) {\n    return fns[0];\n  }\n\n  return function piped(input: T): R {\n    return fns.reduce((prev: any, fn: UnaryFunction<T, R>) => fn(prev), input as any);\n  };\n}\n", "import { Operator } from './Operator';\nimport { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription, Subscription } from './Subscription';\nimport { TeardownLogic, OperatorFunction, Subscribable, Observer } from './types';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\n\n/**\n * A representation of any set of values over any amount of time. This is the most basic building block\n * of RxJS.\n */\nexport class Observable<T> implements Subscribable<T> {\n  /**\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\n   */\n  source: Observable<any> | undefined;\n\n  /**\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\n   */\n  operator: Operator<any, T> | undefined;\n\n  /**\n   * @param subscribe The function that is called when the Observable is\n   * initially subscribed to. This function is given a Subscriber, to which new values\n   * can be `next`ed, or an `error` method can be called to raise an error, or\n   * `complete` can be called to notify of a successful completion.\n   */\n  constructor(subscribe?: (this: Observable<T>, subscriber: Subscriber<T>) => TeardownLogic) {\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n\n  // HACK: Since TypeScript inherits static properties too, we have to\n  // fight against TypeScript here so Subject can have a different static create signature\n  /**\n   * Creates a new Observable by calling the Observable constructor\n   * @param subscribe the subscriber function to be passed to the Observable constructor\n   * @return A new observable.\n   * @deprecated Use `new Observable()` instead. Will be removed in v8.\n   */\n  static create: (...args: any[]) => any = <T>(subscribe?: (subscriber: Subscriber<T>) => TeardownLogic) => {\n    return new Observable<T>(subscribe);\n  };\n\n  /**\n   * Creates a new Observable, with this Observable instance as the source, and the passed\n   * operator defined as the new observable's operator.\n   * @param operator the operator defining the operation to take on the observable\n   * @return A new observable with the Operator applied.\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\n   * If you have implemented an operator using `lift`, it is recommended that you create an\n   * operator by simply returning `new Observable()` directly. See \"Creating new operators from\n   * scratch\" section here: https://rxjs.dev/guide/operators\n   */\n  lift<R>(operator?: Operator<T, R>): Observable<R> {\n    const observable = new Observable<R>();\n    observable.source = this;\n    observable.operator = operator;\n    return observable;\n  }\n\n  subscribe(observerOrNext?: Partial<Observer<T>> | ((value: T) => void)): Subscription;\n  /** @deprecated Instead of passing separate callback arguments, use an observer argument. Signatures taking separate callback arguments will be removed in v8. Details: https://rxjs.dev/deprecations/subscribe-arguments */\n  subscribe(next?: ((value: T) => void) | null, error?: ((error: any) => void) | null, complete?: (() => void) | null): Subscription;\n  /**\n   * Invokes an execution of an Observable and registers Observer handlers for notifications it will emit.\n   *\n   * <span class=\"informal\">Use it when you have all these Observables, but still nothing is happening.</span>\n   *\n   * `subscribe` is not a regular operator, but a method that calls Observable's internal `subscribe` function. It\n   * might be for example a function that you passed to Observable's constructor, but most of the time it is\n   * a library implementation, which defines what will be emitted by an Observable, and when it be will emitted. This means\n   * that calling `subscribe` is actually the moment when Observable starts its work, not when it is created, as it is often\n   * the thought.\n   *\n   * Apart from starting the execution of an Observable, this method allows you to listen for values\n   * that an Observable emits, as well as for when it completes or errors. You can achieve this in two\n   * of the following ways.\n   *\n   * The first way is creating an object that implements {@link Observer} interface. It should have methods\n   * defined by that interface, but note that it should be just a regular JavaScript object, which you can create\n   * yourself in any way you want (ES6 class, classic function constructor, object literal etc.). In particular, do\n   * not attempt to use any RxJS implementation details to create Observers - you don't need them. Remember also\n   * that your object does not have to implement all methods. If you find yourself creating a method that doesn't\n   * do anything, you can simply omit it. Note however, if the `error` method is not provided and an error happens,\n   * it will be thrown asynchronously. Errors thrown asynchronously cannot be caught using `try`/`catch`. Instead,\n   * use the {@link onUnhandledError} configuration option or use a runtime handler (like `window.onerror` or\n   * `process.on('error)`) to be notified of unhandled errors. Because of this, it's recommended that you provide\n   * an `error` method to avoid missing thrown errors.\n   *\n   * The second way is to give up on Observer object altogether and simply provide callback functions in place of its methods.\n   * This means you can provide three functions as arguments to `subscribe`, where the first function is equivalent\n   * of a `next` method, the second of an `error` method and the third of a `complete` method. Just as in case of an Observer,\n   * if you do not need to listen for something, you can omit a function by passing `undefined` or `null`,\n   * since `subscribe` recognizes these functions by where they were placed in function call. When it comes\n   * to the `error` function, as with an Observer, if not provided, errors emitted by an Observable will be thrown asynchronously.\n   *\n   * You can, however, subscribe with no parameters at all. This may be the case where you're not interested in terminal events\n   * and you also handled emissions internally by using operators (e.g. using `tap`).\n   *\n   * Whichever style of calling `subscribe` you use, in both cases it returns a Subscription object.\n   * This object allows you to call `unsubscribe` on it, which in turn will stop the work that an Observable does and will clean\n   * up all resources that an Observable used. Note that cancelling a subscription will not call `complete` callback\n   * provided to `subscribe` function, which is reserved for a regular completion signal that comes from an Observable.\n   *\n   * Remember that callbacks provided to `subscribe` are not guaranteed to be called asynchronously.\n   * It is an Observable itself that decides when these functions will be called. For example {@link of}\n   * by default emits all its values synchronously. Always check documentation for how given Observable\n   * will behave when subscribed and if its default behavior can be modified with a `scheduler`.\n   *\n   * #### Examples\n   *\n   * Subscribe with an {@link guide/observer Observer}\n   *\n   * ```ts\n   * import { of } from 'rxjs';\n   *\n   * const sumObserver = {\n   *   sum: 0,\n   *   next(value) {\n   *     console.log('Adding: ' + value);\n   *     this.sum = this.sum + value;\n   *   },\n   *   error() {\n   *     // We actually could just remove this method,\n   *     // since we do not really care about errors right now.\n   *   },\n   *   complete() {\n   *     console.log('Sum equals: ' + this.sum);\n   *   }\n   * };\n   *\n   * of(1, 2, 3) // Synchronously emits 1, 2, 3 and then completes.\n   *   .subscribe(sumObserver);\n   *\n   * // Logs:\n   * // 'Adding: 1'\n   * // 'Adding: 2'\n   * // 'Adding: 3'\n   * // 'Sum equals: 6'\n   * ```\n   *\n   * Subscribe with functions ({@link deprecations/subscribe-arguments deprecated})\n   *\n   * ```ts\n   * import { of } from 'rxjs'\n   *\n   * let sum = 0;\n   *\n   * of(1, 2, 3).subscribe(\n   *   value => {\n   *     console.log('Adding: ' + value);\n   *     sum = sum + value;\n   *   },\n   *   undefined,\n   *   () => console.log('Sum equals: ' + sum)\n   * );\n   *\n   * // Logs:\n   * // 'Adding: 1'\n   * // 'Adding: 2'\n   * // 'Adding: 3'\n   * // 'Sum equals: 6'\n   * ```\n   *\n   * Cancel a subscription\n   *\n   * ```ts\n   * import { interval } from 'rxjs';\n   *\n   * const subscription = interval(1000).subscribe({\n   *   next(num) {\n   *     console.log(num)\n   *   },\n   *   complete() {\n   *     // Will not be called, even when cancelling subscription.\n   *     console.log('completed!');\n   *   }\n   * });\n   *\n   * setTimeout(() => {\n   *   subscription.unsubscribe();\n   *   console.log('unsubscribed!');\n   * }, 2500);\n   *\n   * // Logs:\n   * // 0 after 1s\n   * // 1 after 2s\n   * // 'unsubscribed!' after 2.5s\n   * ```\n   *\n   * @param observerOrNext Either an {@link Observer} with some or all callback methods,\n   * or the `next` handler that is called for each value emitted from the subscribed Observable.\n   * @param error A handler for a terminal event resulting from an error. If no error handler is provided,\n   * the error will be thrown asynchronously as unhandled.\n   * @param complete A handler for a terminal event resulting from successful completion.\n   * @return A subscription reference to the registered handlers.\n   */\n  subscribe(\n    observerOrNext?: Partial<Observer<T>> | ((value: T) => void) | null,\n    error?: ((error: any) => void) | null,\n    complete?: (() => void) | null\n  ): Subscription {\n    const subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n\n    errorContext(() => {\n      const { operator, source } = this;\n      subscriber.add(\n        operator\n          ? // We're dealing with a subscription in the\n            // operator chain to one of our lifted operators.\n            operator.call(subscriber, source)\n          : source\n          ? // If `source` has a value, but `operator` does not, something that\n            // had intimate knowledge of our API, like our `Subject`, must have\n            // set it. We're going to just call `_subscribe` directly.\n            this._subscribe(subscriber)\n          : // In all other cases, we're likely wrapping a user-provided initializer\n            // function, so we need to catch errors and handle them appropriately.\n            this._trySubscribe(subscriber)\n      );\n    });\n\n    return subscriber;\n  }\n\n  /** @internal */\n  protected _trySubscribe(sink: Subscriber<T>): TeardownLogic {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      // We don't need to return anything in this case,\n      // because it's just going to try to `add()` to a subscription\n      // above.\n      sink.error(err);\n    }\n  }\n\n  /**\n   * Used as a NON-CANCELLABLE means of subscribing to an observable, for use with\n   * APIs that expect promises, like `async/await`. You cannot unsubscribe from this.\n   *\n   * **WARNING**: Only use this with observables you *know* will complete. If the source\n   * observable does not complete, you will end up with a promise that is hung up, and\n   * potentially all of the state of an async function hanging out in memory. To avoid\n   * this situation, look into adding something like {@link timeout}, {@link take},\n   * {@link takeWhile}, or {@link takeUntil} amongst others.\n   *\n   * #### Example\n   *\n   * ```ts\n   * import { interval, take } from 'rxjs';\n   *\n   * const source$ = interval(1000).pipe(take(4));\n   *\n   * async function getTotal() {\n   *   let total = 0;\n   *\n   *   await source$.forEach(value => {\n   *     total += value;\n   *     console.log('observable -> ' + value);\n   *   });\n   *\n   *   return total;\n   * }\n   *\n   * getTotal().then(\n   *   total => console.log('Total: ' + total)\n   * );\n   *\n   * // Expected:\n   * // 'observable -> 0'\n   * // 'observable -> 1'\n   * // 'observable -> 2'\n   * // 'observable -> 3'\n   * // 'Total: 6'\n   * ```\n   *\n   * @param next A handler for each value emitted by the observable.\n   * @return A promise that either resolves on observable completion or\n   * rejects with the handled error.\n   */\n  forEach(next: (value: T) => void): Promise<void>;\n\n  /**\n   * @param next a handler for each value emitted by the observable\n   * @param promiseCtor a constructor function used to instantiate the Promise\n   * @return a promise that either resolves on observable completion or\n   *  rejects with the handled error\n   * @deprecated Passing a Promise constructor will no longer be available\n   * in upcoming versions of RxJS. This is because it adds weight to the library, for very\n   * little benefit. If you need this functionality, it is recommended that you either\n   * polyfill Promise, or you create an adapter to convert the returned native promise\n   * to whatever promise implementation you wanted. Will be removed in v8.\n   */\n  forEach(next: (value: T) => void, promiseCtor: PromiseConstructorLike): Promise<void>;\n\n  forEach(next: (value: T) => void, promiseCtor?: PromiseConstructorLike): Promise<void> {\n    promiseCtor = getPromiseCtor(promiseCtor);\n\n    return new promiseCtor<void>((resolve, reject) => {\n      const subscriber = new SafeSubscriber<T>({\n        next: (value) => {\n          try {\n            next(value);\n          } catch (err) {\n            reject(err);\n            subscriber.unsubscribe();\n          }\n        },\n        error: reject,\n        complete: resolve,\n      });\n      this.subscribe(subscriber);\n    }) as Promise<void>;\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<any>): TeardownLogic {\n    return this.source?.subscribe(subscriber);\n  }\n\n  /**\n   * An interop point defined by the es7-observable spec https://github.com/zenparsing/es-observable\n   * @return This instance of the observable.\n   */\n  [Symbol_observable]() {\n    return this;\n  }\n\n  /* tslint:disable:max-line-length */\n  pipe(): Observable<T>;\n  pipe<A>(op1: OperatorFunction<T, A>): Observable<A>;\n  pipe<A, B>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>): Observable<B>;\n  pipe<A, B, C>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>): Observable<C>;\n  pipe<A, B, C, D>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>\n  ): Observable<D>;\n  pipe<A, B, C, D, E>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>\n  ): Observable<E>;\n  pipe<A, B, C, D, E, F>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>,\n    op6: OperatorFunction<E, F>\n  ): Observable<F>;\n  pipe<A, B, C, D, E, F, G>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>,\n    op6: OperatorFunction<E, F>,\n    op7: OperatorFunction<F, G>\n  ): Observable<G>;\n  pipe<A, B, C, D, E, F, G, H>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>,\n    op6: OperatorFunction<E, F>,\n    op7: OperatorFunction<F, G>,\n    op8: OperatorFunction<G, H>\n  ): Observable<H>;\n  pipe<A, B, C, D, E, F, G, H, I>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>,\n    op6: OperatorFunction<E, F>,\n    op7: OperatorFunction<F, G>,\n    op8: OperatorFunction<G, H>,\n    op9: OperatorFunction<H, I>\n  ): Observable<I>;\n  pipe<A, B, C, D, E, F, G, H, I>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>,\n    op6: OperatorFunction<E, F>,\n    op7: OperatorFunction<F, G>,\n    op8: OperatorFunction<G, H>,\n    op9: OperatorFunction<H, I>,\n    ...operations: OperatorFunction<any, any>[]\n  ): Observable<unknown>;\n  /* tslint:enable:max-line-length */\n\n  /**\n   * Used to stitch together functional operators into a chain.\n   *\n   * ## Example\n   *\n   * ```ts\n   * import { interval, filter, map, scan } from 'rxjs';\n   *\n   * interval(1000)\n   *   .pipe(\n   *     filter(x => x % 2 === 0),\n   *     map(x => x + x),\n   *     scan((acc, x) => acc + x)\n   *   )\n   *   .subscribe(x => console.log(x));\n   * ```\n   *\n   * @return The Observable result of all the operators having been called\n   * in the order they were passed in.\n   */\n  pipe(...operations: OperatorFunction<any, any>[]): Observable<any> {\n    return pipeFromArray(operations)(this);\n  }\n\n  /* tslint:disable:max-line-length */\n  /** @deprecated Replaced with {@link firstValueFrom} and {@link lastValueFrom}. Will be removed in v8. Details: https://rxjs.dev/deprecations/to-promise */\n  toPromise(): Promise<T | undefined>;\n  /** @deprecated Replaced with {@link firstValueFrom} and {@link lastValueFrom}. Will be removed in v8. Details: https://rxjs.dev/deprecations/to-promise */\n  toPromise(PromiseCtor: typeof Promise): Promise<T | undefined>;\n  /** @deprecated Replaced with {@link firstValueFrom} and {@link lastValueFrom}. Will be removed in v8. Details: https://rxjs.dev/deprecations/to-promise */\n  toPromise(PromiseCtor: PromiseConstructorLike): Promise<T | undefined>;\n  /* tslint:enable:max-line-length */\n\n  /**\n   * Subscribe to this Observable and get a Promise resolving on\n   * `complete` with the last emission (if any).\n   *\n   * **WARNING**: Only use this with observables you *know* will complete. If the source\n   * observable does not complete, you will end up with a promise that is hung up, and\n   * potentially all of the state of an async function hanging out in memory. To avoid\n   * this situation, look into adding something like {@link timeout}, {@link take},\n   * {@link takeWhile}, or {@link takeUntil} amongst others.\n   *\n   * @param [promiseCtor] a constructor function used to instantiate\n   * the Promise\n   * @return A Promise that resolves with the last value emit, or\n   * rejects on an error. If there were no emissions, Promise\n   * resolves with undefined.\n   * @deprecated Replaced with {@link firstValueFrom} and {@link lastValueFrom}. Will be removed in v8. Details: https://rxjs.dev/deprecations/to-promise\n   */\n  toPromise(promiseCtor?: PromiseConstructorLike): Promise<T | undefined> {\n    promiseCtor = getPromiseCtor(promiseCtor);\n\n    return new promiseCtor((resolve, reject) => {\n      let value: T | undefined;\n      this.subscribe(\n        (x: T) => (value = x),\n        (err: any) => reject(err),\n        () => resolve(value)\n      );\n    }) as Promise<T | undefined>;\n  }\n}\n\n/**\n * Decides between a passed promise constructor from consuming code,\n * A default configured promise constructor, and the native promise\n * constructor and returns it. If nothing can be found, it will throw\n * an error.\n * @param promiseCtor The optional promise constructor to passed by consuming code\n */\nfunction getPromiseCtor(promiseCtor: PromiseConstructorLike | undefined) {\n  return promiseCtor ?? config.Promise ?? Promise;\n}\n\nfunction isObserver<T>(value: any): value is Observer<T> {\n  return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\n\nfunction isSubscriber<T>(value: any): value is Subscriber<T> {\n  return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n", "import { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { OperatorFunction } from '../types';\nimport { isFunction } from './isFunction';\n\n/**\n * Used to determine if an object is an Observable with a lift function.\n */\nexport function hasLift(source: any): source is { lift: InstanceType<typeof Observable>['lift'] } {\n  return isFunction(source?.lift);\n}\n\n/**\n * Creates an `OperatorFunction`. Used to define operators throughout the library in a concise way.\n * @param init The logic to connect the liftedSource to the subscriber at the moment of subscription.\n */\nexport function operate<T, R>(\n  init: (liftedSource: Observable<T>, subscriber: Subscriber<R>) => (() => void) | void\n): OperatorFunction<T, R> {\n  return (source: Observable<T>) => {\n    if (hasLift(source)) {\n      return source.lift(function (this: Subscriber<R>, liftedSource: Observable<T>) {\n        try {\n          return init(liftedSource, this);\n        } catch (err) {\n          this.error(err);\n        }\n      });\n    }\n    throw new TypeError('Unable to lift unknown Observable type');\n  };\n}\n", "import { Subscriber } from '../Subscriber';\n\n/**\n * Creates an instance of an `OperatorSubscriber`.\n * @param destination The downstream subscriber.\n * @param onNext Handles next values, only called if this subscriber is not stopped or closed. Any\n * error that occurs in this function is caught and sent to the `error` method of this subscriber.\n * @param onError Handles errors from the subscription, any errors that occur in this handler are caught\n * and send to the `destination` error handler.\n * @param onComplete Handles completion notification from the subscription. Any errors that occur in\n * this handler are sent to the `destination` error handler.\n * @param onFinalize Additional teardown logic here. This will only be called on teardown if the\n * subscriber itself is not already closed. This is called after all other teardown logic is executed.\n */\nexport function createOperatorSubscriber<T>(\n  destination: Subscriber<any>,\n  onNext?: (value: T) => void,\n  onComplete?: () => void,\n  onError?: (err: any) => void,\n  onFinalize?: () => void\n): Subscriber<T> {\n  return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\n\n/**\n * A generic helper for allowing operators to be created with a Subscriber and\n * use closures to capture necessary state from the operator function itself.\n */\nexport class OperatorSubscriber<T> extends Subscriber<T> {\n  /**\n   * Creates an instance of an `OperatorSubscriber`.\n   * @param destination The downstream subscriber.\n   * @param onNext Handles next values, only called if this subscriber is not stopped or closed. Any\n   * error that occurs in this function is caught and sent to the `error` method of this subscriber.\n   * @param onError Handles errors from the subscription, any errors that occur in this handler are caught\n   * and send to the `destination` error handler.\n   * @param onComplete Handles completion notification from the subscription. Any errors that occur in\n   * this handler are sent to the `destination` error handler.\n   * @param onFinalize Additional finalization logic here. This will only be called on finalization if the\n   * subscriber itself is not already closed. This is called after all other finalization logic is executed.\n   * @param shouldUnsubscribe An optional check to see if an unsubscribe call should truly unsubscribe.\n   * NOTE: This currently **ONLY** exists to support the strange behavior of {@link groupBy}, where unsubscription\n   * to the resulting observable does not actually disconnect from the source if there are active subscriptions\n   * to any grouped observable. (DO NOT EXPOSE OR USE EXTERNALLY!!!)\n   */\n  constructor(\n    destination: Subscriber<any>,\n    onNext?: (value: T) => void,\n    onComplete?: () => void,\n    onError?: (err: any) => void,\n    private onFinalize?: () => void,\n    private shouldUnsubscribe?: () => boolean\n  ) {\n    // It's important - for performance reasons - that all of this class's\n    // members are initialized and that they are always initialized in the same\n    // order. This will ensure that all OperatorSubscriber instances have the\n    // same hidden class in V8. This, in turn, will help keep the number of\n    // hidden classes involved in property accesses within the base class as\n    // low as possible. If the number of hidden classes involved exceeds four,\n    // the property accesses will become megamorphic and performance penalties\n    // will be incurred - i.e. inline caches won't be used.\n    //\n    // The reasons for ensuring all instances have the same hidden class are\n    // further discussed in this blog post from Benedikt Meurer:\n    // https://benediktmeurer.de/2018/03/23/impact-of-polymorphism-on-component-based-frameworks-like-react/\n    super(destination);\n    this._next = onNext\n      ? function (this: OperatorSubscriber<T>, value: T) {\n          try {\n            onNext(value);\n          } catch (err) {\n            destination.error(err);\n          }\n        }\n      : super._next;\n    this._error = onError\n      ? function (this: OperatorSubscriber<T>, err: any) {\n          try {\n            onError(err);\n          } catch (err) {\n            // Send any errors that occur down stream.\n            destination.error(err);\n          } finally {\n            // Ensure finalization.\n            this.unsubscribe();\n          }\n        }\n      : super._error;\n    this._complete = onComplete\n      ? function (this: OperatorSubscriber<T>) {\n          try {\n            onComplete();\n          } catch (err) {\n            // Send any errors that occur down stream.\n            destination.error(err);\n          } finally {\n            // Ensure finalization.\n            this.unsubscribe();\n          }\n        }\n      : super._complete;\n  }\n\n  unsubscribe() {\n    if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n      const { closed } = this;\n      super.unsubscribe();\n      // Execute additional teardown if we have any and we didn't already do so.\n      !closed && this.onFinalize?.();\n    }\n  }\n}\n", "import { ConnectableObservable } from '../observable/ConnectableObservable';\nimport { Subscription } from '../Subscription';\nimport { MonoTypeOperatorFunction } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * Make a {@link ConnectableObservable} behave like a ordinary observable and automates the way\n * you can connect to it.\n *\n * Internally it counts the subscriptions to the observable and subscribes (only once) to the source if\n * the number of subscriptions is larger than 0. If the number of subscriptions is smaller than 1, it\n * unsubscribes from the source. This way you can make sure that everything before the *published*\n * refCount has only a single subscription independently of the number of subscribers to the target\n * observable.\n *\n * Note that using the {@link share} operator is exactly the same as using the `multicast(() => new Subject())` operator\n * (making the observable hot) and the *refCount* operator in a sequence.\n *\n * ![](refCount.png)\n *\n * ## Example\n *\n * In the following example there are two intervals turned into connectable observables\n * by using the *publish* operator. The first one uses the *refCount* operator, the\n * second one does not use it. You will notice that a connectable observable does nothing\n * until you call its connect function.\n *\n * ```ts\n * import { interval, tap, publish, refCount } from 'rxjs';\n *\n * // Turn the interval observable into a ConnectableObservable (hot)\n * const refCountInterval = interval(400).pipe(\n *   tap(num => console.log(`refCount ${ num }`)),\n *   publish(),\n *   refCount()\n * );\n *\n * const publishedInterval = interval(400).pipe(\n *   tap(num => console.log(`publish ${ num }`)),\n *   publish()\n * );\n *\n * refCountInterval.subscribe();\n * refCountInterval.subscribe();\n * // 'refCount 0' -----> 'refCount 1' -----> etc\n * // All subscriptions will receive the same value and the tap (and\n * // every other operator) before the `publish` operator will be executed\n * // only once per event independently of the number of subscriptions.\n *\n * publishedInterval.subscribe();\n * // Nothing happens until you call .connect() on the observable.\n * ```\n *\n * @return A function that returns an Observable that automates the connection\n * to ConnectableObservable.\n * @see {@link ConnectableObservable}\n * @see {@link share}\n * @see {@link publish}\n * @deprecated Replaced with the {@link share} operator. How `share` is used\n * will depend on the connectable observable you created just prior to the\n * `refCount` operator.\n * Details: https://rxjs.dev/deprecations/multicasting\n */\nexport function refCount<T>(): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    let connection: Subscription | null = null;\n\n    (source as any)._refCount++;\n\n    const refCounter = createOperatorSubscriber(subscriber, undefined, undefined, undefined, () => {\n      if (!source || (source as any)._refCount <= 0 || 0 < --(source as any)._refCount) {\n        connection = null;\n        return;\n      }\n\n      ///\n      // Compare the local RefCountSubscriber's connection Subscription to the\n      // connection Subscription on the shared ConnectableObservable. In cases\n      // where the ConnectableObservable source synchronously emits values, and\n      // the RefCountSubscriber's downstream Observers synchronously unsubscribe,\n      // execution continues to here before the RefCountOperator has a chance to\n      // supply the RefCountSubscriber with the shared connection Subscription.\n      // For example:\n      // ```\n      // range(0, 10).pipe(\n      //   publish(),\n      //   refCount(),\n      //   take(5),\n      // )\n      // .subscribe();\n      // ```\n      // In order to account for this case, RefCountSubscriber should only dispose\n      // the ConnectableObservable's shared connection Subscription if the\n      // connection Subscription exists, *and* either:\n      //   a. RefCountSubscriber doesn't have a reference to the shared connection\n      //      Subscription yet, or,\n      //   b. RefCountSubscriber's connection Subscription reference is identical\n      //      to the shared connection Subscription\n      ///\n\n      const sharedConnection = (source as any)._connection;\n      const conn = connection;\n      connection = null;\n\n      if (sharedConnection && (!conn || sharedConnection === conn)) {\n        sharedConnection.unsubscribe();\n      }\n\n      subscriber.unsubscribe();\n    });\n\n    source.subscribe(refCounter);\n\n    if (!refCounter.closed) {\n      connection = (source as ConnectableObservable<T>).connect();\n    }\n  });\n}\n", "import { Subject } from '../Subject';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { refCount as higherOrderRefCount } from '../operators/refCount';\nimport { createOperatorSubscriber } from '../operators/OperatorSubscriber';\nimport { hasLift } from '../util/lift';\n\n/**\n * @class ConnectableObservable<T>\n * @deprecated Will be removed in v8. Use {@link connectable} to create a connectable observable.\n * If you are using the `refCount` method of `ConnectableObservable`, use the {@link share} operator\n * instead.\n * Details: https://rxjs.dev/deprecations/multicasting\n */\nexport class ConnectableObservable<T> extends Observable<T> {\n  protected _subject: Subject<T> | null = null;\n  protected _refCount: number = 0;\n  protected _connection: Subscription | null = null;\n\n  /**\n   * @param source The source observable\n   * @param subjectFactory The factory that creates the subject used internally.\n   * @deprecated Will be removed in v8. Use {@link connectable} to create a connectable observable.\n   * `new ConnectableObservable(source, factory)` is equivalent to\n   * `connectable(source, { connector: factory })`.\n   * When the `refCount()` method is needed, the {@link share} operator should be used instead:\n   * `new ConnectableObservable(source, factory).refCount()` is equivalent to\n   * `source.pipe(share({ connector: factory }))`.\n   * Details: https://rxjs.dev/deprecations/multicasting\n   */\n  constructor(public source: Observable<T>, protected subjectFactory: () => Subject<T>) {\n    super();\n    // If we have lift, monkey patch that here. This is done so custom observable\n    // types will compose through multicast. Otherwise the resulting observable would\n    // simply be an instance of `ConnectableObservable`.\n    if (hasLift(source)) {\n      this.lift = source.lift;\n    }\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<T>) {\n    return this.getSubject().subscribe(subscriber);\n  }\n\n  protected getSubject(): Subject<T> {\n    const subject = this._subject;\n    if (!subject || subject.isStopped) {\n      this._subject = this.subjectFactory();\n    }\n    return this._subject!;\n  }\n\n  protected _teardown() {\n    this._refCount = 0;\n    const { _connection } = this;\n    this._subject = this._connection = null;\n    _connection?.unsubscribe();\n  }\n\n  /**\n   * @deprecated {@link ConnectableObservable} will be removed in v8. Use {@link connectable} instead.\n   * Details: https://rxjs.dev/deprecations/multicasting\n   */\n  connect(): Subscription {\n    let connection = this._connection;\n    if (!connection) {\n      connection = this._connection = new Subscription();\n      const subject = this.getSubject();\n      connection.add(\n        this.source.subscribe(\n          createOperatorSubscriber(\n            subject as any,\n            undefined,\n            () => {\n              this._teardown();\n              subject.complete();\n            },\n            (err) => {\n              this._teardown();\n              subject.error(err);\n            },\n            () => this._teardown()\n          )\n        )\n      );\n\n      if (connection.closed) {\n        this._connection = null;\n        connection = Subscription.EMPTY;\n      }\n    }\n    return connection;\n  }\n\n  /**\n   * @deprecated {@link ConnectableObservable} will be removed in v8. Use the {@link share} operator instead.\n   * Details: https://rxjs.dev/deprecations/multicasting\n   */\n  refCount(): Observable<T> {\n    return higherOrderRefCount()(this) as Observable<T>;\n  }\n}\n", "import { TimestampProvider } from '../types';\n\ninterface PerformanceTimestampProvider extends TimestampProvider {\n  delegate: TimestampProvider | undefined;\n}\n\nexport const performanceTimestampProvider: PerformanceTimestampProvider = {\n  now() {\n    // Use the variable rather than `this` so that the function can be called\n    // without being bound to the provider.\n    return (performanceTimestampProvider.delegate || performance).now();\n  },\n  delegate: undefined,\n};\n", "import { Subscription } from '../Subscription';\n\ninterface AnimationFrameProvider {\n  schedule(callback: FrameRequestCallback): Subscription;\n  requestAnimationFrame: typeof requestAnimationFrame;\n  cancelAnimationFrame: typeof cancelAnimationFrame;\n  delegate:\n    | {\n        requestAnimationFrame: typeof requestAnimationFrame;\n        cancelAnimationFrame: typeof cancelAnimationFrame;\n      }\n    | undefined;\n}\n\nexport const animationFrameProvider: AnimationFrameProvider = {\n  // When accessing the delegate, use the variable rather than `this` so that\n  // the functions can be called without being bound to the provider.\n  schedule(callback) {\n    let request = requestAnimationFrame;\n    let cancel: typeof cancelAnimationFrame | undefined = cancelAnimationFrame;\n    const { delegate } = animationFrameProvider;\n    if (delegate) {\n      request = delegate.requestAnimationFrame;\n      cancel = delegate.cancelAnimationFrame;\n    }\n    const handle = request((timestamp) => {\n      // Clear the cancel function. The request has been fulfilled, so\n      // attempting to cancel the request upon unsubscription would be\n      // pointless.\n      cancel = undefined;\n      callback(timestamp);\n    });\n    return new Subscription(() => cancel?.(handle));\n  },\n  requestAnimationFrame(...args) {\n    const { delegate } = animationFrameProvider;\n    return (delegate?.requestAnimationFrame || requestAnimationFrame)(...args);\n  },\n  cancelAnimationFrame(...args) {\n    const { delegate } = animationFrameProvider;\n    return (delegate?.cancelAnimationFrame || cancelAnimationFrame)(...args);\n  },\n  delegate: undefined,\n};\n", "import { Observable } from '../../Observable';\nimport { TimestampProvider } from '../../types';\nimport { performanceTimestampProvider } from '../../scheduler/performanceTimestampProvider';\nimport { animationFrameProvider } from '../../scheduler/animationFrameProvider';\n\n/**\n * An observable of animation frames\n *\n * Emits the amount of time elapsed since subscription and the timestamp on each animation frame.\n * Defaults to milliseconds provided to the requestAnimationFrame's callback. Does not end on its own.\n *\n * Every subscription will start a separate animation loop. Since animation frames are always scheduled\n * by the browser to occur directly before a repaint, scheduling more than one animation frame synchronously\n * should not be much different or have more overhead than looping over an array of events during\n * a single animation frame. However, if for some reason the developer would like to ensure the\n * execution of animation-related handlers are all executed during the same task by the engine,\n * the `share` operator can be used.\n *\n * This is useful for setting up animations with RxJS.\n *\n * ## Examples\n *\n * Tweening a div to move it on the screen\n *\n * ```ts\n * import { animationFrames, map, takeWhile, endWith } from 'rxjs';\n *\n * function tween(start: number, end: number, duration: number) {\n *   const diff = end - start;\n *   return animationFrames().pipe(\n *     // Figure out what percentage of time has passed\n *     map(({ elapsed }) => elapsed / duration),\n *     // Take the vector while less than 100%\n *     takeWhile(v => v < 1),\n *     // Finish with 100%\n *     endWith(1),\n *     // Calculate the distance traveled between start and end\n *     map(v => v * diff + start)\n *   );\n * }\n *\n * // Setup a div for us to move around\n * const div = document.createElement('div');\n * document.body.appendChild(div);\n * div.style.position = 'absolute';\n * div.style.width = '40px';\n * div.style.height = '40px';\n * div.style.backgroundColor = 'lime';\n * div.style.transform = 'translate3d(10px, 0, 0)';\n *\n * tween(10, 200, 4000).subscribe(x => {\n *   div.style.transform = `translate3d(${ x }px, 0, 0)`;\n * });\n * ```\n *\n * Providing a custom timestamp provider\n *\n * ```ts\n * import { animationFrames, TimestampProvider } from 'rxjs';\n *\n * // A custom timestamp provider\n * let now = 0;\n * const customTSProvider: TimestampProvider = {\n *   now() { return now++; }\n * };\n *\n * const source$ = animationFrames(customTSProvider);\n *\n * // Log increasing numbers 0...1...2... on every animation frame.\n * source$.subscribe(({ elapsed }) => console.log(elapsed));\n * ```\n *\n * @param timestampProvider An object with a `now` method that provides a numeric timestamp\n */\nexport function animationFrames(timestampProvider?: TimestampProvider) {\n  return timestampProvider ? animationFramesFactory(timestampProvider) : DEFAULT_ANIMATION_FRAMES;\n}\n\n/**\n * Does the work of creating the observable for `animationFrames`.\n * @param timestampProvider The timestamp provider to use to create the observable\n */\nfunction animationFramesFactory(timestampProvider?: TimestampProvider) {\n  return new Observable<{ timestamp: number; elapsed: number }>((subscriber) => {\n    // If no timestamp provider is specified, use performance.now() - as it\n    // will return timestamps 'compatible' with those passed to the run\n    // callback and won't be affected by NTP adjustments, etc.\n    const provider = timestampProvider || performanceTimestampProvider;\n\n    // Capture the start time upon subscription, as the run callback can remain\n    // queued for a considerable period of time and the elapsed time should\n    // represent the time elapsed since subscription - not the time since the\n    // first rendered animation frame.\n    const start = provider.now();\n\n    let id = 0;\n    const run = () => {\n      if (!subscriber.closed) {\n        id = animationFrameProvider.requestAnimationFrame((timestamp: DOMHighResTimeStamp | number) => {\n          id = 0;\n          // Use the provider's timestamp to calculate the elapsed time. Note that\n          // this means - if the caller hasn't passed a provider - that\n          // performance.now() will be used instead of the timestamp that was\n          // passed to the run callback. The reason for this is that the timestamp\n          // passed to the callback can be earlier than the start time, as it\n          // represents the time at which the browser decided it would render any\n          // queued frames - and that time can be earlier the captured start time.\n          const now = provider.now();\n          subscriber.next({\n            timestamp: timestampProvider ? now : timestamp,\n            elapsed: now - start,\n          });\n          run();\n        });\n      }\n    };\n\n    run();\n\n    return () => {\n      if (id) {\n        animationFrameProvider.cancelAnimationFrame(id);\n      }\n    };\n  });\n}\n\n/**\n * In the common case, where the timestamp provided by the rAF API is used,\n * we use this shared observable to reduce overhead.\n */\nconst DEFAULT_ANIMATION_FRAMES = animationFramesFactory();\n", "import { createErrorClass } from './createErrorClass';\n\nexport interface ObjectUnsubscribedError extends Error {}\n\nexport interface ObjectUnsubscribedErrorCtor {\n  /**\n   * @deprecated Internal implementation detail. Do not construct error instances.\n   * Cannot be tagged as internal: https://github.com/ReactiveX/rxjs/issues/6269\n   */\n  new (): ObjectUnsubscribedError;\n}\n\n/**\n * An error thrown when an action is invalid because the object has been\n * unsubscribed.\n *\n * @see {@link Subject}\n * @see {@link BehaviorSubject}\n *\n * @class ObjectUnsubscribedError\n */\nexport const ObjectUnsubscribedError: ObjectUnsubscribedErrorCtor = createErrorClass(\n  (_super) =>\n    function ObjectUnsubscribedErrorImpl(this: any) {\n      _super(this);\n      this.name = 'ObjectUnsubscribedError';\n      this.message = 'object unsubscribed';\n    }\n);\n", "import { Operator } from './Operator';\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { Observer, SubscriptionLike, TeardownLogic } from './types';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\n\n/**\n * A Subject is a special type of Observable that allows values to be\n * multicasted to many Observers. Subjects are like EventEmitters.\n *\n * Every Subject is an Observable and an Observer. You can subscribe to a\n * Subject, and you can call next to feed values as well as error and complete.\n */\nexport class Subject<T> extends Observable<T> implements SubscriptionLike {\n  closed = false;\n\n  private currentObservers: Observer<T>[] | null = null;\n\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  observers: Observer<T>[] = [];\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  isStopped = false;\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  hasError = false;\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  thrownError: any = null;\n\n  /**\n   * Creates a \"subject\" by basically gluing an observer to an observable.\n   *\n   * @deprecated Recommended you do not use. Will be removed at some point in the future. Plans for replacement still under discussion.\n   */\n  static create: (...args: any[]) => any = <T>(destination: Observer<T>, source: Observable<T>): AnonymousSubject<T> => {\n    return new AnonymousSubject<T>(destination, source);\n  };\n\n  constructor() {\n    // NOTE: This must be here to obscure Observable's constructor.\n    super();\n  }\n\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  lift<R>(operator: Operator<T, R>): Observable<R> {\n    const subject = new AnonymousSubject(this, this);\n    subject.operator = operator as any;\n    return subject as any;\n  }\n\n  /** @internal */\n  protected _throwIfClosed() {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n  }\n\n  next(value: T) {\n    errorContext(() => {\n      this._throwIfClosed();\n      if (!this.isStopped) {\n        if (!this.currentObservers) {\n          this.currentObservers = Array.from(this.observers);\n        }\n        for (const observer of this.currentObservers) {\n          observer.next(value);\n        }\n      }\n    });\n  }\n\n  error(err: any) {\n    errorContext(() => {\n      this._throwIfClosed();\n      if (!this.isStopped) {\n        this.hasError = this.isStopped = true;\n        this.thrownError = err;\n        const { observers } = this;\n        while (observers.length) {\n          observers.shift()!.error(err);\n        }\n      }\n    });\n  }\n\n  complete() {\n    errorContext(() => {\n      this._throwIfClosed();\n      if (!this.isStopped) {\n        this.isStopped = true;\n        const { observers } = this;\n        while (observers.length) {\n          observers.shift()!.complete();\n        }\n      }\n    });\n  }\n\n  unsubscribe() {\n    this.isStopped = this.closed = true;\n    this.observers = this.currentObservers = null!;\n  }\n\n  get observed() {\n    return this.observers?.length > 0;\n  }\n\n  /** @internal */\n  protected _trySubscribe(subscriber: Subscriber<T>): TeardownLogic {\n    this._throwIfClosed();\n    return super._trySubscribe(subscriber);\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<T>): Subscription {\n    this._throwIfClosed();\n    this._checkFinalizedStatuses(subscriber);\n    return this._innerSubscribe(subscriber);\n  }\n\n  /** @internal */\n  protected _innerSubscribe(subscriber: Subscriber<any>) {\n    const { hasError, isStopped, observers } = this;\n    if (hasError || isStopped) {\n      return EMPTY_SUBSCRIPTION;\n    }\n    this.currentObservers = null;\n    observers.push(subscriber);\n    return new Subscription(() => {\n      this.currentObservers = null;\n      arrRemove(observers, subscriber);\n    });\n  }\n\n  /** @internal */\n  protected _checkFinalizedStatuses(subscriber: Subscriber<any>) {\n    const { hasError, thrownError, isStopped } = this;\n    if (hasError) {\n      subscriber.error(thrownError);\n    } else if (isStopped) {\n      subscriber.complete();\n    }\n  }\n\n  /**\n   * Creates a new Observable with this Subject as the source. You can do this\n   * to create custom Observer-side logic of the Subject and conceal it from\n   * code that uses the Observable.\n   * @return Observable that this Subject casts to.\n   */\n  asObservable(): Observable<T> {\n    const observable: any = new Observable<T>();\n    observable.source = this;\n    return observable;\n  }\n}\n\nexport class AnonymousSubject<T> extends Subject<T> {\n  constructor(\n    /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n    public destination?: Observer<T>,\n    source?: Observable<T>\n  ) {\n    super();\n    this.source = source;\n  }\n\n  next(value: T) {\n    this.destination?.next?.(value);\n  }\n\n  error(err: any) {\n    this.destination?.error?.(err);\n  }\n\n  complete() {\n    this.destination?.complete?.();\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<T>): Subscription {\n    return this.source?.subscribe(subscriber) ?? EMPTY_SUBSCRIPTION;\n  }\n}\n", "import { Subject } from './Subject';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\n\n/**\n * A variant of Subject that requires an initial value and emits its current\n * value whenever it is subscribed to.\n */\nexport class BehaviorSubject<T> extends Subject<T> {\n  constructor(private _value: T) {\n    super();\n  }\n\n  get value(): T {\n    return this.getValue();\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<T>): Subscription {\n    const subscription = super._subscribe(subscriber);\n    !subscription.closed && subscriber.next(this._value);\n    return subscription;\n  }\n\n  getValue(): T {\n    const { hasError, thrownError, _value } = this;\n    if (hasError) {\n      throw thrownError;\n    }\n    this._throwIfClosed();\n    return _value;\n  }\n\n  next(value: T): void {\n    super.next((this._value = value));\n  }\n}\n", "import { TimestampProvider } from '../types';\n\ninterface DateTimestampProvider extends TimestampProvider {\n  delegate: TimestampProvider | undefined;\n}\n\nexport const dateTimestampProvider: DateTimestampProvider = {\n  now() {\n    // Use the variable rather than `this` so that the function can be called\n    // without being bound to the provider.\n    return (dateTimestampProvider.delegate || Date).now();\n  },\n  delegate: undefined,\n};\n", "import { Subject } from './Subject';\nimport { TimestampProvider } from './types';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { dateTimestampProvider } from './scheduler/dateTimestampProvider';\n\n/**\n * A variant of {@link Subject} that \"replays\" old values to new subscribers by emitting them when they first subscribe.\n *\n * `ReplaySubject` has an internal buffer that will store a specified number of values that it has observed. Like `Subject`,\n * `ReplaySubject` \"observes\" values by having them passed to its `next` method. When it observes a value, it will store that\n * value for a time determined by the configuration of the `ReplaySubject`, as passed to its constructor.\n *\n * When a new subscriber subscribes to the `ReplaySubject` instance, it will synchronously emit all values in its buffer in\n * a First-In-First-Out (FIFO) manner. The `ReplaySubject` will also complete, if it has observed completion; and it will\n * error if it has observed an error.\n *\n * There are two main configuration items to be concerned with:\n *\n * 1. `bufferSize` - This will determine how many items are stored in the buffer, defaults to infinite.\n * 2. `windowTime` - The amount of time to hold a value in the buffer before removing it from the buffer.\n *\n * Both configurations may exist simultaneously. So if you would like to buffer a maximum of 3 values, as long as the values\n * are less than 2 seconds old, you could do so with a `new ReplaySubject(3, 2000)`.\n *\n * ### Differences with BehaviorSubject\n *\n * `BehaviorSubject` is similar to `new ReplaySubject(1)`, with a couple of exceptions:\n *\n * 1. `BehaviorSubject` comes \"primed\" with a single value upon construction.\n * 2. `ReplaySubject` will replay values, even after observing an error, where `BehaviorSubject` will not.\n *\n * @see {@link Subject}\n * @see {@link BehaviorSubject}\n * @see {@link shareReplay}\n */\nexport class ReplaySubject<T> extends Subject<T> {\n  private _buffer: (T | number)[] = [];\n  private _infiniteTimeWindow = true;\n\n  /**\n   * @param _bufferSize The size of the buffer to replay on subscription\n   * @param _windowTime The amount of time the buffered items will stay buffered\n   * @param _timestampProvider An object with a `now()` method that provides the current timestamp. This is used to\n   * calculate the amount of time something has been buffered.\n   */\n  constructor(\n    private _bufferSize = Infinity,\n    private _windowTime = Infinity,\n    private _timestampProvider: TimestampProvider = dateTimestampProvider\n  ) {\n    super();\n    this._infiniteTimeWindow = _windowTime === Infinity;\n    this._bufferSize = Math.max(1, _bufferSize);\n    this._windowTime = Math.max(1, _windowTime);\n  }\n\n  next(value: T): void {\n    const { isStopped, _buffer, _infiniteTimeWindow, _timestampProvider, _windowTime } = this;\n    if (!isStopped) {\n      _buffer.push(value);\n      !_infiniteTimeWindow && _buffer.push(_timestampProvider.now() + _windowTime);\n    }\n    this._trimBuffer();\n    super.next(value);\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<T>): Subscription {\n    this._throwIfClosed();\n    this._trimBuffer();\n\n    const subscription = this._innerSubscribe(subscriber);\n\n    const { _infiniteTimeWindow, _buffer } = this;\n    // We use a copy here, so reentrant code does not mutate our array while we're\n    // emitting it to a new subscriber.\n    const copy = _buffer.slice();\n    for (let i = 0; i < copy.length && !subscriber.closed; i += _infiniteTimeWindow ? 1 : 2) {\n      subscriber.next(copy[i] as T);\n    }\n\n    this._checkFinalizedStatuses(subscriber);\n\n    return subscription;\n  }\n\n  private _trimBuffer() {\n    const { _bufferSize, _timestampProvider, _buffer, _infiniteTimeWindow } = this;\n    // If we don't have an infinite buffer size, and we're over the length,\n    // use splice to truncate the old buffer values off. Note that we have to\n    // double the size for instances where we're not using an infinite time window\n    // because we're storing the values and the timestamps in the same array.\n    const adjustedBufferSize = (_infiniteTimeWindow ? 1 : 2) * _bufferSize;\n    _bufferSize < Infinity && adjustedBufferSize < _buffer.length && _buffer.splice(0, _buffer.length - adjustedBufferSize);\n\n    // Now, if we're not in an infinite time window, remove all values where the time is\n    // older than what is allowed.\n    if (!_infiniteTimeWindow) {\n      const now = _timestampProvider.now();\n      let last = 0;\n      // Search the array for the first timestamp that isn't expired and\n      // truncate the buffer up to that point.\n      for (let i = 1; i < _buffer.length && (_buffer[i] as number) <= now; i += 2) {\n        last = i;\n      }\n      last && _buffer.splice(0, last + 1);\n    }\n  }\n}\n", "import { Subject } from './Subject';\nimport { Subscriber } from './Subscriber';\n\n/**\n * A variant of Subject that only emits a value when it completes. It will emit\n * its latest value to all its observers on completion.\n */\nexport class AsyncSubject<T> extends Subject<T> {\n  private _value: T | null = null;\n  private _hasValue = false;\n  private _isComplete = false;\n\n  /** @internal */\n  protected _checkFinalizedStatuses(subscriber: Subscriber<T>) {\n    const { hasError, _hasValue, _value, thrownError, isStopped, _isComplete } = this;\n    if (hasError) {\n      subscriber.error(thrownError);\n    } else if (isStopped || _isComplete) {\n      _hasValue && subscriber.next(_value!);\n      subscriber.complete();\n    }\n  }\n\n  next(value: T): void {\n    if (!this.isStopped) {\n      this._value = value;\n      this._hasValue = true;\n    }\n  }\n\n  complete(): void {\n    const { _hasValue, _value, _isComplete } = this;\n    if (!_isComplete) {\n      this._isComplete = true;\n      _hasValue && super.next(_value!);\n      super.complete();\n    }\n  }\n}\n", "import { Scheduler } from '../Scheduler';\nimport { Subscription } from '../Subscription';\nimport { SchedulerAction } from '../types';\n\n/**\n * A unit of work to be executed in a `scheduler`. An action is typically\n * created from within a {@link SchedulerLike} and an RxJS user does not need to concern\n * themselves about creating and manipulating an Action.\n *\n * ```ts\n * class Action<T> extends Subscription {\n *   new (scheduler: Scheduler, work: (state?: T) => void);\n *   schedule(state?: T, delay: number = 0): Subscription;\n * }\n * ```\n */\nexport class Action<T> extends Subscription {\n  constructor(scheduler: Scheduler, work: (this: SchedulerAction<T>, state?: T) => void) {\n    super();\n  }\n  /**\n   * Schedules this action on its parent {@link SchedulerLike} for execution. May be passed\n   * some context object, `state`. May happen at some point in the future,\n   * according to the `delay` parameter, if specified.\n   * @param state Some contextual data that the `work` function uses when called by the\n   * Scheduler.\n   * @param delay Time to wait before executing the work, where the time unit is implicit\n   * and defined by the Scheduler.\n   * @return A subscription in order to be able to unsubscribe the scheduled work.\n   */\n  public schedule(state?: T, delay: number = 0): Subscription {\n    return this;\n  }\n}\n", "import type { TimerHandle } from './timerHandle';\ntype SetIntervalFunction = (handler: () => void, timeout?: number, ...args: any[]) => TimerHandle;\ntype ClearIntervalFunction = (handle: TimerHandle) => void;\n\ninterface IntervalProvider {\n  setInterval: SetIntervalFunction;\n  clearInterval: ClearIntervalFunction;\n  delegate:\n    | {\n        setInterval: SetIntervalFunction;\n        clearInterval: ClearIntervalFunction;\n      }\n    | undefined;\n}\n\nexport const intervalProvider: IntervalProvider = {\n  // When accessing the delegate, use the variable rather than `this` so that\n  // the functions can be called without being bound to the provider.\n  setInterval(handler: () => void, timeout?: number, ...args) {\n    const { delegate } = intervalProvider;\n    if (delegate?.setInterval) {\n      return delegate.setInterval(handler, timeout, ...args);\n    }\n    return setInterval(handler, timeout, ...args);\n  },\n  clearInterval(handle) {\n    const { delegate } = intervalProvider;\n    return (delegate?.clearInterval || clearInterval)(handle as any);\n  },\n  delegate: undefined,\n};\n", "import { Action } from './Action';\nimport { SchedulerAction } from '../types';\nimport { Subscription } from '../Subscription';\nimport { AsyncScheduler } from './AsyncScheduler';\nimport { intervalProvider } from './intervalProvider';\nimport { arrRemove } from '../util/arrRemove';\nimport { TimerHandle } from './timerHandle';\n\nexport class AsyncAction<T> extends Action<T> {\n  public id: TimerHandle | undefined;\n  public state?: T;\n  // @ts-ignore: Property has no initializer and is not definitely assigned\n  public delay: number;\n  protected pending: boolean = false;\n\n  constructor(protected scheduler: AsyncScheduler, protected work: (this: SchedulerAction<T>, state?: T) => void) {\n    super(scheduler, work);\n  }\n\n  public schedule(state?: T, delay: number = 0): Subscription {\n    if (this.closed) {\n      return this;\n    }\n\n    // Always replace the current state with the new state.\n    this.state = state;\n\n    const id = this.id;\n    const scheduler = this.scheduler;\n\n    //\n    // Important implementation note:\n    //\n    // Actions only execute once by default, unless rescheduled from within the\n    // scheduled callback. This allows us to implement single and repeat\n    // actions via the same code path, without adding API surface area, as well\n    // as mimic traditional recursion but across asynchronous boundaries.\n    //\n    // However, JS runtimes and timers distinguish between intervals achieved by\n    // serial `setTimeout` calls vs. a single `setInterval` call. An interval of\n    // serial `setTimeout` calls can be individually delayed, which delays\n    // scheduling the next `setTimeout`, and so on. `setInterval` attempts to\n    // guarantee the interval callback will be invoked more precisely to the\n    // interval period, regardless of load.\n    //\n    // Therefore, we use `setInterval` to schedule single and repeat actions.\n    // If the action reschedules itself with the same delay, the interval is not\n    // canceled. If the action doesn't reschedule, or reschedules with a\n    // different delay, the interval will be canceled after scheduled callback\n    // execution.\n    //\n    if (id != null) {\n      this.id = this.recycleAsyncId(scheduler, id, delay);\n    }\n\n    // Set the pending flag indicating that this action has been scheduled, or\n    // has recursively rescheduled itself.\n    this.pending = true;\n\n    this.delay = delay;\n    // If this action has already an async Id, don't request a new one.\n    this.id = this.id ?? this.requestAsyncId(scheduler, this.id, delay);\n\n    return this;\n  }\n\n  protected requestAsyncId(scheduler: AsyncScheduler, _id?: TimerHandle, delay: number = 0): TimerHandle {\n    return intervalProvider.setInterval(scheduler.flush.bind(scheduler, this), delay);\n  }\n\n  protected recycleAsyncId(_scheduler: AsyncScheduler, id?: TimerHandle, delay: number | null = 0): TimerHandle | undefined {\n    // If this action is rescheduled with the same delay time, don't clear the interval id.\n    if (delay != null && this.delay === delay && this.pending === false) {\n      return id;\n    }\n    // Otherwise, if the action's delay time is different from the current delay,\n    // or the action has been rescheduled before it's executed, clear the interval id\n    if (id != null) {\n      intervalProvider.clearInterval(id);\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Immediately executes this action and the `work` it contains.\n   */\n  public execute(state: T, delay: number): any {\n    if (this.closed) {\n      return new Error('executing a cancelled action');\n    }\n\n    this.pending = false;\n    const error = this._execute(state, delay);\n    if (error) {\n      return error;\n    } else if (this.pending === false && this.id != null) {\n      // Dequeue if the action didn't reschedule itself. Don't call\n      // unsubscribe(), because the action could reschedule later.\n      // For example:\n      // ```\n      // scheduler.schedule(function doWork(counter) {\n      //   /* ... I'm a busy worker bee ... */\n      //   var originalAction = this;\n      //   /* wait 100ms before rescheduling the action */\n      //   setTimeout(function () {\n      //     originalAction.schedule(counter + 1);\n      //   }, 100);\n      // }, 1000);\n      // ```\n      this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n    }\n  }\n\n  protected _execute(state: T, _delay: number): any {\n    let errored: boolean = false;\n    let errorValue: any;\n    try {\n      this.work(state);\n    } catch (e) {\n      errored = true;\n      // HACK: Since code elsewhere is relying on the \"truthiness\" of the\n      // return here, we can't have it return \"\" or 0 or false.\n      // TODO: Clean this up when we refactor schedulers mid-version-8 or so.\n      errorValue = e ? e : new Error('Scheduled action threw falsy error');\n    }\n    if (errored) {\n      this.unsubscribe();\n      return errorValue;\n    }\n  }\n\n  unsubscribe() {\n    if (!this.closed) {\n      const { id, scheduler } = this;\n      const { actions } = scheduler;\n\n      this.work = this.state = this.scheduler = null!;\n      this.pending = false;\n\n      arrRemove(actions, this);\n      if (id != null) {\n        this.id = this.recycleAsyncId(scheduler, id, null);\n      }\n\n      this.delay = null!;\n      super.unsubscribe();\n    }\n  }\n}\n", "let nextHandle = 1;\n// The promise needs to be created lazily otherwise it won't be patched by Zones\nlet resolved: Promise<any>;\nconst activeHandles: { [key: number]: any } = {};\n\n/**\n * Finds the handle in the list of active handles, and removes it.\n * Returns `true` if found, `false` otherwise. Used both to clear\n * Immediate scheduled tasks, and to identify if a task should be scheduled.\n */\nfunction findAndClearHandle(handle: number): boolean {\n  if (handle in activeHandles) {\n    delete activeHandles[handle];\n    return true;\n  }\n  return false;\n}\n\n/**\n * Helper functions to schedule and unschedule microtasks.\n */\nexport const Immediate = {\n  setImmediate(cb: () => void): number {\n    const handle = nextHandle++;\n    activeHandles[handle] = true;\n    if (!resolved) {\n      resolved = Promise.resolve();\n    }\n    resolved.then(() => findAndClearHandle(handle) && cb());\n    return handle;\n  },\n\n  clearImmediate(handle: number): void {\n    findAndClearHandle(handle);\n  },\n};\n\n/**\n * Used for internal testing purposes only. Do not export from library.\n */\nexport const TestTools = {\n  pending() {\n    return Object.keys(activeHandles).length;\n  }\n};\n", "import { Immediate } from '../util/Immediate';\nimport type { TimerHandle } from './timerHandle';\nconst { setImmediate, clearImmediate } = Immediate;\n\ntype SetImmediateFunction = (handler: () => void, ...args: any[]) => TimerHandle;\ntype ClearImmediateFunction = (handle: TimerHandle) => void;\n\ninterface ImmediateProvider {\n  setImmediate: SetImmediateFunction;\n  clearImmediate: ClearImmediateFunction;\n  delegate:\n    | {\n        setImmediate: SetImmediateFunction;\n        clearImmediate: ClearImmediateFunction;\n      }\n    | undefined;\n}\n\nexport const immediateProvider: ImmediateProvider = {\n  // When accessing the delegate, use the variable rather than `this` so that\n  // the functions can be called without being bound to the provider.\n  setImmediate(...args) {\n    const { delegate } = immediateProvider;\n    return (delegate?.setImmediate || setImmediate)(...args);\n  },\n  clearImmediate(handle) {\n    const { delegate } = immediateProvider;\n    return (delegate?.clearImmediate || clearImmediate)(handle as any);\n  },\n  delegate: undefined,\n};\n", "import { AsyncAction } from './AsyncAction';\nimport { AsapScheduler } from './AsapScheduler';\nimport { SchedulerAction } from '../types';\nimport { immediateProvider } from './immediateProvider';\nimport { TimerHandle } from './timerHandle';\n\nexport class AsapAction<T> extends AsyncAction<T> {\n  constructor(protected scheduler: AsapScheduler, protected work: (this: SchedulerAction<T>, state?: T) => void) {\n    super(scheduler, work);\n  }\n\n  protected requestAsyncId(scheduler: AsapScheduler, id?: TimerHandle, delay: number = 0): TimerHandle {\n    // If delay is greater than 0, request as an async action.\n    if (delay !== null && delay > 0) {\n      return super.requestAsyncId(scheduler, id, delay);\n    }\n    // Push the action to the end of the scheduler queue.\n    scheduler.actions.push(this);\n    // If a microtask has already been scheduled, don't schedule another\n    // one. If a microtask hasn't been scheduled yet, schedule one now. Return\n    // the current scheduled microtask id.\n    return scheduler._scheduled || (scheduler._scheduled = immediateProvider.setImmediate(scheduler.flush.bind(scheduler, undefined)));\n  }\n\n  protected recycleAsyncId(scheduler: AsapScheduler, id?: TimerHandle, delay: number = 0): TimerHandle | undefined {\n    // If delay exists and is greater than 0, or if the delay is null (the\n    // action wasn't rescheduled) but was originally scheduled as an async\n    // action, then recycle as an async action.\n    if (delay != null ? delay > 0 : this.delay > 0) {\n      return super.recycleAsyncId(scheduler, id, delay);\n    }\n    // If the scheduler queue has no remaining actions with the same async id,\n    // cancel the requested microtask and set the scheduled flag to undefined\n    // so the next AsapAction will request its own.\n    const { actions } = scheduler;\n    if (id != null && actions[actions.length - 1]?.id !== id) {\n      immediateProvider.clearImmediate(id);\n      if (scheduler._scheduled === id) {\n        scheduler._scheduled = undefined;\n      }\n    }\n    // Return undefined so the action knows to request a new async id if it's rescheduled.\n    return undefined;\n  }\n}\n", "import { Action } from './scheduler/Action';\nimport { Subscription } from './Subscription';\nimport { SchedulerLike, SchedulerAction } from './types';\nimport { dateTimestampProvider } from './scheduler/dateTimestampProvider';\n\n/**\n * An execution context and a data structure to order tasks and schedule their\n * execution. Provides a notion of (potentially virtual) time, through the\n * `now()` getter method.\n *\n * Each unit of work in a Scheduler is called an `Action`.\n *\n * ```ts\n * class Scheduler {\n *   now(): number;\n *   schedule(work, delay?, state?): Subscription;\n * }\n * ```\n *\n * @deprecated Scheduler is an internal implementation detail of RxJS, and\n * should not be used directly. Rather, create your own class and implement\n * {@link SchedulerLike}. Will be made internal in v8.\n */\nexport class Scheduler implements SchedulerLike {\n  public static now: () => number = dateTimestampProvider.now;\n\n  constructor(private schedulerActionCtor: typeof Action, now: () => number = Scheduler.now) {\n    this.now = now;\n  }\n\n  /**\n   * A getter method that returns a number representing the current time\n   * (at the time this function was called) according to the scheduler's own\n   * internal clock.\n   * @return A number that represents the current time. May or may not\n   * have a relation to wall-clock time. May or may not refer to a time unit\n   * (e.g. milliseconds).\n   */\n  public now: () => number;\n\n  /**\n   * Schedules a function, `work`, for execution. May happen at some point in\n   * the future, according to the `delay` parameter, if specified. May be passed\n   * some context object, `state`, which will be passed to the `work` function.\n   *\n   * The given arguments will be processed an stored as an Action object in a\n   * queue of actions.\n   *\n   * @param work A function representing a task, or some unit of work to be\n   * executed by the Scheduler.\n   * @param delay Time to wait before executing the work, where the time unit is\n   * implicit and defined by the Scheduler itself.\n   * @param state Some contextual data that the `work` function uses when called\n   * by the Scheduler.\n   * @return A subscription in order to be able to unsubscribe the scheduled work.\n   */\n  public schedule<T>(work: (this: SchedulerAction<T>, state?: T) => void, delay: number = 0, state?: T): Subscription {\n    return new this.schedulerActionCtor<T>(this, work).schedule(state, delay);\n  }\n}\n", "import { Scheduler } from '../Scheduler';\nimport { Action } from './Action';\nimport { AsyncAction } from './AsyncAction';\nimport { TimerHandle } from './timerHandle';\n\nexport class AsyncScheduler extends Scheduler {\n  public actions: Array<AsyncAction<any>> = [];\n  /**\n   * A flag to indicate whether the Scheduler is currently executing a batch of\n   * queued actions.\n   * @internal\n   */\n  public _active: boolean = false;\n  /**\n   * An internal ID used to track the latest asynchronous task such as those\n   * coming from `setTimeout`, `setInterval`, `requestAnimationFrame`, and\n   * others.\n   * @internal\n   */\n  public _scheduled: TimerHandle | undefined;\n\n  constructor(SchedulerAction: typeof Action, now: () => number = Scheduler.now) {\n    super(SchedulerAction, now);\n  }\n\n  public flush(action: AsyncAction<any>): void {\n    const { actions } = this;\n\n    if (this._active) {\n      actions.push(action);\n      return;\n    }\n\n    let error: any;\n    this._active = true;\n\n    do {\n      if ((error = action.execute(action.state, action.delay))) {\n        break;\n      }\n    } while ((action = actions.shift()!)); // exhaust the scheduler queue\n\n    this._active = false;\n\n    if (error) {\n      while ((action = actions.shift()!)) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  }\n}\n", "import { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\n\nexport class AsapScheduler extends AsyncScheduler {\n  public flush(action?: AsyncAction<any>): void {\n    this._active = true;\n    // The async id that effects a call to flush is stored in _scheduled.\n    // Before executing an action, it's necessary to check the action's async\n    // id to determine whether it's supposed to be executed in the current\n    // flush.\n    // Previous implementations of this method used a count to determine this,\n    // but that was unsound, as actions that are unsubscribed - i.e. cancelled -\n    // are removed from the actions array and that can shift actions that are\n    // scheduled to be executed in a subsequent flush into positions at which\n    // they are executed within the current flush.\n    const flushId = this._scheduled;\n    this._scheduled = undefined;\n\n    const { actions } = this;\n    let error: any;\n    action = action || actions.shift()!;\n\n    do {\n      if ((error = action.execute(action.state, action.delay))) {\n        break;\n      }\n    } while ((action = actions[0]) && action.id === flushId && actions.shift());\n\n    this._active = false;\n\n    if (error) {\n      while ((action = actions[0]) && action.id === flushId && actions.shift()) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  }\n}\n", "import { AsapAction } from './AsapAction';\nimport { AsapScheduler } from './AsapScheduler';\n\n/**\n *\n * Asap Scheduler\n *\n * <span class=\"informal\">Perform task as fast as it can be performed asynchronously</span>\n *\n * `asap` scheduler behaves the same as {@link asyncScheduler} scheduler when you use it to delay task\n * in time. If however you set delay to `0`, `asap` will wait for current synchronously executing\n * code to end and then it will try to execute given task as fast as possible.\n *\n * `asap` scheduler will do its best to minimize time between end of currently executing code\n * and start of scheduled task. This makes it best candidate for performing so called \"deferring\".\n * Traditionally this was achieved by calling `setTimeout(deferredTask, 0)`, but that technique involves\n * some (although minimal) unwanted delay.\n *\n * Note that using `asap` scheduler does not necessarily mean that your task will be first to process\n * after currently executing code. In particular, if some task was also scheduled with `asap` before,\n * that task will execute first. That being said, if you need to schedule task asynchronously, but\n * as soon as possible, `asap` scheduler is your best bet.\n *\n * ## Example\n * Compare async and asap scheduler<\n * ```ts\n * import { asapScheduler, asyncScheduler } from 'rxjs';\n *\n * asyncScheduler.schedule(() => console.log('async')); // scheduling 'async' first...\n * asapScheduler.schedule(() => console.log('asap'));\n *\n * // Logs:\n * // \"asap\"\n * // \"async\"\n * // ... but 'asap' goes first!\n * ```\n */\n\nexport const asapScheduler = new AsapScheduler(AsapAction);\n\n/**\n * @deprecated Renamed to {@link asapScheduler}. Will be removed in v8.\n */\nexport const asap = asapScheduler;\n", "import { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\n\n/**\n *\n * Async Scheduler\n *\n * <span class=\"informal\">Schedule task as if you used setTimeout(task, duration)</span>\n *\n * `async` scheduler schedules tasks asynchronously, by putting them on the JavaScript\n * event loop queue. It is best used to delay tasks in time or to schedule tasks repeating\n * in intervals.\n *\n * If you just want to \"defer\" task, that is to perform it right after currently\n * executing synchronous code ends (commonly achieved by `setTimeout(deferredTask, 0)`),\n * better choice will be the {@link asapScheduler} scheduler.\n *\n * ## Examples\n * Use async scheduler to delay task\n * ```ts\n * import { asyncScheduler } from 'rxjs';\n *\n * const task = () => console.log('it works!');\n *\n * asyncScheduler.schedule(task, 2000);\n *\n * // After 2 seconds logs:\n * // \"it works!\"\n * ```\n *\n * Use async scheduler to repeat task in intervals\n * ```ts\n * import { asyncScheduler } from 'rxjs';\n *\n * function task(state) {\n *   console.log(state);\n *   this.schedule(state + 1, 1000); // `this` references currently executing Action,\n *                                   // which we reschedule with new state and delay\n * }\n *\n * asyncScheduler.schedule(task, 3000, 0);\n *\n * // Logs:\n * // 0 after 3s\n * // 1 after 4s\n * // 2 after 5s\n * // 3 after 6s\n * ```\n */\n\nexport const asyncScheduler = new AsyncScheduler(AsyncAction);\n\n/**\n * @deprecated Renamed to {@link asyncScheduler}. Will be removed in v8.\n */\nexport const async = asyncScheduler;\n", "import { AsyncAction } from './AsyncAction';\nimport { Subscription } from '../Subscription';\nimport { QueueScheduler } from './QueueScheduler';\nimport { SchedulerAction } from '../types';\nimport { TimerHandle } from './timerHandle';\n\nexport class QueueAction<T> extends AsyncAction<T> {\n  constructor(protected scheduler: QueueScheduler, protected work: (this: SchedulerAction<T>, state?: T) => void) {\n    super(scheduler, work);\n  }\n\n  public schedule(state?: T, delay: number = 0): Subscription {\n    if (delay > 0) {\n      return super.schedule(state, delay);\n    }\n    this.delay = delay;\n    this.state = state;\n    this.scheduler.flush(this);\n    return this;\n  }\n\n  public execute(state: T, delay: number): any {\n    return delay > 0 || this.closed ? super.execute(state, delay) : this._execute(state, delay);\n  }\n\n  protected requestAsyncId(scheduler: QueueScheduler, id?: TimerHandle, delay: number = 0): TimerHandle {\n    // If delay exists and is greater than 0, or if the delay is null (the\n    // action wasn't rescheduled) but was originally scheduled as an async\n    // action, then recycle as an async action.\n\n    if ((delay != null && delay > 0) || (delay == null && this.delay > 0)) {\n      return super.requestAsyncId(scheduler, id, delay);\n    }\n\n    // Otherwise flush the scheduler starting with this action.\n    scheduler.flush(this);\n\n    // HACK: In the past, this was returning `void`. However, `void` isn't a valid\n    // `TimerHandle`, and generally the return value here isn't really used. So the\n    // compromise is to return `0` which is both \"falsy\" and a valid `TimerHandle`,\n    // as opposed to refactoring every other instanceo of `requestAsyncId`.\n    return 0;\n  }\n}\n", "import { AsyncScheduler } from './AsyncScheduler';\n\nexport class QueueScheduler extends AsyncScheduler {\n}\n", "import { QueueAction } from './QueueAction';\nimport { QueueScheduler } from './QueueScheduler';\n\n/**\n *\n * Queue Scheduler\n *\n * <span class=\"informal\">Put every next task on a queue, instead of executing it immediately</span>\n *\n * `queue` scheduler, when used with delay, behaves the same as {@link asyncScheduler} scheduler.\n *\n * When used without delay, it schedules given task synchronously - executes it right when\n * it is scheduled. However when called recursively, that is when inside the scheduled task,\n * another task is scheduled with queue scheduler, instead of executing immediately as well,\n * that task will be put on a queue and wait for current one to finish.\n *\n * This means that when you execute task with `queue` scheduler, you are sure it will end\n * before any other task scheduled with that scheduler will start.\n *\n * ## Examples\n * Schedule recursively first, then do something\n * ```ts\n * import { queueScheduler } from 'rxjs';\n *\n * queueScheduler.schedule(() => {\n *   queueScheduler.schedule(() => console.log('second')); // will not happen now, but will be put on a queue\n *\n *   console.log('first');\n * });\n *\n * // Logs:\n * // \"first\"\n * // \"second\"\n * ```\n *\n * Reschedule itself recursively\n * ```ts\n * import { queueScheduler } from 'rxjs';\n *\n * queueScheduler.schedule(function(state) {\n *   if (state !== 0) {\n *     console.log('before', state);\n *     this.schedule(state - 1); // `this` references currently executing Action,\n *                               // which we reschedule with new state\n *     console.log('after', state);\n *   }\n * }, 0, 3);\n *\n * // In scheduler that runs recursively, you would expect:\n * // \"before\", 3\n * // \"before\", 2\n * // \"before\", 1\n * // \"after\", 1\n * // \"after\", 2\n * // \"after\", 3\n *\n * // But with queue it logs:\n * // \"before\", 3\n * // \"after\", 3\n * // \"before\", 2\n * // \"after\", 2\n * // \"before\", 1\n * // \"after\", 1\n * ```\n */\n\nexport const queueScheduler = new QueueScheduler(QueueAction);\n\n/**\n * @deprecated Renamed to {@link queueScheduler}. Will be removed in v8.\n */\nexport const queue = queueScheduler;\n", "import { AsyncAction } from './AsyncAction';\nimport { AnimationFrameScheduler } from './AnimationFrameScheduler';\nimport { SchedulerAction } from '../types';\nimport { animationFrameProvider } from './animationFrameProvider';\nimport { TimerHandle } from './timerHandle';\n\nexport class AnimationFrameAction<T> extends AsyncAction<T> {\n  constructor(protected scheduler: AnimationFrameScheduler, protected work: (this: SchedulerAction<T>, state?: T) => void) {\n    super(scheduler, work);\n  }\n\n  protected requestAsyncId(scheduler: AnimationFrameScheduler, id?: TimerHandle, delay: number = 0): TimerHandle {\n    // If delay is greater than 0, request as an async action.\n    if (delay !== null && delay > 0) {\n      return super.requestAsyncId(scheduler, id, delay);\n    }\n    // Push the action to the end of the scheduler queue.\n    scheduler.actions.push(this);\n    // If an animation frame has already been requested, don't request another\n    // one. If an animation frame hasn't been requested yet, request one. Return\n    // the current animation frame request id.\n    return scheduler._scheduled || (scheduler._scheduled = animationFrameProvider.requestAnimationFrame(() => scheduler.flush(undefined)));\n  }\n\n  protected recycleAsyncId(scheduler: AnimationFrameScheduler, id?: TimerHandle, delay: number = 0): TimerHandle | undefined {\n    // If delay exists and is greater than 0, or if the delay is null (the\n    // action wasn't rescheduled) but was originally scheduled as an async\n    // action, then recycle as an async action.\n    if (delay != null ? delay > 0 : this.delay > 0) {\n      return super.recycleAsyncId(scheduler, id, delay);\n    }\n    // If the scheduler queue has no remaining actions with the same async id,\n    // cancel the requested animation frame and set the scheduled flag to\n    // undefined so the next AnimationFrameAction will request its own.\n    const { actions } = scheduler;\n    if (id != null && id === scheduler._scheduled && actions[actions.length - 1]?.id !== id) {\n      animationFrameProvider.cancelAnimationFrame(id as number);\n      scheduler._scheduled = undefined;\n    }\n    // Return undefined so the action knows to request a new async id if it's rescheduled.\n    return undefined;\n  }\n}\n", "import { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\n\nexport class AnimationFrameScheduler extends AsyncScheduler {\n  public flush(action?: AsyncAction<any>): void {\n    this._active = true;\n    // The async id that effects a call to flush is stored in _scheduled.\n    // Before executing an action, it's necessary to check the action's async\n    // id to determine whether it's supposed to be executed in the current\n    // flush.\n    // Previous implementations of this method used a count to determine this,\n    // but that was unsound, as actions that are unsubscribed - i.e. cancelled -\n    // are removed from the actions array and that can shift actions that are\n    // scheduled to be executed in a subsequent flush into positions at which\n    // they are executed within the current flush.\n    let flushId;\n    if (action) {\n      flushId = action.id;\n    } else {\n      flushId = this._scheduled;\n      this._scheduled = undefined;\n    }\n\n    const { actions } = this;\n    let error: any;\n    action = action || actions.shift()!;\n\n    do {\n      if ((error = action.execute(action.state, action.delay))) {\n        break;\n      }\n    } while ((action = actions[0]) && action.id === flushId && actions.shift());\n\n    this._active = false;\n\n    if (error) {\n      while ((action = actions[0]) && action.id === flushId && actions.shift()) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  }\n}\n", "import { AnimationFrameAction } from './AnimationFrameAction';\nimport { AnimationFrameScheduler } from './AnimationFrameScheduler';\n\n/**\n *\n * Animation Frame Scheduler\n *\n * <span class=\"informal\">Perform task when `window.requestAnimationFrame` would fire</span>\n *\n * When `animationFrame` scheduler is used with delay, it will fall back to {@link asyncScheduler} scheduler\n * behaviour.\n *\n * Without delay, `animationFrame` scheduler can be used to create smooth browser animations.\n * It makes sure scheduled task will happen just before next browser content repaint,\n * thus performing animations as efficiently as possible.\n *\n * ## Example\n * Schedule div height animation\n * ```ts\n * // html: <div style=\"background: #0ff;\"></div>\n * import { animationFrameScheduler } from 'rxjs';\n *\n * const div = document.querySelector('div');\n *\n * animationFrameScheduler.schedule(function(height) {\n *   div.style.height = height + \"px\";\n *\n *   this.schedule(height + 1);  // `this` references currently executing Action,\n *                               // which we reschedule with new state\n * }, 0, 0);\n *\n * // You will see a div element growing in height\n * ```\n */\n\nexport const animationFrameScheduler = new AnimationFrameScheduler(AnimationFrameAction);\n\n/**\n * @deprecated Renamed to {@link animationFrameScheduler}. Will be removed in v8.\n */\nexport const animationFrame = animationFrameScheduler;\n", "import { AsyncAction } from './AsyncAction';\nimport { Subscription } from '../Subscription';\nimport { AsyncScheduler } from './AsyncScheduler';\nimport { SchedulerAction } from '../types';\nimport { TimerHandle } from './timerHandle';\n\nexport class VirtualTimeScheduler extends AsyncScheduler {\n  /** @deprecated Not used in VirtualTimeScheduler directly. Will be removed in v8. */\n  static frameTimeFactor = 10;\n\n  /**\n   * The current frame for the state of the virtual scheduler instance. The difference\n   * between two \"frames\" is synonymous with the passage of \"virtual time units\". So if\n   * you record `scheduler.frame` to be `1`, then later, observe `scheduler.frame` to be at `11`,\n   * that means `10` virtual time units have passed.\n   */\n  public frame: number = 0;\n\n  /**\n   * Used internally to examine the current virtual action index being processed.\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\n   */\n  public index: number = -1;\n\n  /**\n   * This creates an instance of a `VirtualTimeScheduler`. Experts only. The signature of\n   * this constructor is likely to change in the long run.\n   *\n   * @param schedulerActionCtor The type of Action to initialize when initializing actions during scheduling.\n   * @param maxFrames The maximum number of frames to process before stopping. Used to prevent endless flush cycles.\n   */\n  constructor(schedulerActionCtor: typeof AsyncAction = VirtualAction as any, public maxFrames: number = Infinity) {\n    super(schedulerActionCtor, () => this.frame);\n  }\n\n  /**\n   * Prompt the Scheduler to execute all of its queued actions, therefore\n   * clearing its queue.\n   */\n  public flush(): void {\n    const { actions, maxFrames } = this;\n    let error: any;\n    let action: AsyncAction<any> | undefined;\n\n    while ((action = actions[0]) && action.delay <= maxFrames) {\n      actions.shift();\n      this.frame = action.delay;\n\n      if ((error = action.execute(action.state, action.delay))) {\n        break;\n      }\n    }\n\n    if (error) {\n      while ((action = actions.shift())) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  }\n}\n\nexport class VirtualAction<T> extends AsyncAction<T> {\n  protected active: boolean = true;\n\n  constructor(\n    protected scheduler: VirtualTimeScheduler,\n    protected work: (this: SchedulerAction<T>, state?: T) => void,\n    protected index: number = (scheduler.index += 1)\n  ) {\n    super(scheduler, work);\n    this.index = scheduler.index = index;\n  }\n\n  public schedule(state?: T, delay: number = 0): Subscription {\n    if (Number.isFinite(delay)) {\n      if (!this.id) {\n        return super.schedule(state, delay);\n      }\n      this.active = false;\n      // If an action is rescheduled, we save allocations by mutating its state,\n      // pushing it to the end of the scheduler queue, and recycling the action.\n      // But since the VirtualTimeScheduler is used for testing, VirtualActions\n      // must be immutable so they can be inspected later.\n      const action = new VirtualAction(this.scheduler, this.work);\n      this.add(action);\n      return action.schedule(state, delay);\n    } else {\n      // If someone schedules something with Infinity, it'll never happen. So we\n      // don't even schedule it.\n      return Subscription.EMPTY;\n    }\n  }\n\n  protected requestAsyncId(scheduler: VirtualTimeScheduler, id?: any, delay: number = 0): TimerHandle {\n    this.delay = scheduler.frame + delay;\n    const { actions } = scheduler;\n    actions.push(this);\n    (actions as Array<VirtualAction<T>>).sort(VirtualAction.sortActions);\n    return 1;\n  }\n\n  protected recycleAsyncId(scheduler: VirtualTimeScheduler, id?: any, delay: number = 0): TimerHandle | undefined {\n    return undefined;\n  }\n\n  protected _execute(state: T, delay: number): any {\n    if (this.active === true) {\n      return super._execute(state, delay);\n    }\n  }\n\n  private static sortActions<T>(a: VirtualAction<T>, b: VirtualAction<T>) {\n    if (a.delay === b.delay) {\n      if (a.index === b.index) {\n        return 0;\n      } else if (a.index > b.index) {\n        return 1;\n      } else {\n        return -1;\n      }\n    } else if (a.delay > b.delay) {\n      return 1;\n    } else {\n      return -1;\n    }\n  }\n}\n", "import { Observable } from '../Observable';\nimport { SchedulerLike } from '../types';\n\n/**\n * A simple Observable that emits no items to the Observer and immediately\n * emits a complete notification.\n *\n * <span class=\"informal\">Just emits 'complete', and nothing else.</span>\n *\n * ![](empty.png)\n *\n * A simple Observable that only emits the complete notification. It can be used\n * for composing with other Observables, such as in a {@link mergeMap}.\n *\n * ## Examples\n *\n * Log complete notification\n *\n * ```ts\n * import { EMPTY } from 'rxjs';\n *\n * EMPTY.subscribe({\n *   next: () => console.log('Next'),\n *   complete: () => console.log('Complete!')\n * });\n *\n * // Outputs\n * // Complete!\n * ```\n *\n * Emit the number 7, then complete\n *\n * ```ts\n * import { EMPTY, startWith } from 'rxjs';\n *\n * const result = EMPTY.pipe(startWith(7));\n * result.subscribe(x => console.log(x));\n *\n * // Outputs\n * // 7\n * ```\n *\n * Map and flatten only odd numbers to the sequence `'a'`, `'b'`, `'c'`\n *\n * ```ts\n * import { interval, mergeMap, of, EMPTY } from 'rxjs';\n *\n * const interval$ = interval(1000);\n * const result = interval$.pipe(\n *   mergeMap(x => x % 2 === 1 ? of('a', 'b', 'c') : EMPTY),\n * );\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following to the console:\n * // x is equal to the count on the interval, e.g. (0, 1, 2, 3, ...)\n * // x will occur every 1000ms\n * // if x % 2 is equal to 1, print a, b, c (each on its own)\n * // if x % 2 is not equal to 1, nothing will be output\n * ```\n *\n * @see {@link Observable}\n * @see {@link NEVER}\n * @see {@link of}\n * @see {@link throwError}\n */\nexport const EMPTY = new Observable<never>((subscriber) => subscriber.complete());\n\n/**\n * @param scheduler A {@link SchedulerLike} to use for scheduling\n * the emission of the complete notification.\n * @deprecated Replaced with the {@link EMPTY} constant or {@link scheduled} (e.g. `scheduled([], scheduler)`). Will be removed in v8.\n */\nexport function empty(scheduler?: SchedulerLike) {\n  return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\n\nfunction emptyScheduled(scheduler: SchedulerLike) {\n  return new Observable<never>((subscriber) => scheduler.schedule(() => subscriber.complete()));\n}\n", "import { SchedulerLike } from '../types';\nimport { isFunction } from './isFunction';\n\nexport function isScheduler(value: any): value is SchedulerLike {\n  return value && isFunction(value.schedule);\n}\n", "import { SchedulerLike } from '../types';\nimport { isFunction } from './isFunction';\nimport { isScheduler } from './isScheduler';\n\nfunction last<T>(arr: T[]): T | undefined {\n  return arr[arr.length - 1];\n}\n\nexport function popResultSelector(args: any[]): ((...args: unknown[]) => unknown) | undefined {\n  return isFunction(last(args)) ? args.pop() : undefined;\n}\n\nexport function popScheduler(args: any[]): SchedulerLike | undefined {\n  return isScheduler(last(args)) ? args.pop() : undefined;\n}\n\nexport function popNumber(args: any[], defaultValue: number): number {\n  return typeof last(args) === 'number' ? args.pop()! : defaultValue;\n}\n", "export const isArrayLike = (<T>(x: any): x is ArrayLike<T> => x && typeof x.length === 'number' && typeof x !== 'function');", "import { isFunction } from \"./isFunction\";\n\n/**\n * Tests to see if the object is \"thennable\".\n * @param value the object to test\n */\nexport function isPromise(value: any): value is PromiseLike<any> {\n  return isFunction(value?.then);\n}\n", "import { InteropObservable } from '../types';\nimport { observable as Symbol_observable } from '../symbol/observable';\nimport { isFunction } from './isFunction';\n\n/** Identifies an input as being Observable (but not necessary an Rx Observable) */\nexport function isInteropObservable(input: any): input is InteropObservable<any> {\n  return isFunction(input[Symbol_observable]);\n}\n", "import { isFunction } from './isFunction';\n\nexport function isAsyncIterable<T>(obj: any): obj is AsyncIterable<T> {\n  return Symbol.asyncIterator && isFunction(obj?.[Symbol.asyncIterator]);\n}\n", "/**\n * Creates the TypeError to throw if an invalid object is passed to `from` or `scheduled`.\n * @param input The object that was passed.\n */\nexport function createInvalidObservableTypeError(input: any) {\n  // TODO: We should create error codes that can be looked up, so this can be less verbose.\n  return new TypeError(\n    `You provided ${\n      input !== null && typeof input === 'object' ? 'an invalid object' : `'${input}'`\n    } where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`\n  );\n}\n", "export function getSymbolIterator(): symbol {\n  if (typeof Symbol !== 'function' || !Symbol.iterator) {\n    return '@@iterator' as any;\n  }\n\n  return Symbol.iterator;\n}\n\nexport const iterator = getSymbolIterator();\n", "import { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from './isFunction';\n\n/** Identifies an input as being an Iterable */\nexport function isIterable(input: any): input is Iterable<any> {\n  return isFunction(input?.[Symbol_iterator]);\n}\n", "import { ReadableStreamLike } from '../types';\nimport { isFunction } from './isFunction';\n\nexport async function* readableStreamLikeToAsyncGenerator<T>(readableStream: ReadableStreamLike<T>): AsyncGenerator<T> {\n  const reader = readableStream.getReader();\n  try {\n    while (true) {\n      const { value, done } = await reader.read();\n      if (done) {\n        return;\n      }\n      yield value!;\n    }\n  } finally {\n    reader.releaseLock();\n  }\n}\n\nexport function isReadableStreamLike<T>(obj: any): obj is ReadableStreamLike<T> {\n  // We don't want to use instanceof checks because they would return\n  // false for instances from another Realm, like an <iframe>.\n  return isFunction(obj?.getReader);\n}\n", "import { isArrayLike } from '../util/isArrayLike';\nimport { isPromise } from '../util/isPromise';\nimport { Observable } from '../Observable';\nimport { ObservableInput, ObservedValueOf, ReadableStreamLike } from '../types';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isIterable } from '../util/isIterable';\nimport { isReadableStreamLike, readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nimport { Subscriber } from '../Subscriber';\nimport { isFunction } from '../util/isFunction';\nimport { reportUnhandledError } from '../util/reportUnhandledError';\nimport { observable as Symbol_observable } from '../symbol/observable';\n\nexport function innerFrom<O extends ObservableInput<any>>(input: O): Observable<ObservedValueOf<O>>;\nexport function innerFrom<T>(input: ObservableInput<T>): Observable<T> {\n  if (input instanceof Observable) {\n    return input;\n  }\n  if (input != null) {\n    if (isInteropObservable(input)) {\n      return fromInteropObservable(input);\n    }\n    if (isArrayLike(input)) {\n      return fromArrayLike(input);\n    }\n    if (isPromise(input)) {\n      return fromPromise(input);\n    }\n    if (isAsyncIterable(input)) {\n      return fromAsyncIterable(input);\n    }\n    if (isIterable(input)) {\n      return fromIterable(input);\n    }\n    if (isReadableStreamLike(input)) {\n      return fromReadableStreamLike(input);\n    }\n  }\n\n  throw createInvalidObservableTypeError(input);\n}\n\n/**\n * Creates an RxJS Observable from an object that implements `Symbol.observable`.\n * @param obj An object that properly implements `Symbol.observable`.\n */\nexport function fromInteropObservable<T>(obj: any) {\n  return new Observable((subscriber: Subscriber<T>) => {\n    const obs = obj[Symbol_observable]();\n    if (isFunction(obs.subscribe)) {\n      return obs.subscribe(subscriber);\n    }\n    // Should be caught by observable subscribe function error handling.\n    throw new TypeError('Provided object does not correctly implement Symbol.observable');\n  });\n}\n\n/**\n * Synchronously emits the values of an array like and completes.\n * This is exported because there are creation functions and operators that need to\n * make direct use of the same logic, and there's no reason to make them run through\n * `from` conditionals because we *know* they're dealing with an array.\n * @param array The array to emit values from\n */\nexport function fromArrayLike<T>(array: ArrayLike<T>) {\n  return new Observable((subscriber: Subscriber<T>) => {\n    // Loop over the array and emit each value. Note two things here:\n    // 1. We're making sure that the subscriber is not closed on each loop.\n    //    This is so we don't continue looping over a very large array after\n    //    something like a `take`, `takeWhile`, or other synchronous unsubscription\n    //    has already unsubscribed.\n    // 2. In this form, reentrant code can alter that array we're looping over.\n    //    This is a known issue, but considered an edge case. The alternative would\n    //    be to copy the array before executing the loop, but this has\n    //    performance implications.\n    for (let i = 0; i < array.length && !subscriber.closed; i++) {\n      subscriber.next(array[i]);\n    }\n    subscriber.complete();\n  });\n}\n\nexport function fromPromise<T>(promise: PromiseLike<T>) {\n  return new Observable((subscriber: Subscriber<T>) => {\n    promise\n      .then(\n        (value) => {\n          if (!subscriber.closed) {\n            subscriber.next(value);\n            subscriber.complete();\n          }\n        },\n        (err: any) => subscriber.error(err)\n      )\n      .then(null, reportUnhandledError);\n  });\n}\n\nexport function fromIterable<T>(iterable: Iterable<T>) {\n  return new Observable((subscriber: Subscriber<T>) => {\n    for (const value of iterable) {\n      subscriber.next(value);\n      if (subscriber.closed) {\n        return;\n      }\n    }\n    subscriber.complete();\n  });\n}\n\nexport function fromAsyncIterable<T>(asyncIterable: AsyncIterable<T>) {\n  return new Observable((subscriber: Subscriber<T>) => {\n    process(asyncIterable, subscriber).catch((err) => subscriber.error(err));\n  });\n}\n\nexport function fromReadableStreamLike<T>(readableStream: ReadableStreamLike<T>) {\n  return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\n\nasync function process<T>(asyncIterable: AsyncIterable<T>, subscriber: Subscriber<T>) {\n  for await (const value of asyncIterable) {\n    subscriber.next(value);\n    // A side-effect may have closed our subscriber,\n    // check before the next iteration.\n    if (subscriber.closed) {\n      return;\n    }\n  }\n  subscriber.complete();\n}\n", "import { Subscription } from '../Subscription';\nimport { SchedulerAction, SchedulerLike } from '../types';\n\nexport function executeSchedule(\n  parentSubscription: Subscription,\n  scheduler: SchedulerLike,\n  work: () => void,\n  delay: number,\n  repeat: true\n): void;\nexport function executeSchedule(\n  parentSubscription: Subscription,\n  scheduler: SchedulerLike,\n  work: () => void,\n  delay?: number,\n  repeat?: false\n): Subscription;\n\nexport function executeSchedule(\n  parentSubscription: Subscription,\n  scheduler: SchedulerLike,\n  work: () => void,\n  delay = 0,\n  repeat = false\n): Subscription | void {\n  const scheduleSubscription = scheduler.schedule(function (this: SchedulerAction<any>) {\n    work();\n    if (repeat) {\n      parentSubscription.add(this.schedule(null, delay));\n    } else {\n      this.unsubscribe();\n    }\n  }, delay);\n\n  parentSubscription.add(scheduleSubscription);\n\n  if (!repeat) {\n    // Because user-land scheduler implementations are unlikely to properly reuse\n    // Actions for repeat scheduling, we can't trust that the returned subscription\n    // will control repeat subscription scenarios. So we're trying to avoid using them\n    // incorrectly within this library.\n    return scheduleSubscription;\n  }\n}\n", "/** @prettier */\nimport { MonoTypeOperatorFunction, SchedulerLike } from '../types';\nimport { executeSchedule } from '../util/executeSchedule';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * Re-emits all notifications from source Observable with specified scheduler.\n *\n * <span class=\"informal\">Ensure a specific scheduler is used, from outside of an Observable.</span>\n *\n * `observeOn` is an operator that accepts a scheduler as a first parameter, which will be used to reschedule\n * notifications emitted by the source Observable. It might be useful, if you do not have control over\n * internal scheduler of a given Observable, but want to control when its values are emitted nevertheless.\n *\n * Returned Observable emits the same notifications (nexted values, complete and error events) as the source Observable,\n * but rescheduled with provided scheduler. Note that this doesn't mean that source Observables internal\n * scheduler will be replaced in any way. Original scheduler still will be used, but when the source Observable emits\n * notification, it will be immediately scheduled again - this time with scheduler passed to `observeOn`.\n * An anti-pattern would be calling `observeOn` on Observable that emits lots of values synchronously, to split\n * that emissions into asynchronous chunks. For this to happen, scheduler would have to be passed into the source\n * Observable directly (usually into the operator that creates it). `observeOn` simply delays notifications a\n * little bit more, to ensure that they are emitted at expected moments.\n *\n * As a matter of fact, `observeOn` accepts second parameter, which specifies in milliseconds with what delay notifications\n * will be emitted. The main difference between {@link delay} operator and `observeOn` is that `observeOn`\n * will delay all notifications - including error notifications - while `delay` will pass through error\n * from source Observable immediately when it is emitted. In general it is highly recommended to use `delay` operator\n * for any kind of delaying of values in the stream, while using `observeOn` to specify which scheduler should be used\n * for notification emissions in general.\n *\n * ## Example\n *\n * Ensure values in subscribe are called just before browser repaint\n *\n * ```ts\n * import { interval, observeOn, animationFrameScheduler } from 'rxjs';\n *\n * const someDiv = document.createElement('div');\n * someDiv.style.cssText = 'width: 200px;background: #09c';\n * document.body.appendChild(someDiv);\n * const intervals = interval(10);      // Intervals are scheduled\n *                                      // with async scheduler by default...\n * intervals.pipe(\n *   observeOn(animationFrameScheduler) // ...but we will observe on animationFrame\n * )                                    // scheduler to ensure smooth animation.\n * .subscribe(val => {\n *   someDiv.style.height = val + 'px';\n * });\n * ```\n *\n * @see {@link delay}\n *\n * @param scheduler Scheduler that will be used to reschedule notifications from source Observable.\n * @param delay Number of milliseconds that states with what delay every notification should be rescheduled.\n * @return A function that returns an Observable that emits the same\n * notifications as the source Observable, but with provided scheduler.\n */\nexport function observeOn<T>(scheduler: SchedulerLike, delay = 0): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    source.subscribe(\n      createOperatorSubscriber(\n        subscriber,\n        (value) => executeSchedule(subscriber, scheduler, () => subscriber.next(value), delay),\n        () => executeSchedule(subscriber, scheduler, () => subscriber.complete(), delay),\n        (err) => executeSchedule(subscriber, scheduler, () => subscriber.error(err), delay)\n      )\n    );\n  });\n}\n", "import { MonoTypeOperatorFunction, SchedulerLike } from '../types';\nimport { operate } from '../util/lift';\n\n/**\n * Asynchronously subscribes Observers to this Observable on the specified {@link SchedulerLike}.\n *\n * With `subscribeOn` you can decide what type of scheduler a specific Observable will be using when it is subscribed to.\n *\n * Schedulers control the speed and order of emissions to observers from an Observable stream.\n *\n * ![](subscribeOn.png)\n *\n * ## Example\n *\n * Given the following code:\n *\n * ```ts\n * import { of, merge } from 'rxjs';\n *\n * const a = of(1, 2, 3);\n * const b = of(4, 5, 6);\n *\n * merge(a, b).subscribe(console.log);\n *\n * // Outputs\n * // 1\n * // 2\n * // 3\n * // 4\n * // 5\n * // 6\n * ```\n *\n * Both Observable `a` and `b` will emit their values directly and synchronously once they are subscribed to.\n *\n * If we instead use the `subscribeOn` operator declaring that we want to use the {@link asyncScheduler} for values emitted by Observable `a`:\n *\n * ```ts\n * import { of, subscribeOn, asyncScheduler, merge } from 'rxjs';\n *\n * const a = of(1, 2, 3).pipe(subscribeOn(asyncScheduler));\n * const b = of(4, 5, 6);\n *\n * merge(a, b).subscribe(console.log);\n *\n * // Outputs\n * // 4\n * // 5\n * // 6\n * // 1\n * // 2\n * // 3\n * ```\n *\n * The reason for this is that Observable `b` emits its values directly and synchronously like before\n * but the emissions from `a` are scheduled on the event loop because we are now using the {@link asyncScheduler} for that specific Observable.\n *\n * @param scheduler The {@link SchedulerLike} to perform subscription actions on.\n * @param delay A delay to pass to the scheduler to delay subscriptions\n * @return A function that returns an Observable modified so that its\n * subscriptions happen on the specified {@link SchedulerLike}.\n */\nexport function subscribeOn<T>(scheduler: SchedulerLike, delay: number = 0): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    subscriber.add(scheduler.schedule(() => source.subscribe(subscriber), delay));\n  });\n}\n", "import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nimport { InteropObservable, SchedulerLike } from '../types';\n\nexport function scheduleObservable<T>(input: InteropObservable<T>, scheduler: SchedulerLike) {\n  return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n", "import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nimport { SchedulerLike } from '../types';\n\nexport function schedulePromise<T>(input: PromiseLike<T>, scheduler: SchedulerLike) {\n  return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n", "import { Observable } from '../Observable';\nimport { SchedulerLike } from '../types';\n\nexport function scheduleArray<T>(input: ArrayLike<T>, scheduler: SchedulerLike) {\n  return new Observable<T>((subscriber) => {\n    // The current array index.\n    let i = 0;\n    // Start iterating over the array like on a schedule.\n    return scheduler.schedule(function () {\n      if (i === input.length) {\n        // If we have hit the end of the array like in the\n        // previous job, we can complete.\n        subscriber.complete();\n      } else {\n        // Otherwise let's next the value at the current index,\n        // then increment our index.\n        subscriber.next(input[i++]);\n        // If the last emission didn't cause us to close the subscriber\n        // (via take or some side effect), reschedule the job and we'll\n        // make another pass.\n        if (!subscriber.closed) {\n          this.schedule();\n        }\n      }\n    });\n  });\n}\n", "import { Observable } from '../Observable';\nimport { SchedulerLike } from '../types';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from '../util/isFunction';\nimport { executeSchedule } from '../util/executeSchedule';\n\n/**\n * Used in {@link scheduled} to create an observable from an Iterable.\n * @param input The iterable to create an observable from\n * @param scheduler The scheduler to use\n */\nexport function scheduleIterable<T>(input: Iterable<T>, scheduler: SchedulerLike) {\n  return new Observable<T>((subscriber) => {\n    let iterator: Iterator<T, T>;\n\n    // Schedule the initial creation of the iterator from\n    // the iterable. This is so the code in the iterable is\n    // not called until the scheduled job fires.\n    executeSchedule(subscriber, scheduler, () => {\n      // Create the iterator.\n      iterator = (input as any)[Symbol_iterator]();\n\n      executeSchedule(\n        subscriber,\n        scheduler,\n        () => {\n          let value: T;\n          let done: boolean | undefined;\n          try {\n            // Pull the value out of the iterator\n            ({ value, done } = iterator.next());\n          } catch (err) {\n            // We got an error while pulling from the iterator\n            subscriber.error(err);\n            return;\n          }\n\n          if (done) {\n            // If it is \"done\" we just complete. This mimics the\n            // behavior of JavaScript's `for..of` consumption of\n            // iterables, which will not emit the value from an iterator\n            // result of `{ done: true: value: 'here' }`.\n            subscriber.complete();\n          } else {\n            // The iterable is not done, emit the value.\n            subscriber.next(value);\n          }\n        },\n        0,\n        true\n      );\n    });\n\n    // During finalization, if we see this iterator has a `return` method,\n    // then we know it is a Generator, and not just an Iterator. So we call\n    // the `return()` function. This will ensure that any `finally { }` blocks\n    // inside of the generator we can hit will be hit properly.\n    return () => isFunction(iterator?.return) && iterator.return();\n  });\n}\n", "import { SchedulerLike } from '../types';\nimport { Observable } from '../Observable';\nimport { executeSchedule } from '../util/executeSchedule';\n\nexport function scheduleAsyncIterable<T>(input: AsyncIterable<T>, scheduler: SchedulerLike) {\n  if (!input) {\n    throw new Error('Iterable cannot be null');\n  }\n  return new Observable<T>((subscriber) => {\n    executeSchedule(subscriber, scheduler, () => {\n      const iterator = input[Symbol.asyncIterator]();\n      executeSchedule(\n        subscriber,\n        scheduler,\n        () => {\n          iterator.next().then((result) => {\n            if (result.done) {\n              // This will remove the subscriptions from\n              // the parent subscription.\n              subscriber.complete();\n            } else {\n              subscriber.next(result.value);\n            }\n          });\n        },\n        0,\n        true\n      );\n    });\n  });\n}\n", "import { SchedulerLike, ReadableStreamLike } from '../types';\nimport { Observable } from '../Observable';\nimport { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\n\nexport function scheduleReadableStreamLike<T>(input: ReadableStreamLike<T>, scheduler: SchedulerLike): Observable<T> {\n  return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input), scheduler);\n}\n", "import { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\nimport { ObservableInput, SchedulerLike } from '../types';\nimport { Observable } from '../Observable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isReadableStreamLike } from '../util/isReadableStreamLike';\nimport { scheduleReadableStreamLike } from './scheduleReadableStreamLike';\n\n/**\n * Converts from a common {@link ObservableInput} type to an observable where subscription and emissions\n * are scheduled on the provided scheduler.\n *\n * @see {@link from}\n * @see {@link of}\n *\n * @param input The observable, array, promise, iterable, etc you would like to schedule\n * @param scheduler The scheduler to use to schedule the subscription and emissions from\n * the returned observable.\n */\nexport function scheduled<T>(input: ObservableInput<T>, scheduler: SchedulerLike): Observable<T> {\n  if (input != null) {\n    if (isInteropObservable(input)) {\n      return scheduleObservable(input, scheduler);\n    }\n    if (isArrayLike(input)) {\n      return scheduleArray(input, scheduler);\n    }\n    if (isPromise(input)) {\n      return schedulePromise(input, scheduler);\n    }\n    if (isAsyncIterable(input)) {\n      return scheduleAsyncIterable(input, scheduler);\n    }\n    if (isIterable(input)) {\n      return scheduleIterable(input, scheduler);\n    }\n    if (isReadableStreamLike(input)) {\n      return scheduleReadableStreamLike(input, scheduler);\n    }\n  }\n  throw createInvalidObservableTypeError(input);\n}\n", "import { Observable } from '../Observable';\nimport { ObservableInput, SchedulerLike, ObservedValueOf } from '../types';\nimport { scheduled } from '../scheduled/scheduled';\nimport { innerFrom } from './innerFrom';\n\nexport function from<O extends ObservableInput<any>>(input: O): Observable<ObservedValueOf<O>>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function from<O extends ObservableInput<any>>(input: O, scheduler: SchedulerLike | undefined): Observable<ObservedValueOf<O>>;\n\n/**\n * Creates an Observable from an Array, an array-like object, a Promise, an iterable object, or an Observable-like object.\n *\n * <span class=\"informal\">Converts almost anything to an Observable.</span>\n *\n * ![](from.png)\n *\n * `from` converts various other objects and data types into Observables. It also converts a Promise, an array-like, or an\n * <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#iterable\" target=\"_blank\">iterable</a>\n * object into an Observable that emits the items in that promise, array, or iterable. A String, in this context, is treated\n * as an array of characters. Observable-like objects (contains a function named with the ES2015 Symbol for Observable) can also be\n * converted through this operator.\n *\n * ## Examples\n *\n * Converts an array to an Observable\n *\n * ```ts\n * import { from } from 'rxjs';\n *\n * const array = [10, 20, 30];\n * const result = from(array);\n *\n * result.subscribe(x => console.log(x));\n *\n * // Logs:\n * // 10\n * // 20\n * // 30\n * ```\n *\n * Convert an infinite iterable (from a generator) to an Observable\n *\n * ```ts\n * import { from, take } from 'rxjs';\n *\n * function* generateDoubles(seed) {\n *    let i = seed;\n *    while (true) {\n *      yield i;\n *      i = 2 * i; // double it\n *    }\n * }\n *\n * const iterator = generateDoubles(3);\n * const result = from(iterator).pipe(take(10));\n *\n * result.subscribe(x => console.log(x));\n *\n * // Logs:\n * // 3\n * // 6\n * // 12\n * // 24\n * // 48\n * // 96\n * // 192\n * // 384\n * // 768\n * // 1536\n * ```\n *\n * With `asyncScheduler`\n *\n * ```ts\n * import { from, asyncScheduler } from 'rxjs';\n *\n * console.log('start');\n *\n * const array = [10, 20, 30];\n * const result = from(array, asyncScheduler);\n *\n * result.subscribe(x => console.log(x));\n *\n * console.log('end');\n *\n * // Logs:\n * // 'start'\n * // 'end'\n * // 10\n * // 20\n * // 30\n * ```\n *\n * @see {@link fromEvent}\n * @see {@link fromEventPattern}\n *\n * @param input A subscription object, a Promise, an Observable-like,\n * an Array, an iterable, or an array-like object to be converted.\n * @param scheduler An optional {@link SchedulerLike} on which to schedule the emission of values.\n * @return An Observable converted from {@link ObservableInput}.\n */\nexport function from<T>(input: ObservableInput<T>, scheduler?: SchedulerLike): Observable<T> {\n  return scheduler ? scheduled(input, scheduler) : innerFrom(input);\n}\n", "import { SchedulerLike, ValueFromArray } from '../types';\nimport { Observable } from '../Observable';\nimport { popScheduler } from '../util/args';\nimport { from } from './from';\n\n// Devs are more likely to pass null or undefined than they are a scheduler\n// without accompanying values. To make things easier for (naughty) devs who\n// use the `strictNullChecks: false` TypeScript compiler option, these\n// overloads with explicit null and undefined values are included.\n\nexport function of(value: null): Observable<null>;\nexport function of(value: undefined): Observable<undefined>;\n\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function of(scheduler: SchedulerLike): Observable<never>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function of<A extends readonly unknown[]>(...valuesAndScheduler: [...A, SchedulerLike]): Observable<ValueFromArray<A>>;\n\nexport function of(): Observable<never>;\n/** @deprecated Do not specify explicit type parameters. Signatures with type parameters that cannot be inferred will be removed in v8. */\nexport function of<T>(): Observable<T>;\nexport function of<T>(value: T): Observable<T>;\nexport function of<A extends readonly unknown[]>(...values: A): Observable<ValueFromArray<A>>;\n\n/**\n * Converts the arguments to an observable sequence.\n *\n * <span class=\"informal\">Each argument becomes a `next` notification.</span>\n *\n * ![](of.png)\n *\n * Unlike {@link from}, it does not do any flattening and emits each argument in whole\n * as a separate `next` notification.\n *\n * ## Examples\n *\n * Emit the values `10, 20, 30`\n *\n * ```ts\n * import { of } from 'rxjs';\n *\n * of(10, 20, 30)\n *   .subscribe({\n *     next: value => console.log('next:', value),\n *     error: err => console.log('error:', err),\n *     complete: () => console.log('the end'),\n *   });\n *\n * // Outputs\n * // next: 10\n * // next: 20\n * // next: 30\n * // the end\n * ```\n *\n * Emit the array `[1, 2, 3]`\n *\n * ```ts\n * import { of } from 'rxjs';\n *\n * of([1, 2, 3])\n *   .subscribe({\n *     next: value => console.log('next:', value),\n *     error: err => console.log('error:', err),\n *     complete: () => console.log('the end'),\n *   });\n *\n * // Outputs\n * // next: [1, 2, 3]\n * // the end\n * ```\n *\n * @see {@link from}\n * @see {@link range}\n *\n * @param args A comma separated list of arguments you want to be emitted.\n * @return An Observable that synchronously emits the arguments described\n * above and then immediately completes.\n */\nexport function of<T>(...args: Array<T | SchedulerLike>): Observable<T> {\n  const scheduler = popScheduler(args);\n  return from(args as T[], scheduler);\n}\n", "import { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { SchedulerLike } from '../types';\nimport { isFunction } from '../util/isFunction';\n\n/**\n * Creates an observable that will create an error instance and push it to the consumer as an error\n * immediately upon subscription.\n *\n * <span class=\"informal\">Just errors and does nothing else</span>\n *\n * ![](throw.png)\n *\n * This creation function is useful for creating an observable that will create an error and error every\n * time it is subscribed to. Generally, inside of most operators when you might want to return an errored\n * observable, this is unnecessary. In most cases, such as in the inner return of {@link concatMap},\n * {@link mergeMap}, {@link defer}, and many others, you can simply throw the error, and RxJS will pick\n * that up and notify the consumer of the error.\n *\n * ## Example\n *\n * Create a simple observable that will create a new error with a timestamp and log it\n * and the message every time you subscribe to it\n *\n * ```ts\n * import { throwError } from 'rxjs';\n *\n * let errorCount = 0;\n *\n * const errorWithTimestamp$ = throwError(() => {\n *   const error: any = new Error(`This is error number ${ ++errorCount }`);\n *   error.timestamp = Date.now();\n *   return error;\n * });\n *\n * errorWithTimestamp$.subscribe({\n *   error: err => console.log(err.timestamp, err.message)\n * });\n *\n * errorWithTimestamp$.subscribe({\n *   error: err => console.log(err.timestamp, err.message)\n * });\n *\n * // Logs the timestamp and a new error message for each subscription\n * ```\n *\n * ### Unnecessary usage\n *\n * Using `throwError` inside of an operator or creation function\n * with a callback, is usually not necessary\n *\n * ```ts\n * import { of, concatMap, timer, throwError } from 'rxjs';\n *\n * const delays$ = of(1000, 2000, Infinity, 3000);\n *\n * delays$.pipe(\n *   concatMap(ms => {\n *     if (ms < 10000) {\n *       return timer(ms);\n *     } else {\n *       // This is probably overkill.\n *       return throwError(() => new Error(`Invalid time ${ ms }`));\n *     }\n *   })\n * )\n * .subscribe({\n *   next: console.log,\n *   error: console.error\n * });\n * ```\n *\n * You can just throw the error instead\n *\n * ```ts\n * import { of, concatMap, timer } from 'rxjs';\n *\n * const delays$ = of(1000, 2000, Infinity, 3000);\n *\n * delays$.pipe(\n *   concatMap(ms => {\n *     if (ms < 10000) {\n *       return timer(ms);\n *     } else {\n *       // Cleaner and easier to read for most folks.\n *       throw new Error(`Invalid time ${ ms }`);\n *     }\n *   })\n * )\n * .subscribe({\n *   next: console.log,\n *   error: console.error\n * });\n * ```\n *\n * @param errorFactory A factory function that will create the error instance that is pushed.\n */\nexport function throwError(errorFactory: () => any): Observable<never>;\n\n/**\n * Returns an observable that will error with the specified error immediately upon subscription.\n *\n * @param error The error instance to emit\n * @deprecated Support for passing an error value will be removed in v8. Instead, pass a factory function to `throwError(() => new Error('test'))`. This is\n * because it will create the error at the moment it should be created and capture a more appropriate stack trace. If\n * for some reason you need to create the error ahead of time, you can still do that: `const err = new Error('test'); throwError(() => err);`.\n */\nexport function throwError(error: any): Observable<never>;\n\n/**\n * Notifies the consumer of an error using a given scheduler by scheduling it at delay `0` upon subscription.\n *\n * @param errorOrErrorFactory An error instance or error factory\n * @param scheduler A scheduler to use to schedule the error notification\n * @deprecated The `scheduler` parameter will be removed in v8.\n * Use `throwError` in combination with {@link observeOn}: `throwError(() => new Error('test')).pipe(observeOn(scheduler));`.\n * Details: https://rxjs.dev/deprecations/scheduler-argument\n */\nexport function throwError(errorOrErrorFactory: any, scheduler: SchedulerLike): Observable<never>;\n\nexport function throwError(errorOrErrorFactory: any, scheduler?: SchedulerLike): Observable<never> {\n  const errorFactory = isFunction(errorOrErrorFactory) ? errorOrErrorFactory : () => errorOrErrorFactory;\n  const init = (subscriber: Subscriber<never>) => subscriber.error(errorFactory());\n  return new Observable(scheduler ? (subscriber) => scheduler.schedule(init as any, 0, subscriber) : init);\n}\n", "import { PartialObserver, ObservableNotification, CompleteNotification, NextNotification, ErrorNotification } from './types';\nimport { Observable } from './Observable';\nimport { EMPTY } from './observable/empty';\nimport { of } from './observable/of';\nimport { throwError } from './observable/throwError';\nimport { isFunction } from './util/isFunction';\n\n// TODO: When this enum is removed, replace it with a type alias. See #4556.\n/**\n * @deprecated Use a string literal instead. `NotificationKind` will be replaced with a type alias in v8.\n * It will not be replaced with a const enum as those are not compatible with isolated modules.\n */\nexport enum NotificationKind {\n  NEXT = 'N',\n  ERROR = 'E',\n  COMPLETE = 'C',\n}\n\n/**\n * Represents a push-based event or value that an {@link Observable} can emit.\n * This class is particularly useful for operators that manage notifications,\n * like {@link materialize}, {@link dematerialize}, {@link observeOn}, and\n * others. Besides wrapping the actual delivered value, it also annotates it\n * with metadata of, for instance, what type of push message it is (`next`,\n * `error`, or `complete`).\n *\n * @see {@link materialize}\n * @see {@link dematerialize}\n * @see {@link observeOn}\n * @deprecated It is NOT recommended to create instances of `Notification` directly.\n * Rather, try to create POJOs matching the signature outlined in {@link ObservableNotification}.\n * For example: `{ kind: 'N', value: 1 }`, `{ kind: 'E', error: new Error('bad') }`, or `{ kind: 'C' }`.\n * Will be removed in v8.\n */\nexport class Notification<T> {\n  /**\n   * A value signifying that the notification will \"next\" if observed. In truth,\n   * This is really synonymous with just checking `kind === \"N\"`.\n   * @deprecated Will be removed in v8. Instead, just check to see if the value of `kind` is `\"N\"`.\n   */\n  readonly hasValue: boolean;\n\n  /**\n   * Creates a \"Next\" notification object.\n   * @param kind Always `'N'`\n   * @param value The value to notify with if observed.\n   * @deprecated Internal implementation detail. Use {@link Notification#createNext createNext} instead.\n   */\n  constructor(kind: 'N', value?: T);\n  /**\n   * Creates an \"Error\" notification object.\n   * @param kind Always `'E'`\n   * @param value Always `undefined`\n   * @param error The error to notify with if observed.\n   * @deprecated Internal implementation detail. Use {@link Notification#createError createError} instead.\n   */\n  constructor(kind: 'E', value: undefined, error: any);\n  /**\n   * Creates a \"completion\" notification object.\n   * @param kind Always `'C'`\n   * @deprecated Internal implementation detail. Use {@link Notification#createComplete createComplete} instead.\n   */\n  constructor(kind: 'C');\n  constructor(public readonly kind: 'N' | 'E' | 'C', public readonly value?: T, public readonly error?: any) {\n    this.hasValue = kind === 'N';\n  }\n\n  /**\n   * Executes the appropriate handler on a passed `observer` given the `kind` of notification.\n   * If the handler is missing it will do nothing. Even if the notification is an error, if\n   * there is no error handler on the observer, an error will not be thrown, it will noop.\n   * @param observer The observer to notify.\n   */\n  observe(observer: PartialObserver<T>): void {\n    return observeNotification(this as ObservableNotification<T>, observer);\n  }\n\n  /**\n   * Executes a notification on the appropriate handler from a list provided.\n   * If a handler is missing for the kind of notification, nothing is called\n   * and no error is thrown, it will be a noop.\n   * @param next A next handler\n   * @param error An error handler\n   * @param complete A complete handler\n   * @deprecated Replaced with {@link Notification#observe observe}. Will be removed in v8.\n   */\n  do(next: (value: T) => void, error: (err: any) => void, complete: () => void): void;\n  /**\n   * Executes a notification on the appropriate handler from a list provided.\n   * If a handler is missing for the kind of notification, nothing is called\n   * and no error is thrown, it will be a noop.\n   * @param next A next handler\n   * @param error An error handler\n   * @deprecated Replaced with {@link Notification#observe observe}. Will be removed in v8.\n   */\n  do(next: (value: T) => void, error: (err: any) => void): void;\n  /**\n   * Executes the next handler if the Notification is of `kind` `\"N\"`. Otherwise\n   * this will not error, and it will be a noop.\n   * @param next The next handler\n   * @deprecated Replaced with {@link Notification#observe observe}. Will be removed in v8.\n   */\n  do(next: (value: T) => void): void;\n  do(nextHandler: (value: T) => void, errorHandler?: (err: any) => void, completeHandler?: () => void): void {\n    const { kind, value, error } = this;\n    return kind === 'N' ? nextHandler?.(value!) : kind === 'E' ? errorHandler?.(error) : completeHandler?.();\n  }\n\n  /**\n   * Executes a notification on the appropriate handler from a list provided.\n   * If a handler is missing for the kind of notification, nothing is called\n   * and no error is thrown, it will be a noop.\n   * @param next A next handler\n   * @param error An error handler\n   * @param complete A complete handler\n   * @deprecated Replaced with {@link Notification#observe observe}. Will be removed in v8.\n   */\n  accept(next: (value: T) => void, error: (err: any) => void, complete: () => void): void;\n  /**\n   * Executes a notification on the appropriate handler from a list provided.\n   * If a handler is missing for the kind of notification, nothing is called\n   * and no error is thrown, it will be a noop.\n   * @param next A next handler\n   * @param error An error handler\n   * @deprecated Replaced with {@link Notification#observe observe}. Will be removed in v8.\n   */\n  accept(next: (value: T) => void, error: (err: any) => void): void;\n  /**\n   * Executes the next handler if the Notification is of `kind` `\"N\"`. Otherwise\n   * this will not error, and it will be a noop.\n   * @param next The next handler\n   * @deprecated Replaced with {@link Notification#observe observe}. Will be removed in v8.\n   */\n  accept(next: (value: T) => void): void;\n\n  /**\n   * Executes the appropriate handler on a passed `observer` given the `kind` of notification.\n   * If the handler is missing it will do nothing. Even if the notification is an error, if\n   * there is no error handler on the observer, an error will not be thrown, it will noop.\n   * @param observer The observer to notify.\n   * @deprecated Replaced with {@link Notification#observe observe}. Will be removed in v8.\n   */\n  accept(observer: PartialObserver<T>): void;\n  accept(nextOrObserver: PartialObserver<T> | ((value: T) => void), error?: (err: any) => void, complete?: () => void) {\n    return isFunction((nextOrObserver as any)?.next)\n      ? this.observe(nextOrObserver as PartialObserver<T>)\n      : this.do(nextOrObserver as (value: T) => void, error as any, complete as any);\n  }\n\n  /**\n   * Returns a simple Observable that just delivers the notification represented\n   * by this Notification instance.\n   *\n   * @deprecated Will be removed in v8. To convert a `Notification` to an {@link Observable},\n   * use {@link of} and {@link dematerialize}: `of(notification).pipe(dematerialize())`.\n   */\n  toObservable(): Observable<T> {\n    const { kind, value, error } = this;\n    // Select the observable to return by `kind`\n    const result =\n      kind === 'N'\n        ? // Next kind. Return an observable of that value.\n          of(value!)\n        : //\n        kind === 'E'\n        ? // Error kind. Return an observable that emits the error.\n          throwError(() => error)\n        : //\n        kind === 'C'\n        ? // Completion kind. Kind is \"C\", return an observable that just completes.\n          EMPTY\n        : // Unknown kind, return falsy, so we error below.\n          0;\n    if (!result) {\n      // TODO: consider removing this check. The only way to cause this would be to\n      // use the Notification constructor directly in a way that is not type-safe.\n      // and direct use of the Notification constructor is deprecated.\n      throw new TypeError(`Unexpected notification kind ${kind}`);\n    }\n    return result;\n  }\n\n  private static completeNotification = new Notification('C') as Notification<never> & CompleteNotification;\n  /**\n   * A shortcut to create a Notification instance of the type `next` from a\n   * given value.\n   * @param value The `next` value.\n   * @return The \"next\" Notification representing the argument.\n   * @deprecated It is NOT recommended to create instances of `Notification` directly.\n   * Rather, try to create POJOs matching the signature outlined in {@link ObservableNotification}.\n   * For example: `{ kind: 'N', value: 1 }`, `{ kind: 'E', error: new Error('bad') }`, or `{ kind: 'C' }`.\n   * Will be removed in v8.\n   */\n  static createNext<T>(value: T) {\n    return new Notification('N', value) as Notification<T> & NextNotification<T>;\n  }\n\n  /**\n   * A shortcut to create a Notification instance of the type `error` from a\n   * given error.\n   * @param err The `error` error.\n   * @return The \"error\" Notification representing the argument.\n   * @deprecated It is NOT recommended to create instances of `Notification` directly.\n   * Rather, try to create POJOs matching the signature outlined in {@link ObservableNotification}.\n   * For example: `{ kind: 'N', value: 1 }`, `{ kind: 'E', error: new Error('bad') }`, or `{ kind: 'C' }`.\n   * Will be removed in v8.\n   */\n  static createError(err?: any) {\n    return new Notification('E', undefined, err) as Notification<never> & ErrorNotification;\n  }\n\n  /**\n   * A shortcut to create a Notification instance of the type `complete`.\n   * @return The valueless \"complete\" Notification.\n   * @deprecated It is NOT recommended to create instances of `Notification` directly.\n   * Rather, try to create POJOs matching the signature outlined in {@link ObservableNotification}.\n   * For example: `{ kind: 'N', value: 1 }`, `{ kind: 'E', error: new Error('bad') }`, or `{ kind: 'C' }`.\n   * Will be removed in v8.\n   */\n  static createComplete(): Notification<never> & CompleteNotification {\n    return Notification.completeNotification;\n  }\n}\n\n/**\n * Executes the appropriate handler on a passed `observer` given the `kind` of notification.\n * If the handler is missing it will do nothing. Even if the notification is an error, if\n * there is no error handler on the observer, an error will not be thrown, it will noop.\n * @param notification The notification object to observe.\n * @param observer The observer to notify.\n */\nexport function observeNotification<T>(notification: ObservableNotification<T>, observer: PartialObserver<T>) {\n  const { kind, value, error } = notification as any;\n  if (typeof kind !== 'string') {\n    throw new TypeError('Invalid notification, missing \"kind\"');\n  }\n  kind === 'N' ? observer.next?.(value!) : kind === 'E' ? observer.error?.(error) : observer.complete?.();\n}\n", "import { createErrorClass } from './createErrorClass';\n\nexport interface EmptyError extends Error {}\n\nexport interface EmptyErrorCtor {\n  /**\n   * @deprecated Internal implementation detail. Do not construct error instances.\n   * Cannot be tagged as internal: https://github.com/ReactiveX/rxjs/issues/6269\n   */\n  new (): EmptyError;\n}\n\n/**\n * An error thrown when an Observable or a sequence was queried but has no\n * elements.\n *\n * @see {@link first}\n * @see {@link last}\n * @see {@link single}\n * @see {@link firstValueFrom}\n * @see {@link lastValueFrom}\n */\nexport const EmptyError: EmptyErrorCtor = createErrorClass(\n  (_super) =>\n    function EmptyErrorImpl(this: any) {\n      _super(this);\n      this.name = 'EmptyError';\n      this.message = 'no elements in sequence';\n    }\n);\n", "import { createErrorClass } from './createErrorClass';\n\nexport interface ArgumentOutOfRangeError extends Error {}\n\nexport interface ArgumentOutOfRangeErrorCtor {\n  /**\n   * @deprecated Internal implementation detail. Do not construct error instances.\n   * Cannot be tagged as internal: https://github.com/ReactiveX/rxjs/issues/6269\n   */\n  new (): ArgumentOutOfRangeError;\n}\n\n/**\n * An error thrown when an element was queried at a certain index of an\n * Observable, but no such index or position exists in that sequence.\n *\n * @see {@link elementAt}\n * @see {@link take}\n * @see {@link takeLast}\n */\nexport const ArgumentOutOfRangeError: ArgumentOutOfRangeErrorCtor = createErrorClass(\n  (_super) =>\n    function ArgumentOutOfRangeErrorImpl(this: any) {\n      _super(this);\n      this.name = 'ArgumentOutOfRangeError';\n      this.message = 'argument out of range';\n    }\n);\n", "import { createErrorClass } from './createErrorClass';\n\nexport interface NotFoundError extends Error {}\n\nexport interface NotFoundErrorCtor {\n  /**\n   * @deprecated Internal implementation detail. Do not construct error instances.\n   * Cannot be tagged as internal: https://github.com/ReactiveX/rxjs/issues/6269\n   */\n  new (message: string): NotFoundError;\n}\n\n/**\n * An error thrown when a value or values are missing from an\n * observable sequence.\n *\n * @see {@link operators/single}\n */\nexport const NotFoundError: NotFoundErrorCtor = createErrorClass(\n  (_super) =>\n    function NotFoundErrorImpl(this: any, message: string) {\n      _super(this);\n      this.name = 'NotFoundError';\n      this.message = message;\n    }\n);\n", "import { createErrorClass } from './createErrorClass';\n\nexport interface SequenceError extends Error {}\n\nexport interface SequenceErrorCtor {\n  /**\n   * @deprecated Internal implementation detail. Do not construct error instances.\n   * Cannot be tagged as internal: https://github.com/ReactiveX/rxjs/issues/6269\n   */\n  new (message: string): SequenceError;\n}\n\n/**\n * An error thrown when something is wrong with the sequence of\n * values arriving on the observable.\n *\n * @see {@link operators/single}\n */\nexport const SequenceError: SequenceErrorCtor = createErrorClass(\n  (_super) =>\n    function SequenceErrorImpl(this: any, message: string) {\n      _super(this);\n      this.name = 'SequenceError';\n      this.message = message;\n    }\n);\n", "import { asyncScheduler } from '../scheduler/async';\nimport { MonoTypeOperatorFunction, SchedulerLike, OperatorFunction, ObservableInput, ObservedValueOf } from '../types';\nimport { isValidDate } from '../util/isDate';\nimport { Subscription } from '../Subscription';\nimport { operate } from '../util/lift';\nimport { Observable } from '../Observable';\nimport { innerFrom } from '../observable/innerFrom';\nimport { createErrorClass } from '../util/createErrorClass';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { executeSchedule } from '../util/executeSchedule';\n\nexport interface TimeoutConfig<T, O extends ObservableInput<unknown> = ObservableInput<T>, M = unknown> {\n  /**\n   * The time allowed between values from the source before timeout is triggered.\n   */\n  each?: number;\n\n  /**\n   * The relative time as a `number` in milliseconds, or a specific time as a `Date` object,\n   * by which the first value must arrive from the source before timeout is triggered.\n   */\n  first?: number | Date;\n\n  /**\n   * The scheduler to use with time-related operations within this operator. Defaults to {@link asyncScheduler}\n   */\n  scheduler?: SchedulerLike;\n\n  /**\n   * A factory used to create observable to switch to when timeout occurs. Provides\n   * a {@link TimeoutInfo} about the source observable's emissions and what delay or\n   * exact time triggered the timeout.\n   */\n  with?: (info: TimeoutInfo<T, M>) => O;\n\n  /**\n   * Optional additional metadata you can provide to code that handles\n   * the timeout, will be provided through the {@link TimeoutError}.\n   * This can be used to help identify the source of a timeout or pass along\n   * other information related to the timeout.\n   */\n  meta?: M;\n}\n\nexport interface TimeoutInfo<T, M = unknown> {\n  /** Optional metadata that was provided to the timeout configuration. */\n  readonly meta: M;\n  /** The number of messages seen before the timeout */\n  readonly seen: number;\n  /** The last message seen */\n  readonly lastValue: T | null;\n}\n\n/**\n * An error emitted when a timeout occurs.\n */\nexport interface TimeoutError<T = unknown, M = unknown> extends Error {\n  /**\n   * The information provided to the error by the timeout\n   * operation that created the error. Will be `null` if\n   * used directly in non-RxJS code with an empty constructor.\n   * (Note that using this constructor directly is not recommended,\n   * you should create your own errors)\n   */\n  info: TimeoutInfo<T, M> | null;\n}\n\nexport interface TimeoutErrorCtor {\n  /**\n   * @deprecated Internal implementation detail. Do not construct error instances.\n   * Cannot be tagged as internal: https://github.com/ReactiveX/rxjs/issues/6269\n   */\n  new <T = unknown, M = unknown>(info?: TimeoutInfo<T, M>): TimeoutError<T, M>;\n}\n\n/**\n * An error thrown by the {@link timeout} operator.\n *\n * Provided so users can use as a type and do quality comparisons.\n * We recommend you do not subclass this or create instances of this class directly.\n * If you have need of a error representing a timeout, you should\n * create your own error class and use that.\n *\n * @see {@link timeout}\n */\nexport const TimeoutError: TimeoutErrorCtor = createErrorClass(\n  (_super) =>\n    function TimeoutErrorImpl(this: any, info: TimeoutInfo<any> | null = null) {\n      _super(this);\n      this.message = 'Timeout has occurred';\n      this.name = 'TimeoutError';\n      this.info = info;\n    }\n);\n\n/**\n * If `with` is provided, this will return an observable that will switch to a different observable if the source\n * does not push values within the specified time parameters.\n *\n * <span class=\"informal\">The most flexible option for creating a timeout behavior.</span>\n *\n * The first thing to know about the configuration is if you do not provide a `with` property to the configuration,\n * when timeout conditions are met, this operator will emit a {@link TimeoutError}. Otherwise, it will use the factory\n * function provided by `with`, and switch your subscription to the result of that. Timeout conditions are provided by\n * the settings in `first` and `each`.\n *\n * The `first` property can be either a `Date` for a specific time, a `number` for a time period relative to the\n * point of subscription, or it can be skipped. This property is to check timeout conditions for the arrival of\n * the first value from the source _only_. The timings of all subsequent values  from the source will be checked\n * against the time period provided by `each`, if it was provided.\n *\n * The `each` property can be either a `number` or skipped. If a value for `each` is provided, it represents the amount of\n * time the resulting observable will wait between the arrival of values from the source before timing out. Note that if\n * `first` is _not_ provided, the value from `each` will be used to check timeout conditions for the arrival of the first\n * value and all subsequent values. If `first` _is_ provided, `each` will only be use to check all values after the first.\n *\n * ## Examples\n *\n * Emit a custom error if there is too much time between values\n *\n * ```ts\n * import { interval, timeout, throwError } from 'rxjs';\n *\n * class CustomTimeoutError extends Error {\n *   constructor() {\n *     super('It was too slow');\n *     this.name = 'CustomTimeoutError';\n *   }\n * }\n *\n * const slow$ = interval(900);\n *\n * slow$.pipe(\n *   timeout({\n *     each: 1000,\n *     with: () => throwError(() => new CustomTimeoutError())\n *   })\n * )\n * .subscribe({\n *   error: console.error\n * });\n * ```\n *\n * Switch to a faster observable if your source is slow.\n *\n * ```ts\n * import { interval, timeout } from 'rxjs';\n *\n * const slow$ = interval(900);\n * const fast$ = interval(500);\n *\n * slow$.pipe(\n *   timeout({\n *     each: 1000,\n *     with: () => fast$,\n *   })\n * )\n * .subscribe(console.log);\n * ```\n * @param config The configuration for the timeout.\n */\nexport function timeout<T, O extends ObservableInput<unknown>, M = unknown>(\n  config: TimeoutConfig<T, O, M> & { with: (info: TimeoutInfo<T, M>) => O }\n): OperatorFunction<T, T | ObservedValueOf<O>>;\n\n/**\n * Returns an observable that will error or switch to a different observable if the source does not push values\n * within the specified time parameters.\n *\n * <span class=\"informal\">The most flexible option for creating a timeout behavior.</span>\n *\n * The first thing to know about the configuration is if you do not provide a `with` property to the configuration,\n * when timeout conditions are met, this operator will emit a {@link TimeoutError}. Otherwise, it will use the factory\n * function provided by `with`, and switch your subscription to the result of that. Timeout conditions are provided by\n * the settings in `first` and `each`.\n *\n * The `first` property can be either a `Date` for a specific time, a `number` for a time period relative to the\n * point of subscription, or it can be skipped. This property is to check timeout conditions for the arrival of\n * the first value from the source _only_. The timings of all subsequent values  from the source will be checked\n * against the time period provided by `each`, if it was provided.\n *\n * The `each` property can be either a `number` or skipped. If a value for `each` is provided, it represents the amount of\n * time the resulting observable will wait between the arrival of values from the source before timing out. Note that if\n * `first` is _not_ provided, the value from `each` will be used to check timeout conditions for the arrival of the first\n * value and all subsequent values. If `first` _is_ provided, `each` will only be use to check all values after the first.\n *\n * ### Handling TimeoutErrors\n *\n * If no `with` property was provided, subscriptions to the resulting observable may emit an error of {@link TimeoutError}.\n * The timeout error provides useful information you can examine when you're handling the error. The most common way to handle\n * the error would be with {@link catchError}, although you could use {@link tap} or just the error handler in your `subscribe` call\n * directly, if your error handling is only a side effect (such as notifying the user, or logging).\n *\n * In this case, you would check the error for `instanceof TimeoutError` to validate that the error was indeed from `timeout`, and\n * not from some other source. If it's not from `timeout`, you should probably rethrow it if you're in a `catchError`.\n *\n * ## Examples\n *\n * Emit a {@link TimeoutError} if the first value, and _only_ the first value, does not arrive within 5 seconds\n *\n * ```ts\n * import { interval, timeout } from 'rxjs';\n *\n * // A random interval that lasts between 0 and 10 seconds per tick\n * const source$ = interval(Math.round(Math.random() * 10_000));\n *\n * source$.pipe(\n *   timeout({ first: 5_000 })\n * )\n * .subscribe({\n *   next: console.log,\n *   error: console.error\n * });\n * ```\n *\n * Emit a {@link TimeoutError} if the source waits longer than 5 seconds between any two values or the first value\n * and subscription.\n *\n * ```ts\n * import { timer, timeout, expand } from 'rxjs';\n *\n * const getRandomTime = () => Math.round(Math.random() * 10_000);\n *\n * // An observable that waits a random amount of time between each delivered value\n * const source$ = timer(getRandomTime())\n *   .pipe(expand(() => timer(getRandomTime())));\n *\n * source$\n *   .pipe(timeout({ each: 5_000 }))\n *   .subscribe({\n *     next: console.log,\n *     error: console.error\n *   });\n * ```\n *\n * Emit a {@link TimeoutError} if the source does not emit before 7 seconds, _or_ if the source waits longer than\n * 5 seconds between any two values after the first.\n *\n * ```ts\n * import { timer, timeout, expand } from 'rxjs';\n *\n * const getRandomTime = () => Math.round(Math.random() * 10_000);\n *\n * // An observable that waits a random amount of time between each delivered value\n * const source$ = timer(getRandomTime())\n *   .pipe(expand(() => timer(getRandomTime())));\n *\n * source$\n *   .pipe(timeout({ first: 7_000, each: 5_000 }))\n *   .subscribe({\n *     next: console.log,\n *     error: console.error\n *   });\n * ```\n */\nexport function timeout<T, M = unknown>(config: Omit<TimeoutConfig<T, any, M>, 'with'>): OperatorFunction<T, T>;\n\n/**\n * Returns an observable that will error if the source does not push its first value before the specified time passed as a `Date`.\n * This is functionally the same as `timeout({ first: someDate })`.\n *\n * <span class=\"informal\">Errors if the first value doesn't show up before the given date and time</span>\n *\n * ![](timeout.png)\n *\n * @param first The date to at which the resulting observable will timeout if the source observable\n * does not emit at least one value.\n * @param scheduler The scheduler to use. Defaults to {@link asyncScheduler}.\n */\nexport function timeout<T>(first: Date, scheduler?: SchedulerLike): MonoTypeOperatorFunction<T>;\n\n/**\n * Returns an observable that will error if the source does not push a value within the specified time in milliseconds.\n * This is functionally the same as `timeout({ each: milliseconds })`.\n *\n * <span class=\"informal\">Errors if it waits too long between any value</span>\n *\n * ![](timeout.png)\n *\n * @param each The time allowed between each pushed value from the source before the resulting observable\n * will timeout.\n * @param scheduler The scheduler to use. Defaults to {@link asyncScheduler}.\n */\nexport function timeout<T>(each: number, scheduler?: SchedulerLike): MonoTypeOperatorFunction<T>;\n\n/**\n *\n * Errors if Observable does not emit a value in given time span.\n *\n * <span class=\"informal\">Timeouts on Observable that doesn't emit values fast enough.</span>\n *\n * ![](timeout.png)\n *\n * @see {@link timeoutWith}\n *\n * @return A function that returns an Observable that mirrors behaviour of the\n * source Observable, unless timeout happens when it throws an error.\n */\nexport function timeout<T, O extends ObservableInput<any>, M>(\n  config: number | Date | TimeoutConfig<T, O, M>,\n  schedulerArg?: SchedulerLike\n): OperatorFunction<T, T | ObservedValueOf<O>> {\n  // Intentionally terse code.\n  // If the first argument is a valid `Date`, then we use it as the `first` config.\n  // Otherwise, if the first argument is a `number`, then we use it as the `each` config.\n  // Otherwise, it can be assumed the first argument is the configuration object itself, and\n  // we destructure that into what we're going to use, setting important defaults as we do.\n  // NOTE: The default for `scheduler` will be the `scheduler` argument if it exists, or\n  // it will default to the `asyncScheduler`.\n  const {\n    first,\n    each,\n    with: _with = timeoutErrorFactory,\n    scheduler = schedulerArg ?? asyncScheduler,\n    meta = null!,\n  } = (isValidDate(config) ? { first: config } : typeof config === 'number' ? { each: config } : config) as TimeoutConfig<T, O, M>;\n\n  if (first == null && each == null) {\n    // Ensure timeout was provided at runtime.\n    throw new TypeError('No timeout provided.');\n  }\n\n  return operate((source, subscriber) => {\n    // This subscription encapsulates our subscription to the\n    // source for this operator. We're capturing it separately,\n    // because if there is a `with` observable to fail over to,\n    // we want to unsubscribe from our original subscription, and\n    // hand of the subscription to that one.\n    let originalSourceSubscription: Subscription;\n    // The subscription for our timeout timer. This changes\n    // every time we get a new value.\n    let timerSubscription: Subscription;\n    // A bit of state we pass to our with and error factories to\n    // tell what the last value we saw was.\n    let lastValue: T | null = null;\n    // A bit of state we pass to the with and error factories to\n    // tell how many values we have seen so far.\n    let seen = 0;\n    const startTimer = (delay: number) => {\n      timerSubscription = executeSchedule(\n        subscriber,\n        scheduler,\n        () => {\n          try {\n            originalSourceSubscription.unsubscribe();\n            innerFrom(\n              _with!({\n                meta,\n                lastValue,\n                seen,\n              })\n            ).subscribe(subscriber);\n          } catch (err) {\n            subscriber.error(err);\n          }\n        },\n        delay\n      );\n    };\n\n    originalSourceSubscription = source.subscribe(\n      createOperatorSubscriber(\n        subscriber,\n        (value: T) => {\n          // clear the timer so we can emit and start another one.\n          timerSubscription?.unsubscribe();\n          seen++;\n          // Emit\n          subscriber.next((lastValue = value));\n          // null | undefined are both < 0. Thanks, JavaScript.\n          each! > 0 && startTimer(each!);\n        },\n        undefined,\n        undefined,\n        () => {\n          if (!timerSubscription?.closed) {\n            timerSubscription?.unsubscribe();\n          }\n          // Be sure not to hold the last value in memory after unsubscription\n          // it could be quite large.\n          lastValue = null;\n        }\n      )\n    );\n\n    // Intentionally terse code.\n    // If we've `seen` a value, that means the \"first\" clause was met already, if it existed.\n    //   it also means that a timer was already started for \"each\" (in the next handler above).\n    // If `first` was provided, and it's a number, then use it.\n    // If `first` was provided and it's not a number, it's a Date, and we get the difference between it and \"now\".\n    // If `first` was not provided at all, then our first timer will be the value from `each`.\n    !seen && startTimer(first != null ? (typeof first === 'number' ? first : +first - scheduler!.now()) : each!);\n  });\n}\n\n/**\n * The default function to use to emit an error when timeout occurs and a `with` function\n * is not specified.\n * @param info The information about the timeout to pass along to the error\n */\nfunction timeoutErrorFactory(info: TimeoutInfo<any>): Observable<never> {\n  throw new TimeoutError(info);\n}\n", "import { OperatorFunction } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\nexport function map<T, R>(project: (value: T, index: number) => R): OperatorFunction<T, R>;\n/** @deprecated Use a closure instead of a `thisArg`. Signatures accepting a `thisArg` will be removed in v8. */\nexport function map<T, R, A>(project: (this: A, value: T, index: number) => R, thisArg: A): OperatorFunction<T, R>;\n\n/**\n * Applies a given `project` function to each value emitted by the source\n * Observable, and emits the resulting values as an Observable.\n *\n * <span class=\"informal\">Like [Array.prototype.map()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map),\n * it passes each source value through a transformation function to get\n * corresponding output values.</span>\n *\n * ![](map.png)\n *\n * Similar to the well known `Array.prototype.map` function, this operator\n * applies a projection to each value and emits that projection in the output\n * Observable.\n *\n * ## Example\n *\n * Map every click to the `clientX` position of that click\n *\n * ```ts\n * import { fromEvent, map } from 'rxjs';\n *\n * const clicks = fromEvent<PointerEvent>(document, 'click');\n * const positions = clicks.pipe(map(ev => ev.clientX));\n *\n * positions.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link mapTo}\n * @see {@link pluck}\n *\n * @param project The function to apply to each `value` emitted by the source\n * Observable. The `index` parameter is the number `i` for the i-th emission\n * that has happened since the subscription, starting from the number `0`.\n * @param thisArg An optional argument to define what `this` is in the\n * `project` function.\n * @return A function that returns an Observable that emits the values from the\n * source Observable transformed by the given `project` function.\n */\nexport function map<T, R>(project: (value: T, index: number) => R, thisArg?: any): OperatorFunction<T, R> {\n  return operate((source, subscriber) => {\n    // The index of the value from the source. Used with projection.\n    let index = 0;\n    // Subscribe to the source, all errors and completions are sent along\n    // to the consumer.\n    source.subscribe(\n      createOperatorSubscriber(subscriber, (value: T) => {\n        // Call the projection function with the appropriate this context,\n        // and send the resulting value to the consumer.\n        subscriber.next(project.call(thisArg, value, index++));\n      })\n    );\n  });\n}\n", "import { OperatorFunction } from \"../types\";\nimport { map } from \"../operators/map\";\n\nconst { isArray } = Array;\n\nfunction callOrApply<T, R>(fn: ((...values: T[]) => R), args: T|T[]): R {\n    return isArray(args) ? fn(...args) : fn(args);\n}\n\n/**\n * Used in several -- mostly deprecated -- situations where we need to \n * apply a list of arguments or a single argument to a result selector.\n */\nexport function mapOneOrManyArgs<T, R>(fn: ((...values: T[]) => R)): OperatorFunction<T|T[], R> {\n    return map(args => callOrApply(fn, args))\n}", "const { isArray } = Array;\nconst { getPrototypeOf, prototype: objectProto, keys: getKeys } = Object;\n\n/**\n * Used in functions where either a list of arguments, a single array of arguments, or a\n * dictionary of arguments can be returned. Returns an object with an `args` property with\n * the arguments in an array, if it is a dictionary, it will also return the `keys` in another\n * property.\n */\nexport function argsArgArrayOrObject<T, O extends Record<string, T>>(args: T[] | [O] | [T[]]): { args: T[]; keys: string[] | null } {\n  if (args.length === 1) {\n    const first = args[0];\n    if (isArray(first)) {\n      return { args: first, keys: null };\n    }\n    if (isPOJO(first)) {\n      const keys = getKeys(first);\n      return {\n        args: keys.map((key) => first[key]),\n        keys,\n      };\n    }\n  }\n\n  return { args: args as T[], keys: null };\n}\n\nfunction isPOJO(obj: any): obj is object {\n  return obj && typeof obj === 'object' && getPrototypeOf(obj) === objectProto;\n}\n", "export function createObject(keys: string[], values: any[]) {\n  return keys.reduce((result, key, i) => ((result[key] = values[i]), result), {} as any);\n}\n", "import { Observable } from '../Observable';\nimport { ObservableInput, SchedulerLike, ObservedValueOf, ObservableInputTuple } from '../types';\nimport { argsArgArrayOrObject } from '../util/argsArgArrayOrObject';\nimport { Subscriber } from '../Subscriber';\nimport { from } from './from';\nimport { identity } from '../util/identity';\nimport { Subscription } from '../Subscription';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\nimport { popResultSelector, popScheduler } from '../util/args';\nimport { createObject } from '../util/createObject';\nimport { createOperatorSubscriber } from '../operators/OperatorSubscriber';\nimport { AnyCatcher } from '../AnyCatcher';\nimport { executeSchedule } from '../util/executeSchedule';\n\n// combineLatest(any)\n// We put this first because we need to catch cases where the user has supplied\n// _exactly `any`_ as the argument. Since `any` literally matches _anything_,\n// we don't want it to randomly hit one of the other type signatures below,\n// as we have no idea at build-time what type we should be returning when given an any.\n\n/**\n * You have passed `any` here, we can't figure out if it is\n * an array or an object, so you're getting `unknown`. Use better types.\n * @param arg Something typed as `any`\n */\nexport function combineLatest<T extends AnyCatcher>(arg: T): Observable<unknown>;\n\n// combineLatest([a, b, c])\nexport function combineLatest(sources: []): Observable<never>;\nexport function combineLatest<A extends readonly unknown[]>(sources: readonly [...ObservableInputTuple<A>]): Observable<A>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled` and `combineLatestAll`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function combineLatest<A extends readonly unknown[], R>(\n  sources: readonly [...ObservableInputTuple<A>],\n  resultSelector: (...values: A) => R,\n  scheduler: SchedulerLike\n): Observable<R>;\nexport function combineLatest<A extends readonly unknown[], R>(\n  sources: readonly [...ObservableInputTuple<A>],\n  resultSelector: (...values: A) => R\n): Observable<R>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled` and `combineLatestAll`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function combineLatest<A extends readonly unknown[]>(\n  sources: readonly [...ObservableInputTuple<A>],\n  scheduler: SchedulerLike\n): Observable<A>;\n\n// combineLatest(a, b, c)\n/** @deprecated Pass an array of sources instead. The rest-parameters signature will be removed in v8. Details: https://rxjs.dev/deprecations/array-argument */\nexport function combineLatest<A extends readonly unknown[]>(...sources: [...ObservableInputTuple<A>]): Observable<A>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled` and `combineLatestAll`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function combineLatest<A extends readonly unknown[], R>(\n  ...sourcesAndResultSelectorAndScheduler: [...ObservableInputTuple<A>, (...values: A) => R, SchedulerLike]\n): Observable<R>;\n/** @deprecated Pass an array of sources instead. The rest-parameters signature will be removed in v8. Details: https://rxjs.dev/deprecations/array-argument */\nexport function combineLatest<A extends readonly unknown[], R>(\n  ...sourcesAndResultSelector: [...ObservableInputTuple<A>, (...values: A) => R]\n): Observable<R>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled` and `combineLatestAll`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function combineLatest<A extends readonly unknown[]>(\n  ...sourcesAndScheduler: [...ObservableInputTuple<A>, SchedulerLike]\n): Observable<A>;\n\n// combineLatest({a, b, c})\nexport function combineLatest(sourcesObject: { [K in any]: never }): Observable<never>;\nexport function combineLatest<T extends Record<string, ObservableInput<any>>>(\n  sourcesObject: T\n): Observable<{ [K in keyof T]: ObservedValueOf<T[K]> }>;\n\n/**\n * Combines multiple Observables to create an Observable whose values are\n * calculated from the latest values of each of its input Observables.\n *\n * <span class=\"informal\">Whenever any input Observable emits a value, it\n * computes a formula using the latest values from all the inputs, then emits\n * the output of that formula.</span>\n *\n * ![](combineLatest.png)\n *\n * `combineLatest` combines the values from all the Observables passed in the\n * observables array. This is done by subscribing to each Observable in order and,\n * whenever any Observable emits, collecting an array of the most recent\n * values from each Observable. So if you pass `n` Observables to this operator,\n * the returned Observable will always emit an array of `n` values, in an order\n * corresponding to the order of the passed Observables (the value from the first Observable\n * will be at index 0 of the array and so on).\n *\n * Static version of `combineLatest` accepts an array of Observables. Note that an array of\n * Observables is a good choice, if you don't know beforehand how many Observables\n * you will combine. Passing an empty array will result in an Observable that\n * completes immediately.\n *\n * To ensure the output array always has the same length, `combineLatest` will\n * actually wait for all input Observables to emit at least once,\n * before it starts emitting results. This means if some Observable emits\n * values before other Observables started emitting, all these values but the last\n * will be lost. On the other hand, if some Observable does not emit a value but\n * completes, resulting Observable will complete at the same moment without\n * emitting anything, since it will now be impossible to include a value from the\n * completed Observable in the resulting array. Also, if some input Observable does\n * not emit any value and never completes, `combineLatest` will also never emit\n * and never complete, since, again, it will wait for all streams to emit some\n * value.\n *\n * If at least one Observable was passed to `combineLatest` and all passed Observables\n * emitted something, the resulting Observable will complete when all combined\n * streams complete. So even if some Observable completes, the result of\n * `combineLatest` will still emit values when other Observables do. In case\n * of a completed Observable, its value from now on will always be the last\n * emitted value. On the other hand, if any Observable errors, `combineLatest`\n * will error immediately as well, and all other Observables will be unsubscribed.\n *\n * ## Examples\n *\n * Combine two timer Observables\n *\n * ```ts\n * import { timer, combineLatest } from 'rxjs';\n *\n * const firstTimer = timer(0, 1000); // emit 0, 1, 2... after every second, starting from now\n * const secondTimer = timer(500, 1000); // emit 0, 1, 2... after every second, starting 0,5s from now\n * const combinedTimers = combineLatest([firstTimer, secondTimer]);\n * combinedTimers.subscribe(value => console.log(value));\n * // Logs\n * // [0, 0] after 0.5s\n * // [1, 0] after 1s\n * // [1, 1] after 1.5s\n * // [2, 1] after 2s\n * ```\n *\n * Combine a dictionary of Observables\n *\n * ```ts\n * import { of, delay, startWith, combineLatest } from 'rxjs';\n *\n * const observables = {\n *   a: of(1).pipe(delay(1000), startWith(0)),\n *   b: of(5).pipe(delay(5000), startWith(0)),\n *   c: of(10).pipe(delay(10000), startWith(0))\n * };\n * const combined = combineLatest(observables);\n * combined.subscribe(value => console.log(value));\n * // Logs\n * // { a: 0, b: 0, c: 0 } immediately\n * // { a: 1, b: 0, c: 0 } after 1s\n * // { a: 1, b: 5, c: 0 } after 5s\n * // { a: 1, b: 5, c: 10 } after 10s\n * ```\n *\n * Combine an array of Observables\n *\n * ```ts\n * import { of, delay, startWith, combineLatest } from 'rxjs';\n *\n * const observables = [1, 5, 10].map(\n *   n => of(n).pipe(\n *     delay(n * 1000), // emit 0 and then emit n after n seconds\n *     startWith(0)\n *   )\n * );\n * const combined = combineLatest(observables);\n * combined.subscribe(value => console.log(value));\n * // Logs\n * // [0, 0, 0] immediately\n * // [1, 0, 0] after 1s\n * // [1, 5, 0] after 5s\n * // [1, 5, 10] after 10s\n * ```\n *\n * Use map operator to dynamically calculate the Body-Mass Index\n *\n * ```ts\n * import { of, combineLatest, map } from 'rxjs';\n *\n * const weight = of(70, 72, 76, 79, 75);\n * const height = of(1.76, 1.77, 1.78);\n * const bmi = combineLatest([weight, height]).pipe(\n *   map(([w, h]) => w / (h * h)),\n * );\n * bmi.subscribe(x => console.log('BMI is ' + x));\n *\n * // With output to console:\n * // BMI is 24.212293388429753\n * // BMI is 23.93948099205209\n * // BMI is 23.671253629592222\n * ```\n *\n * @see {@link combineLatestAll}\n * @see {@link merge}\n * @see {@link withLatestFrom}\n *\n * @param args Any number of `ObservableInput`s provided either as an array or as an object\n * to combine with each other. If the last parameter is the function, it will be used to project the\n * values from the combined latest values into a new value on the output Observable.\n * @return An Observable of projected values from the most recent values from each `ObservableInput`,\n * or an array of the most recent values from each `ObservableInput`.\n */\nexport function combineLatest<O extends ObservableInput<any>, R>(...args: any[]): Observable<R> | Observable<ObservedValueOf<O>[]> {\n  const scheduler = popScheduler(args);\n  const resultSelector = popResultSelector(args);\n\n  const { args: observables, keys } = argsArgArrayOrObject(args);\n\n  if (observables.length === 0) {\n    // If no observables are passed, or someone has passed an empty array\n    // of observables, or even an empty object POJO, we need to just\n    // complete (EMPTY), but we have to honor the scheduler provided if any.\n    return from([], scheduler as any);\n  }\n\n  const result = new Observable<ObservedValueOf<O>[]>(\n    combineLatestInit(\n      observables as ObservableInput<ObservedValueOf<O>>[],\n      scheduler,\n      keys\n        ? // A handler for scrubbing the array of args into a dictionary.\n          (values) => createObject(keys, values)\n        : // A passthrough to just return the array\n          identity\n    )\n  );\n\n  return resultSelector ? (result.pipe(mapOneOrManyArgs(resultSelector)) as Observable<R>) : result;\n}\n\nexport function combineLatestInit(\n  observables: ObservableInput<any>[],\n  scheduler?: SchedulerLike,\n  valueTransform: (values: any[]) => any = identity\n) {\n  return (subscriber: Subscriber<any>) => {\n    // The outer subscription. We're capturing this in a function\n    // because we may have to schedule it.\n    maybeSchedule(\n      scheduler,\n      () => {\n        const { length } = observables;\n        // A store for the values each observable has emitted so far. We match observable to value on index.\n        const values = new Array(length);\n        // The number of currently active subscriptions, as they complete, we decrement this number to see if\n        // we are all done combining values, so we can complete the result.\n        let active = length;\n        // The number of inner sources that still haven't emitted the first value\n        // We need to track this because all sources need to emit one value in order\n        // to start emitting values.\n        let remainingFirstValues = length;\n        // The loop to kick off subscription. We're keying everything on index `i` to relate the observables passed\n        // in to the slot in the output array or the key in the array of keys in the output dictionary.\n        for (let i = 0; i < length; i++) {\n          maybeSchedule(\n            scheduler,\n            () => {\n              const source = from(observables[i], scheduler as any);\n              let hasFirstValue = false;\n              source.subscribe(\n                createOperatorSubscriber(\n                  subscriber,\n                  (value) => {\n                    // When we get a value, record it in our set of values.\n                    values[i] = value;\n                    if (!hasFirstValue) {\n                      // If this is our first value, record that.\n                      hasFirstValue = true;\n                      remainingFirstValues--;\n                    }\n                    if (!remainingFirstValues) {\n                      // We're not waiting for any more\n                      // first values, so we can emit!\n                      subscriber.next(valueTransform(values.slice()));\n                    }\n                  },\n                  () => {\n                    if (!--active) {\n                      // We only complete the result if we have no more active\n                      // inner observables.\n                      subscriber.complete();\n                    }\n                  }\n                )\n              );\n            },\n            subscriber\n          );\n        }\n      },\n      subscriber\n    );\n  };\n}\n\n/**\n * A small utility to handle the couple of locations where we want to schedule if a scheduler was provided,\n * but we don't if there was no scheduler.\n */\nfunction maybeSchedule(scheduler: SchedulerLike | undefined, execute: () => void, subscription: Subscription) {\n  if (scheduler) {\n    executeSchedule(subscription, scheduler, execute);\n  } else {\n    execute();\n  }\n}\n", "import { Observable } from '../Observable';\nimport { innerFrom } from '../observable/innerFrom';\nimport { Subscriber } from '../Subscriber';\nimport { ObservableInput, SchedulerLike } from '../types';\nimport { executeSchedule } from '../util/executeSchedule';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * A process embodying the general \"merge\" strategy. This is used in\n * `mergeMap` and `mergeScan` because the logic is otherwise nearly identical.\n * @param source The original source observable\n * @param subscriber The consumer subscriber\n * @param project The projection function to get our inner sources\n * @param concurrent The number of concurrent inner subscriptions\n * @param onBeforeNext Additional logic to apply before nexting to our consumer\n * @param expand If `true` this will perform an \"expand\" strategy, which differs only\n * in that it recurses, and the inner subscription must be schedule-able.\n * @param innerSubScheduler A scheduler to use to schedule inner subscriptions,\n * this is to support the expand strategy, mostly, and should be deprecated\n */\nexport function mergeInternals<T, R>(\n  source: Observable<T>,\n  subscriber: Subscriber<R>,\n  project: (value: T, index: number) => ObservableInput<R>,\n  concurrent: number,\n  onBeforeNext?: (innerValue: R) => void,\n  expand?: boolean,\n  innerSubScheduler?: SchedulerLike,\n  additionalFinalizer?: () => void\n) {\n  // Buffered values, in the event of going over our concurrency limit\n  const buffer: T[] = [];\n  // The number of active inner subscriptions.\n  let active = 0;\n  // An index to pass to our accumulator function\n  let index = 0;\n  // Whether or not the outer source has completed.\n  let isComplete = false;\n\n  /**\n   * Checks to see if we can complete our result or not.\n   */\n  const checkComplete = () => {\n    // If the outer has completed, and nothing is left in the buffer,\n    // and we don't have any active inner subscriptions, then we can\n    // Emit the state and complete.\n    if (isComplete && !buffer.length && !active) {\n      subscriber.complete();\n    }\n  };\n\n  // If we're under our concurrency limit, just start the inner subscription, otherwise buffer and wait.\n  const outerNext = (value: T) => (active < concurrent ? doInnerSub(value) : buffer.push(value));\n\n  const doInnerSub = (value: T) => {\n    // If we're expanding, we need to emit the outer values and the inner values\n    // as the inners will \"become outers\" in a way as they are recursively fed\n    // back to the projection mechanism.\n    expand && subscriber.next(value as any);\n\n    // Increment the number of active subscriptions so we can track it\n    // against our concurrency limit later.\n    active++;\n\n    // A flag used to show that the inner observable completed.\n    // This is checked during finalization to see if we should\n    // move to the next item in the buffer, if there is on.\n    let innerComplete = false;\n\n    // Start our inner subscription.\n    innerFrom(project(value, index++)).subscribe(\n      createOperatorSubscriber(\n        subscriber,\n        (innerValue) => {\n          // `mergeScan` has additional handling here. For example\n          // taking the inner value and updating state.\n          onBeforeNext?.(innerValue);\n\n          if (expand) {\n            // If we're expanding, then just recurse back to our outer\n            // handler. It will emit the value first thing.\n            outerNext(innerValue as any);\n          } else {\n            // Otherwise, emit the inner value.\n            subscriber.next(innerValue);\n          }\n        },\n        () => {\n          // Flag that we have completed, so we know to check the buffer\n          // during finalization.\n          innerComplete = true;\n        },\n        // Errors are passed to the destination.\n        undefined,\n        () => {\n          // During finalization, if the inner completed (it wasn't errored or\n          // cancelled), then we want to try the next item in the buffer if\n          // there is one.\n          if (innerComplete) {\n            // We have to wrap this in a try/catch because it happens during\n            // finalization, possibly asynchronously, and we want to pass\n            // any errors that happen (like in a projection function) to\n            // the outer Subscriber.\n            try {\n              // INNER SOURCE COMPLETE\n              // Decrement the active count to ensure that the next time\n              // we try to call `doInnerSub`, the number is accurate.\n              active--;\n              // If we have more values in the buffer, try to process those\n              // Note that this call will increment `active` ahead of the\n              // next conditional, if there were any more inner subscriptions\n              // to start.\n              while (buffer.length && active < concurrent) {\n                const bufferedValue = buffer.shift()!;\n                // Particularly for `expand`, we need to check to see if a scheduler was provided\n                // for when we want to start our inner subscription. Otherwise, we just start\n                // are next inner subscription.\n                if (innerSubScheduler) {\n                  executeSchedule(subscriber, innerSubScheduler, () => doInnerSub(bufferedValue));\n                } else {\n                  doInnerSub(bufferedValue);\n                }\n              }\n              // Check to see if we can complete, and complete if so.\n              checkComplete();\n            } catch (err) {\n              subscriber.error(err);\n            }\n          }\n        }\n      )\n    );\n  };\n\n  // Subscribe to our source observable.\n  source.subscribe(\n    createOperatorSubscriber(subscriber, outerNext, () => {\n      // Outer completed, make a note of it, and check to see if we can complete everything.\n      isComplete = true;\n      checkComplete();\n    })\n  );\n\n  // Additional finalization (for when the destination is torn down).\n  // Other finalization is added implicitly via subscription above.\n  return () => {\n    additionalFinalizer?.();\n  };\n}\n", "import { ObservableInput, OperatorFunction, ObservedValueOf } from '../types';\nimport { map } from './map';\nimport { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { mergeInternals } from './mergeInternals';\nimport { isFunction } from '../util/isFunction';\n\n/* tslint:disable:max-line-length */\nexport function mergeMap<T, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  concurrent?: number\n): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated The `resultSelector` parameter will be removed in v8. Use an inner `map` instead. Details: https://rxjs.dev/deprecations/resultSelector */\nexport function mergeMap<T, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector: undefined,\n  concurrent?: number\n): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated The `resultSelector` parameter will be removed in v8. Use an inner `map` instead. Details: https://rxjs.dev/deprecations/resultSelector */\nexport function mergeMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R,\n  concurrent?: number\n): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link mergeAll}.</span>\n *\n * ![](mergeMap.png)\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an Observable, and then merging those resulting Observables and\n * emitting the results of this merger.\n *\n * ## Example\n *\n * Map and flatten each letter to an Observable ticking every 1 second\n *\n * ```ts\n * import { of, mergeMap, interval, map } from 'rxjs';\n *\n * const letters = of('a', 'b', 'c');\n * const result = letters.pipe(\n *   mergeMap(x => interval(1000).pipe(map(i => x + i)))\n * );\n *\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // a0\n * // b0\n * // c0\n * // a1\n * // b1\n * // c1\n * // continues to list a, b, c every second with respective ascending integers\n * ```\n *\n * @see {@link concatMap}\n * @see {@link exhaustMap}\n * @see {@link merge}\n * @see {@link mergeAll}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n * @see {@link switchMap}\n *\n * @param project A function that, when applied to an item emitted by the source\n * Observable, returns an Observable.\n * @param concurrent Maximum number of `ObservableInput`s being subscribed to concurrently.\n * @return A function that returns an Observable that emits the result of\n * applying the projection function (and the optional deprecated\n * `resultSelector`) to each item emitted by the source Observable and merging\n * the results of the Observables obtained from this transformation.\n */\nexport function mergeMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector?: ((outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R) | number,\n  concurrent: number = Infinity\n): OperatorFunction<T, ObservedValueOf<O> | R> {\n  if (isFunction(resultSelector)) {\n    // DEPRECATED PATH\n    return mergeMap((a, i) => map((b: any, ii: number) => resultSelector(a, b, i, ii))(innerFrom(project(a, i))), concurrent);\n  } else if (typeof resultSelector === 'number') {\n    concurrent = resultSelector;\n  }\n\n  return operate((source, subscriber) => mergeInternals(source, subscriber, project, concurrent));\n}\n", "import { mergeMap } from './mergeMap';\nimport { identity } from '../util/identity';\nimport { OperatorFunction, ObservableInput, ObservedValueOf } from '../types';\n\n/**\n * Converts a higher-order Observable into a first-order Observable which\n * concurrently delivers all values that are emitted on the inner Observables.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables.</span>\n *\n * ![](mergeAll.png)\n *\n * `mergeAll` subscribes to an Observable that emits Observables, also known as\n * a higher-order Observable. Each time it observes one of these emitted inner\n * Observables, it subscribes to that and delivers all the values from the\n * inner Observable on the output Observable. The output Observable only\n * completes once all inner Observables have completed. Any error delivered by\n * a inner Observable will be immediately emitted on the output Observable.\n *\n * ## Examples\n *\n * Spawn a new interval Observable for each click event, and blend their outputs as one Observable\n *\n * ```ts\n * import { fromEvent, map, interval, mergeAll } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const higherOrder = clicks.pipe(map(() => interval(1000)));\n * const firstOrder = higherOrder.pipe(mergeAll());\n *\n * firstOrder.subscribe(x => console.log(x));\n * ```\n *\n * Count from 0 to 9 every second for each click, but only allow 2 concurrent timers\n *\n * ```ts\n * import { fromEvent, map, interval, take, mergeAll } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const higherOrder = clicks.pipe(\n *   map(() => interval(1000).pipe(take(10)))\n * );\n * const firstOrder = higherOrder.pipe(mergeAll(2));\n *\n * firstOrder.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link combineLatestAll}\n * @see {@link concatAll}\n * @see {@link exhaustAll}\n * @see {@link merge}\n * @see {@link mergeMap}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n * @see {@link switchAll}\n * @see {@link switchMap}\n * @see {@link zipAll}\n *\n * @param concurrent Maximum number of inner Observables being subscribed to\n * concurrently.\n * @return A function that returns an Observable that emits values coming from\n * all the inner Observables emitted by the source Observable.\n */\nexport function mergeAll<O extends ObservableInput<any>>(concurrent: number = Infinity): OperatorFunction<O, ObservedValueOf<O>> {\n  return mergeMap(identity, concurrent);\n}\n", "import { mergeAll } from './mergeAll';\nimport { OperatorFunction, ObservableInput, ObservedValueOf } from '../types';\n\n/**\n * Converts a higher-order Observable into a first-order Observable by\n * concatenating the inner Observables in order.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables by putting one\n * inner Observable after the other.</span>\n *\n * ![](concatAll.svg)\n *\n * Joins every Observable emitted by the source (a higher-order Observable), in\n * a serial fashion. It subscribes to each inner Observable only after the\n * previous inner Observable has completed, and merges all of their values into\n * the returned observable.\n *\n * __Warning:__ If the source Observable emits Observables quickly and\n * endlessly, and the inner Observables it emits generally complete slower than\n * the source emits, you can run into memory issues as the incoming Observables\n * collect in an unbounded buffer.\n *\n * Note: `concatAll` is equivalent to `mergeAll` with concurrency parameter set\n * to `1`.\n *\n * ## Example\n *\n * For each click event, tick every second from 0 to 3, with no concurrency\n *\n * ```ts\n * import { fromEvent, map, interval, take, concatAll } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const higherOrder = clicks.pipe(\n *   map(() => interval(1000).pipe(take(4)))\n * );\n * const firstOrder = higherOrder.pipe(concatAll());\n * firstOrder.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n * ```\n *\n * @see {@link combineLatestAll}\n * @see {@link concat}\n * @see {@link concatMap}\n * @see {@link concatMapTo}\n * @see {@link exhaustAll}\n * @see {@link mergeAll}\n * @see {@link switchAll}\n * @see {@link switchMap}\n * @see {@link zipAll}\n *\n * @return A function that returns an Observable emitting values from all the\n * inner Observables concatenated.\n */\nexport function concatAll<O extends ObservableInput<any>>(): OperatorFunction<O, ObservedValueOf<O>> {\n  return mergeAll(1);\n}\n", "import { Observable } from '../Observable';\nimport { ObservableInputTuple, SchedulerLike } from '../types';\nimport { concatAll } from '../operators/concatAll';\nimport { popScheduler } from '../util/args';\nimport { from } from './from';\n\nexport function concat<T extends readonly unknown[]>(...inputs: [...ObservableInputTuple<T>]): Observable<T[number]>;\nexport function concat<T extends readonly unknown[]>(\n  ...inputsAndScheduler: [...ObservableInputTuple<T>, SchedulerLike]\n): Observable<T[number]>;\n\n/**\n * Creates an output Observable which sequentially emits all values from the first given\n * Observable and then moves on to the next.\n *\n * <span class=\"informal\">Concatenates multiple Observables together by\n * sequentially emitting their values, one Observable after the other.</span>\n *\n * ![](concat.png)\n *\n * `concat` joins multiple Observables together, by subscribing to them one at a time and\n * merging their results into the output Observable. You can pass either an array of\n * Observables, or put them directly as arguments. Passing an empty array will result\n * in Observable that completes immediately.\n *\n * `concat` will subscribe to first input Observable and emit all its values, without\n * changing or affecting them in any way. When that Observable completes, it will\n * subscribe to then next Observable passed and, again, emit its values. This will be\n * repeated, until the operator runs out of Observables. When last input Observable completes,\n * `concat` will complete as well. At any given moment only one Observable passed to operator\n * emits values. If you would like to emit values from passed Observables concurrently, check out\n * {@link merge} instead, especially with optional `concurrent` parameter. As a matter of fact,\n * `concat` is an equivalent of `merge` operator with `concurrent` parameter set to `1`.\n *\n * Note that if some input Observable never completes, `concat` will also never complete\n * and Observables following the one that did not complete will never be subscribed. On the other\n * hand, if some Observable simply completes immediately after it is subscribed, it will be\n * invisible for `concat`, which will just move on to the next Observable.\n *\n * If any Observable in chain errors, instead of passing control to the next Observable,\n * `concat` will error immediately as well. Observables that would be subscribed after\n * the one that emitted error, never will.\n *\n * If you pass to `concat` the same Observable many times, its stream of values\n * will be \"replayed\" on every subscription, which means you can repeat given Observable\n * as many times as you like. If passing the same Observable to `concat` 1000 times becomes tedious,\n * you can always use {@link repeat}.\n *\n * ## Examples\n *\n * Concatenate a timer counting from 0 to 3 with a synchronous sequence from 1 to 10\n *\n * ```ts\n * import { interval, take, range, concat } from 'rxjs';\n *\n * const timer = interval(1000).pipe(take(4));\n * const sequence = range(1, 10);\n * const result = concat(timer, sequence);\n * result.subscribe(x => console.log(x));\n *\n * // results in:\n * // 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3 -immediate-> 1 ... 10\n * ```\n *\n * Concatenate 3 Observables\n *\n * ```ts\n * import { interval, take, concat } from 'rxjs';\n *\n * const timer1 = interval(1000).pipe(take(10));\n * const timer2 = interval(2000).pipe(take(6));\n * const timer3 = interval(500).pipe(take(10));\n *\n * const result = concat(timer1, timer2, timer3);\n * result.subscribe(x => console.log(x));\n *\n * // results in the following:\n * // (Prints to console sequentially)\n * // -1000ms-> 0 -1000ms-> 1 -1000ms-> ... 9\n * // -2000ms-> 0 -2000ms-> 1 -2000ms-> ... 5\n * // -500ms-> 0 -500ms-> 1 -500ms-> ... 9\n * ```\n *\n * Concatenate the same Observable to repeat it\n *\n * ```ts\n * import { interval, take, concat } from 'rxjs';\n *\n * const timer = interval(1000).pipe(take(2));\n *\n * concat(timer, timer) // concatenating the same Observable!\n *   .subscribe({\n *     next: value => console.log(value),\n *     complete: () => console.log('...and it is done!')\n *   });\n *\n * // Logs:\n * // 0 after 1s\n * // 1 after 2s\n * // 0 after 3s\n * // 1 after 4s\n * // '...and it is done!' also after 4s\n * ```\n *\n * @see {@link concatAll}\n * @see {@link concatMap}\n * @see {@link concatMapTo}\n * @see {@link startWith}\n * @see {@link endWith}\n *\n * @param args `ObservableInput`s to concatenate.\n */\nexport function concat(...args: any[]): Observable<unknown> {\n  return concatAll()(from(args, popScheduler(args)));\n}\n", "import { innerFrom } from '../observable/innerFrom';\nimport { Observable } from '../Observable';\nimport { mergeMap } from '../operators/mergeMap';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isFunction } from '../util/isFunction';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\n\n// These constants are used to create handler registry functions using array mapping below.\nconst nodeEventEmitterMethods = ['addListener', 'removeListener'] as const;\nconst eventTargetMethods = ['addEventListener', 'removeEventListener'] as const;\nconst jqueryMethods = ['on', 'off'] as const;\n\nexport interface NodeStyleEventEmitter {\n  addListener(eventName: string | symbol, handler: NodeEventHandler): this;\n  removeListener(eventName: string | symbol, handler: NodeEventHandler): this;\n}\n\nexport type NodeEventHandler = (...args: any[]) => void;\n\n// For APIs that implement `addListener` and `removeListener` methods that may\n// not use the same arguments or return EventEmitter values\n// such as React Native\nexport interface NodeCompatibleEventEmitter {\n  addListener(eventName: string, handler: NodeEventHandler): void | {};\n  removeListener(eventName: string, handler: NodeEventHandler): void | {};\n}\n\n// Use handler types like those in @types/jquery. See:\n// https://github.com/DefinitelyTyped/DefinitelyTyped/blob/847731ba1d7fa6db6b911c0e43aa0afe596e7723/types/jquery/misc.d.ts#L6395\nexport interface JQueryStyleEventEmitter<TContext, T> {\n  on(eventName: string, handler: (this: TContext, t: T, ...args: any[]) => any): void;\n  off(eventName: string, handler: (this: TContext, t: T, ...args: any[]) => any): void;\n}\n\nexport interface EventListenerObject<E> {\n  handleEvent(evt: E): void;\n}\n\nexport interface HasEventTargetAddRemove<E> {\n  addEventListener(\n    type: string,\n    listener: ((evt: E) => void) | EventListenerObject<E> | null,\n    options?: boolean | AddEventListenerOptions\n  ): void;\n  removeEventListener(\n    type: string,\n    listener: ((evt: E) => void) | EventListenerObject<E> | null,\n    options?: EventListenerOptions | boolean\n  ): void;\n}\n\nexport interface EventListenerOptions {\n  capture?: boolean;\n  passive?: boolean;\n  once?: boolean;\n}\n\nexport interface AddEventListenerOptions extends EventListenerOptions {\n  once?: boolean;\n  passive?: boolean;\n}\n\nexport function fromEvent<T>(target: HasEventTargetAddRemove<T> | ArrayLike<HasEventTargetAddRemove<T>>, eventName: string): Observable<T>;\nexport function fromEvent<T, R>(\n  target: HasEventTargetAddRemove<T> | ArrayLike<HasEventTargetAddRemove<T>>,\n  eventName: string,\n  resultSelector: (event: T) => R\n): Observable<R>;\nexport function fromEvent<T>(\n  target: HasEventTargetAddRemove<T> | ArrayLike<HasEventTargetAddRemove<T>>,\n  eventName: string,\n  options: EventListenerOptions\n): Observable<T>;\nexport function fromEvent<T, R>(\n  target: HasEventTargetAddRemove<T> | ArrayLike<HasEventTargetAddRemove<T>>,\n  eventName: string,\n  options: EventListenerOptions,\n  resultSelector: (event: T) => R\n): Observable<R>;\n\nexport function fromEvent(target: NodeStyleEventEmitter | ArrayLike<NodeStyleEventEmitter>, eventName: string): Observable<unknown>;\n/** @deprecated Do not specify explicit type parameters. Signatures with type parameters that cannot be inferred will be removed in v8. */\nexport function fromEvent<T>(target: NodeStyleEventEmitter | ArrayLike<NodeStyleEventEmitter>, eventName: string): Observable<T>;\nexport function fromEvent<R>(\n  target: NodeStyleEventEmitter | ArrayLike<NodeStyleEventEmitter>,\n  eventName: string,\n  resultSelector: (...args: any[]) => R\n): Observable<R>;\n\nexport function fromEvent(\n  target: NodeCompatibleEventEmitter | ArrayLike<NodeCompatibleEventEmitter>,\n  eventName: string\n): Observable<unknown>;\n/** @deprecated Do not specify explicit type parameters. Signatures with type parameters that cannot be inferred will be removed in v8. */\nexport function fromEvent<T>(target: NodeCompatibleEventEmitter | ArrayLike<NodeCompatibleEventEmitter>, eventName: string): Observable<T>;\nexport function fromEvent<R>(\n  target: NodeCompatibleEventEmitter | ArrayLike<NodeCompatibleEventEmitter>,\n  eventName: string,\n  resultSelector: (...args: any[]) => R\n): Observable<R>;\n\nexport function fromEvent<T>(\n  target: JQueryStyleEventEmitter<any, T> | ArrayLike<JQueryStyleEventEmitter<any, T>>,\n  eventName: string\n): Observable<T>;\nexport function fromEvent<T, R>(\n  target: JQueryStyleEventEmitter<any, T> | ArrayLike<JQueryStyleEventEmitter<any, T>>,\n  eventName: string,\n  resultSelector: (value: T, ...args: any[]) => R\n): Observable<R>;\n\n/**\n * Creates an Observable that emits events of a specific type coming from the\n * given event target.\n *\n * <span class=\"informal\">Creates an Observable from DOM events, or Node.js\n * EventEmitter events or others.</span>\n *\n * ![](fromEvent.png)\n *\n * `fromEvent` accepts as a first argument event target, which is an object with methods\n * for registering event handler functions. As a second argument it takes string that indicates\n * type of event we want to listen for. `fromEvent` supports selected types of event targets,\n * which are described in detail below. If your event target does not match any of the ones listed,\n * you should use {@link fromEventPattern}, which can be used on arbitrary APIs.\n * When it comes to APIs supported by `fromEvent`, their methods for adding and removing event\n * handler functions have different names, but they all accept a string describing event type\n * and function itself, which will be called whenever said event happens.\n *\n * Every time resulting Observable is subscribed, event handler function will be registered\n * to event target on given event type. When that event fires, value\n * passed as a first argument to registered function will be emitted by output Observable.\n * When Observable is unsubscribed, function will be unregistered from event target.\n *\n * Note that if event target calls registered function with more than one argument, second\n * and following arguments will not appear in resulting stream. In order to get access to them,\n * you can pass to `fromEvent` optional project function, which will be called with all arguments\n * passed to event handler. Output Observable will then emit value returned by project function,\n * instead of the usual value.\n *\n * Remember that event targets listed below are checked via duck typing. It means that\n * no matter what kind of object you have and no matter what environment you work in,\n * you can safely use `fromEvent` on that object if it exposes described methods (provided\n * of course they behave as was described above). So for example if Node.js library exposes\n * event target which has the same method names as DOM EventTarget, `fromEvent` is still\n * a good choice.\n *\n * If the API you use is more callback then event handler oriented (subscribed\n * callback function fires only once and thus there is no need to manually\n * unregister it), you should use {@link bindCallback} or {@link bindNodeCallback}\n * instead.\n *\n * `fromEvent` supports following types of event targets:\n *\n * **DOM EventTarget**\n *\n * This is an object with `addEventListener` and `removeEventListener` methods.\n *\n * In the browser, `addEventListener` accepts - apart from event type string and event\n * handler function arguments - optional third parameter, which is either an object or boolean,\n * both used for additional configuration how and when passed function will be called. When\n * `fromEvent` is used with event target of that type, you can provide this values\n * as third parameter as well.\n *\n * **Node.js EventEmitter**\n *\n * An object with `addListener` and `removeListener` methods.\n *\n * **JQuery-style event target**\n *\n * An object with `on` and `off` methods\n *\n * **DOM NodeList**\n *\n * List of DOM Nodes, returned for example by `document.querySelectorAll` or `Node.childNodes`.\n *\n * Although this collection is not event target in itself, `fromEvent` will iterate over all Nodes\n * it contains and install event handler function in every of them. When returned Observable\n * is unsubscribed, function will be removed from all Nodes.\n *\n * **DOM HtmlCollection**\n *\n * Just as in case of NodeList it is a collection of DOM nodes. Here as well event handler function is\n * installed and removed in each of elements.\n *\n *\n * ## Examples\n *\n * Emit clicks happening on the DOM document\n *\n * ```ts\n * import { fromEvent } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * clicks.subscribe(x => console.log(x));\n *\n * // Results in:\n * // MouseEvent object logged to console every time a click\n * // occurs on the document.\n * ```\n *\n * Use `addEventListener` with capture option\n *\n * ```ts\n * import { fromEvent } from 'rxjs';\n *\n * const div = document.createElement('div');\n * div.style.cssText = 'width: 200px; height: 200px; background: #09c;';\n * document.body.appendChild(div);\n *\n * // note optional configuration parameter which will be passed to addEventListener\n * const clicksInDocument = fromEvent(document, 'click', { capture: true });\n * const clicksInDiv = fromEvent(div, 'click');\n *\n * clicksInDocument.subscribe(() => console.log('document'));\n * clicksInDiv.subscribe(() => console.log('div'));\n *\n * // By default events bubble UP in DOM tree, so normally\n * // when we would click on div in document\n * // \"div\" would be logged first and then \"document\".\n * // Since we specified optional `capture` option, document\n * // will catch event when it goes DOWN DOM tree, so console\n * // will log \"document\" and then \"div\".\n * ```\n *\n * @see {@link bindCallback}\n * @see {@link bindNodeCallback}\n * @see {@link fromEventPattern}\n *\n * @param target The DOM EventTarget, Node.js EventEmitter, JQuery-like event target,\n * NodeList or HTMLCollection to attach the event handler to.\n * @param eventName The event name of interest, being emitted by the `target`.\n * @param options Options to pass through to the underlying `addListener`,\n * `addEventListener` or `on` functions.\n * @param resultSelector A mapping function used to transform events. It takes the\n * arguments from the event handler and should return a single value.\n * @return An Observable emitting events registered through `target`'s\n * listener handlers.\n */\nexport function fromEvent<T>(\n  target: any,\n  eventName: string,\n  options?: EventListenerOptions | ((...args: any[]) => T),\n  resultSelector?: (...args: any[]) => T\n): Observable<T> {\n  if (isFunction(options)) {\n    resultSelector = options;\n    options = undefined;\n  }\n  if (resultSelector) {\n    return fromEvent<T>(target, eventName, options as EventListenerOptions).pipe(mapOneOrManyArgs(resultSelector));\n  }\n\n  // Figure out our add and remove methods. In order to do this,\n  // we are going to analyze the target in a preferred order, if\n  // the target matches a given signature, we take the two \"add\" and \"remove\"\n  // method names and apply them to a map to create opposite versions of the\n  // same function. This is because they all operate in duplicate pairs,\n  // `addListener(name, handler)`, `removeListener(name, handler)`, for example.\n  // The call only differs by method name, as to whether or not you're adding or removing.\n  const [add, remove] =\n    // If it is an EventTarget, we need to use a slightly different method than the other two patterns.\n    isEventTarget(target)\n      ? eventTargetMethods.map((methodName) => (handler: any) => target[methodName](eventName, handler, options as EventListenerOptions))\n      : // In all other cases, the call pattern is identical with the exception of the method names.\n      isNodeStyleEventEmitter(target)\n      ? nodeEventEmitterMethods.map(toCommonHandlerRegistry(target, eventName))\n      : isJQueryStyleEventEmitter(target)\n      ? jqueryMethods.map(toCommonHandlerRegistry(target, eventName))\n      : [];\n\n  // If add is falsy, it's because we didn't match a pattern above.\n  // Check to see if it is an ArrayLike, because if it is, we want to\n  // try to apply fromEvent to all of it's items. We do this check last,\n  // because there are may be some types that are both ArrayLike *and* implement\n  // event registry points, and we'd rather delegate to that when possible.\n  if (!add) {\n    if (isArrayLike(target)) {\n      return mergeMap((subTarget: any) => fromEvent(subTarget, eventName, options as EventListenerOptions))(\n        innerFrom(target)\n      ) as Observable<T>;\n    }\n  }\n\n  // If add is falsy and we made it here, it's because we didn't\n  // match any valid target objects above.\n  if (!add) {\n    throw new TypeError('Invalid event target');\n  }\n\n  return new Observable<T>((subscriber) => {\n    // The handler we are going to register. Forwards the event object, by itself, or\n    // an array of arguments to the event handler, if there is more than one argument,\n    // to the consumer.\n    const handler = (...args: any[]) => subscriber.next(1 < args.length ? args : args[0]);\n    // Do the work of adding the handler to the target.\n    add(handler);\n    // When we finalize, we want to remove the handler and free up memory.\n    return () => remove!(handler);\n  });\n}\n\n/**\n * Used to create `add` and `remove` functions to register and unregister event handlers\n * from a target in the most common handler pattern, where there are only two arguments.\n * (e.g.  `on(name, fn)`, `off(name, fn)`, `addListener(name, fn)`, or `removeListener(name, fn)`)\n * @param target The target we're calling methods on\n * @param eventName The event name for the event we're creating register or unregister functions for\n */\nfunction toCommonHandlerRegistry(target: any, eventName: string) {\n  return (methodName: string) => (handler: any) => target[methodName](eventName, handler);\n}\n\n/**\n * Checks to see if the target implements the required node-style EventEmitter methods\n * for adding and removing event handlers.\n * @param target the object to check\n */\nfunction isNodeStyleEventEmitter(target: any): target is NodeStyleEventEmitter {\n  return isFunction(target.addListener) && isFunction(target.removeListener);\n}\n\n/**\n * Checks to see if the target implements the required jQuery-style EventEmitter methods\n * for adding and removing event handlers.\n * @param target the object to check\n */\nfunction isJQueryStyleEventEmitter(target: any): target is JQueryStyleEventEmitter<any, any> {\n  return isFunction(target.on) && isFunction(target.off);\n}\n\n/**\n * Checks to see if the target implements the required EventTarget methods\n * for adding and removing event handlers.\n * @param target the object to check\n */\nfunction isEventTarget(target: any): target is HasEventTargetAddRemove<any> {\n  return isFunction(target.addEventListener) && isFunction(target.removeEventListener);\n}\n", "import { Observable } from '../Observable';\nimport { isFunction } from '../util/isFunction';\nimport { NodeEventHandler } from './fromEvent';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\n\n/* tslint:disable:max-line-length */\nexport function fromEventPattern<T>(\n  addHandler: (handler: NodeEventHandler) => any,\n  removeHandler?: (handler: NodeEventHandler, signal?: any) => void\n): Observable<T>;\nexport function fromEventPattern<T>(\n  addHandler: (handler: NodeEventHandler) => any,\n  removeHandler?: (handler: NodeEventHandler, signal?: any) => void,\n  resultSelector?: (...args: any[]) => T\n): Observable<T>;\n/* tslint:enable:max-line-length */\n\n/**\n * Creates an Observable from an arbitrary API for registering event handlers.\n *\n * <span class=\"informal\">When that method for adding event handler was something {@link fromEvent}\n * was not prepared for.</span>\n *\n * ![](fromEventPattern.png)\n *\n * `fromEventPattern` allows you to convert into an Observable any API that supports registering handler functions\n * for events. It is similar to {@link fromEvent}, but far\n * more flexible. In fact, all use cases of {@link fromEvent} could be easily handled by\n * `fromEventPattern` (although in slightly more verbose way).\n *\n * This operator accepts as a first argument an `addHandler` function, which will be injected with\n * handler parameter. That handler is actually an event handler function that you now can pass\n * to API expecting it. `addHandler` will be called whenever Observable\n * returned by the operator is subscribed, so registering handler in API will not\n * necessarily happen when `fromEventPattern` is called.\n *\n * After registration, every time an event that we listen to happens,\n * Observable returned by `fromEventPattern` will emit value that event handler\n * function was called with. Note that if event handler was called with more\n * than one argument, second and following arguments will not appear in the Observable.\n *\n * If API you are using allows to unregister event handlers as well, you can pass to `fromEventPattern`\n * another function - `removeHandler` - as a second parameter. It will be injected\n * with the same handler function as before, which now you can use to unregister\n * it from the API. `removeHandler` will be called when consumer of resulting Observable\n * unsubscribes from it.\n *\n * In some APIs unregistering is actually handled differently. Method registering an event handler\n * returns some kind of token, which is later used to identify which function should\n * be unregistered or it itself has method that unregisters event handler.\n * If that is the case with your API, make sure token returned\n * by registering method is returned by `addHandler`. Then it will be passed\n * as a second argument to `removeHandler`, where you will be able to use it.\n *\n * If you need access to all event handler parameters (not only the first one),\n * or you need to transform them in any way, you can call `fromEventPattern` with optional\n * third parameter - project function which will accept all arguments passed to\n * event handler when it is called. Whatever is returned from project function will appear on\n * resulting stream instead of usual event handlers first argument. This means\n * that default project can be thought of as function that takes its first parameter\n * and ignores the rest.\n *\n * ## Examples\n *\n * Emits clicks happening on the DOM document\n *\n * ```ts\n * import { fromEventPattern } from 'rxjs';\n *\n * function addClickHandler(handler) {\n *   document.addEventListener('click', handler);\n * }\n *\n * function removeClickHandler(handler) {\n *   document.removeEventListener('click', handler);\n * }\n *\n * const clicks = fromEventPattern(\n *   addClickHandler,\n *   removeClickHandler\n * );\n * clicks.subscribe(x => console.log(x));\n *\n * // Whenever you click anywhere in the browser, DOM MouseEvent\n * // object will be logged.\n * ```\n *\n * Use with API that returns cancellation token\n *\n * ```ts\n * import { fromEventPattern } from 'rxjs';\n *\n * const token = someAPI.registerEventHandler(function() {});\n * someAPI.unregisterEventHandler(token); // this APIs cancellation method accepts\n *                                        // not handler itself, but special token.\n *\n * const someAPIObservable = fromEventPattern(\n *   function(handler) { return someAPI.registerEventHandler(handler); }, // Note that we return the token here...\n *   function(handler, token) { someAPI.unregisterEventHandler(token); }  // ...to then use it here.\n * );\n * ```\n *\n * Use with project function\n *\n * ```ts\n * import { fromEventPattern } from 'rxjs';\n *\n * someAPI.registerEventHandler((eventType, eventMessage) => {\n *   console.log(eventType, eventMessage); // Logs 'EVENT_TYPE' 'EVENT_MESSAGE' to console.\n * });\n *\n * const someAPIObservable = fromEventPattern(\n *   handler => someAPI.registerEventHandler(handler),\n *   handler => someAPI.unregisterEventHandler(handler)\n *   (eventType, eventMessage) => eventType + ' --- ' + eventMessage // without that function only 'EVENT_TYPE'\n * );                                                                // would be emitted by the Observable\n *\n * someAPIObservable.subscribe(value => console.log(value));\n *\n * // Logs:\n * // 'EVENT_TYPE --- EVENT_MESSAGE'\n * ```\n *\n * @see {@link fromEvent}\n * @see {@link bindCallback}\n * @see {@link bindNodeCallback}\n *\n * @param addHandler A function that takes a `handler` function as argument and attaches it\n * somehow to the actual source of events.\n * @param removeHandler A function that takes a `handler` function as an argument and removes\n * it from the event source. If `addHandler` returns some kind of token, `removeHandler` function\n * will have it as a second parameter.\n * @param resultSelector A function to transform results. It takes the arguments from the event\n * handler and should return a single value.\n * @return Observable which, when an event happens, emits first parameter passed to registered\n * event handler. Alternatively it emits whatever project function returns at that moment.\n */\nexport function fromEventPattern<T>(\n  addHandler: (handler: NodeEventHandler) => any,\n  removeHandler?: (handler: NodeEventHandler, signal?: any) => void,\n  resultSelector?: (...args: any[]) => T\n): Observable<T | T[]> {\n  if (resultSelector) {\n    return fromEventPattern<T>(addHandler, removeHandler).pipe(mapOneOrManyArgs(resultSelector));\n  }\n\n  return new Observable<T | T[]>((subscriber) => {\n    const handler = (...e: T[]) => subscriber.next(e.length === 1 ? e[0] : e);\n    const retValue = addHandler(handler);\n    return isFunction(removeHandler) ? () => removeHandler(handler, retValue) : undefined;\n  });\n}\n", "import { Observable } from '../Observable';\nimport { ObservableInput, ObservableInputTuple, SchedulerLike } from '../types';\nimport { mergeAll } from '../operators/mergeAll';\nimport { innerFrom } from './innerFrom';\nimport { EMPTY } from './empty';\nimport { popNumber, popScheduler } from '../util/args';\nimport { from } from './from';\n\nexport function merge<A extends readonly unknown[]>(...sources: [...ObservableInputTuple<A>]): Observable<A[number]>;\nexport function merge<A extends readonly unknown[]>(...sourcesAndConcurrency: [...ObservableInputTuple<A>, number?]): Observable<A[number]>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled` and `mergeAll`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function merge<A extends readonly unknown[]>(\n  ...sourcesAndScheduler: [...ObservableInputTuple<A>, SchedulerLike?]\n): Observable<A[number]>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled` and `mergeAll`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function merge<A extends readonly unknown[]>(\n  ...sourcesAndConcurrencyAndScheduler: [...ObservableInputTuple<A>, number?, SchedulerLike?]\n): Observable<A[number]>;\n\n/**\n * Creates an output Observable which concurrently emits all values from every\n * given input Observable.\n *\n * <span class=\"informal\">Flattens multiple Observables together by blending\n * their values into one Observable.</span>\n *\n * ![](merge.png)\n *\n * `merge` subscribes to each given input Observable (as arguments), and simply\n * forwards (without doing any transformation) all the values from all the input\n * Observables to the output Observable. The output Observable only completes\n * once all input Observables have completed. Any error delivered by an input\n * Observable will be immediately emitted on the output Observable.\n *\n * ## Examples\n *\n * Merge together two Observables: 1s interval and clicks\n *\n * ```ts\n * import { merge, fromEvent, interval } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const timer = interval(1000);\n * const clicksOrTimer = merge(clicks, timer);\n * clicksOrTimer.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // timer will emit ascending values, one every second(1000ms) to console\n * // clicks logs MouseEvents to console every time the \"document\" is clicked\n * // Since the two streams are merged you see these happening\n * // as they occur.\n * ```\n *\n * Merge together 3 Observables, but run only 2 concurrently\n *\n * ```ts\n * import { interval, take, merge } from 'rxjs';\n *\n * const timer1 = interval(1000).pipe(take(10));\n * const timer2 = interval(2000).pipe(take(6));\n * const timer3 = interval(500).pipe(take(10));\n *\n * const concurrent = 2; // the argument\n * const merged = merge(timer1, timer2, timer3, concurrent);\n * merged.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // - First timer1 and timer2 will run concurrently\n * // - timer1 will emit a value every 1000ms for 10 iterations\n * // - timer2 will emit a value every 2000ms for 6 iterations\n * // - after timer1 hits its max iteration, timer2 will\n * //   continue, and timer3 will start to run concurrently with timer2\n * // - when timer2 hits its max iteration it terminates, and\n * //   timer3 will continue to emit a value every 500ms until it is complete\n * ```\n *\n * @see {@link mergeAll}\n * @see {@link mergeMap}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n *\n * @param args `ObservableInput`s to merge together. If the last parameter\n * is of type number, `merge` will use it to limit number of concurrently\n * subscribed `ObservableInput`s. If the last parameter is {@link SchedulerLike},\n * it will be used for scheduling the emission of values.\n * @return An Observable that emits items that are the result of every input Observable.\n */\nexport function merge(...args: (ObservableInput<unknown> | number | SchedulerLike)[]): Observable<unknown> {\n  const scheduler = popScheduler(args);\n  const concurrent = popNumber(args, Infinity);\n  const sources = args as ObservableInput<unknown>[];\n  return !sources.length\n    ? // No source provided\n      EMPTY\n    : sources.length === 1\n    ? // One source? Just return it.\n      innerFrom(sources[0])\n    : // Merge all sources\n      mergeAll(concurrent)(from(sources, scheduler));\n}\n", "import { Observable } from '../Observable';\nimport { noop } from '../util/noop';\n\n/**\n * An Observable that emits no items to the Observer and never completes.\n *\n * ![](never.png)\n *\n * A simple Observable that emits neither values nor errors nor the completion\n * notification. It can be used for testing purposes or for composing with other\n * Observables. Please note that by never emitting a complete notification, this\n * Observable keeps the subscription from being disposed automatically.\n * Subscriptions need to be manually disposed.\n *\n * ##  Example\n *\n * Emit the number 7, then never emit anything else (not even complete)\n *\n * ```ts\n * import { NEVER, startWith } from 'rxjs';\n *\n * const info = () => console.log('Will not be called');\n *\n * const result = NEVER.pipe(startWith(7));\n * result.subscribe({\n *   next: x => console.log(x),\n *   error: info,\n *   complete: info\n * });\n * ```\n *\n * @see {@link Observable}\n * @see {@link EMPTY}\n * @see {@link of}\n * @see {@link throwError}\n */\nexport const NEVER = new Observable<never>(noop);\n\n/**\n * @deprecated Replaced with the {@link NEVER} constant. Will be removed in v8.\n */\nexport function never() {\n  return NEVER;\n}\n", "import { mergeMap } from './mergeMap';\nimport { ObservableInput, OperatorFunction, ObservedValueOf } from '../types';\nimport { isFunction } from '../util/isFunction';\n\n/* tslint:disable:max-line-length */\nexport function concatMap<T, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O\n): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated The `resultSelector` parameter will be removed in v8. Use an inner `map` instead. Details: https://rxjs.dev/deprecations/resultSelector */\nexport function concatMap<T, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector: undefined\n): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated The `resultSelector` parameter will be removed in v8. Use an inner `map` instead. Details: https://rxjs.dev/deprecations/resultSelector */\nexport function concatMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R\n): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable, in a serialized fashion waiting for each one to complete before\n * merging the next.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link concatAll}.</span>\n *\n * ![](concatMap.png)\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. Each new inner Observable is\n * concatenated with the previous inner Observable.\n *\n * __Warning:__ if source values arrive endlessly and faster than their\n * corresponding inner Observables can complete, it will result in memory issues\n * as inner Observables amass in an unbounded buffer waiting for their turn to\n * be subscribed to.\n *\n * Note: `concatMap` is equivalent to `mergeMap` with concurrency parameter set\n * to `1`.\n *\n * ## Example\n *\n * For each click event, tick every second from 0 to 3, with no concurrency\n *\n * ```ts\n * import { fromEvent, concatMap, interval, take } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(\n *   concatMap(ev => interval(1000).pipe(take(4)))\n * );\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n * ```\n *\n * @see {@link concat}\n * @see {@link concatAll}\n * @see {@link concatMapTo}\n * @see {@link exhaustMap}\n * @see {@link mergeMap}\n * @see {@link switchMap}\n *\n * @param project A function that, when applied to an item emitted by the source\n * Observable, returns an Observable.\n * @return A function that returns an Observable that emits the result of\n * applying the projection function (and the optional deprecated\n * `resultSelector`) to each item emitted by the source Observable and taking\n * values from each projected inner Observable sequentially.\n */\nexport function concatMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector?: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R\n): OperatorFunction<T, ObservedValueOf<O> | R> {\n  return isFunction(resultSelector) ? mergeMap(project, resultSelector, 1) : mergeMap(project, 1);\n}\n", "import { asyncScheduler } from '../scheduler/async';\nimport { Subscription } from '../Subscription';\nimport { MonoTypeOperatorFunction, SchedulerAction, SchedulerLike } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * Emits a notification from the source Observable only after a particular time span\n * has passed without another source emission.\n *\n * <span class=\"informal\">It's like {@link delay}, but passes only the most\n * recent notification from each burst of emissions.</span>\n *\n * ![](debounceTime.png)\n *\n * `debounceTime` delays notifications emitted by the source Observable, but drops\n * previous pending delayed emissions if a new notification arrives on the source\n * Observable. This operator keeps track of the most recent notification from the\n * source Observable, and emits that only when `dueTime` has passed\n * without any other notification appearing on the source Observable. If a new value\n * appears before `dueTime` silence occurs, the previous notification will be dropped\n * and will not be emitted and a new `dueTime` is scheduled.\n * If the completing event happens during `dueTime` the last cached notification\n * is emitted before the completion event is forwarded to the output observable.\n * If the error event happens during `dueTime` or after it only the error event is\n * forwarded to the output observable. The cache notification is not emitted in this case.\n *\n * This is a rate-limiting operator, because it is impossible for more than one\n * notification to be emitted in any time window of duration `dueTime`, but it is also\n * a delay-like operator since output emissions do not occur at the same time as\n * they did on the source Observable. Optionally takes a {@link SchedulerLike} for\n * managing timers.\n *\n * ## Example\n *\n * Emit the most recent click after a burst of clicks\n *\n * ```ts\n * import { fromEvent, debounceTime } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(debounceTime(1000));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link audit}\n * @see {@link auditTime}\n * @see {@link debounce}\n * @see {@link sample}\n * @see {@link sampleTime}\n * @see {@link throttle}\n * @see {@link throttleTime}\n *\n * @param dueTime The timeout duration in milliseconds (or the time unit determined\n * internally by the optional `scheduler`) for the window of time required to wait\n * for emission silence before emitting the most recent source value.\n * @param scheduler The {@link SchedulerLike} to use for managing the timers that\n * handle the timeout for each value.\n * @return A function that returns an Observable that delays the emissions of\n * the source Observable by the specified `dueTime`, and may drop some values\n * if they occur too frequently.\n */\nexport function debounceTime<T>(dueTime: number, scheduler: SchedulerLike = asyncScheduler): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    let activeTask: Subscription | null = null;\n    let lastValue: T | null = null;\n    let lastTime: number | null = null;\n\n    const emit = () => {\n      if (activeTask) {\n        // We have a value! Free up memory first, then emit the value.\n        activeTask.unsubscribe();\n        activeTask = null;\n        const value = lastValue!;\n        lastValue = null;\n        subscriber.next(value);\n      }\n    };\n    function emitWhenIdle(this: SchedulerAction<unknown>) {\n      // This is called `dueTime` after the first value\n      // but we might have received new values during this window!\n\n      const targetTime = lastTime! + dueTime;\n      const now = scheduler.now();\n      if (now < targetTime) {\n        // On that case, re-schedule to the new target\n        activeTask = this.schedule(undefined, targetTime - now);\n        subscriber.add(activeTask);\n        return;\n      }\n\n      emit();\n    }\n\n    source.subscribe(\n      createOperatorSubscriber(\n        subscriber,\n        (value: T) => {\n          lastValue = value;\n          lastTime = scheduler.now();\n\n          // Only set up a task if it's not already up\n          if (!activeTask) {\n            activeTask = scheduler.schedule(emitWhenIdle, dueTime);\n            subscriber.add(activeTask);\n          }\n        },\n        () => {\n          // Source completed.\n          // Emit any pending debounced values then complete\n          emit();\n          subscriber.complete();\n        },\n        // Pass all errors through to consumer.\n        undefined,\n        () => {\n          // Finalization.\n          lastValue = activeTask = null;\n        }\n      )\n    );\n  });\n}\n", "import { MonoTypeOperatorFunction } from '../types';\nimport { identity } from '../util/identity';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\nexport function distinctUntilChanged<T>(comparator?: (previous: T, current: T) => boolean): MonoTypeOperatorFunction<T>;\nexport function distinctUntilChanged<T, K>(\n  comparator: (previous: K, current: K) => boolean,\n  keySelector: (value: T) => K\n): MonoTypeOperatorFunction<T>;\n\n/**\n * Returns a result {@link Observable} that emits all values pushed by the source observable if they\n * are distinct in comparison to the last value the result observable emitted.\n *\n * When provided without parameters or with the first parameter (`{@link distinctUntilChanged#comparator comparator}`),\n * it behaves like this:\n *\n * 1. It will always emit the first value from the source.\n * 2. For all subsequent values pushed by the source, they will be compared to the previously emitted values\n *    using the provided `comparator` or an `===` equality check.\n * 3. If the value pushed by the source is determined to be unequal by this check, that value is emitted and\n *    becomes the new \"previously emitted value\" internally.\n *\n * When the second parameter (`{@link distinctUntilChanged#keySelector keySelector}`) is provided, the behavior\n * changes:\n *\n * 1. It will always emit the first value from the source.\n * 2. The `keySelector` will be run against all values, including the first value.\n * 3. For all values after the first, the selected key will be compared against the key selected from\n *    the previously emitted value using the `comparator`.\n * 4. If the keys are determined to be unequal by this check, the value (not the key), is emitted\n *    and the selected key from that value is saved for future comparisons against other keys.\n *\n * ## Examples\n *\n * A very basic example with no `{@link distinctUntilChanged#comparator comparator}`. Note that `1` is emitted more than once,\n * because it's distinct in comparison to the _previously emitted_ value,\n * not in comparison to _all other emitted values_.\n *\n * ```ts\n * import { of, distinctUntilChanged } from 'rxjs';\n *\n * of(1, 1, 1, 2, 2, 2, 1, 1, 3, 3)\n *   .pipe(distinctUntilChanged())\n *   .subscribe(console.log);\n * // Logs: 1, 2, 1, 3\n * ```\n *\n * With a `{@link distinctUntilChanged#comparator comparator}`, you can do custom comparisons. Let's say\n * you only want to emit a value when all of its components have\n * changed:\n *\n * ```ts\n * import { of, distinctUntilChanged } from 'rxjs';\n *\n * const totallyDifferentBuilds$ = of(\n *   { engineVersion: '1.1.0', transmissionVersion: '1.2.0' },\n *   { engineVersion: '1.1.0', transmissionVersion: '1.4.0' },\n *   { engineVersion: '1.3.0', transmissionVersion: '1.4.0' },\n *   { engineVersion: '1.3.0', transmissionVersion: '1.5.0' },\n *   { engineVersion: '2.0.0', transmissionVersion: '1.5.0' }\n * ).pipe(\n *   distinctUntilChanged((prev, curr) => {\n *     return (\n *       prev.engineVersion === curr.engineVersion ||\n *       prev.transmissionVersion === curr.transmissionVersion\n *     );\n *   })\n * );\n *\n * totallyDifferentBuilds$.subscribe(console.log);\n *\n * // Logs:\n * // { engineVersion: '1.1.0', transmissionVersion: '1.2.0' }\n * // { engineVersion: '1.3.0', transmissionVersion: '1.4.0' }\n * // { engineVersion: '2.0.0', transmissionVersion: '1.5.0' }\n * ```\n *\n * You can also provide a custom `{@link distinctUntilChanged#comparator comparator}` to check that emitted\n * changes are only in one direction. Let's say you only want to get\n * the next record temperature:\n *\n * ```ts\n * import { of, distinctUntilChanged } from 'rxjs';\n *\n * const temps$ = of(30, 31, 20, 34, 33, 29, 35, 20);\n *\n * const recordHighs$ = temps$.pipe(\n *   distinctUntilChanged((prevHigh, temp) => {\n *     // If the current temp is less than\n *     // or the same as the previous record,\n *     // the record hasn't changed.\n *     return temp <= prevHigh;\n *   })\n * );\n *\n * recordHighs$.subscribe(console.log);\n * // Logs: 30, 31, 34, 35\n * ```\n *\n * Selecting update events only when the `updatedBy` field shows\n * the account changed hands.\n *\n * ```ts\n * import { of, distinctUntilChanged } from 'rxjs';\n *\n * // A stream of updates to a given account\n * const accountUpdates$ = of(\n *   { updatedBy: 'blesh', data: [] },\n *   { updatedBy: 'blesh', data: [] },\n *   { updatedBy: 'ncjamieson', data: [] },\n *   { updatedBy: 'ncjamieson', data: [] },\n *   { updatedBy: 'blesh', data: [] }\n * );\n *\n * // We only want the events where it changed hands\n * const changedHands$ = accountUpdates$.pipe(\n *   distinctUntilChanged(undefined, update => update.updatedBy)\n * );\n *\n * changedHands$.subscribe(console.log);\n * // Logs:\n * // { updatedBy: 'blesh', data: Array[0] }\n * // { updatedBy: 'ncjamieson', data: Array[0] }\n * // { updatedBy: 'blesh', data: Array[0] }\n * ```\n *\n * @see {@link distinct}\n * @see {@link distinctUntilKeyChanged}\n *\n * @param comparator A function used to compare the previous and current keys for\n * equality. Defaults to a `===` check.\n * @param keySelector Used to select a key value to be passed to the `comparator`.\n *\n * @return A function that returns an Observable that emits items from the\n * source Observable with distinct values.\n */\nexport function distinctUntilChanged<T, K>(\n  comparator?: (previous: K, current: K) => boolean,\n  keySelector: (value: T) => K = identity as (value: T) => K\n): MonoTypeOperatorFunction<T> {\n  // We've been allowing `null` do be passed as the `compare`, so we can't do\n  // a default value for the parameter, because that will only work\n  // for `undefined`.\n  comparator = comparator ?? defaultCompare;\n\n  return operate((source, subscriber) => {\n    // The previous key, used to compare against keys selected\n    // from new arrivals to determine \"distinctiveness\".\n    let previousKey: K;\n    // Whether or not this is the first value we've gotten.\n    let first = true;\n\n    source.subscribe(\n      createOperatorSubscriber(subscriber, (value) => {\n        // We always call the key selector.\n        const currentKey = keySelector(value);\n\n        // If it's the first value, we always emit it.\n        // Otherwise, we compare this key to the previous key, and\n        // if the comparer returns false, we emit.\n        if (first || !comparator!(previousKey, currentKey)) {\n          // Update our state *before* we emit the value\n          // as emission can be the source of re-entrant code\n          // in functional libraries like this. We only really\n          // need to do this if it's the first value, or if the\n          // key we're tracking in previous needs to change.\n          first = false;\n          previousKey = currentKey;\n\n          // Emit the value!\n          subscriber.next(value);\n        }\n      })\n    );\n  });\n}\n\nfunction defaultCompare(a: any, b: any) {\n  return a === b;\n}\n", "import { distinctUntilChanged } from './distinctUntilChanged';\nimport { MonoTypeOperatorFunction } from '../types';\n\nexport function distinctUntilKeyChanged<T>(key: keyof T): MonoTypeOperatorFunction<T>;\nexport function distinctUntilKeyChanged<T, K extends keyof T>(key: K, compare: (x: T[K], y: T[K]) => boolean): MonoTypeOperatorFunction<T>;\n\n/**\n * Returns an Observable that emits all items emitted by the source Observable that\n * are distinct by comparison from the previous item, using a property accessed by\n * using the key provided to check if the two items are distinct.\n *\n * If a comparator function is provided, then it will be called for each item to\n * test for whether that value should be emitted or not.\n *\n * If a comparator function is not provided, an equality check is used by default.\n *\n * ## Examples\n *\n * An example comparing the name of persons\n *\n * ```ts\n * import { of, distinctUntilKeyChanged } from 'rxjs';\n *\n * of(\n *   { age: 4, name: 'Foo' },\n *   { age: 7, name: 'Bar' },\n *   { age: 5, name: 'Foo' },\n *   { age: 6, name: 'Foo' }\n * ).pipe(\n *   distinctUntilKeyChanged('name')\n * )\n * .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo' }\n * // { age: 7, name: 'Bar' }\n * // { age: 5, name: 'Foo' }\n * ```\n *\n * An example comparing the first letters of the name\n *\n * ```ts\n * import { of, distinctUntilKeyChanged } from 'rxjs';\n *\n * of(\n *   { age: 4, name: 'Foo1' },\n *   { age: 7, name: 'Bar' },\n *   { age: 5, name: 'Foo2' },\n *   { age: 6, name: 'Foo3' }\n * ).pipe(\n *   distinctUntilKeyChanged('name', (x, y) => x.substring(0, 3) === y.substring(0, 3))\n * )\n * .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo1' }\n * // { age: 7, name: 'Bar' }\n * // { age: 5, name: 'Foo2' }\n * ```\n *\n * @see {@link distinct}\n * @see {@link distinctUntilChanged}\n *\n * @param key String key for object property lookup on each item.\n * @param compare Optional comparison function called to test if an item is distinct\n * from the previous item in the source.\n * @return A function that returns an Observable that emits items from the source\n * Observable with distinct values based on the key specified.\n */\nexport function distinctUntilKeyChanged<T, K extends keyof T>(\n  key: K,\n  compare?: (x: T[K], y: T[K]) => boolean\n): MonoTypeOperatorFunction<T> {\n  return distinctUntilChanged((x: T, y: T) => (compare ? compare(x[key], y[key]) : x[key] === y[key]));\n}\n", "import { OperatorFunction } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * Groups pairs of consecutive emissions together and emits them as an array of\n * two values.\n *\n * <span class=\"informal\">Puts the current value and previous value together as\n * an array, and emits that.</span>\n *\n * ![](pairwise.png)\n *\n * The Nth emission from the source Observable will cause the output Observable\n * to emit an array [(N-1)th, Nth] of the previous and the current value, as a\n * pair. For this reason, `pairwise` emits on the second and subsequent\n * emissions from the source Observable, but not on the first emission, because\n * there is no previous value in that case.\n *\n * ## Example\n *\n * On every click (starting from the second), emit the relative distance to the previous click\n *\n * ```ts\n * import { fromEvent, pairwise, map } from 'rxjs';\n *\n * const clicks = fromEvent<PointerEvent>(document, 'click');\n * const pairs = clicks.pipe(pairwise());\n * const distance = pairs.pipe(\n *   map(([first, second]) => {\n *     const x0 = first.clientX;\n *     const y0 = first.clientY;\n *     const x1 = second.clientX;\n *     const y1 = second.clientY;\n *     return Math.sqrt(Math.pow(x0 - x1, 2) + Math.pow(y0 - y1, 2));\n *   })\n * );\n *\n * distance.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n *\n * @return A function that returns an Observable of pairs (as arrays) of\n * consecutive values from the source Observable.\n */\nexport function pairwise<T>(): OperatorFunction<T, [T, T]> {\n  return operate((source, subscriber) => {\n    let prev: T;\n    let hasPrev = false;\n    source.subscribe(\n      createOperatorSubscriber(subscriber, (value) => {\n        const p = prev;\n        prev = value;\n        hasPrev && subscriber.next([p, value]);\n        hasPrev = true;\n      })\n    );\n  });\n}\n", "import { innerFrom } from '../observable/innerFrom';\nimport { Subject } from '../Subject';\nimport { SafeSubscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { MonoTypeOperatorFunction, SubjectLike, ObservableInput } from '../types';\nimport { operate } from '../util/lift';\n\nexport interface ShareConfig<T> {\n  /**\n   * The factory used to create the subject that will connect the source observable to\n   * multicast consumers.\n   */\n  connector?: () => SubjectLike<T>;\n  /**\n   * If `true`, the resulting observable will reset internal state on error from source and return to a \"cold\" state. This\n   * allows the resulting observable to be \"retried\" in the event of an error.\n   * If `false`, when an error comes from the source it will push the error into the connecting subject, and the subject\n   * will remain the connecting subject, meaning the resulting observable will not go \"cold\" again, and subsequent retries\n   * or resubscriptions will resubscribe to that same subject. In all cases, RxJS subjects will emit the same error again, however\n   * {@link ReplaySubject} will also push its buffered values before pushing the error.\n   * It is also possible to pass a notifier factory returning an `ObservableInput` instead which grants more fine-grained\n   * control over how and when the reset should happen. This allows behaviors like conditional or delayed resets.\n   */\n  resetOnError?: boolean | ((error: any) => ObservableInput<any>);\n  /**\n   * If `true`, the resulting observable will reset internal state on completion from source and return to a \"cold\" state. This\n   * allows the resulting observable to be \"repeated\" after it is done.\n   * If `false`, when the source completes, it will push the completion through the connecting subject, and the subject\n   * will remain the connecting subject, meaning the resulting observable will not go \"cold\" again, and subsequent repeats\n   * or resubscriptions will resubscribe to that same subject.\n   * It is also possible to pass a notifier factory returning an `ObservableInput` instead which grants more fine-grained\n   * control over how and when the reset should happen. This allows behaviors like conditional or delayed resets.\n   */\n  resetOnComplete?: boolean | (() => ObservableInput<any>);\n  /**\n   * If `true`, when the number of subscribers to the resulting observable reaches zero due to those subscribers unsubscribing, the\n   * internal state will be reset and the resulting observable will return to a \"cold\" state. This means that the next\n   * time the resulting observable is subscribed to, a new subject will be created and the source will be subscribed to\n   * again.\n   * If `false`, when the number of subscribers to the resulting observable reaches zero due to unsubscription, the subject\n   * will remain connected to the source, and new subscriptions to the result will be connected through that same subject.\n   * It is also possible to pass a notifier factory returning an `ObservableInput` instead which grants more fine-grained\n   * control over how and when the reset should happen. This allows behaviors like conditional or delayed resets.\n   */\n  resetOnRefCountZero?: boolean | (() => ObservableInput<any>);\n}\n\nexport function share<T>(): MonoTypeOperatorFunction<T>;\n\nexport function share<T>(options: ShareConfig<T>): MonoTypeOperatorFunction<T>;\n\n/**\n * Returns a new Observable that multicasts (shares) the original Observable. As long as there is at least one\n * Subscriber this Observable will be subscribed and emitting data. When all subscribers have unsubscribed it will\n * unsubscribe from the source Observable. Because the Observable is multicasting it makes the stream `hot`.\n * This is an alias for `multicast(() => new Subject()), refCount()`.\n *\n * The subscription to the underlying source Observable can be reset (unsubscribe and resubscribe for new subscribers),\n * if the subscriber count to the shared observable drops to 0, or if the source Observable errors or completes. It is\n * possible to use notifier factories for the resets to allow for behaviors like conditional or delayed resets. Please\n * note that resetting on error or complete of the source Observable does not behave like a transparent retry or restart\n * of the source because the error or complete will be forwarded to all subscribers and their subscription will be\n * closed. Only new subscribers after a reset on error or complete happened will cause a fresh subscription to the\n * source. To achieve transparent retries or restarts pipe the source through appropriate operators before sharing.\n *\n * ![](share.png)\n *\n * ## Example\n *\n * Generate new multicast Observable from the `source` Observable value\n *\n * ```ts\n * import { interval, tap, map, take, share } from 'rxjs';\n *\n * const source = interval(1000).pipe(\n *   tap(x => console.log('Processing: ', x)),\n *   map(x => x * x),\n *   take(6),\n *   share()\n * );\n *\n * source.subscribe(x => console.log('subscription 1: ', x));\n * source.subscribe(x => console.log('subscription 2: ', x));\n *\n * // Logs:\n * // Processing: 0\n * // subscription 1: 0\n * // subscription 2: 0\n * // Processing: 1\n * // subscription 1: 1\n * // subscription 2: 1\n * // Processing: 2\n * // subscription 1: 4\n * // subscription 2: 4\n * // Processing: 3\n * // subscription 1: 9\n * // subscription 2: 9\n * // Processing: 4\n * // subscription 1: 16\n * // subscription 2: 16\n * // Processing: 5\n * // subscription 1: 25\n * // subscription 2: 25\n * ```\n *\n * ## Example with notifier factory: Delayed reset\n *\n * ```ts\n * import { interval, take, share, timer } from 'rxjs';\n *\n * const source = interval(1000).pipe(\n *   take(3),\n *   share({\n *     resetOnRefCountZero: () => timer(1000)\n *   })\n * );\n *\n * const subscriptionOne = source.subscribe(x => console.log('subscription 1: ', x));\n * setTimeout(() => subscriptionOne.unsubscribe(), 1300);\n *\n * setTimeout(() => source.subscribe(x => console.log('subscription 2: ', x)), 1700);\n *\n * setTimeout(() => source.subscribe(x => console.log('subscription 3: ', x)), 5000);\n *\n * // Logs:\n * // subscription 1:  0\n * // (subscription 1 unsubscribes here)\n * // (subscription 2 subscribes here ~400ms later, source was not reset)\n * // subscription 2:  1\n * // subscription 2:  2\n * // (subscription 2 unsubscribes here)\n * // (subscription 3 subscribes here ~2000ms later, source did reset before)\n * // subscription 3:  0\n * // subscription 3:  1\n * // subscription 3:  2\n * ```\n *\n * @see {@link shareReplay}\n *\n * @return A function that returns an Observable that mirrors the source.\n */\nexport function share<T>(options: ShareConfig<T> = {}): MonoTypeOperatorFunction<T> {\n  const { connector = () => new Subject<T>(), resetOnError = true, resetOnComplete = true, resetOnRefCountZero = true } = options;\n  // It's necessary to use a wrapper here, as the _operator_ must be\n  // referentially transparent. Otherwise, it cannot be used in calls to the\n  // static `pipe` function - to create a partial pipeline.\n  //\n  // The _operator function_ - the function returned by the _operator_ - will\n  // not be referentially transparent - as it shares its source - but the\n  // _operator function_ is called when the complete pipeline is composed via a\n  // call to a source observable's `pipe` method - not when the static `pipe`\n  // function is called.\n  return (wrapperSource) => {\n    let connection: SafeSubscriber<T> | undefined;\n    let resetConnection: Subscription | undefined;\n    let subject: SubjectLike<T> | undefined;\n    let refCount = 0;\n    let hasCompleted = false;\n    let hasErrored = false;\n\n    const cancelReset = () => {\n      resetConnection?.unsubscribe();\n      resetConnection = undefined;\n    };\n    // Used to reset the internal state to a \"cold\"\n    // state, as though it had never been subscribed to.\n    const reset = () => {\n      cancelReset();\n      connection = subject = undefined;\n      hasCompleted = hasErrored = false;\n    };\n    const resetAndUnsubscribe = () => {\n      // We need to capture the connection before\n      // we reset (if we need to reset).\n      const conn = connection;\n      reset();\n      conn?.unsubscribe();\n    };\n\n    return operate<T, T>((source, subscriber) => {\n      refCount++;\n      if (!hasErrored && !hasCompleted) {\n        cancelReset();\n      }\n\n      // Create the subject if we don't have one yet. Grab a local reference to\n      // it as well, which avoids non-null assertions when using it and, if we\n      // connect to it now, then error/complete need a reference after it was\n      // reset.\n      const dest = (subject = subject ?? connector());\n\n      // Add the finalization directly to the subscriber - instead of returning it -\n      // so that the handling of the subscriber's unsubscription will be wired\n      // up _before_ the subscription to the source occurs. This is done so that\n      // the assignment to the source connection's `closed` property will be seen\n      // by synchronous firehose sources.\n      subscriber.add(() => {\n        refCount--;\n\n        // If we're resetting on refCount === 0, and it's 0, we only want to do\n        // that on \"unsubscribe\", really. Resetting on error or completion is a different\n        // configuration.\n        if (refCount === 0 && !hasErrored && !hasCompleted) {\n          resetConnection = handleReset(resetAndUnsubscribe, resetOnRefCountZero);\n        }\n      });\n\n      // The following line adds the subscription to the subscriber passed.\n      // Basically, `subscriber === dest.subscribe(subscriber)` is `true`.\n      dest.subscribe(subscriber);\n\n      if (\n        !connection &&\n        // Check this shareReplay is still activate - it can be reset to 0\n        // and be \"unsubscribed\" _before_ it actually subscribes.\n        // If we were to subscribe then, it'd leak and get stuck.\n        refCount > 0\n      ) {\n        // We need to create a subscriber here - rather than pass an observer and\n        // assign the returned subscription to connection - because it's possible\n        // for reentrant subscriptions to the shared observable to occur and in\n        // those situations we want connection to be already-assigned so that we\n        // don't create another connection to the source.\n        connection = new SafeSubscriber({\n          next: (value) => dest.next(value),\n          error: (err) => {\n            hasErrored = true;\n            cancelReset();\n            resetConnection = handleReset(reset, resetOnError, err);\n            dest.error(err);\n          },\n          complete: () => {\n            hasCompleted = true;\n            cancelReset();\n            resetConnection = handleReset(reset, resetOnComplete);\n            dest.complete();\n          },\n        });\n        innerFrom(source).subscribe(connection);\n      }\n    })(wrapperSource);\n  };\n}\n\nfunction handleReset<T extends unknown[] = never[]>(\n  reset: () => void,\n  on: boolean | ((...args: T) => ObservableInput<any>),\n  ...args: T\n): Subscription | undefined {\n  if (on === true) {\n    reset();\n    return;\n  }\n\n  if (on === false) {\n    return;\n  }\n\n  const onSubscriber = new SafeSubscriber({\n    next: () => {\n      onSubscriber.unsubscribe();\n      reset();\n    },\n  });\n\n  return innerFrom(on(...args)).subscribe(onSubscriber);\n}\n", "import { ReplaySubject } from '../ReplaySubject';\nimport { MonoTypeOperatorFunction, SchedulerLike } from '../types';\nimport { share } from './share';\n\nexport interface ShareReplayConfig {\n  bufferSize?: number;\n  windowTime?: number;\n  refCount: boolean;\n  scheduler?: SchedulerLike;\n}\n\nexport function shareReplay<T>(config: ShareReplayConfig): MonoTypeOperatorFunction<T>;\nexport function shareReplay<T>(bufferSize?: number, windowTime?: number, scheduler?: SchedulerLike): MonoTypeOperatorFunction<T>;\n\n/**\n * Share source and replay specified number of emissions on subscription.\n *\n * This operator is a specialization of `replay` that connects to a source observable\n * and multicasts through a `ReplaySubject` constructed with the specified arguments.\n * A successfully completed source will stay cached in the `shareReplay`ed observable forever,\n * but an errored source can be retried.\n *\n * ## Why use `shareReplay`?\n *\n * You generally want to use `shareReplay` when you have side-effects or taxing computations\n * that you do not wish to be executed amongst multiple subscribers.\n * It may also be valuable in situations where you know you will have late subscribers to\n * a stream that need access to previously emitted values.\n * This ability to replay values on subscription is what differentiates {@link share} and `shareReplay`.\n *\n * ## Reference counting\n *\n * By default `shareReplay` will use `refCount` of false, meaning that it will _not_ unsubscribe the\n * source when the reference counter drops to zero, i.e. the inner `ReplaySubject` will _not_ be unsubscribed\n * (and potentially run for ever).\n * This is the default as it is expected that `shareReplay` is often used to keep around expensive to setup\n * observables which we want to keep running instead of having to do the expensive setup again.\n *\n * As of RXJS version 6.4.0 a new overload signature was added to allow for manual control over what\n * happens when the operators internal reference counter drops to zero.\n * If `refCount` is true, the source will be unsubscribed from once the reference count drops to zero, i.e.\n * the inner `ReplaySubject` will be unsubscribed. All new subscribers will receive value emissions from a\n * new `ReplaySubject` which in turn will cause a new subscription to the source observable.\n *\n * ## Examples\n *\n * Example with a third subscriber coming late to the party\n *\n * ```ts\n * import { interval, take, shareReplay } from 'rxjs';\n *\n * const shared$ = interval(2000).pipe(\n *   take(6),\n *   shareReplay(3)\n * );\n *\n * shared$.subscribe(x => console.log('sub A: ', x));\n * shared$.subscribe(y => console.log('sub B: ', y));\n *\n * setTimeout(() => {\n *   shared$.subscribe(y => console.log('sub C: ', y));\n * }, 11000);\n *\n * // Logs:\n * // (after ~2000 ms)\n * // sub A: 0\n * // sub B: 0\n * // (after ~4000 ms)\n * // sub A: 1\n * // sub B: 1\n * // (after ~6000 ms)\n * // sub A: 2\n * // sub B: 2\n * // (after ~8000 ms)\n * // sub A: 3\n * // sub B: 3\n * // (after ~10000 ms)\n * // sub A: 4\n * // sub B: 4\n * // (after ~11000 ms, sub C gets the last 3 values)\n * // sub C: 2\n * // sub C: 3\n * // sub C: 4\n * // (after ~12000 ms)\n * // sub A: 5\n * // sub B: 5\n * // sub C: 5\n * ```\n *\n * Example for `refCount` usage\n *\n * ```ts\n * import { Observable, tap, interval, shareReplay, take } from 'rxjs';\n *\n * const log = <T>(name: string, source: Observable<T>) => source.pipe(\n *   tap({\n *     subscribe: () => console.log(`${ name }: subscribed`),\n *     next: value => console.log(`${ name }: ${ value }`),\n *     complete: () => console.log(`${ name }: completed`),\n *     finalize: () => console.log(`${ name }: unsubscribed`)\n *   })\n * );\n *\n * const obs$ = log('source', interval(1000));\n *\n * const shared$ = log('shared', obs$.pipe(\n *   shareReplay({ bufferSize: 1, refCount: true }),\n *   take(2)\n * ));\n *\n * shared$.subscribe(x => console.log('sub A: ', x));\n * shared$.subscribe(y => console.log('sub B: ', y));\n *\n * // PRINTS:\n * // shared: subscribed <-- reference count = 1\n * // source: subscribed\n * // shared: subscribed <-- reference count = 2\n * // source: 0\n * // shared: 0\n * // sub A: 0\n * // shared: 0\n * // sub B: 0\n * // source: 1\n * // shared: 1\n * // sub A: 1\n * // shared: completed <-- take(2) completes the subscription for sub A\n * // shared: unsubscribed <-- reference count = 1\n * // shared: 1\n * // sub B: 1\n * // shared: completed <-- take(2) completes the subscription for sub B\n * // shared: unsubscribed <-- reference count = 0\n * // source: unsubscribed <-- replaySubject unsubscribes from source observable because the reference count dropped to 0 and refCount is true\n *\n * // In case of refCount being false, the unsubscribe is never called on the source and the source would keep on emitting, even if no subscribers\n * // are listening.\n * // source: 2\n * // source: 3\n * // source: 4\n * // ...\n * ```\n *\n * @see {@link publish}\n * @see {@link share}\n * @see {@link publishReplay}\n *\n * @param configOrBufferSize Maximum element count of the replay buffer or {@link ShareReplayConfig configuration}\n * object.\n * @param windowTime Maximum time length of the replay buffer in milliseconds.\n * @param scheduler Scheduler where connected observers within the selector function\n * will be invoked on.\n * @return A function that returns an Observable sequence that contains the\n * elements of a sequence produced by multicasting the source sequence within a\n * selector function.\n */\nexport function shareReplay<T>(\n  configOrBufferSize?: ShareReplayConfig | number,\n  windowTime?: number,\n  scheduler?: SchedulerLike\n): MonoTypeOperatorFunction<T> {\n  let bufferSize: number;\n  let refCount = false;\n  if (configOrBufferSize && typeof configOrBufferSize === 'object') {\n    ({ bufferSize = Infinity, windowTime = Infinity, refCount = false, scheduler } = configOrBufferSize);\n  } else {\n    bufferSize = (configOrBufferSize ?? Infinity) as number;\n  }\n  return share<T>({\n    connector: () => new ReplaySubject(bufferSize, windowTime, scheduler),\n    resetOnError: true,\n    resetOnComplete: false,\n    resetOnRefCountZero: refCount,\n  });\n}\n", "import { concat } from '../observable/concat';\nimport { OperatorFunction, SchedulerLike, ValueFromArray } from '../types';\nimport { popScheduler } from '../util/args';\nimport { operate } from '../util/lift';\n\n// Devs are more likely to pass null or undefined than they are a scheduler\n// without accompanying values. To make things easier for (naughty) devs who\n// use the `strictNullChecks: false` TypeScript compiler option, these\n// overloads with explicit null and undefined values are included.\n\nexport function startWith<T>(value: null): OperatorFunction<T, T | null>;\nexport function startWith<T>(value: undefined): OperatorFunction<T, T | undefined>;\n\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled` and `concatAll`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function startWith<T, A extends readonly unknown[] = T[]>(\n  ...valuesAndScheduler: [...A, SchedulerLike]\n): OperatorFunction<T, T | ValueFromArray<A>>;\nexport function startWith<T, A extends readonly unknown[] = T[]>(...values: A): OperatorFunction<T, T | ValueFromArray<A>>;\n\n/**\n * Returns an observable that, at the moment of subscription, will synchronously emit all\n * values provided to this operator, then subscribe to the source and mirror all of its emissions\n * to subscribers.\n *\n * This is a useful way to know when subscription has occurred on an existing observable.\n *\n * <span class=\"informal\">First emits its arguments in order, and then any\n * emissions from the source.</span>\n *\n * ![](startWith.png)\n *\n * ## Examples\n *\n * Emit a value when a timer starts.\n *\n * ```ts\n * import { timer, map, startWith } from 'rxjs';\n *\n * timer(1000)\n *   .pipe(\n *     map(() => 'timer emit'),\n *     startWith('timer start')\n *   )\n *   .subscribe(x => console.log(x));\n *\n * // results:\n * // 'timer start'\n * // 'timer emit'\n * ```\n *\n * @param values Items you want the modified Observable to emit first.\n * @return A function that returns an Observable that synchronously emits\n * provided values before subscribing to the source Observable.\n *\n * @see {@link endWith}\n * @see {@link finalize}\n * @see {@link concat}\n */\nexport function startWith<T, D>(...values: D[]): OperatorFunction<T, T | D> {\n  const scheduler = popScheduler(values);\n  return operate((source, subscriber) => {\n    // Here we can't pass `undefined` as a scheduler, because if we did, the\n    // code inside of `concat` would be confused by the `undefined`, and treat it\n    // like an invalid observable. So we have to split it two different ways.\n    (scheduler ? concat(values, source, scheduler) : concat(values, source)).subscribe(subscriber);\n  });\n}\n", "import { OperatorFunction, MonoTypeOperatorFunction, TruthyTypesOf } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\nexport function takeWhile<T>(predicate: BooleanConstructor, inclusive: true): MonoTypeOperatorFunction<T>;\nexport function takeWhile<T>(predicate: BooleanConstructor, inclusive: false): OperatorFunction<T, TruthyTypesOf<T>>;\nexport function takeWhile<T>(predicate: BooleanConstructor): OperatorFunction<T, TruthyTypesOf<T>>;\nexport function takeWhile<T, S extends T>(predicate: (value: T, index: number) => value is S): OperatorFunction<T, S>;\nexport function takeWhile<T, S extends T>(predicate: (value: T, index: number) => value is S, inclusive: false): OperatorFunction<T, S>;\nexport function takeWhile<T>(predicate: (value: T, index: number) => boolean, inclusive?: boolean): MonoTypeOperatorFunction<T>;\n\n/**\n * Emits values emitted by the source Observable so long as each value satisfies\n * the given `predicate`, and then completes as soon as this `predicate` is not\n * satisfied.\n *\n * <span class=\"informal\">Takes values from the source only while they pass the\n * condition given. When the first value does not satisfy, it completes.</span>\n *\n * ![](takeWhile.png)\n *\n * `takeWhile` subscribes and begins mirroring the source Observable. Each value\n * emitted on the source is given to the `predicate` function which returns a\n * boolean, representing a condition to be satisfied by the source values. The\n * output Observable emits the source values until such time as the `predicate`\n * returns false, at which point `takeWhile` stops mirroring the source\n * Observable and completes the output Observable.\n *\n * ## Example\n *\n * Emit click events only while the clientX property is greater than 200\n *\n * ```ts\n * import { fromEvent, takeWhile } from 'rxjs';\n *\n * const clicks = fromEvent<PointerEvent>(document, 'click');\n * const result = clicks.pipe(takeWhile(ev => ev.clientX > 200));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link take}\n * @see {@link takeLast}\n * @see {@link takeUntil}\n * @see {@link skip}\n *\n * @param predicate A function that evaluates a value emitted by the source\n * Observable and returns a boolean. Also takes the (zero-based) index as the\n * second argument.\n * @param inclusive When set to `true` the value that caused `predicate` to\n * return `false` will also be emitted.\n * @return A function that returns an Observable that emits values from the\n * source Observable so long as each value satisfies the condition defined by\n * the `predicate`, then completes.\n */\nexport function takeWhile<T>(predicate: (value: T, index: number) => boolean, inclusive = false): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    let index = 0;\n    source.subscribe(\n      createOperatorSubscriber(subscriber, (value) => {\n        const result = predicate(value, index++);\n        (result || inclusive) && subscriber.next(value);\n        !result && subscriber.complete();\n      })\n    );\n  });\n}\n", "import { MonoTypeOperatorFunction, Observer } from '../types';\nimport { isFunction } from '../util/isFunction';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { identity } from '../util/identity';\n\n/**\n * An extension to the {@link Observer} interface used only by the {@link tap} operator.\n *\n * It provides a useful set of callbacks a user can register to do side-effects in\n * cases other than what the usual {@link Observer} callbacks are\n * ({@link guide/glossary-and-semantics#next next},\n * {@link guide/glossary-and-semantics#error error} and/or\n * {@link guide/glossary-and-semantics#complete complete}).\n *\n * ## Example\n *\n * ```ts\n * import { fromEvent, switchMap, tap, interval, take } from 'rxjs';\n *\n * const source$ = fromEvent(document, 'click');\n * const result$ = source$.pipe(\n *   switchMap((_, i) => i % 2 === 0\n *     ? fromEvent(document, 'mousemove').pipe(\n *         tap({\n *           subscribe: () => console.log('Subscribed to the mouse move events after click #' + i),\n *           unsubscribe: () => console.log('Mouse move events #' + i + ' unsubscribed'),\n *           finalize: () => console.log('Mouse move events #' + i + ' finalized')\n *         })\n *       )\n *     : interval(1_000).pipe(\n *         take(5),\n *         tap({\n *           subscribe: () => console.log('Subscribed to the 1-second interval events after click #' + i),\n *           unsubscribe: () => console.log('1-second interval events #' + i + ' unsubscribed'),\n *           finalize: () => console.log('1-second interval events #' + i + ' finalized')\n *         })\n *       )\n *   )\n * );\n *\n * const subscription = result$.subscribe({\n *   next: console.log\n * });\n *\n * setTimeout(() => {\n *   console.log('Unsubscribe after 60 seconds');\n *   subscription.unsubscribe();\n * }, 60_000);\n * ```\n */\nexport interface TapObserver<T> extends Observer<T> {\n  /**\n   * The callback that `tap` operator invokes at the moment when the source Observable\n   * gets subscribed to.\n   */\n  subscribe: () => void;\n  /**\n   * The callback that `tap` operator invokes when an explicit\n   * {@link guide/glossary-and-semantics#unsubscription unsubscribe} happens. It won't get invoked on\n   * `error` or `complete` events.\n   */\n  unsubscribe: () => void;\n  /**\n   * The callback that `tap` operator invokes when any kind of\n   * {@link guide/glossary-and-semantics#finalization finalization} happens - either when\n   * the source Observable `error`s or `complete`s or when it gets explicitly unsubscribed\n   * by the user. There is no difference in using this callback or the {@link finalize}\n   * operator, but if you're already using `tap` operator, you can use this callback\n   * instead. You'd get the same result in either case.\n   */\n  finalize: () => void;\n}\nexport function tap<T>(observerOrNext?: Partial<TapObserver<T>> | ((value: T) => void)): MonoTypeOperatorFunction<T>;\n/** @deprecated Instead of passing separate callback arguments, use an observer argument. Signatures taking separate callback arguments will be removed in v8. Details: https://rxjs.dev/deprecations/subscribe-arguments */\nexport function tap<T>(\n  next?: ((value: T) => void) | null,\n  error?: ((error: any) => void) | null,\n  complete?: (() => void) | null\n): MonoTypeOperatorFunction<T>;\n\n/**\n * Used to perform side-effects for notifications from the source observable\n *\n * <span class=\"informal\">Used when you want to affect outside state with a notification without altering the notification</span>\n *\n * ![](tap.png)\n *\n * Tap is designed to allow the developer a designated place to perform side effects. While you _could_ perform side-effects\n * inside of a `map` or a `mergeMap`, that would make their mapping functions impure, which isn't always a big deal, but will\n * make it so you can't do things like memoize those functions. The `tap` operator is designed solely for such side-effects to\n * help you remove side-effects from other operations.\n *\n * For any notification, next, error, or complete, `tap` will call the appropriate callback you have provided to it, via a function\n * reference, or a partial observer, then pass that notification down the stream.\n *\n * The observable returned by `tap` is an exact mirror of the source, with one exception: Any error that occurs -- synchronously -- in a handler\n * provided to `tap` will be emitted as an error from the returned observable.\n *\n * > Be careful! You can mutate objects as they pass through the `tap` operator's handlers.\n *\n * The most common use of `tap` is actually for debugging. You can place a `tap(console.log)` anywhere\n * in your observable `pipe`, log out the notifications as they are emitted by the source returned by the previous\n * operation.\n *\n * ## Examples\n *\n * Check a random number before it is handled. Below is an observable that will use a random number between 0 and 1,\n * and emit `'big'` or `'small'` depending on the size of that number. But we wanted to log what the original number\n * was, so we have added a `tap(console.log)`.\n *\n * ```ts\n * import { of, tap, map } from 'rxjs';\n *\n * of(Math.random()).pipe(\n *   tap(console.log),\n *   map(n => n > 0.5 ? 'big' : 'small')\n * ).subscribe(console.log);\n * ```\n *\n * Using `tap` to analyze a value and force an error. Below is an observable where in our system we only\n * want to emit numbers 3 or less we get from another source. We can force our observable to error\n * using `tap`.\n *\n * ```ts\n * import { of, tap } from 'rxjs';\n *\n * const source = of(1, 2, 3, 4, 5);\n *\n * source.pipe(\n *   tap(n => {\n *     if (n > 3) {\n *       throw new TypeError(`Value ${ n } is greater than 3`);\n *     }\n *   })\n * )\n * .subscribe({ next: console.log, error: err => console.log(err.message) });\n * ```\n *\n * We want to know when an observable completes before moving on to the next observable. The system\n * below will emit a random series of `'X'` characters from 3 different observables in sequence. The\n * only way we know when one observable completes and moves to the next one, in this case, is because\n * we have added a `tap` with the side effect of logging to console.\n *\n * ```ts\n * import { of, concatMap, interval, take, map, tap } from 'rxjs';\n *\n * of(1, 2, 3).pipe(\n *   concatMap(n => interval(1000).pipe(\n *     take(Math.round(Math.random() * 10)),\n *     map(() => 'X'),\n *     tap({ complete: () => console.log(`Done with ${ n }`) })\n *   ))\n * )\n * .subscribe(console.log);\n * ```\n *\n * @see {@link finalize}\n * @see {@link TapObserver}\n *\n * @param observerOrNext A next handler or partial observer\n * @param error An error handler\n * @param complete A completion handler\n * @return A function that returns an Observable identical to the source, but\n * runs the specified Observer or callback(s) for each item.\n */\nexport function tap<T>(\n  observerOrNext?: Partial<TapObserver<T>> | ((value: T) => void) | null,\n  error?: ((e: any) => void) | null,\n  complete?: (() => void) | null\n): MonoTypeOperatorFunction<T> {\n  // We have to check to see not only if next is a function,\n  // but if error or complete were passed. This is because someone\n  // could technically call tap like `tap(null, fn)` or `tap(null, null, fn)`.\n  const tapObserver =\n    isFunction(observerOrNext) || error || complete\n      ? // tslint:disable-next-line: no-object-literal-type-assertion\n        ({ next: observerOrNext as Exclude<typeof observerOrNext, Partial<TapObserver<T>>>, error, complete } as Partial<TapObserver<T>>)\n      : observerOrNext;\n\n  return tapObserver\n    ? operate((source, subscriber) => {\n        tapObserver.subscribe?.();\n        let isUnsub = true;\n        source.subscribe(\n          createOperatorSubscriber(\n            subscriber,\n            (value) => {\n              tapObserver.next?.(value);\n              subscriber.next(value);\n            },\n            () => {\n              isUnsub = false;\n              tapObserver.complete?.();\n              subscriber.complete();\n            },\n            (err) => {\n              isUnsub = false;\n              tapObserver.error?.(err);\n              subscriber.error(err);\n            },\n            () => {\n              if (isUnsub) {\n                tapObserver.unsubscribe?.();\n              }\n              tapObserver.finalize?.();\n            }\n          )\n        );\n      })\n    : // Tap was called with no valid tap observer or handler\n      // (e.g. `tap(null, null, null)` or `tap(null)` or `tap()`)\n      // so we're going to just mirror the source.\n      identity;\n}\n", "export const timerWorker = {\n  src: `const e=new Map;self.addEventListener(\"message\",t=>{const s=t.data;switch(s.type){case\"setTimeout\":case\"setInterval\":e.set(s.id,(\"setTimeout\"===s.type?setTimeout:setInterval)(()=>{!function(e){const t={type:\"tick\",id:e};self.postMessage(t)}(s.id),\"setTimeout\"===s.type&&e.delete(s.id)},s.timeout));break;case\"clearTimeout\":case\"clearInterval\":(\"clearTimeout\"===s.type?clearTimeout:clearInterval)(e.get(s.id)),e.delete(s.id)}});`,\n};\n", "import type { TimerWorkerEvent, TimerWorkerRequest } from \"./types\";\nimport { timerWorker } from \"./worker.build\";\n\nexport type WorkerTimerSetup = {\n\tuseWorker?: boolean;\n\tname?: string;\n};\n\nexport class WorkerTimer {\n\tprivate currentTimerId = 1;\n\tprivate callbacks = new Map<number, () => void>();\n\tprivate worker: Worker | undefined;\n\tprivate fallback = false;\n\n\t/**\n\t * Constructs a new instance of WorkerTimer.\n\t *\n\t * @param init the init parameters.\n\t */\n\tconstructor(init: WorkerTimerSetup = {}) {\n\t\tthis.setup(init);\n\t}\n\n\tprivate setup = ({\n\t\tuseWorker = true,\n\t\tname = \"@stream-io/worker-timer\",\n\t}: WorkerTimerSetup = {}): void => {\n\t\tif (!useWorker) {\n\t\t\tthis.fallback = true;\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst source = timerWorker.src;\n\t\t\tconst blob = new Blob([source], {\n\t\t\t\ttype: \"application/javascript; charset=utf-8\",\n\t\t\t});\n\t\t\tconst script = URL.createObjectURL(blob);\n\t\t\tthis.worker = new Worker(script, { name });\n\t\t\tthis.worker.addEventListener(\"message\", (e: MessageEvent<TimerWorkerEvent>) => {\n\t\t\t\tconst { type, id } = e.data;\n\t\t\t\tif (type === \"tick\") {\n\t\t\t\t\tthis.callbacks.get(id)?.();\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (err: any) {\n\t\t\tconsole.error(\"Failed to create timer worker: \", err);\n\t\t\tthis.fallback = true;\n\t\t}\n\t};\n\n\tdestroy = (): void => {\n\t\tthis.callbacks.clear();\n\t\tthis.worker?.terminate();\n\t\tthis.worker = undefined;\n\t\tthis.fallback = false;\n\t};\n\n\tget ready() {\n\t\treturn this.fallback || Boolean(this.worker);\n\t}\n\n\tsetInterval = (callback: () => void, timeout: number): number =>\n\t\tthis.setTimer(\"setInterval\", callback, timeout);\n\n\tclearInterval = (id?: number): void => {\n\t\tthis.clearTimer(\"clearInterval\", id);\n\t};\n\n\tsetTimeout = (callback: () => void, timeout: number): number =>\n\t\tthis.setTimer(\"setTimeout\", callback, timeout);\n\n\tclearTimeout = (id?: number): void => {\n\t\tthis.clearTimer(\"clearTimeout\", id);\n\t};\n\n\tprivate setTimer = (\n\t\ttype: \"setTimeout\" | \"setInterval\",\n\t\tcallback: () => void,\n\t\ttimeout: number,\n\t) => {\n\t\tif (!this.ready) {\n\t\t\tthis.setup();\n\t\t}\n\n\t\tif (this.fallback) {\n\t\t\treturn (type === \"setTimeout\" ? setTimeout : setInterval)(\n\t\t\t\tcallback,\n\t\t\t\ttimeout,\n\t\t\t) as unknown as number;\n\t\t}\n\n\t\tconst id = this.getTimerId();\n\n\t\tthis.callbacks.set(id, () => {\n\t\t\tcallback();\n\n\t\t\t// Timeouts are one-off operations, so no need to keep callback reference\n\t\t\t// after timer has fired\n\t\t\tif (type === \"setTimeout\") {\n\t\t\t\tthis.callbacks.delete(id);\n\t\t\t}\n\t\t});\n\n\t\tthis.sendMessage({ type, id, timeout });\n\t\treturn id;\n\t};\n\n\tprivate clearTimer = (type: \"clearTimeout\" | \"clearInterval\", id?: number) => {\n\t\tif (!id) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.ready) {\n\t\t\tthis.setup();\n\t\t}\n\n\t\tif (this.fallback) {\n\t\t\t(type === \"clearTimeout\" ? clearTimeout : clearInterval)(id);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.callbacks.delete(id);\n\t\tthis.sendMessage({ type, id });\n\t};\n\n\tprivate getTimerId = () => this.currentTimerId++;\n\n\tprivate sendMessage = (message: TimerWorkerRequest) => {\n\t\tif (!this.worker) {\n\t\t\tthrow new Error(\"Cannot use timer worker before it's set up\");\n\t\t}\n\n\t\tthis.worker.postMessage(message);\n\t};\n}\n", "/* tslint:disable */\n\n/**\n *\n * @export\n * @interface APIError\n */\nexport interface APIError {\n  /**\n   * Response HTTP status code\n   * @type {number}\n   * @memberof APIError\n   */\n  StatusCode: number;\n  /**\n   * API error code\n   * @type {number}\n   * @memberof APIError\n   */\n  code: number;\n  /**\n   * Additional error-specific information\n   * @type {Array<number>}\n   * @memberof APIError\n   */\n  details: Array<number>;\n  /**\n   * Request duration\n   * @type {string}\n   * @memberof APIError\n   */\n  duration: string;\n  /**\n   * Additional error info\n   * @type {{ [key: string]: string; }}\n   * @memberof APIError\n   */\n  exception_fields?: { [key: string]: string };\n  /**\n   * Message describing an error\n   * @type {string}\n   * @memberof APIError\n   */\n  message: string;\n  /**\n   * URL with additional information\n   * @type {string}\n   * @memberof APIError\n   */\n  more_info: string;\n  /**\n   * Flag that indicates if the error is unrecoverable, requests that return unrecoverable errors should not be retried, this error only applies to the request that caused it\n   * @type {boolean}\n   * @memberof APIError\n   */\n  unrecoverable?: boolean;\n}\n/**\n * AcceptCallResponse is the payload for accepting a call.\n * @export\n * @interface AcceptCallResponse\n */\nexport interface AcceptCallResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof AcceptCallResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface AudioSettingsRequest\n */\nexport interface AudioSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsRequest\n   */\n  access_request_enabled?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof AudioSettingsRequest\n   */\n  default_device: AudioSettingsRequestDefaultDeviceEnum;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsRequest\n   */\n  hifi_audio_enabled?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsRequest\n   */\n  mic_default_on?: boolean;\n  /**\n   *\n   * @type {NoiseCancellationSettings}\n   * @memberof AudioSettingsRequest\n   */\n  noise_cancellation?: NoiseCancellationSettings;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsRequest\n   */\n  opus_dtx_enabled?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsRequest\n   */\n  redundant_coding_enabled?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsRequest\n   */\n  speaker_default_on?: boolean;\n}\n\n/**\n * @export\n */\nexport const AudioSettingsRequestDefaultDeviceEnum = {\n  SPEAKER: 'speaker',\n  EARPIECE: 'earpiece',\n} as const;\nexport type AudioSettingsRequestDefaultDeviceEnum =\n  (typeof AudioSettingsRequestDefaultDeviceEnum)[keyof typeof AudioSettingsRequestDefaultDeviceEnum];\n\n/**\n *\n * @export\n * @interface AudioSettingsResponse\n */\nexport interface AudioSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsResponse\n   */\n  access_request_enabled: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof AudioSettingsResponse\n   */\n  default_device: AudioSettingsResponseDefaultDeviceEnum;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsResponse\n   */\n  hifi_audio_enabled: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsResponse\n   */\n  mic_default_on: boolean;\n  /**\n   *\n   * @type {NoiseCancellationSettings}\n   * @memberof AudioSettingsResponse\n   */\n  noise_cancellation?: NoiseCancellationSettings;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsResponse\n   */\n  opus_dtx_enabled: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsResponse\n   */\n  redundant_coding_enabled: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsResponse\n   */\n  speaker_default_on: boolean;\n}\n\n/**\n * @export\n */\nexport const AudioSettingsResponseDefaultDeviceEnum = {\n  SPEAKER: 'speaker',\n  EARPIECE: 'earpiece',\n} as const;\nexport type AudioSettingsResponseDefaultDeviceEnum =\n  (typeof AudioSettingsResponseDefaultDeviceEnum)[keyof typeof AudioSettingsResponseDefaultDeviceEnum];\n\n/**\n *\n * @export\n * @interface BackstageSettingsRequest\n */\nexport interface BackstageSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof BackstageSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {number}\n   * @memberof BackstageSettingsRequest\n   */\n  join_ahead_time_seconds?: number;\n}\n/**\n *\n * @export\n * @interface BackstageSettingsResponse\n */\nexport interface BackstageSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof BackstageSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {number}\n   * @memberof BackstageSettingsResponse\n   */\n  join_ahead_time_seconds?: number;\n}\n/**\n * BlockUserRequest is the payload for blocking a user.\n * @export\n * @interface BlockUserRequest\n */\nexport interface BlockUserRequest {\n  /**\n   * the user to block\n   * @type {string}\n   * @memberof BlockUserRequest\n   */\n  user_id: string;\n}\n/**\n * BlockUserResponse is the payload for blocking a user.\n * @export\n * @interface BlockUserResponse\n */\nexport interface BlockUserResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof BlockUserResponse\n   */\n  duration: string;\n}\n/**\n * This event is sent to call participants to notify when a user is blocked on a call, clients can use this event to show a notification.\n * If the user is the current user, the client should leave the call screen as well\n * @export\n * @interface BlockedUserEvent\n */\nexport interface BlockedUserEvent {\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof BlockedUserEvent\n   */\n  blocked_by_user?: UserResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof BlockedUserEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof BlockedUserEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.blocked_user\" in this case\n   * @type {string}\n   * @memberof BlockedUserEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof BlockedUserEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface Bound\n */\nexport interface Bound {\n  /**\n   *\n   * @type {boolean}\n   * @memberof Bound\n   */\n  inclusive: boolean;\n  /**\n   *\n   * @type {number}\n   * @memberof Bound\n   */\n  value: number;\n}\n/**\n *\n * @export\n * @interface BroadcastSettingsRequest\n */\nexport interface BroadcastSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof BroadcastSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {HLSSettingsRequest}\n   * @memberof BroadcastSettingsRequest\n   */\n  hls?: HLSSettingsRequest;\n  /**\n   *\n   * @type {RTMPSettingsRequest}\n   * @memberof BroadcastSettingsRequest\n   */\n  rtmp?: RTMPSettingsRequest;\n}\n/**\n * BroadcastSettingsResponse is the payload for broadcasting settings\n * @export\n * @interface BroadcastSettingsResponse\n */\nexport interface BroadcastSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof BroadcastSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {HLSSettingsResponse}\n   * @memberof BroadcastSettingsResponse\n   */\n  hls: HLSSettingsResponse;\n  /**\n   *\n   * @type {RTMPSettingsResponse}\n   * @memberof BroadcastSettingsResponse\n   */\n  rtmp: RTMPSettingsResponse;\n}\n/**\n * This event is sent when a user accepts a notification to join a call.\n * @export\n * @interface CallAcceptedEvent\n */\nexport interface CallAcceptedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallAcceptedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallAcceptedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallAcceptedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.accepted\" in this case\n   * @type {string}\n   * @memberof CallAcceptedEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallAcceptedEvent\n   */\n  user: UserResponse;\n}\n/**\n * CallClosedCaption represents a closed caption of a call.\n * @export\n * @interface CallClosedCaption\n */\nexport interface CallClosedCaption {\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  end_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  language: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  service?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  speaker_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  start_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  text: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallClosedCaption\n   */\n  translated: boolean;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallClosedCaption\n   */\n  user: UserResponse;\n}\n/**\n * This event is sent when call closed captions has failed\n * @export\n * @interface CallClosedCaptionsFailedEvent\n */\nexport interface CallClosedCaptionsFailedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsFailedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsFailedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.closed_captions_failed\" in this case\n   * @type {string}\n   * @memberof CallClosedCaptionsFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call closed caption has started\n * @export\n * @interface CallClosedCaptionsStartedEvent\n */\nexport interface CallClosedCaptionsStartedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsStartedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.closed_captions_started\" in this case\n   * @type {string}\n   * @memberof CallClosedCaptionsStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call closed captions has stopped\n * @export\n * @interface CallClosedCaptionsStoppedEvent\n */\nexport interface CallClosedCaptionsStoppedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsStoppedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsStoppedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.transcription_stopped\" in this case\n   * @type {string}\n   * @memberof CallClosedCaptionsStoppedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a call is created. Clients receiving this event should check if the ringing\n * field is set to true and if so, show the call screen\n * @export\n * @interface CallCreatedEvent\n */\nexport interface CallCreatedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallCreatedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallCreatedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallCreatedEvent\n   */\n  created_at: string;\n  /**\n   * the members added to this call\n   * @type {Array<MemberResponse>}\n   * @memberof CallCreatedEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * The type of event: \"call.created\" in this case\n   * @type {string}\n   * @memberof CallCreatedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a call is deleted. Clients receiving this event should leave the call screen\n * @export\n * @interface CallDeletedEvent\n */\nexport interface CallDeletedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallDeletedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallDeletedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallDeletedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.deleted\" in this case\n   * @type {string}\n   * @memberof CallDeletedEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CallDurationReport\n */\nexport interface CallDurationReport {\n  /**\n   *\n   * @type {Array<ReportByHistogramBucket>}\n   * @memberof CallDurationReport\n   */\n  histogram: Array<ReportByHistogramBucket>;\n}\n/**\n *\n * @export\n * @interface CallDurationReportResponse\n */\nexport interface CallDurationReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateCallDurationReportResponse>}\n   * @memberof CallDurationReportResponse\n   */\n  daily: Array<DailyAggregateCallDurationReportResponse>;\n}\n/**\n * This event is sent when a call is mark as ended for all its participants. Clients receiving this event should leave the call screen\n * @export\n * @interface CallEndedEvent\n */\nexport interface CallEndedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallEndedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallEndedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallEndedEvent\n   */\n  created_at: string;\n  /**\n   * The reason why the call ended, if available\n   * @type {string}\n   * @memberof CallEndedEvent\n   */\n  reason?: string;\n  /**\n   * The type of event: \"call.ended\" in this case\n   * @type {string}\n   * @memberof CallEndedEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallEndedEvent\n   */\n  user?: UserResponse;\n}\n/**\n * This event is sent when frame recording has failed\n * @export\n * @interface CallFrameRecordingFailedEvent\n */\nexport interface CallFrameRecordingFailedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallFrameRecordingFailedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFailedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFailedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFailedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.frame_recording_failed\" in this case\n   * @type {string}\n   * @memberof CallFrameRecordingFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a frame is captured from a call\n * @export\n * @interface CallFrameRecordingFrameReadyEvent\n */\nexport interface CallFrameRecordingFrameReadyEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  call_cid: string;\n  /**\n   * The time the frame was captured\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  captured_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  egress_id: string;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  session_id: string;\n  /**\n   * The type of the track frame was captured from (TRACK_TYPE_VIDEO|TRACK_TYPE_SCREEN_SHARE)\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  track_type: string;\n  /**\n   * The type of event: \"call.frame_recording_ready\" in this case\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  type: string;\n  /**\n   * The URL of the frame\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  url: string;\n  /**\n   * The users in the frame\n   * @type {{ [key: string]: UserResponse; }}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  users: { [key: string]: UserResponse };\n}\n/**\n * This event is sent when frame recording has started\n * @export\n * @interface CallFrameRecordingStartedEvent\n */\nexport interface CallFrameRecordingStartedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallFrameRecordingStartedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStartedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStartedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.frame_recording_started\" in this case\n   * @type {string}\n   * @memberof CallFrameRecordingStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when frame recording has stopped\n * @export\n * @interface CallFrameRecordingStoppedEvent\n */\nexport interface CallFrameRecordingStoppedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallFrameRecordingStoppedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStoppedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStoppedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStoppedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.frame_recording_stopped\" in this case\n   * @type {string}\n   * @memberof CallFrameRecordingStoppedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when HLS broadcasting has failed\n * @export\n * @interface CallHLSBroadcastingFailedEvent\n */\nexport interface CallHLSBroadcastingFailedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingFailedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingFailedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.hls_broadcasting_failed\" in this case\n   * @type {string}\n   * @memberof CallHLSBroadcastingFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when HLS broadcasting has started\n * @export\n * @interface CallHLSBroadcastingStartedEvent\n */\nexport interface CallHLSBroadcastingStartedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallHLSBroadcastingStartedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingStartedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingStartedEvent\n   */\n  hls_playlist_url: string;\n  /**\n   * The type of event: \"call.hls_broadcasting_started\" in this case\n   * @type {string}\n   * @memberof CallHLSBroadcastingStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when HLS broadcasting has stopped\n * @export\n * @interface CallHLSBroadcastingStoppedEvent\n */\nexport interface CallHLSBroadcastingStoppedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingStoppedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingStoppedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.hls_broadcasting_stopped\" in this case\n   * @type {string}\n   * @memberof CallHLSBroadcastingStoppedEvent\n   */\n  type: string;\n}\n/**\n * CallIngressResponse is the payload for ingress settings\n * @export\n * @interface CallIngressResponse\n */\nexport interface CallIngressResponse {\n  /**\n   *\n   * @type {RTMPIngress}\n   * @memberof CallIngressResponse\n   */\n  rtmp: RTMPIngress;\n  /**\n   *\n   * @type {SRTIngress}\n   * @memberof CallIngressResponse\n   */\n  srt: SRTIngress;\n  /**\n   *\n   * @type {WHIPIngress}\n   * @memberof CallIngressResponse\n   */\n  whip: WHIPIngress;\n}\n/**\n * This event is sent when a call is started. Clients receiving this event should start the call.\n * @export\n * @interface CallLiveStartedEvent\n */\nexport interface CallLiveStartedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallLiveStartedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallLiveStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallLiveStartedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.live_started\" in this case\n   * @type {string}\n   * @memberof CallLiveStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when one or more members are added to a call\n * @export\n * @interface CallMemberAddedEvent\n */\nexport interface CallMemberAddedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallMemberAddedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberAddedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberAddedEvent\n   */\n  created_at: string;\n  /**\n   * the members added to this call\n   * @type {Array<MemberResponse>}\n   * @memberof CallMemberAddedEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * The type of event: \"call.member_added\" in this case\n   * @type {string}\n   * @memberof CallMemberAddedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when one or more members are removed from a call\n * @export\n * @interface CallMemberRemovedEvent\n */\nexport interface CallMemberRemovedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallMemberRemovedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberRemovedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberRemovedEvent\n   */\n  created_at: string;\n  /**\n   * the list of member IDs removed from the call\n   * @type {Array<string>}\n   * @memberof CallMemberRemovedEvent\n   */\n  members: Array<string>;\n  /**\n   * The type of event: \"call.member_removed\" in this case\n   * @type {string}\n   * @memberof CallMemberRemovedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when one or more members are updated\n * @export\n * @interface CallMemberUpdatedEvent\n */\nexport interface CallMemberUpdatedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallMemberUpdatedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberUpdatedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberUpdatedEvent\n   */\n  created_at: string;\n  /**\n   * The list of members that were updated\n   * @type {Array<MemberResponse>}\n   * @memberof CallMemberUpdatedEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * The type of event: \"call.member_updated\" in this case\n   * @type {string}\n   * @memberof CallMemberUpdatedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when one or more members get its role updated\n * @export\n * @interface CallMemberUpdatedPermissionEvent\n */\nexport interface CallMemberUpdatedPermissionEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  call_cid: string;\n  /**\n   * The capabilities by role for this call\n   * @type {{ [key: string]: Array<string>; }}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  capabilities_by_role: { [key: string]: Array<string> };\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  created_at: string;\n  /**\n   * The list of members that were updated\n   * @type {Array<MemberResponse>}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * The type of event: \"call.member_added\" in this case\n   * @type {string}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  type: string;\n}\n/**\n * This event is sent to call members who did not accept/reject/join the call to notify they missed the call\n * @export\n * @interface CallMissedEvent\n */\nexport interface CallMissedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallMissedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMissedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMissedEvent\n   */\n  created_at: string;\n  /**\n   * List of members who missed the call\n   * @type {Array<MemberResponse>}\n   * @memberof CallMissedEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallMissedEvent\n   */\n  notify_user: boolean;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallMissedEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.notification\" in this case\n   * @type {string}\n   * @memberof CallMissedEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallMissedEvent\n   */\n  user: UserResponse;\n}\n/**\n * This event is sent when a moderation blur action is applied to a user's video stream\n * @export\n * @interface CallModerationBlurEvent\n */\nexport interface CallModerationBlurEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallModerationBlurEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallModerationBlurEvent\n   */\n  created_at: string;\n  /**\n   * Custom data associated with the moderation action\n   * @type {{ [key: string]: any; }}\n   * @memberof CallModerationBlurEvent\n   */\n  custom: { [key: string]: any };\n  /**\n   * The type of event: \"call.moderation_blur\" in this case\n   * @type {string}\n   * @memberof CallModerationBlurEvent\n   */\n  type: string;\n  /**\n   * The user ID whose video stream is being blurred\n   * @type {string}\n   * @memberof CallModerationBlurEvent\n   */\n  user_id: string;\n}\n/**\n * This event is sent when a moderation warning is issued to a user\n * @export\n * @interface CallModerationWarningEvent\n */\nexport interface CallModerationWarningEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallModerationWarningEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallModerationWarningEvent\n   */\n  created_at: string;\n  /**\n   * Custom data associated with the moderation action\n   * @type {{ [key: string]: any; }}\n   * @memberof CallModerationWarningEvent\n   */\n  custom: { [key: string]: any };\n  /**\n   * The warning message\n   * @type {string}\n   * @memberof CallModerationWarningEvent\n   */\n  message: string;\n  /**\n   * The type of event: \"call.moderation_warning\" in this case\n   * @type {string}\n   * @memberof CallModerationWarningEvent\n   */\n  type: string;\n  /**\n   * The user ID who is receiving the warning\n   * @type {string}\n   * @memberof CallModerationWarningEvent\n   */\n  user_id: string;\n}\n/**\n * This event is sent to all call members to notify they are getting called\n * @export\n * @interface CallNotificationEvent\n */\nexport interface CallNotificationEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallNotificationEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallNotificationEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallNotificationEvent\n   */\n  created_at: string;\n  /**\n   * Call members\n   * @type {Array<MemberResponse>}\n   * @memberof CallNotificationEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallNotificationEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.notification\" in this case\n   * @type {string}\n   * @memberof CallNotificationEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallNotificationEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface CallParticipantCountReport\n */\nexport interface CallParticipantCountReport {\n  /**\n   *\n   * @type {Array<ReportByHistogramBucket>}\n   * @memberof CallParticipantCountReport\n   */\n  histogram: Array<ReportByHistogramBucket>;\n}\n/**\n *\n * @export\n * @interface CallParticipantCountReportResponse\n */\nexport interface CallParticipantCountReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateCallParticipantCountReportResponse>}\n   * @memberof CallParticipantCountReportResponse\n   */\n  daily: Array<DailyAggregateCallParticipantCountReportResponse>;\n}\n/**\n *\n * @export\n * @interface CallParticipantResponse\n */\nexport interface CallParticipantResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof CallParticipantResponse\n   */\n  joined_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallParticipantResponse\n   */\n  role: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallParticipantResponse\n   */\n  user: UserResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallParticipantResponse\n   */\n  user_session_id: string;\n}\n/**\n *\n * @export\n * @interface CallParticipantTimeline\n */\nexport interface CallParticipantTimeline {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof CallParticipantTimeline\n   */\n  data: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof CallParticipantTimeline\n   */\n  severity: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallParticipantTimeline\n   */\n  timestamp: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallParticipantTimeline\n   */\n  type: string;\n}\n/**\n * This event is sent when a reaction is sent in a call, clients should use this to show the reaction in the call screen\n * @export\n * @interface CallReactionEvent\n */\nexport interface CallReactionEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallReactionEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallReactionEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {ReactionResponse}\n   * @memberof CallReactionEvent\n   */\n  reaction: ReactionResponse;\n  /**\n   * The type of event: \"call.reaction_new\" in this case\n   * @type {string}\n   * @memberof CallReactionEvent\n   */\n  type: string;\n}\n/**\n * CallRecording represents a recording of a call.\n * @export\n * @interface CallRecording\n */\nexport interface CallRecording {\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecording\n   */\n  end_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecording\n   */\n  filename: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecording\n   */\n  session_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecording\n   */\n  start_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecording\n   */\n  url: string;\n}\n/**\n * This event is sent when call recording has failed\n * @export\n * @interface CallRecordingFailedEvent\n */\nexport interface CallRecordingFailedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingFailedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingFailedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingFailedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.recording_failed\" in this case\n   * @type {string}\n   * @memberof CallRecordingFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call recording is ready\n * @export\n * @interface CallRecordingReadyEvent\n */\nexport interface CallRecordingReadyEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingReadyEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {CallRecording}\n   * @memberof CallRecordingReadyEvent\n   */\n  call_recording: CallRecording;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingReadyEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingReadyEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.recording_ready\" in this case\n   * @type {string}\n   * @memberof CallRecordingReadyEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call recording has started\n * @export\n * @interface CallRecordingStartedEvent\n */\nexport interface CallRecordingStartedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStartedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStartedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.recording_started\" in this case\n   * @type {string}\n   * @memberof CallRecordingStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call recording has stopped\n * @export\n * @interface CallRecordingStoppedEvent\n */\nexport interface CallRecordingStoppedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStoppedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStoppedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStoppedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.recording_stopped\" in this case\n   * @type {string}\n   * @memberof CallRecordingStoppedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a user rejects a notification to join a call.\n * @export\n * @interface CallRejectedEvent\n */\nexport interface CallRejectedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallRejectedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRejectedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRejectedEvent\n   */\n  created_at: string;\n  /**\n   * Provides information about why the call was rejected. You can provide any value, but the Stream API and SDKs use these default values: rejected, cancel, timeout and busy\n   * @type {string}\n   * @memberof CallRejectedEvent\n   */\n  reason?: string;\n  /**\n   * The type of event: \"call.rejected\" in this case\n   * @type {string}\n   * @memberof CallRejectedEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallRejectedEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface CallReportResponse\n */\nexport interface CallReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof CallReportResponse\n   */\n  ended_at?: string;\n  /**\n   *\n   * @type {number}\n   * @memberof CallReportResponse\n   */\n  score: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CallReportResponse\n   */\n  started_at?: string;\n}\n/**\n * CallRequest is the payload for creating a call.\n * @export\n * @interface CallRequest\n */\nexport interface CallRequest {\n  /**\n   *\n   * @type {string}\n   * @memberof CallRequest\n   */\n  channel_cid?: string;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof CallRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {Array<MemberRequest>}\n   * @memberof CallRequest\n   */\n  members?: Array<MemberRequest>;\n  /**\n   *\n   * @type {CallSettingsRequest}\n   * @memberof CallRequest\n   */\n  settings_override?: CallSettingsRequest;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRequest\n   */\n  starts_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRequest\n   */\n  team?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallRequest\n   */\n  video?: boolean;\n}\n/**\n * Represents a call\n * @export\n * @interface CallResponse\n */\nexport interface CallResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallResponse\n   */\n  backstage: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof CallResponse\n   */\n  blocked_user_ids: Array<string>;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallResponse\n   */\n  captioning: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof CallResponse\n   */\n  channel_cid?: string;\n  /**\n   * The unique identifier for a call (<type>:<id>)\n   * @type {string}\n   * @memberof CallResponse\n   */\n  cid: string;\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof CallResponse\n   */\n  created_at: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallResponse\n   */\n  created_by: UserResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallResponse\n   */\n  current_session_id: string;\n  /**\n   * Custom data for this object\n   * @type {{ [key: string]: any; }}\n   * @memberof CallResponse\n   */\n  custom: { [key: string]: any };\n  /**\n   *\n   * @type {EgressResponse}\n   * @memberof CallResponse\n   */\n  egress: EgressResponse;\n  /**\n   * Date/time when the call ended\n   * @type {string}\n   * @memberof CallResponse\n   */\n  ended_at?: string;\n  /**\n   * Call ID\n   * @type {string}\n   * @memberof CallResponse\n   */\n  id: string;\n  /**\n   *\n   * @type {CallIngressResponse}\n   * @memberof CallResponse\n   */\n  ingress: CallIngressResponse;\n  /**\n   *\n   * @type {number}\n   * @memberof CallResponse\n   */\n  join_ahead_time_seconds?: number;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallResponse\n   */\n  recording: boolean;\n  /**\n   *\n   * @type {CallSessionResponse}\n   * @memberof CallResponse\n   */\n  session?: CallSessionResponse;\n  /**\n   *\n   * @type {CallSettingsResponse}\n   * @memberof CallResponse\n   */\n  settings: CallSettingsResponse;\n  /**\n   * Date/time when the call will start\n   * @type {string}\n   * @memberof CallResponse\n   */\n  starts_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallResponse\n   */\n  team?: string;\n  /**\n   *\n   * @type {ThumbnailResponse}\n   * @memberof CallResponse\n   */\n  thumbnails?: ThumbnailResponse;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallResponse\n   */\n  transcribing: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallResponse\n   */\n  translating: boolean;\n  /**\n   * The type of call\n   * @type {string}\n   * @memberof CallResponse\n   */\n  type: string;\n  /**\n   * Date/time of the last update\n   * @type {string}\n   * @memberof CallResponse\n   */\n  updated_at: string;\n}\n/**\n * This event is sent to all call members to notify they are getting called\n * @export\n * @interface CallRingEvent\n */\nexport interface CallRingEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallRingEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRingEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRingEvent\n   */\n  created_at: string;\n  /**\n   * Call members\n   * @type {Array<MemberResponse>}\n   * @memberof CallRingEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallRingEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.notification\" in this case\n   * @type {string}\n   * @memberof CallRingEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallRingEvent\n   */\n  user: UserResponse;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallRingEvent\n   */\n  video: boolean;\n}\n/**\n * This event is sent when a call RTMP broadcast has failed\n * @export\n * @interface CallRtmpBroadcastFailedEvent\n */\nexport interface CallRtmpBroadcastFailedEvent {\n  /**\n   * The unique identifier for a call (<type>:<id>)\n   * @type {string}\n   * @memberof CallRtmpBroadcastFailedEvent\n   */\n  call_cid: string;\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof CallRtmpBroadcastFailedEvent\n   */\n  created_at: string;\n  /**\n   * Name of the given RTMP broadcast\n   * @type {string}\n   * @memberof CallRtmpBroadcastFailedEvent\n   */\n  name: string;\n  /**\n   * The type of event: \"call.rtmp_broadcast_failed\" in this case\n   * @type {string}\n   * @memberof CallRtmpBroadcastFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when RTMP broadcast has started\n * @export\n * @interface CallRtmpBroadcastStartedEvent\n */\nexport interface CallRtmpBroadcastStartedEvent {\n  /**\n   * The unique identifier for a call (<type>:<id>)\n   * @type {string}\n   * @memberof CallRtmpBroadcastStartedEvent\n   */\n  call_cid: string;\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof CallRtmpBroadcastStartedEvent\n   */\n  created_at: string;\n  /**\n   * Name of the given RTMP broadcast\n   * @type {string}\n   * @memberof CallRtmpBroadcastStartedEvent\n   */\n  name: string;\n  /**\n   * The type of event: \"call.rtmp_broadcast_started\" in this case\n   * @type {string}\n   * @memberof CallRtmpBroadcastStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when RTMP broadcast has stopped\n * @export\n * @interface CallRtmpBroadcastStoppedEvent\n */\nexport interface CallRtmpBroadcastStoppedEvent {\n  /**\n   * The unique identifier for a call (<type>:<id>)\n   * @type {string}\n   * @memberof CallRtmpBroadcastStoppedEvent\n   */\n  call_cid: string;\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof CallRtmpBroadcastStoppedEvent\n   */\n  created_at: string;\n  /**\n   * Name of the given RTMP broadcast\n   * @type {string}\n   * @memberof CallRtmpBroadcastStoppedEvent\n   */\n  name: string;\n  /**\n   * The type of event: \"call.rtmp_broadcast_stopped\" in this case\n   * @type {string}\n   * @memberof CallRtmpBroadcastStoppedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a call session ends\n * @export\n * @interface CallSessionEndedEvent\n */\nexport interface CallSessionEndedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallSessionEndedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionEndedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionEndedEvent\n   */\n  created_at: string;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallSessionEndedEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.session_ended\" in this case\n   * @type {string}\n   * @memberof CallSessionEndedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when the participant counts in a call session are updated\n * @export\n * @interface CallSessionParticipantCountsUpdatedEvent\n */\nexport interface CallSessionParticipantCountsUpdatedEvent {\n  /**\n   *\n   * @type {number}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  anonymous_participant_count: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {{ [key: string]: number; }}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  participants_count_by_role: { [key: string]: number };\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.session_participant_count_updated\" in this case\n   * @type {string}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a participant joins a call session\n * @export\n * @interface CallSessionParticipantJoinedEvent\n */\nexport interface CallSessionParticipantJoinedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantJoinedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantJoinedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {CallParticipantResponse}\n   * @memberof CallSessionParticipantJoinedEvent\n   */\n  participant: CallParticipantResponse;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallSessionParticipantJoinedEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.session_participant_joined\" in this case\n   * @type {string}\n   * @memberof CallSessionParticipantJoinedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a participant leaves a call session\n * @export\n * @interface CallSessionParticipantLeftEvent\n */\nexport interface CallSessionParticipantLeftEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  created_at: string;\n  /**\n   * The duration participant was in the session in seconds\n   * @type {number}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  duration_seconds: number;\n  /**\n   *\n   * @type {CallParticipantResponse}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  participant: CallParticipantResponse;\n  /**\n   * The reason why the participant left the session\n   * @type {string}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  reason?: string;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.session_participant_left\" in this case\n   * @type {string}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CallSessionResponse\n */\nexport interface CallSessionResponse {\n  /**\n   *\n   * @type {{ [key: string]: string; }}\n   * @memberof CallSessionResponse\n   */\n  accepted_by: { [key: string]: string };\n  /**\n   *\n   * @type {number}\n   * @memberof CallSessionResponse\n   */\n  anonymous_participant_count: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  ended_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  live_ended_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  live_started_at?: string;\n  /**\n   *\n   * @type {{ [key: string]: string; }}\n   * @memberof CallSessionResponse\n   */\n  missed_by: { [key: string]: string };\n  /**\n   *\n   * @type {Array<CallParticipantResponse>}\n   * @memberof CallSessionResponse\n   */\n  participants: Array<CallParticipantResponse>;\n  /**\n   *\n   * @type {{ [key: string]: number; }}\n   * @memberof CallSessionResponse\n   */\n  participants_count_by_role: { [key: string]: number };\n  /**\n   *\n   * @type {{ [key: string]: string; }}\n   * @memberof CallSessionResponse\n   */\n  rejected_by: { [key: string]: string };\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  started_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  timer_ends_at?: string;\n}\n/**\n * This event is sent when a call session starts\n * @export\n * @interface CallSessionStartedEvent\n */\nexport interface CallSessionStartedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallSessionStartedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionStartedEvent\n   */\n  created_at: string;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallSessionStartedEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.session_started\" in this case\n   * @type {string}\n   * @memberof CallSessionStartedEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CallSettingsRequest\n */\nexport interface CallSettingsRequest {\n  /**\n   *\n   * @type {AudioSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  audio?: AudioSettingsRequest;\n  /**\n   *\n   * @type {BackstageSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  backstage?: BackstageSettingsRequest;\n  /**\n   *\n   * @type {BroadcastSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  broadcasting?: BroadcastSettingsRequest;\n  /**\n   *\n   * @type {FrameRecordingSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  frame_recording?: FrameRecordingSettingsRequest;\n  /**\n   *\n   * @type {GeofenceSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  geofencing?: GeofenceSettingsRequest;\n  /**\n   *\n   * @type {IngressSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  ingress?: IngressSettingsRequest;\n  /**\n   *\n   * @type {LimitsSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  limits?: LimitsSettingsRequest;\n  /**\n   *\n   * @type {RecordSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  recording?: RecordSettingsRequest;\n  /**\n   *\n   * @type {RingSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  ring?: RingSettingsRequest;\n  /**\n   *\n   * @type {ScreensharingSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  screensharing?: ScreensharingSettingsRequest;\n  /**\n   *\n   * @type {SessionSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  session?: SessionSettingsRequest;\n  /**\n   *\n   * @type {ThumbnailsSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  thumbnails?: ThumbnailsSettingsRequest;\n  /**\n   *\n   * @type {TranscriptionSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  transcription?: TranscriptionSettingsRequest;\n  /**\n   *\n   * @type {VideoSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  video?: VideoSettingsRequest;\n}\n/**\n *\n * @export\n * @interface CallSettingsResponse\n */\nexport interface CallSettingsResponse {\n  /**\n   *\n   * @type {AudioSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  audio: AudioSettingsResponse;\n  /**\n   *\n   * @type {BackstageSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  backstage: BackstageSettingsResponse;\n  /**\n   *\n   * @type {BroadcastSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  broadcasting: BroadcastSettingsResponse;\n  /**\n   *\n   * @type {FrameRecordingSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  frame_recording: FrameRecordingSettingsResponse;\n  /**\n   *\n   * @type {GeofenceSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  geofencing: GeofenceSettingsResponse;\n  /**\n   *\n   * @type {IngressSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  ingress?: IngressSettingsResponse;\n  /**\n   *\n   * @type {LimitsSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  limits: LimitsSettingsResponse;\n  /**\n   *\n   * @type {RecordSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  recording: RecordSettingsResponse;\n  /**\n   *\n   * @type {RingSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  ring: RingSettingsResponse;\n  /**\n   *\n   * @type {ScreensharingSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  screensharing: ScreensharingSettingsResponse;\n  /**\n   *\n   * @type {SessionSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  session: SessionSettingsResponse;\n  /**\n   *\n   * @type {ThumbnailsSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  thumbnails: ThumbnailsSettingsResponse;\n  /**\n   *\n   * @type {TranscriptionSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  transcription: TranscriptionSettingsResponse;\n  /**\n   *\n   * @type {VideoSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  video: VideoSettingsResponse;\n}\n/**\n * CallStateResponseFields is the payload for call state response\n * @export\n * @interface CallStateResponseFields\n */\nexport interface CallStateResponseFields {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallStateResponseFields\n   */\n  call: CallResponse;\n  /**\n   * List of call members\n   * @type {Array<MemberResponse>}\n   * @memberof CallStateResponseFields\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {MemberResponse}\n   * @memberof CallStateResponseFields\n   */\n  membership?: MemberResponse;\n  /**\n   *\n   * @type {Array<OwnCapability>}\n   * @memberof CallStateResponseFields\n   */\n  own_capabilities: Array<OwnCapability>;\n}\n/**\n *\n * @export\n * @interface CallStatsLocation\n */\nexport interface CallStatsLocation {\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsLocation\n   */\n  accuracy_radius_meters?: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsLocation\n   */\n  city?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsLocation\n   */\n  continent?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsLocation\n   */\n  country?: string;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsLocation\n   */\n  latitude?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsLocation\n   */\n  longitude?: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsLocation\n   */\n  subdivision?: string;\n}\n/**\n *\n * @export\n * @interface CallStatsParticipant\n */\nexport interface CallStatsParticipant {\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipant\n   */\n  latest_activity_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipant\n   */\n  name?: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof CallStatsParticipant\n   */\n  roles?: Array<string>;\n  /**\n   *\n   * @type {Array<CallStatsParticipantSession>}\n   * @memberof CallStatsParticipant\n   */\n  sessions: Array<CallStatsParticipantSession>;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipant\n   */\n  user_id: string;\n}\n/**\n *\n * @export\n * @interface CallStatsParticipantCounts\n */\nexport interface CallStatsParticipantCounts {\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsParticipantCounts\n   */\n  live_sessions: number;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsParticipantCounts\n   */\n  participants: number;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsParticipantCounts\n   */\n  peak_concurrent_sessions: number;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsParticipantCounts\n   */\n  peak_concurrent_users: number;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsParticipantCounts\n   */\n  publishers: number;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsParticipantCounts\n   */\n  sessions: number;\n}\n/**\n *\n * @export\n * @interface CallStatsParticipantSession\n */\nexport interface CallStatsParticipantSession {\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  browser?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  browser_version?: string;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsParticipantSession\n   */\n  cq_score?: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  current_ip?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  current_sfu?: string;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsParticipantSession\n   */\n  distance_to_sfu_kilometers?: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  ended_at?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallStatsParticipantSession\n   */\n  is_live: boolean;\n  /**\n   *\n   * @type {CallStatsLocation}\n   * @memberof CallStatsParticipantSession\n   */\n  location?: CallStatsLocation;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  os?: string;\n  /**\n   *\n   * @type {PublishedTrackFlags}\n   * @memberof CallStatsParticipantSession\n   */\n  published_tracks: PublishedTrackFlags;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  publisher_type?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  sdk?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  sdk_version?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  started_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  unified_session_id?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  user_session_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsParticipantSession\n   */\n  webrtc_version?: string;\n}\n/**\n * This event is sent when the insights report is ready\n * @export\n * @interface CallStatsReportReadyEvent\n */\nexport interface CallStatsReportReadyEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportReadyEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportReadyEvent\n   */\n  created_at: string;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallStatsReportReadyEvent\n   */\n  session_id: string;\n  /**\n   * The type of event, \"call.report_ready\" in this case\n   * @type {string}\n   * @memberof CallStatsReportReadyEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CallStatsReportSummaryResponse\n */\nexport interface CallStatsReportSummaryResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  call_duration_seconds: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  call_session_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  call_status: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  created_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  first_stats_time: string;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  min_user_rating?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  quality_score?: number;\n}\n/**\n * CallTranscription represents a transcription of a call.\n * @export\n * @interface CallTranscription\n */\nexport interface CallTranscription {\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscription\n   */\n  end_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscription\n   */\n  filename: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscription\n   */\n  session_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscription\n   */\n  start_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscription\n   */\n  url: string;\n}\n/**\n * This event is sent when call transcription has failed\n * @export\n * @interface CallTranscriptionFailedEvent\n */\nexport interface CallTranscriptionFailedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionFailedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionFailedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionFailedEvent\n   */\n  egress_id: string;\n  /**\n   * The error message detailing why transcription failed.\n   * @type {string}\n   * @memberof CallTranscriptionFailedEvent\n   */\n  error?: string;\n  /**\n   * The type of event: \"call.transcription_failed\" in this case\n   * @type {string}\n   * @memberof CallTranscriptionFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call transcription is ready\n * @export\n * @interface CallTranscriptionReadyEvent\n */\nexport interface CallTranscriptionReadyEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionReadyEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {CallTranscription}\n   * @memberof CallTranscriptionReadyEvent\n   */\n  call_transcription: CallTranscription;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionReadyEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionReadyEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.transcription_ready\" in this case\n   * @type {string}\n   * @memberof CallTranscriptionReadyEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call transcription has started\n * @export\n * @interface CallTranscriptionStartedEvent\n */\nexport interface CallTranscriptionStartedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStartedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStartedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.transcription_started\" in this case\n   * @type {string}\n   * @memberof CallTranscriptionStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call transcription has stopped\n * @export\n * @interface CallTranscriptionStoppedEvent\n */\nexport interface CallTranscriptionStoppedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStoppedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStoppedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStoppedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.transcription_stopped\" in this case\n   * @type {string}\n   * @memberof CallTranscriptionStoppedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a call is updated, clients should use this update the local state of the call.\n * This event also contains the capabilities by role for the call, clients should update the own_capability for the current.\n * @export\n * @interface CallUpdatedEvent\n */\nexport interface CallUpdatedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallUpdatedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallUpdatedEvent\n   */\n  call_cid: string;\n  /**\n   * The capabilities by role for this call\n   * @type {{ [key: string]: Array<string>; }}\n   * @memberof CallUpdatedEvent\n   */\n  capabilities_by_role: { [key: string]: Array<string> };\n  /**\n   *\n   * @type {string}\n   * @memberof CallUpdatedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.updated\" in this case\n   * @type {string}\n   * @memberof CallUpdatedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a user submits feedback for a call.\n * @export\n * @interface CallUserFeedbackSubmittedEvent\n */\nexport interface CallUserFeedbackSubmittedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  created_at: string;\n  /**\n   * Custom data provided by the user\n   * @type {{ [key: string]: any; }}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  custom?: { [key: string]: any };\n  /**\n   * The rating given by the user (1-5)\n   * @type {number}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  rating: number;\n  /**\n   * The reason provided by the user for the rating\n   * @type {string}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  reason?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  sdk?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  sdk_version?: string;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  session_id: string;\n  /**\n   * The type of event, \"call.user_feedback\" in this case\n   * @type {string}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallUserFeedbackSubmittedEvent\n   */\n  user: UserResponse;\n}\n/**\n * This event is sent when a call member is muted\n * @export\n * @interface CallUserMutedEvent\n */\nexport interface CallUserMutedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserMutedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserMutedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserMutedEvent\n   */\n  from_user_id: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof CallUserMutedEvent\n   */\n  muted_user_ids: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserMutedEvent\n   */\n  reason: string;\n  /**\n   * The type of event: \"call.user_muted\" in this case\n   * @type {string}\n   * @memberof CallUserMutedEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CallsPerDayReport\n */\nexport interface CallsPerDayReport {\n  /**\n   *\n   * @type {number}\n   * @memberof CallsPerDayReport\n   */\n  count: number;\n}\n/**\n *\n * @export\n * @interface CallsPerDayReportResponse\n */\nexport interface CallsPerDayReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateCallsPerDayReportResponse>}\n   * @memberof CallsPerDayReportResponse\n   */\n  daily: Array<DailyAggregateCallsPerDayReportResponse>;\n}\n/**\n *\n * @export\n * @interface ChatActivityStatsResponse\n */\nexport interface ChatActivityStatsResponse {\n  /**\n   *\n   * @type {MessageStatsResponse}\n   * @memberof ChatActivityStatsResponse\n   */\n  Messages?: MessageStatsResponse;\n}\n/**\n * This event is sent when closed captions are being sent in a call, clients should use this to show the closed captions in the call screen\n * @export\n * @interface ClosedCaptionEvent\n */\nexport interface ClosedCaptionEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof ClosedCaptionEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {CallClosedCaption}\n   * @memberof ClosedCaptionEvent\n   */\n  closed_caption: CallClosedCaption;\n  /**\n   *\n   * @type {string}\n   * @memberof ClosedCaptionEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.closed_caption\" in this case\n   * @type {string}\n   * @memberof ClosedCaptionEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CollectUserFeedbackRequest\n */\nexport interface CollectUserFeedbackRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof CollectUserFeedbackRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {number}\n   * @memberof CollectUserFeedbackRequest\n   */\n  rating: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CollectUserFeedbackRequest\n   */\n  reason?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CollectUserFeedbackRequest\n   */\n  sdk: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CollectUserFeedbackRequest\n   */\n  sdk_version: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CollectUserFeedbackRequest\n   */\n  user_session_id?: string;\n}\n/**\n * Basic response information\n * @export\n * @interface CollectUserFeedbackResponse\n */\nexport interface CollectUserFeedbackResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof CollectUserFeedbackResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface ConnectUserDetailsRequest\n */\nexport interface ConnectUserDetailsRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof ConnectUserDetailsRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectUserDetailsRequest\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectUserDetailsRequest\n   */\n  image?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof ConnectUserDetailsRequest\n   */\n  invisible?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectUserDetailsRequest\n   */\n  language?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectUserDetailsRequest\n   */\n  name?: string;\n  /**\n   *\n   * @type {object}\n   * @memberof ConnectUserDetailsRequest\n   */\n  privacy_settings?: object;\n}\n/**\n * This event is sent when the WS connection is established and authenticated, this event contains the full user object as it is stored on the server\n * @export\n * @interface ConnectedEvent\n */\nexport interface ConnectedEvent {\n  /**\n   * The connection_id for this client\n   * @type {string}\n   * @memberof ConnectedEvent\n   */\n  connection_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {OwnUserResponse}\n   * @memberof ConnectedEvent\n   */\n  me: OwnUserResponse;\n  /**\n   * The type of event: \"connection.ok\" in this case\n   * @type {string}\n   * @memberof ConnectedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when the WS connection fails\n * @export\n * @interface ConnectionErrorEvent\n */\nexport interface ConnectionErrorEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectionErrorEvent\n   */\n  connection_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectionErrorEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {APIError}\n   * @memberof ConnectionErrorEvent\n   */\n  error: APIError;\n  /**\n   * The type of event: \"connection.ok\" in this case\n   * @type {string}\n   * @memberof ConnectionErrorEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CountByMinuteResponse\n */\nexport interface CountByMinuteResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof CountByMinuteResponse\n   */\n  count: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CountByMinuteResponse\n   */\n  start_ts: string;\n}\n/**\n * Create device request\n * @export\n * @interface CreateDeviceRequest\n */\nexport interface CreateDeviceRequest {\n  /**\n   * Device ID\n   * @type {string}\n   * @memberof CreateDeviceRequest\n   */\n  id: string;\n  /**\n   * Push provider\n   * @type {string}\n   * @memberof CreateDeviceRequest\n   */\n  push_provider: CreateDeviceRequestPushProviderEnum;\n  /**\n   * Push provider name\n   * @type {string}\n   * @memberof CreateDeviceRequest\n   */\n  push_provider_name?: string;\n  /**\n   * When true the token is for Apple VoIP push notifications\n   * @type {boolean}\n   * @memberof CreateDeviceRequest\n   */\n  voip_token?: boolean;\n}\n\n/**\n * @export\n */\nexport const CreateDeviceRequestPushProviderEnum = {\n  FIREBASE: 'firebase',\n  APN: 'apn',\n  HUAWEI: 'huawei',\n  XIAOMI: 'xiaomi',\n} as const;\nexport type CreateDeviceRequestPushProviderEnum =\n  (typeof CreateDeviceRequestPushProviderEnum)[keyof typeof CreateDeviceRequestPushProviderEnum];\n\n/**\n *\n * @export\n * @interface CreateGuestRequest\n */\nexport interface CreateGuestRequest {\n  /**\n   *\n   * @type {UserRequest}\n   * @memberof CreateGuestRequest\n   */\n  user: UserRequest;\n}\n/**\n *\n * @export\n * @interface CreateGuestResponse\n */\nexport interface CreateGuestResponse {\n  /**\n   * the access token to authenticate the user\n   * @type {string}\n   * @memberof CreateGuestResponse\n   */\n  access_token: string;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof CreateGuestResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CreateGuestResponse\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface Credentials\n */\nexport interface Credentials {\n  /**\n   *\n   * @type {Array<ICEServer>}\n   * @memberof Credentials\n   */\n  ice_servers: Array<ICEServer>;\n  /**\n   *\n   * @type {SFUResponse}\n   * @memberof Credentials\n   */\n  server: SFUResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof Credentials\n   */\n  token: string;\n}\n/**\n * A custom event, this event is used to send custom events to other participants in the call.\n * @export\n * @interface CustomVideoEvent\n */\nexport interface CustomVideoEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CustomVideoEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CustomVideoEvent\n   */\n  created_at: string;\n  /**\n   * Custom data for this object\n   * @type {{ [key: string]: any; }}\n   * @memberof CustomVideoEvent\n   */\n  custom: { [key: string]: any };\n  /**\n   * The type of event, \"custom\" in this case\n   * @type {string}\n   * @memberof CustomVideoEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CustomVideoEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface DailyAggregateCallDurationReportResponse\n */\nexport interface DailyAggregateCallDurationReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateCallDurationReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {CallDurationReport}\n   * @memberof DailyAggregateCallDurationReportResponse\n   */\n  report: CallDurationReport;\n}\n/**\n *\n * @export\n * @interface DailyAggregateCallParticipantCountReportResponse\n */\nexport interface DailyAggregateCallParticipantCountReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateCallParticipantCountReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {CallParticipantCountReport}\n   * @memberof DailyAggregateCallParticipantCountReportResponse\n   */\n  report: CallParticipantCountReport;\n}\n/**\n *\n * @export\n * @interface DailyAggregateCallsPerDayReportResponse\n */\nexport interface DailyAggregateCallsPerDayReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateCallsPerDayReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {CallsPerDayReport}\n   * @memberof DailyAggregateCallsPerDayReportResponse\n   */\n  report: CallsPerDayReport;\n}\n/**\n *\n * @export\n * @interface DailyAggregateQualityScoreReportResponse\n */\nexport interface DailyAggregateQualityScoreReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateQualityScoreReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {QualityScoreReport}\n   * @memberof DailyAggregateQualityScoreReportResponse\n   */\n  report: QualityScoreReport;\n}\n/**\n *\n * @export\n * @interface DailyAggregateSDKUsageReportResponse\n */\nexport interface DailyAggregateSDKUsageReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateSDKUsageReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {SDKUsageReport}\n   * @memberof DailyAggregateSDKUsageReportResponse\n   */\n  report: SDKUsageReport;\n}\n/**\n *\n * @export\n * @interface DailyAggregateUserFeedbackReportResponse\n */\nexport interface DailyAggregateUserFeedbackReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateUserFeedbackReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {UserFeedbackReport}\n   * @memberof DailyAggregateUserFeedbackReportResponse\n   */\n  report: UserFeedbackReport;\n}\n/**\n * DeleteCallRequest is the payload for deleting a call.\n * @export\n * @interface DeleteCallRequest\n */\nexport interface DeleteCallRequest {\n  /**\n   * if true the call will be hard deleted along with all related data\n   * @type {boolean}\n   * @memberof DeleteCallRequest\n   */\n  hard?: boolean;\n}\n/**\n * DeleteCallResponse is the payload for deleting a call.\n * @export\n * @interface DeleteCallResponse\n */\nexport interface DeleteCallResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof DeleteCallResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof DeleteCallResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {string}\n   * @memberof DeleteCallResponse\n   */\n  task_id?: string;\n}\n/**\n * Response for DeleteRecording\n * @export\n * @interface DeleteRecordingResponse\n */\nexport interface DeleteRecordingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof DeleteRecordingResponse\n   */\n  duration: string;\n}\n/**\n * DeleteTranscriptionResponse is the payload for deleting a transcription.\n * @export\n * @interface DeleteTranscriptionResponse\n */\nexport interface DeleteTranscriptionResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof DeleteTranscriptionResponse\n   */\n  duration: string;\n}\n/**\n * Response for Device\n * @export\n * @interface DeviceResponse\n */\nexport interface DeviceResponse {\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  created_at: string;\n  /**\n   * Whether device is disabled or not\n   * @type {boolean}\n   * @memberof DeviceResponse\n   */\n  disabled?: boolean;\n  /**\n   * Reason explaining why device had been disabled\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  disabled_reason?: string;\n  /**\n   * Device ID\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  id: string;\n  /**\n   * Push provider\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  push_provider: string;\n  /**\n   * Push provider name\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  push_provider_name?: string;\n  /**\n   * User ID\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  user_id: string;\n  /**\n   * When true the token is for Apple VoIP push notifications\n   * @type {boolean}\n   * @memberof DeviceResponse\n   */\n  voip?: boolean;\n}\n/**\n *\n * @export\n * @interface EdgeResponse\n */\nexport interface EdgeResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof EdgeResponse\n   */\n  continent_code: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EdgeResponse\n   */\n  country_iso_code: string;\n  /**\n   *\n   * @type {number}\n   * @memberof EdgeResponse\n   */\n  green: number;\n  /**\n   *\n   * @type {string}\n   * @memberof EdgeResponse\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EdgeResponse\n   */\n  latency_test_url: string;\n  /**\n   *\n   * @type {number}\n   * @memberof EdgeResponse\n   */\n  latitude: number;\n  /**\n   *\n   * @type {number}\n   * @memberof EdgeResponse\n   */\n  longitude: number;\n  /**\n   *\n   * @type {number}\n   * @memberof EdgeResponse\n   */\n  red: number;\n  /**\n   *\n   * @type {string}\n   * @memberof EdgeResponse\n   */\n  subdivision_iso_code: string;\n  /**\n   *\n   * @type {number}\n   * @memberof EdgeResponse\n   */\n  yellow: number;\n}\n/**\n *\n * @export\n * @interface EgressHLSResponse\n */\nexport interface EgressHLSResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof EgressHLSResponse\n   */\n  playlist_url: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EgressHLSResponse\n   */\n  status: string;\n}\n/**\n *\n * @export\n * @interface EgressRTMPResponse\n */\nexport interface EgressRTMPResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof EgressRTMPResponse\n   */\n  name: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EgressRTMPResponse\n   */\n  started_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EgressRTMPResponse\n   */\n  stream_key?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EgressRTMPResponse\n   */\n  stream_url?: string;\n}\n/**\n *\n * @export\n * @interface EgressResponse\n */\nexport interface EgressResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof EgressResponse\n   */\n  broadcasting: boolean;\n  /**\n   *\n   * @type {FrameRecordingResponse}\n   * @memberof EgressResponse\n   */\n  frame_recording?: FrameRecordingResponse;\n  /**\n   *\n   * @type {EgressHLSResponse}\n   * @memberof EgressResponse\n   */\n  hls?: EgressHLSResponse;\n  /**\n   *\n   * @type {Array<EgressRTMPResponse>}\n   * @memberof EgressResponse\n   */\n  rtmps: Array<EgressRTMPResponse>;\n}\n/**\n * Response for ending a call\n * @export\n * @interface EndCallResponse\n */\nexport interface EndCallResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof EndCallResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface FrameRecordingResponse\n */\nexport interface FrameRecordingResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof FrameRecordingResponse\n   */\n  status: string;\n}\n/**\n *\n * @export\n * @interface FrameRecordingSettingsRequest\n */\nexport interface FrameRecordingSettingsRequest {\n  /**\n   *\n   * @type {number}\n   * @memberof FrameRecordingSettingsRequest\n   */\n  capture_interval_in_seconds: number;\n  /**\n   *\n   * @type {string}\n   * @memberof FrameRecordingSettingsRequest\n   */\n  mode: FrameRecordingSettingsRequestModeEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof FrameRecordingSettingsRequest\n   */\n  quality?: FrameRecordingSettingsRequestQualityEnum;\n}\n\n/**\n * @export\n */\nexport const FrameRecordingSettingsRequestModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type FrameRecordingSettingsRequestModeEnum =\n  (typeof FrameRecordingSettingsRequestModeEnum)[keyof typeof FrameRecordingSettingsRequestModeEnum];\n\n/**\n * @export\n */\nexport const FrameRecordingSettingsRequestQualityEnum = {\n  _360P: '360p',\n  _480P: '480p',\n  _720P: '720p',\n  _1080P: '1080p',\n  _1440P: '1440p',\n} as const;\nexport type FrameRecordingSettingsRequestQualityEnum =\n  (typeof FrameRecordingSettingsRequestQualityEnum)[keyof typeof FrameRecordingSettingsRequestQualityEnum];\n\n/**\n *\n * @export\n * @interface FrameRecordingSettingsResponse\n */\nexport interface FrameRecordingSettingsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof FrameRecordingSettingsResponse\n   */\n  capture_interval_in_seconds: number;\n  /**\n   *\n   * @type {string}\n   * @memberof FrameRecordingSettingsResponse\n   */\n  mode: FrameRecordingSettingsResponseModeEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof FrameRecordingSettingsResponse\n   */\n  quality?: string;\n}\n\n/**\n * @export\n */\nexport const FrameRecordingSettingsResponseModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type FrameRecordingSettingsResponseModeEnum =\n  (typeof FrameRecordingSettingsResponseModeEnum)[keyof typeof FrameRecordingSettingsResponseModeEnum];\n\n/**\n *\n * @export\n * @interface GeofenceSettingsRequest\n */\nexport interface GeofenceSettingsRequest {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof GeofenceSettingsRequest\n   */\n  names?: Array<string>;\n}\n/**\n *\n * @export\n * @interface GeofenceSettingsResponse\n */\nexport interface GeofenceSettingsResponse {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof GeofenceSettingsResponse\n   */\n  names: Array<string>;\n}\n/**\n * Basic response information\n * @export\n * @interface GetCallReportResponse\n */\nexport interface GetCallReportResponse {\n  /**\n   *\n   * @type {ChatActivityStatsResponse}\n   * @memberof GetCallReportResponse\n   */\n  chat_activity?: ChatActivityStatsResponse;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof GetCallReportResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {ReportResponse}\n   * @memberof GetCallReportResponse\n   */\n  report: ReportResponse;\n  /**\n   *\n   * @type {CallSessionResponse}\n   * @memberof GetCallReportResponse\n   */\n  session?: CallSessionResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof GetCallReportResponse\n   */\n  session_id: string;\n  /**\n   *\n   * @type {Array<VideoReactionsResponse>}\n   * @memberof GetCallReportResponse\n   */\n  video_reactions?: Array<VideoReactionsResponse>;\n}\n/**\n *\n * @export\n * @interface GetCallResponse\n */\nexport interface GetCallResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof GetCallResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof GetCallResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof GetCallResponse\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {MemberResponse}\n   * @memberof GetCallResponse\n   */\n  membership?: MemberResponse;\n  /**\n   *\n   * @type {Array<OwnCapability>}\n   * @memberof GetCallResponse\n   */\n  own_capabilities: Array<OwnCapability>;\n}\n/**\n * Basic response information\n * @export\n * @interface GetCallSessionParticipantStatsDetailsResponse\n */\nexport interface GetCallSessionParticipantStatsDetailsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  call_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  call_session_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  call_type: string;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {ParticipantSeriesPublisherStats}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  publisher?: ParticipantSeriesPublisherStats;\n  /**\n   *\n   * @type {ParticipantSeriesSubscriberStats}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  subscriber?: ParticipantSeriesSubscriberStats;\n  /**\n   *\n   * @type {ParticipantSeriesTimeframe}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  timeframe?: ParticipantSeriesTimeframe;\n  /**\n   *\n   * @type {ParticipantSeriesUserStats}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  user?: ParticipantSeriesUserStats;\n  /**\n   *\n   * @type {string}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  user_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof GetCallSessionParticipantStatsDetailsResponse\n   */\n  user_session_id: string;\n}\n/**\n * Basic response information\n * @export\n * @interface GetEdgesResponse\n */\nexport interface GetEdgesResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof GetEdgesResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<EdgeResponse>}\n   * @memberof GetEdgesResponse\n   */\n  edges: Array<EdgeResponse>;\n}\n/**\n *\n * @export\n * @interface GetOrCreateCallRequest\n */\nexport interface GetOrCreateCallRequest {\n  /**\n   *\n   * @type {CallRequest}\n   * @memberof GetOrCreateCallRequest\n   */\n  data?: CallRequest;\n  /**\n   *\n   * @type {number}\n   * @memberof GetOrCreateCallRequest\n   */\n  members_limit?: number;\n  /**\n   * if provided it sends a notification event to the members for this call\n   * @type {boolean}\n   * @memberof GetOrCreateCallRequest\n   */\n  notify?: boolean;\n  /**\n   * if provided it sends a ring event to the members for this call\n   * @type {boolean}\n   * @memberof GetOrCreateCallRequest\n   */\n  ring?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GetOrCreateCallRequest\n   */\n  video?: boolean;\n}\n/**\n *\n * @export\n * @interface GetOrCreateCallResponse\n */\nexport interface GetOrCreateCallResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof GetOrCreateCallResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GetOrCreateCallResponse\n   */\n  created: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof GetOrCreateCallResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof GetOrCreateCallResponse\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {MemberResponse}\n   * @memberof GetOrCreateCallResponse\n   */\n  membership?: MemberResponse;\n  /**\n   *\n   * @type {Array<OwnCapability>}\n   * @memberof GetOrCreateCallResponse\n   */\n  own_capabilities: Array<OwnCapability>;\n}\n/**\n *\n * @export\n * @interface GoLiveRequest\n */\nexport interface GoLiveRequest {\n  /**\n   *\n   * @type {string}\n   * @memberof GoLiveRequest\n   */\n  recording_storage_name?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GoLiveRequest\n   */\n  start_closed_caption?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GoLiveRequest\n   */\n  start_hls?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GoLiveRequest\n   */\n  start_recording?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GoLiveRequest\n   */\n  start_transcription?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof GoLiveRequest\n   */\n  transcription_storage_name?: string;\n}\n/**\n * Basic response information\n * @export\n * @interface GoLiveResponse\n */\nexport interface GoLiveResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof GoLiveResponse\n   */\n  call: CallResponse;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof GoLiveResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface GroupedStatsResponse\n */\nexport interface GroupedStatsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof GroupedStatsResponse\n   */\n  name: string;\n  /**\n   *\n   * @type {number}\n   * @memberof GroupedStatsResponse\n   */\n  unique: number;\n}\n/**\n *\n * @export\n * @interface HLSSettingsRequest\n */\nexport interface HLSSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof HLSSettingsRequest\n   */\n  auto_on?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof HLSSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof HLSSettingsRequest\n   */\n  quality_tracks: Array<string>;\n}\n/**\n * HLSSettings is the payload for HLS settings\n * @export\n * @interface HLSSettingsResponse\n */\nexport interface HLSSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof HLSSettingsResponse\n   */\n  auto_on: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof HLSSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof HLSSettingsResponse\n   */\n  quality_tracks: Array<string>;\n}\n/**\n *\n * @export\n * @interface HealthCheckEvent\n */\nexport interface HealthCheckEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof HealthCheckEvent\n   */\n  cid?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof HealthCheckEvent\n   */\n  connection_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof HealthCheckEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof HealthCheckEvent\n   */\n  custom: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof HealthCheckEvent\n   */\n  received_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof HealthCheckEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface ICEServer\n */\nexport interface ICEServer {\n  /**\n   *\n   * @type {string}\n   * @memberof ICEServer\n   */\n  password: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof ICEServer\n   */\n  urls: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof ICEServer\n   */\n  username: string;\n}\n/**\n *\n * @export\n * @interface IngressAudioEncodingOptionsRequest\n */\nexport interface IngressAudioEncodingOptionsRequest {\n  /**\n   *\n   * @type {number}\n   * @memberof IngressAudioEncodingOptionsRequest\n   */\n  bitrate: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressAudioEncodingOptionsRequest\n   */\n  channels: IngressAudioEncodingOptionsRequestChannelsEnum;\n  /**\n   *\n   * @type {boolean}\n   * @memberof IngressAudioEncodingOptionsRequest\n   */\n  enable_dtx?: boolean;\n}\n\n/**\n * @export\n */\nexport const IngressAudioEncodingOptionsRequestChannelsEnum = {\n  NUMBER_1: 1,\n  NUMBER_2: 2,\n} as const;\nexport type IngressAudioEncodingOptionsRequestChannelsEnum =\n  (typeof IngressAudioEncodingOptionsRequestChannelsEnum)[keyof typeof IngressAudioEncodingOptionsRequestChannelsEnum];\n\n/**\n *\n * @export\n * @interface IngressAudioEncodingResponse\n */\nexport interface IngressAudioEncodingResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof IngressAudioEncodingResponse\n   */\n  bitrate: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressAudioEncodingResponse\n   */\n  channels: number;\n  /**\n   *\n   * @type {boolean}\n   * @memberof IngressAudioEncodingResponse\n   */\n  enable_dtx: boolean;\n}\n/**\n *\n * @export\n * @interface IngressSettingsRequest\n */\nexport interface IngressSettingsRequest {\n  /**\n   *\n   * @type {IngressAudioEncodingOptionsRequest}\n   * @memberof IngressSettingsRequest\n   */\n  audio_encoding_options?: IngressAudioEncodingOptionsRequest;\n  /**\n   *\n   * @type {boolean}\n   * @memberof IngressSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {{ [key: string]: IngressVideoEncodingOptionsRequest; }}\n   * @memberof IngressSettingsRequest\n   */\n  video_encoding_options?: {\n    [key: string]: IngressVideoEncodingOptionsRequest;\n  };\n}\n/**\n *\n * @export\n * @interface IngressSettingsResponse\n */\nexport interface IngressSettingsResponse {\n  /**\n   *\n   * @type {IngressAudioEncodingResponse}\n   * @memberof IngressSettingsResponse\n   */\n  audio_encoding_options?: IngressAudioEncodingResponse;\n  /**\n   *\n   * @type {boolean}\n   * @memberof IngressSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {{ [key: string]: IngressVideoEncodingResponse; }}\n   * @memberof IngressSettingsResponse\n   */\n  video_encoding_options?: { [key: string]: IngressVideoEncodingResponse };\n}\n/**\n *\n * @export\n * @interface IngressSourceRequest\n */\nexport interface IngressSourceRequest {\n  /**\n   *\n   * @type {number}\n   * @memberof IngressSourceRequest\n   */\n  fps: IngressSourceRequestFpsEnum;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressSourceRequest\n   */\n  height: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressSourceRequest\n   */\n  width: number;\n}\n\n/**\n * @export\n */\nexport const IngressSourceRequestFpsEnum = {\n  NUMBER_30: 30,\n  NUMBER_60: 60,\n} as const;\nexport type IngressSourceRequestFpsEnum =\n  (typeof IngressSourceRequestFpsEnum)[keyof typeof IngressSourceRequestFpsEnum];\n\n/**\n *\n * @export\n * @interface IngressSourceResponse\n */\nexport interface IngressSourceResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof IngressSourceResponse\n   */\n  fps: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressSourceResponse\n   */\n  height: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressSourceResponse\n   */\n  width: number;\n}\n/**\n *\n * @export\n * @interface IngressVideoEncodingOptionsRequest\n */\nexport interface IngressVideoEncodingOptionsRequest {\n  /**\n   *\n   * @type {Array<IngressVideoLayerRequest>}\n   * @memberof IngressVideoEncodingOptionsRequest\n   */\n  layers: Array<IngressVideoLayerRequest>;\n  /**\n   *\n   * @type {IngressSourceRequest}\n   * @memberof IngressVideoEncodingOptionsRequest\n   */\n  source: IngressSourceRequest;\n}\n/**\n *\n * @export\n * @interface IngressVideoEncodingResponse\n */\nexport interface IngressVideoEncodingResponse {\n  /**\n   *\n   * @type {Array<IngressVideoLayerResponse>}\n   * @memberof IngressVideoEncodingResponse\n   */\n  layers: Array<IngressVideoLayerResponse>;\n  /**\n   *\n   * @type {IngressSourceResponse}\n   * @memberof IngressVideoEncodingResponse\n   */\n  source: IngressSourceResponse;\n}\n/**\n *\n * @export\n * @interface IngressVideoLayerRequest\n */\nexport interface IngressVideoLayerRequest {\n  /**\n   *\n   * @type {number}\n   * @memberof IngressVideoLayerRequest\n   */\n  bitrate: number;\n  /**\n   *\n   * @type {string}\n   * @memberof IngressVideoLayerRequest\n   */\n  codec: IngressVideoLayerRequestCodecEnum;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressVideoLayerRequest\n   */\n  frame_rate_limit: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressVideoLayerRequest\n   */\n  max_dimension: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressVideoLayerRequest\n   */\n  min_dimension: number;\n}\n\n/**\n * @export\n */\nexport const IngressVideoLayerRequestCodecEnum = {\n  H264: 'h264',\n  VP8: 'vp8',\n} as const;\nexport type IngressVideoLayerRequestCodecEnum =\n  (typeof IngressVideoLayerRequestCodecEnum)[keyof typeof IngressVideoLayerRequestCodecEnum];\n\n/**\n *\n * @export\n * @interface IngressVideoLayerResponse\n */\nexport interface IngressVideoLayerResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof IngressVideoLayerResponse\n   */\n  bitrate: number;\n  /**\n   *\n   * @type {string}\n   * @memberof IngressVideoLayerResponse\n   */\n  codec: string;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressVideoLayerResponse\n   */\n  frame_rate_limit: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressVideoLayerResponse\n   */\n  max_dimension: number;\n  /**\n   *\n   * @type {number}\n   * @memberof IngressVideoLayerResponse\n   */\n  min_dimension: number;\n}\n/**\n *\n * @export\n * @interface JoinCallRequest\n */\nexport interface JoinCallRequest {\n  /**\n   * if true the call will be created if it doesn't exist\n   * @type {boolean}\n   * @memberof JoinCallRequest\n   */\n  create?: boolean;\n  /**\n   *\n   * @type {CallRequest}\n   * @memberof JoinCallRequest\n   */\n  data?: CallRequest;\n  /**\n   *\n   * @type {string}\n   * @memberof JoinCallRequest\n   */\n  location: string;\n  /**\n   *\n   * @type {number}\n   * @memberof JoinCallRequest\n   */\n  members_limit?: number;\n  /**\n   * If the participant is migrating from another SFU, then this is the ID of the previous SFU\n   * @type {string}\n   * @memberof JoinCallRequest\n   */\n  migrating_from?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof JoinCallRequest\n   */\n  notify?: boolean;\n  /**\n   * if true and the call is created, the notification will include ring=true\n   * @type {boolean}\n   * @memberof JoinCallRequest\n   */\n  ring?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof JoinCallRequest\n   */\n  video?: boolean;\n}\n/**\n *\n * @export\n * @interface JoinCallResponse\n */\nexport interface JoinCallResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof JoinCallResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {boolean}\n   * @memberof JoinCallResponse\n   */\n  created: boolean;\n  /**\n   *\n   * @type {Credentials}\n   * @memberof JoinCallResponse\n   */\n  credentials: Credentials;\n  /**\n   *\n   * @type {string}\n   * @memberof JoinCallResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof JoinCallResponse\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {MemberResponse}\n   * @memberof JoinCallResponse\n   */\n  membership?: MemberResponse;\n  /**\n   *\n   * @type {Array<OwnCapability>}\n   * @memberof JoinCallResponse\n   */\n  own_capabilities: Array<OwnCapability>;\n  /**\n   *\n   * @type {StatsOptions}\n   * @memberof JoinCallResponse\n   */\n  stats_options: StatsOptions;\n}\n/**\n * KickUserRequest is the payload for kicking a user from a call. Optionally block the user as well.\n * @export\n * @interface KickUserRequest\n */\nexport interface KickUserRequest {\n  /**\n   * If true, also block the user from rejoining the call\n   * @type {boolean}\n   * @memberof KickUserRequest\n   */\n  block?: boolean;\n  /**\n   * The user to kick\n   * @type {string}\n   * @memberof KickUserRequest\n   */\n  user_id: string;\n}\n/**\n * KickUserResponse is the payload for kicking a user from a call.\n * @export\n * @interface KickUserResponse\n */\nexport interface KickUserResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof KickUserResponse\n   */\n  duration: string;\n}\n/**\n * This event is sent to call participants to notify when a user is kicked from a call. Clients should make the kicked user leave the call UI.\n * @export\n * @interface KickedUserEvent\n */\nexport interface KickedUserEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof KickedUserEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof KickedUserEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof KickedUserEvent\n   */\n  kicked_by_user?: UserResponse;\n  /**\n   * The type of event: \"call.kicked_user\" in this case\n   * @type {string}\n   * @memberof KickedUserEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof KickedUserEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface LayoutSettingsRequest\n */\nexport interface LayoutSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof LayoutSettingsRequest\n   */\n  detect_orientation?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof LayoutSettingsRequest\n   */\n  external_app_url?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof LayoutSettingsRequest\n   */\n  external_css_url?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof LayoutSettingsRequest\n   */\n  name: LayoutSettingsRequestNameEnum;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof LayoutSettingsRequest\n   */\n  options?: { [key: string]: any };\n}\n\n/**\n * @export\n */\nexport const LayoutSettingsRequestNameEnum = {\n  SPOTLIGHT: 'spotlight',\n  GRID: 'grid',\n  SINGLE_PARTICIPANT: 'single-participant',\n  MOBILE: 'mobile',\n  CUSTOM: 'custom',\n} as const;\nexport type LayoutSettingsRequestNameEnum =\n  (typeof LayoutSettingsRequestNameEnum)[keyof typeof LayoutSettingsRequestNameEnum];\n\n/**\n *\n * @export\n * @interface LimitsSettingsRequest\n */\nexport interface LimitsSettingsRequest {\n  /**\n   *\n   * @type {number}\n   * @memberof LimitsSettingsRequest\n   */\n  max_duration_seconds?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof LimitsSettingsRequest\n   */\n  max_participants?: number;\n  /**\n   *\n   * @type {boolean}\n   * @memberof LimitsSettingsRequest\n   */\n  max_participants_exclude_owner?: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof LimitsSettingsRequest\n   */\n  max_participants_exclude_roles?: Array<string>;\n}\n/**\n *\n * @export\n * @interface LimitsSettingsResponse\n */\nexport interface LimitsSettingsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof LimitsSettingsResponse\n   */\n  max_duration_seconds?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof LimitsSettingsResponse\n   */\n  max_participants?: number;\n  /**\n   *\n   * @type {boolean}\n   * @memberof LimitsSettingsResponse\n   */\n  max_participants_exclude_owner?: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof LimitsSettingsResponse\n   */\n  max_participants_exclude_roles: Array<string>;\n}\n/**\n * List devices response\n * @export\n * @interface ListDevicesResponse\n */\nexport interface ListDevicesResponse {\n  /**\n   * List of devices\n   * @type {Array<DeviceResponse>}\n   * @memberof ListDevicesResponse\n   */\n  devices: Array<DeviceResponse>;\n  /**\n   *\n   * @type {string}\n   * @memberof ListDevicesResponse\n   */\n  duration: string;\n}\n/**\n * Response for listing recordings\n * @export\n * @interface ListRecordingsResponse\n */\nexport interface ListRecordingsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof ListRecordingsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<CallRecording>}\n   * @memberof ListRecordingsResponse\n   */\n  recordings: Array<CallRecording>;\n}\n/**\n *\n * @export\n * @interface ListTranscriptionsResponse\n */\nexport interface ListTranscriptionsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof ListTranscriptionsResponse\n   */\n  duration: string;\n  /**\n   * List of transcriptions for the call\n   * @type {Array<CallTranscription>}\n   * @memberof ListTranscriptionsResponse\n   */\n  transcriptions: Array<CallTranscription>;\n}\n/**\n * MemberRequest is the payload for adding a member to a call.\n * @export\n * @interface MemberRequest\n */\nexport interface MemberRequest {\n  /**\n   * Custom data for this object\n   * @type {{ [key: string]: any; }}\n   * @memberof MemberRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof MemberRequest\n   */\n  role?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof MemberRequest\n   */\n  user_id: string;\n}\n/**\n * MemberResponse is the payload for a member of a call.\n * @export\n * @interface MemberResponse\n */\nexport interface MemberResponse {\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof MemberResponse\n   */\n  created_at: string;\n  /**\n   * Custom member response data\n   * @type {{ [key: string]: any; }}\n   * @memberof MemberResponse\n   */\n  custom: { [key: string]: any };\n  /**\n   * Date/time of deletion\n   * @type {string}\n   * @memberof MemberResponse\n   */\n  deleted_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof MemberResponse\n   */\n  role?: string;\n  /**\n   * Date/time of the last update\n   * @type {string}\n   * @memberof MemberResponse\n   */\n  updated_at: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof MemberResponse\n   */\n  user: UserResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof MemberResponse\n   */\n  user_id: string;\n}\n/**\n *\n * @export\n * @interface MessageStatsResponse\n */\nexport interface MessageStatsResponse {\n  /**\n   *\n   * @type {Array<CountByMinuteResponse>}\n   * @memberof MessageStatsResponse\n   */\n  count_over_time?: Array<CountByMinuteResponse>;\n}\n/**\n *\n * @export\n * @interface MetricDescriptor\n */\nexport interface MetricDescriptor {\n  /**\n   *\n   * @type {string}\n   * @memberof MetricDescriptor\n   */\n  description?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof MetricDescriptor\n   */\n  label: string;\n  /**\n   *\n   * @type {string}\n   * @memberof MetricDescriptor\n   */\n  unit?: string;\n}\n/**\n *\n * @export\n * @interface MetricThreshold\n */\nexport interface MetricThreshold {\n  /**\n   *\n   * @type {string}\n   * @memberof MetricThreshold\n   */\n  level: string;\n  /**\n   *\n   * @type {string}\n   * @memberof MetricThreshold\n   */\n  operator: string;\n  /**\n   *\n   * @type {number}\n   * @memberof MetricThreshold\n   */\n  value: number;\n  /**\n   *\n   * @type {string}\n   * @memberof MetricThreshold\n   */\n  value_unit?: string;\n  /**\n   *\n   * @type {number}\n   * @memberof MetricThreshold\n   */\n  window_seconds?: number;\n}\n/**\n *\n * @export\n * @interface MuteUsersRequest\n */\nexport interface MuteUsersRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof MuteUsersRequest\n   */\n  audio?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof MuteUsersRequest\n   */\n  mute_all_users?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof MuteUsersRequest\n   */\n  screenshare?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof MuteUsersRequest\n   */\n  screenshare_audio?: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof MuteUsersRequest\n   */\n  user_ids?: Array<string>;\n  /**\n   *\n   * @type {boolean}\n   * @memberof MuteUsersRequest\n   */\n  video?: boolean;\n}\n/**\n * MuteUsersResponse is the response payload for the mute users endpoint.\n * @export\n * @interface MuteUsersResponse\n */\nexport interface MuteUsersResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof MuteUsersResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface NetworkMetricsReportResponse\n */\nexport interface NetworkMetricsReportResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof NetworkMetricsReportResponse\n   */\n  average_connection_time?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof NetworkMetricsReportResponse\n   */\n  average_jitter?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof NetworkMetricsReportResponse\n   */\n  average_latency?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof NetworkMetricsReportResponse\n   */\n  average_time_to_reconnect?: number;\n}\n/**\n *\n * @export\n * @interface NoiseCancellationSettings\n */\nexport interface NoiseCancellationSettings {\n  /**\n   *\n   * @type {string}\n   * @memberof NoiseCancellationSettings\n   */\n  mode: NoiseCancellationSettingsModeEnum;\n}\n\n/**\n * @export\n */\nexport const NoiseCancellationSettingsModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type NoiseCancellationSettingsModeEnum =\n  (typeof NoiseCancellationSettingsModeEnum)[keyof typeof NoiseCancellationSettingsModeEnum];\n\n/**\n * All possibility of string to use\n * @export\n */\nexport const OwnCapability = {\n  BLOCK_USERS: 'block-users',\n  CHANGE_MAX_DURATION: 'change-max-duration',\n  CREATE_CALL: 'create-call',\n  CREATE_REACTION: 'create-reaction',\n  ENABLE_NOISE_CANCELLATION: 'enable-noise-cancellation',\n  END_CALL: 'end-call',\n  JOIN_BACKSTAGE: 'join-backstage',\n  JOIN_CALL: 'join-call',\n  JOIN_ENDED_CALL: 'join-ended-call',\n  KICK_USER: 'kick-user',\n  MUTE_USERS: 'mute-users',\n  PIN_FOR_EVERYONE: 'pin-for-everyone',\n  READ_CALL: 'read-call',\n  REMOVE_CALL_MEMBER: 'remove-call-member',\n  SCREENSHARE: 'screenshare',\n  SEND_AUDIO: 'send-audio',\n  SEND_CLOSED_CAPTIONS_CALL: 'send-closed-captions-call',\n  SEND_VIDEO: 'send-video',\n  START_BROADCAST_CALL: 'start-broadcast-call',\n  START_CLOSED_CAPTIONS_CALL: 'start-closed-captions-call',\n  START_FRAME_RECORD_CALL: 'start-frame-record-call',\n  START_RECORD_CALL: 'start-record-call',\n  START_TRANSCRIPTION_CALL: 'start-transcription-call',\n  STOP_BROADCAST_CALL: 'stop-broadcast-call',\n  STOP_CLOSED_CAPTIONS_CALL: 'stop-closed-captions-call',\n  STOP_FRAME_RECORD_CALL: 'stop-frame-record-call',\n  STOP_RECORD_CALL: 'stop-record-call',\n  STOP_TRANSCRIPTION_CALL: 'stop-transcription-call',\n  UPDATE_CALL: 'update-call',\n  UPDATE_CALL_MEMBER: 'update-call-member',\n  UPDATE_CALL_PERMISSIONS: 'update-call-permissions',\n  UPDATE_CALL_SETTINGS: 'update-call-settings',\n} as const;\nexport type OwnCapability = (typeof OwnCapability)[keyof typeof OwnCapability];\n\n/**\n *\n * @export\n * @interface OwnUserResponse\n */\nexport interface OwnUserResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof OwnUserResponse\n   */\n  avg_response_time?: number;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof OwnUserResponse\n   */\n  blocked_user_ids?: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  created_at: string;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof OwnUserResponse\n   */\n  custom: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  deactivated_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  deleted_at?: string;\n  /**\n   *\n   * @type {Array<DeviceResponse>}\n   * @memberof OwnUserResponse\n   */\n  devices: Array<DeviceResponse>;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  image?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  language: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  last_active?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  name?: string;\n  /**\n   *\n   * @type {object}\n   * @memberof OwnUserResponse\n   */\n  privacy_settings?: object;\n  /**\n   *\n   * @type {PushPreferences}\n   * @memberof OwnUserResponse\n   */\n  push_preferences?: PushPreferences;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  revoke_tokens_issued_before?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  role: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof OwnUserResponse\n   */\n  teams: Array<string>;\n  /**\n   *\n   * @type {{ [key: string]: string; }}\n   * @memberof OwnUserResponse\n   */\n  teams_role?: { [key: string]: string };\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  updated_at: string;\n}\n/**\n *\n * @export\n * @interface ParticipantCountByMinuteResponse\n */\nexport interface ParticipantCountByMinuteResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantCountByMinuteResponse\n   */\n  first: number;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantCountByMinuteResponse\n   */\n  last: number;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantCountByMinuteResponse\n   */\n  max: number;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantCountByMinuteResponse\n   */\n  min: number;\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantCountByMinuteResponse\n   */\n  start_ts: string;\n}\n/**\n *\n * @export\n * @interface ParticipantCountOverTimeResponse\n */\nexport interface ParticipantCountOverTimeResponse {\n  /**\n   *\n   * @type {Array<ParticipantCountByMinuteResponse>}\n   * @memberof ParticipantCountOverTimeResponse\n   */\n  by_minute?: Array<ParticipantCountByMinuteResponse>;\n}\n/**\n *\n * @export\n * @interface ParticipantReportResponse\n */\nexport interface ParticipantReportResponse {\n  /**\n   *\n   * @type {Array<GroupedStatsResponse>}\n   * @memberof ParticipantReportResponse\n   */\n  by_browser?: Array<GroupedStatsResponse>;\n  /**\n   *\n   * @type {Array<GroupedStatsResponse>}\n   * @memberof ParticipantReportResponse\n   */\n  by_country?: Array<GroupedStatsResponse>;\n  /**\n   *\n   * @type {Array<GroupedStatsResponse>}\n   * @memberof ParticipantReportResponse\n   */\n  by_device?: Array<GroupedStatsResponse>;\n  /**\n   *\n   * @type {Array<GroupedStatsResponse>}\n   * @memberof ParticipantReportResponse\n   */\n  by_operating_system?: Array<GroupedStatsResponse>;\n  /**\n   *\n   * @type {ParticipantCountOverTimeResponse}\n   * @memberof ParticipantReportResponse\n   */\n  count_over_time?: ParticipantCountOverTimeResponse;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantReportResponse\n   */\n  max_concurrent?: number;\n  /**\n   *\n   * @type {PublisherStatsResponse}\n   * @memberof ParticipantReportResponse\n   */\n  publishers?: PublisherStatsResponse;\n  /**\n   *\n   * @type {SubscriberStatsResponse}\n   * @memberof ParticipantReportResponse\n   */\n  subscribers?: SubscriberStatsResponse;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantReportResponse\n   */\n  sum: number;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantReportResponse\n   */\n  unique: number;\n}\n/**\n *\n * @export\n * @interface ParticipantSeriesPublisherStats\n */\nexport interface ParticipantSeriesPublisherStats {\n  /**\n   *\n   * @type {{ [key: string]: Array<Array<number>>; }}\n   * @memberof ParticipantSeriesPublisherStats\n   */\n  global?: { [key: string]: Array<Array<number>> };\n  /**\n   *\n   * @type {{ [key: string]: MetricDescriptor; }}\n   * @memberof ParticipantSeriesPublisherStats\n   */\n  global_meta?: { [key: string]: MetricDescriptor };\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof ParticipantSeriesPublisherStats\n   */\n  global_metrics_order?: Array<string>;\n  /**\n   *\n   * @type {{ [key: string]: Array<MetricThreshold>; }}\n   * @memberof ParticipantSeriesPublisherStats\n   */\n  global_thresholds?: { [key: string]: Array<MetricThreshold> };\n  /**\n   *\n   * @type {{ [key: string]: Array<ParticipantSeriesTrackMetrics>; }}\n   * @memberof ParticipantSeriesPublisherStats\n   */\n  tracks?: { [key: string]: Array<ParticipantSeriesTrackMetrics> };\n}\n/**\n *\n * @export\n * @interface ParticipantSeriesSubscriberStats\n */\nexport interface ParticipantSeriesSubscriberStats {\n  /**\n   *\n   * @type {{ [key: string]: Array<Array<number>>; }}\n   * @memberof ParticipantSeriesSubscriberStats\n   */\n  global?: { [key: string]: Array<Array<number>> };\n  /**\n   *\n   * @type {{ [key: string]: MetricDescriptor; }}\n   * @memberof ParticipantSeriesSubscriberStats\n   */\n  global_meta?: { [key: string]: MetricDescriptor };\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof ParticipantSeriesSubscriberStats\n   */\n  global_metrics_order?: Array<string>;\n  /**\n   *\n   * @type {{ [key: string]: Array<MetricThreshold>; }}\n   * @memberof ParticipantSeriesSubscriberStats\n   */\n  global_thresholds?: { [key: string]: Array<MetricThreshold> };\n  /**\n   *\n   * @type {Array<ParticipantSeriesSubscriptionTrackMetrics>}\n   * @memberof ParticipantSeriesSubscriberStats\n   */\n  subscriptions?: Array<ParticipantSeriesSubscriptionTrackMetrics>;\n}\n/**\n *\n * @export\n * @interface ParticipantSeriesSubscriptionTrackMetrics\n */\nexport interface ParticipantSeriesSubscriptionTrackMetrics {\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesSubscriptionTrackMetrics\n   */\n  publisher_name?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesSubscriptionTrackMetrics\n   */\n  publisher_user_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesSubscriptionTrackMetrics\n   */\n  publisher_user_session_id?: string;\n  /**\n   *\n   * @type {{ [key: string]: Array<ParticipantSeriesTrackMetrics>; }}\n   * @memberof ParticipantSeriesSubscriptionTrackMetrics\n   */\n  tracks?: { [key: string]: Array<ParticipantSeriesTrackMetrics> };\n}\n/**\n *\n * @export\n * @interface ParticipantSeriesTimeframe\n */\nexport interface ParticipantSeriesTimeframe {\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantSeriesTimeframe\n   */\n  max_points: number;\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesTimeframe\n   */\n  since: string;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantSeriesTimeframe\n   */\n  step_seconds: number;\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesTimeframe\n   */\n  until: string;\n}\n/**\n *\n * @export\n * @interface ParticipantSeriesTrackMetrics\n */\nexport interface ParticipantSeriesTrackMetrics {\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesTrackMetrics\n   */\n  codec?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesTrackMetrics\n   */\n  label?: string;\n  /**\n   *\n   * @type {{ [key: string]: Array<Array<number>>; }}\n   * @memberof ParticipantSeriesTrackMetrics\n   */\n  metrics?: { [key: string]: Array<Array<number>> };\n  /**\n   *\n   * @type {{ [key: string]: MetricDescriptor; }}\n   * @memberof ParticipantSeriesTrackMetrics\n   */\n  metrics_meta?: { [key: string]: MetricDescriptor };\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof ParticipantSeriesTrackMetrics\n   */\n  metrics_order?: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesTrackMetrics\n   */\n  rid?: string;\n  /**\n   *\n   * @type {{ [key: string]: Array<MetricThreshold>; }}\n   * @memberof ParticipantSeriesTrackMetrics\n   */\n  thresholds?: { [key: string]: Array<MetricThreshold> };\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesTrackMetrics\n   */\n  track_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantSeriesTrackMetrics\n   */\n  track_type?: string;\n}\n/**\n *\n * @export\n * @interface ParticipantSeriesUserStats\n */\nexport interface ParticipantSeriesUserStats {\n  /**\n   *\n   * @type {{ [key: string]: Array<Array<number>>; }}\n   * @memberof ParticipantSeriesUserStats\n   */\n  metrics?: { [key: string]: Array<Array<number>> };\n  /**\n   *\n   * @type {{ [key: string]: MetricDescriptor; }}\n   * @memberof ParticipantSeriesUserStats\n   */\n  metrics_meta?: { [key: string]: MetricDescriptor };\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof ParticipantSeriesUserStats\n   */\n  metrics_order?: Array<string>;\n  /**\n   *\n   * @type {{ [key: string]: Array<MetricThreshold>; }}\n   * @memberof ParticipantSeriesUserStats\n   */\n  thresholds?: { [key: string]: Array<MetricThreshold> };\n}\n/**\n *\n * @export\n * @interface PerSDKUsageReport\n */\nexport interface PerSDKUsageReport {\n  /**\n   *\n   * @type {{ [key: string]: number; }}\n   * @memberof PerSDKUsageReport\n   */\n  by_version: { [key: string]: number };\n  /**\n   *\n   * @type {number}\n   * @memberof PerSDKUsageReport\n   */\n  total: number;\n}\n/**\n * This event is sent when a user requests access to a feature on a call,\n * clients receiving this event should display a permission request to the user\n * @export\n * @interface PermissionRequestEvent\n */\nexport interface PermissionRequestEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof PermissionRequestEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof PermissionRequestEvent\n   */\n  created_at: string;\n  /**\n   * The list of permissions requested by the user\n   * @type {Array<string>}\n   * @memberof PermissionRequestEvent\n   */\n  permissions: Array<string>;\n  /**\n   * The type of event: \"call.permission_request\" in this case\n   * @type {string}\n   * @memberof PermissionRequestEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof PermissionRequestEvent\n   */\n  user: UserResponse;\n}\n/**\n * PinRequest is the payload for pinning a message.\n * @export\n * @interface PinRequest\n */\nexport interface PinRequest {\n  /**\n   * the session ID of the user who pinned the message\n   * @type {string}\n   * @memberof PinRequest\n   */\n  session_id: string;\n  /**\n   * the user ID of the user who pinned the message\n   * @type {string}\n   * @memberof PinRequest\n   */\n  user_id: string;\n}\n/**\n * Basic response information\n * @export\n * @interface PinResponse\n */\nexport interface PinResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof PinResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface PublishedTrackFlags\n */\nexport interface PublishedTrackFlags {\n  /**\n   *\n   * @type {boolean}\n   * @memberof PublishedTrackFlags\n   */\n  audio: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof PublishedTrackFlags\n   */\n  screenshare: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof PublishedTrackFlags\n   */\n  screenshare_audio: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof PublishedTrackFlags\n   */\n  video: boolean;\n}\n/**\n *\n * @export\n * @interface PublisherStatsResponse\n */\nexport interface PublisherStatsResponse {\n  /**\n   *\n   * @type {Array<TrackStatsResponse>}\n   * @memberof PublisherStatsResponse\n   */\n  by_track?: Array<TrackStatsResponse>;\n  /**\n   *\n   * @type {number}\n   * @memberof PublisherStatsResponse\n   */\n  total: number;\n  /**\n   *\n   * @type {number}\n   * @memberof PublisherStatsResponse\n   */\n  unique: number;\n}\n/**\n *\n * @export\n * @interface PushPreferences\n */\nexport interface PushPreferences {\n  /**\n   *\n   * @type {string}\n   * @memberof PushPreferences\n   */\n  call_level?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof PushPreferences\n   */\n  chat_level?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof PushPreferences\n   */\n  disabled_until?: string;\n}\n/**\n *\n * @export\n * @interface QualityScoreReport\n */\nexport interface QualityScoreReport {\n  /**\n   *\n   * @type {Array<ReportByHistogramBucket>}\n   * @memberof QualityScoreReport\n   */\n  histogram: Array<ReportByHistogramBucket>;\n}\n/**\n *\n * @export\n * @interface QualityScoreReportResponse\n */\nexport interface QualityScoreReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateQualityScoreReportResponse>}\n   * @memberof QualityScoreReportResponse\n   */\n  daily: Array<DailyAggregateQualityScoreReportResponse>;\n}\n/**\n *\n * @export\n * @interface QueryAggregateCallStatsRequest\n */\nexport interface QueryAggregateCallStatsRequest {\n  /**\n   *\n   * @type {string}\n   * @memberof QueryAggregateCallStatsRequest\n   */\n  from?: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof QueryAggregateCallStatsRequest\n   */\n  report_types?: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryAggregateCallStatsRequest\n   */\n  to?: string;\n}\n/**\n * Basic response information\n * @export\n * @interface QueryAggregateCallStatsResponse\n */\nexport interface QueryAggregateCallStatsResponse {\n  /**\n   *\n   * @type {CallDurationReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  call_duration_report?: CallDurationReportResponse;\n  /**\n   *\n   * @type {CallParticipantCountReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  call_participant_count_report?: CallParticipantCountReportResponse;\n  /**\n   *\n   * @type {CallsPerDayReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  calls_per_day_report?: CallsPerDayReportResponse;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {NetworkMetricsReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  network_metrics_report?: NetworkMetricsReportResponse;\n  /**\n   *\n   * @type {QualityScoreReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  quality_score_report?: QualityScoreReportResponse;\n  /**\n   *\n   * @type {SDKUsageReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  sdk_usage_report?: SDKUsageReportResponse;\n  /**\n   *\n   * @type {UserFeedbackReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  user_feedback_report?: UserFeedbackReportResponse;\n}\n/**\n *\n * @export\n * @interface QueryCallMembersRequest\n */\nexport interface QueryCallMembersRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof QueryCallMembersRequest\n   */\n  filter_conditions?: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersRequest\n   */\n  id: string;\n  /**\n   *\n   * @type {number}\n   * @memberof QueryCallMembersRequest\n   */\n  limit?: number;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersRequest\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersRequest\n   */\n  prev?: string;\n  /**\n   *\n   * @type {Array<SortParamRequest>}\n   * @memberof QueryCallMembersRequest\n   */\n  sort?: Array<SortParamRequest>;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersRequest\n   */\n  type: string;\n}\n/**\n * Basic response information\n * @export\n * @interface QueryCallMembersResponse\n */\nexport interface QueryCallMembersResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof QueryCallMembersResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof QueryCallMembersResponse\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersResponse\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersResponse\n   */\n  prev?: string;\n}\n/**\n *\n * @export\n * @interface QueryCallParticipantsRequest\n */\nexport interface QueryCallParticipantsRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof QueryCallParticipantsRequest\n   */\n  filter_conditions?: { [key: string]: any };\n}\n/**\n *\n * @export\n * @interface QueryCallParticipantsResponse\n */\nexport interface QueryCallParticipantsResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof QueryCallParticipantsResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallParticipantsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof QueryCallParticipantsResponse\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {MemberResponse}\n   * @memberof QueryCallParticipantsResponse\n   */\n  membership?: MemberResponse;\n  /**\n   *\n   * @type {Array<OwnCapability>}\n   * @memberof QueryCallParticipantsResponse\n   */\n  own_capabilities: Array<OwnCapability>;\n  /**\n   * List of call participants\n   * @type {Array<CallParticipantResponse>}\n   * @memberof QueryCallParticipantsResponse\n   */\n  participants: Array<CallParticipantResponse>;\n  /**\n   *\n   * @type {number}\n   * @memberof QueryCallParticipantsResponse\n   */\n  total_participants: number;\n}\n/**\n * Basic response information\n * @export\n * @interface QueryCallSessionParticipantStatsResponse\n */\nexport interface QueryCallSessionParticipantStatsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  call_ended_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  call_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  call_session_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  call_started_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  call_type: string;\n  /**\n   *\n   * @type {CallStatsParticipantCounts}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  counts: CallStatsParticipantCounts;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  next?: string;\n  /**\n   *\n   * @type {Array<CallStatsParticipant>}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  participants: Array<CallStatsParticipant>;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  prev?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsResponse\n   */\n  tmp_data_source?: string;\n}\n/**\n * Basic response information\n * @export\n * @interface QueryCallSessionParticipantStatsTimelineResponse\n */\nexport interface QueryCallSessionParticipantStatsTimelineResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsTimelineResponse\n   */\n  call_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsTimelineResponse\n   */\n  call_session_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsTimelineResponse\n   */\n  call_type: string;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsTimelineResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<CallParticipantTimeline>}\n   * @memberof QueryCallSessionParticipantStatsTimelineResponse\n   */\n  events: Array<CallParticipantTimeline>;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsTimelineResponse\n   */\n  user_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallSessionParticipantStatsTimelineResponse\n   */\n  user_session_id: string;\n}\n/**\n *\n * @export\n * @interface QueryCallStatsRequest\n */\nexport interface QueryCallStatsRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof QueryCallStatsRequest\n   */\n  filter_conditions?: { [key: string]: any };\n  /**\n   *\n   * @type {number}\n   * @memberof QueryCallStatsRequest\n   */\n  limit?: number;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallStatsRequest\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallStatsRequest\n   */\n  prev?: string;\n  /**\n   *\n   * @type {Array<SortParamRequest>}\n   * @memberof QueryCallStatsRequest\n   */\n  sort?: Array<SortParamRequest>;\n}\n/**\n * Basic response information\n * @export\n * @interface QueryCallStatsResponse\n */\nexport interface QueryCallStatsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof QueryCallStatsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallStatsResponse\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallStatsResponse\n   */\n  prev?: string;\n  /**\n   *\n   * @type {Array<CallStatsReportSummaryResponse>}\n   * @memberof QueryCallStatsResponse\n   */\n  reports: Array<CallStatsReportSummaryResponse>;\n}\n/**\n *\n * @export\n * @interface QueryCallsRequest\n */\nexport interface QueryCallsRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof QueryCallsRequest\n   */\n  filter_conditions?: { [key: string]: any };\n  /**\n   *\n   * @type {number}\n   * @memberof QueryCallsRequest\n   */\n  limit?: number;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallsRequest\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallsRequest\n   */\n  prev?: string;\n  /**\n   * Array of sort parameters\n   * @type {Array<SortParamRequest>}\n   * @memberof QueryCallsRequest\n   */\n  sort?: Array<SortParamRequest>;\n  /**\n   *\n   * @type {boolean}\n   * @memberof QueryCallsRequest\n   */\n  watch?: boolean;\n}\n/**\n *\n * @export\n * @interface QueryCallsResponse\n */\nexport interface QueryCallsResponse {\n  /**\n   *\n   * @type {Array<CallStateResponseFields>}\n   * @memberof QueryCallsResponse\n   */\n  calls: Array<CallStateResponseFields>;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof QueryCallsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallsResponse\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallsResponse\n   */\n  prev?: string;\n}\n/**\n * RTMPBroadcastRequest is the payload for starting an RTMP broadcast.\n * @export\n * @interface RTMPBroadcastRequest\n */\nexport interface RTMPBroadcastRequest {\n  /**\n   *\n   * @type {LayoutSettingsRequest}\n   * @memberof RTMPBroadcastRequest\n   */\n  layout?: LayoutSettingsRequest;\n  /**\n   * Name identifier for RTMP broadcast, must be unique in call\n   * @type {string}\n   * @memberof RTMPBroadcastRequest\n   */\n  name: string;\n  /**\n   * If provided, will override the call's RTMP settings quality\n   * @type {string}\n   * @memberof RTMPBroadcastRequest\n   */\n  quality?: RTMPBroadcastRequestQualityEnum;\n  /**\n   * If provided, will be appended at the end of stream_url\n   * @type {string}\n   * @memberof RTMPBroadcastRequest\n   */\n  stream_key?: string;\n  /**\n   * URL for the RTMP server to send the call to\n   * @type {string}\n   * @memberof RTMPBroadcastRequest\n   */\n  stream_url: string;\n}\n\n/**\n * @export\n */\nexport const RTMPBroadcastRequestQualityEnum = {\n  _360P: '360p',\n  _480P: '480p',\n  _720P: '720p',\n  _1080P: '1080p',\n  _1440P: '1440p',\n  PORTRAIT_360X640: 'portrait-360x640',\n  PORTRAIT_480X854: 'portrait-480x854',\n  PORTRAIT_720X1280: 'portrait-720x1280',\n  PORTRAIT_1080X1920: 'portrait-1080x1920',\n  PORTRAIT_1440X2560: 'portrait-1440x2560',\n} as const;\nexport type RTMPBroadcastRequestQualityEnum =\n  (typeof RTMPBroadcastRequestQualityEnum)[keyof typeof RTMPBroadcastRequestQualityEnum];\n\n/**\n * RTMP input settings\n * @export\n * @interface RTMPIngress\n */\nexport interface RTMPIngress {\n  /**\n   *\n   * @type {string}\n   * @memberof RTMPIngress\n   */\n  address: string;\n}\n/**\n *\n * @export\n * @interface RTMPSettingsRequest\n */\nexport interface RTMPSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof RTMPSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   * Resolution to set for the RTMP stream\n   * @type {string}\n   * @memberof RTMPSettingsRequest\n   */\n  quality?: RTMPSettingsRequestQualityEnum;\n}\n\n/**\n * @export\n */\nexport const RTMPSettingsRequestQualityEnum = {\n  _360P: '360p',\n  _480P: '480p',\n  _720P: '720p',\n  _1080P: '1080p',\n  _1440P: '1440p',\n  PORTRAIT_360X640: 'portrait-360x640',\n  PORTRAIT_480X854: 'portrait-480x854',\n  PORTRAIT_720X1280: 'portrait-720x1280',\n  PORTRAIT_1080X1920: 'portrait-1080x1920',\n  PORTRAIT_1440X2560: 'portrait-1440x2560',\n} as const;\nexport type RTMPSettingsRequestQualityEnum =\n  (typeof RTMPSettingsRequestQualityEnum)[keyof typeof RTMPSettingsRequestQualityEnum];\n\n/**\n * RTMPSettingsResponse is the payload for RTMP settings\n * @export\n * @interface RTMPSettingsResponse\n */\nexport interface RTMPSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof RTMPSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof RTMPSettingsResponse\n   */\n  quality: string;\n}\n/**\n *\n * @export\n * @interface ReactionResponse\n */\nexport interface ReactionResponse {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof ReactionResponse\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof ReactionResponse\n   */\n  emoji_code?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ReactionResponse\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof ReactionResponse\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface RecordSettingsRequest\n */\nexport interface RecordSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof RecordSettingsRequest\n   */\n  audio_only?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof RecordSettingsRequest\n   */\n  mode: RecordSettingsRequestModeEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof RecordSettingsRequest\n   */\n  quality?: RecordSettingsRequestQualityEnum;\n}\n\n/**\n * @export\n */\nexport const RecordSettingsRequestModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type RecordSettingsRequestModeEnum =\n  (typeof RecordSettingsRequestModeEnum)[keyof typeof RecordSettingsRequestModeEnum];\n\n/**\n * @export\n */\nexport const RecordSettingsRequestQualityEnum = {\n  _360P: '360p',\n  _480P: '480p',\n  _720P: '720p',\n  _1080P: '1080p',\n  _1440P: '1440p',\n  PORTRAIT_360X640: 'portrait-360x640',\n  PORTRAIT_480X854: 'portrait-480x854',\n  PORTRAIT_720X1280: 'portrait-720x1280',\n  PORTRAIT_1080X1920: 'portrait-1080x1920',\n  PORTRAIT_1440X2560: 'portrait-1440x2560',\n} as const;\nexport type RecordSettingsRequestQualityEnum =\n  (typeof RecordSettingsRequestQualityEnum)[keyof typeof RecordSettingsRequestQualityEnum];\n\n/**\n * RecordSettings is the payload for recording settings\n * @export\n * @interface RecordSettingsResponse\n */\nexport interface RecordSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof RecordSettingsResponse\n   */\n  audio_only: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof RecordSettingsResponse\n   */\n  mode: string;\n  /**\n   *\n   * @type {string}\n   * @memberof RecordSettingsResponse\n   */\n  quality: string;\n}\n/**\n *\n * @export\n * @interface RejectCallRequest\n */\nexport interface RejectCallRequest {\n  /**\n   * Reason for rejecting the call\n   * @type {string}\n   * @memberof RejectCallRequest\n   */\n  reason?: string;\n}\n/**\n *\n * @export\n * @interface RejectCallResponse\n */\nexport interface RejectCallResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof RejectCallResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface ReportByHistogramBucket\n */\nexport interface ReportByHistogramBucket {\n  /**\n   *\n   * @type {string}\n   * @memberof ReportByHistogramBucket\n   */\n  category: string;\n  /**\n   *\n   * @type {number}\n   * @memberof ReportByHistogramBucket\n   */\n  count: number;\n  /**\n   *\n   * @type {Bound}\n   * @memberof ReportByHistogramBucket\n   */\n  lower_bound?: Bound;\n  /**\n   *\n   * @type {number}\n   * @memberof ReportByHistogramBucket\n   */\n  sum: number;\n  /**\n   *\n   * @type {Bound}\n   * @memberof ReportByHistogramBucket\n   */\n  upper_bound?: Bound;\n}\n/**\n *\n * @export\n * @interface ReportResponse\n */\nexport interface ReportResponse {\n  /**\n   *\n   * @type {CallReportResponse}\n   * @memberof ReportResponse\n   */\n  call: CallReportResponse;\n  /**\n   *\n   * @type {ParticipantReportResponse}\n   * @memberof ReportResponse\n   */\n  participants: ParticipantReportResponse;\n  /**\n   *\n   * @type {UserRatingReportResponse}\n   * @memberof ReportResponse\n   */\n  user_ratings: UserRatingReportResponse;\n}\n/**\n *\n * @export\n * @interface RequestPermissionRequest\n */\nexport interface RequestPermissionRequest {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof RequestPermissionRequest\n   */\n  permissions: Array<string>;\n}\n/**\n *\n * @export\n * @interface RequestPermissionResponse\n */\nexport interface RequestPermissionResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof RequestPermissionResponse\n   */\n  duration: string;\n}\n/**\n * Request to resolve SIP inbound routing using challenge authentication\n * @export\n * @interface ResolveSipInboundRequest\n */\nexport interface ResolveSipInboundRequest {\n  /**\n   *\n   * @type {SIPChallenge}\n   * @memberof ResolveSipInboundRequest\n   */\n  challenge: SIPChallenge;\n  /**\n   * SIP caller number\n   * @type {string}\n   * @memberof ResolveSipInboundRequest\n   */\n  sip_caller_number: string;\n  /**\n   * Optional SIP headers as key-value pairs\n   * @type {{ [key: string]: string; }}\n   * @memberof ResolveSipInboundRequest\n   */\n  sip_headers?: { [key: string]: string };\n  /**\n   * SIP trunk number to resolve\n   * @type {string}\n   * @memberof ResolveSipInboundRequest\n   */\n  sip_trunk_number: string;\n}\n/**\n * Response containing resolved SIP inbound routing information\n * @export\n * @interface ResolveSipInboundResponse\n */\nexport interface ResolveSipInboundResponse {\n  /**\n   *\n   * @type {SipInboundCredentials}\n   * @memberof ResolveSipInboundResponse\n   */\n  credentials: SipInboundCredentials;\n  /**\n   *\n   * @type {string}\n   * @memberof ResolveSipInboundResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {SIPInboundRoutingRuleResponse}\n   * @memberof ResolveSipInboundResponse\n   */\n  sip_routing_rule?: SIPInboundRoutingRuleResponse;\n  /**\n   *\n   * @type {SIPTrunkResponse}\n   * @memberof ResolveSipInboundResponse\n   */\n  sip_trunk?: SIPTrunkResponse;\n}\n/**\n * Basic response information\n * @export\n * @interface Response\n */\nexport interface Response {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof Response\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface RingCallRequest\n */\nexport interface RingCallRequest {\n  /**\n   * Members that should receive the ring. If no ids are provided, all call members who are not already in the call will receive ring notifications.\n   * @type {Array<string>}\n   * @memberof RingCallRequest\n   */\n  members_ids?: Array<string>;\n  /**\n   * Indicate if call should be video\n   * @type {boolean}\n   * @memberof RingCallRequest\n   */\n  video?: boolean;\n}\n/**\n *\n * @export\n * @interface RingCallResponse\n */\nexport interface RingCallResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof RingCallResponse\n   */\n  duration: string;\n  /**\n   * List of members ringing notification was sent to\n   * @type {Array<string>}\n   * @memberof RingCallResponse\n   */\n  members_ids: Array<string>;\n}\n/**\n *\n * @export\n * @interface RingSettingsRequest\n */\nexport interface RingSettingsRequest {\n  /**\n   * When none of the callees accept a ring call in this time a rejection will be sent by the caller with reason 'timeout' by the SDKs\n   * @type {number}\n   * @memberof RingSettingsRequest\n   */\n  auto_cancel_timeout_ms: number;\n  /**\n   * When a callee is online but doesn't answer a ring call in this time a rejection will be sent with reason 'timeout' by the SDKs\n   * @type {number}\n   * @memberof RingSettingsRequest\n   */\n  incoming_call_timeout_ms: number;\n  /**\n   * When a callee doesn't accept or reject a ring call in this time a missed call event will be sent\n   * @type {number}\n   * @memberof RingSettingsRequest\n   */\n  missed_call_timeout_ms?: number;\n}\n/**\n *\n * @export\n * @interface RingSettingsResponse\n */\nexport interface RingSettingsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof RingSettingsResponse\n   */\n  auto_cancel_timeout_ms: number;\n  /**\n   *\n   * @type {number}\n   * @memberof RingSettingsResponse\n   */\n  incoming_call_timeout_ms: number;\n  /**\n   *\n   * @type {number}\n   * @memberof RingSettingsResponse\n   */\n  missed_call_timeout_ms: number;\n}\n/**\n *\n * @export\n * @interface SDKUsageReport\n */\nexport interface SDKUsageReport {\n  /**\n   *\n   * @type {{ [key: string]: PerSDKUsageReport; }}\n   * @memberof SDKUsageReport\n   */\n  per_sdk_usage: { [key: string]: PerSDKUsageReport };\n}\n/**\n *\n * @export\n * @interface SDKUsageReportResponse\n */\nexport interface SDKUsageReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateSDKUsageReportResponse>}\n   * @memberof SDKUsageReportResponse\n   */\n  daily: Array<DailyAggregateSDKUsageReportResponse>;\n}\n/**\n *\n * @export\n * @interface SFUResponse\n */\nexport interface SFUResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof SFUResponse\n   */\n  edge_name: string;\n  /**\n   *\n   * @type {string}\n   * @memberof SFUResponse\n   */\n  url: string;\n  /**\n   *\n   * @type {string}\n   * @memberof SFUResponse\n   */\n  ws_endpoint: string;\n}\n/**\n * SIP call configuration response\n * @export\n * @interface SIPCallConfigsResponse\n */\nexport interface SIPCallConfigsResponse {\n  /**\n   * Custom data associated with the call\n   * @type {{ [key: string]: any; }}\n   * @memberof SIPCallConfigsResponse\n   */\n  custom_data: { [key: string]: any };\n}\n/**\n * SIP caller configuration response\n * @export\n * @interface SIPCallerConfigsResponse\n */\nexport interface SIPCallerConfigsResponse {\n  /**\n   * Custom data associated with the caller\n   * @type {{ [key: string]: any; }}\n   * @memberof SIPCallerConfigsResponse\n   */\n  custom_data: { [key: string]: any };\n  /**\n   * Unique identifier for the caller\n   * @type {string}\n   * @memberof SIPCallerConfigsResponse\n   */\n  id: string;\n}\n/**\n *\n * @export\n * @interface SIPChallenge\n */\nexport interface SIPChallenge {\n  /**\n   *\n   * @type {string}\n   * @memberof SIPChallenge\n   */\n  a1?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof SIPChallenge\n   */\n  algorithm?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof SIPChallenge\n   */\n  charset?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof SIPChallenge\n   */\n  cnonce?: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof SIPChallenge\n   */\n  domain?: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof SIPChallenge\n   */\n  method?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof SIPChallenge\n   */\n  nc?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof SIPChallenge\n   */\n  nonce?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof SIPChallenge\n   */\n  opaque?: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof SIPChallenge\n   */\n  qop?: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof SIPChallenge\n   */\n  realm?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof SIPChallenge\n   */\n  response?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof SIPChallenge\n   */\n  stale?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof SIPChallenge\n   */\n  uri?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof SIPChallenge\n   */\n  userhash?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof SIPChallenge\n   */\n  username?: string;\n}\n/**\n * Direct routing rule call configuration response\n * @export\n * @interface SIPDirectRoutingRuleCallConfigsResponse\n */\nexport interface SIPDirectRoutingRuleCallConfigsResponse {\n  /**\n   * ID of the call\n   * @type {string}\n   * @memberof SIPDirectRoutingRuleCallConfigsResponse\n   */\n  call_id: string;\n  /**\n   * Type of the call\n   * @type {string}\n   * @memberof SIPDirectRoutingRuleCallConfigsResponse\n   */\n  call_type: string;\n}\n/**\n * PIN routing rule call configuration response\n * @export\n * @interface SIPInboundRoutingRulePinConfigsResponse\n */\nexport interface SIPInboundRoutingRulePinConfigsResponse {\n  /**\n   * Optional webhook URL for custom PIN handling\n   * @type {string}\n   * @memberof SIPInboundRoutingRulePinConfigsResponse\n   */\n  custom_webhook_url?: string;\n  /**\n   * Prompt message for failed PIN attempts\n   * @type {string}\n   * @memberof SIPInboundRoutingRulePinConfigsResponse\n   */\n  pin_failed_attempt_prompt?: string;\n  /**\n   * Prompt message for hangup after PIN input\n   * @type {string}\n   * @memberof SIPInboundRoutingRulePinConfigsResponse\n   */\n  pin_hangup_prompt?: string;\n  /**\n   * Prompt message for PIN input\n   * @type {string}\n   * @memberof SIPInboundRoutingRulePinConfigsResponse\n   */\n  pin_prompt?: string;\n  /**\n   * Prompt message for successful PIN input\n   * @type {string}\n   * @memberof SIPInboundRoutingRulePinConfigsResponse\n   */\n  pin_success_prompt?: string;\n}\n/**\n * SIP Inbound Routing Rule response\n * @export\n * @interface SIPInboundRoutingRuleResponse\n */\nexport interface SIPInboundRoutingRuleResponse {\n  /**\n   *\n   * @type {SIPCallConfigsResponse}\n   * @memberof SIPInboundRoutingRuleResponse\n   */\n  call_configs?: SIPCallConfigsResponse;\n  /**\n   * List of called numbers\n   * @type {Array<string>}\n   * @memberof SIPInboundRoutingRuleResponse\n   */\n  called_numbers: Array<string>;\n  /**\n   *\n   * @type {SIPCallerConfigsResponse}\n   * @memberof SIPInboundRoutingRuleResponse\n   */\n  caller_configs?: SIPCallerConfigsResponse;\n  /**\n   * List of caller numbers\n   * @type {Array<string>}\n   * @memberof SIPInboundRoutingRuleResponse\n   */\n  caller_numbers?: Array<string>;\n  /**\n   *\n   * @type {SIPDirectRoutingRuleCallConfigsResponse}\n   * @memberof SIPInboundRoutingRuleResponse\n   */\n  direct_routing_configs?: SIPDirectRoutingRuleCallConfigsResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof SIPInboundRoutingRuleResponse\n   */\n  duration: string;\n  /**\n   * Unique identifier of the SIP Inbound Routing Rule\n   * @type {string}\n   * @memberof SIPInboundRoutingRuleResponse\n   */\n  id: string;\n  /**\n   * Name of the SIP Inbound Routing Rule\n   * @type {string}\n   * @memberof SIPInboundRoutingRuleResponse\n   */\n  name: string;\n  /**\n   *\n   * @type {SIPPinProtectionConfigsResponse}\n   * @memberof SIPInboundRoutingRuleResponse\n   */\n  pin_protection_configs?: SIPPinProtectionConfigsResponse;\n  /**\n   *\n   * @type {SIPInboundRoutingRulePinConfigsResponse}\n   * @memberof SIPInboundRoutingRuleResponse\n   */\n  pin_routing_configs?: SIPInboundRoutingRulePinConfigsResponse;\n  /**\n   * List of SIP trunk IDs\n   * @type {Array<string>}\n   * @memberof SIPInboundRoutingRuleResponse\n   */\n  trunk_ids: Array<string>;\n  /**\n   *\n   * @type {object}\n   * @memberof SIPInboundRoutingRuleResponse\n   */\n  updated_at: object;\n}\n/**\n * PIN protection configuration response\n * @export\n * @interface SIPPinProtectionConfigsResponse\n */\nexport interface SIPPinProtectionConfigsResponse {\n  /**\n   * Default PIN to use if there is no PIN set on the call object\n   * @type {string}\n   * @memberof SIPPinProtectionConfigsResponse\n   */\n  default_pin?: string;\n  /**\n   * Whether PIN protection is enabled\n   * @type {boolean}\n   * @memberof SIPPinProtectionConfigsResponse\n   */\n  enabled: boolean;\n  /**\n   * Maximum number of PIN attempts allowed\n   * @type {number}\n   * @memberof SIPPinProtectionConfigsResponse\n   */\n  max_attempts?: number;\n  /**\n   * Number of digits required for the PIN\n   * @type {number}\n   * @memberof SIPPinProtectionConfigsResponse\n   */\n  required_pin_digits?: number;\n}\n/**\n * SIP trunk information\n * @export\n * @interface SIPTrunkResponse\n */\nexport interface SIPTrunkResponse {\n  /**\n   *\n   * @type {object}\n   * @memberof SIPTrunkResponse\n   */\n  created_at: object;\n  /**\n   * Unique identifier for the SIP trunk\n   * @type {string}\n   * @memberof SIPTrunkResponse\n   */\n  id: string;\n  /**\n   * Name of the SIP trunk\n   * @type {string}\n   * @memberof SIPTrunkResponse\n   */\n  name: string;\n  /**\n   * Phone numbers associated with this SIP trunk\n   * @type {Array<string>}\n   * @memberof SIPTrunkResponse\n   */\n  numbers: Array<string>;\n  /**\n   * Password for SIP trunk authentication\n   * @type {string}\n   * @memberof SIPTrunkResponse\n   */\n  password: string;\n  /**\n   *\n   * @type {object}\n   * @memberof SIPTrunkResponse\n   */\n  updated_at: object;\n  /**\n   * The URI for the SIP trunk\n   * @type {string}\n   * @memberof SIPTrunkResponse\n   */\n  uri: string;\n  /**\n   * Username for SIP trunk authentication\n   * @type {string}\n   * @memberof SIPTrunkResponse\n   */\n  username: string;\n}\n/**\n *\n * @export\n * @interface SRTIngress\n */\nexport interface SRTIngress {\n  /**\n   *\n   * @type {string}\n   * @memberof SRTIngress\n   */\n  address: string;\n}\n/**\n *\n * @export\n * @interface ScreensharingSettingsRequest\n */\nexport interface ScreensharingSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof ScreensharingSettingsRequest\n   */\n  access_request_enabled?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof ScreensharingSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {TargetResolution}\n   * @memberof ScreensharingSettingsRequest\n   */\n  target_resolution?: TargetResolution;\n}\n/**\n *\n * @export\n * @interface ScreensharingSettingsResponse\n */\nexport interface ScreensharingSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof ScreensharingSettingsResponse\n   */\n  access_request_enabled: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof ScreensharingSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {TargetResolution}\n   * @memberof ScreensharingSettingsResponse\n   */\n  target_resolution?: TargetResolution;\n}\n/**\n * Send a call event to the other user\n * @export\n * @interface SendCallEventRequest\n */\nexport interface SendCallEventRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof SendCallEventRequest\n   */\n  custom?: { [key: string]: any };\n}\n/**\n *\n * @export\n * @interface SendCallEventResponse\n */\nexport interface SendCallEventResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof SendCallEventResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface SendReactionRequest\n */\nexport interface SendReactionRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof SendReactionRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof SendReactionRequest\n   */\n  emoji_code?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof SendReactionRequest\n   */\n  type: string;\n}\n/**\n * Basic response information\n * @export\n * @interface SendReactionResponse\n */\nexport interface SendReactionResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof SendReactionResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {ReactionResponse}\n   * @memberof SendReactionResponse\n   */\n  reaction: ReactionResponse;\n}\n/**\n *\n * @export\n * @interface SessionSettingsRequest\n */\nexport interface SessionSettingsRequest {\n  /**\n   *\n   * @type {number}\n   * @memberof SessionSettingsRequest\n   */\n  inactivity_timeout_seconds: number;\n}\n/**\n *\n * @export\n * @interface SessionSettingsResponse\n */\nexport interface SessionSettingsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof SessionSettingsResponse\n   */\n  inactivity_timeout_seconds: number;\n}\n/**\n * Credentials for SIP inbound call authentication\n * @export\n * @interface SipInboundCredentials\n */\nexport interface SipInboundCredentials {\n  /**\n   * Custom data associated with the call\n   * @type {{ [key: string]: any; }}\n   * @memberof SipInboundCredentials\n   */\n  call_custom_data: { [key: string]: any };\n  /**\n   * ID of the call\n   * @type {string}\n   * @memberof SipInboundCredentials\n   */\n  call_id: string;\n  /**\n   * Type of the call\n   * @type {string}\n   * @memberof SipInboundCredentials\n   */\n  call_type: string;\n  /**\n   * Authentication token for the call\n   * @type {string}\n   * @memberof SipInboundCredentials\n   */\n  token: string;\n  /**\n   * Custom data associated with the user\n   * @type {{ [key: string]: any; }}\n   * @memberof SipInboundCredentials\n   */\n  user_custom_data: { [key: string]: any };\n  /**\n   * User ID for the call\n   * @type {string}\n   * @memberof SipInboundCredentials\n   */\n  user_id: string;\n}\n/**\n *\n * @export\n * @interface SortParamRequest\n */\nexport interface SortParamRequest {\n  /**\n   * Direction of sorting, 1 for Ascending, -1 for Descending, default is 1\n   * @type {number}\n   * @memberof SortParamRequest\n   */\n  direction?: number;\n  /**\n   * Name of field to sort by\n   * @type {string}\n   * @memberof SortParamRequest\n   */\n  field?: string;\n}\n/**\n *\n * @export\n * @interface SpeechSegmentConfig\n */\nexport interface SpeechSegmentConfig {\n  /**\n   *\n   * @type {number}\n   * @memberof SpeechSegmentConfig\n   */\n  max_speech_caption_ms?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof SpeechSegmentConfig\n   */\n  silence_duration_ms?: number;\n}\n/**\n *\n * @export\n * @interface StartClosedCaptionsRequest\n */\nexport interface StartClosedCaptionsRequest {\n  /**\n   * Enable transcriptions along with closed captions\n   * @type {boolean}\n   * @memberof StartClosedCaptionsRequest\n   */\n  enable_transcription?: boolean;\n  /**\n   * Which external storage to use for transcriptions (only applicable if enable_transcription is true)\n   * @type {string}\n   * @memberof StartClosedCaptionsRequest\n   */\n  external_storage?: string;\n  /**\n   * The spoken language in the call, if not provided the language defined in the transcription settings will be used\n   * @type {string}\n   * @memberof StartClosedCaptionsRequest\n   */\n  language?: StartClosedCaptionsRequestLanguageEnum;\n  /**\n   *\n   * @type {SpeechSegmentConfig}\n   * @memberof StartClosedCaptionsRequest\n   */\n  speech_segment_config?: SpeechSegmentConfig;\n}\n\n/**\n * @export\n */\nexport const StartClosedCaptionsRequestLanguageEnum = {\n  AUTO: 'auto',\n  EN: 'en',\n  FR: 'fr',\n  ES: 'es',\n  DE: 'de',\n  IT: 'it',\n  NL: 'nl',\n  PT: 'pt',\n  PL: 'pl',\n  CA: 'ca',\n  CS: 'cs',\n  DA: 'da',\n  EL: 'el',\n  FI: 'fi',\n  ID: 'id',\n  JA: 'ja',\n  RU: 'ru',\n  SV: 'sv',\n  TA: 'ta',\n  TH: 'th',\n  TR: 'tr',\n  HU: 'hu',\n  RO: 'ro',\n  ZH: 'zh',\n  AR: 'ar',\n  TL: 'tl',\n  HE: 'he',\n  HI: 'hi',\n  HR: 'hr',\n  KO: 'ko',\n  MS: 'ms',\n  NO: 'no',\n  UK: 'uk',\n  BG: 'bg',\n  ET: 'et',\n  SL: 'sl',\n  SK: 'sk',\n} as const;\nexport type StartClosedCaptionsRequestLanguageEnum =\n  (typeof StartClosedCaptionsRequestLanguageEnum)[keyof typeof StartClosedCaptionsRequestLanguageEnum];\n\n/**\n *\n * @export\n * @interface StartClosedCaptionsResponse\n */\nexport interface StartClosedCaptionsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof StartClosedCaptionsResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StartFrameRecordingRequest\n */\nexport interface StartFrameRecordingRequest {\n  /**\n   *\n   * @type {string}\n   * @memberof StartFrameRecordingRequest\n   */\n  recording_external_storage?: string;\n}\n/**\n * StartFrameRecordingResponse is the response payload for the start frame recording endpoint.\n * @export\n * @interface StartFrameRecordingResponse\n */\nexport interface StartFrameRecordingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StartFrameRecordingResponse\n   */\n  duration: string;\n}\n/**\n * StartHLSBroadcastingResponse is the payload for starting an HLS broadcasting.\n * @export\n * @interface StartHLSBroadcastingResponse\n */\nexport interface StartHLSBroadcastingResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof StartHLSBroadcastingResponse\n   */\n  duration: string;\n  /**\n   * the URL of the HLS playlist\n   * @type {string}\n   * @memberof StartHLSBroadcastingResponse\n   */\n  playlist_url: string;\n}\n/**\n * StartRTMPBroadcastsRequest is the payload for starting RTMP broadcasts.\n * @export\n * @interface StartRTMPBroadcastsRequest\n */\nexport interface StartRTMPBroadcastsRequest {\n  /**\n   * List of broadcasts to start\n   * @type {Array<RTMPBroadcastRequest>}\n   * @memberof StartRTMPBroadcastsRequest\n   */\n  broadcasts: Array<RTMPBroadcastRequest>;\n}\n/**\n * StartRTMPBroadcastsResponse is the payload for starting an RTMP broadcast.\n * @export\n * @interface StartRTMPBroadcastsResponse\n */\nexport interface StartRTMPBroadcastsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StartRTMPBroadcastsResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StartRecordingRequest\n */\nexport interface StartRecordingRequest {\n  /**\n   *\n   * @type {string}\n   * @memberof StartRecordingRequest\n   */\n  recording_external_storage?: string;\n}\n/**\n * StartRecordingResponse is the response payload for the start recording endpoint.\n * @export\n * @interface StartRecordingResponse\n */\nexport interface StartRecordingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StartRecordingResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StartTranscriptionRequest\n */\nexport interface StartTranscriptionRequest {\n  /**\n   * Enable closed captions along with transcriptions\n   * @type {boolean}\n   * @memberof StartTranscriptionRequest\n   */\n  enable_closed_captions?: boolean;\n  /**\n   * The spoken language in the call, if not provided the language defined in the transcription settings will be used\n   * @type {string}\n   * @memberof StartTranscriptionRequest\n   */\n  language?: StartTranscriptionRequestLanguageEnum;\n  /**\n   * Store transcriptions in this external storage\n   * @type {string}\n   * @memberof StartTranscriptionRequest\n   */\n  transcription_external_storage?: string;\n}\n\n/**\n * @export\n */\nexport const StartTranscriptionRequestLanguageEnum = {\n  AUTO: 'auto',\n  EN: 'en',\n  FR: 'fr',\n  ES: 'es',\n  DE: 'de',\n  IT: 'it',\n  NL: 'nl',\n  PT: 'pt',\n  PL: 'pl',\n  CA: 'ca',\n  CS: 'cs',\n  DA: 'da',\n  EL: 'el',\n  FI: 'fi',\n  ID: 'id',\n  JA: 'ja',\n  RU: 'ru',\n  SV: 'sv',\n  TA: 'ta',\n  TH: 'th',\n  TR: 'tr',\n  HU: 'hu',\n  RO: 'ro',\n  ZH: 'zh',\n  AR: 'ar',\n  TL: 'tl',\n  HE: 'he',\n  HI: 'hi',\n  HR: 'hr',\n  KO: 'ko',\n  MS: 'ms',\n  NO: 'no',\n  UK: 'uk',\n  BG: 'bg',\n  ET: 'et',\n  SL: 'sl',\n  SK: 'sk',\n} as const;\nexport type StartTranscriptionRequestLanguageEnum =\n  (typeof StartTranscriptionRequestLanguageEnum)[keyof typeof StartTranscriptionRequestLanguageEnum];\n\n/**\n *\n * @export\n * @interface StartTranscriptionResponse\n */\nexport interface StartTranscriptionResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StartTranscriptionResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StatsOptions\n */\nexport interface StatsOptions {\n  /**\n   *\n   * @type {boolean}\n   * @memberof StatsOptions\n   */\n  enable_rtc_stats: boolean;\n  /**\n   *\n   * @type {number}\n   * @memberof StatsOptions\n   */\n  reporting_interval_ms: number;\n}\n/**\n *\n * @export\n * @interface StopAllRTMPBroadcastsResponse\n */\nexport interface StopAllRTMPBroadcastsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopAllRTMPBroadcastsResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StopClosedCaptionsRequest\n */\nexport interface StopClosedCaptionsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopClosedCaptionsRequest\n   */\n  stop_transcription?: boolean;\n}\n/**\n * Basic response information\n * @export\n * @interface StopClosedCaptionsResponse\n */\nexport interface StopClosedCaptionsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopClosedCaptionsResponse\n   */\n  duration: string;\n}\n/**\n * Basic response information\n * @export\n * @interface StopFrameRecordingResponse\n */\nexport interface StopFrameRecordingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopFrameRecordingResponse\n   */\n  duration: string;\n}\n/**\n * Basic response information\n * @export\n * @interface StopHLSBroadcastingResponse\n */\nexport interface StopHLSBroadcastingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopHLSBroadcastingResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StopLiveRequest\n */\nexport interface StopLiveRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopLiveRequest\n   */\n  continue_closed_caption?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopLiveRequest\n   */\n  continue_hls?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopLiveRequest\n   */\n  continue_recording?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopLiveRequest\n   */\n  continue_rtmp_broadcasts?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopLiveRequest\n   */\n  continue_transcription?: boolean;\n}\n/**\n *\n * @export\n * @interface StopLiveResponse\n */\nexport interface StopLiveResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof StopLiveResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof StopLiveResponse\n   */\n  duration: string;\n}\n/**\n * Basic response information\n * @export\n * @interface StopRTMPBroadcastsResponse\n */\nexport interface StopRTMPBroadcastsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopRTMPBroadcastsResponse\n   */\n  duration: string;\n}\n/**\n * Basic response information\n * @export\n * @interface StopRecordingResponse\n */\nexport interface StopRecordingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopRecordingResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StopTranscriptionRequest\n */\nexport interface StopTranscriptionRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopTranscriptionRequest\n   */\n  stop_closed_captions?: boolean;\n}\n/**\n * Basic response information\n * @export\n * @interface StopTranscriptionResponse\n */\nexport interface StopTranscriptionResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopTranscriptionResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface SubscriberStatsResponse\n */\nexport interface SubscriberStatsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof SubscriberStatsResponse\n   */\n  total: number;\n  /**\n   *\n   * @type {number}\n   * @memberof SubscriberStatsResponse\n   */\n  total_subscribed_duration_seconds: number;\n  /**\n   *\n   * @type {number}\n   * @memberof SubscriberStatsResponse\n   */\n  unique: number;\n}\n/**\n *\n * @export\n * @interface TargetResolution\n */\nexport interface TargetResolution {\n  /**\n   *\n   * @type {number}\n   * @memberof TargetResolution\n   */\n  bitrate?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof TargetResolution\n   */\n  height: number;\n  /**\n   *\n   * @type {number}\n   * @memberof TargetResolution\n   */\n  width: number;\n}\n/**\n *\n * @export\n * @interface ThumbnailResponse\n */\nexport interface ThumbnailResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof ThumbnailResponse\n   */\n  image_url: string;\n}\n/**\n *\n * @export\n * @interface ThumbnailsSettingsRequest\n */\nexport interface ThumbnailsSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof ThumbnailsSettingsRequest\n   */\n  enabled?: boolean;\n}\n/**\n *\n * @export\n * @interface ThumbnailsSettingsResponse\n */\nexport interface ThumbnailsSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof ThumbnailsSettingsResponse\n   */\n  enabled: boolean;\n}\n/**\n *\n * @export\n * @interface TrackStatsResponse\n */\nexport interface TrackStatsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof TrackStatsResponse\n   */\n  duration_seconds: number;\n  /**\n   *\n   * @type {string}\n   * @memberof TrackStatsResponse\n   */\n  track_type: string;\n}\n/**\n *\n * @export\n * @interface TranscriptionSettingsRequest\n */\nexport interface TranscriptionSettingsRequest {\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsRequest\n   */\n  closed_caption_mode?: TranscriptionSettingsRequestClosedCaptionModeEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsRequest\n   */\n  language?: TranscriptionSettingsRequestLanguageEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsRequest\n   */\n  mode?: TranscriptionSettingsRequestModeEnum;\n  /**\n   *\n   * @type {SpeechSegmentConfig}\n   * @memberof TranscriptionSettingsRequest\n   */\n  speech_segment_config?: SpeechSegmentConfig;\n  /**\n   *\n   * @type {TranslationSettings}\n   * @memberof TranscriptionSettingsRequest\n   */\n  translation?: TranslationSettings;\n}\n\n/**\n * @export\n */\nexport const TranscriptionSettingsRequestClosedCaptionModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type TranscriptionSettingsRequestClosedCaptionModeEnum =\n  (typeof TranscriptionSettingsRequestClosedCaptionModeEnum)[keyof typeof TranscriptionSettingsRequestClosedCaptionModeEnum];\n\n/**\n * @export\n */\nexport const TranscriptionSettingsRequestLanguageEnum = {\n  AUTO: 'auto',\n  EN: 'en',\n  FR: 'fr',\n  ES: 'es',\n  DE: 'de',\n  IT: 'it',\n  NL: 'nl',\n  PT: 'pt',\n  PL: 'pl',\n  CA: 'ca',\n  CS: 'cs',\n  DA: 'da',\n  EL: 'el',\n  FI: 'fi',\n  ID: 'id',\n  JA: 'ja',\n  RU: 'ru',\n  SV: 'sv',\n  TA: 'ta',\n  TH: 'th',\n  TR: 'tr',\n  HU: 'hu',\n  RO: 'ro',\n  ZH: 'zh',\n  AR: 'ar',\n  TL: 'tl',\n  HE: 'he',\n  HI: 'hi',\n  HR: 'hr',\n  KO: 'ko',\n  MS: 'ms',\n  NO: 'no',\n  UK: 'uk',\n  BG: 'bg',\n  ET: 'et',\n  SL: 'sl',\n  SK: 'sk',\n} as const;\nexport type TranscriptionSettingsRequestLanguageEnum =\n  (typeof TranscriptionSettingsRequestLanguageEnum)[keyof typeof TranscriptionSettingsRequestLanguageEnum];\n\n/**\n * @export\n */\nexport const TranscriptionSettingsRequestModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type TranscriptionSettingsRequestModeEnum =\n  (typeof TranscriptionSettingsRequestModeEnum)[keyof typeof TranscriptionSettingsRequestModeEnum];\n\n/**\n *\n * @export\n * @interface TranscriptionSettingsResponse\n */\nexport interface TranscriptionSettingsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsResponse\n   */\n  closed_caption_mode: TranscriptionSettingsResponseClosedCaptionModeEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsResponse\n   */\n  language: TranscriptionSettingsResponseLanguageEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsResponse\n   */\n  mode: TranscriptionSettingsResponseModeEnum;\n  /**\n   *\n   * @type {SpeechSegmentConfig}\n   * @memberof TranscriptionSettingsResponse\n   */\n  speech_segment_config?: SpeechSegmentConfig;\n  /**\n   *\n   * @type {TranslationSettings}\n   * @memberof TranscriptionSettingsResponse\n   */\n  translation?: TranslationSettings;\n}\n\n/**\n * @export\n */\nexport const TranscriptionSettingsResponseClosedCaptionModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type TranscriptionSettingsResponseClosedCaptionModeEnum =\n  (typeof TranscriptionSettingsResponseClosedCaptionModeEnum)[keyof typeof TranscriptionSettingsResponseClosedCaptionModeEnum];\n\n/**\n * @export\n */\nexport const TranscriptionSettingsResponseLanguageEnum = {\n  AUTO: 'auto',\n  EN: 'en',\n  FR: 'fr',\n  ES: 'es',\n  DE: 'de',\n  IT: 'it',\n  NL: 'nl',\n  PT: 'pt',\n  PL: 'pl',\n  CA: 'ca',\n  CS: 'cs',\n  DA: 'da',\n  EL: 'el',\n  FI: 'fi',\n  ID: 'id',\n  JA: 'ja',\n  RU: 'ru',\n  SV: 'sv',\n  TA: 'ta',\n  TH: 'th',\n  TR: 'tr',\n  HU: 'hu',\n  RO: 'ro',\n  ZH: 'zh',\n  AR: 'ar',\n  TL: 'tl',\n  HE: 'he',\n  HI: 'hi',\n  HR: 'hr',\n  KO: 'ko',\n  MS: 'ms',\n  NO: 'no',\n  UK: 'uk',\n  BG: 'bg',\n  ET: 'et',\n  SL: 'sl',\n  SK: 'sk',\n} as const;\nexport type TranscriptionSettingsResponseLanguageEnum =\n  (typeof TranscriptionSettingsResponseLanguageEnum)[keyof typeof TranscriptionSettingsResponseLanguageEnum];\n\n/**\n * @export\n */\nexport const TranscriptionSettingsResponseModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type TranscriptionSettingsResponseModeEnum =\n  (typeof TranscriptionSettingsResponseModeEnum)[keyof typeof TranscriptionSettingsResponseModeEnum];\n\n/**\n *\n * @export\n * @interface TranslationSettings\n */\nexport interface TranslationSettings {\n  /**\n   *\n   * @type {boolean}\n   * @memberof TranslationSettings\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof TranslationSettings\n   */\n  languages?: Array<string>;\n}\n/**\n * UnblockUserRequest is the payload for unblocking a user.\n * @export\n * @interface UnblockUserRequest\n */\nexport interface UnblockUserRequest {\n  /**\n   * the user to unblock\n   * @type {string}\n   * @memberof UnblockUserRequest\n   */\n  user_id: string;\n}\n/**\n * UnblockUserResponse is the payload for unblocking a user.\n * @export\n * @interface UnblockUserResponse\n */\nexport interface UnblockUserResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof UnblockUserResponse\n   */\n  duration: string;\n}\n/**\n * This event is sent when a user is unblocked on a call,\n * this can be useful to notify the user that they can now join the call again\n * @export\n * @interface UnblockedUserEvent\n */\nexport interface UnblockedUserEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof UnblockedUserEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UnblockedUserEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.unblocked_user\" in this case\n   * @type {string}\n   * @memberof UnblockedUserEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof UnblockedUserEvent\n   */\n  user: UserResponse;\n}\n/**\n * UnpinRequest is the payload for unpinning a message.\n * @export\n * @interface UnpinRequest\n */\nexport interface UnpinRequest {\n  /**\n   * the session ID of the user who pinned the message\n   * @type {string}\n   * @memberof UnpinRequest\n   */\n  session_id: string;\n  /**\n   * the user ID of the user who pinned the message\n   * @type {string}\n   * @memberof UnpinRequest\n   */\n  user_id: string;\n}\n/**\n * UnpinResponse is the payload for unpinning a message.\n * @export\n * @interface UnpinResponse\n */\nexport interface UnpinResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof UnpinResponse\n   */\n  duration: string;\n}\n/**\n * Update call members\n * @export\n * @interface UpdateCallMembersRequest\n */\nexport interface UpdateCallMembersRequest {\n  /**\n   * List of userID to remove\n   * @type {Array<string>}\n   * @memberof UpdateCallMembersRequest\n   */\n  remove_members?: Array<string>;\n  /**\n   * List of members to update or insert\n   * @type {Array<MemberRequest>}\n   * @memberof UpdateCallMembersRequest\n   */\n  update_members?: Array<MemberRequest>;\n}\n/**\n * Basic response information\n * @export\n * @interface UpdateCallMembersResponse\n */\nexport interface UpdateCallMembersResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof UpdateCallMembersResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof UpdateCallMembersResponse\n   */\n  members: Array<MemberResponse>;\n}\n/**\n * Request for updating a call\n * @export\n * @interface UpdateCallRequest\n */\nexport interface UpdateCallRequest {\n  /**\n   * Custom data for this object\n   * @type {{ [key: string]: any; }}\n   * @memberof UpdateCallRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {CallSettingsRequest}\n   * @memberof UpdateCallRequest\n   */\n  settings_override?: CallSettingsRequest;\n  /**\n   * the time the call is scheduled to start\n   * @type {string}\n   * @memberof UpdateCallRequest\n   */\n  starts_at?: string;\n}\n/**\n * Response for updating a call\n * @export\n * @interface UpdateCallResponse\n */\nexport interface UpdateCallResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof UpdateCallResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof UpdateCallResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof UpdateCallResponse\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {MemberResponse}\n   * @memberof UpdateCallResponse\n   */\n  membership?: MemberResponse;\n  /**\n   *\n   * @type {Array<OwnCapability>}\n   * @memberof UpdateCallResponse\n   */\n  own_capabilities: Array<OwnCapability>;\n}\n/**\n *\n * @export\n * @interface UpdateUserPermissionsRequest\n */\nexport interface UpdateUserPermissionsRequest {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof UpdateUserPermissionsRequest\n   */\n  grant_permissions?: Array<string>;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof UpdateUserPermissionsRequest\n   */\n  revoke_permissions?: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof UpdateUserPermissionsRequest\n   */\n  user_id: string;\n}\n/**\n * Basic response information\n * @export\n * @interface UpdateUserPermissionsResponse\n */\nexport interface UpdateUserPermissionsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof UpdateUserPermissionsResponse\n   */\n  duration: string;\n}\n/**\n * This event is sent to notify about permission changes for a user, clients receiving this event should update their UI accordingly\n * @export\n * @interface UpdatedCallPermissionsEvent\n */\nexport interface UpdatedCallPermissionsEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof UpdatedCallPermissionsEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UpdatedCallPermissionsEvent\n   */\n  created_at: string;\n  /**\n   * The capabilities of the current user\n   * @type {Array<OwnCapability>}\n   * @memberof UpdatedCallPermissionsEvent\n   */\n  own_capabilities: Array<OwnCapability>;\n  /**\n   * The type of event: \"call.permissions_updated\" in this case\n   * @type {string}\n   * @memberof UpdatedCallPermissionsEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof UpdatedCallPermissionsEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface UserFeedbackReport\n */\nexport interface UserFeedbackReport {\n  /**\n   *\n   * @type {{ [key: string]: number; }}\n   * @memberof UserFeedbackReport\n   */\n  count_by_rating: { [key: string]: number };\n  /**\n   *\n   * @type {number}\n   * @memberof UserFeedbackReport\n   */\n  unreported_count: number;\n}\n/**\n *\n * @export\n * @interface UserFeedbackReportResponse\n */\nexport interface UserFeedbackReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateUserFeedbackReportResponse>}\n   * @memberof UserFeedbackReportResponse\n   */\n  daily: Array<DailyAggregateUserFeedbackReportResponse>;\n}\n/**\n *\n * @export\n * @interface UserRatingReportResponse\n */\nexport interface UserRatingReportResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof UserRatingReportResponse\n   */\n  average: number;\n  /**\n   *\n   * @type {number}\n   * @memberof UserRatingReportResponse\n   */\n  count: number;\n}\n/**\n * User request object\n * @export\n * @interface UserRequest\n */\nexport interface UserRequest {\n  /**\n   * Custom user data\n   * @type {{ [key: string]: any; }}\n   * @memberof UserRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   * User ID\n   * @type {string}\n   * @memberof UserRequest\n   */\n  id: string;\n  /**\n   * User's profile image URL\n   * @type {string}\n   * @memberof UserRequest\n   */\n  image?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof UserRequest\n   */\n  invisible?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof UserRequest\n   */\n  language?: string;\n  /**\n   * Optional name of user\n   * @type {string}\n   * @memberof UserRequest\n   */\n  name?: string;\n  /**\n   *\n   * @type {object}\n   * @memberof UserRequest\n   */\n  privacy_settings?: object;\n}\n/**\n * User response object\n * @export\n * @interface UserResponse\n */\nexport interface UserResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof UserResponse\n   */\n  avg_response_time?: number;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof UserResponse\n   */\n  blocked_user_ids: Array<string>;\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof UserResponse\n   */\n  created_at: string;\n  /**\n   * Custom data for this object\n   * @type {{ [key: string]: any; }}\n   * @memberof UserResponse\n   */\n  custom: { [key: string]: any };\n  /**\n   * Date of deactivation\n   * @type {string}\n   * @memberof UserResponse\n   */\n  deactivated_at?: string;\n  /**\n   * Date/time of deletion\n   * @type {string}\n   * @memberof UserResponse\n   */\n  deleted_at?: string;\n  /**\n   * Unique user identifier\n   * @type {string}\n   * @memberof UserResponse\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponse\n   */\n  image?: string;\n  /**\n   * Preferred language of a user\n   * @type {string}\n   * @memberof UserResponse\n   */\n  language: string;\n  /**\n   * Date of last activity\n   * @type {string}\n   * @memberof UserResponse\n   */\n  last_active?: string;\n  /**\n   * Optional name of user\n   * @type {string}\n   * @memberof UserResponse\n   */\n  name?: string;\n  /**\n   * Revocation date for tokens\n   * @type {string}\n   * @memberof UserResponse\n   */\n  revoke_tokens_issued_before?: string;\n  /**\n   * Determines the set of user permissions\n   * @type {string}\n   * @memberof UserResponse\n   */\n  role: string;\n  /**\n   * List of teams user is a part of\n   * @type {Array<string>}\n   * @memberof UserResponse\n   */\n  teams: Array<string>;\n  /**\n   *\n   * @type {{ [key: string]: string; }}\n   * @memberof UserResponse\n   */\n  teams_role?: { [key: string]: string };\n  /**\n   * Date/time of the last update\n   * @type {string}\n   * @memberof UserResponse\n   */\n  updated_at: string;\n}\n/**\n *\n * @export\n * @interface UserResponsePrivacyFields\n */\nexport interface UserResponsePrivacyFields {\n  /**\n   *\n   * @type {number}\n   * @memberof UserResponsePrivacyFields\n   */\n  avg_response_time?: number;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof UserResponsePrivacyFields\n   */\n  blocked_user_ids: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  created_at: string;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof UserResponsePrivacyFields\n   */\n  custom: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  deactivated_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  deleted_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  image?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof UserResponsePrivacyFields\n   */\n  invisible?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  language: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  last_active?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  name?: string;\n  /**\n   *\n   * @type {object}\n   * @memberof UserResponsePrivacyFields\n   */\n  privacy_settings?: object;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  revoke_tokens_issued_before?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  role: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof UserResponsePrivacyFields\n   */\n  teams: Array<string>;\n  /**\n   *\n   * @type {{ [key: string]: string; }}\n   * @memberof UserResponsePrivacyFields\n   */\n  teams_role?: { [key: string]: string };\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  updated_at: string;\n}\n/**\n * This event is sent when a user gets updated. The event contains information about the updated user.\n * @export\n * @interface UserUpdatedEvent\n */\nexport interface UserUpdatedEvent {\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof UserUpdatedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof UserUpdatedEvent\n   */\n  custom: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof UserUpdatedEvent\n   */\n  received_at?: string;\n  /**\n   * The type of event: \"user.updated\" in this case\n   * @type {string}\n   * @memberof UserUpdatedEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponsePrivacyFields}\n   * @memberof UserUpdatedEvent\n   */\n  user: UserResponsePrivacyFields;\n}\n/**\n * @type VideoEvent\n * The discriminator object for all websocket events, it maps events' payload to the final type\n * @export\n */\nexport type VideoEvent =\n  | ({ type: 'call.accepted' } & CallAcceptedEvent)\n  | ({ type: 'call.blocked_user' } & BlockedUserEvent)\n  | ({ type: 'call.closed_caption' } & ClosedCaptionEvent)\n  | ({ type: 'call.closed_captions_failed' } & CallClosedCaptionsFailedEvent)\n  | ({ type: 'call.closed_captions_started' } & CallClosedCaptionsStartedEvent)\n  | ({ type: 'call.closed_captions_stopped' } & CallClosedCaptionsStoppedEvent)\n  | ({ type: 'call.created' } & CallCreatedEvent)\n  | ({ type: 'call.deleted' } & CallDeletedEvent)\n  | ({ type: 'call.ended' } & CallEndedEvent)\n  | ({ type: 'call.frame_recording_failed' } & CallFrameRecordingFailedEvent)\n  | ({ type: 'call.frame_recording_ready' } & CallFrameRecordingFrameReadyEvent)\n  | ({ type: 'call.frame_recording_started' } & CallFrameRecordingStartedEvent)\n  | ({ type: 'call.frame_recording_stopped' } & CallFrameRecordingStoppedEvent)\n  | ({ type: 'call.hls_broadcasting_failed' } & CallHLSBroadcastingFailedEvent)\n  | ({\n      type: 'call.hls_broadcasting_started';\n    } & CallHLSBroadcastingStartedEvent)\n  | ({\n      type: 'call.hls_broadcasting_stopped';\n    } & CallHLSBroadcastingStoppedEvent)\n  | ({ type: 'call.kicked_user' } & KickedUserEvent)\n  | ({ type: 'call.live_started' } & CallLiveStartedEvent)\n  | ({ type: 'call.member_added' } & CallMemberAddedEvent)\n  | ({ type: 'call.member_removed' } & CallMemberRemovedEvent)\n  | ({ type: 'call.member_updated' } & CallMemberUpdatedEvent)\n  | ({\n      type: 'call.member_updated_permission';\n    } & CallMemberUpdatedPermissionEvent)\n  | ({ type: 'call.missed' } & CallMissedEvent)\n  | ({ type: 'call.moderation_blur' } & CallModerationBlurEvent)\n  | ({ type: 'call.moderation_warning' } & CallModerationWarningEvent)\n  | ({ type: 'call.notification' } & CallNotificationEvent)\n  | ({ type: 'call.permission_request' } & PermissionRequestEvent)\n  | ({ type: 'call.permissions_updated' } & UpdatedCallPermissionsEvent)\n  | ({ type: 'call.reaction_new' } & CallReactionEvent)\n  | ({ type: 'call.recording_failed' } & CallRecordingFailedEvent)\n  | ({ type: 'call.recording_ready' } & CallRecordingReadyEvent)\n  | ({ type: 'call.recording_started' } & CallRecordingStartedEvent)\n  | ({ type: 'call.recording_stopped' } & CallRecordingStoppedEvent)\n  | ({ type: 'call.rejected' } & CallRejectedEvent)\n  | ({ type: 'call.ring' } & CallRingEvent)\n  | ({ type: 'call.rtmp_broadcast_failed' } & CallRtmpBroadcastFailedEvent)\n  | ({ type: 'call.rtmp_broadcast_started' } & CallRtmpBroadcastStartedEvent)\n  | ({ type: 'call.rtmp_broadcast_stopped' } & CallRtmpBroadcastStoppedEvent)\n  | ({ type: 'call.session_ended' } & CallSessionEndedEvent)\n  | ({\n      type: 'call.session_participant_count_updated';\n    } & CallSessionParticipantCountsUpdatedEvent)\n  | ({\n      type: 'call.session_participant_joined';\n    } & CallSessionParticipantJoinedEvent)\n  | ({\n      type: 'call.session_participant_left';\n    } & CallSessionParticipantLeftEvent)\n  | ({ type: 'call.session_started' } & CallSessionStartedEvent)\n  | ({ type: 'call.stats_report_ready' } & CallStatsReportReadyEvent)\n  | ({ type: 'call.transcription_failed' } & CallTranscriptionFailedEvent)\n  | ({ type: 'call.transcription_ready' } & CallTranscriptionReadyEvent)\n  | ({ type: 'call.transcription_started' } & CallTranscriptionStartedEvent)\n  | ({ type: 'call.transcription_stopped' } & CallTranscriptionStoppedEvent)\n  | ({ type: 'call.unblocked_user' } & UnblockedUserEvent)\n  | ({ type: 'call.updated' } & CallUpdatedEvent)\n  | ({ type: 'call.user_feedback_submitted' } & CallUserFeedbackSubmittedEvent)\n  | ({ type: 'call.user_muted' } & CallUserMutedEvent)\n  | ({ type: 'connection.error' } & ConnectionErrorEvent)\n  | ({ type: 'connection.ok' } & ConnectedEvent)\n  | ({ type: 'custom' } & CustomVideoEvent)\n  | ({ type: 'health.check' } & HealthCheckEvent)\n  | ({ type: 'user.updated' } & UserUpdatedEvent);\n/**\n *\n * @export\n * @interface VideoReactionOverTimeResponse\n */\nexport interface VideoReactionOverTimeResponse {\n  /**\n   *\n   * @type {Array<CountByMinuteResponse>}\n   * @memberof VideoReactionOverTimeResponse\n   */\n  by_minute?: Array<CountByMinuteResponse>;\n}\n/**\n *\n * @export\n * @interface VideoReactionsResponse\n */\nexport interface VideoReactionsResponse {\n  /**\n   *\n   * @type {VideoReactionOverTimeResponse}\n   * @memberof VideoReactionsResponse\n   */\n  count_over_time?: VideoReactionOverTimeResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof VideoReactionsResponse\n   */\n  reaction: string;\n}\n/**\n *\n * @export\n * @interface VideoSettingsRequest\n */\nexport interface VideoSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsRequest\n   */\n  access_request_enabled?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsRequest\n   */\n  camera_default_on?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof VideoSettingsRequest\n   */\n  camera_facing?: VideoSettingsRequestCameraFacingEnum;\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {TargetResolution}\n   * @memberof VideoSettingsRequest\n   */\n  target_resolution?: TargetResolution;\n}\n\n/**\n * @export\n */\nexport const VideoSettingsRequestCameraFacingEnum = {\n  FRONT: 'front',\n  BACK: 'back',\n  EXTERNAL: 'external',\n} as const;\nexport type VideoSettingsRequestCameraFacingEnum =\n  (typeof VideoSettingsRequestCameraFacingEnum)[keyof typeof VideoSettingsRequestCameraFacingEnum];\n\n/**\n *\n * @export\n * @interface VideoSettingsResponse\n */\nexport interface VideoSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsResponse\n   */\n  access_request_enabled: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsResponse\n   */\n  camera_default_on: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof VideoSettingsResponse\n   */\n  camera_facing: VideoSettingsResponseCameraFacingEnum;\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {TargetResolution}\n   * @memberof VideoSettingsResponse\n   */\n  target_resolution: TargetResolution;\n}\n\n/**\n * @export\n */\nexport const VideoSettingsResponseCameraFacingEnum = {\n  FRONT: 'front',\n  BACK: 'back',\n  EXTERNAL: 'external',\n} as const;\nexport type VideoSettingsResponseCameraFacingEnum =\n  (typeof VideoSettingsResponseCameraFacingEnum)[keyof typeof VideoSettingsResponseCameraFacingEnum];\n\n/**\n *\n * @export\n * @interface WHIPIngress\n */\nexport interface WHIPIngress {\n  /**\n   * URL for a new whip input, every time a new link is created\n   * @type {string}\n   * @memberof WHIPIngress\n   */\n  address: string;\n}\n/**\n * Websocket auth message\n * @export\n * @interface WSAuthMessage\n */\nexport interface WSAuthMessage {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof WSAuthMessage\n   */\n  products?: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof WSAuthMessage\n   */\n  token: string;\n  /**\n   *\n   * @type {ConnectUserDetailsRequest}\n   * @memberof WSAuthMessage\n   */\n  user_details: ConnectUserDetailsRequest;\n}\n", "import { AxiosRequestConfig, AxiosResponse } from 'axios';\nimport { ConnectedEvent, UserRequest, VideoEvent } from '../../gen/coordinator';\nimport { AllSfuEvents } from '../../rtc';\nimport type { ConfigureLoggersOptions, LogLevel } from '@stream-io/logger';\n\nexport type UR = Record<string, unknown>;\n\nexport type User =\n  | (Omit<UserRequest, 'role'> & { type?: 'authenticated' })\n  | (Omit<UserRequest, 'role'> & { type: 'guest' })\n  | (Omit<UserRequest, 'id' | 'role'> & {\n      id?: '!anon';\n      type: 'anonymous';\n    });\n\nexport type UserWithId =\n  | (UserRequest & { type?: 'authenticated' })\n  | (UserRequest & { type: 'guest' })\n  | (UserRequest & {\n      id: '!anon';\n      type: 'anonymous';\n    });\n\nexport type { OwnUserResponse } from '../../gen/coordinator';\n\nexport type ConnectAPIResponse = Promise<void | ConnectedEvent>;\n\ntype ErrorResponseDetails = {\n  code: number;\n  messages: string[];\n};\n\nexport type APIErrorResponse = {\n  code: number;\n  duration: string;\n  message: string;\n  more_info: string;\n  StatusCode: number;\n  details?: ErrorResponseDetails;\n  unrecoverable?: boolean;\n};\n\nexport class ErrorFromResponse<T> extends Error {\n  public code: number | null;\n  public status: number;\n  public response: AxiosResponse<T>;\n  public name = 'ErrorFromResponse';\n  public unrecoverable: boolean | null;\n\n  constructor({\n    message,\n    code,\n    status,\n    response,\n    unrecoverable,\n  }: Pick<\n    ErrorFromResponse<T>,\n    'message' | 'code' | 'status' | 'response' | 'unrecoverable'\n  >) {\n    super(message);\n    this.code = code;\n    this.response = response;\n    this.status = status;\n    this.unrecoverable = unrecoverable;\n  }\n\n  // Vitest helper (serialized errors are too large to read)\n  // https://github.com/vitest-dev/vitest/blob/v3.1.3/packages/utils/src/error.ts#L60-L62\n  public toJSON() {\n    const extra = [\n      ['status', this.status],\n      ['code', this.code],\n      ['unrecoverable', this.unrecoverable],\n    ] as const;\n\n    const joinable = [];\n\n    for (const [key, value] of extra) {\n      if (typeof value !== 'undefined' && value !== null) {\n        joinable.push(`${key}: ${value}`);\n      }\n    }\n\n    return {\n      message: `(${joinable.join(', ')}) - ${this.message}`,\n      stack: this.stack,\n      name: this.name,\n    };\n  }\n}\n\nexport type ConnectionChangedEvent = {\n  type: 'connection.changed';\n  online: boolean;\n};\n\nexport type NetworkChangedEvent = {\n  type: 'network.changed';\n  online: boolean;\n};\n\nexport type TransportChangedEvent = {\n  type: 'transport.changed';\n  mode: 'longpoll';\n};\n\nexport type ConnectionRecoveredEvent = {\n  type: 'connection.recovered';\n};\n\nexport type StreamVideoEvent = (\n  | VideoEvent\n  | NetworkChangedEvent\n  | ConnectionChangedEvent\n  | TransportChangedEvent\n  | ConnectionRecoveredEvent\n) & { received_at?: string | Date };\n\n// TODO: we should use WSCallEvent here but that needs fixing\nexport type StreamCallEvent = Extract<StreamVideoEvent, { call_cid: string }>;\nexport type EventTypes = 'all' | VideoEvent['type'];\n\nexport type AllClientEventTypes = 'all' | StreamVideoEvent['type'];\nexport type AllClientEvents = {\n  [K in AllClientEventTypes]: Extract<StreamVideoEvent, { type: K }>;\n};\nexport type ClientEventListener<E extends keyof AllClientEvents> = (\n  event: AllClientEvents[E],\n) => void;\n\nexport type AllClientCallEvents = {\n  [K in EventTypes]: Extract<VideoEvent, { type: K }>;\n};\n\nexport type AllCallEvents = AllClientCallEvents & AllSfuEvents;\nexport type CallEventListener<E extends keyof AllCallEvents> = (\n  event: AllCallEvents[E],\n) => void;\n\nexport type Logger = (\n  logLevel: LogLevel,\n  message: string,\n  ...args: unknown[]\n) => void;\n\nexport type StreamClientOptions = Partial<AxiosRequestConfig> & {\n  /**\n   * Used to disable warnings that are triggered by using connectUser or connectAnonymousUser server-side.\n   */\n  allowServerSideConnect?: boolean;\n  axiosRequestConfig?: AxiosRequestConfig;\n  /**\n   * Base url to use for API\n   * such as https://chat-proxy-dublin.stream-io-api.com\n   */\n  baseURL?: string;\n  browser?: boolean;\n\n  /**\n   *  @deprecated Use `logOptions` instead.\n   *  Custom logger instance used to handle log messages.\n   *  Will be removed in a future release.\n   */\n  logger?: Logger;\n\n  /**\n   *  @deprecated Use `logOptions` instead.\n   *  Sets the minimum log level for all logs.\n   *  Will be removed in a future release.\n   */\n  logLevel?: LogLevel;\n\n  /**\n   * Configuration options where keys are logger scopes.\n   * The `default` scope is reserved is used to set defaults for all loggers.\n   *\n   */\n  logOptions?: ConfigureLoggersOptions;\n\n  /**\n   * The URL to use for the location hint.\n   */\n  locationHintUrl?: string;\n  /**\n   * The default timeout for requesting a location hint.\n   */\n  locationHintTimeout?: number;\n  /**\n   * The maximum number of attempts to request a location hint.\n   */\n  locationHintMaxAttempts?: number;\n  /**\n   * When true, user will be persisted on client. Otherwise if `connectUser` call fails, then you need to\n   * call `connectUser` again to retry.\n   * This is mainly useful for chat application working in offline mode, where you will need client.user to\n   * persist even if connectUser call fails.\n   */\n  persistUserOnConnectionFailure?: boolean;\n\n  /**\n   * The secret key for the API key. This is only needed for server side authentication.\n   */\n  secret?: string;\n\n  /**\n   * The WebSocket implementation to use. This is mainly useful for testing.\n   * In Node.js environment, you can use the `ws` package.\n   */\n  WebSocketImpl?: typeof WebSocket;\n\n  /**\n   * Create Web Worker to initiate timer events like health checks. Can possibly prevent\n   * timer throttling issues in inactive browser tabs.\n   */\n  enableTimerWorker?: boolean;\n\n  /**\n   * The client app identifier.\n   */\n  clientAppIdentifier?: ClientAppIdentifier;\n\n  /**\n   * The default timeout for WebSocket connections.\n   */\n  defaultWsTimeout?: number;\n\n  /**\n   * The maximum number of retries to connect a user.\n   */\n  maxConnectUserRetries?: number;\n\n  /**\n   * A callback to be called one the maxUserConnectRetries is exhausted.\n   * @param lastError the last error.\n   * @param allErrors all errors.\n   */\n  onConnectUserError?: (lastError: Error, allErrors: Error[]) => void;\n\n  /**\n   * When set to true, the incoming calls are rejected when the user is busy in an another call.\n   */\n  rejectCallWhenBusy?: boolean;\n};\n\nexport type ClientAppIdentifier = {\n  sdkName?: 'react' | 'react-native' | 'plain-javascript' | (string & {});\n  sdkVersion?: string;\n  app?: string;\n  app_version?: string;\n  os?: string;\n  device_model?: string;\n};\n\nexport type TokenProvider = () => Promise<string>;\nexport type TokenOrProvider = null | string | TokenProvider | undefined;\n\nexport type BuiltInRejectReason = 'busy' | 'decline' | 'cancel' | 'timeout';\nexport type RejectReason = BuiltInRejectReason | (string & {});\n", "/* eslint-disable */\nimport type {\n  JsonObject,\n  JsonReadOptions,\n  JsonValue,\n  JsonWriteOptions,\n} from '@protobuf-ts/runtime';\n// @generated by protobuf-ts 2.10.0 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"google/protobuf/struct.proto\" (package \"google.protobuf\", syntax proto3)\n// tslint:disable\n//\n// Protocol Buffers - Google's data interchange format\n// Copyright 2008 Google Inc.  All rights reserved.\n// https://developers.google.com/protocol-buffers/\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//     * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//     * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\nimport {\n  isJsonObject,\n  MessageType,\n  typeofJsonValue,\n} from '@protobuf-ts/runtime';\n\n/**\n * `Struct` represents a structured data value, consisting of fields\n * which map to dynamically typed values. In some languages, `Struct`\n * might be supported by a native representation. For example, in\n * scripting languages like JS a struct is represented as an\n * object. The details of that representation are described together\n * with the proto support for the language.\n *\n * The JSON representation for `Struct` is JSON object.\n *\n * @generated from protobuf message google.protobuf.Struct\n */\nexport interface Struct {\n  /**\n   * Unordered map of dynamically typed values.\n   *\n   * @generated from protobuf field: map<string, google.protobuf.Value> fields = 1;\n   */\n  fields: {\n    [key: string]: Value;\n  };\n}\n/**\n * `Value` represents a dynamically typed value which can be either\n * null, a number, a string, a boolean, a recursive struct value, or a\n * list of values. A producer of value is expected to set one of these\n * variants. Absence of any variant indicates an error.\n *\n * The JSON representation for `Value` is JSON value.\n *\n * @generated from protobuf message google.protobuf.Value\n */\nexport interface Value {\n  /**\n   * @generated from protobuf oneof: kind\n   */\n  kind:\n    | {\n        oneofKind: 'nullValue';\n        /**\n         * Represents a null value.\n         *\n         * @generated from protobuf field: google.protobuf.NullValue null_value = 1;\n         */\n        nullValue: NullValue;\n      }\n    | {\n        oneofKind: 'numberValue';\n        /**\n         * Represents a double value.\n         *\n         * @generated from protobuf field: double number_value = 2;\n         */\n        numberValue: number;\n      }\n    | {\n        oneofKind: 'stringValue';\n        /**\n         * Represents a string value.\n         *\n         * @generated from protobuf field: string string_value = 3;\n         */\n        stringValue: string;\n      }\n    | {\n        oneofKind: 'boolValue';\n        /**\n         * Represents a boolean value.\n         *\n         * @generated from protobuf field: bool bool_value = 4;\n         */\n        boolValue: boolean;\n      }\n    | {\n        oneofKind: 'structValue';\n        /**\n         * Represents a structured value.\n         *\n         * @generated from protobuf field: google.protobuf.Struct struct_value = 5;\n         */\n        structValue: Struct;\n      }\n    | {\n        oneofKind: 'listValue';\n        /**\n         * Represents a repeated `Value`.\n         *\n         * @generated from protobuf field: google.protobuf.ListValue list_value = 6;\n         */\n        listValue: ListValue;\n      }\n    | {\n        oneofKind: undefined;\n      };\n}\n/**\n * `ListValue` is a wrapper around a repeated field of values.\n *\n * The JSON representation for `ListValue` is JSON array.\n *\n * @generated from protobuf message google.protobuf.ListValue\n */\nexport interface ListValue {\n  /**\n   * Repeated field of dynamically typed values.\n   *\n   * @generated from protobuf field: repeated google.protobuf.Value values = 1;\n   */\n  values: Value[];\n}\n/**\n * `NullValue` is a singleton enumeration to represent the null value for the\n * `Value` type union.\n *\n *  The JSON representation for `NullValue` is JSON `null`.\n *\n * @generated from protobuf enum google.protobuf.NullValue\n */\nexport enum NullValue {\n  /**\n   * Null value.\n   *\n   * @generated from protobuf enum value: NULL_VALUE = 0;\n   */\n  NULL_VALUE = 0,\n}\n// @generated message type with reflection information, may provide speed optimized methods\nclass Struct$Type extends MessageType<Struct> {\n  constructor() {\n    super('google.protobuf.Struct', [\n      {\n        no: 1,\n        name: 'fields',\n        kind: 'map',\n        K: 9 /*ScalarType.STRING*/,\n        V: { kind: 'message', T: () => Value },\n      },\n    ]);\n  }\n  /**\n   * Encode `Struct` to JSON object.\n   */\n  internalJsonWrite(message: Struct, options: JsonWriteOptions): JsonValue {\n    let json: JsonObject = {};\n    for (let [k, v] of Object.entries(message.fields)) {\n      json[k] = Value.toJson(v);\n    }\n    return json;\n  }\n  /**\n   * Decode `Struct` from JSON object.\n   */\n  internalJsonRead(\n    json: JsonValue,\n    options: JsonReadOptions,\n    target?: Struct,\n  ): Struct {\n    if (!isJsonObject(json))\n      throw new globalThis.Error(\n        'Unable to parse message ' +\n          this.typeName +\n          ' from JSON ' +\n          typeofJsonValue(json) +\n          '.',\n      );\n    if (!target) target = this.create();\n    for (let [k, v] of globalThis.Object.entries(json)) {\n      target.fields[k] = Value.fromJson(v);\n    }\n    return target;\n  }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.Struct\n */\nexport const Struct = new Struct$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Value$Type extends MessageType<Value> {\n  constructor() {\n    super('google.protobuf.Value', [\n      {\n        no: 1,\n        name: 'null_value',\n        kind: 'enum',\n        oneof: 'kind',\n        T: () => ['google.protobuf.NullValue', NullValue],\n      },\n      {\n        no: 2,\n        name: 'number_value',\n        kind: 'scalar',\n        oneof: 'kind',\n        T: 1 /*ScalarType.DOUBLE*/,\n      },\n      {\n        no: 3,\n        name: 'string_value',\n        kind: 'scalar',\n        oneof: 'kind',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 4,\n        name: 'bool_value',\n        kind: 'scalar',\n        oneof: 'kind',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n      {\n        no: 5,\n        name: 'struct_value',\n        kind: 'message',\n        oneof: 'kind',\n        T: () => Struct,\n      },\n      {\n        no: 6,\n        name: 'list_value',\n        kind: 'message',\n        oneof: 'kind',\n        T: () => ListValue,\n      },\n    ]);\n  }\n  /**\n   * Encode `Value` to JSON value.\n   */\n  internalJsonWrite(message: Value, options: JsonWriteOptions): JsonValue {\n    if (message.kind.oneofKind === undefined) throw new globalThis.Error();\n    switch (message.kind.oneofKind) {\n      case undefined:\n        throw new globalThis.Error();\n      case 'boolValue':\n        return message.kind.boolValue;\n      case 'nullValue':\n        return null;\n      case 'numberValue':\n        let numberValue = message.kind.numberValue;\n        if (typeof numberValue == 'number' && !Number.isFinite(numberValue))\n          throw new globalThis.Error();\n        return numberValue;\n      case 'stringValue':\n        return message.kind.stringValue;\n      case 'listValue':\n        let listValueField = this.fields.find((f) => f.no === 6);\n        if (listValueField?.kind !== 'message') throw new globalThis.Error();\n        return listValueField.T().toJson(message.kind.listValue);\n      case 'structValue':\n        let structValueField = this.fields.find((f) => f.no === 5);\n        if (structValueField?.kind !== 'message') throw new globalThis.Error();\n        return structValueField.T().toJson(message.kind.structValue);\n    }\n  }\n  /**\n   * Decode `Value` from JSON value.\n   */\n  internalJsonRead(\n    json: JsonValue,\n    options: JsonReadOptions,\n    target?: Value,\n  ): Value {\n    if (!target) target = this.create();\n    switch (typeof json) {\n      case 'number':\n        target.kind = { oneofKind: 'numberValue', numberValue: json };\n        break;\n      case 'string':\n        target.kind = { oneofKind: 'stringValue', stringValue: json };\n        break;\n      case 'boolean':\n        target.kind = { oneofKind: 'boolValue', boolValue: json };\n        break;\n      case 'object':\n        if (json === null) {\n          target.kind = {\n            oneofKind: 'nullValue',\n            nullValue: NullValue.NULL_VALUE,\n          };\n        } else if (globalThis.Array.isArray(json)) {\n          target.kind = {\n            oneofKind: 'listValue',\n            listValue: ListValue.fromJson(json),\n          };\n        } else {\n          target.kind = {\n            oneofKind: 'structValue',\n            structValue: Struct.fromJson(json),\n          };\n        }\n        break;\n      default:\n        throw new globalThis.Error(\n          'Unable to parse ' +\n            this.typeName +\n            ' from JSON ' +\n            typeofJsonValue(json),\n        );\n    }\n    return target;\n  }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.Value\n */\nexport const Value = new Value$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ListValue$Type extends MessageType<ListValue> {\n  constructor() {\n    super('google.protobuf.ListValue', [\n      {\n        no: 1,\n        name: 'values',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => Value,\n      },\n    ]);\n  }\n  /**\n   * Encode `ListValue` to JSON array.\n   */\n  internalJsonWrite(message: ListValue, options: JsonWriteOptions): JsonValue {\n    return message.values.map((v) => Value.toJson(v));\n  }\n  /**\n   * Decode `ListValue` from JSON array.\n   */\n  internalJsonRead(\n    json: JsonValue,\n    options: JsonReadOptions,\n    target?: ListValue,\n  ): ListValue {\n    if (!globalThis.Array.isArray(json))\n      throw new globalThis.Error(\n        'Unable to parse ' +\n          this.typeName +\n          ' from JSON ' +\n          typeofJsonValue(json),\n      );\n    if (!target) target = this.create();\n    let values = json.map((v) => Value.fromJson(v));\n    target.values.push(...values);\n    return target;\n  }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.ListValue\n */\nexport const ListValue = new ListValue$Type();\n", "/* eslint-disable */\nimport type {\n  JsonReadOptions,\n  JsonValue,\n  JsonWriteOptions,\n} from '@protobuf-ts/runtime';\n// @generated by protobuf-ts 2.10.0 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"google/protobuf/timestamp.proto\" (package \"google.protobuf\", syntax proto3)\n// tslint:disable\n//\n// Protocol Buffers - Google's data interchange format\n// Copyright 2008 Google Inc.  All rights reserved.\n// https://developers.google.com/protocol-buffers/\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//     * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//     * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\nimport { MessageType, PbLong, typeofJsonValue } from '@protobuf-ts/runtime';\n\n/**\n * A Timestamp represents a point in time independent of any time zone or local\n * calendar, encoded as a count of seconds and fractions of seconds at\n * nanosecond resolution. The count is relative to an epoch at UTC midnight on\n * January 1, 1970, in the proleptic Gregorian calendar which extends the\n * Gregorian calendar backwards to year one.\n *\n * All minutes are 60 seconds long. Leap seconds are \"smeared\" so that no leap\n * second table is needed for interpretation, using a [24-hour linear\n * smear](https://developers.google.com/time/smear).\n *\n * The range is from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59.999999999Z. By\n * restricting to that range, we ensure that we can convert to and from [RFC\n * 3339](https://www.ietf.org/rfc/rfc3339.txt) date strings.\n *\n * # Examples\n *\n * Example 1: Compute Timestamp from POSIX `time()`.\n *\n *     Timestamp timestamp;\n *     timestamp.set_seconds(time(NULL));\n *     timestamp.set_nanos(0);\n *\n * Example 2: Compute Timestamp from POSIX `gettimeofday()`.\n *\n *     struct timeval tv;\n *     gettimeofday(&tv, NULL);\n *\n *     Timestamp timestamp;\n *     timestamp.set_seconds(tv.tv_sec);\n *     timestamp.set_nanos(tv.tv_usec * 1000);\n *\n * Example 3: Compute Timestamp from Win32 `GetSystemTimeAsFileTime()`.\n *\n *     FILETIME ft;\n *     GetSystemTimeAsFileTime(&ft);\n *     UINT64 ticks = (((UINT64)ft.dwHighDateTime) << 32) | ft.dwLowDateTime;\n *\n *     // A Windows tick is 100 nanoseconds. Windows epoch 1601-01-01T00:00:00Z\n *     // is 11644473600 seconds before Unix epoch 1970-01-01T00:00:00Z.\n *     Timestamp timestamp;\n *     timestamp.set_seconds((INT64) ((ticks / 10000000) - 11644473600LL));\n *     timestamp.set_nanos((INT32) ((ticks % 10000000) * 100));\n *\n * Example 4: Compute Timestamp from Java `System.currentTimeMillis()`.\n *\n *     long millis = System.currentTimeMillis();\n *\n *     Timestamp timestamp = Timestamp.newBuilder().setSeconds(millis / 1000)\n *         .setNanos((int) ((millis % 1000) * 1000000)).build();\n *\n *\n * Example 5: Compute Timestamp from Java `Instant.now()`.\n *\n *     Instant now = Instant.now();\n *\n *     Timestamp timestamp =\n *         Timestamp.newBuilder().setSeconds(now.getEpochSecond())\n *             .setNanos(now.getNano()).build();\n *\n *\n * Example 6: Compute Timestamp from current time in Python.\n *\n *     timestamp = Timestamp()\n *     timestamp.GetCurrentTime()\n *\n * # JSON Mapping\n *\n * In JSON format, the Timestamp type is encoded as a string in the\n * [RFC 3339](https://www.ietf.org/rfc/rfc3339.txt) format. That is, the\n * format is \"{year}-{month}-{day}T{hour}:{min}:{sec}[.{frac_sec}]Z\"\n * where {year} is always expressed using four digits while {month}, {day},\n * {hour}, {min}, and {sec} are zero-padded to two digits each. The fractional\n * seconds, which can go up to 9 digits (i.e. up to 1 nanosecond resolution),\n * are optional. The \"Z\" suffix indicates the timezone (\"UTC\"); the timezone\n * is required. A proto3 JSON serializer should always use UTC (as indicated by\n * \"Z\") when printing the Timestamp type and a proto3 JSON parser should be\n * able to accept both UTC and other timezones (as indicated by an offset).\n *\n * For example, \"2017-01-15T01:30:15.01Z\" encodes 15.01 seconds past\n * 01:30 UTC on January 15, 2017.\n *\n * In JavaScript, one can convert a Date object to this format using the\n * standard\n * [toISOString()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString)\n * method. In Python, a standard `datetime.datetime` object can be converted\n * to this format using\n * [`strftime`](https://docs.python.org/2/library/time.html#time.strftime) with\n * the time format spec '%Y-%m-%dT%H:%M:%S.%fZ'. Likewise, in Java, one can use\n * the Joda Time's [`ISODateTimeFormat.dateTime()`](\n * http://www.joda.org/joda-time/apidocs/org/joda/time/format/ISODateTimeFormat.html#dateTime%2D%2D\n * ) to obtain a formatter capable of generating timestamps in this format.\n *\n *\n *\n * @generated from protobuf message google.protobuf.Timestamp\n */\nexport interface Timestamp {\n  /**\n   * Represents seconds of UTC time since Unix epoch\n   * 1970-01-01T00:00:00Z. Must be from 0001-01-01T00:00:00Z to\n   * 9999-12-31T23:59:59Z inclusive.\n   *\n   * @generated from protobuf field: int64 seconds = 1;\n   */\n  seconds: string;\n  /**\n   * Non-negative fractions of a second at nanosecond resolution. Negative\n   * second values with fractions must still have non-negative nanos values\n   * that count forward in time. Must be from 0 to 999,999,999\n   * inclusive.\n   *\n   * @generated from protobuf field: int32 nanos = 2;\n   */\n  nanos: number;\n}\n// @generated message type with reflection information, may provide speed optimized methods\nclass Timestamp$Type extends MessageType<Timestamp> {\n  constructor() {\n    super('google.protobuf.Timestamp', [\n      { no: 1, name: 'seconds', kind: 'scalar', T: 3 /*ScalarType.INT64*/ },\n      { no: 2, name: 'nanos', kind: 'scalar', T: 5 /*ScalarType.INT32*/ },\n    ]);\n  }\n  /**\n   * Creates a new `Timestamp` for the current time.\n   */\n  now(): Timestamp {\n    const msg = this.create();\n    const ms = Date.now();\n    msg.seconds = PbLong.from(Math.floor(ms / 1000)).toString();\n    msg.nanos = (ms % 1000) * 1000000;\n    return msg;\n  }\n  /**\n   * Converts a `Timestamp` to a JavaScript Date.\n   */\n  toDate(message: Timestamp): Date {\n    return new Date(\n      PbLong.from(message.seconds).toNumber() * 1000 +\n        Math.ceil(message.nanos / 1000000),\n    );\n  }\n  /**\n   * Converts a JavaScript Date to a `Timestamp`.\n   */\n  fromDate(date: Date): Timestamp {\n    const msg = this.create();\n    const ms = date.getTime();\n    msg.seconds = PbLong.from(Math.floor(ms / 1000)).toString();\n    msg.nanos =\n      ((ms % 1000) + (ms < 0 && ms % 1000 !== 0 ? 1000 : 0)) * 1000000;\n    return msg;\n  }\n  /**\n   * In JSON format, the `Timestamp` type is encoded as a string\n   * in the RFC 3339 format.\n   */\n  internalJsonWrite(message: Timestamp, options: JsonWriteOptions): JsonValue {\n    let ms = PbLong.from(message.seconds).toNumber() * 1000;\n    if (\n      ms < Date.parse('0001-01-01T00:00:00Z') ||\n      ms > Date.parse('9999-12-31T23:59:59Z')\n    )\n      throw new Error(\n        'Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.',\n      );\n    if (message.nanos < 0)\n      throw new Error(\n        'Unable to encode invalid Timestamp to JSON. Nanos must not be negative.',\n      );\n    let z = 'Z';\n    if (message.nanos > 0) {\n      let nanosStr = (message.nanos + 1000000000).toString().substring(1);\n      if (nanosStr.substring(3) === '000000')\n        z = '.' + nanosStr.substring(0, 3) + 'Z';\n      else if (nanosStr.substring(6) === '000')\n        z = '.' + nanosStr.substring(0, 6) + 'Z';\n      else z = '.' + nanosStr + 'Z';\n    }\n    return new Date(ms).toISOString().replace('.000Z', z);\n  }\n  /**\n   * In JSON format, the `Timestamp` type is encoded as a string\n   * in the RFC 3339 format.\n   */\n  internalJsonRead(\n    json: JsonValue,\n    options: JsonReadOptions,\n    target?: Timestamp,\n  ): Timestamp {\n    if (typeof json !== 'string')\n      throw new Error(\n        'Unable to parse Timestamp from JSON ' + typeofJsonValue(json) + '.',\n      );\n    let matches = json.match(\n      /^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/,\n    );\n    if (!matches)\n      throw new Error('Unable to parse Timestamp from JSON. Invalid format.');\n    let ms = Date.parse(\n      matches[1] +\n        '-' +\n        matches[2] +\n        '-' +\n        matches[3] +\n        'T' +\n        matches[4] +\n        ':' +\n        matches[5] +\n        ':' +\n        matches[6] +\n        (matches[8] ? matches[8] : 'Z'),\n    );\n    if (Number.isNaN(ms))\n      throw new Error('Unable to parse Timestamp from JSON. Invalid value.');\n    if (\n      ms < Date.parse('0001-01-01T00:00:00Z') ||\n      ms > Date.parse('9999-12-31T23:59:59Z')\n    )\n      throw new globalThis.Error(\n        'Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.',\n      );\n    if (!target) target = this.create();\n    target.seconds = PbLong.from(ms / 1000).toString();\n    target.nanos = 0;\n    if (matches[7])\n      target.nanos =\n        parseInt('1' + matches[7] + '0'.repeat(9 - matches[7].length)) -\n        1000000000;\n    return target;\n  }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.Timestamp\n */\nexport const Timestamp = new Timestamp$Type();\n", "// @generated by protobuf-ts 2.10.0 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"video/sfu/models/models.proto\" (package \"stream.video.sfu.models\", syntax proto3)\n// tslint:disable\nimport { MessageType } from '@protobuf-ts/runtime';\nimport { Struct } from '../../../google/protobuf/struct';\nimport { Timestamp } from '../../../google/protobuf/timestamp';\n\n/**\n * CallState is the current state of the call\n * as seen by an SFU.\n *\n * @generated from protobuf message stream.video.sfu.models.CallState\n */\nexport interface CallState {\n  /**\n   * participants is the list of participants in the call.\n   * In large calls, the list could be truncated in which\n   * case, the list of participants contains fewer participants\n   * than the counts returned in participant_count. Anonymous\n   * participants are **NOT** included in the list.\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.Participant participants = 1;\n   */\n  participants: Participant[];\n  /**\n   * started_at is the time the call session actually started.\n   *\n   * @generated from protobuf field: google.protobuf.Timestamp started_at = 2;\n   */\n  startedAt?: Timestamp;\n  /**\n   * participant_count contains the summary of the counts.\n   *\n   * @generated from protobuf field: stream.video.sfu.models.ParticipantCount participant_count = 3;\n   */\n  participantCount?: ParticipantCount;\n  /**\n   * the list of pins in the call.\n   * Pins are ordered in descending order (most important first).\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.Pin pins = 4;\n   */\n  pins: Pin[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.ParticipantCount\n */\nexport interface ParticipantCount {\n  /**\n   * Total number of participants in the call including\n   * the anonymous participants.\n   *\n   * @generated from protobuf field: uint32 total = 1;\n   */\n  total: number;\n  /**\n   * Total number of anonymous participants in the call.\n   *\n   * @generated from protobuf field: uint32 anonymous = 2;\n   */\n  anonymous: number;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Pin\n */\nexport interface Pin {\n  /**\n   * the user to pin\n   *\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * the user sesion_id to pin, if not provided, applies to all sessions\n   *\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n}\n/**\n * those who are online in the call\n *\n * @generated from protobuf message stream.video.sfu.models.Participant\n */\nexport interface Participant {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * map of track id to track type\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.TrackType published_tracks = 3;\n   */\n  publishedTracks: TrackType[];\n  /**\n   * @generated from protobuf field: google.protobuf.Timestamp joined_at = 4;\n   */\n  joinedAt?: Timestamp;\n  /**\n   * @generated from protobuf field: string track_lookup_prefix = 5;\n   */\n  trackLookupPrefix: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ConnectionQuality connection_quality = 6;\n   */\n  connectionQuality: ConnectionQuality;\n  /**\n   * @generated from protobuf field: bool is_speaking = 7;\n   */\n  isSpeaking: boolean;\n  /**\n   * @generated from protobuf field: bool is_dominant_speaker = 8;\n   */\n  isDominantSpeaker: boolean;\n  /**\n   * @generated from protobuf field: float audio_level = 9;\n   */\n  audioLevel: number;\n  /**\n   * @generated from protobuf field: string name = 10;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: string image = 11;\n   */\n  image: string;\n  /**\n   * @generated from protobuf field: google.protobuf.Struct custom = 12;\n   */\n  custom?: Struct;\n  /**\n   * @generated from protobuf field: repeated string roles = 13;\n   */\n  roles: string[];\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ParticipantSource source = 14;\n   */\n  source: ParticipantSource;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.StreamQuality\n */\nexport interface StreamQuality {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.VideoQuality video_quality = 1;\n   */\n  videoQuality: VideoQuality;\n  /**\n   * @generated from protobuf field: string user_id = 2;\n   */\n  userId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.VideoDimension\n */\nexport interface VideoDimension {\n  /**\n   * @generated from protobuf field: uint32 width = 1;\n   */\n  width: number;\n  /**\n   * @generated from protobuf field: uint32 height = 2;\n   */\n  height: number;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.VideoLayer\n */\nexport interface VideoLayer {\n  /**\n   * for tracks with a single layer, this should be HIGH\n   *\n   * @generated from protobuf field: string rid = 1;\n   */\n  rid: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.VideoDimension video_dimension = 2;\n   */\n  videoDimension?: VideoDimension;\n  /**\n   * target bitrate, server will measure actual\n   *\n   * @generated from protobuf field: uint32 bitrate = 4;\n   */\n  bitrate: number;\n  /**\n   * @generated from protobuf field: uint32 fps = 5;\n   */\n  fps: number;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.VideoQuality quality = 6;\n   */\n  quality: VideoQuality;\n}\n/**\n * SubscribeOption represents the configuration options for subscribing to a track.\n *\n * @generated from protobuf message stream.video.sfu.models.SubscribeOption\n */\nexport interface SubscribeOption {\n  /**\n   * The type of the track being subscribed (e.g., video, screenshare).\n   *\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 1;\n   */\n  trackType: TrackType;\n  /**\n   * The codecs supported by the subscriber for decoding tracks.\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.Codec codecs = 2;\n   */\n  codecs: Codec[];\n}\n/**\n * PublishOption represents the configuration options for publishing a track.\n *\n * @generated from protobuf message stream.video.sfu.models.PublishOption\n */\nexport interface PublishOption {\n  /**\n   * The type of the track being published (e.g., video, screenshare).\n   *\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 1;\n   */\n  trackType: TrackType;\n  /**\n   * The codec to be used for encoding the track (e.g., VP8, VP9, H264).\n   *\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 2;\n   */\n  codec?: Codec;\n  /**\n   * The target bitrate for the published track, in bits per second.\n   *\n   * @generated from protobuf field: int32 bitrate = 3;\n   */\n  bitrate: number;\n  /**\n   * The target frames per second (FPS) for video encoding.\n   *\n   * @generated from protobuf field: int32 fps = 4;\n   */\n  fps: number;\n  /**\n   * The maximum number of spatial layers to send.\n   * - For SVC (e.g., VP9), spatial layers downscale by a factor of 2:\n   *   - 1 layer: full resolution\n   *   - 2 layers: full resolution + half resolution\n   *   - 3 layers: full resolution + half resolution + quarter resolution\n   * - For non-SVC codecs (e.g., VP8/H264), this determines the number of\n   *   encoded resolutions (e.g., quarter, half, full) sent for simulcast.\n   *\n   * @generated from protobuf field: int32 max_spatial_layers = 5;\n   */\n  maxSpatialLayers: number;\n  /**\n   * The maximum number of temporal layers for scalable video coding (SVC).\n   * Temporal layers allow varying frame rates for different bandwidths.\n   *\n   * @generated from protobuf field: int32 max_temporal_layers = 6;\n   */\n  maxTemporalLayers: number;\n  /**\n   * The dimensions of the video (e.g., width and height in pixels).\n   * Spatial layers are based on this base resolution. For example, if the base\n   * resolution is 1280x720:\n   * - Full resolution (1 layer) = 1280x720\n   * - Half resolution (2 layers) = 640x360\n   * - Quarter resolution (3 layers) = 320x180\n   *\n   * @generated from protobuf field: stream.video.sfu.models.VideoDimension video_dimension = 7;\n   */\n  videoDimension?: VideoDimension;\n  /**\n   * The unique identifier for the publish request.\n   * - This `id` is assigned exclusively by the SFU. Any `id` set by the client\n   *   in the `PublishOption` will be ignored and overwritten by the SFU.\n   * - The primary purpose of this `id` is to uniquely identify each publish\n   *   request, even in scenarios where multiple publish requests for the same\n   *   `track_type` and `codec` are active simultaneously.\n   *   For example:\n   *     - A user may publish two tracks of the same type (e.g., video) and codec\n   *       (e.g., VP9) concurrently.\n   * - This uniqueness ensures that individual requests can be managed\n   *   independently. For instance, an `id` is critical when stopping a specific\n   *   publish request without affecting others.\n   *\n   * @generated from protobuf field: int32 id = 8;\n   */\n  id: number;\n  /**\n   * If true, instructs the publisher to send only the highest available simulcast layer,\n   * disabling all lower layers. This applies to simulcast encodings.\n   * For SVC codecs, prefer using the L1T3 (single spatial, 3 temporal layers) mode instead.\n   *\n   * @generated from protobuf field: bool use_single_layer = 9;\n   */\n  useSingleLayer: boolean;\n  /**\n   * Audio bitrate profiles for different audio quality profiles.\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.AudioBitrate audio_bitrate_profiles = 10;\n   */\n  audioBitrateProfiles: AudioBitrate[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Codec\n */\nexport interface Codec {\n  /**\n   * @generated from protobuf field: uint32 payload_type = 16;\n   */\n  payloadType: number;\n  /**\n   * @generated from protobuf field: string name = 10;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: uint32 clock_rate = 14;\n   */\n  clockRate: number;\n  /**\n   * @generated from protobuf field: string encoding_parameters = 15;\n   */\n  encodingParameters: string;\n  /**\n   * @generated from protobuf field: string fmtp = 12;\n   */\n  fmtp: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.ICETrickle\n */\nexport interface ICETrickle {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.PeerType peer_type = 1;\n   */\n  peerType: PeerType;\n  /**\n   * @generated from protobuf field: string ice_candidate = 2;\n   */\n  iceCandidate: string;\n  /**\n   * @generated from protobuf field: string session_id = 3;\n   */\n  sessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.AudioBitrate\n */\nexport interface AudioBitrate {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.AudioBitrateProfile profile = 1;\n   */\n  profile: AudioBitrateProfile;\n  /**\n   * @generated from protobuf field: int32 bitrate = 2;\n   */\n  bitrate: number;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.TrackInfo\n */\nexport interface TrackInfo {\n  /**\n   * @generated from protobuf field: string track_id = 1;\n   */\n  trackId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 2;\n   */\n  trackType: TrackType;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.VideoLayer layers = 5;\n   */\n  layers: VideoLayer[];\n  /**\n   * @generated from protobuf field: string mid = 6;\n   */\n  mid: string;\n  /**\n   * for audio tracks\n   *\n   * @generated from protobuf field: bool dtx = 7;\n   */\n  dtx: boolean;\n  /**\n   * @generated from protobuf field: bool stereo = 8;\n   */\n  stereo: boolean;\n  /**\n   * @generated from protobuf field: bool red = 9;\n   */\n  red: boolean;\n  /**\n   * @generated from protobuf field: bool muted = 10;\n   */\n  muted: boolean;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 11;\n   */\n  codec?: Codec;\n  /**\n   * @generated from protobuf field: int32 publish_option_id = 12;\n   */\n  publishOptionId: number;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Error\n */\nexport interface Error {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ErrorCode code = 1;\n   */\n  code: ErrorCode;\n  /**\n   * @generated from protobuf field: string message = 2;\n   */\n  message: string;\n  /**\n   * @generated from protobuf field: bool should_retry = 3;\n   */\n  shouldRetry: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.ClientDetails\n */\nexport interface ClientDetails {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Sdk sdk = 1;\n   */\n  sdk?: Sdk;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.OS os = 2;\n   */\n  os?: OS;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Browser browser = 3;\n   */\n  browser?: Browser;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Device device = 4;\n   */\n  device?: Device;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Sdk\n */\nexport interface Sdk {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.SdkType type = 1;\n   */\n  type: SdkType;\n  /**\n   * @generated from protobuf field: string major = 2;\n   */\n  major: string;\n  /**\n   * @generated from protobuf field: string minor = 3;\n   */\n  minor: string;\n  /**\n   * @generated from protobuf field: string patch = 4;\n   */\n  patch: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.OS\n */\nexport interface OS {\n  /**\n   * @generated from protobuf field: string name = 1;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: string version = 2;\n   */\n  version: string;\n  /**\n   * @generated from protobuf field: string architecture = 3;\n   */\n  architecture: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Browser\n */\nexport interface Browser {\n  /**\n   * @generated from protobuf field: string name = 1;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: string version = 2;\n   */\n  version: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.RTMPIngress\n */\nexport interface RTMPIngress {\n  /**\n   * Video dimensions and frame rate\n   *\n   * @generated from protobuf field: uint32 width = 1;\n   */\n  width: number;\n  /**\n   * @generated from protobuf field: uint32 height = 2;\n   */\n  height: number;\n  /**\n   * @generated from protobuf field: double frame_rate = 3;\n   */\n  frameRate: number;\n  /**\n   * Client info\n   *\n   * @generated from protobuf field: string software = 4;\n   */\n  software: string; // e.g. \"obs-studio\"\n  /**\n   * @generated from protobuf field: string version = 5;\n   */\n  version: string; // e.g. \"29.1.3\"\n  /**\n   * @generated from protobuf field: string encoder = 6;\n   */\n  encoder: string; // e.g. \"x264\" or \"NVIDIA NVENC\"\n  /**\n   * Connection info\n   *\n   * @generated from protobuf field: string remote_addr = 7;\n   */\n  remoteAddr: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Device\n */\nexport interface Device {\n  /**\n   * @generated from protobuf field: string name = 1;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: string version = 2;\n   */\n  version: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Call\n */\nexport interface Call {\n  /**\n   * the call type\n   *\n   * @generated from protobuf field: string type = 1;\n   */\n  type: string;\n  /**\n   * the call id\n   *\n   * @generated from protobuf field: string id = 2;\n   */\n  id: string;\n  /**\n   * the id of the user that created this call\n   *\n   * @generated from protobuf field: string created_by_user_id = 3;\n   */\n  createdByUserId: string;\n  /**\n   * the id of the current host for this call\n   *\n   * @generated from protobuf field: string host_user_id = 4;\n   */\n  hostUserId: string;\n  /**\n   * @generated from protobuf field: google.protobuf.Struct custom = 5;\n   */\n  custom?: Struct;\n  /**\n   * @generated from protobuf field: google.protobuf.Timestamp created_at = 6;\n   */\n  createdAt?: Timestamp;\n  /**\n   * @generated from protobuf field: google.protobuf.Timestamp updated_at = 7;\n   */\n  updatedAt?: Timestamp;\n}\n/**\n * CallGrants represents the set of permissions given\n * to the user for the current call.\n *\n * @generated from protobuf message stream.video.sfu.models.CallGrants\n */\nexport interface CallGrants {\n  /**\n   * @generated from protobuf field: bool can_publish_audio = 1;\n   */\n  canPublishAudio: boolean;\n  /**\n   * @generated from protobuf field: bool can_publish_video = 2;\n   */\n  canPublishVideo: boolean;\n  /**\n   * @generated from protobuf field: bool can_screenshare = 3;\n   */\n  canScreenshare: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.InputDevices\n */\nexport interface InputDevices {\n  /**\n   * @generated from protobuf field: repeated string available_devices = 1;\n   */\n  availableDevices: string[];\n  /**\n   * @generated from protobuf field: string current_device = 2;\n   */\n  currentDevice: string;\n  /**\n   * @generated from protobuf field: bool is_permitted = 3;\n   */\n  isPermitted: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.AndroidState\n */\nexport interface AndroidState {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.AndroidThermalState thermal_state = 1;\n   */\n  thermalState: AndroidThermalState;\n  /**\n   * @generated from protobuf field: bool is_power_saver_mode = 2;\n   */\n  isPowerSaverMode: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.AppleState\n */\nexport interface AppleState {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.AppleThermalState thermal_state = 1;\n   */\n  thermalState: AppleThermalState;\n  /**\n   * https://developer.apple.com/documentation/foundation/processinfo/1617047-islowpowermodeenabled\n   *\n   * @generated from protobuf field: bool is_low_power_mode_enabled = 2;\n   */\n  isLowPowerModeEnabled: boolean;\n}\n/**\n * PerformanceStats represents the encoding/decoding statistics for a track.\n *\n * @generated from protobuf message stream.video.sfu.models.PerformanceStats\n */\nexport interface PerformanceStats {\n  /**\n   * the type of the track (e.g., video, audio, screen share)\n   *\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 1;\n   */\n  trackType: TrackType;\n  /**\n   * the codec used for the track\n   *\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 2;\n   */\n  codec?: Codec;\n  /**\n   * the average encode/decode time in ms\n   *\n   * @generated from protobuf field: float avg_frame_time_ms = 3;\n   */\n  avgFrameTimeMs: number;\n  /**\n   * the average fps for the track\n   *\n   * @generated from protobuf field: float avg_fps = 4;\n   */\n  avgFps: number;\n  /**\n   * the track dimensions\n   *\n   * @generated from protobuf field: stream.video.sfu.models.VideoDimension video_dimension = 5;\n   */\n  videoDimension?: VideoDimension;\n  /**\n   * the target bitrate for the track, only for published tracks\n   *\n   * @generated from protobuf field: int32 target_bitrate = 6;\n   */\n  targetBitrate: number;\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.PeerType\n */\nexport enum PeerType {\n  /**\n   * todo fix me (marcelo)\n   *\n   * @generated from protobuf enum value: PEER_TYPE_PUBLISHER_UNSPECIFIED = 0;\n   */\n  PUBLISHER_UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: PEER_TYPE_SUBSCRIBER = 1;\n   */\n  SUBSCRIBER = 1,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.ConnectionQuality\n */\nexport enum ConnectionQuality {\n  /**\n   * @generated from protobuf enum value: CONNECTION_QUALITY_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: CONNECTION_QUALITY_POOR = 1;\n   */\n  POOR = 1,\n  /**\n   * @generated from protobuf enum value: CONNECTION_QUALITY_GOOD = 2;\n   */\n  GOOD = 2,\n  /**\n   * @generated from protobuf enum value: CONNECTION_QUALITY_EXCELLENT = 3;\n   */\n  EXCELLENT = 3,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.VideoQuality\n */\nexport enum VideoQuality {\n  /**\n   * @generated from protobuf enum value: VIDEO_QUALITY_LOW_UNSPECIFIED = 0;\n   */\n  LOW_UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: VIDEO_QUALITY_MID = 1;\n   */\n  MID = 1,\n  /**\n   * @generated from protobuf enum value: VIDEO_QUALITY_HIGH = 2;\n   */\n  HIGH = 2,\n  /**\n   * @generated from protobuf enum value: VIDEO_QUALITY_OFF = 3;\n   */\n  OFF = 3,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.TrackType\n */\nexport enum TrackType {\n  /**\n   * @generated from protobuf enum value: TRACK_TYPE_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: TRACK_TYPE_AUDIO = 1;\n   */\n  AUDIO = 1,\n  /**\n   * @generated from protobuf enum value: TRACK_TYPE_VIDEO = 2;\n   */\n  VIDEO = 2,\n  /**\n   * @generated from protobuf enum value: TRACK_TYPE_SCREEN_SHARE = 3;\n   */\n  SCREEN_SHARE = 3,\n  /**\n   * @generated from protobuf enum value: TRACK_TYPE_SCREEN_SHARE_AUDIO = 4;\n   */\n  SCREEN_SHARE_AUDIO = 4,\n}\n/**\n * must be aligned with kit\n *\n * @generated from protobuf enum stream.video.sfu.models.ParticipantSource\n */\nexport enum ParticipantSource {\n  /**\n   * @generated from protobuf enum value: PARTICIPANT_SOURCE_WEBRTC_UNSPECIFIED = 0;\n   */\n  WEBRTC_UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: PARTICIPANT_SOURCE_RTMP = 1;\n   */\n  RTMP = 1,\n  /**\n   * @generated from protobuf enum value: PARTICIPANT_SOURCE_WHIP = 2;\n   */\n  WHIP = 2,\n  /**\n   * @generated from protobuf enum value: PARTICIPANT_SOURCE_SIP = 3;\n   */\n  SIP = 3,\n  /**\n   * @generated from protobuf enum value: PARTICIPANT_SOURCE_RTSP = 4;\n   */\n  RTSP = 4,\n  /**\n   * @generated from protobuf enum value: PARTICIPANT_SOURCE_SRT = 5;\n   */\n  SRT = 5,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.AudioBitrateProfile\n */\nexport enum AudioBitrateProfile {\n  /**\n   * @generated from protobuf enum value: AUDIO_BITRATE_PROFILE_VOICE_STANDARD_UNSPECIFIED = 0;\n   */\n  VOICE_STANDARD_UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: AUDIO_BITRATE_PROFILE_VOICE_HIGH_QUALITY = 1;\n   */\n  VOICE_HIGH_QUALITY = 1,\n  /**\n   * @generated from protobuf enum value: AUDIO_BITRATE_PROFILE_MUSIC_HIGH_QUALITY = 2;\n   */\n  MUSIC_HIGH_QUALITY = 2,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.ErrorCode\n */\nexport enum ErrorCode {\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACK_NOT_FOUND = 100;\n   */\n  PUBLISH_TRACK_NOT_FOUND = 100,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACKS_MISMATCH = 101;\n   */\n  PUBLISH_TRACKS_MISMATCH = 101,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACK_OUT_OF_ORDER = 102;\n   */\n  PUBLISH_TRACK_OUT_OF_ORDER = 102,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND = 103;\n   */\n  PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND = 103,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_LIVE_ENDED = 104;\n   */\n  LIVE_ENDED = 104,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_NOT_FOUND = 200;\n   */\n  PARTICIPANT_NOT_FOUND = 200,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MIGRATING_OUT = 201;\n   */\n  PARTICIPANT_MIGRATING_OUT = 201,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MIGRATION_FAILED = 202;\n   */\n  PARTICIPANT_MIGRATION_FAILED = 202,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MIGRATING = 203;\n   */\n  PARTICIPANT_MIGRATING = 203,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_RECONNECT_FAILED = 204;\n   */\n  PARTICIPANT_RECONNECT_FAILED = 204,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MEDIA_TRANSPORT_FAILURE = 205;\n   */\n  PARTICIPANT_MEDIA_TRANSPORT_FAILURE = 205,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_SIGNAL_LOST = 206;\n   */\n  PARTICIPANT_SIGNAL_LOST = 206,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_CALL_NOT_FOUND = 300;\n   */\n  CALL_NOT_FOUND = 300,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_CALL_PARTICIPANT_LIMIT_REACHED = 301;\n   */\n  CALL_PARTICIPANT_LIMIT_REACHED = 301,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_REQUEST_VALIDATION_FAILED = 400;\n   */\n  REQUEST_VALIDATION_FAILED = 400,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_UNAUTHENTICATED = 401;\n   */\n  UNAUTHENTICATED = 401,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PERMISSION_DENIED = 403;\n   */\n  PERMISSION_DENIED = 403,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_TOO_MANY_REQUESTS = 429;\n   */\n  TOO_MANY_REQUESTS = 429,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_INTERNAL_SERVER_ERROR = 500;\n   */\n  INTERNAL_SERVER_ERROR = 500,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_SFU_SHUTTING_DOWN = 600;\n   */\n  SFU_SHUTTING_DOWN = 600,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_SFU_FULL = 700;\n   */\n  SFU_FULL = 700,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.SdkType\n */\nexport enum SdkType {\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_REACT = 1;\n   */\n  REACT = 1,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_ANGULAR = 2;\n   */\n  ANGULAR = 2,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_ANDROID = 3;\n   */\n  ANDROID = 3,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_IOS = 4;\n   */\n  IOS = 4,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_FLUTTER = 5;\n   */\n  FLUTTER = 5,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_REACT_NATIVE = 6;\n   */\n  REACT_NATIVE = 6,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_UNITY = 7;\n   */\n  UNITY = 7,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_GO = 8;\n   */\n  GO = 8,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_PLAIN_JAVASCRIPT = 9;\n   */\n  PLAIN_JAVASCRIPT = 9,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.TrackUnpublishReason\n */\nexport enum TrackUnpublishReason {\n  /**\n   * Default value which is used when the specific reason\n   * for muting the track is not known.\n   *\n   * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * Represents user muting their tracks.\n   *\n   * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_USER_MUTED = 1;\n   */\n  USER_MUTED = 1,\n  /**\n   * Represents muting the track because the permission to\n   * publish the track has been revoked.\n   *\n   * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_PERMISSION_REVOKED = 2;\n   */\n  PERMISSION_REVOKED = 2,\n  /**\n   * Represents muting the track due to moderation actions.\n   * This is different from permission revoked because the\n   * participant can unmute themselves here whereas in case\n   * of \"permission revoke\" it is not possible until the\n   * call permissions are updated.\n   *\n   * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_MODERATION = 3;\n   */\n  MODERATION = 3,\n}\n/**\n * GoAwayReason represents the reason for the SFU to\n * disconnect the client.\n *\n * @generated from protobuf enum stream.video.sfu.models.GoAwayReason\n */\nexport enum GoAwayReason {\n  /**\n   * @generated from protobuf enum value: GO_AWAY_REASON_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: GO_AWAY_REASON_SHUTTING_DOWN = 1;\n   */\n  SHUTTING_DOWN = 1,\n  /**\n   * @generated from protobuf enum value: GO_AWAY_REASON_REBALANCE = 2;\n   */\n  REBALANCE = 2,\n}\n/**\n * CallEndedReason represents the reason for the call to end.\n *\n * @generated from protobuf enum stream.video.sfu.models.CallEndedReason\n */\nexport enum CallEndedReason {\n  /**\n   * @generated from protobuf enum value: CALL_ENDED_REASON_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: CALL_ENDED_REASON_ENDED = 1;\n   */\n  ENDED = 1,\n  /**\n   * @generated from protobuf enum value: CALL_ENDED_REASON_LIVE_ENDED = 2;\n   */\n  LIVE_ENDED = 2,\n  /**\n   * @generated from protobuf enum value: CALL_ENDED_REASON_KICKED = 3;\n   */\n  KICKED = 3,\n  /**\n   * @generated from protobuf enum value: CALL_ENDED_REASON_SESSION_ENDED = 4;\n   */\n  SESSION_ENDED = 4,\n}\n/**\n * WebsocketReconnectStrategy defines the ws strategies available for handling reconnections.\n *\n * @generated from protobuf enum stream.video.sfu.models.WebsocketReconnectStrategy\n */\nexport enum WebsocketReconnectStrategy {\n  /**\n   * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * Sent after reaching the maximum reconnection attempts, or any other unrecoverable error leading to permanent disconnect.\n   *\n   * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_DISCONNECT = 1;\n   */\n  DISCONNECT = 1,\n  /**\n   * SDK should maintaining existing publisher/subscriber pc instances\n   * and establish a new WebSocket connection.\n   *\n   * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_FAST = 2;\n   */\n  FAST = 2,\n  /**\n   * SDK should obtain new credentials from the coordinator, drops existing pc instances, set a new session_id and initializes\n   * a completely new WebSocket connection, ensuring a comprehensive reset.\n   *\n   * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_REJOIN = 3;\n   */\n  REJOIN = 3,\n  /**\n   * SDK should migrate to a new SFU instance\n   *\n   * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_MIGRATE = 4;\n   */\n  MIGRATE = 4,\n}\n/**\n * AndroidThermalState is reported by the Android API. The full list of values is documented here\n * https://developer.android.com/reference/android/os/PowerManager.html#getCurrentThermalStatus()\n *\n * @generated from protobuf enum stream.video.sfu.models.AndroidThermalState\n */\nexport enum AndroidThermalState {\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_NONE = 1;\n   */\n  NONE = 1,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_LIGHT = 2;\n   */\n  LIGHT = 2,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_MODERATE = 3;\n   */\n  MODERATE = 3,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_SEVERE = 4;\n   */\n  SEVERE = 4,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_CRITICAL = 5;\n   */\n  CRITICAL = 5,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_EMERGENCY = 6;\n   */\n  EMERGENCY = 6,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_SHUTDOWN = 7;\n   */\n  SHUTDOWN = 7,\n}\n/**\n * AppleThermalState is the thermal state as reported by Apple devices when available or applicable to the platform.\n * The full list of states (enum) is available here: https://developer.apple.com/documentation/foundation/processinfo/thermalstate\n *\n * @generated from protobuf enum stream.video.sfu.models.AppleThermalState\n */\nexport enum AppleThermalState {\n  /**\n   * @generated from protobuf enum value: APPLE_THERMAL_STATE_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: APPLE_THERMAL_STATE_NOMINAL = 1;\n   */\n  NOMINAL = 1,\n  /**\n   * @generated from protobuf enum value: APPLE_THERMAL_STATE_FAIR = 2;\n   */\n  FAIR = 2,\n  /**\n   * @generated from protobuf enum value: APPLE_THERMAL_STATE_SERIOUS = 3;\n   */\n  SERIOUS = 3,\n  /**\n   * @generated from protobuf enum value: APPLE_THERMAL_STATE_CRITICAL = 4;\n   */\n  CRITICAL = 4,\n}\n/**\n * ClientCapability defines a feature that client supports\n *\n * @generated from protobuf enum stream.video.sfu.models.ClientCapability\n */\nexport enum ClientCapability {\n  /**\n   * @generated from protobuf enum value: CLIENT_CAPABILITY_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * Enables SFU pausing inbound video\n   *\n   * @generated from protobuf enum value: CLIENT_CAPABILITY_SUBSCRIBER_VIDEO_PAUSE = 1;\n   */\n  SUBSCRIBER_VIDEO_PAUSE = 1,\n}\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallState$Type extends MessageType<CallState> {\n  constructor() {\n    super('stream.video.sfu.models.CallState', [\n      {\n        no: 1,\n        name: 'participants',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => Participant,\n      },\n      { no: 2, name: 'started_at', kind: 'message', T: () => Timestamp },\n      {\n        no: 3,\n        name: 'participant_count',\n        kind: 'message',\n        T: () => ParticipantCount,\n      },\n      {\n        no: 4,\n        name: 'pins',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => Pin,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.CallState\n */\nexport const CallState = new CallState$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantCount$Type extends MessageType<ParticipantCount> {\n  constructor() {\n    super('stream.video.sfu.models.ParticipantCount', [\n      { no: 1, name: 'total', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      { no: 2, name: 'anonymous', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.ParticipantCount\n */\nexport const ParticipantCount = new ParticipantCount$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Pin$Type extends MessageType<Pin> {\n  constructor() {\n    super('stream.video.sfu.models.Pin', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Pin\n */\nexport const Pin = new Pin$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Participant$Type extends MessageType<Participant> {\n  constructor() {\n    super('stream.video.sfu.models.Participant', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'published_tracks',\n        kind: 'enum',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 4, name: 'joined_at', kind: 'message', T: () => Timestamp },\n      {\n        no: 5,\n        name: 'track_lookup_prefix',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 6,\n        name: 'connection_quality',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.ConnectionQuality',\n          ConnectionQuality,\n          'CONNECTION_QUALITY_',\n        ],\n      },\n      { no: 7, name: 'is_speaking', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      {\n        no: 8,\n        name: 'is_dominant_speaker',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n      { no: 9, name: 'audio_level', kind: 'scalar', T: 2 /*ScalarType.FLOAT*/ },\n      { no: 10, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 11, name: 'image', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 12, name: 'custom', kind: 'message', T: () => Struct },\n      {\n        no: 13,\n        name: 'roles',\n        kind: 'scalar',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 14,\n        name: 'source',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.ParticipantSource',\n          ParticipantSource,\n          'PARTICIPANT_SOURCE_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Participant\n */\nexport const Participant = new Participant$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass StreamQuality$Type extends MessageType<StreamQuality> {\n  constructor() {\n    super('stream.video.sfu.models.StreamQuality', [\n      {\n        no: 1,\n        name: 'video_quality',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.VideoQuality',\n          VideoQuality,\n          'VIDEO_QUALITY_',\n        ],\n      },\n      { no: 2, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.StreamQuality\n */\nexport const StreamQuality = new StreamQuality$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoDimension$Type extends MessageType<VideoDimension> {\n  constructor() {\n    super('stream.video.sfu.models.VideoDimension', [\n      { no: 1, name: 'width', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      { no: 2, name: 'height', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.VideoDimension\n */\nexport const VideoDimension = new VideoDimension$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoLayer$Type extends MessageType<VideoLayer> {\n  constructor() {\n    super('stream.video.sfu.models.VideoLayer', [\n      { no: 1, name: 'rid', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 2,\n        name: 'video_dimension',\n        kind: 'message',\n        T: () => VideoDimension,\n      },\n      { no: 4, name: 'bitrate', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      { no: 5, name: 'fps', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      {\n        no: 6,\n        name: 'quality',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.VideoQuality',\n          VideoQuality,\n          'VIDEO_QUALITY_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.VideoLayer\n */\nexport const VideoLayer = new VideoLayer$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SubscribeOption$Type extends MessageType<SubscribeOption> {\n  constructor() {\n    super('stream.video.sfu.models.SubscribeOption', [\n      {\n        no: 1,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      {\n        no: 2,\n        name: 'codecs',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => Codec,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.SubscribeOption\n */\nexport const SubscribeOption = new SubscribeOption$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass PublishOption$Type extends MessageType<PublishOption> {\n  constructor() {\n    super('stream.video.sfu.models.PublishOption', [\n      {\n        no: 1,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 2, name: 'codec', kind: 'message', T: () => Codec },\n      { no: 3, name: 'bitrate', kind: 'scalar', T: 5 /*ScalarType.INT32*/ },\n      { no: 4, name: 'fps', kind: 'scalar', T: 5 /*ScalarType.INT32*/ },\n      {\n        no: 5,\n        name: 'max_spatial_layers',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n      {\n        no: 6,\n        name: 'max_temporal_layers',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n      {\n        no: 7,\n        name: 'video_dimension',\n        kind: 'message',\n        T: () => VideoDimension,\n      },\n      { no: 8, name: 'id', kind: 'scalar', T: 5 /*ScalarType.INT32*/ },\n      {\n        no: 9,\n        name: 'use_single_layer',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n      {\n        no: 10,\n        name: 'audio_bitrate_profiles',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => AudioBitrate,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.PublishOption\n */\nexport const PublishOption = new PublishOption$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Codec$Type extends MessageType<Codec> {\n  constructor() {\n    super('stream.video.sfu.models.Codec', [\n      {\n        no: 16,\n        name: 'payload_type',\n        kind: 'scalar',\n        T: 13 /*ScalarType.UINT32*/,\n      },\n      { no: 10, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 14,\n        name: 'clock_rate',\n        kind: 'scalar',\n        T: 13 /*ScalarType.UINT32*/,\n      },\n      {\n        no: 15,\n        name: 'encoding_parameters',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 12, name: 'fmtp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Codec\n */\nexport const Codec = new Codec$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICETrickle$Type extends MessageType<ICETrickle> {\n  constructor() {\n    super('stream.video.sfu.models.ICETrickle', [\n      {\n        no: 1,\n        name: 'peer_type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.PeerType', PeerType, 'PEER_TYPE_'],\n      },\n      {\n        no: 2,\n        name: 'ice_candidate',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 3, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.ICETrickle\n */\nexport const ICETrickle = new ICETrickle$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioBitrate$Type extends MessageType<AudioBitrate> {\n  constructor() {\n    super('stream.video.sfu.models.AudioBitrate', [\n      {\n        no: 1,\n        name: 'profile',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.AudioBitrateProfile',\n          AudioBitrateProfile,\n          'AUDIO_BITRATE_PROFILE_',\n        ],\n      },\n      { no: 2, name: 'bitrate', kind: 'scalar', T: 5 /*ScalarType.INT32*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.AudioBitrate\n */\nexport const AudioBitrate = new AudioBitrate$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackInfo$Type extends MessageType<TrackInfo> {\n  constructor() {\n    super('stream.video.sfu.models.TrackInfo', [\n      { no: 1, name: 'track_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 2,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      {\n        no: 5,\n        name: 'layers',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => VideoLayer,\n      },\n      { no: 6, name: 'mid', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 7, name: 'dtx', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 8, name: 'stereo', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 9, name: 'red', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 10, name: 'muted', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 11, name: 'codec', kind: 'message', T: () => Codec },\n      {\n        no: 12,\n        name: 'publish_option_id',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.TrackInfo\n */\nexport const TrackInfo = new TrackInfo$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Error$Type extends MessageType<Error> {\n  constructor() {\n    super('stream.video.sfu.models.Error', [\n      {\n        no: 1,\n        name: 'code',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.ErrorCode',\n          ErrorCode,\n          'ERROR_CODE_',\n        ],\n      },\n      { no: 2, name: 'message', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 3, name: 'should_retry', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Error\n */\nexport const Error = new Error$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ClientDetails$Type extends MessageType<ClientDetails> {\n  constructor() {\n    super('stream.video.sfu.models.ClientDetails', [\n      { no: 1, name: 'sdk', kind: 'message', T: () => Sdk },\n      { no: 2, name: 'os', kind: 'message', T: () => OS },\n      { no: 3, name: 'browser', kind: 'message', T: () => Browser },\n      { no: 4, name: 'device', kind: 'message', T: () => Device },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.ClientDetails\n */\nexport const ClientDetails = new ClientDetails$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Sdk$Type extends MessageType<Sdk> {\n  constructor() {\n    super('stream.video.sfu.models.Sdk', [\n      {\n        no: 1,\n        name: 'type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.SdkType', SdkType, 'SDK_TYPE_'],\n      },\n      { no: 2, name: 'major', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 3, name: 'minor', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 4, name: 'patch', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Sdk\n */\nexport const Sdk = new Sdk$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass OS$Type extends MessageType<OS> {\n  constructor() {\n    super('stream.video.sfu.models.OS', [\n      { no: 1, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'version', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'architecture',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.OS\n */\nexport const OS = new OS$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Browser$Type extends MessageType<Browser> {\n  constructor() {\n    super('stream.video.sfu.models.Browser', [\n      { no: 1, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'version', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Browser\n */\nexport const Browser = new Browser$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass RTMPIngress$Type extends MessageType<RTMPIngress> {\n  constructor() {\n    super('stream.video.sfu.models.RTMPIngress', [\n      { no: 1, name: 'width', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      { no: 2, name: 'height', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      { no: 3, name: 'frame_rate', kind: 'scalar', T: 1 /*ScalarType.DOUBLE*/ },\n      { no: 4, name: 'software', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 5, name: 'version', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 6, name: 'encoder', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 7,\n        name: 'remote_addr',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.RTMPIngress\n */\nexport const RTMPIngress = new RTMPIngress$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Device$Type extends MessageType<Device> {\n  constructor() {\n    super('stream.video.sfu.models.Device', [\n      { no: 1, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'version', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Device\n */\nexport const Device = new Device$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Call$Type extends MessageType<Call> {\n  constructor() {\n    super('stream.video.sfu.models.Call', [\n      { no: 1, name: 'type', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'created_by_user_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 4,\n        name: 'host_user_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 5, name: 'custom', kind: 'message', T: () => Struct },\n      { no: 6, name: 'created_at', kind: 'message', T: () => Timestamp },\n      { no: 7, name: 'updated_at', kind: 'message', T: () => Timestamp },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Call\n */\nexport const Call = new Call$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallGrants$Type extends MessageType<CallGrants> {\n  constructor() {\n    super('stream.video.sfu.models.CallGrants', [\n      {\n        no: 1,\n        name: 'can_publish_audio',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n      {\n        no: 2,\n        name: 'can_publish_video',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n      {\n        no: 3,\n        name: 'can_screenshare',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.CallGrants\n */\nexport const CallGrants = new CallGrants$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass InputDevices$Type extends MessageType<InputDevices> {\n  constructor() {\n    super('stream.video.sfu.models.InputDevices', [\n      {\n        no: 1,\n        name: 'available_devices',\n        kind: 'scalar',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 2,\n        name: 'current_device',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 3, name: 'is_permitted', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.InputDevices\n */\nexport const InputDevices = new InputDevices$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AndroidState$Type extends MessageType<AndroidState> {\n  constructor() {\n    super('stream.video.sfu.models.AndroidState', [\n      {\n        no: 1,\n        name: 'thermal_state',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.AndroidThermalState',\n          AndroidThermalState,\n          'ANDROID_THERMAL_STATE_',\n        ],\n      },\n      {\n        no: 2,\n        name: 'is_power_saver_mode',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.AndroidState\n */\nexport const AndroidState = new AndroidState$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AppleState$Type extends MessageType<AppleState> {\n  constructor() {\n    super('stream.video.sfu.models.AppleState', [\n      {\n        no: 1,\n        name: 'thermal_state',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.AppleThermalState',\n          AppleThermalState,\n          'APPLE_THERMAL_STATE_',\n        ],\n      },\n      {\n        no: 2,\n        name: 'is_low_power_mode_enabled',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.AppleState\n */\nexport const AppleState = new AppleState$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass PerformanceStats$Type extends MessageType<PerformanceStats> {\n  constructor() {\n    super('stream.video.sfu.models.PerformanceStats', [\n      {\n        no: 1,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 2, name: 'codec', kind: 'message', T: () => Codec },\n      {\n        no: 3,\n        name: 'avg_frame_time_ms',\n        kind: 'scalar',\n        T: 2 /*ScalarType.FLOAT*/,\n      },\n      { no: 4, name: 'avg_fps', kind: 'scalar', T: 2 /*ScalarType.FLOAT*/ },\n      {\n        no: 5,\n        name: 'video_dimension',\n        kind: 'message',\n        T: () => VideoDimension,\n      },\n      {\n        no: 6,\n        name: 'target_bitrate',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.PerformanceStats\n */\nexport const PerformanceStats = new PerformanceStats$Type();\n", "// @generated by protobuf-ts 2.10.0 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"video/sfu/signal_rpc/signal.proto\" (package \"stream.video.sfu.signal\", syntax proto3)\n// tslint:disable\nimport {\n  AndroidState,\n  AppleState,\n  Error,\n  ICETrickle,\n  InputDevices,\n  PeerType,\n  PerformanceStats,\n  RTMPIngress,\n  TrackInfo,\n  TrackType,\n  VideoDimension,\n  WebsocketReconnectStrategy,\n} from '../models/models';\nimport { ServiceType } from '@protobuf-ts/runtime-rpc';\nimport { MessageType } from '@protobuf-ts/runtime';\n\n/**\n * @generated from protobuf message stream.video.sfu.signal.StartNoiseCancellationRequest\n */\nexport interface StartNoiseCancellationRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.StartNoiseCancellationResponse\n */\nexport interface StartNoiseCancellationResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 1;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.StopNoiseCancellationRequest\n */\nexport interface StopNoiseCancellationRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.StopNoiseCancellationResponse\n */\nexport interface StopNoiseCancellationResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 1;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.Reconnection\n */\nexport interface Reconnection {\n  /**\n   * @generated from protobuf field: float time_seconds = 1;\n   */\n  timeSeconds: number;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.WebsocketReconnectStrategy strategy = 2;\n   */\n  strategy: WebsocketReconnectStrategy;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.Telemetry\n */\nexport interface Telemetry {\n  /**\n   * @generated from protobuf oneof: data\n   */\n  data:\n    | {\n        oneofKind: 'connectionTimeSeconds';\n        /**\n         * @generated from protobuf field: float connection_time_seconds = 1;\n         */\n        connectionTimeSeconds: number;\n      }\n    | {\n        oneofKind: 'reconnection';\n        /**\n         * @generated from protobuf field: stream.video.sfu.signal.Reconnection reconnection = 2;\n         */\n        reconnection: Reconnection;\n      }\n    | {\n        oneofKind: undefined;\n      };\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SendStatsRequest\n */\nexport interface SendStatsRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: string subscriber_stats = 2;\n   */\n  subscriberStats: string;\n  /**\n   * @generated from protobuf field: string publisher_stats = 3;\n   */\n  publisherStats: string;\n  /**\n   * @generated from protobuf field: string webrtc_version = 4;\n   */\n  webrtcVersion: string;\n  /**\n   * @generated from protobuf field: string sdk = 5;\n   */\n  sdk: string;\n  /**\n   * @generated from protobuf field: string sdk_version = 6;\n   */\n  sdkVersion: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.InputDevices audio_devices = 7;\n   */\n  audioDevices?: InputDevices;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.InputDevices video_devices = 8;\n   */\n  videoDevices?: InputDevices;\n  /**\n   * @generated from protobuf oneof: device_state\n   */\n  deviceState:\n    | {\n        oneofKind: 'android';\n        /**\n         * @generated from protobuf field: stream.video.sfu.models.AndroidState android = 9;\n         */\n        android: AndroidState;\n      }\n    | {\n        oneofKind: 'apple';\n        /**\n         * @generated from protobuf field: stream.video.sfu.models.AppleState apple = 10;\n         */\n        apple: AppleState;\n      }\n    | {\n        oneofKind: undefined;\n      };\n  /**\n   * @generated from protobuf field: stream.video.sfu.signal.Telemetry telemetry = 11;\n   */\n  telemetry?: Telemetry;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.RTMPIngress rtmp = 12;\n   */\n  rtmp?: RTMPIngress;\n  /**\n   * @deprecated\n   * @generated from protobuf field: string subscriber_rtc_stats = 13 [deprecated = true];\n   */\n  subscriberRtcStats: string;\n  /**\n   * @deprecated\n   * @generated from protobuf field: string publisher_rtc_stats = 14 [deprecated = true];\n   */\n  publisherRtcStats: string;\n  /**\n   * @generated from protobuf field: string rtc_stats = 15;\n   */\n  rtcStats: string;\n  /**\n   * Encode stats for the publisher\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.PerformanceStats encode_stats = 16;\n   */\n  encodeStats: PerformanceStats[];\n  /**\n   * Decode stats for the subscriber\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.PerformanceStats decode_stats = 17;\n   */\n  decodeStats: PerformanceStats[];\n  /**\n   * user_session id can change during reconnects, this helps us to\n   * identify the user across reconnects and should remain consistent until the user explicitly\n   * disconnects, is kicked or the call is ended.\n   *\n   * @generated from protobuf field: string unified_session_id = 18;\n   */\n  unifiedSessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SendStatsResponse\n */\nexport interface SendStatsResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 1;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.ICERestartRequest\n */\nexport interface ICERestartRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.PeerType peer_type = 2;\n   */\n  peerType: PeerType;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.ICERestartResponse\n */\nexport interface ICERestartResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 1;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.UpdateMuteStatesRequest\n */\nexport interface UpdateMuteStatesRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.signal.TrackMuteState mute_states = 3;\n   */\n  muteStates: TrackMuteState[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.UpdateMuteStatesResponse\n */\nexport interface UpdateMuteStatesResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.TrackMuteState\n */\nexport interface TrackMuteState {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 1;\n   */\n  trackType: TrackType;\n  /**\n   * @generated from protobuf field: bool muted = 2;\n   */\n  muted: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.AudioMuteChanged\n */\nexport interface AudioMuteChanged {\n  /**\n   * @generated from protobuf field: bool muted = 1;\n   */\n  muted: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.VideoMuteChanged\n */\nexport interface VideoMuteChanged {\n  /**\n   * @generated from protobuf field: bool muted = 2;\n   */\n  muted: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.UpdateSubscriptionsRequest\n */\nexport interface UpdateSubscriptionsRequest {\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.signal.TrackSubscriptionDetails tracks = 3;\n   */\n  tracks: TrackSubscriptionDetails[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.UpdateSubscriptionsResponse\n */\nexport interface UpdateSubscriptionsResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.TrackSubscriptionDetails\n */\nexport interface TrackSubscriptionDetails {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 3;\n   */\n  trackType: TrackType;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.VideoDimension dimension = 4;\n   */\n  dimension?: VideoDimension;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SendAnswerRequest\n */\nexport interface SendAnswerRequest {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.PeerType peer_type = 1;\n   */\n  peerType: PeerType;\n  /**\n   * @generated from protobuf field: string sdp = 2;\n   */\n  sdp: string;\n  /**\n   * @generated from protobuf field: string session_id = 3;\n   */\n  sessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SendAnswerResponse\n */\nexport interface SendAnswerResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.ICETrickleResponse\n */\nexport interface ICETrickleResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SetPublisherRequest\n */\nexport interface SetPublisherRequest {\n  /**\n   * sdp offer\n   *\n   * @generated from protobuf field: string sdp = 1;\n   */\n  sdp: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.TrackInfo tracks = 3;\n   */\n  tracks: TrackInfo[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SetPublisherResponse\n */\nexport interface SetPublisherResponse {\n  /**\n   * sdp answer\n   *\n   * @generated from protobuf field: string sdp = 1;\n   */\n  sdp: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: bool ice_restart = 3;\n   */\n  iceRestart: boolean;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error;\n}\n// @generated message type with reflection information, may provide speed optimized methods\nclass StartNoiseCancellationRequest$Type extends MessageType<StartNoiseCancellationRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.StartNoiseCancellationRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.StartNoiseCancellationRequest\n */\nexport const StartNoiseCancellationRequest =\n  new StartNoiseCancellationRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass StartNoiseCancellationResponse$Type extends MessageType<StartNoiseCancellationResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.StartNoiseCancellationResponse', [\n      { no: 1, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.StartNoiseCancellationResponse\n */\nexport const StartNoiseCancellationResponse =\n  new StartNoiseCancellationResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass StopNoiseCancellationRequest$Type extends MessageType<StopNoiseCancellationRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.StopNoiseCancellationRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.StopNoiseCancellationRequest\n */\nexport const StopNoiseCancellationRequest =\n  new StopNoiseCancellationRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass StopNoiseCancellationResponse$Type extends MessageType<StopNoiseCancellationResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.StopNoiseCancellationResponse', [\n      { no: 1, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.StopNoiseCancellationResponse\n */\nexport const StopNoiseCancellationResponse =\n  new StopNoiseCancellationResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Reconnection$Type extends MessageType<Reconnection> {\n  constructor() {\n    super('stream.video.sfu.signal.Reconnection', [\n      {\n        no: 1,\n        name: 'time_seconds',\n        kind: 'scalar',\n        T: 2 /*ScalarType.FLOAT*/,\n      },\n      {\n        no: 2,\n        name: 'strategy',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.WebsocketReconnectStrategy',\n          WebsocketReconnectStrategy,\n          'WEBSOCKET_RECONNECT_STRATEGY_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.Reconnection\n */\nexport const Reconnection = new Reconnection$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Telemetry$Type extends MessageType<Telemetry> {\n  constructor() {\n    super('stream.video.sfu.signal.Telemetry', [\n      {\n        no: 1,\n        name: 'connection_time_seconds',\n        kind: 'scalar',\n        oneof: 'data',\n        T: 2 /*ScalarType.FLOAT*/,\n      },\n      {\n        no: 2,\n        name: 'reconnection',\n        kind: 'message',\n        oneof: 'data',\n        T: () => Reconnection,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.Telemetry\n */\nexport const Telemetry = new Telemetry$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendStatsRequest$Type extends MessageType<SendStatsRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.SendStatsRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 2,\n        name: 'subscriber_stats',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 3,\n        name: 'publisher_stats',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 4,\n        name: 'webrtc_version',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 5, name: 'sdk', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 6,\n        name: 'sdk_version',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 7, name: 'audio_devices', kind: 'message', T: () => InputDevices },\n      { no: 8, name: 'video_devices', kind: 'message', T: () => InputDevices },\n      {\n        no: 9,\n        name: 'android',\n        kind: 'message',\n        oneof: 'deviceState',\n        T: () => AndroidState,\n      },\n      {\n        no: 10,\n        name: 'apple',\n        kind: 'message',\n        oneof: 'deviceState',\n        T: () => AppleState,\n      },\n      { no: 11, name: 'telemetry', kind: 'message', T: () => Telemetry },\n      { no: 12, name: 'rtmp', kind: 'message', T: () => RTMPIngress },\n      {\n        no: 13,\n        name: 'subscriber_rtc_stats',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 14,\n        name: 'publisher_rtc_stats',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 15, name: 'rtc_stats', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 16,\n        name: 'encode_stats',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => PerformanceStats,\n      },\n      {\n        no: 17,\n        name: 'decode_stats',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => PerformanceStats,\n      },\n      {\n        no: 18,\n        name: 'unified_session_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendStatsRequest\n */\nexport const SendStatsRequest = new SendStatsRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendStatsResponse$Type extends MessageType<SendStatsResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.SendStatsResponse', [\n      { no: 1, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendStatsResponse\n */\nexport const SendStatsResponse = new SendStatsResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICERestartRequest$Type extends MessageType<ICERestartRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.ICERestartRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 2,\n        name: 'peer_type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.PeerType', PeerType, 'PEER_TYPE_'],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.ICERestartRequest\n */\nexport const ICERestartRequest = new ICERestartRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICERestartResponse$Type extends MessageType<ICERestartResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.ICERestartResponse', [\n      { no: 1, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.ICERestartResponse\n */\nexport const ICERestartResponse = new ICERestartResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateMuteStatesRequest$Type extends MessageType<UpdateMuteStatesRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.UpdateMuteStatesRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'mute_states',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => TrackMuteState,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateMuteStatesRequest\n */\nexport const UpdateMuteStatesRequest = new UpdateMuteStatesRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateMuteStatesResponse$Type extends MessageType<UpdateMuteStatesResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.UpdateMuteStatesResponse', [\n      { no: 4, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateMuteStatesResponse\n */\nexport const UpdateMuteStatesResponse = new UpdateMuteStatesResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackMuteState$Type extends MessageType<TrackMuteState> {\n  constructor() {\n    super('stream.video.sfu.signal.TrackMuteState', [\n      {\n        no: 1,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 2, name: 'muted', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.TrackMuteState\n */\nexport const TrackMuteState = new TrackMuteState$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioMuteChanged$Type extends MessageType<AudioMuteChanged> {\n  constructor() {\n    super('stream.video.sfu.signal.AudioMuteChanged', [\n      { no: 1, name: 'muted', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.AudioMuteChanged\n */\nexport const AudioMuteChanged = new AudioMuteChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoMuteChanged$Type extends MessageType<VideoMuteChanged> {\n  constructor() {\n    super('stream.video.sfu.signal.VideoMuteChanged', [\n      { no: 2, name: 'muted', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.VideoMuteChanged\n */\nexport const VideoMuteChanged = new VideoMuteChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateSubscriptionsRequest$Type extends MessageType<UpdateSubscriptionsRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.UpdateSubscriptionsRequest', [\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'tracks',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => TrackSubscriptionDetails,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateSubscriptionsRequest\n */\nexport const UpdateSubscriptionsRequest = new UpdateSubscriptionsRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateSubscriptionsResponse$Type extends MessageType<UpdateSubscriptionsResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.UpdateSubscriptionsResponse', [\n      { no: 4, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateSubscriptionsResponse\n */\nexport const UpdateSubscriptionsResponse =\n  new UpdateSubscriptionsResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackSubscriptionDetails$Type extends MessageType<TrackSubscriptionDetails> {\n  constructor() {\n    super('stream.video.sfu.signal.TrackSubscriptionDetails', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 4, name: 'dimension', kind: 'message', T: () => VideoDimension },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.TrackSubscriptionDetails\n */\nexport const TrackSubscriptionDetails = new TrackSubscriptionDetails$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendAnswerRequest$Type extends MessageType<SendAnswerRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.SendAnswerRequest', [\n      {\n        no: 1,\n        name: 'peer_type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.PeerType', PeerType, 'PEER_TYPE_'],\n      },\n      { no: 2, name: 'sdp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 3, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendAnswerRequest\n */\nexport const SendAnswerRequest = new SendAnswerRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendAnswerResponse$Type extends MessageType<SendAnswerResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.SendAnswerResponse', [\n      { no: 4, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendAnswerResponse\n */\nexport const SendAnswerResponse = new SendAnswerResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICETrickleResponse$Type extends MessageType<ICETrickleResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.ICETrickleResponse', [\n      { no: 4, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.ICETrickleResponse\n */\nexport const ICETrickleResponse = new ICETrickleResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SetPublisherRequest$Type extends MessageType<SetPublisherRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.SetPublisherRequest', [\n      { no: 1, name: 'sdp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'tracks',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => TrackInfo,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SetPublisherRequest\n */\nexport const SetPublisherRequest = new SetPublisherRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SetPublisherResponse$Type extends MessageType<SetPublisherResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.SetPublisherResponse', [\n      { no: 1, name: 'sdp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 3, name: 'ice_restart', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 4, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SetPublisherResponse\n */\nexport const SetPublisherResponse = new SetPublisherResponse$Type();\n/**\n * @generated ServiceType for protobuf service stream.video.sfu.signal.SignalServer\n */\nexport const SignalServer = new ServiceType(\n  'stream.video.sfu.signal.SignalServer',\n  [\n    {\n      name: 'SetPublisher',\n      options: {},\n      I: SetPublisherRequest,\n      O: SetPublisherResponse,\n    },\n    {\n      name: 'SendAnswer',\n      options: {},\n      I: SendAnswerRequest,\n      O: SendAnswerResponse,\n    },\n    { name: 'IceTrickle', options: {}, I: ICETrickle, O: ICETrickleResponse },\n    {\n      name: 'UpdateSubscriptions',\n      options: {},\n      I: UpdateSubscriptionsRequest,\n      O: UpdateSubscriptionsResponse,\n    },\n    {\n      name: 'UpdateMuteStates',\n      options: {},\n      I: UpdateMuteStatesRequest,\n      O: UpdateMuteStatesResponse,\n    },\n    {\n      name: 'IceRestart',\n      options: {},\n      I: ICERestartRequest,\n      O: ICERestartResponse,\n    },\n    {\n      name: 'SendStats',\n      options: {},\n      I: SendStatsRequest,\n      O: SendStatsResponse,\n    },\n    {\n      name: 'StartNoiseCancellation',\n      options: {},\n      I: StartNoiseCancellationRequest,\n      O: StartNoiseCancellationResponse,\n    },\n    {\n      name: 'StopNoiseCancellation',\n      options: {},\n      I: StopNoiseCancellationRequest,\n      O: StopNoiseCancellationResponse,\n    },\n  ],\n);\n", "// @generated by protobuf-ts 2.10.0 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"video/sfu/event/events.proto\" (package \"stream.video.sfu.event\", syntax proto3)\n// tslint:disable\nimport { MessageType } from '@protobuf-ts/runtime';\nimport {\n  CallEndedReason,\n  CallGrants,\n  CallState,\n  ClientCapability,\n  ClientDetails,\n  Codec,\n  ConnectionQuality,\n  Error as Error$,\n  GoAwayReason,\n  ICETrickle as ICETrickle$,\n  Participant,\n  ParticipantCount,\n  ParticipantSource,\n  PeerType,\n  Pin,\n  PublishOption,\n  SubscribeOption,\n  TrackInfo,\n  TrackType,\n  TrackUnpublishReason,\n  WebsocketReconnectStrategy,\n} from '../models/models';\nimport { TrackSubscriptionDetails } from '../signal_rpc/signal';\n\n/**\n * SFUEvent is a message that is sent from the SFU to the client.\n *\n * @generated from protobuf message stream.video.sfu.event.SfuEvent\n */\nexport interface SfuEvent {\n  /**\n   * @generated from protobuf oneof: event_payload\n   */\n  eventPayload:\n    | {\n        oneofKind: 'subscriberOffer';\n        /**\n         * SubscriberOffer sends the SDP offer for establishing the\n         * subscriber PeerConnection.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.SubscriberOffer subscriber_offer = 1;\n         */\n        subscriberOffer: SubscriberOffer;\n      }\n    | {\n        oneofKind: 'publisherAnswer';\n        /**\n         * PublisherAnswer sends the SDP answer to the offer sent by\n         * the client for establishing the Publisher PeerConnection.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.PublisherAnswer publisher_answer = 2;\n         */\n        publisherAnswer: PublisherAnswer;\n      }\n    | {\n        oneofKind: 'connectionQualityChanged';\n        /**\n         * ConnectionQualityChanged is sent to inform the connection\n         * quality of the participants in the call. It does not have\n         * to contain the full list of call participants in it.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ConnectionQualityChanged connection_quality_changed = 3;\n         */\n        connectionQualityChanged: ConnectionQualityChanged;\n      }\n    | {\n        oneofKind: 'audioLevelChanged';\n        /**\n         * AudioLevelChanged is sent for change in audio levels of\n         * the participants.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.AudioLevelChanged audio_level_changed = 4;\n         */\n        audioLevelChanged: AudioLevelChanged;\n      }\n    | {\n        oneofKind: 'iceTrickle';\n        /**\n         * ICETrickle contains the ICE candidate required to establish\n         * the ICE transport: part of establishing the PeerConnection\n         * and also for ICE restarts.\n         *\n         * @generated from protobuf field: stream.video.sfu.models.ICETrickle ice_trickle = 5;\n         */\n        iceTrickle: ICETrickle$;\n      }\n    | {\n        oneofKind: 'changePublishQuality';\n        /**\n         * ChangePublishQuality advises the publisher to switch on/off\n         * various qualities of their video stream based on the subscription.\n         * This is done to save the bandwidth and the CPU of the publisher.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ChangePublishQuality change_publish_quality = 6;\n         */\n        changePublishQuality: ChangePublishQuality;\n      }\n    | {\n        oneofKind: 'participantJoined';\n        /**\n         * ParticipantJoined notifies the client that a new participant\n         * has joined the call. This is not sent for anonymous users.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ParticipantJoined participant_joined = 10;\n         */\n        participantJoined: ParticipantJoined;\n      }\n    | {\n        oneofKind: 'participantLeft';\n        /**\n         * ParticipantLeft notifies the client that a call participant\n         * has left the call. This is not sent for anonymous users.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ParticipantLeft participant_left = 11;\n         */\n        participantLeft: ParticipantLeft;\n      }\n    | {\n        oneofKind: 'dominantSpeakerChanged';\n        /**\n         * DominantSpeakerChanged notifies the client about the current\n         * dominant speaker. This is required for certain use cases like\n         * the spotlight view.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.DominantSpeakerChanged dominant_speaker_changed = 12;\n         */\n        dominantSpeakerChanged: DominantSpeakerChanged;\n      }\n    | {\n        oneofKind: 'joinResponse';\n        /**\n         * JoinResponse acknowledges a participant successfully joining\n         * the call. This is sent in response to the JoinRequest.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.JoinResponse join_response = 13;\n         */\n        joinResponse: JoinResponse;\n      }\n    | {\n        oneofKind: 'healthCheckResponse';\n        /**\n         * HealthCheckResponse is sent in response to the HealthCheckRequest.\n         * It contains the participant count in the call.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.HealthCheckResponse health_check_response = 14;\n         */\n        healthCheckResponse: HealthCheckResponse;\n      }\n    | {\n        oneofKind: 'trackPublished';\n        /**\n         * TrackPublished is sent when a new track (like audio, video, screenshare)\n         * is published by a participant in the call. It is also sent on mute/unmute.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.TrackPublished track_published = 16;\n         */\n        trackPublished: TrackPublished;\n      }\n    | {\n        oneofKind: 'trackUnpublished';\n        /**\n         * TrackUnpublished is sent when a track (like audio, video, screenshare)\n         * is no longer published. It is sent on muting a track or when the participant\n         * is leaving the call.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.TrackUnpublished track_unpublished = 17;\n         */\n        trackUnpublished: TrackUnpublished;\n      }\n    | {\n        oneofKind: 'error';\n        /**\n         * Error is used to communicate any error related to the participant. The\n         * error code and the message explain what went wrong. Whether the participant\n         * can retry is also indicated.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.Error error = 18;\n         */\n        error: Error;\n      }\n    | {\n        oneofKind: 'callGrantsUpdated';\n        /**\n         * CallGrantsUpdated tells what tracks a participant is allowed to publish.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.CallGrantsUpdated call_grants_updated = 19;\n         */\n        callGrantsUpdated: CallGrantsUpdated;\n      }\n    | {\n        oneofKind: 'goAway';\n        /**\n         * GoAway tells the client to migrate away from the SFU it is connected to.\n         * The reason field indicates why this message was sent.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.GoAway go_away = 20;\n         */\n        goAway: GoAway;\n      }\n    | {\n        oneofKind: 'iceRestart';\n        /**\n         * ICERestart tells the client to perform ICE restart.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ICERestart ice_restart = 21;\n         */\n        iceRestart: ICERestart;\n      }\n    | {\n        oneofKind: 'pinsUpdated';\n        /**\n         * PinsChanged is sent the list of pins in the call changes. This event contains the entire list of pins.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.PinsChanged pins_updated = 22;\n         */\n        pinsUpdated: PinsChanged;\n      }\n    | {\n        oneofKind: 'callEnded';\n        /**\n         * CallEnded is sent by the SFU to the client to signal that the call has ended.\n         * The reason may specify why the call has ended.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.CallEnded call_ended = 23;\n         */\n        callEnded: CallEnded;\n      }\n    | {\n        oneofKind: 'participantUpdated';\n        /**\n         * ParticipantUpdated is sent when user data is updated\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ParticipantUpdated participant_updated = 24;\n         */\n        participantUpdated: ParticipantUpdated;\n      }\n    | {\n        oneofKind: 'participantMigrationComplete';\n        /**\n         * ParticipantMigrationComplete is sent when the participant migration is complete\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ParticipantMigrationComplete participant_migration_complete = 25;\n         */\n        participantMigrationComplete: ParticipantMigrationComplete;\n      }\n    | {\n        oneofKind: 'changePublishOptions';\n        /**\n         * ChangePublishOptions is sent to signal the change in publish options such as a new codec or simulcast layers\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ChangePublishOptions change_publish_options = 27;\n         */\n        changePublishOptions: ChangePublishOptions;\n      }\n    | {\n        oneofKind: 'inboundStateNotification';\n        /**\n         * InboundStateNotification\n         *\n         * @generated from protobuf field: stream.video.sfu.event.InboundStateNotification inbound_state_notification = 28;\n         */\n        inboundStateNotification: InboundStateNotification;\n      }\n    | {\n        oneofKind: undefined;\n      };\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ChangePublishOptions\n */\nexport interface ChangePublishOptions {\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.PublishOption publish_options = 1;\n   */\n  publishOptions: PublishOption[];\n  /**\n   * @generated from protobuf field: string reason = 2;\n   */\n  reason: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ChangePublishOptionsComplete\n */\nexport interface ChangePublishOptionsComplete {}\n/**\n * @generated from protobuf message stream.video.sfu.event.ParticipantMigrationComplete\n */\nexport interface ParticipantMigrationComplete {}\n/**\n * @generated from protobuf message stream.video.sfu.event.PinsChanged\n */\nexport interface PinsChanged {\n  /**\n   * the list of pins in the call.\n   * Pins are ordered in descending order (most important first).\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.Pin pins = 1;\n   */\n  pins: Pin[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.Error\n */\nexport interface Error {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error$;\n  /**\n   * returns the reconnect strategy to be used by the client\n   *\n   * @generated from protobuf field: stream.video.sfu.models.WebsocketReconnectStrategy reconnect_strategy = 5;\n   */\n  reconnectStrategy: WebsocketReconnectStrategy;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ICETrickle\n */\nexport interface ICETrickle {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.PeerType peer_type = 1;\n   */\n  peerType: PeerType;\n  /**\n   * @generated from protobuf field: string ice_candidate = 2;\n   */\n  iceCandidate: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ICERestart\n */\nexport interface ICERestart {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.PeerType peer_type = 1;\n   */\n  peerType: PeerType;\n}\n/**\n * SfuRequest is a message that is sent from the client to the SFU.\n *\n * @generated from protobuf message stream.video.sfu.event.SfuRequest\n */\nexport interface SfuRequest {\n  /**\n   * @generated from protobuf oneof: request_payload\n   */\n  requestPayload:\n    | {\n        oneofKind: 'joinRequest';\n        /**\n         * @generated from protobuf field: stream.video.sfu.event.JoinRequest join_request = 1;\n         */\n        joinRequest: JoinRequest;\n      }\n    | {\n        oneofKind: 'healthCheckRequest';\n        /**\n         * @generated from protobuf field: stream.video.sfu.event.HealthCheckRequest health_check_request = 2;\n         */\n        healthCheckRequest: HealthCheckRequest;\n      }\n    | {\n        oneofKind: 'leaveCallRequest';\n        /**\n         * @generated from protobuf field: stream.video.sfu.event.LeaveCallRequest leave_call_request = 3;\n         */\n        leaveCallRequest: LeaveCallRequest;\n      }\n    | {\n        oneofKind: undefined;\n      };\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.LeaveCallRequest\n */\nexport interface LeaveCallRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: string reason = 2;\n   */\n  reason: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.HealthCheckRequest\n */\nexport interface HealthCheckRequest {}\n/**\n * @generated from protobuf message stream.video.sfu.event.HealthCheckResponse\n */\nexport interface HealthCheckResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ParticipantCount participant_count = 1;\n   */\n  participantCount?: ParticipantCount;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.TrackPublished\n */\nexport interface TrackPublished {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType type = 3;\n   */\n  type: TrackType;\n  /**\n   * Participant information here is included as an optimisation\n   * for large calls where broadcasting on every participant join\n   * is expensive. You should **NOT** assume that this will always\n   * be available though you can use it to update the participant\n   * list when it is there.\n   *\n   * @generated from protobuf field: stream.video.sfu.models.Participant participant = 4;\n   */\n  participant?: Participant;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.TrackUnpublished\n */\nexport interface TrackUnpublished {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType type = 3;\n   */\n  type: TrackType;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackUnpublishReason cause = 4;\n   */\n  cause: TrackUnpublishReason;\n  /**\n   * Participant information here is included as an optimisation\n   * for large calls where broadcasting on every participant join\n   * is expensive. You should **NOT** assume that this will always\n   * be available though you can use it to update the participant\n   * list when it is there.\n   *\n   * @generated from protobuf field: stream.video.sfu.models.Participant participant = 5;\n   */\n  participant?: Participant;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.JoinRequest\n */\nexport interface JoinRequest {\n  /**\n   * @generated from protobuf field: string token = 1;\n   */\n  token: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * user_session id can change during reconnects, this helps us to\n   * identify the user across reconnects and should remain consistent until the user explicitly\n   * disconnects, is kicked or the call is ended.\n   *\n   * @generated from protobuf field: string unified_session_id = 13;\n   */\n  unifiedSessionId: string;\n  /**\n   * dumb SDP that allow us to extract subscriber's decode codecs\n   *\n   * @generated from protobuf field: string subscriber_sdp = 3;\n   */\n  subscriberSdp: string;\n  /**\n   * @generated from protobuf field: string publisher_sdp = 8;\n   */\n  publisherSdp: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ClientDetails client_details = 4;\n   */\n  clientDetails?: ClientDetails;\n  /**\n   * Deprecated: use ReconnectDetails instead\n   *\n   * @deprecated\n   * @generated from protobuf field: stream.video.sfu.event.Migration migration = 5 [deprecated = true];\n   */\n  migration?: Migration;\n  /**\n   * Fast reconnect flag explicitly indicates that if the participant session\n   * and the associated state is still present in the SFU, the client is ready\n   * to restore the PeerConnection with an ICE restart. If the SFU replies with\n   * \"reconnected: true\" in its JoinResponse, then it is safe to perform an ICE\n   * restart or else the existing PeerConnections must be cleaned up.\n   *\n   * For the SFU, fast_reconnect:false indicates that even if it has the state\n   * cached, the client state is not in sync and hence it must be cleaned up before\n   * proceeding further.\n   *\n   * @deprecated\n   * @generated from protobuf field: bool fast_reconnect = 6 [deprecated = true];\n   */\n  fastReconnect: boolean;\n  /**\n   * @generated from protobuf field: stream.video.sfu.event.ReconnectDetails reconnect_details = 7;\n   */\n  reconnectDetails?: ReconnectDetails;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.PublishOption preferred_publish_options = 9;\n   */\n  preferredPublishOptions: PublishOption[];\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.SubscribeOption preferred_subscribe_options = 10;\n   */\n  preferredSubscribeOptions: SubscribeOption[];\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.ClientCapability capabilities = 11;\n   */\n  capabilities: ClientCapability[];\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ParticipantSource source = 12;\n   */\n  source: ParticipantSource;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ReconnectDetails\n */\nexport interface ReconnectDetails {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.WebsocketReconnectStrategy strategy = 1;\n   */\n  strategy: WebsocketReconnectStrategy;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.TrackInfo announced_tracks = 3;\n   */\n  announcedTracks: TrackInfo[];\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.signal.TrackSubscriptionDetails subscriptions = 4;\n   */\n  subscriptions: TrackSubscriptionDetails[];\n  /**\n   * @generated from protobuf field: uint32 reconnect_attempt = 5;\n   */\n  reconnectAttempt: number;\n  /**\n   * @generated from protobuf field: string from_sfu_id = 6;\n   */\n  fromSfuId: string;\n  /**\n   * only set in case of rejoin\n   *\n   * @generated from protobuf field: string previous_session_id = 7;\n   */\n  previousSessionId: string;\n  /**\n   * the reconnect reason\n   *\n   * @generated from protobuf field: string reason = 8;\n   */\n  reason: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.Migration\n */\nexport interface Migration {\n  /**\n   * @generated from protobuf field: string from_sfu_id = 1;\n   */\n  fromSfuId: string;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.TrackInfo announced_tracks = 2;\n   */\n  announcedTracks: TrackInfo[];\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.signal.TrackSubscriptionDetails subscriptions = 3;\n   */\n  subscriptions: TrackSubscriptionDetails[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.JoinResponse\n */\nexport interface JoinResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.CallState call_state = 1;\n   */\n  callState?: CallState;\n  /**\n   * @generated from protobuf field: bool reconnected = 2;\n   */\n  reconnected: boolean;\n  /**\n   * @generated from protobuf field: int32 fast_reconnect_deadline_seconds = 3;\n   */\n  fastReconnectDeadlineSeconds: number;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.PublishOption publish_options = 4;\n   */\n  publishOptions: PublishOption[];\n}\n/**\n * ParticipantJoined is fired when a user joins a call\n *\n * @generated from protobuf message stream.video.sfu.event.ParticipantJoined\n */\nexport interface ParticipantJoined {\n  /**\n   * @generated from protobuf field: string call_cid = 1;\n   */\n  callCid: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Participant participant = 2;\n   */\n  participant?: Participant;\n}\n/**\n * ParticipantJoined is fired when a user leaves a call\n *\n * @generated from protobuf message stream.video.sfu.event.ParticipantLeft\n */\nexport interface ParticipantLeft {\n  /**\n   * @generated from protobuf field: string call_cid = 1;\n   */\n  callCid: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Participant participant = 2;\n   */\n  participant?: Participant;\n}\n/**\n * ParticipantUpdated is fired when user data is updated\n *\n * @generated from protobuf message stream.video.sfu.event.ParticipantUpdated\n */\nexport interface ParticipantUpdated {\n  /**\n   * @generated from protobuf field: string call_cid = 1;\n   */\n  callCid: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Participant participant = 2;\n   */\n  participant?: Participant;\n}\n/**\n * SubscriberOffer is sent when the SFU adds tracks to a subscription\n *\n * @generated from protobuf message stream.video.sfu.event.SubscriberOffer\n */\nexport interface SubscriberOffer {\n  /**\n   * @generated from protobuf field: bool ice_restart = 1;\n   */\n  iceRestart: boolean;\n  /**\n   * @generated from protobuf field: string sdp = 2;\n   */\n  sdp: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.PublisherAnswer\n */\nexport interface PublisherAnswer {\n  /**\n   * @generated from protobuf field: string sdp = 1;\n   */\n  sdp: string;\n}\n/**\n * ConnectionQuality is sent to inform about connection quality changes\n * eg. thierry's connection is not good -> render a red icon Zoom style\n *\n * @generated from protobuf message stream.video.sfu.event.ConnectionQualityChanged\n */\nexport interface ConnectionQualityChanged {\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.event.ConnectionQualityInfo connection_quality_updates = 1;\n   */\n  connectionQualityUpdates: ConnectionQualityInfo[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ConnectionQualityInfo\n */\nexport interface ConnectionQualityInfo {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ConnectionQuality connection_quality = 3;\n   */\n  connectionQuality: ConnectionQuality;\n}\n/**\n * DominantSpeakerChanged is sent by the SFU to notify when there is a new dominant speaker in the call\n *\n * @generated from protobuf message stream.video.sfu.event.DominantSpeakerChanged\n */\nexport interface DominantSpeakerChanged {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.AudioLevel\n */\nexport interface AudioLevel {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * 0.0 means complete silence, 1.0 loudest\n   *\n   * @generated from protobuf field: float level = 3;\n   */\n  level: number;\n  /**\n   * @generated from protobuf field: bool is_speaking = 4;\n   */\n  isSpeaking: boolean;\n}\n/**\n * AudioLevelChanged is sent by the SFU to notify about audio levels by user\n *\n * @generated from protobuf message stream.video.sfu.event.AudioLevelChanged\n */\nexport interface AudioLevelChanged {\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.event.AudioLevel audio_levels = 1;\n   */\n  audioLevels: AudioLevel[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.AudioSender\n */\nexport interface AudioSender {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 2;\n   */\n  codec?: Codec;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 3;\n   */\n  trackType: TrackType;\n  /**\n   * @generated from protobuf field: int32 publish_option_id = 4;\n   */\n  publishOptionId: number;\n}\n/**\n * VideoLayerSetting is used to specify various parameters of a particular encoding in simulcast.\n * The parameters are specified here - https://developer.mozilla.org/en-US/docs/Web/API/RTCRtpEncodingParameters\n * SDKs use these parameters sent from the server to dynamically adjust these parameters to save CPU, bandwidth\n *\n * @generated from protobuf message stream.video.sfu.event.VideoLayerSetting\n */\nexport interface VideoLayerSetting {\n  /**\n   * @generated from protobuf field: string name = 1;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: bool active = 2;\n   */\n  active: boolean;\n  /**\n   * @generated from protobuf field: int32 max_bitrate = 3;\n   */\n  maxBitrate: number;\n  /**\n   * @generated from protobuf field: float scale_resolution_down_by = 4;\n   */\n  scaleResolutionDownBy: number;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 6;\n   */\n  codec?: Codec;\n  /**\n   * @generated from protobuf field: uint32 max_framerate = 7;\n   */\n  maxFramerate: number;\n  /**\n   * @generated from protobuf field: string scalability_mode = 8;\n   */\n  scalabilityMode: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.VideoSender\n */\nexport interface VideoSender {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 2;\n   */\n  codec?: Codec;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.event.VideoLayerSetting layers = 3;\n   */\n  layers: VideoLayerSetting[];\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 4;\n   */\n  trackType: TrackType;\n  /**\n   * @generated from protobuf field: int32 publish_option_id = 5;\n   */\n  publishOptionId: number;\n}\n/**\n * sent to users when they need to change the quality of their video\n *\n * @generated from protobuf message stream.video.sfu.event.ChangePublishQuality\n */\nexport interface ChangePublishQuality {\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.event.AudioSender audio_senders = 1;\n   */\n  audioSenders: AudioSender[];\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.event.VideoSender video_senders = 2;\n   */\n  videoSenders: VideoSender[];\n}\n/**\n * CallGrants is sent to users when there is a change in the call permissions\n * to publish audio, video or share the screen for a user or a role. This is\n * idempotent and can be sent at any time. Only the current_grants in the latest\n * message should be considered. In other words, this is not dependent on any\n * other message (including previous call_grants_updated message)\n *\n * When this message is received, the client (say, React component) should mute\n * the tracks which are not allowed anymore. For example, if the message has\n * grants {audio:true, video:false} while the user is publishing video, then the\n * client component should mute the video track and gray out the video button.\n * This way, the user will not be able to publish video until the permissions\n * are granted again. Also, muting the track on the client side will prevent\n * the SFU from receiving the video track and will save bandwidth.\n *\n * In simple words, this is exactly the same as muting a track on the client.\n * Here, instead of the user instructing the client, SFU would be doing it.\n *\n * @generated from protobuf message stream.video.sfu.event.CallGrantsUpdated\n */\nexport interface CallGrantsUpdated {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.CallGrants current_grants = 1;\n   */\n  currentGrants?: CallGrants;\n  /**\n   * @generated from protobuf field: string message = 2;\n   */\n  message: string;\n}\n/**\n * Go away is sent by the SFU to the client to signal to migrate away from the SFU.\n * The evict reason may specify why the user is being evicted.\n *\n * @generated from protobuf message stream.video.sfu.event.GoAway\n */\nexport interface GoAway {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.GoAwayReason reason = 1;\n   */\n  reason: GoAwayReason;\n}\n/**\n * CallEnded is sent by the SFU to the client to signal that the call has ended.\n * The reason may specify why the call has ended.\n *\n * @generated from protobuf message stream.video.sfu.event.CallEnded\n */\nexport interface CallEnded {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.CallEndedReason reason = 1;\n   */\n  reason: CallEndedReason;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.InboundStateNotification\n */\nexport interface InboundStateNotification {\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.event.InboundVideoState inbound_video_states = 1;\n   */\n  inboundVideoStates: InboundVideoState[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.InboundVideoState\n */\nexport interface InboundVideoState {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 3;\n   */\n  trackType: TrackType;\n  /**\n   * @generated from protobuf field: bool paused = 4;\n   */\n  paused: boolean;\n}\n// @generated message type with reflection information, may provide speed optimized methods\nclass SfuEvent$Type extends MessageType<SfuEvent> {\n  constructor() {\n    super('stream.video.sfu.event.SfuEvent', [\n      {\n        no: 1,\n        name: 'subscriber_offer',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => SubscriberOffer,\n      },\n      {\n        no: 2,\n        name: 'publisher_answer',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => PublisherAnswer,\n      },\n      {\n        no: 3,\n        name: 'connection_quality_changed',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ConnectionQualityChanged,\n      },\n      {\n        no: 4,\n        name: 'audio_level_changed',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => AudioLevelChanged,\n      },\n      {\n        no: 5,\n        name: 'ice_trickle',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ICETrickle$,\n      },\n      {\n        no: 6,\n        name: 'change_publish_quality',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ChangePublishQuality,\n      },\n      {\n        no: 10,\n        name: 'participant_joined',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ParticipantJoined,\n      },\n      {\n        no: 11,\n        name: 'participant_left',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ParticipantLeft,\n      },\n      {\n        no: 12,\n        name: 'dominant_speaker_changed',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => DominantSpeakerChanged,\n      },\n      {\n        no: 13,\n        name: 'join_response',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => JoinResponse,\n      },\n      {\n        no: 14,\n        name: 'health_check_response',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => HealthCheckResponse,\n      },\n      {\n        no: 16,\n        name: 'track_published',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => TrackPublished,\n      },\n      {\n        no: 17,\n        name: 'track_unpublished',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => TrackUnpublished,\n      },\n      {\n        no: 18,\n        name: 'error',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => Error,\n      },\n      {\n        no: 19,\n        name: 'call_grants_updated',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => CallGrantsUpdated,\n      },\n      {\n        no: 20,\n        name: 'go_away',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => GoAway,\n      },\n      {\n        no: 21,\n        name: 'ice_restart',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ICERestart,\n      },\n      {\n        no: 22,\n        name: 'pins_updated',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => PinsChanged,\n      },\n      {\n        no: 23,\n        name: 'call_ended',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => CallEnded,\n      },\n      {\n        no: 24,\n        name: 'participant_updated',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ParticipantUpdated,\n      },\n      {\n        no: 25,\n        name: 'participant_migration_complete',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ParticipantMigrationComplete,\n      },\n      {\n        no: 27,\n        name: 'change_publish_options',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ChangePublishOptions,\n      },\n      {\n        no: 28,\n        name: 'inbound_state_notification',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => InboundStateNotification,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.SfuEvent\n */\nexport const SfuEvent = new SfuEvent$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ChangePublishOptions$Type extends MessageType<ChangePublishOptions> {\n  constructor() {\n    super('stream.video.sfu.event.ChangePublishOptions', [\n      {\n        no: 1,\n        name: 'publish_options',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => PublishOption,\n      },\n      { no: 2, name: 'reason', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ChangePublishOptions\n */\nexport const ChangePublishOptions = new ChangePublishOptions$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ChangePublishOptionsComplete$Type extends MessageType<ChangePublishOptionsComplete> {\n  constructor() {\n    super('stream.video.sfu.event.ChangePublishOptionsComplete', []);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ChangePublishOptionsComplete\n */\nexport const ChangePublishOptionsComplete =\n  new ChangePublishOptionsComplete$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantMigrationComplete$Type extends MessageType<ParticipantMigrationComplete> {\n  constructor() {\n    super('stream.video.sfu.event.ParticipantMigrationComplete', []);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantMigrationComplete\n */\nexport const ParticipantMigrationComplete =\n  new ParticipantMigrationComplete$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass PinsChanged$Type extends MessageType<PinsChanged> {\n  constructor() {\n    super('stream.video.sfu.event.PinsChanged', [\n      {\n        no: 1,\n        name: 'pins',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => Pin,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.PinsChanged\n */\nexport const PinsChanged = new PinsChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Error$Type extends MessageType<Error> {\n  constructor() {\n    super('stream.video.sfu.event.Error', [\n      { no: 4, name: 'error', kind: 'message', T: () => Error$ },\n      {\n        no: 5,\n        name: 'reconnect_strategy',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.WebsocketReconnectStrategy',\n          WebsocketReconnectStrategy,\n          'WEBSOCKET_RECONNECT_STRATEGY_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.Error\n */\nexport const Error = new Error$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICETrickle$Type extends MessageType<ICETrickle> {\n  constructor() {\n    super('stream.video.sfu.event.ICETrickle', [\n      {\n        no: 1,\n        name: 'peer_type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.PeerType', PeerType, 'PEER_TYPE_'],\n      },\n      {\n        no: 2,\n        name: 'ice_candidate',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ICETrickle\n */\nexport const ICETrickle = new ICETrickle$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICERestart$Type extends MessageType<ICERestart> {\n  constructor() {\n    super('stream.video.sfu.event.ICERestart', [\n      {\n        no: 1,\n        name: 'peer_type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.PeerType', PeerType, 'PEER_TYPE_'],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ICERestart\n */\nexport const ICERestart = new ICERestart$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SfuRequest$Type extends MessageType<SfuRequest> {\n  constructor() {\n    super('stream.video.sfu.event.SfuRequest', [\n      {\n        no: 1,\n        name: 'join_request',\n        kind: 'message',\n        oneof: 'requestPayload',\n        T: () => JoinRequest,\n      },\n      {\n        no: 2,\n        name: 'health_check_request',\n        kind: 'message',\n        oneof: 'requestPayload',\n        T: () => HealthCheckRequest,\n      },\n      {\n        no: 3,\n        name: 'leave_call_request',\n        kind: 'message',\n        oneof: 'requestPayload',\n        T: () => LeaveCallRequest,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.SfuRequest\n */\nexport const SfuRequest = new SfuRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass LeaveCallRequest$Type extends MessageType<LeaveCallRequest> {\n  constructor() {\n    super('stream.video.sfu.event.LeaveCallRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'reason', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.LeaveCallRequest\n */\nexport const LeaveCallRequest = new LeaveCallRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass HealthCheckRequest$Type extends MessageType<HealthCheckRequest> {\n  constructor() {\n    super('stream.video.sfu.event.HealthCheckRequest', []);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.HealthCheckRequest\n */\nexport const HealthCheckRequest = new HealthCheckRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass HealthCheckResponse$Type extends MessageType<HealthCheckResponse> {\n  constructor() {\n    super('stream.video.sfu.event.HealthCheckResponse', [\n      {\n        no: 1,\n        name: 'participant_count',\n        kind: 'message',\n        T: () => ParticipantCount,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.HealthCheckResponse\n */\nexport const HealthCheckResponse = new HealthCheckResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackPublished$Type extends MessageType<TrackPublished> {\n  constructor() {\n    super('stream.video.sfu.event.TrackPublished', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 4, name: 'participant', kind: 'message', T: () => Participant },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.TrackPublished\n */\nexport const TrackPublished = new TrackPublished$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackUnpublished$Type extends MessageType<TrackUnpublished> {\n  constructor() {\n    super('stream.video.sfu.event.TrackUnpublished', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      {\n        no: 4,\n        name: 'cause',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackUnpublishReason',\n          TrackUnpublishReason,\n          'TRACK_UNPUBLISH_REASON_',\n        ],\n      },\n      { no: 5, name: 'participant', kind: 'message', T: () => Participant },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.TrackUnpublished\n */\nexport const TrackUnpublished = new TrackUnpublished$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass JoinRequest$Type extends MessageType<JoinRequest> {\n  constructor() {\n    super('stream.video.sfu.event.JoinRequest', [\n      { no: 1, name: 'token', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 13,\n        name: 'unified_session_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 3,\n        name: 'subscriber_sdp',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 8,\n        name: 'publisher_sdp',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 4,\n        name: 'client_details',\n        kind: 'message',\n        T: () => ClientDetails,\n      },\n      { no: 5, name: 'migration', kind: 'message', T: () => Migration },\n      {\n        no: 6,\n        name: 'fast_reconnect',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n      {\n        no: 7,\n        name: 'reconnect_details',\n        kind: 'message',\n        T: () => ReconnectDetails,\n      },\n      {\n        no: 9,\n        name: 'preferred_publish_options',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => PublishOption,\n      },\n      {\n        no: 10,\n        name: 'preferred_subscribe_options',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => SubscribeOption,\n      },\n      {\n        no: 11,\n        name: 'capabilities',\n        kind: 'enum',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => [\n          'stream.video.sfu.models.ClientCapability',\n          ClientCapability,\n          'CLIENT_CAPABILITY_',\n        ],\n      },\n      {\n        no: 12,\n        name: 'source',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.ParticipantSource',\n          ParticipantSource,\n          'PARTICIPANT_SOURCE_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.JoinRequest\n */\nexport const JoinRequest = new JoinRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ReconnectDetails$Type extends MessageType<ReconnectDetails> {\n  constructor() {\n    super('stream.video.sfu.event.ReconnectDetails', [\n      {\n        no: 1,\n        name: 'strategy',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.WebsocketReconnectStrategy',\n          WebsocketReconnectStrategy,\n          'WEBSOCKET_RECONNECT_STRATEGY_',\n        ],\n      },\n      {\n        no: 3,\n        name: 'announced_tracks',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => TrackInfo,\n      },\n      {\n        no: 4,\n        name: 'subscriptions',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => TrackSubscriptionDetails,\n      },\n      {\n        no: 5,\n        name: 'reconnect_attempt',\n        kind: 'scalar',\n        T: 13 /*ScalarType.UINT32*/,\n      },\n      {\n        no: 6,\n        name: 'from_sfu_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 7,\n        name: 'previous_session_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 8, name: 'reason', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ReconnectDetails\n */\nexport const ReconnectDetails = new ReconnectDetails$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Migration$Type extends MessageType<Migration> {\n  constructor() {\n    super('stream.video.sfu.event.Migration', [\n      {\n        no: 1,\n        name: 'from_sfu_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 2,\n        name: 'announced_tracks',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => TrackInfo,\n      },\n      {\n        no: 3,\n        name: 'subscriptions',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => TrackSubscriptionDetails,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.Migration\n */\nexport const Migration = new Migration$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass JoinResponse$Type extends MessageType<JoinResponse> {\n  constructor() {\n    super('stream.video.sfu.event.JoinResponse', [\n      { no: 1, name: 'call_state', kind: 'message', T: () => CallState },\n      { no: 2, name: 'reconnected', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      {\n        no: 3,\n        name: 'fast_reconnect_deadline_seconds',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n      {\n        no: 4,\n        name: 'publish_options',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => PublishOption,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.JoinResponse\n */\nexport const JoinResponse = new JoinResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantJoined$Type extends MessageType<ParticipantJoined> {\n  constructor() {\n    super('stream.video.sfu.event.ParticipantJoined', [\n      { no: 1, name: 'call_cid', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'participant', kind: 'message', T: () => Participant },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantJoined\n */\nexport const ParticipantJoined = new ParticipantJoined$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantLeft$Type extends MessageType<ParticipantLeft> {\n  constructor() {\n    super('stream.video.sfu.event.ParticipantLeft', [\n      { no: 1, name: 'call_cid', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'participant', kind: 'message', T: () => Participant },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantLeft\n */\nexport const ParticipantLeft = new ParticipantLeft$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantUpdated$Type extends MessageType<ParticipantUpdated> {\n  constructor() {\n    super('stream.video.sfu.event.ParticipantUpdated', [\n      { no: 1, name: 'call_cid', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'participant', kind: 'message', T: () => Participant },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantUpdated\n */\nexport const ParticipantUpdated = new ParticipantUpdated$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SubscriberOffer$Type extends MessageType<SubscriberOffer> {\n  constructor() {\n    super('stream.video.sfu.event.SubscriberOffer', [\n      { no: 1, name: 'ice_restart', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 2, name: 'sdp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.SubscriberOffer\n */\nexport const SubscriberOffer = new SubscriberOffer$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass PublisherAnswer$Type extends MessageType<PublisherAnswer> {\n  constructor() {\n    super('stream.video.sfu.event.PublisherAnswer', [\n      { no: 1, name: 'sdp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.PublisherAnswer\n */\nexport const PublisherAnswer = new PublisherAnswer$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ConnectionQualityChanged$Type extends MessageType<ConnectionQualityChanged> {\n  constructor() {\n    super('stream.video.sfu.event.ConnectionQualityChanged', [\n      {\n        no: 1,\n        name: 'connection_quality_updates',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => ConnectionQualityInfo,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ConnectionQualityChanged\n */\nexport const ConnectionQualityChanged = new ConnectionQualityChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ConnectionQualityInfo$Type extends MessageType<ConnectionQualityInfo> {\n  constructor() {\n    super('stream.video.sfu.event.ConnectionQualityInfo', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'connection_quality',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.ConnectionQuality',\n          ConnectionQuality,\n          'CONNECTION_QUALITY_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ConnectionQualityInfo\n */\nexport const ConnectionQualityInfo = new ConnectionQualityInfo$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass DominantSpeakerChanged$Type extends MessageType<DominantSpeakerChanged> {\n  constructor() {\n    super('stream.video.sfu.event.DominantSpeakerChanged', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.DominantSpeakerChanged\n */\nexport const DominantSpeakerChanged = new DominantSpeakerChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioLevel$Type extends MessageType<AudioLevel> {\n  constructor() {\n    super('stream.video.sfu.event.AudioLevel', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 3, name: 'level', kind: 'scalar', T: 2 /*ScalarType.FLOAT*/ },\n      { no: 4, name: 'is_speaking', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.AudioLevel\n */\nexport const AudioLevel = new AudioLevel$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioLevelChanged$Type extends MessageType<AudioLevelChanged> {\n  constructor() {\n    super('stream.video.sfu.event.AudioLevelChanged', [\n      {\n        no: 1,\n        name: 'audio_levels',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => AudioLevel,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.AudioLevelChanged\n */\nexport const AudioLevelChanged = new AudioLevelChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioSender$Type extends MessageType<AudioSender> {\n  constructor() {\n    super('stream.video.sfu.event.AudioSender', [\n      { no: 2, name: 'codec', kind: 'message', T: () => Codec },\n      {\n        no: 3,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      {\n        no: 4,\n        name: 'publish_option_id',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.AudioSender\n */\nexport const AudioSender = new AudioSender$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoLayerSetting$Type extends MessageType<VideoLayerSetting> {\n  constructor() {\n    super('stream.video.sfu.event.VideoLayerSetting', [\n      { no: 1, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'active', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 3, name: 'max_bitrate', kind: 'scalar', T: 5 /*ScalarType.INT32*/ },\n      {\n        no: 4,\n        name: 'scale_resolution_down_by',\n        kind: 'scalar',\n        T: 2 /*ScalarType.FLOAT*/,\n      },\n      { no: 6, name: 'codec', kind: 'message', T: () => Codec },\n      {\n        no: 7,\n        name: 'max_framerate',\n        kind: 'scalar',\n        T: 13 /*ScalarType.UINT32*/,\n      },\n      {\n        no: 8,\n        name: 'scalability_mode',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.VideoLayerSetting\n */\nexport const VideoLayerSetting = new VideoLayerSetting$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoSender$Type extends MessageType<VideoSender> {\n  constructor() {\n    super('stream.video.sfu.event.VideoSender', [\n      { no: 2, name: 'codec', kind: 'message', T: () => Codec },\n      {\n        no: 3,\n        name: 'layers',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => VideoLayerSetting,\n      },\n      {\n        no: 4,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      {\n        no: 5,\n        name: 'publish_option_id',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.VideoSender\n */\nexport const VideoSender = new VideoSender$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ChangePublishQuality$Type extends MessageType<ChangePublishQuality> {\n  constructor() {\n    super('stream.video.sfu.event.ChangePublishQuality', [\n      {\n        no: 1,\n        name: 'audio_senders',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => AudioSender,\n      },\n      {\n        no: 2,\n        name: 'video_senders',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => VideoSender,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ChangePublishQuality\n */\nexport const ChangePublishQuality = new ChangePublishQuality$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallGrantsUpdated$Type extends MessageType<CallGrantsUpdated> {\n  constructor() {\n    super('stream.video.sfu.event.CallGrantsUpdated', [\n      { no: 1, name: 'current_grants', kind: 'message', T: () => CallGrants },\n      { no: 2, name: 'message', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.CallGrantsUpdated\n */\nexport const CallGrantsUpdated = new CallGrantsUpdated$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass GoAway$Type extends MessageType<GoAway> {\n  constructor() {\n    super('stream.video.sfu.event.GoAway', [\n      {\n        no: 1,\n        name: 'reason',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.GoAwayReason',\n          GoAwayReason,\n          'GO_AWAY_REASON_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.GoAway\n */\nexport const GoAway = new GoAway$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallEnded$Type extends MessageType<CallEnded> {\n  constructor() {\n    super('stream.video.sfu.event.CallEnded', [\n      {\n        no: 1,\n        name: 'reason',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.CallEndedReason',\n          CallEndedReason,\n          'CALL_ENDED_REASON_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.CallEnded\n */\nexport const CallEnded = new CallEnded$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass InboundStateNotification$Type extends MessageType<InboundStateNotification> {\n  constructor() {\n    super('stream.video.sfu.event.InboundStateNotification', [\n      {\n        no: 1,\n        name: 'inbound_video_states',\n        kind: 'message',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: () => InboundVideoState,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.InboundStateNotification\n */\nexport const InboundStateNotification = new InboundStateNotification$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass InboundVideoState$Type extends MessageType<InboundVideoState> {\n  constructor() {\n    super('stream.video.sfu.event.InboundVideoState', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 4, name: 'paused', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.InboundVideoState\n */\nexport const InboundVideoState = new InboundVideoState$Type();\n", "import type {\n  Participant,\n  TrackType,\n  VideoDimension,\n} from './gen/video/sfu/models/models';\nimport type {\n  JoinCallRequest,\n  MemberResponse,\n  OwnCapability,\n  ReactionResponse,\n} from './gen/coordinator';\nimport type { StreamClient } from './coordinator/connection/client';\nimport type { Comparator } from './sorting';\nimport type { StreamVideoWriteableStateStore } from './store';\nimport { AxiosError } from 'axios';\nimport { RejectReason } from './coordinator/connection/types';\n\nexport type StreamReaction = Pick<\n  ReactionResponse,\n  'type' | 'emoji_code' | 'custom'\n>;\n\nexport enum VisibilityState {\n  UNKNOWN = 'UNKNOWN',\n  VISIBLE = 'VISIBLE',\n  INVISIBLE = 'INVISIBLE',\n}\n\nexport enum DebounceType {\n  IMMEDIATE = 20,\n  FAST = 100,\n  MEDIUM = 600,\n  SLOW = 1200,\n}\n\nexport interface StreamVideoParticipant extends Participant {\n  /**\n   * The participant's audio stream, if they are publishing audio and\n   * we have subscribed to it.\n   */\n  audioStream?: MediaStream;\n\n  /**\n   * The participant's video stream, if they are sharing their video,\n   * and we are subscribed to it.\n   */\n  videoStream?: MediaStream;\n\n  /**\n   * The participant's screen share stream, if they are sharing their screen,\n   * and we are subscribed to it.\n   */\n  screenShareStream?: MediaStream;\n\n  /**\n   * The participant's screen audio stream, if they are sharing their audio,\n   * and we are subscribed to it.\n   */\n  screenShareAudioStream?: MediaStream;\n\n  /**\n   * The preferred video dimensions for this participant.\n   * Set it to `undefined` to unsubscribe from this participant's video.\n   */\n  videoDimension?: VideoDimension;\n\n  /**\n   * The preferred screen share dimensions for this participant.\n   * Set it to `undefined` to unsubscribe from this participant's screen share.\n   */\n  screenShareDimension?: VideoDimension;\n\n  /**\n   * A list of tracks that are currently paused by our servers.\n   * Typically, a server-side pause happens when the local participant doesn't\n   * have enough bandwidth to receive all tracks. In this case, the server\n   * will pause some tracks to optimize the bandwidth usage.\n   * Once the bandwidth is restored, the server will resume the paused tracks.\n   * This is useful to avoid any unwanted video and audio artifacts.\n   */\n  pausedTracks?: TrackType[];\n\n  /**\n   * True if the participant is the local participant.\n   */\n  isLocalParticipant?: boolean;\n\n  /**\n   * The pin state of the participant.\n   */\n  pin?: ParticipantPin;\n\n  /**\n   * The last reaction this user has sent to this call.\n   * Integrators can batch/collect past reactions and show them to the UI.\n   */\n  reaction?: StreamReaction;\n\n  /**\n   * The visibility state of the participant's tracks within a defined viewport.\n   */\n  viewportVisibilityState?: Record<VideoTrackType, VisibilityState>;\n\n  /**\n   * The volume of the participant's audio stream (from 0 to 1).\n   * Set it to `undefined` to use the default volume.\n   *\n   * Note: this value is not applicable in React Native.\n   */\n  audioVolume?: number;\n}\n\nexport type VideoTrackType = 'videoTrack' | 'screenShareTrack';\nexport type AudioTrackType = 'audioTrack' | 'screenShareAudioTrack';\nexport type TrackMuteType =\n  | 'audio'\n  | 'video'\n  | 'screenshare'\n  | 'screenshare_audio';\n\n/**\n * Represents a participant's pin state.\n */\nexport type ParticipantPin = {\n  /**\n   * Set to true if the participant is pinned by the local user.\n   * False if the participant is pinned server-side, by the call moderator.\n   */\n  isLocalPin: boolean;\n\n  /**\n   * Timestamp when the participant is pinned.\n   */\n  pinnedAt: number;\n};\n\nexport type ClosedCaptionsSettings = {\n  /**\n   * The time in milliseconds to keep a closed caption in the state (visible).\n   * Default is 2700 ms.\n   */\n  visibilityDurationMs?: number;\n  /**\n   * The maximum number of closed captions to keep in the state (visible).\n   * When the maximum number is reached, the oldest closed caption is removed.\n   *\n   * Default is 2.\n   */\n  maxVisibleCaptions?: number;\n};\n\n/**\n * A partial representation of the StreamVideoParticipant.\n */\nexport type StreamVideoParticipantPatch = Partial<StreamVideoParticipant>;\n\n/**\n * A collection of {@link StreamVideoParticipantPatch} organized by sessionId.\n */\nexport type StreamVideoParticipantPatches = {\n  [sessionId: string]: StreamVideoParticipantPatch;\n};\n\nexport type SubscriptionChange = {\n  /**\n   * The video dimension to request.\n   * Set it to `undefined` in case you want to unsubscribe.\n   */\n  dimension: VideoDimension | undefined;\n};\n\nexport type SubscriptionChanges = {\n  [sessionId: string]: SubscriptionChange;\n};\n\n/**\n * A preferred codec to use when publishing a video or audio track.\n * @internal\n */\nexport type PreferredCodec = 'vp8' | 'h264' | 'vp9' | 'av1';\n\n/**\n * A collection of track publication options.\n * @internal\n */\nexport type ClientPublishOptions = {\n  /**\n   * The preferred codec to use when publishing the video stream.\n   */\n  preferredCodec?: PreferredCodec;\n  /**\n   * The fmtp line for the video codec.\n   */\n  fmtpLine?: string;\n  /**\n   * The preferred bitrate to use when publishing the video stream.\n   */\n  preferredBitrate?: number;\n  /**\n   * The maximum number of simulcast layers to use when publishing the video stream.\n   */\n  maxSimulcastLayers?: number;\n  /**\n   * The preferred subscription (incoming video stream) codec.\n   */\n  subscriberCodec?: PreferredCodec;\n  /**\n   * The fmtp line for the subscriber codec.\n   */\n  subscriberFmtpLine?: string;\n  /**\n   * Screen share settings.\n   */\n  screenShareSettings?: ScreenShareSettings;\n  /**\n   * Forces a specific codec to be used when publishing and subscribing a video stream.\n   * Never use it in production as it can have unforeseeable consequences.\n   * @internal\n   */\n  dangerouslyForceCodec?: PreferredCodec;\n};\n\nexport type ScreenShareSettings = {\n  /**\n   * Limits the maximum framerate (in frames per second) of the screen share.\n   * Defaults to 30.\n   */\n  maxFramerate?: number;\n\n  /**\n   * Limits the maximum bitrate (in bits per second) of the screen share.\n   * Defaults to 3000000 (3Mbps).\n   */\n  maxBitrate?: number;\n\n  /**\n   * The content hint to use when publishing the screen share.\n   * This can be used to optimize the video quality for different types of content.\n   *\n   * Defaults to '' (no hint, browser's default behavior).\n   * Use 'motion' for video content, 'detail' for presentations or documents, and 'text' for text-heavy content.\n   *\n   * Please read the documentation for more information on content hints:\n   * - https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamTrack/contentHint\n   */\n  contentHint?: '' | 'motion' | 'detail' | 'text';\n};\n\nexport type CallLeaveOptions = {\n  /**\n   * If true, the caller will get a `call.rejected` event.\n   * Has an effect only if the call is in the `ringing` state.\n   */\n  reject?: boolean;\n\n  /**\n   * The reason for leaving the call.\n   * This will be sent as the `reason` field in the `call.rejected` event.\n   */\n  reason?: RejectReason;\n\n  /**\n   * You can provide extra information about why the call is being left and/or rejected, used for logging purposes.\n   */\n  message?: string;\n};\n\n/**\n * The options to pass to {@link Call} constructor.\n */\nexport type CallConstructor = {\n  /**\n   * The streamClient instance to use.\n   */\n  streamClient: StreamClient;\n\n  /**\n   * The Call type.\n   */\n  type: string;\n\n  /**\n   * The Call ID.\n   */\n  id: string;\n\n  /**\n   * An optional list of {@link MemberResponse} from the backend.\n   * If provided, the call will be initialized with the data from this object.\n   * This is useful when initializing a new \"pending call\" from an event.\n   */\n  members?: MemberResponse[];\n\n  /**\n   * An optional list of {@link OwnCapability} coming from the backed.\n   * If provided, the call will be initialized with the data from this object.\n   * This is useful when initializing a new \"pending call\" from an event.\n   */\n  ownCapabilities?: OwnCapability[];\n\n  /**\n   * Flags the call as a ringing call.\n   * @default false\n   */\n  ringing?: boolean;\n\n  /**\n   * Set to true if this call instance should receive updates from the backend.\n   *\n   * @default false.\n   */\n  watching?: boolean;\n\n  /**\n   * The default comparator to use when sorting participants.\n   */\n  sortParticipantsBy?: Comparator<StreamVideoParticipant>;\n\n  /**\n   * The state store of the client\n   */\n  clientStore: StreamVideoWriteableStateStore;\n};\n\n/**\n * The options to pass to {@link Call.join} method.\n */\nexport type JoinCallData = Omit<JoinCallRequest, 'location'>;\nexport { AxiosError };\n", "// @generated by protobuf-ts 2.10.0 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"video/sfu/signal_rpc/signal.proto\" (package \"stream.video.sfu.signal\", syntax proto3)\n// tslint:disable\nimport type {\n  RpcOptions,\n  RpcTransport,\n  ServiceInfo,\n  UnaryCall,\n} from '@protobuf-ts/runtime-rpc';\nimport { stackIntercept } from '@protobuf-ts/runtime-rpc';\nimport type {\n  ICERestartRequest,\n  ICERestartResponse,\n  ICETrickleResponse,\n  SendAnswerRequest,\n  SendAnswerResponse,\n  SendStatsRequest,\n  SendStatsResponse,\n  SetPublisherRequest,\n  SetPublisherResponse,\n  StartNoiseCancellationRequest,\n  StartNoiseCancellationResponse,\n  StopNoiseCancellationRequest,\n  StopNoiseCancellationResponse,\n  UpdateMuteStatesRequest,\n  UpdateMuteStatesResponse,\n  UpdateSubscriptionsRequest,\n  UpdateSubscriptionsResponse,\n} from './signal';\nimport { SignalServer } from './signal';\nimport type { ICETrickle } from '../models/models';\n\n/**\n * @generated from protobuf service stream.video.sfu.signal.SignalServer\n */\nexport interface ISignalServerClient {\n  /**\n   * SetPublisher sends the WebRTC offer for the peer connection used to publish A/V\n   *\n   * @generated from protobuf rpc: SetPublisher(stream.video.sfu.signal.SetPublisherRequest) returns (stream.video.sfu.signal.SetPublisherResponse);\n   */\n  setPublisher(\n    input: SetPublisherRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SetPublisherRequest, SetPublisherResponse>;\n  /**\n   * answer is sent by the client to the SFU after receiving a subscriber_offer.\n   *\n   * @generated from protobuf rpc: SendAnswer(stream.video.sfu.signal.SendAnswerRequest) returns (stream.video.sfu.signal.SendAnswerResponse);\n   */\n  sendAnswer(\n    input: SendAnswerRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SendAnswerRequest, SendAnswerResponse>;\n  /**\n   * SendICECandidate sends an ICE candidate to the client\n   *\n   * @generated from protobuf rpc: IceTrickle(stream.video.sfu.models.ICETrickle) returns (stream.video.sfu.signal.ICETrickleResponse);\n   */\n  iceTrickle(\n    input: ICETrickle,\n    options?: RpcOptions,\n  ): UnaryCall<ICETrickle, ICETrickleResponse>;\n  /**\n   * UpdateSubscribers is used to notify the SFU about the list of video subscriptions\n   * TODO: sync subscriptions based on this + update tracks using the dimension info sent by the user\n   *\n   * @generated from protobuf rpc: UpdateSubscriptions(stream.video.sfu.signal.UpdateSubscriptionsRequest) returns (stream.video.sfu.signal.UpdateSubscriptionsResponse);\n   */\n  updateSubscriptions(\n    input: UpdateSubscriptionsRequest,\n    options?: RpcOptions,\n  ): UnaryCall<UpdateSubscriptionsRequest, UpdateSubscriptionsResponse>;\n  /**\n   * @generated from protobuf rpc: UpdateMuteStates(stream.video.sfu.signal.UpdateMuteStatesRequest) returns (stream.video.sfu.signal.UpdateMuteStatesResponse);\n   */\n  updateMuteStates(\n    input: UpdateMuteStatesRequest,\n    options?: RpcOptions,\n  ): UnaryCall<UpdateMuteStatesRequest, UpdateMuteStatesResponse>;\n  /**\n   * @generated from protobuf rpc: IceRestart(stream.video.sfu.signal.ICERestartRequest) returns (stream.video.sfu.signal.ICERestartResponse);\n   */\n  iceRestart(\n    input: ICERestartRequest,\n    options?: RpcOptions,\n  ): UnaryCall<ICERestartRequest, ICERestartResponse>;\n  /**\n   * @generated from protobuf rpc: SendStats(stream.video.sfu.signal.SendStatsRequest) returns (stream.video.sfu.signal.SendStatsResponse);\n   */\n  sendStats(\n    input: SendStatsRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SendStatsRequest, SendStatsResponse>;\n  /**\n   * @generated from protobuf rpc: StartNoiseCancellation(stream.video.sfu.signal.StartNoiseCancellationRequest) returns (stream.video.sfu.signal.StartNoiseCancellationResponse);\n   */\n  startNoiseCancellation(\n    input: StartNoiseCancellationRequest,\n    options?: RpcOptions,\n  ): UnaryCall<StartNoiseCancellationRequest, StartNoiseCancellationResponse>;\n  /**\n   * @generated from protobuf rpc: StopNoiseCancellation(stream.video.sfu.signal.StopNoiseCancellationRequest) returns (stream.video.sfu.signal.StopNoiseCancellationResponse);\n   */\n  stopNoiseCancellation(\n    input: StopNoiseCancellationRequest,\n    options?: RpcOptions,\n  ): UnaryCall<StopNoiseCancellationRequest, StopNoiseCancellationResponse>;\n}\n/**\n * @generated from protobuf service stream.video.sfu.signal.SignalServer\n */\nexport class SignalServerClient implements ISignalServerClient, ServiceInfo {\n  typeName = SignalServer.typeName;\n  methods = SignalServer.methods;\n  options = SignalServer.options;\n  constructor(private readonly _transport: RpcTransport) {}\n  /**\n   * SetPublisher sends the WebRTC offer for the peer connection used to publish A/V\n   *\n   * @generated from protobuf rpc: SetPublisher(stream.video.sfu.signal.SetPublisherRequest) returns (stream.video.sfu.signal.SetPublisherResponse);\n   */\n  setPublisher(\n    input: SetPublisherRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SetPublisherRequest, SetPublisherResponse> {\n    const method = this.methods[0],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<SetPublisherRequest, SetPublisherResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * answer is sent by the client to the SFU after receiving a subscriber_offer.\n   *\n   * @generated from protobuf rpc: SendAnswer(stream.video.sfu.signal.SendAnswerRequest) returns (stream.video.sfu.signal.SendAnswerResponse);\n   */\n  sendAnswer(\n    input: SendAnswerRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SendAnswerRequest, SendAnswerResponse> {\n    const method = this.methods[1],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<SendAnswerRequest, SendAnswerResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * SendICECandidate sends an ICE candidate to the client\n   *\n   * @generated from protobuf rpc: IceTrickle(stream.video.sfu.models.ICETrickle) returns (stream.video.sfu.signal.ICETrickleResponse);\n   */\n  iceTrickle(\n    input: ICETrickle,\n    options?: RpcOptions,\n  ): UnaryCall<ICETrickle, ICETrickleResponse> {\n    const method = this.methods[2],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<ICETrickle, ICETrickleResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * UpdateSubscribers is used to notify the SFU about the list of video subscriptions\n   * TODO: sync subscriptions based on this + update tracks using the dimension info sent by the user\n   *\n   * @generated from protobuf rpc: UpdateSubscriptions(stream.video.sfu.signal.UpdateSubscriptionsRequest) returns (stream.video.sfu.signal.UpdateSubscriptionsResponse);\n   */\n  updateSubscriptions(\n    input: UpdateSubscriptionsRequest,\n    options?: RpcOptions,\n  ): UnaryCall<UpdateSubscriptionsRequest, UpdateSubscriptionsResponse> {\n    const method = this.methods[3],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<\n      UpdateSubscriptionsRequest,\n      UpdateSubscriptionsResponse\n    >('unary', this._transport, method, opt, input);\n  }\n  /**\n   * @generated from protobuf rpc: UpdateMuteStates(stream.video.sfu.signal.UpdateMuteStatesRequest) returns (stream.video.sfu.signal.UpdateMuteStatesResponse);\n   */\n  updateMuteStates(\n    input: UpdateMuteStatesRequest,\n    options?: RpcOptions,\n  ): UnaryCall<UpdateMuteStatesRequest, UpdateMuteStatesResponse> {\n    const method = this.methods[4],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<UpdateMuteStatesRequest, UpdateMuteStatesResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * @generated from protobuf rpc: IceRestart(stream.video.sfu.signal.ICERestartRequest) returns (stream.video.sfu.signal.ICERestartResponse);\n   */\n  iceRestart(\n    input: ICERestartRequest,\n    options?: RpcOptions,\n  ): UnaryCall<ICERestartRequest, ICERestartResponse> {\n    const method = this.methods[5],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<ICERestartRequest, ICERestartResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * @generated from protobuf rpc: SendStats(stream.video.sfu.signal.SendStatsRequest) returns (stream.video.sfu.signal.SendStatsResponse);\n   */\n  sendStats(\n    input: SendStatsRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SendStatsRequest, SendStatsResponse> {\n    const method = this.methods[6],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<SendStatsRequest, SendStatsResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * @generated from protobuf rpc: StartNoiseCancellation(stream.video.sfu.signal.StartNoiseCancellationRequest) returns (stream.video.sfu.signal.StartNoiseCancellationResponse);\n   */\n  startNoiseCancellation(\n    input: StartNoiseCancellationRequest,\n    options?: RpcOptions,\n  ): UnaryCall<StartNoiseCancellationRequest, StartNoiseCancellationResponse> {\n    const method = this.methods[7],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<\n      StartNoiseCancellationRequest,\n      StartNoiseCancellationResponse\n    >('unary', this._transport, method, opt, input);\n  }\n  /**\n   * @generated from protobuf rpc: StopNoiseCancellation(stream.video.sfu.signal.StopNoiseCancellationRequest) returns (stream.video.sfu.signal.StopNoiseCancellationResponse);\n   */\n  stopNoiseCancellation(\n    input: StopNoiseCancellationRequest,\n    options?: RpcOptions,\n  ): UnaryCall<StopNoiseCancellationRequest, StopNoiseCancellationResponse> {\n    const method = this.methods[8],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<\n      StopNoiseCancellationRequest,\n      StopNoiseCancellationResponse\n    >('unary', this._transport, method, opt, input);\n  }\n}\n", "import {\n  MethodInfo,\n  NextUnaryFn,\n  RpcInterceptor,\n  RpcOptions,\n  UnaryCall,\n} from '@protobuf-ts/runtime-rpc';\nimport {\n  TwirpFetchTransport,\n  TwirpOptions,\n} from '@protobuf-ts/twirp-transport';\nimport { SignalServerClient } from '../gen/video/sfu/signal_rpc/signal.client';\nimport type { Trace } from '../stats';\nimport type { SfuResponseWithError } from './retryable';\nimport type { ScopedLogger } from '../logger';\nimport type { LogLevel } from '@stream-io/logger';\n\nconst defaultOptions: TwirpOptions = {\n  baseUrl: '',\n  sendJson: true,\n  timeout: 5 * 1000, // ms.\n  jsonOptions: {\n    ignoreUnknownFields: true,\n  },\n};\n\nexport const withHeaders = (\n  headers: Record<string, string>,\n): RpcInterceptor => {\n  return {\n    interceptUnary(\n      next: NextUnaryFn,\n      method: MethodInfo,\n      input: object,\n      options: RpcOptions,\n    ): UnaryCall {\n      options.meta = { ...options.meta, ...headers };\n      return next(method, input, options);\n    },\n  };\n};\n\nexport const withRequestLogger = (\n  logger: ScopedLogger,\n  level: LogLevel,\n): RpcInterceptor => {\n  return {\n    interceptUnary: (\n      next: NextUnaryFn,\n      method: MethodInfo,\n      input: object,\n      options: RpcOptions,\n    ): UnaryCall => {\n      const invocation = next(method, input, options);\n      logger[level](`Invoked SFU RPC method ${method.name}`, {\n        request: invocation.request,\n        headers: invocation.requestHeaders,\n        response: invocation.response,\n      });\n\n      return invocation;\n    },\n  };\n};\n\nexport const withRequestTracer = (trace: Trace): RpcInterceptor => {\n  type RpcMethodNames = {\n    [K in keyof SignalServerClient as Capitalize<K>]: boolean;\n  };\n\n  const traceError = (name: string, input: object, err: unknown) =>\n    trace(`${name}OnFailure`, [err, input]);\n\n  const exclusions: Record<string, boolean | undefined> = {\n    SendStats: true,\n  } satisfies Partial<RpcMethodNames>;\n  return {\n    interceptUnary(\n      next: NextUnaryFn,\n      method: MethodInfo,\n      input: object,\n      options: RpcOptions,\n    ): UnaryCall {\n      if (exclusions[method.name as keyof RpcMethodNames]) {\n        return next(method, input, options);\n      }\n\n      trace(method.name, input);\n      const unaryCall = next(method, input, options);\n      unaryCall.then(\n        (invocation) => {\n          const err = (invocation.response as SfuResponseWithError)?.error;\n          if (err) traceError(method.name, input, err);\n        },\n        (err) => traceError(method.name, input, err),\n      );\n      return unaryCall;\n    },\n  };\n};\n\n/**\n * Creates new SignalServerClient instance.\n *\n * @param options the twirp options.\n */\nexport const createSignalClient = (options?: TwirpOptions) => {\n  const transport = new TwirpFetchTransport({\n    ...defaultOptions,\n    ...options,\n  });\n\n  return new SignalServerClient(transport);\n};\n", "import type { AxiosResponse } from 'axios';\nimport type { APIErrorResponse } from './types';\nimport type { ConnectionErrorEvent } from '../../gen/coordinator';\n\nexport const sleep = (m: number) => new Promise((r) => setTimeout(r, m));\n\nexport function isFunction<T>(value: Function | T): value is Function {\n  return (\n    value &&\n    (Object.prototype.toString.call(value) === '[object Function]' ||\n      'function' === typeof value ||\n      value instanceof Function)\n  );\n}\n\n/**\n * A map of known error codes.\n */\nexport const KnownCodes = {\n  TOKEN_EXPIRED: 40,\n  WS_CLOSED_SUCCESS: 1000,\n};\n\n/**\n * retryInterval - A retry interval which increases acc to number of failures\n *\n * @return {number} Duration to wait in milliseconds\n */\nexport function retryInterval(numberOfFailures: number): number {\n  // try to reconnect in 0.25-5 seconds (random to spread out the load from failures)\n  const max = Math.min(500 + numberOfFailures * 2000, 5000);\n  const min = Math.min(Math.max(250, (numberOfFailures - 1) * 2000), 5000);\n  return Math.floor(Math.random() * (max - min) + min);\n}\n\nfunction hex(bytes: Uint8Array): string {\n  let s = '';\n  for (let i = 0; i < bytes.length; i++) {\n    s += bytes[i].toString(16).padStart(2, '0');\n  }\n  return s;\n}\n\n// https://tools.ietf.org/html/rfc4122\nexport function generateUUIDv4() {\n  const bytes = getRandomBytes(16);\n  bytes[6] = (bytes[6] & 0x0f) | 0x40; // version\n  bytes[8] = (bytes[8] & 0xbf) | 0x80; // variant\n\n  return [\n    hex(bytes.subarray(0, 4)),\n    hex(bytes.subarray(4, 6)),\n    hex(bytes.subarray(6, 8)),\n    hex(bytes.subarray(8, 10)),\n    hex(bytes.subarray(10, 16)),\n  ].join('-');\n}\n\nconst getRandomValues = (() => {\n  if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\n    return crypto.getRandomValues.bind(crypto);\n  }\n  return function getRandomValuesWithMathRandom(bytes: Uint8Array): void {\n    const max = Math.pow(2, (8 * bytes.byteLength) / bytes.length);\n    for (let i = 0; i < bytes.length; i++) {\n      bytes[i] = Math.random() * max;\n    }\n  };\n})();\n\nfunction getRandomBytes(length: number): Uint8Array {\n  const bytes = new Uint8Array(length);\n  getRandomValues(bytes);\n  return bytes;\n}\n\n/**\n * listenForConnectionChanges - Adds an event listener fired on browser going online or offline\n */\nexport function addConnectionEventListeners(cb: (e: Event) => void) {\n  if (typeof window !== 'undefined' && window.addEventListener) {\n    window.addEventListener('offline', cb);\n    window.addEventListener('online', cb);\n  }\n}\n\nexport function removeConnectionEventListeners(cb: (e: Event) => void) {\n  if (typeof window !== 'undefined' && window.removeEventListener) {\n    window.removeEventListener('offline', cb);\n    window.removeEventListener('online', cb);\n  }\n}\n\nexport function isErrorResponse(\n  res: AxiosResponse<unknown>,\n): res is AxiosResponse<APIErrorResponse> {\n  return !res.status || res.status < 200 || 300 <= res.status;\n}\n\n// Type guards to check WebSocket error type\nexport function isCloseEvent(\n  res: CloseEvent | ConnectionErrorEvent,\n): res is CloseEvent {\n  return (res as CloseEvent).code !== undefined;\n}\n", "/**\n * Checks whether we are using React Native\n */\nexport const isReactNative = () => {\n  if (typeof navigator === 'undefined') return false;\n  return navigator.product?.toLowerCase() === 'reactnative';\n};\n", "import * as scopedLogger from '@stream-io/logger';\nimport { isReactNative } from './helpers/platforms';\nimport type { Logger } from './coordinator/connection/types';\n\nexport const logToConsole: Logger = (logLevel, message, ...args) => {\n  let logMethod;\n  switch (logLevel) {\n    case 'error':\n      if (isReactNative()) {\n        message = `ERROR: ${message}`;\n        logMethod = console.info;\n        break;\n      }\n      logMethod = console.error;\n      break;\n    case 'warn':\n      if (isReactNative()) {\n        message = `WARN: ${message}`;\n        logMethod = console.info;\n        break;\n      }\n      logMethod = console.warn;\n      break;\n    case 'info':\n      logMethod = console.info;\n      break;\n    case 'trace':\n      logMethod = console.trace;\n      break;\n    default:\n      logMethod = console.log;\n      break;\n  }\n\n  logMethod(message, ...args);\n};\n\n/**\n * @internal\n */\nexport type ScopedLogger = scopedLogger.Logger;\n\nexport { LogLevelEnum } from '@stream-io/logger';\nexport type { LogLevel, Sink } from '@stream-io/logger';\n\nexport const videoLoggerSystem = scopedLogger.createLoggerSystem();\n", "import {\n  FinishedUnaryCall,\n  RpcError,\n  UnaryCall,\n} from '@protobuf-ts/runtime-rpc';\nimport { TwirpErrorCode } from '@protobuf-ts/twirp-transport';\nimport { retryInterval, sleep } from '../coordinator/connection/utils';\nimport { Error as SfuError } from '../gen/video/sfu/models/models';\nimport { videoLoggerSystem } from '../logger';\n\n/**\n * An internal interface which asserts that \"retryable\" SFU responses\n * contain a field called \"error\".\n * Ideally, this should be coming from the Protobuf definitions.\n */\nexport interface SfuResponseWithError {\n  /**\n   * An optional error field which should be present in all SFU responses.\n   */\n  error?: SfuError;\n}\n\n/**\n * Creates a closure which wraps the given RPC call and retries invoking\n * the RPC until it succeeds or the maximum number of retries is reached.\n *\n * For each retry, there would be a delay to avoid request bursts toward the SFU.\n *\n * @param rpc the closure around the RPC call to execute.\n * @param signal the signal to abort the RPC call and retries loop.\n */\nexport const retryable = async <\n  I extends object,\n  O extends SfuResponseWithError,\n>(\n  rpc: () => UnaryCall<I, O>,\n  signal?: AbortSignal,\n): Promise<FinishedUnaryCall<I, O>> => {\n  let attempt = 0;\n  let result: FinishedUnaryCall<I, O> | undefined = undefined;\n  do {\n    if (attempt > 0) await sleep(retryInterval(attempt));\n    try {\n      result = await rpc();\n    } catch (err) {\n      const isRequestCancelled =\n        err instanceof RpcError &&\n        err.code === TwirpErrorCode[TwirpErrorCode.cancelled];\n      const isAborted = signal?.aborted ?? false;\n      if (isRequestCancelled || isAborted) throw err;\n      videoLoggerSystem\n        .getLogger('sfu-client', { tags: ['rpc'] })\n        .debug(`rpc failed (${attempt})`, err);\n      attempt++;\n    }\n  } while (!result || result.response.error?.shouldRetry);\n\n  return result;\n};\n", "import { parse, write } from 'sdp-transform';\n\n/**\n * Extracts the mid from the transceiver or the SDP.\n *\n * @param transceiver the transceiver.\n * @param transceiverInitIndex the index of the transceiver in the transceiver's init array.\n * @param sdp the SDP.\n */\nexport const extractMid = (\n  transceiver: RTCRtpTransceiver,\n  transceiverInitIndex: number,\n  sdp: string | undefined,\n): string => {\n  if (transceiver.mid) return transceiver.mid;\n  if (!sdp) return String(transceiverInitIndex);\n\n  const track = transceiver.sender.track!;\n  const parsedSdp = parse(sdp);\n  const media = parsedSdp.media.find((m) => {\n    return (\n      m.type === track.kind &&\n      // if `msid` is not present, we assume that the track is the first one\n      (m.msid?.includes(track.id) ?? true)\n    );\n  });\n  if (typeof media?.mid !== 'undefined') return String(media.mid);\n  if (transceiverInitIndex < 0) return '';\n  return String(transceiverInitIndex);\n};\n\n/**\n * Enables stereo in the answer SDP based on the offered stereo in the offer SDP.\n *\n * @param offerSdp the offer SDP containing the stereo configuration.\n * @param answerSdp the answer SDP to be modified.\n */\nexport const enableStereo = (offerSdp: string, answerSdp: string): string => {\n  const offeredStereoMids = new Set<string>();\n  const parsedOfferSdp = parse(offerSdp);\n  for (const media of parsedOfferSdp.media) {\n    if (media.type !== 'audio') continue;\n\n    const opus = media.rtp.find((r) => r.codec === 'opus');\n    if (!opus) continue;\n\n    for (const fmtp of media.fmtp) {\n      if (fmtp.payload === opus.payload && fmtp.config.includes('stereo=1')) {\n        offeredStereoMids.add(media.mid!);\n      }\n    }\n  }\n\n  // No stereo offered, return the original answerSdp\n  if (offeredStereoMids.size === 0) return answerSdp;\n\n  const parsedAnswerSdp = parse(answerSdp);\n  for (const media of parsedAnswerSdp.media) {\n    if (media.type !== 'audio' || !offeredStereoMids.has(media.mid!)) continue;\n\n    const opus = media.rtp.find((r) => r.codec === 'opus');\n    if (!opus) continue;\n\n    for (const fmtp of media.fmtp) {\n      if (fmtp.payload === opus.payload && !fmtp.config.includes('stereo=1')) {\n        fmtp.config += ';stereo=1';\n      }\n    }\n  }\n\n  return write(parsedAnswerSdp);\n};\n\n/**\n * Removes all codecs from the SDP except the specified codec.\n *\n * @param sdp the SDP to modify.\n * @param codecMimeTypeToKeep the codec mime type to keep (video/h264 or audio/opus).\n * @param fmtpProfileToKeep the fmtp profile to keep (e.g. 'profile-level-id=42e01f' or multiple segments like 'profile-level-id=64001f;packetization-mode=1').\n */\nexport const removeCodecsExcept = (\n  sdp: string,\n  codecMimeTypeToKeep: string,\n  fmtpProfileToKeep: string | undefined,\n): string => {\n  const [kind, codec] = toMimeType(codecMimeTypeToKeep).split('/');\n  if (!kind || !codec) return sdp;\n\n  const parsed = parse(sdp);\n  for (const media of parsed.media) {\n    if (media.type !== kind) continue;\n\n    // Build a set of payloads to KEEP: all payloads whose rtp.codec matches codec\n    let payloadsToKeep = new Set<number>();\n    for (const rtp of media.rtp) {\n      if (rtp.codec.toLowerCase() !== codec) continue;\n      payloadsToKeep.add(rtp.payload);\n    }\n\n    // If a specific fmtp profile is requested, only keep payloads whose fmtp config matches it\n    if (fmtpProfileToKeep) {\n      const filtered = new Set<number>();\n      const required = new Set(fmtpProfileToKeep.split(';'));\n      for (const fmtp of media.fmtp) {\n        if (\n          payloadsToKeep.has(fmtp.payload) &&\n          required.difference(new Set(fmtp.config.split(';'))).size === 0\n        ) {\n          filtered.add(fmtp.payload);\n        }\n      }\n      payloadsToKeep = filtered;\n    }\n\n    // If no payloads to keep AND no fmtpProfile was specified, skip modifications (preserve SDP as-is)\n    if (payloadsToKeep.size === 0 && !fmtpProfileToKeep) continue;\n\n    // Keep RTX payloads that are associated with kept primary payloads via apt\n    // RTX mappings look like: a=fmtp:<rtxPayload> apt=<primaryPayload>\n    for (const fmtp of media.fmtp) {\n      const matches = /\\s*apt\\s*=\\s*(\\d+)\\s*/i.exec(fmtp.config);\n      if (!matches) continue;\n\n      const primaryPayloadApt = Number(matches[1]);\n      if (!payloadsToKeep.has(primaryPayloadApt)) continue;\n      payloadsToKeep.add(fmtp.payload);\n    }\n\n    // Filter rtp, fmtp and rtcpFb entries\n    media.rtp = media.rtp.filter((rtp) => payloadsToKeep.has(rtp.payload));\n    media.fmtp = media.fmtp.filter((fmtp) => payloadsToKeep.has(fmtp.payload));\n    media.rtcpFb = media.rtcpFb?.filter((fb) =>\n      typeof fb.payload === 'number' ? payloadsToKeep.has(fb.payload) : true,\n    );\n\n    // Update the m= line payload list to only the kept payloads, preserving original order\n    const payloads: number[] = [];\n    for (const id of (media.payloads || '').split(/\\s+/)) {\n      const payload = Number(id);\n      if (!payloadsToKeep.has(payload)) continue;\n      payloads.push(payload);\n    }\n    media.payloads = payloads.join(' ');\n  }\n\n  return write(parsed);\n};\n\n/**\n * Converts the given codec to a mime-type format when necessary.\n * e.g.: `vp9` -> `video/vp9`\n */\nconst toMimeType = (codec: string, kind: 'video' | 'audio' = 'video') =>\n  codec.includes('/') ? codec : `${kind}/${codec}`;\n", "import { removeCodecsExcept } from './helpers/sdp';\n\n/**\n * Returns a generic SDP for the given direction.\n * We use this SDP to send it as part of our JoinRequest so that the SFU\n * can use it to determine the client's codec capabilities.\n *\n * @param direction the direction of the transceiver.\n * @param codecToKeep the codec mime type to keep (video/h264 or audio/opus).\n * @param fmtpProfileToKeep optional fmtp profile to keep.\n */\nexport const getGenericSdp = async (\n  direction: RTCRtpTransceiverDirection,\n  codecToKeep: string | undefined,\n  fmtpProfileToKeep: string | undefined,\n) => {\n  const tempPc = new RTCPeerConnection();\n  tempPc.addTransceiver('video', { direction });\n  tempPc.addTransceiver('audio', { direction });\n\n  const offer = await tempPc.createOffer();\n  const { sdp: baseSdp = '' } = offer;\n  const sdp = codecToKeep\n    ? removeCodecsExcept(baseSdp, codecToKeep, fmtpProfileToKeep)\n    : baseSdp;\n\n  tempPc.getTransceivers().forEach((t) => {\n    t.stop?.();\n  });\n  tempPc.close();\n  return sdp;\n};\n\n/**\n * Returns whether the codec is an SVC codec.\n *\n * @param codecOrMimeType the codec to check.\n */\nexport const isSvcCodec = (codecOrMimeType: string | undefined) => {\n  if (!codecOrMimeType) return false;\n  codecOrMimeType = codecOrMimeType.toLowerCase();\n  return (\n    codecOrMimeType === 'vp9' ||\n    codecOrMimeType === 'av1' ||\n    codecOrMimeType === 'video/vp9' ||\n    codecOrMimeType === 'video/av1'\n  );\n};\n", "import { CallEventListener, EventTypes } from '../coordinator/connection/types';\nimport type { SfuEvent } from '../gen/video/sfu/event/events';\nimport { videoLoggerSystem } from '../logger';\n\nexport type SfuEventKinds = NonNullable<SfuEvent['eventPayload']['oneofKind']>;\nexport type AllSfuEvents = {\n  [K in SfuEventKinds]: K extends keyof Extract<\n    SfuEvent['eventPayload'],\n    { oneofKind: K }\n  >\n    ? Extract<SfuEvent['eventPayload'], { oneofKind: K }>[K]\n    : never;\n};\n\nexport type DispatchableMessage<K extends SfuEventKinds> = {\n  eventPayload: {\n    oneofKind: K;\n  } & {\n    [Key in K]: AllSfuEvents[Key];\n  };\n};\n\nconst sfuEventKinds: Record<SfuEventKinds, undefined> = {\n  subscriberOffer: undefined,\n  publisherAnswer: undefined,\n  connectionQualityChanged: undefined,\n  audioLevelChanged: undefined,\n  iceTrickle: undefined,\n  changePublishQuality: undefined,\n  participantJoined: undefined,\n  participantLeft: undefined,\n  dominantSpeakerChanged: undefined,\n  joinResponse: undefined,\n  healthCheckResponse: undefined,\n  trackPublished: undefined,\n  trackUnpublished: undefined,\n  error: undefined,\n  callGrantsUpdated: undefined,\n  goAway: undefined,\n  iceRestart: undefined,\n  pinsUpdated: undefined,\n  callEnded: undefined,\n  participantUpdated: undefined,\n  participantMigrationComplete: undefined,\n  changePublishOptions: undefined,\n  inboundStateNotification: undefined,\n};\n\nexport const isSfuEvent = (\n  eventName: SfuEventKinds | EventTypes,\n): eventName is SfuEventKinds => {\n  return Object.prototype.hasOwnProperty.call(sfuEventKinds, eventName);\n};\n\nexport class Dispatcher {\n  private readonly logger = videoLoggerSystem.getLogger('Dispatcher');\n  private subscribers: Partial<\n    Record<SfuEventKinds, CallEventListener<any>[] | undefined>\n  > = {};\n\n  dispatch = <K extends SfuEventKinds>(\n    message: DispatchableMessage<K>,\n    tag: string = '0',\n  ) => {\n    const eventKind = message.eventPayload.oneofKind;\n    if (!eventKind) return;\n    const payload = message.eventPayload[eventKind];\n    this.logger.debug(`Dispatching ${eventKind}, tag=${tag}`, payload);\n    const listeners = this.subscribers[eventKind];\n    if (!listeners) return;\n    for (const fn of listeners) {\n      try {\n        fn(payload);\n      } catch (e) {\n        this.logger.warn('Listener failed with error', e);\n      }\n    }\n  };\n\n  on = <E extends keyof AllSfuEvents>(\n    eventName: E,\n    fn: CallEventListener<E>,\n  ) => {\n    (this.subscribers[eventName] ??= []).push(fn as never);\n    return () => {\n      this.off(eventName, fn);\n    };\n  };\n\n  off = <E extends keyof AllSfuEvents>(\n    eventName: E,\n    fn: CallEventListener<E>,\n  ) => {\n    this.subscribers[eventName] = (this.subscribers[eventName] || []).filter(\n      (f) => f !== fn,\n    );\n  };\n}\n", "import { ReplaySubject } from 'rxjs';\nimport { ICETrickle } from '../gen/video/sfu/event/events';\nimport { PeerType } from '../gen/video/sfu/models/models';\nimport { videoLoggerSystem } from '../logger';\n\n/**\n * A buffer for ICE Candidates. Used for ICE Trickle:\n * - https://bloggeek.me/webrtcglossary/trickle-ice/\n */\nexport class IceTrickleBuffer {\n  readonly subscriberCandidates = new ReplaySubject<RTCIceCandidateInit>();\n  readonly publisherCandidates = new ReplaySubject<RTCIceCandidateInit>();\n\n  push = (iceTrickle: ICETrickle) => {\n    const iceCandidate = toIceCandidate(iceTrickle);\n    if (!iceCandidate) return;\n\n    if (iceTrickle.peerType === PeerType.SUBSCRIBER) {\n      this.subscriberCandidates.next(iceCandidate);\n    } else if (iceTrickle.peerType === PeerType.PUBLISHER_UNSPECIFIED) {\n      this.publisherCandidates.next(iceCandidate);\n    } else {\n      const logger = videoLoggerSystem.getLogger('sfu-client');\n      logger.warn(`ICETrickle, Unknown peer type`, iceTrickle);\n    }\n  };\n\n  dispose = () => {\n    this.subscriberCandidates.complete();\n    this.publisherCandidates.complete();\n  };\n}\n\nconst toIceCandidate = (\n  iceTrickle: ICETrickle,\n): RTCIceCandidateInit | undefined => {\n  try {\n    return JSON.parse(iceTrickle.iceCandidate);\n  } catch (e) {\n    const logger = videoLoggerSystem.getLogger('sfu-client');\n    logger.error(`Failed to parse ICE Trickle`, e, iceTrickle);\n    return undefined;\n  }\n};\n", "interface PendingPromise {\n  promise: Promise<unknown>;\n  onContinued: () => void;\n}\n\ntype AsyncWrapper<P extends unknown[], T> = (\n  tag: string | symbol,\n  cb: (...args: P) => Promise<T>,\n) => {\n  cb: () => Promise<T>;\n  onContinued: () => void;\n};\n\n/**\n * Runs async functions serially. Useful for wrapping async actions that\n * should never run simultaneously: if marked with the same tag, functions\n * will run one after another.\n *\n * @param tag Async functions with the same tag will run serially. Async functions\n * with different tags can run in parallel.\n * @param cb Async function to run.\n * @returns Promise that resolves when async functions returns.\n */\nexport const withoutConcurrency = createRunner(wrapWithContinuationTracking);\n\n/**\n * Runs async functions serially, and cancels all other actions with the same tag\n * when a new action is scheduled. Useful for wrapping async actions that override\n * each other (e.g. enabling and disabling camera).\n *\n * If an async function hasn't started yet and was canceled, it will never run.\n * If an async function is already running and was canceled, it will be notified\n * via an abort signal passed as an argument.\n *\n * @param tag Async functions with the same tag will run serially and are canceled\n * when a new action with the same tag is scheduled.\n * @param cb Async function to run. Receives AbortSignal as the only argument.\n * @returns Promise that resolves when async functions returns. If the function didn't\n * start and was canceled, will resolve with 'canceled'. If the function started to run,\n * it's up to the function to decide how to react to cancelation.\n */\nexport const withCancellation = createRunner(wrapWithCancellation);\n\nconst pendingPromises = new Map<string | symbol, PendingPromise>();\n\nexport function hasPending(tag: string | symbol) {\n  return pendingPromises.has(tag);\n}\n\nexport async function settled(tag: string | symbol) {\n  let pending: PendingPromise | undefined;\n  while ((pending = pendingPromises.get(tag))) {\n    await pending.promise;\n  }\n}\n\n/**\n * Implements common functionality of running async functions serially, by chaining\n * their promises one after another.\n *\n * Before running, async function is \"wrapped\" using the provided wrapper. This wrapper\n * can add additional steps to run before or after the function.\n *\n * When async function is scheduled to run, the previous function is notified\n * by calling the associated onContinued callback. This behavior of this callback\n * is defined by the wrapper.\n */\nfunction createRunner<P extends unknown[], T>(wrapper: AsyncWrapper<P, T>) {\n  return function run(tag: string | symbol, cb: (...args: P) => Promise<T>) {\n    const { cb: wrapped, onContinued } = wrapper(tag, cb);\n    const pending = pendingPromises.get(tag);\n    pending?.onContinued();\n    const promise = pending\n      ? pending.promise.then(wrapped, wrapped)\n      : wrapped();\n    pendingPromises.set(tag, { promise, onContinued });\n    return promise;\n  };\n}\n\n/**\n * Wraps an async function with an additional step run after the function:\n * if the function is the last in the queue, it cleans up the whole chain\n * of promises after finishing.\n */\nfunction wrapWithContinuationTracking<T>(\n  tag: string | symbol,\n  cb: () => Promise<T>,\n) {\n  let hasContinuation = false;\n  const wrapped = () =>\n    cb().finally(() => {\n      if (!hasContinuation) {\n        pendingPromises.delete(tag);\n      }\n    });\n  const onContinued = () => (hasContinuation = true);\n  return { cb: wrapped, onContinued };\n}\n\n/**\n * Wraps an async function with additional functionalilty:\n * 1. Associates an abort signal with every function, that is passed to it\n *    as an argument. When a new function is scheduled to run after the current\n *    one, current signal is aborted.\n * 2. If current function didn't start and was aborted, in will never start.\n * 3. If the function is the last in the queue, it cleans up the whole chain\n *    of promises after finishing.\n */\nfunction wrapWithCancellation<T>(\n  tag: string | symbol,\n  cb: (signal: AbortSignal) => Promise<T | 'canceled'>,\n) {\n  const ac = new AbortController();\n  const wrapped = () => {\n    if (ac.signal.aborted) {\n      return Promise.resolve('canceled' as const);\n    }\n\n    return cb(ac.signal).finally(() => {\n      if (!ac.signal.aborted) {\n        pendingPromises.delete(tag);\n      }\n    });\n  };\n  const onContinued = () => ac.abort();\n  return { cb: wrapped, onContinued };\n}\n", "import { BehaviorSubject, combineLatest, Observable, Subject } from 'rxjs';\nimport { withoutConcurrency } from '../helpers/concurrency';\nimport { videoLoggerSystem } from '../logger';\n\ntype FunctionPatch<T> = (currentValue: T) => T;\n\n/**\n * A value or a function which takes the current value and returns a new value.\n */\nexport type Patch<T> = T | FunctionPatch<T>;\n\n/**\n * Checks if the provided update is a function patch.\n *\n * @param update the value to check.\n */\nconst isFunctionPatch = <T>(update: Patch<T>): update is FunctionPatch<T> =>\n  typeof update === 'function';\n\n/**\n * Gets the current value of an observable, or undefined if the observable has\n * not emitted a value yet.\n *\n * @param observable$ the observable to get the value from.\n */\nexport const getCurrentValue = <T>(observable$: Observable<T>) => {\n  let value!: T;\n  let err: Error | undefined = undefined;\n  combineLatest([observable$])\n    .subscribe({\n      next: ([v]) => {\n        value = v;\n      },\n      error: (e) => {\n        err = e;\n      },\n    })\n    .unsubscribe();\n\n  if (err) throw err;\n  return value;\n};\n\n/**\n * Updates the value of the provided Subject.\n * An `update` can either be a new value or a function which takes\n * the current value and returns a new value.\n *\n * @param subject the subject to update.\n * @param update the update to apply to the subject.\n * @return the updated value.\n */\nexport const setCurrentValue = <T>(subject: Subject<T>, update: Patch<T>) => {\n  const next = isFunctionPatch(update)\n    ? update(getCurrentValue(subject))\n    : update;\n\n  subject.next(next);\n  return next;\n};\n\n/**\n * Updates the value of the provided Subject and returns the previous value\n * and a function to roll back the update.\n * This is useful when you want to optimistically update a value\n * and roll back the update if an error occurs.\n *\n * @param subject the subject to update.\n * @param update the update to apply to the subject.\n */\nexport const updateValue = <T>(\n  subject: BehaviorSubject<T>,\n  update: Patch<T>,\n) => {\n  const lastValue = subject.getValue();\n  const value = setCurrentValue(subject, update);\n  return {\n    lastValue,\n    value,\n    rollback: () => setCurrentValue(subject, lastValue),\n  };\n};\n\n/**\n * Creates a subscription and returns a function to unsubscribe.\n *\n * @param observable the observable to subscribe to.\n * @param handler the handler to call when the observable emits a value.\n * @param onError an optional error handler.\n */\nexport const createSubscription = <T>(\n  observable: Observable<T>,\n  handler: (value: T) => void,\n  onError: (error: any) => void = (error) =>\n    videoLoggerSystem\n      .getLogger('RxUtils')\n      .warn('An observable emitted an error', error),\n) => {\n  const subscription = observable.subscribe({ next: handler, error: onError });\n  return () => {\n    subscription.unsubscribe();\n  };\n};\n\n/**\n * Creates a subscription and returns a function to unsubscribe. Makes sure that\n * only one async handler runs at the same time. If updates come in quicker than\n * it takes for the current handler to finish, other handlers will wait.\n *\n * @param observable the observable to subscribe to.\n * @param handler the async handler to call when the observable emits a value.\n */\nexport const createSafeAsyncSubscription = <T>(\n  observable: Observable<T>,\n  handler: (value: T) => Promise<void>,\n) => {\n  const tag = Symbol();\n  return createSubscription(observable, (value) => {\n    withoutConcurrency(tag, () => handler(value));\n  });\n};\n", "/**\n * Represents the state of the current call.\n */\nexport enum CallingState {\n  /**\n   * The call is in an unknown state.\n   */\n  UNKNOWN = 'unknown',\n\n  /**\n   * The call is in an idle state.\n   */\n  IDLE = 'idle',\n\n  /**\n   * The call is in the process of ringing.\n   * (User hasn't accepted nor rejected the call yet.)\n   */\n  RINGING = 'ringing',\n\n  /**\n   * The call is in the process of joining.\n   */\n  JOINING = 'joining',\n\n  /**\n   * The call is currently active.\n   */\n  JOINED = 'joined',\n\n  /**\n   * The call has been left.\n   */\n  LEFT = 'left',\n\n  /**\n   * The call is in the process of reconnecting.\n   */\n  RECONNECTING = 'reconnecting',\n\n  /**\n   * The call is in the process of migrating from one node to another.\n   */\n  MIGRATING = 'migrating',\n\n  /**\n   * The call has failed to reconnect.\n   */\n  RECONNECTING_FAILED = 'reconnecting-failed',\n\n  /**\n   * The call is in offline mode.\n   */\n  OFFLINE = 'offline',\n}\n", "import { BehaviorSubject, Observable } from 'rxjs';\nimport type { Patch } from './rxUtils';\nimport * as RxUtils from './rxUtils';\nimport { Call } from '../Call';\nimport { CallingState } from './CallingState';\nimport type { OwnUserResponse } from '../gen/coordinator';\nimport { videoLoggerSystem } from '../logger';\n\nexport class StreamVideoWriteableStateStore {\n  /**\n   * A store keeping data of a successfully connected user over WS to the coordinator server.\n   */\n  connectedUserSubject = new BehaviorSubject<OwnUserResponse | undefined>(\n    undefined,\n  );\n\n  /**\n   * A list of {@link Call} objects created/tracked by this client.\n   */\n  callsSubject = new BehaviorSubject<Call[]>([]);\n\n  constructor() {\n    this.connectedUserSubject.subscribe(async (user) => {\n      // leave all calls when the user disconnects.\n      if (!user) {\n        const logger = videoLoggerSystem.getLogger('client-state');\n        for (const call of this.calls) {\n          if (call.state.callingState === CallingState.LEFT) continue;\n\n          logger.info(`User disconnected, leaving call: ${call.cid}`);\n          await call\n            .leave({ message: 'client.disconnectUser() called' })\n            .catch((err) => {\n              logger.error(`Error leaving call: ${call.cid}`, err);\n            });\n        }\n      }\n    });\n  }\n\n  /**\n   * The currently connected user.\n   */\n  get connectedUser(): OwnUserResponse | undefined {\n    return RxUtils.getCurrentValue(this.connectedUserSubject);\n  }\n\n  /**\n   * Sets the currently connected user.\n   *\n   * @internal\n   * @param user the user to set as connected.\n   */\n  setConnectedUser = (user: Patch<OwnUserResponse | undefined>) => {\n    return RxUtils.setCurrentValue(this.connectedUserSubject, user);\n  };\n\n  /**\n   * A list of {@link Call} objects created/tracked by this client.\n   */\n  get calls(): Call[] {\n    return RxUtils.getCurrentValue(this.callsSubject);\n  }\n\n  /**\n   * Sets the list of {@link Call} objects created/tracked by this client.\n   * @param calls\n   */\n  setCalls = (calls: Patch<Call[]>) => {\n    return RxUtils.setCurrentValue(this.callsSubject, calls);\n  };\n\n  /**\n   * Adds a {@link Call} object to the list of {@link Call} objects created/tracked by this client.\n   *\n   * @param call the call to add.\n   */\n  registerCall = (call: Call) => {\n    if (!this.calls.find((c) => c.cid === call.cid)) {\n      this.setCalls((calls) => [...calls, call]);\n    }\n  };\n\n  /**\n   * Removes a {@link Call} object from the list of {@link Call} objects created/tracked by this client.\n   *\n   * @param call the call to remove\n   */\n  unregisterCall = (call: Call) => {\n    const logger = videoLoggerSystem.getLogger('client-state');\n    logger.trace(`Unregistering call: ${call.cid}`);\n    return this.setCalls((calls) => calls.filter((c) => c !== call));\n  };\n\n  /**\n   * Finds a {@link Call} object in the list of {@link Call} objects created/tracked by this client.\n   *\n   * @param type the type of call to find.\n   * @param id the id of the call to find.\n   */\n  findCall = (type: string, id: string) => {\n    return this.calls.find((c) => c.type === type && c.id === id);\n  };\n}\n\n/**\n * A reactive store that exposes state variables in a reactive manner.\n * You can subscribe to changes of the different state variables.\n * This central store contains all the state variables related to [`StreamVideoClient`](./StreamVideClient.md) and [`Call`](./Call.md).\n */\nexport class StreamVideoReadOnlyStateStore {\n  /**\n   * Data describing a user successfully connected over WS to coordinator server.\n   */\n  connectedUser$: Observable<OwnUserResponse | undefined>;\n\n  /**\n   * A list of {@link Call} objects created/tracked by this client.\n   */\n  calls$: Observable<Call[]>;\n\n  constructor(store: StreamVideoWriteableStateStore) {\n    // convert and expose subjects as observables\n    this.connectedUser$ = store.connectedUserSubject.asObservable();\n    this.calls$ = store.callsSubject.asObservable();\n  }\n\n  /**\n   * The current user connected over WS to the backend.\n   */\n  get connectedUser(): OwnUserResponse | undefined {\n    return RxUtils.getCurrentValue(this.connectedUser$);\n  }\n\n  /**\n   * A list of {@link Call} objects created/tracked by this client.\n   */\n  get calls(): Call[] {\n    return RxUtils.getCurrentValue(this.calls$);\n  }\n}\n", "/**\n * Defines a comparator function which can be used for sorting items.\n */\nexport type Comparator<T> = (a: T, b: T) => -1 | 0 | 1;\n\n/**\n * Creates a new combined {@link Comparator<T>} which sorts items by the given comparators.\n * The comparators are applied in the order they are given (left -> right).\n *\n * @param comparators the comparators to use for sorting.\n * @returns a combined {@link Comparator<T>}.\n */\nexport const combineComparators = <T>(\n  ...comparators: Comparator<T>[]\n): Comparator<T> => {\n  return (a, b) => {\n    for (const comparator of comparators) {\n      const result = comparator(a, b);\n      if (result !== 0) return result;\n    }\n    return 0;\n  };\n};\n\n/**\n * Creates a new comparator which sorts items in descending order.\n *\n * @example\n * const byValue = (a, b) => a < b ? - 1 : a > b ? 1 : 0;\n * const byValueDesc = descending(byValue);\n *\n * @param comparator the comparator to wrap.\n */\nexport const descending = <T>(comparator: Comparator<T>): Comparator<T> => {\n  return (a, b) => comparator(b, a);\n};\n\n/**\n * Creates a new comparator which conditionally applies the given comparator.\n *\n * @example\n * const shouldSortByValue = (a, b) => a % 2 === 0; // return false to turn it off\n * const byValue = (a, b) => a < b ? - 1 : a > b ? 1 : 0;\n * const comparator = conditional(shouldSortByValue)(byValue);\n *\n * @param predicate the predicate to use for determining whether to apply the comparator.\n */\nexport const conditional = <T>(predicate: (a: T, b: T) => boolean) => {\n  return (comparator: Comparator<T>): Comparator<T> => {\n    return (a, b) => {\n      if (!predicate(a, b)) return 0;\n      return comparator(a, b);\n    };\n  };\n};\n\n/**\n * A no-op comparator which always returns 0.\n */\nexport const noopComparator = <T>(): Comparator<T> => {\n  return () => 0;\n};\n", "import { StreamVideoParticipant, VideoTrackType } from '../types';\nimport { TrackType } from '../gen/video/sfu/models/models';\n\n/**\n * Check if a participant has a video.\n *\n * @param p the participant to check.\n */\nexport const hasVideo = (p: StreamVideoParticipant): boolean =>\n  p.publishedTracks.includes(TrackType.VIDEO);\n\n/**\n * Check if a participant has audio.\n *\n * @param p the participant to check.\n */\nexport const hasAudio = (p: StreamVideoParticipant): boolean =>\n  p.publishedTracks.includes(TrackType.AUDIO);\n\n/**\n * Check if a participant is screen sharing.\n *\n * @param p the participant to check.\n */\nexport const hasScreenShare = (p: StreamVideoParticipant): boolean =>\n  p.publishedTracks.includes(TrackType.SCREEN_SHARE);\n\n/**\n * Check if a participant is screen sharing audio.\n *\n * @param p the participant to check.\n */\nexport const hasScreenShareAudio = (p: StreamVideoParticipant): boolean =>\n  p.publishedTracks.includes(TrackType.SCREEN_SHARE_AUDIO);\n\n/**\n * Check if the participant is pinned.\n *\n * @param p the participant.\n */\nexport const isPinned = (p: StreamVideoParticipant): boolean =>\n  !!p.pin && (p.pin.isLocalPin || p.pin.pinnedAt > 0);\n\n/**\n * Check if a participant has a paused track of the specified type.\n *\n * @param p the participant to check.\n * @param videoTrackType the type of video track to check for ('videoTrack' or 'screenShareTrack').\n */\nexport const hasPausedTrack = (\n  p: StreamVideoParticipant,\n  videoTrackType: VideoTrackType,\n): boolean => {\n  if (!p.pausedTracks) return false;\n  const trackType =\n    videoTrackType === 'videoTrack'\n      ? TrackType.VIDEO\n      : videoTrackType === 'screenShareTrack'\n        ? TrackType.SCREEN_SHARE\n        : undefined;\n\n  if (!trackType) return false;\n  return p.pausedTracks.includes(trackType);\n};\n", "import { Comparator } from './';\nimport { StreamVideoParticipant } from '../types';\nimport { ParticipantSource } from '../gen/video/sfu/models/models';\nimport {\n  hasAudio,\n  hasScreenShare,\n  hasVideo,\n} from '../helpers/participantUtils';\n\n/**\n * A comparator which sorts participants by the fact that they are the dominant speaker or not.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const dominantSpeaker: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (a.isDominantSpeaker && !b.isDominantSpeaker) return -1;\n  if (!a.isDominantSpeaker && b.isDominantSpeaker) return 1;\n  return 0;\n};\n\n/**\n * A comparator which sorts participants by the fact that they are speaking or not.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const speaking: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (a.isSpeaking && !b.isSpeaking) return -1;\n  if (!a.isSpeaking && b.isSpeaking) return 1;\n  return 0;\n};\n\n/**\n * A comparator which sorts participants by screen sharing status.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const screenSharing: Comparator<StreamVideoParticipant> = (a, b) => {\n  const hasA = hasScreenShare(a);\n  const hasB = hasScreenShare(b);\n  if (hasA && !hasB) return -1;\n  if (!hasA && hasB) return 1;\n  return 0;\n};\n\n/**\n * A comparator which sorts participants by video status.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const publishingVideo: Comparator<StreamVideoParticipant> = (a, b) => {\n  const hasA = hasVideo(a);\n  const hasB = hasVideo(b);\n  if (hasA && !hasB) return -1;\n  if (!hasA && hasB) return 1;\n  return 0;\n};\n\n/**\n * A comparator which sorts participants by audio status.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const publishingAudio: Comparator<StreamVideoParticipant> = (a, b) => {\n  const hasA = hasAudio(a);\n  const hasB = hasAudio(b);\n  if (hasA && !hasB) return -1;\n  if (!hasA && hasB) return 1;\n  return 0;\n};\n\n/**\n * A comparator which prioritizes participants who are pinned.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const pinned: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (a.pin && b.pin) {\n    if (!a.pin.isLocalPin && b.pin.isLocalPin) return -1;\n    if (a.pin.isLocalPin && !b.pin.isLocalPin) return 1;\n    if (a.pin.pinnedAt > b.pin.pinnedAt) return -1;\n    if (a.pin.pinnedAt < b.pin.pinnedAt) return 1;\n  }\n\n  if (a.pin && !b.pin) return -1;\n  if (!a.pin && b.pin) return 1;\n\n  return 0;\n};\n\n/**\n * A comparator creator which will set up a comparator which prioritizes\n * participants who are from a specific source (e.g., WebRTC, RTMP, WHIP...).\n *\n * The priority of a source is determined by the order of the sources passed in.\n * e.g. [SRT, RTMP, WHIP] will prioritize SRT sources first, then RTMP, then WHIP.\n *\n * @param sources the sources to prioritize.\n */\nexport const withParticipantSource = (\n  ...sources: ParticipantSource[]\n): Comparator<StreamVideoParticipant> => {\n  const priority = (i: number) => (i === -1 ? Number.MAX_SAFE_INTEGER : i);\n  return (a, b) => {\n    const priorityA = priority(sources.indexOf(a.source));\n    const priorityB = priority(sources.indexOf(b.source));\n    if (priorityA < priorityB) return -1;\n    if (priorityA > priorityB) return 1;\n    return 0;\n  };\n};\n\n/**\n * A comparator creator which will set up a comparator which prioritizes\n * participants who have a specific reaction.\n *\n * @param type the reaction type.\n */\nexport const reactionType = (\n  type: string,\n): Comparator<StreamVideoParticipant> => {\n  return (a, b) => {\n    if (a.reaction?.type === type && b.reaction?.type !== type) return -1;\n    if (a.reaction?.type !== type && b.reaction?.type === type) return 1;\n    return 0;\n  };\n};\n\n/**\n * A comparator creator which will set up a comparator which prioritizes\n * participants who have a specific role.\n *\n * @param roles the roles to prioritize.\n */\nexport const role =\n  (...roles: string[]): Comparator<StreamVideoParticipant> =>\n  (a, b) => {\n    const hasA = hasAnyRole(a, roles);\n    const hasB = hasAnyRole(b, roles);\n    if (hasA && !hasB) return -1;\n    if (!hasA && hasB) return 1;\n    return 0;\n  };\n\n/**\n * A comparator which sorts participants by name.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const name: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (a.name < b.name) return -1;\n  if (a.name > b.name) return 1;\n  return 0;\n};\n\nconst hasAnyRole = (p: StreamVideoParticipant, roles: string[]) =>\n  (p.roles || []).some((r) => roles.includes(r));\n", "import { StreamVideoParticipant, VisibilityState } from '../types';\nimport { combineComparators, conditional } from './comparator';\nimport { ParticipantSource } from '../gen/video/sfu/models/models';\nimport {\n  dominantSpeaker,\n  pinned,\n  publishingAudio,\n  publishingVideo,\n  reactionType,\n  role,\n  screenSharing,\n  speaking,\n  withParticipantSource,\n} from './participants';\n\n// a comparator decorator which applies the decorated comparator only if the\n// participant is invisible.\n// This ensures stable sorting when all participants are visible.\nconst ifInvisibleBy = conditional(\n  (a: StreamVideoParticipant, b: StreamVideoParticipant) =>\n    a.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE ||\n    b.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE,\n);\n\n/**\n * A comparator that applies the decorated comparator when a participant is\n * either invisible or its visibility state isn't known.\n * For visible participants, it ensures stable sorting.\n */\nconst ifInvisibleOrUnknownBy = conditional(\n  (a: StreamVideoParticipant, b: StreamVideoParticipant) =>\n    a.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE ||\n    a.viewportVisibilityState?.videoTrack === VisibilityState.UNKNOWN ||\n    b.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE ||\n    b.viewportVisibilityState?.videoTrack === VisibilityState.UNKNOWN,\n);\n\n/**\n * A comparator that prioritizes participants with video ingress sources.\n */\nconst withVideoIngressSource = withParticipantSource(\n  ParticipantSource.RTMP,\n  ParticipantSource.SRT,\n  ParticipantSource.WHIP,\n  ParticipantSource.RTSP,\n);\n\n/**\n * The default sorting preset.\n */\nexport const defaultSortPreset = combineComparators(\n  screenSharing,\n  pinned,\n  ifInvisibleBy(\n    combineComparators(\n      dominantSpeaker,\n      speaking,\n      reactionType('raised-hand'),\n      publishingVideo,\n      publishingAudio,\n    ),\n  ),\n);\n\n/**\n * The sorting preset for speaker layout.\n */\nexport const speakerLayoutSortPreset = combineComparators(\n  screenSharing,\n  pinned,\n  dominantSpeaker,\n  ifInvisibleBy(\n    combineComparators(\n      speaking,\n      reactionType('raised-hand'),\n      withVideoIngressSource,\n      publishingVideo,\n      publishingAudio,\n    ),\n  ),\n);\n\n/**\n * The sorting preset for layouts that don't render all participants but\n * instead, render them in pages.\n */\nexport const paginatedLayoutSortPreset = combineComparators(\n  pinned,\n  ifInvisibleOrUnknownBy(\n    combineComparators(\n      dominantSpeaker,\n      speaking,\n      reactionType('raised-hand'),\n      withVideoIngressSource,\n      publishingVideo,\n      publishingAudio,\n    ),\n  ),\n);\n\n/**\n * The sorting preset for livestreams and audio rooms.\n */\nexport const livestreamOrAudioRoomSortPreset = combineComparators(\n  ifInvisibleBy(\n    combineComparators(\n      dominantSpeaker,\n      speaking,\n      reactionType('raised-hand'),\n      withVideoIngressSource,\n      publishingVideo,\n      publishingAudio,\n    ),\n  ),\n  role('admin', 'host', 'speaker'),\n);\n", "import {\n  BehaviorSubject,\n  combineLatest,\n  distinctUntilChanged,\n  map,\n  Observable,\n  ReplaySubject,\n  shareReplay,\n  startWith,\n} from 'rxjs';\nimport type { Patch } from './rxUtils';\nimport * as RxUtils from './rxUtils';\nimport { CallingState } from './CallingState';\nimport {\n  type ClosedCaptionsSettings,\n  type StreamVideoParticipant,\n  type StreamVideoParticipantPatch,\n  type StreamVideoParticipantPatches,\n  type SubscriptionChanges,\n  VideoTrackType,\n  VisibilityState,\n} from '../types';\nimport { CallStatsReport } from '../stats';\nimport {\n  BlockedUserEvent,\n  CallClosedCaption,\n  CallIngressResponse,\n  CallMemberAddedEvent,\n  CallMemberRemovedEvent,\n  CallMemberUpdatedEvent,\n  CallMemberUpdatedPermissionEvent,\n  CallReactionEvent,\n  CallResponse,\n  CallSessionParticipantCountsUpdatedEvent,\n  CallSessionParticipantJoinedEvent,\n  CallSessionParticipantLeftEvent,\n  CallSessionResponse,\n  CallSettingsResponse,\n  ClosedCaptionEvent,\n  EgressResponse,\n  MemberResponse,\n  OwnCapability,\n  ThumbnailResponse,\n  UnblockedUserEvent,\n  UpdatedCallPermissionsEvent,\n  UserResponse,\n  VideoEvent,\n} from '../gen/coordinator';\nimport { Timestamp } from '../gen/google/protobuf/timestamp';\nimport { ReconnectDetails } from '../gen/video/sfu/event/events';\nimport {\n  CallState as SfuCallState,\n  Pin,\n  TrackType,\n  CallGrants,\n} from '../gen/video/sfu/models/models';\nimport { Comparator, defaultSortPreset } from '../sorting';\nimport { hasScreenShare } from '../helpers/participantUtils';\nimport { videoLoggerSystem } from '../logger';\n\n/**\n * Returns the default egress object - when no egress data is available.\n */\nconst defaultEgress: EgressResponse = {\n  broadcasting: false,\n  hls: { playlist_url: '', status: '' },\n  rtmps: [],\n};\n\ntype OrphanedTrack = {\n  id: string;\n  trackLookupPrefix: string;\n  trackType: TrackType;\n  track: MediaStream;\n};\n\n/**\n * Creates a stable participant filter function, ready to be used in combination\n * with the `useSyncExternalStore` hook.\n *\n * @param predicate the predicate to use.\n */\nconst createStableParticipantsFilter = (\n  predicate: (p: StreamVideoParticipant) => boolean,\n) => {\n  const empty: StreamVideoParticipant[] = [];\n  return (participants: StreamVideoParticipant[]) => {\n    // no need to filter if there are no participants\n    if (!participants.length) return participants;\n\n    // return a stable empty array if there are no remote participants\n    // instead of creating an empty one\n    const filteredParticipants = participants.filter(predicate);\n    if (!filteredParticipants.length) return empty;\n\n    return filteredParticipants;\n  };\n};\n\n/**\n * Holds the state of the current call.\n * @react You don't have to use this class directly, as we are exposing the state through Hooks.\n */\nexport class CallState {\n  private backstageSubject = new BehaviorSubject<boolean>(true);\n  private blockedUserIdsSubject = new BehaviorSubject<string[]>([]);\n  private createdAtSubject = new BehaviorSubject<Date>(new Date());\n  private endedAtSubject = new BehaviorSubject<Date | undefined>(undefined);\n  private startsAtSubject = new BehaviorSubject<Date | undefined>(undefined);\n  private updatedAtSubject = new BehaviorSubject<Date>(new Date());\n  private createdBySubject = new BehaviorSubject<UserResponse | undefined>(\n    undefined,\n  );\n  private customSubject = new BehaviorSubject<Record<string, any>>({});\n  private egressSubject = new BehaviorSubject<EgressResponse | undefined>(\n    undefined,\n  );\n  private ingressSubject = new BehaviorSubject<CallIngressResponse | undefined>(\n    undefined,\n  );\n  private recordingSubject = new BehaviorSubject<boolean>(false);\n  private sessionSubject = new BehaviorSubject<CallSessionResponse | undefined>(\n    undefined,\n  );\n  private settingsSubject = new BehaviorSubject<\n    CallSettingsResponse | undefined\n  >(undefined);\n  private transcribingSubject = new BehaviorSubject<boolean>(false);\n  private captioningSubject = new BehaviorSubject<boolean>(false);\n  private endedBySubject = new BehaviorSubject<UserResponse | undefined>(\n    undefined,\n  );\n  private thumbnailsSubject = new BehaviorSubject<\n    ThumbnailResponse | undefined\n  >(undefined);\n  private membersSubject = new BehaviorSubject<MemberResponse[]>([]);\n  private ownCapabilitiesSubject = new BehaviorSubject<OwnCapability[]>([]);\n  private callingStateSubject = new BehaviorSubject<CallingState>(\n    CallingState.UNKNOWN,\n  );\n  private startedAtSubject = new BehaviorSubject<Date | undefined>(undefined);\n  private participantCountSubject = new BehaviorSubject<number>(0);\n  private anonymousParticipantCountSubject = new BehaviorSubject<number>(0);\n  private participantsSubject = new BehaviorSubject<StreamVideoParticipant[]>(\n    [],\n  );\n  private callStatsReportSubject = new BehaviorSubject<\n    CallStatsReport | undefined\n  >(undefined);\n  private closedCaptionsSubject = new BehaviorSubject<CallClosedCaption[]>([]);\n\n  // These are tracks that were delivered to the Subscriber's onTrack event\n  // that we couldn't associate with a participant yet.\n  // This happens when the participantJoined event hasn't been received yet.\n  // We keep these tracks around until we can associate them with a participant.\n  private orphanedTracks: OrphanedTrack[] = [];\n\n  private callGrantsSubject = new ReplaySubject<CallGrants>(1);\n\n  // Derived state\n\n  /**\n   * The time the call session actually started.\n   * Useful for displaying the call duration.\n   */\n  startedAt$: Observable<Date | undefined>;\n\n  /**\n   * The server-side counted number of participants connected to the current call.\n   * This number includes the anonymous participants as well.\n   */\n  participantCount$: Observable<number>;\n\n  /**\n   * The server-side counted number of anonymous participants connected to the current call.\n   * This number excludes the regular participants.\n   */\n  anonymousParticipantCount$: Observable<number>;\n\n  /**\n   * All participants of the current call (this includes the current user and other participants as well),\n   * unsorted. This observable only updates when participants join or leave the call.\n   */\n  rawParticipants$: Observable<StreamVideoParticipant[]>;\n\n  /**\n   * All participants of the current call (this includes the current user and other participants as well),\n   * sorted according to the current `sortByParticipantsBy` setting\n   */\n  participants$: Observable<StreamVideoParticipant[]>;\n\n  /**\n   * Remote participants of the current call (this includes every participant except the logged-in user).\n   */\n  remoteParticipants$: Observable<StreamVideoParticipant[]>;\n\n  /**\n   * The local participant of the current call (the logged-in user).\n   */\n  localParticipant$: Observable<StreamVideoParticipant | undefined>;\n\n  /**\n   * Pinned participants of the current call.\n   */\n  pinnedParticipants$: Observable<StreamVideoParticipant[]>;\n\n  /**\n   * The currently elected dominant speaker in the current call.\n   */\n  dominantSpeaker$: Observable<StreamVideoParticipant | undefined>;\n\n  /**\n   * Emits true whenever there is an active screen sharing session within\n   * the current call. Useful for displaying a \"screen sharing\" indicator and\n   * switching the layout to a screen sharing layout.\n   *\n   * The actual screen sharing track isn't exposed here, but can be retrieved\n   * from the list of call participants. We also don't want to be limiting\n   * to the number of share screen tracks are displayed in a call.\n   */\n  hasOngoingScreenShare$: Observable<boolean>;\n\n  /**\n   * The latest stats report of the current call.\n   * When stats gathering is enabled, this observable will emit a new value\n   * at a regular (configurable) interval.\n   *\n   * Consumers of this observable can implement their own batching logic\n   * in case they want to show historical stats data.\n   */\n  callStatsReport$: Observable<CallStatsReport | undefined>;\n\n  /**\n   * The list of members in the current call.\n   */\n  members$: Observable<MemberResponse[]>;\n\n  /**\n   * The list of capabilities of the current user.\n   */\n  ownCapabilities$: Observable<OwnCapability[]>;\n\n  /**\n   * The calling state.\n   */\n  callingState$: Observable<CallingState>;\n\n  /**\n   * The backstage state.\n   */\n  backstage$: Observable<boolean>;\n\n  /**\n   * Will provide the list of blocked user IDs.\n   */\n  blockedUserIds$: Observable<string[]>;\n\n  /**\n   * Will provide the time when this call has been created.\n   */\n  createdAt$: Observable<Date>;\n\n  /**\n   * Will provide the time when this call has been ended.\n   */\n  endedAt$: Observable<Date | undefined>;\n\n  /**\n   * Will provide the time when this call has been scheduled to start.\n   */\n  startsAt$: Observable<Date | undefined>;\n\n  /**\n   * Will provide the time when this call has been updated.\n   */\n  updatedAt$: Observable<Date>;\n\n  /**\n   * Will provide the user who created this call.\n   */\n  createdBy$: Observable<UserResponse | undefined>;\n\n  /**\n   * Will provide the custom data of this call.\n   */\n  custom$: Observable<Record<string, any>>;\n\n  /**\n   * Will provide the egress data of this call.\n   */\n  egress$: Observable<EgressResponse | undefined>;\n\n  /**\n   * Will provide the ingress data of this call.\n   */\n  ingress$: Observable<CallIngressResponse | undefined>;\n\n  /**\n   * Will provide the recording state of this call.\n   */\n  recording$: Observable<boolean>;\n\n  /**\n   * Will provide the session data of this call.\n   */\n  session$: Observable<CallSessionResponse | undefined>;\n\n  /**\n   * Will provide the settings of this call.\n   */\n  settings$: Observable<CallSettingsResponse | undefined>;\n\n  /**\n   * Will provide the transcribing state of this call.\n   */\n  transcribing$: Observable<boolean>;\n\n  /**\n   * Will provide the closed captioning state of this call.\n   */\n  captioning$: Observable<boolean>;\n\n  /**\n   * Will provide the user who ended this call.\n   */\n  endedBy$: Observable<UserResponse | undefined>;\n\n  /**\n   * Will provide the thumbnails of this call.\n   */\n  thumbnails$: Observable<ThumbnailResponse | undefined>;\n\n  /**\n   * The queue of closed captions.\n   */\n  closedCaptions$: Observable<CallClosedCaption[]>;\n\n  readonly logger = videoLoggerSystem.getLogger('CallState');\n\n  /**\n   * A list of comparators that are used to sort the participants.\n   */\n  private sortParticipantsBy = defaultSortPreset;\n\n  /**\n   * The closed captions configuration.\n   */\n  private closedCaptionsSettings: ClosedCaptionsSettings | undefined;\n  private closedCaptionsTasks = new Map<string, NodeJS.Timeout>();\n\n  private readonly eventHandlers: {\n    [EventType in VideoEvent['type']]:\n      | ((event: Extract<VideoEvent, { type: EventType }>) => void)\n      | undefined;\n  };\n\n  /**\n   * Creates a new instance of the CallState class.\n   *\n   */\n  constructor() {\n    this.rawParticipants$ = this.participantsSubject\n      .asObservable()\n      .pipe(shareReplay({ bufferSize: 1, refCount: true }));\n\n    this.participants$ = this.participantsSubject.asObservable().pipe(\n      // maintain stable-sort by mutating the participants stored\n      // in the original subject\n      map((ps) => ps.sort(this.sortParticipantsBy)),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    this.localParticipant$ = this.participants$.pipe(\n      map((participants) => participants.find((p) => p.isLocalParticipant)),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    this.remoteParticipants$ = this.participants$.pipe(\n      map(createStableParticipantsFilter((p) => !p.isLocalParticipant)),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    this.pinnedParticipants$ = this.participants$.pipe(\n      map(createStableParticipantsFilter((p) => !!p.pin)),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    this.dominantSpeaker$ = this.participants$.pipe(\n      map((participants) => participants.find((p) => p.isDominantSpeaker)),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    this.hasOngoingScreenShare$ = this.participants$.pipe(\n      map((participants) => participants.some((p) => hasScreenShare(p))),\n      distinctUntilChanged(),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    // dates\n    this.createdAt$ = this.createdAtSubject.asObservable();\n    this.endedAt$ = this.endedAtSubject.asObservable();\n    this.startsAt$ = this.startsAtSubject.asObservable();\n    this.startedAt$ = this.startedAtSubject.asObservable();\n    this.updatedAt$ = this.updatedAtSubject.asObservable();\n\n    this.callStatsReport$ = this.callStatsReportSubject.asObservable();\n    this.members$ = this.membersSubject.asObservable();\n\n    // complex objects should work as streams of data\n    this.createdBy$ = this.createdBySubject.asObservable();\n    this.custom$ = this.customSubject.asObservable();\n    this.egress$ = this.egressSubject.asObservable();\n    this.ingress$ = this.ingressSubject.asObservable();\n    this.session$ = this.sessionSubject.asObservable();\n    this.settings$ = this.settingsSubject.asObservable();\n    this.endedBy$ = this.endedBySubject.asObservable();\n    this.thumbnails$ = this.thumbnailsSubject.asObservable();\n    this.closedCaptions$ = this.closedCaptionsSubject.asObservable();\n\n    /**\n     * Performs shallow comparison of two arrays.\n     * Expects primitive values: [1, 2, 3] is equal to [2, 1, 3].\n     */\n    const isShallowEqual = <T>(a: Array<T>, b: Array<T>): boolean => {\n      if (a.length !== b.length) return false;\n      for (const item of a) {\n        if (!b.includes(item)) return false;\n      }\n      for (const item of b) {\n        if (!a.includes(item)) return false;\n      }\n      return true;\n    };\n\n    /**\n     * Creates an Observable from the given subject by piping to the\n     * `distinctUntilChanged()` operator.\n     */\n    const duc = <T>(\n      subject: BehaviorSubject<T>,\n      comparator?: (a: T, b: T) => boolean,\n    ): Observable<T> => subject.pipe(distinctUntilChanged(comparator));\n\n    // primitive values should only emit once the value they hold changes\n    this.anonymousParticipantCount$ = duc(\n      this.anonymousParticipantCountSubject,\n    );\n    this.blockedUserIds$ = duc(this.blockedUserIdsSubject, isShallowEqual);\n    this.backstage$ = duc(this.backstageSubject);\n    this.callingState$ = duc(this.callingStateSubject);\n    this.ownCapabilities$ = combineLatest([\n      this.ownCapabilitiesSubject,\n      this.callGrantsSubject.pipe(startWith(undefined)),\n    ]).pipe(\n      map(([capabilities, grants]) => {\n        if (!grants) return capabilities;\n\n        const { canPublishAudio, canPublishVideo, canScreenshare } = grants;\n\n        const update = {\n          [OwnCapability.SEND_AUDIO]: canPublishAudio,\n          [OwnCapability.SEND_VIDEO]: canPublishVideo,\n          [OwnCapability.SCREENSHARE]: canScreenshare,\n        } as const;\n\n        const nextCapabilities = [...capabilities];\n\n        for (const _capability in update) {\n          const capability = _capability as keyof typeof update;\n          const allowed = update[capability];\n\n          // grants take precedence over capabilities, reconstruct the capabilities\n          if (allowed && !nextCapabilities.includes(capability)) {\n            nextCapabilities.push(capability);\n          } else if (!allowed && nextCapabilities.includes(capability)) {\n            const index = nextCapabilities.indexOf(capability);\n            nextCapabilities.splice(index, 1);\n          }\n        }\n\n        return nextCapabilities;\n      }),\n      distinctUntilChanged(isShallowEqual),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n    this.participantCount$ = duc(this.participantCountSubject);\n    this.recording$ = duc(this.recordingSubject);\n    this.transcribing$ = duc(this.transcribingSubject);\n    this.captioning$ = duc(this.captioningSubject);\n\n    this.eventHandlers = {\n      // these events are not updating the call state:\n      'call.frame_recording_ready': undefined,\n      'call.kicked_user': undefined,\n      'call.moderation_blur': undefined,\n      'call.moderation_warning': undefined,\n      'call.permission_request': undefined,\n      'call.recording_ready': undefined,\n      'call.rtmp_broadcast_failed': undefined,\n      'call.rtmp_broadcast_started': undefined,\n      'call.rtmp_broadcast_stopped': undefined,\n      'call.stats_report_ready': undefined,\n      'call.transcription_ready': undefined,\n      'call.user_feedback_submitted': undefined,\n      'call.user_muted': undefined,\n      'connection.error': undefined,\n      'connection.ok': undefined,\n      'health.check': undefined,\n      'user.updated': undefined,\n      custom: undefined,\n\n      // events that update call state:\n      'call.accepted': (e) => this.updateFromCallResponse(e.call),\n      'call.blocked_user': this.blockUser,\n      'call.closed_caption': this.updateFromClosedCaptions,\n      'call.closed_captions_failed': () => {\n        this.setCurrentValue(this.captioningSubject, false);\n      },\n      'call.closed_captions_started': () => {\n        this.setCurrentValue(this.captioningSubject, true);\n      },\n      'call.closed_captions_stopped': () => {\n        this.setCurrentValue(this.captioningSubject, false);\n      },\n      'call.created': (e) => this.updateFromCallResponse(e.call),\n      'call.deleted': (e) => this.updateFromCallResponse(e.call),\n      'call.ended': (e) => {\n        this.updateFromCallResponse(e.call);\n        this.setCurrentValue(this.endedBySubject, e.user);\n      },\n      'call.frame_recording_failed': (e) => {\n        this.updateFromCallResponse(e.call);\n      },\n      'call.frame_recording_started': (e) => {\n        this.updateFromCallResponse(e.call);\n      },\n      'call.frame_recording_stopped': (e) => {\n        this.updateFromCallResponse(e.call);\n      },\n      'call.hls_broadcasting_failed': this.updateFromHLSBroadcastingFailed,\n      'call.hls_broadcasting_started': (e) => {\n        this.updateFromCallResponse(e.call);\n      },\n      'call.hls_broadcasting_stopped': this.updateFromHLSBroadcastStopped,\n      'call.live_started': (e) => this.updateFromCallResponse(e.call),\n      'call.member_added': this.updateFromMemberAdded,\n      'call.member_removed': this.updateFromMemberRemoved,\n      'call.member_updated_permission': this.updateMembers,\n      'call.member_updated': this.updateMembers,\n      'call.notification': (e) => {\n        this.updateFromCallResponse(e.call);\n        this.setMembers(e.members);\n      },\n      'call.permissions_updated': this.updateOwnCapabilities,\n      'call.reaction_new': this.updateParticipantReaction,\n      'call.recording_started': () =>\n        this.setCurrentValue(this.recordingSubject, true),\n      'call.recording_stopped': () =>\n        this.setCurrentValue(this.recordingSubject, false),\n      'call.recording_failed': () =>\n        this.setCurrentValue(this.recordingSubject, false),\n      'call.rejected': (e) => this.updateFromCallResponse(e.call),\n      'call.ring': (e) => this.updateFromCallResponse(e.call),\n      'call.missed': (e) => this.updateFromCallResponse(e.call),\n      'call.session_ended': (e) => this.updateFromCallResponse(e.call),\n      'call.session_participant_count_updated':\n        this.updateFromSessionParticipantCountUpdate,\n      'call.session_participant_joined':\n        this.updateFromSessionParticipantJoined,\n      'call.session_participant_left': this.updateFromSessionParticipantLeft,\n      'call.session_started': (e) => this.updateFromCallResponse(e.call),\n      'call.transcription_started': () => {\n        this.setCurrentValue(this.transcribingSubject, true);\n      },\n      'call.transcription_stopped': () => {\n        this.setCurrentValue(this.transcribingSubject, false);\n      },\n      'call.transcription_failed': () => {\n        this.setCurrentValue(this.transcribingSubject, false);\n      },\n      'call.unblocked_user': this.unblockUser,\n      'call.updated': (e) => this.updateFromCallResponse(e.call),\n    };\n  }\n\n  /**\n   * Runs the cleanup tasks.\n   */\n  dispose = () => {\n    for (const [ccKey, taskId] of this.closedCaptionsTasks.entries()) {\n      clearTimeout(taskId);\n      this.closedCaptionsTasks.delete(ccKey);\n    }\n  };\n\n  /**\n   * Sets the list of criteria that are used to sort the participants.\n   * To disable sorting, you can pass `noopComparator()`.\n   *\n   * @param comparator the comparator to use to sort the participants.\n   */\n  setSortParticipantsBy = (comparator: Comparator<StreamVideoParticipant>) => {\n    this.sortParticipantsBy = comparator;\n    // trigger re-sorting of participants\n    this.setCurrentValue(this.participantsSubject, (ps) => ps);\n  };\n\n  /**\n   * Gets the current value of an observable, or undefined if the observable has\n   * not emitted a value yet.\n   *\n   * @param observable$ the observable to get the value from.\n   */\n  getCurrentValue = RxUtils.getCurrentValue;\n\n  /**\n   * Updates the value of the provided Subject.\n   * An `update` can either be a new value or a function which takes\n   * the current value and returns a new value.\n   *\n   * @internal\n   *\n   * @param subject the subject to update.\n   * @param update the update to apply to the subject.\n   * @return the updated value.\n   */\n  setCurrentValue = RxUtils.setCurrentValue;\n\n  /**\n   * The server-side counted number of participants connected to the current call.\n   * This number includes the anonymous participants as well.\n   */\n  get participantCount() {\n    return this.getCurrentValue(this.participantCount$);\n  }\n\n  /**\n   * Sets the number of participants in the current call.\n   *\n   * @internal\n   * @param count the number of participants.\n   */\n  setParticipantCount = (count: Patch<number>) => {\n    return this.setCurrentValue(this.participantCountSubject, count);\n  };\n\n  /**\n   * The time the call session actually started.\n   * Useful for displaying the call duration.\n   */\n  get startedAt() {\n    return this.getCurrentValue(this.startedAt$);\n  }\n\n  /**\n   * Sets the time the call session actually started.\n   *\n   * @internal\n   * @param startedAt the time the call session actually started.\n   */\n  setStartedAt = (startedAt: Patch<Date | undefined>) => {\n    return this.setCurrentValue(this.startedAtSubject, startedAt);\n  };\n\n  /**\n   * Returns whether closed captions are enabled in the current call.\n   */\n  get captioning() {\n    return this.getCurrentValue(this.captioning$);\n  }\n\n  /**\n   * Sets the closed captioning state of the current call.\n   *\n   * @internal\n   * @param captioning the closed captioning state.\n   */\n  setCaptioning = (captioning: boolean) => {\n    return RxUtils.updateValue(this.captioningSubject, captioning);\n  };\n\n  /**\n   * The server-side counted number of anonymous participants connected to the current call.\n   * This number includes the anonymous participants as well.\n   */\n  get anonymousParticipantCount() {\n    return this.getCurrentValue(this.anonymousParticipantCount$);\n  }\n\n  /**\n   * Sets the number of anonymous participants in the current call.\n   *\n   * @internal\n   * @param count the number of anonymous participants.\n   */\n  setAnonymousParticipantCount = (count: Patch<number>) => {\n    return this.setCurrentValue(this.anonymousParticipantCountSubject, count);\n  };\n\n  /**\n   * The list of participants in the current call.\n   */\n  get participants() {\n    return this.getCurrentValue(this.participants$);\n  }\n\n  /**\n   * The stable list of participants in the current call, unsorted.\n   */\n  get rawParticipants() {\n    return this.getCurrentValue(this.rawParticipants$);\n  }\n\n  /**\n   * Returns the current participants array directly from the BehaviorSubject.\n   * This bypasses the observable pipeline and is guaranteed to be synchronous.\n   * Use this when you need the absolute latest value without any potential\n   * timing issues from shareReplay/refCount.\n   *\n   * @internal\n   */\n  getParticipantsSnapshot = () => {\n    return this.participantsSubject.getValue();\n  };\n\n  /**\n   * Sets the list of participants in the current call.\n   *\n   * @internal\n   *\n   * @param participants the list of participants.\n   */\n  setParticipants = (participants: Patch<StreamVideoParticipant[]>) => {\n    return this.setCurrentValue(this.participantsSubject, participants);\n  };\n\n  /**\n   * The local participant in the current call.\n   */\n  get localParticipant() {\n    return this.getCurrentValue(this.localParticipant$);\n  }\n\n  /**\n   * The list of remote participants in the current call.\n   */\n  get remoteParticipants() {\n    return this.getCurrentValue(this.remoteParticipants$);\n  }\n\n  /**\n   * The dominant speaker in the current call.\n   */\n  get dominantSpeaker() {\n    return this.getCurrentValue(this.dominantSpeaker$);\n  }\n\n  /**\n   * The list of pinned participants in the current call.\n   */\n  get pinnedParticipants() {\n    return this.getCurrentValue(this.pinnedParticipants$);\n  }\n\n  /**\n   * Tell if there is an ongoing screen share in this call.\n   */\n  get hasOngoingScreenShare() {\n    return this.getCurrentValue(this.hasOngoingScreenShare$);\n  }\n\n  /**\n   * The calling state.\n   */\n  get callingState() {\n    return this.getCurrentValue(this.callingState$);\n  }\n\n  /**\n   * Sets the calling state.\n   *\n   * @internal\n   * @param state the new calling state.\n   */\n  setCallingState = (state: Patch<CallingState>) => {\n    return this.setCurrentValue(this.callingStateSubject, state);\n  };\n\n  /**\n   * The call stats report.\n   */\n  get callStatsReport() {\n    return this.getCurrentValue(this.callStatsReport$);\n  }\n\n  /**\n   * Returns whether the call stats report is being observed or not.\n   * @internal\n   */\n  get isCallStatsReportObserved() {\n    return this.callStatsReportSubject.observed;\n  }\n\n  /**\n   * Sets the call stats report.\n   *\n   * @internal\n   * @param report the report to set.\n   */\n  setCallStatsReport = (report: Patch<CallStatsReport | undefined>) => {\n    return this.setCurrentValue(this.callStatsReportSubject, report);\n  };\n\n  /**\n   * The members of the current call.\n   */\n  get members() {\n    return this.getCurrentValue(this.members$);\n  }\n\n  /**\n   * Sets the members of the current call.\n   *\n   * @internal\n   * @param members the members to set.\n   */\n  setMembers = (members: Patch<MemberResponse[]>) => {\n    this.setCurrentValue(this.membersSubject, members);\n  };\n\n  /**\n   * The capabilities of the current user for the current call.\n   */\n  get ownCapabilities() {\n    return this.getCurrentValue(this.ownCapabilities$);\n  }\n\n  /**\n   * Sets the own capabilities.\n   *\n   * @internal\n   * @param capabilities the capabilities to set.\n   */\n  setOwnCapabilities = (capabilities: Patch<OwnCapability[]>) => {\n    return this.setCurrentValue(this.ownCapabilitiesSubject, capabilities);\n  };\n\n  /**\n   * Sets the call grants (used for own capabilities).\n   *\n   * @internal\n   * @param grants the grants to set.\n   */\n  setCallGrants = (grants: Patch<CallGrants>) => {\n    return this.setCurrentValue(this.callGrantsSubject, grants);\n  };\n\n  /**\n   * The backstage state.\n   */\n  get backstage() {\n    return this.getCurrentValue(this.backstage$);\n  }\n\n  /**\n   * Sets the backstage state.\n   * @param backstage the backstage state.\n   */\n  setBackstage = (backstage: Patch<boolean>) => {\n    return this.setCurrentValue(this.backstageSubject, backstage);\n  };\n\n  /**\n   * Will provide the list of blocked user IDs.\n   */\n  get blockedUserIds() {\n    return this.getCurrentValue(this.blockedUserIds$);\n  }\n\n  /**\n   * Will provide the time when this call has been created.\n   */\n  get createdAt() {\n    return this.getCurrentValue(this.createdAt$);\n  }\n\n  /**\n   * Will provide the time when this call has been ended.\n   */\n  get endedAt() {\n    return this.getCurrentValue(this.endedAt$);\n  }\n\n  /**\n   * Sets the time when this call has been ended.\n   * @param endedAt the time when this call has been ended.\n   */\n  setEndedAt = (endedAt: Patch<Date | undefined>) => {\n    return this.setCurrentValue(this.endedAtSubject, endedAt);\n  };\n\n  /**\n   * Will provide the time when this call has been scheduled to start.\n   */\n  get startsAt() {\n    return this.getCurrentValue(this.startsAt$);\n  }\n\n  /**\n   * Will provide the time when this call has been updated.\n   */\n  get updatedAt() {\n    return this.getCurrentValue(this.updatedAt$);\n  }\n\n  /**\n   * Will provide the user who created this call.\n   */\n  get createdBy() {\n    return this.getCurrentValue(this.createdBy$);\n  }\n\n  /**\n   * Will provide the custom data of this call.\n   */\n  get custom() {\n    return this.getCurrentValue(this.custom$);\n  }\n\n  /**\n   * Will provide the egress data of this call.\n   */\n  get egress() {\n    return this.getCurrentValue(this.egress$);\n  }\n\n  /**\n   * Will provide the ingress data of this call.\n   */\n  get ingress() {\n    return this.getCurrentValue(this.ingress$);\n  }\n\n  /**\n   * Will provide the recording state of this call.\n   */\n  get recording() {\n    return this.getCurrentValue(this.recording$);\n  }\n\n  /**\n   * Will provide the session data of this call.\n   */\n  get session() {\n    return this.getCurrentValue(this.session$);\n  }\n\n  /**\n   * Will provide the settings of this call.\n   */\n  get settings() {\n    return this.getCurrentValue(this.settings$);\n  }\n\n  /**\n   * Will provide the transcribing state of this call.\n   */\n  get transcribing() {\n    return this.getCurrentValue(this.transcribing$);\n  }\n\n  /**\n   * Will provide the user who ended this call.\n   */\n  get endedBy() {\n    return this.getCurrentValue(this.endedBy$);\n  }\n\n  /**\n   * Will provide the thumbnails of this call, if enabled in the call settings.\n   */\n  get thumbnails() {\n    return this.getCurrentValue(this.thumbnails$);\n  }\n\n  /**\n   * Returns the current queue of closed captions.\n   */\n  get closedCaptions() {\n    return this.getCurrentValue(this.closedCaptions$);\n  }\n\n  /**\n   * Will try to find the participant with the given sessionId in the current call.\n   *\n   * @param sessionId the sessionId of the participant to find.\n   * @returns the participant with the given sessionId or undefined if not found.\n   */\n  findParticipantBySessionId = (\n    sessionId: string,\n  ): StreamVideoParticipant | undefined => {\n    return this.participants.find((p) => p.sessionId === sessionId);\n  };\n\n  /**\n   * Returns a new lookup table of participants indexed by their session ID.\n   */\n  getParticipantLookupBySessionId = () => {\n    return this.participants.reduce<{\n      [sessionId: string]: StreamVideoParticipant | undefined;\n    }>((lookupTable, participant) => {\n      lookupTable[participant.sessionId] = participant;\n      return lookupTable;\n    }, {});\n  };\n\n  /**\n   * Updates a participant in the current call identified by the given `sessionId`.\n   * If the participant can't be found, this operation is no-op.\n   *\n   * @internal\n   *\n   * @param sessionId the session ID of the participant to update.\n   * @param patch the patch to apply to the participant.\n   * @returns the updated participant or `undefined` if the participant couldn't be found.\n   */\n  updateParticipant = (\n    sessionId: string,\n    patch:\n      | StreamVideoParticipantPatch\n      | ((p: StreamVideoParticipant) => StreamVideoParticipantPatch),\n  ) => {\n    const participant = this.findParticipantBySessionId(sessionId);\n    if (!participant) {\n      this.logger.warn(`Participant with sessionId ${sessionId} not found`);\n      return;\n    }\n\n    const thePatch = typeof patch === 'function' ? patch(participant) : patch;\n    const updatedParticipant: StreamVideoParticipant = {\n      ...participant,\n      ...thePatch,\n    };\n    return this.setParticipants((participants) =>\n      participants.map((p) =>\n        p.sessionId === sessionId ? updatedParticipant : p,\n      ),\n    );\n  };\n\n  /**\n   * Updates a participant in the current call identified by the given `sessionId`.\n   * If a participant with matching `sessionId` can't be found, the provided\n   * `participant` is added to the list of participants.\n   *\n   * @param sessionId the session ID of the participant to update.\n   * @param participant the participant to update or add.\n   * @param patch an optional patch to apply to the participant.\n   */\n  updateOrAddParticipant = (\n    sessionId: string,\n    participant: StreamVideoParticipant,\n    patch?:\n      | StreamVideoParticipantPatch\n      | ((p: StreamVideoParticipant) => StreamVideoParticipantPatch),\n  ) => {\n    return this.setParticipants((participants) => {\n      let add = true;\n      const nextParticipants = participants.map((p) => {\n        if (p.sessionId === sessionId) {\n          add = false;\n          const updated: StreamVideoParticipant = { ...p, ...participant };\n          const thePatch = typeof patch === 'function' ? patch(updated) : patch;\n          return Object.assign(updated, thePatch);\n        }\n        return p;\n      });\n      if (add) nextParticipants.push(participant);\n      return nextParticipants;\n    });\n  };\n\n  /**\n   * Updates all participants in the current call whose session ID is in the given `sessionIds`.\n   * If no patches are provided, this operation is no-op.\n   *\n   * @internal\n   *\n   * @param patch the patch to apply to the participants.\n   * @returns all participants, with all patch applied.\n   */\n  updateParticipants = (patch: StreamVideoParticipantPatches) => {\n    if (Object.keys(patch).length === 0) return this.participants;\n    return this.setParticipants((participants) =>\n      participants.map((p) => {\n        const thePatch = patch[p.sessionId];\n        if (thePatch) {\n          return {\n            ...p,\n            ...thePatch,\n          };\n        }\n        return p;\n      }),\n    );\n  };\n\n  /**\n   * Update track subscription configuration for one or more participants.\n   * You have to create a subscription for each participant for all the different kinds of tracks you want to receive.\n   * You can only subscribe for tracks after the participant started publishing the given kind of track.\n   *\n   * @param trackType the kind of subscription to update.\n   * @param changes the list of subscription changes to do.\n   */\n  updateParticipantTracks = (\n    trackType: VideoTrackType,\n    changes: SubscriptionChanges,\n  ) => {\n    return this.updateParticipants(\n      Object.entries(changes).reduce<StreamVideoParticipantPatches>(\n        (acc, [sessionId, change]) => {\n          if (change.dimension) {\n            change.dimension.height = Math.ceil(change.dimension.height);\n            change.dimension.width = Math.ceil(change.dimension.width);\n          }\n          const prop: keyof StreamVideoParticipant | undefined =\n            trackType === 'videoTrack'\n              ? 'videoDimension'\n              : trackType === 'screenShareTrack'\n                ? 'screenShareDimension'\n                : undefined;\n          if (prop) {\n            acc[sessionId] = {\n              [prop]: change.dimension,\n            };\n          }\n          return acc;\n        },\n        {},\n      ),\n    );\n  };\n\n  /**\n   * Updates the call state with the data received from the server.\n   *\n   * @internal\n   *\n   * @param event the video event that our backend sent us.\n   */\n  updateFromEvent = (event: VideoEvent) => {\n    const update = this.eventHandlers[event.type];\n    if (update) {\n      update(event as any);\n    }\n  };\n\n  /**\n   * Updates the participant pinned state with server side pinning data.\n   *\n   * @param pins the latest pins from the server.\n   */\n  setServerSidePins = (pins: Pin[]) => {\n    const now = Date.now();\n    const unknownSymbol = Symbol('unknown');\n\n    // generate a lookup table of pinnedAt timestamps by userId and sessionId\n    // if there are multiple pins for the same userId, then we set the pinnedAt\n    // to `unknown` (for that userId lookup) so that we don't apply any pin for that participant\n    // this is to avoid conflicts during reconstruction of the pin state after reconnections\n    // as sessionIds can change\n    const pinnedAtByIdentifier = pins.reduce<\n      Record<string, number | undefined | typeof unknownSymbol>\n    >((lookup, pin, index) => {\n      const pinnedAt = now + (pins.length - index);\n\n      if (lookup[pin.userId]) {\n        lookup[pin.userId] = unknownSymbol;\n      } else {\n        lookup[pin.userId] = pinnedAt;\n      }\n\n      lookup[pin.sessionId] ??= pinnedAt;\n\n      return lookup;\n    }, {});\n\n    return this.setParticipants((participants) =>\n      participants.map((participant) => {\n        // first check by sessionId as that is 100% correct, then by attempt reconstruction by userId\n        const serverSidePinnedAt =\n          pinnedAtByIdentifier[participant.sessionId] ??\n          pinnedAtByIdentifier[participant.userId];\n\n        // the participant is newly pinned\n        if (\n          typeof serverSidePinnedAt === 'number' &&\n          typeof participant.pin?.pinnedAt !== 'number'\n        ) {\n          return {\n            ...participant,\n            pin: {\n              isLocalPin: false,\n              pinnedAt: serverSidePinnedAt,\n            },\n          };\n        }\n        // the participant is no longer pinned server side\n        // we need to reset the pin\n        if (\n          typeof serverSidePinnedAt !== 'number' &&\n          participant.pin?.isLocalPin === false\n        ) {\n          return {\n            ...participant,\n            pin: undefined,\n          };\n        }\n        // no changes to be applied\n        return participant;\n      }),\n    );\n  };\n\n  /**\n   * Adds an orphaned track to the call state.\n   *\n   * @internal\n   *\n   * @param orphanedTrack the orphaned track to add.\n   */\n  registerOrphanedTrack = (orphanedTrack: OrphanedTrack) => {\n    this.orphanedTracks.push(orphanedTrack);\n  };\n\n  /**\n   * Removes an orphaned track from the call state.\n   *\n   * @internal\n   *\n   * @param id the ID of the orphaned track to remove.\n   */\n  removeOrphanedTrack = (id: string) => {\n    this.orphanedTracks = this.orphanedTracks.filter((o) => o.id !== id);\n  };\n\n  /**\n   * Takes all orphaned tracks with the given track lookup prefix.\n   * All orphaned tracks with the given track lookup prefix are removed from the call state.\n   *\n   * @internal\n   *\n   * @param trackLookupPrefix the track lookup prefix to match the orphaned tracks by.\n   */\n  takeOrphanedTracks = (trackLookupPrefix: string): OrphanedTrack[] => {\n    const orphans = this.orphanedTracks.filter(\n      (orphan) => orphan.trackLookupPrefix === trackLookupPrefix,\n    );\n    if (orphans.length > 0) {\n      this.orphanedTracks = this.orphanedTracks.filter(\n        (orphan) => orphan.trackLookupPrefix !== trackLookupPrefix,\n      );\n    }\n    return orphans;\n  };\n\n  /**\n   * Updates the closed captions settings.\n   *\n   * @param config the new closed captions settings.\n   */\n  updateClosedCaptionSettings = (config: Partial<ClosedCaptionsSettings>) => {\n    this.closedCaptionsSettings = { ...this.closedCaptionsSettings, ...config };\n  };\n\n  /**\n   * Updates the call state with the data received from the server.\n   *\n   * @internal\n   *\n   * @param call the call response from the server.\n   */\n  updateFromCallResponse = (call: CallResponse) => {\n    this.setBackstage(call.backstage);\n    this.setCurrentValue(this.blockedUserIdsSubject, call.blocked_user_ids);\n    this.setCurrentValue(this.createdAtSubject, new Date(call.created_at));\n    this.setCurrentValue(this.updatedAtSubject, new Date(call.updated_at));\n    this.setCurrentValue(\n      this.startsAtSubject,\n      call.starts_at ? new Date(call.starts_at) : undefined,\n    );\n    this.setEndedAt(call.ended_at ? new Date(call.ended_at) : undefined);\n    this.setCurrentValue(this.createdBySubject, call.created_by);\n    this.setCurrentValue(this.customSubject, call.custom);\n    this.setCurrentValue(this.egressSubject, call.egress);\n    this.setCurrentValue(this.ingressSubject, call.ingress);\n    this.setCurrentValue(this.recordingSubject, call.recording);\n    const s = this.setCurrentValue(this.sessionSubject, call.session);\n    this.updateParticipantCountFromSession(s);\n    this.setCurrentValue(this.settingsSubject, call.settings);\n    this.setCurrentValue(this.transcribingSubject, call.transcribing);\n    this.setCurrentValue(this.captioningSubject, call.captioning);\n    this.setCurrentValue(this.thumbnailsSubject, call.thumbnails);\n  };\n\n  /**\n   * Updates the call state with the data received from the SFU server.\n   *\n   * @internal\n   *\n   * @param callState the call state from the SFU server.\n   * @param currentSessionId the session ID of the current user.\n   * @param reconnectDetails optional reconnect details.\n   */\n  updateFromSfuCallState = (\n    callState: SfuCallState,\n    currentSessionId: string,\n    reconnectDetails?: ReconnectDetails,\n  ) => {\n    const { participants, participantCount, startedAt, pins } = callState;\n    const localPublishedTracks =\n      reconnectDetails?.announcedTracks.map((t) => t.trackType) ?? [];\n    this.setParticipants(() => {\n      const participantLookup = this.getParticipantLookupBySessionId();\n      return participants.map<StreamVideoParticipant>((p) => {\n        // We need to preserve the local state of the participant\n        // (e.g. videoDimension, visibilityState, pinnedAt, etc.)\n        // as it doesn't exist on the server.\n        const existingParticipant = participantLookup[p.sessionId];\n        const isLocalParticipant = p.sessionId === currentSessionId;\n        return Object.assign({}, existingParticipant, p, {\n          isLocalParticipant,\n          publishedTracks: isLocalParticipant\n            ? localPublishedTracks\n            : p.publishedTracks,\n          viewportVisibilityState:\n            existingParticipant?.viewportVisibilityState ?? {\n              videoTrack: VisibilityState.UNKNOWN,\n              screenShareTrack: VisibilityState.UNKNOWN,\n            },\n        } satisfies Partial<StreamVideoParticipant>);\n      });\n    });\n\n    this.setParticipantCount(participantCount?.total || 0);\n    this.setAnonymousParticipantCount(participantCount?.anonymous || 0);\n    this.setStartedAt(startedAt ? Timestamp.toDate(startedAt) : new Date());\n    this.setServerSidePins(pins);\n  };\n\n  private updateFromMemberRemoved = (event: CallMemberRemovedEvent) => {\n    this.updateFromCallResponse(event.call);\n    this.setCurrentValue(this.membersSubject, (members) =>\n      members.filter((m) => event.members.indexOf(m.user_id) === -1),\n    );\n  };\n\n  private updateFromMemberAdded = (event: CallMemberAddedEvent) => {\n    this.updateFromCallResponse(event.call);\n    this.setCurrentValue(this.membersSubject, (members) => [\n      ...members,\n      ...event.members,\n    ]);\n  };\n\n  private updateFromHLSBroadcastStopped = () => {\n    this.setCurrentValue(this.egressSubject, (egress = defaultEgress) => ({\n      ...egress,\n      broadcasting: false,\n      hls: {\n        ...egress.hls!,\n        status: '',\n      },\n    }));\n  };\n\n  private updateFromHLSBroadcastingFailed = () => {\n    this.setCurrentValue(this.egressSubject, (egress = defaultEgress) => ({\n      ...egress,\n      broadcasting: false,\n      hls: {\n        ...egress.hls!,\n        status: '',\n      },\n    }));\n  };\n\n  private updateParticipantCountFromSession = (\n    session: CallSessionResponse | undefined,\n  ) => {\n    // when in JOINED state, we should use the participant count coming through\n    // the SFU healthcheck event, as it's more accurate.\n    if (!session || this.callingState === CallingState.JOINED) return;\n    const byRoleCount = Object.values(\n      session.participants_count_by_role,\n    ).reduce((total, countByRole) => total + countByRole, 0);\n    const participantCount = Math.max(byRoleCount, session.participants.length);\n    this.setParticipantCount(participantCount);\n    this.setAnonymousParticipantCount(session.anonymous_participant_count || 0);\n  };\n\n  private updateFromSessionParticipantCountUpdate = (\n    event: CallSessionParticipantCountsUpdatedEvent,\n  ) => {\n    const s = this.setCurrentValue(this.sessionSubject, (session) => {\n      if (!session) return session;\n      return {\n        ...session,\n        anonymous_participant_count: event.anonymous_participant_count,\n        participants_count_by_role: event.participants_count_by_role,\n      };\n    });\n    this.updateParticipantCountFromSession(s);\n  };\n\n  private updateFromSessionParticipantLeft = (\n    event: CallSessionParticipantLeftEvent,\n  ) => {\n    const s = this.setCurrentValue(this.sessionSubject, (session) => {\n      if (!session) return session;\n      const { participants, participants_count_by_role } = session;\n      const { user, user_session_id } = event.participant;\n      return {\n        ...session,\n        participants: participants.filter(\n          (p) => p.user_session_id !== user_session_id,\n        ),\n        participants_count_by_role: {\n          ...participants_count_by_role,\n          [user.role]: Math.max(\n            0,\n            (participants_count_by_role[user.role] || 0) - 1,\n          ),\n        },\n      };\n    });\n    this.updateParticipantCountFromSession(s);\n  };\n\n  private updateFromSessionParticipantJoined = (\n    event: CallSessionParticipantJoinedEvent,\n  ) => {\n    const s = this.setCurrentValue(this.sessionSubject, (session) => {\n      if (!session) return session;\n      const { participants, participants_count_by_role } = session;\n      const { user, user_session_id } = event.participant;\n      // It could happen that the backend delivers the same participant more than once.\n      // Once with the call.session_started event and once again with the\n      // call.session_participant_joined event. In this case,\n      // we should update the existing participant and prevent duplicating it.\n      let shouldInsertParticipant = true;\n      const updatedParticipants = participants.map((p) => {\n        if (p.user_session_id === user_session_id) {\n          shouldInsertParticipant = false;\n          return event.participant;\n        }\n        return p;\n      });\n      if (shouldInsertParticipant) {\n        // this is a new array, we can safely push the new participant\n        updatedParticipants.push(event.participant);\n      }\n\n      // If we are updating an existing participant, we don't want to increment\n      // the participant_by_role count.\n      const increment = shouldInsertParticipant ? 1 : 0;\n      return {\n        ...session,\n        participants: updatedParticipants,\n        participants_count_by_role: {\n          ...participants_count_by_role,\n          [user.role]: (participants_count_by_role[user.role] || 0) + increment,\n        },\n      };\n    });\n    this.updateParticipantCountFromSession(s);\n  };\n\n  private updateMembers = (\n    event: CallMemberUpdatedEvent | CallMemberUpdatedPermissionEvent,\n  ) => {\n    this.updateFromCallResponse(event.call);\n    this.setCurrentValue(this.membersSubject, (members) =>\n      members.map((member) => {\n        const memberUpdate = event.members.find(\n          (m) => m.user_id === member.user_id,\n        );\n        return memberUpdate ? memberUpdate : member;\n      }),\n    );\n  };\n\n  private updateParticipantReaction = (event: CallReactionEvent) => {\n    const { user, custom, type, emoji_code } = event.reaction;\n    this.setParticipants((participants) => {\n      return participants.map((p) => {\n        // skip if the reaction is not for this participant\n        if (p.userId !== user.id) return p;\n        // update the participant with the new reaction\n        return {\n          ...p,\n          reaction: {\n            type,\n            emoji_code,\n            custom,\n          },\n        };\n      });\n    });\n  };\n\n  private unblockUser = (event: UnblockedUserEvent) => {\n    this.setCurrentValue(this.blockedUserIdsSubject, (current) => {\n      if (!current) return current;\n      return current.filter((id) => id !== event.user.id);\n    });\n  };\n\n  private blockUser = (event: BlockedUserEvent) => {\n    this.setCurrentValue(this.blockedUserIdsSubject, (current) => [\n      ...(current || []),\n      event.user.id,\n    ]);\n  };\n\n  private updateOwnCapabilities = (event: UpdatedCallPermissionsEvent) => {\n    if (event.user.id === this.localParticipant?.userId) {\n      this.setOwnCapabilities(event.own_capabilities);\n    }\n  };\n\n  private updateFromClosedCaptions = (event: ClosedCaptionEvent) => {\n    this.setCurrentValue(this.closedCaptionsSubject, (queue) => {\n      const { closed_caption } = event;\n\n      const keyOf = (c: CallClosedCaption) => `${c.speaker_id}/${c.start_time}`;\n      const currentKey = keyOf(closed_caption);\n\n      const duplicate = queue.some((caption) => keyOf(caption) === currentKey);\n      if (duplicate) return queue;\n\n      const nextQueue = [...queue, closed_caption];\n\n      const { visibilityDurationMs = 2700, maxVisibleCaptions = 2 } =\n        this.closedCaptionsSettings || {};\n      // schedule the removal of the closed caption after the retention time\n      if (visibilityDurationMs > 0) {\n        const taskId = setTimeout(() => {\n          this.setCurrentValue(this.closedCaptionsSubject, (captions) =>\n            captions.filter((caption) => caption !== closed_caption),\n          );\n          this.closedCaptionsTasks.delete(currentKey);\n        }, visibilityDurationMs);\n        this.closedCaptionsTasks.set(currentKey, taskId);\n\n        // cancel the cleanup tasks for the closed captions that are no longer in the queue\n        for (let i = 0; i < nextQueue.length - maxVisibleCaptions; i++) {\n          const key = keyOf(nextQueue[i]);\n          const task = this.closedCaptionsTasks.get(key);\n          clearTimeout(task);\n          this.closedCaptionsTasks.delete(key);\n        }\n      }\n\n      // trim the queue\n      return nextQueue.slice(-maxVisibleCaptions);\n    });\n  };\n}\n", "import { Error as SfuError } from '../gen/video/sfu/models/models';\n\n/**\n * NegotiationError is thrown when there is an error during the negotiation process.\n * It extends the built-in Error class and includes an SfuError object for more details.\n */\nexport class NegotiationError extends Error {\n  /**\n   * The SfuError object that contains details about the error.\n   */\n  error: SfuError;\n\n  /**\n   * Creates an instance of NegotiationError.\n   */\n  constructor(error: SfuError) {\n    super(error.message);\n    this.name = 'NegotiationError';\n    this.error = error;\n  }\n}\n", "import { ClientDetails, Sdk, SdkType } from '../gen/video/sfu/models/models';\n\n/**\n * Flatten the stats report into an array of stats objects.\n *\n * @param report the report to flatten.\n */\nexport const flatten = (report: RTCStatsReport) => {\n  const stats: RTCStats[] = [];\n  report.forEach((s) => {\n    stats.push(s);\n  });\n  return stats;\n};\n\n/**\n * Dump the provided MediaStream into a JSON object.\n */\nexport const dumpStream = (stream: MediaStream) => ({\n  id: stream.id,\n  tracks: stream.getTracks().map((track) => ({\n    id: track.id,\n    kind: track.kind,\n    label: track.label,\n    enabled: track.enabled,\n    muted: track.muted,\n    readyState: track.readyState,\n  })),\n});\n\nexport const getSdkSignature = (clientDetails: ClientDetails) => {\n  const { sdk, ...platform } = clientDetails;\n  const sdkName = getSdkName(sdk);\n  const sdkVersion = getSdkVersion(sdk);\n\n  return {\n    sdkName,\n    sdkVersion,\n    ...platform,\n  };\n};\n\nexport const getSdkName = (sdk: Sdk | undefined) => {\n  return sdk && sdk.type === SdkType.REACT\n    ? 'stream-react'\n    : sdk && sdk.type === SdkType.REACT_NATIVE\n      ? 'stream-react-native'\n      : 'stream-js';\n};\n\nexport const getSdkVersion = (sdk: Sdk | undefined) => {\n  return sdk ? `${sdk.major}.${sdk.minor}.${sdk.patch}` : '0.0.0-development';\n};\n", "import {\n  AndroidThermalState,\n  AppleThermalState,\n  ClientDetails,\n  Device,\n  OS,\n  Sdk,\n  SdkType,\n} from '../gen/video/sfu/models/models';\nimport { SendStatsRequest } from '../gen/video/sfu/signal_rpc/signal';\nimport { isReactNative } from './platforms';\nimport { UAParser } from 'ua-parser-js';\n\ntype WebRTCInfoType = {\n  version: string;\n};\n\nconst version = process.env.PKG_VERSION || '0.0.0';\nconst [major, minor, patch] = version.split('.');\n\nlet sdkInfo: Sdk | undefined = {\n  type: SdkType.PLAIN_JAVASCRIPT,\n  major,\n  minor,\n  patch,\n};\n\nlet osInfo: OS | undefined;\nlet deviceInfo: Device | undefined;\nlet webRtcInfo: WebRTCInfoType | undefined;\nlet deviceState: SendStatsRequest['deviceState'] = { oneofKind: undefined };\n\nexport const setSdkInfo = (info: Sdk) => {\n  sdkInfo = info;\n};\n\nexport const getSdkInfo = () => {\n  return sdkInfo;\n};\n\nexport const setOSInfo = (info: OS) => {\n  osInfo = info;\n};\n\nexport const setDeviceInfo = (info: Device) => {\n  deviceInfo = info;\n};\n\nexport const getWebRTCInfo = () => {\n  return webRtcInfo;\n};\n\nexport const setWebRTCInfo = (info: WebRTCInfoType) => {\n  webRtcInfo = info;\n};\n\nexport const setThermalState = (state: string) => {\n  if (!osInfo) {\n    deviceState = { oneofKind: undefined };\n    return;\n  }\n\n  if (osInfo.name === 'android') {\n    const thermalState =\n      AndroidThermalState[state as keyof typeof AndroidThermalState] ||\n      AndroidThermalState.UNSPECIFIED;\n\n    deviceState = {\n      oneofKind: 'android',\n      android: {\n        thermalState,\n        isPowerSaverMode:\n          deviceState?.oneofKind === 'android' &&\n          deviceState.android.isPowerSaverMode,\n      },\n    };\n  }\n\n  if (osInfo.name.toLowerCase() === 'ios') {\n    const thermalState =\n      AppleThermalState[state as keyof typeof AppleThermalState] ||\n      AppleThermalState.UNSPECIFIED;\n\n    deviceState = {\n      oneofKind: 'apple',\n      apple: {\n        thermalState,\n        isLowPowerModeEnabled:\n          deviceState?.oneofKind === 'apple' &&\n          deviceState.apple.isLowPowerModeEnabled,\n      },\n    };\n  }\n};\n\nexport const setPowerState = (powerMode: boolean) => {\n  if (!osInfo) {\n    deviceState = { oneofKind: undefined };\n    return;\n  }\n\n  if (osInfo.name === 'android') {\n    deviceState = {\n      oneofKind: 'android',\n      android: {\n        thermalState:\n          deviceState?.oneofKind === 'android'\n            ? deviceState.android.thermalState\n            : AndroidThermalState.UNSPECIFIED,\n        isPowerSaverMode: powerMode,\n      },\n    };\n  }\n\n  if (osInfo.name.toLowerCase() === 'ios') {\n    deviceState = {\n      oneofKind: 'apple',\n      apple: {\n        thermalState:\n          deviceState?.oneofKind === 'apple'\n            ? deviceState.apple.thermalState\n            : AppleThermalState.UNSPECIFIED,\n        isLowPowerModeEnabled: powerMode,\n      },\n    };\n  }\n};\n\nexport const getDeviceState = () => {\n  return deviceState;\n};\n\nexport const getClientDetails = async (): Promise<ClientDetails> => {\n  if (isReactNative()) {\n    // Since RN doesn't support web, sharing browser info is not required\n    return {\n      sdk: sdkInfo,\n      os: osInfo,\n      device: deviceInfo,\n    };\n  }\n\n  // @ts-expect-error - userAgentData is not yet in the TS types\n  const userAgentDataApi = navigator.userAgentData;\n  let userAgentData:\n    | {\n        platform?: string;\n        platformVersion?: string;\n        fullVersionList?: Array<{ brand: string; version: string }>;\n      }\n    | undefined;\n  if (userAgentDataApi && userAgentDataApi.getHighEntropyValues) {\n    try {\n      userAgentData = await userAgentDataApi.getHighEntropyValues([\n        'platform',\n        'platformVersion',\n        'fullVersionList',\n      ]);\n    } catch {\n      // Ignore the error\n    }\n  }\n\n  const userAgent = new UAParser(navigator.userAgent);\n  const { browser, os, device, cpu } = userAgent.getResult();\n  // If userAgentData is available, it means we are in a modern Chromium browser,\n  // and we can use it to get more accurate browser information.\n  // We hook into the fullVersionList to find the browser name and version and\n  // eventually detect exotic browsers like Samsung Internet, AVG Secure Browser, etc.\n  // who by default they identify themselves as \"Chromium\" in the user agent string.\n  // Eliminates the generic \"Chromium\" name and \"Not)A_Brand\" name from the list.\n  // https://wicg.github.io/ua-client-hints/#create-arbitrary-brands-section\n  const uaBrowser = userAgentData?.fullVersionList?.find(\n    (v) => !v.brand.includes('Chromium') && !v.brand.match(/[()\\-./:;=?_]/g),\n  );\n  return {\n    sdk: sdkInfo,\n    browser: {\n      name: uaBrowser?.brand || browser.name || navigator.userAgent,\n      version: uaBrowser?.version || browser.version || '',\n    },\n    os: {\n      name: userAgentData?.platform || os.name || '',\n      version: userAgentData?.platformVersion || os.version || '',\n      architecture: cpu.architecture || '',\n    },\n    device: {\n      name: [device.vendor, device.model, device.type]\n        .filter(Boolean)\n        .join(' '),\n      version: '',\n    },\n  };\n};\n", "import { getClientDetails } from './client-details';\n\n/**\n * Checks whether the current browser is Safari.\n */\nexport const isSafari = () => {\n  if (typeof navigator === 'undefined') return false;\n  return /^((?!chrome|android).)*safari/i.test(navigator.userAgent || '');\n};\n\n/**\n * Checks whether the current browser is Firefox.\n */\nexport const isFirefox = () => {\n  if (typeof navigator === 'undefined') return false;\n  return navigator.userAgent?.includes('Firefox');\n};\n\n/**\n * Checks whether the current browser is Google Chrome.\n */\nexport const isChrome = () => {\n  if (typeof navigator === 'undefined') return false;\n  return navigator.userAgent?.includes('Chrome');\n};\n\n/**\n * Checks whether the current browser is among the list of first-class supported browsers.\n * This includes Chrome, Edge, Firefox, and Safari.\n *\n * Although the Stream Video SDK may work in other browsers, these are the ones we officially support.\n */\nexport const isSupportedBrowser = async (): Promise<boolean> => {\n  const { browser } = await getClientDetails();\n  if (!browser) return false; // we aren't running in a browser\n\n  const name = browser.name.toLowerCase();\n  const [major] = browser.version.split('.');\n  const version = parseInt(major, 10);\n  return (\n    (name.includes('chrome') && version >= 124) ||\n    (name.includes('edge') && version >= 124) ||\n    (name.includes('firefox') && version >= 124) ||\n    (name.includes('safari') && version >= 17) ||\n    (name.includes('webkit') && version >= 605) || // WebView on iOS\n    (name.includes('webview') && version >= 124) // WebView on Android\n  );\n};\n", "import type {\n  AggregatedStatsReport,\n  BaseStats,\n  ParticipantsStatsReport,\n  RTCCodecStats,\n  RTCMediaSourceStats,\n  StatsReport,\n} from './types';\nimport { CallState } from '../store';\nimport { Publisher, Subscriber } from '../rtc';\nimport { flatten } from './utils';\nimport { TrackType } from '../gen/video/sfu/models/models';\nimport { isFirefox } from '../helpers/browsers';\nimport { videoLoggerSystem } from '../logger';\n\nexport type StatsReporterOpts = {\n  subscriber: Subscriber;\n  publisher?: Publisher;\n  state: CallState;\n  datacenter: string;\n  pollingIntervalInMs?: number;\n};\n\ntype PeerConnectionKind = 'subscriber' | 'publisher';\n\nexport type StatsReporter = {\n  /**\n   * Will turn on stats reporting for a given sessionId.\n   *\n   * @param sessionId the session id.\n   */\n  startReportingStatsFor: (sessionId: string) => void;\n\n  /**\n   * Will turn off stats reporting for a given sessionId.\n   *\n   * @param sessionId the session id.\n   */\n  stopReportingStatsFor: (sessionId: string) => void;\n\n  /**\n   * Helper method for retrieving stats for a given peer connection kind\n   * and media stream flowing through it.\n   *\n   * @param kind the peer connection kind (subscriber or publisher).\n   * @param mediaStream the media stream.\n   */\n  getStatsForStream: (\n    kind: PeerConnectionKind,\n    tracks: MediaStreamTrack[],\n  ) => Promise<StatsReport[]>;\n\n  /**\n   * Helper method for retrieving raw stats for a given peer connection kind.\n   *\n   * @param kind the peer connection kind (subscriber or publisher).\n   * @param selector the track selector. If not provided, stats for all tracks will be returned.\n   */\n  getRawStatsForTrack: (\n    kind: PeerConnectionKind,\n    selector?: MediaStreamTrack,\n  ) => Promise<RTCStatsReport | undefined>;\n\n  /**\n   * Stops the stats reporter and releases all resources.\n   */\n  stop: () => void;\n};\n\n/**\n * Creates a new StatsReporter instance that collects metrics about the ongoing call and reports them to the state store\n */\nexport const createStatsReporter = ({\n  subscriber,\n  publisher,\n  state,\n  datacenter,\n  pollingIntervalInMs = 2000,\n}: StatsReporterOpts): StatsReporter => {\n  const logger = videoLoggerSystem.getLogger('stats');\n  const getRawStatsForTrack = async (\n    kind: PeerConnectionKind,\n    selector?: MediaStreamTrack,\n  ) => {\n    if (kind === 'subscriber' && subscriber) {\n      return subscriber.getStats(selector);\n    } else if (kind === 'publisher' && publisher) {\n      return publisher.getStats(selector);\n    } else {\n      return undefined;\n    }\n  };\n\n  const getStatsForStream = async (\n    kind: PeerConnectionKind,\n    tracks: MediaStreamTrack[],\n  ) => {\n    const pc = kind === 'subscriber' ? subscriber : publisher;\n    if (!pc) return [];\n    const statsForStream: StatsReport[] = [];\n    for (const track of tracks) {\n      const report = await pc.getStats(track);\n      const stats = transform(report, {\n        trackKind: track.kind as 'audio' | 'video',\n        kind,\n        publisher: undefined,\n      });\n      statsForStream.push(stats);\n    }\n    return statsForStream;\n  };\n\n  const startReportingStatsFor = (sessionId: string) => {\n    sessionIdsToTrack.add(sessionId);\n    void run();\n  };\n\n  const stopReportingStatsFor = (sessionId: string) => {\n    sessionIdsToTrack.delete(sessionId);\n    void run();\n  };\n\n  const sessionIdsToTrack = new Set<string>();\n\n  /**\n   * The main stats reporting loop.\n   */\n  const run = async () => {\n    const participantStats: ParticipantsStatsReport = {};\n    if (sessionIdsToTrack.size > 0) {\n      const sessionIds = new Set(sessionIdsToTrack);\n      for (const participant of state.participants) {\n        if (!sessionIds.has(participant.sessionId)) continue;\n        const {\n          audioStream,\n          isLocalParticipant,\n          sessionId,\n          userId,\n          videoStream,\n        } = participant;\n        const kind = isLocalParticipant ? 'publisher' : 'subscriber';\n        try {\n          const tracks = isLocalParticipant\n            ? publisher?.getPublishedTracks() || []\n            : [\n                ...(videoStream?.getVideoTracks() || []),\n                ...(audioStream?.getAudioTracks() || []),\n              ];\n          participantStats[sessionId] = await getStatsForStream(kind, tracks);\n        } catch (e) {\n          logger.warn(`Failed to collect ${kind} stats for ${userId}`, e);\n        }\n      }\n    }\n\n    const [subscriberRawStats, publisherRawStats] = await Promise.all([\n      getRawStatsForTrack('subscriber'),\n      publisher ? getRawStatsForTrack('publisher') : undefined,\n    ]);\n\n    const process = (report: RTCStatsReport, kind: PeerConnectionKind) =>\n      aggregate(transform(report, { kind, trackKind: 'video', publisher }));\n\n    const subscriberStats = subscriberRawStats\n      ? process(subscriberRawStats, 'subscriber')\n      : getEmptyStats();\n    const publisherStats = publisherRawStats\n      ? process(publisherRawStats, 'publisher')\n      : getEmptyStats();\n\n    state.setCallStatsReport({\n      datacenter,\n      publisherStats,\n      subscriberStats,\n      subscriberRawStats,\n      publisherRawStats,\n      participants: participantStats,\n      timestamp: Date.now(),\n    });\n  };\n\n  let timeoutId: NodeJS.Timeout | undefined;\n  if (pollingIntervalInMs > 0) {\n    const loop = async () => {\n      // bail out of the loop as we don't want to collect stats\n      // (they are expensive) if no one is listening to them\n      if (state.isCallStatsReportObserved) {\n        await run().catch((e) => {\n          logger.debug('Failed to collect stats', e);\n        });\n      }\n      timeoutId = setTimeout(loop, pollingIntervalInMs);\n    };\n    void loop();\n  }\n\n  const stop = () => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  };\n\n  return {\n    getRawStatsForTrack,\n    getStatsForStream,\n    startReportingStatsFor,\n    stopReportingStatsFor,\n    stop,\n  };\n};\n\nexport type StatsTransformOpts = {\n  /**\n   * The kind of track we are transforming stats for.\n   */\n  trackKind: 'audio' | 'video';\n  /**\n   * The kind of peer connection we are transforming stats for.\n   */\n  kind: PeerConnectionKind;\n  /**\n   * The publisher instance.\n   */\n  publisher: Publisher | undefined;\n};\n\n/**\n * Transforms raw RTC stats into a slimmer and uniform across browsers format.\n *\n * @param report the report to transform.\n * @param opts the transform options.\n */\nconst transform = (\n  report: RTCStatsReport,\n  opts: StatsTransformOpts,\n): StatsReport => {\n  const { trackKind, kind, publisher } = opts;\n  const direction = kind === 'subscriber' ? 'inbound-rtp' : 'outbound-rtp';\n  const stats = flatten(report);\n  const streams = stats\n    .filter(\n      (stat) =>\n        stat.type === direction &&\n        (stat as RTCRtpStreamStats).kind === trackKind,\n    )\n    .map((stat): BaseStats => {\n      const rtcStreamStats = stat as RTCInboundRtpStreamStats &\n        RTCOutboundRtpStreamStats;\n\n      const codec = stats.find(\n        (s) => s.type === 'codec' && s.id === rtcStreamStats.codecId,\n      ) as RTCCodecStats | undefined;\n\n      const transport = stats.find(\n        (s) => s.type === 'transport' && s.id === rtcStreamStats.transportId,\n      ) as RTCTransportStats | undefined;\n\n      let roundTripTime: number | undefined;\n      if (transport && transport.dtlsState === 'connected') {\n        const candidatePair = stats.find(\n          (s) =>\n            s.type === 'candidate-pair' &&\n            s.id === transport.selectedCandidatePairId,\n        ) as RTCIceCandidatePairStats | undefined;\n        roundTripTime = candidatePair?.currentRoundTripTime;\n      }\n\n      let trackType: TrackType | undefined;\n      if (kind === 'publisher' && publisher) {\n        const firefox = isFirefox();\n        const mediaSource = stats.find(\n          (s) =>\n            s.type === 'media-source' &&\n            // Firefox doesn't have mediaSourceId, so we need to guess the media source\n            (firefox ? true : s.id === rtcStreamStats.mediaSourceId),\n        ) as RTCMediaSourceStats | undefined;\n        if (mediaSource) {\n          trackType = publisher.getTrackType(mediaSource.trackIdentifier);\n        }\n      }\n\n      return {\n        bytesSent: rtcStreamStats.bytesSent,\n        bytesReceived: rtcStreamStats.bytesReceived,\n        codec: codec?.mimeType,\n        currentRoundTripTime: roundTripTime,\n        frameHeight: rtcStreamStats.frameHeight,\n        frameWidth: rtcStreamStats.frameWidth,\n        framesPerSecond: rtcStreamStats.framesPerSecond,\n        jitter: rtcStreamStats.jitter,\n        kind: rtcStreamStats.kind,\n        mediaSourceId: rtcStreamStats.mediaSourceId,\n        qualityLimitationReason: rtcStreamStats.qualityLimitationReason,\n        rid: rtcStreamStats.rid,\n        ssrc: rtcStreamStats.ssrc,\n        trackType,\n      };\n    });\n\n  return {\n    rawStats: report,\n    streams,\n    timestamp: Date.now(),\n  };\n};\n\nconst getEmptyStats = (stats?: StatsReport): AggregatedStatsReport => {\n  return {\n    rawReport: stats ?? { streams: [], timestamp: Date.now() },\n    totalBytesSent: 0,\n    totalBytesReceived: 0,\n    averageJitterInMs: 0,\n    averageRoundTripTimeInMs: 0,\n    qualityLimitationReasons: 'none',\n    highestFrameWidth: 0,\n    highestFrameHeight: 0,\n    highestFramesPerSecond: 0,\n    codec: '',\n    codecPerTrackType: {},\n    timestamp: Date.now(),\n  };\n};\n\n/**\n * Aggregates generic stats.\n *\n * @param stats the stats to aggregate.\n */\nconst aggregate = (stats: StatsReport): AggregatedStatsReport => {\n  const aggregatedStats = getEmptyStats(stats);\n\n  let maxArea = -1;\n  const area = (w: number, h: number) => w * h;\n\n  const qualityLimitationReasons = new Set<string>();\n  const streams = stats.streams;\n  const report = streams.reduce((acc, stream) => {\n    acc.totalBytesSent += stream.bytesSent || 0;\n    acc.totalBytesReceived += stream.bytesReceived || 0;\n    acc.averageJitterInMs += stream.jitter || 0;\n    acc.averageRoundTripTimeInMs += stream.currentRoundTripTime || 0;\n\n    // naive calculation of the highest resolution\n    const streamArea = area(stream.frameWidth || 0, stream.frameHeight || 0);\n    if (streamArea > maxArea) {\n      acc.highestFrameWidth = stream.frameWidth || 0;\n      acc.highestFrameHeight = stream.frameHeight || 0;\n      acc.highestFramesPerSecond = stream.framesPerSecond || 0;\n      maxArea = streamArea;\n    }\n\n    qualityLimitationReasons.add(stream.qualityLimitationReason || '');\n    return acc;\n  }, aggregatedStats);\n\n  if (streams.length > 0) {\n    report.averageJitterInMs = Math.round(\n      (report.averageJitterInMs / streams.length) * 1000,\n    );\n    report.averageRoundTripTimeInMs = Math.round(\n      (report.averageRoundTripTimeInMs / streams.length) * 1000,\n    );\n    // we take the first codec we find, as it should be the same for all streams\n    report.codec = streams[0].codec || '';\n    report.codecPerTrackType = streams.reduce(\n      (acc, stream) => {\n        if (stream.trackType) {\n          acc[stream.trackType] = stream.codec || '';\n        }\n        return acc;\n      },\n      {} as Record<TrackType, string>,\n    );\n  }\n\n  const qualityLimitationReason = [\n    qualityLimitationReasons.has('cpu') && 'cpu',\n    qualityLimitationReasons.has('bandwidth') && 'bandwidth',\n    qualityLimitationReasons.has('other') && 'other',\n  ]\n    .filter(Boolean)\n    .join(', ');\n  if (qualityLimitationReason) {\n    report.qualityLimitationReasons = qualityLimitationReason;\n  }\n\n  return report;\n};\n", "import { combineLatest } from 'rxjs';\nimport { StreamSfuClient } from '../StreamSfuClient';\nimport { OwnCapability, StatsOptions } from '../gen/coordinator';\nimport { Publisher, Subscriber } from '../rtc';\nimport { Tracer, TraceRecord } from './rtc';\nimport { flatten, getSdkName, getSdkVersion } from './utils';\nimport { getDeviceState, getWebRTCInfo } from '../helpers/client-details';\nimport {\n  ClientDetails,\n  InputDevices,\n  WebsocketReconnectStrategy,\n} from '../gen/video/sfu/models/models';\nimport { CameraManager, MicrophoneManager } from '../devices';\nimport { createSubscription } from '../store/rxUtils';\nimport { CallState } from '../store';\nimport { Telemetry } from '../gen/video/sfu/signal_rpc/signal';\nimport { videoLoggerSystem } from '../logger';\n\nexport type SfuStatsReporterOptions = {\n  options: StatsOptions;\n  clientDetails: ClientDetails;\n  subscriber: Subscriber;\n  publisher?: Publisher;\n  microphone: MicrophoneManager;\n  camera: CameraManager;\n  state: CallState;\n  tracer: Tracer;\n  unifiedSessionId: string;\n};\n\nexport class SfuStatsReporter {\n  private readonly logger = videoLoggerSystem.getLogger('SfuStatsReporter');\n\n  readonly options: StatsOptions;\n\n  private readonly sfuClient: StreamSfuClient;\n  private readonly subscriber: Subscriber;\n  private readonly publisher?: Publisher;\n  private readonly microphone: MicrophoneManager;\n  private readonly camera: CameraManager;\n  private readonly state: CallState;\n  private readonly tracer: Tracer;\n  private readonly unifiedSessionId: string;\n\n  private intervalId: NodeJS.Timeout | undefined;\n  private timeoutId: NodeJS.Timeout | undefined;\n  private unsubscribeDevicePermissionsSubscription?: () => void;\n  private unsubscribeListDevicesSubscription?: () => void;\n  private readonly sdkName: string;\n  private readonly sdkVersion: string;\n  private readonly webRTCVersion: string;\n  private readonly inputDevices = new Map<'mic' | 'camera', InputDevices>();\n\n  constructor(\n    sfuClient: StreamSfuClient,\n    {\n      options,\n      clientDetails,\n      subscriber,\n      publisher,\n      microphone,\n      camera,\n      state,\n      tracer,\n      unifiedSessionId,\n    }: SfuStatsReporterOptions,\n  ) {\n    this.sfuClient = sfuClient;\n    this.options = options;\n    this.subscriber = subscriber;\n    this.publisher = publisher;\n    this.microphone = microphone;\n    this.camera = camera;\n    this.state = state;\n    this.tracer = tracer;\n    this.unifiedSessionId = unifiedSessionId;\n\n    const { sdk, browser } = clientDetails;\n    this.sdkName = getSdkName(sdk);\n    this.sdkVersion = getSdkVersion(sdk);\n\n    // use the WebRTC version if set by the SDK (React Native) otherwise,\n    // use the browser version as a fallback\n    const webRTCInfo = getWebRTCInfo();\n    this.webRTCVersion =\n      webRTCInfo?.version ||\n      `${browser?.name || ''}-${browser?.version || ''}` ||\n      'N/A';\n  }\n\n  private observeDevice = (\n    device: CameraManager | MicrophoneManager,\n    kind: 'mic' | 'camera',\n  ) => {\n    const { browserPermissionState$ } = device.state;\n    this.unsubscribeDevicePermissionsSubscription?.();\n    this.unsubscribeDevicePermissionsSubscription = createSubscription(\n      combineLatest([browserPermissionState$, this.state.ownCapabilities$]),\n      ([browserPermissionState, ownCapabilities]) => {\n        // cleanup the previous listDevices() subscription in case\n        // permissions or capabilities have changed.\n        // we will subscribe again if everything is in order.\n        this.unsubscribeListDevicesSubscription?.();\n        const hasCapability =\n          kind === 'mic'\n            ? ownCapabilities.includes(OwnCapability.SEND_AUDIO)\n            : ownCapabilities.includes(OwnCapability.SEND_VIDEO);\n        if (browserPermissionState !== 'granted' || !hasCapability) {\n          this.inputDevices.set(kind, {\n            currentDevice: '',\n            availableDevices: [],\n            isPermitted: false,\n          });\n          return;\n        }\n        this.unsubscribeListDevicesSubscription = createSubscription(\n          combineLatest([device.listDevices(), device.state.selectedDevice$]),\n          ([devices, deviceId]) => {\n            const selected = devices.find((d) => d.deviceId === deviceId);\n            this.inputDevices.set(kind, {\n              currentDevice: selected?.label || deviceId || '',\n              availableDevices: devices.map((d) => d.label),\n              isPermitted: true,\n            });\n          },\n        );\n      },\n    );\n  };\n\n  sendConnectionTime = (connectionTimeSeconds: number) => {\n    this.sendTelemetryData({\n      data: {\n        oneofKind: 'connectionTimeSeconds',\n        connectionTimeSeconds,\n      },\n    });\n  };\n\n  sendReconnectionTime = (\n    strategy: WebsocketReconnectStrategy,\n    timeSeconds: number,\n  ) => {\n    this.sendTelemetryData({\n      data: {\n        oneofKind: 'reconnection',\n        reconnection: { strategy, timeSeconds },\n      },\n    });\n  };\n\n  private sendTelemetryData = (telemetryData: Telemetry) => {\n    // intentionally not awaiting the promise here\n    // to avoid impeding with the ongoing actions.\n    this.run(telemetryData).catch((err) => {\n      this.logger.warn('Failed to send telemetry data', err);\n    });\n  };\n\n  private run = async (telemetry?: Telemetry) => {\n    const [subscriberStats, publisherStats] = await Promise.all([\n      this.subscriber.stats.get(),\n      this.publisher?.stats.get(),\n    ]);\n\n    this.subscriber.tracer?.trace('getstats', subscriberStats.delta);\n    if (publisherStats) {\n      this.publisher?.tracer?.trace('getstats', publisherStats.delta);\n    }\n\n    const subscriberTrace = this.subscriber.tracer?.take();\n    const publisherTrace = this.publisher?.tracer?.take();\n    const tracer = this.tracer.take();\n    const sfuTrace = this.sfuClient.getTrace();\n    const traces: TraceRecord[] = [\n      ...tracer.snapshot,\n      ...(sfuTrace?.snapshot ?? []),\n      ...(publisherTrace?.snapshot ?? []),\n      ...(subscriberTrace?.snapshot ?? []),\n    ];\n\n    try {\n      await this.sfuClient.sendStats({\n        sdk: this.sdkName,\n        sdkVersion: this.sdkVersion,\n        webrtcVersion: this.webRTCVersion,\n        subscriberStats: JSON.stringify(flatten(subscriberStats.stats)),\n        publisherStats: publisherStats\n          ? JSON.stringify(flatten(publisherStats.stats))\n          : '[]',\n        subscriberRtcStats: '',\n        publisherRtcStats: '',\n        rtcStats: JSON.stringify(traces),\n        encodeStats: publisherStats?.performanceStats ?? [],\n        decodeStats: subscriberStats.performanceStats,\n        audioDevices: this.inputDevices.get('mic'),\n        videoDevices: this.inputDevices.get('camera'),\n        unifiedSessionId: this.unifiedSessionId,\n        deviceState: getDeviceState(),\n        telemetry,\n      });\n    } catch (err) {\n      publisherTrace?.rollback();\n      subscriberTrace?.rollback();\n      tracer.rollback();\n      sfuTrace?.rollback();\n      throw err;\n    }\n  };\n\n  start = () => {\n    if (this.options.reporting_interval_ms <= 0) return;\n\n    this.observeDevice(this.microphone, 'mic');\n    this.observeDevice(this.camera, 'camera');\n\n    clearInterval(this.intervalId);\n    this.intervalId = setInterval(() => {\n      this.run().catch((err) => {\n        this.logger.warn('Failed to report stats', err);\n      });\n    }, this.options.reporting_interval_ms);\n  };\n\n  stop = () => {\n    this.unsubscribeDevicePermissionsSubscription?.();\n    this.unsubscribeDevicePermissionsSubscription = undefined;\n    this.unsubscribeListDevicesSubscription?.();\n    this.unsubscribeListDevicesSubscription = undefined;\n\n    this.inputDevices.clear();\n    clearInterval(this.intervalId);\n    this.intervalId = undefined;\n    clearTimeout(this.timeoutId);\n    this.timeoutId = undefined;\n  };\n\n  flush = () => {\n    this.run().catch((err) => {\n      this.logger.warn('Failed to flush report stats', err);\n    });\n  };\n\n  scheduleOne = (timeout: number) => {\n    clearTimeout(this.timeoutId);\n    this.timeoutId = setTimeout(() => {\n      this.run().catch((err) => {\n        this.logger.warn('Failed to report stats', err);\n      });\n    }, timeout);\n  };\n}\n", "import type { RTCStatsDataType, Trace } from './types';\n\nexport const traceRTCPeerConnection = (pc: RTCPeerConnection, trace: Trace) => {\n  pc.addEventListener('icecandidate', (e) => {\n    trace('onicecandidate', e.candidate);\n  });\n  pc.addEventListener('track', (e) => {\n    const streams = e.streams.map((stream) => `stream:${stream.id}`);\n    trace('ontrack', `${e.track.kind}:${e.track.id} ${streams}`);\n  });\n  pc.addEventListener('signalingstatechange', () => {\n    trace('signalingstatechange', pc.signalingState);\n  });\n  pc.addEventListener('iceconnectionstatechange', () => {\n    trace('iceconnectionstatechange', pc.iceConnectionState);\n  });\n  pc.addEventListener('icegatheringstatechange', () => {\n    trace('icegatheringstatechange', pc.iceGatheringState);\n  });\n  pc.addEventListener('connectionstatechange', () => {\n    trace('connectionstatechange', pc.connectionState);\n  });\n  pc.addEventListener('negotiationneeded', () => {\n    trace('negotiationneeded', undefined);\n  });\n  pc.addEventListener('datachannel', ({ channel }) => {\n    trace('datachannel', [channel.id, channel.label]);\n  });\n\n  const origClose = pc.close;\n  pc.close = function tracedClose() {\n    trace('close', undefined);\n    return origClose.call(this);\n  };\n\n  for (const method of [\n    'createOffer',\n    'createAnswer',\n    'setLocalDescription',\n    'setRemoteDescription',\n    'addIceCandidate',\n  ] as const) {\n    const original = pc[method];\n    if (!original) continue;\n\n    // @ts-expect-error we don't use deprecated APIs\n    pc[method] = async function tracedMethod(...args: any[]) {\n      try {\n        trace(method, args);\n        // @ts-expect-error improper types\n        const result = await original.apply(this, args);\n        trace(`${method}OnSuccess`, result as RTCStatsDataType);\n        return result;\n      } catch (err) {\n        trace(`${method}OnFailure`, (err as Error).toString());\n        throw err;\n      }\n    };\n  }\n};\n", "import {\n  Codec,\n  PeerType,\n  PerformanceStats,\n  TrackType,\n} from '../../gen/video/sfu/models/models';\nimport type { RTCCodecStats, RTCMediaSourceStats } from '../types';\nimport type { ComputedStats } from './types';\n\n/**\n * StatsTracer is a class that collects and processes WebRTC stats.\n * It is used to track the performance of the WebRTC connection\n * and to provide information about the media streams.\n * It is used by both the Publisher and Subscriber classes.\n *\n * @internal\n */\nexport class StatsTracer {\n  private readonly pc: RTCPeerConnection;\n  private readonly peerType: PeerType;\n  private readonly trackIdToTrackType: Map<string, TrackType>;\n\n  private costOverrides?: Map<TrackType, number>;\n\n  private previousStats: Record<string, RTCStats> = {};\n  private frameTimeHistory: number[] = [];\n  private fpsHistory: number[] = [];\n\n  /**\n   * Creates a new StatsTracer instance.\n   */\n  constructor(\n    pc: RTCPeerConnection,\n    peerType: PeerType,\n    trackIdToTrackType: Map<string, TrackType>,\n  ) {\n    this.pc = pc;\n    this.peerType = peerType;\n    this.trackIdToTrackType = trackIdToTrackType;\n  }\n\n  /**\n   * Get the stats from the RTCPeerConnection.\n   * When called, it will return the stats for the current connection.\n   * It will also return the delta between the current stats and the previous stats.\n   * This is used to track the performance of the connection.\n   *\n   * @internal\n   */\n  get = async (): Promise<ComputedStats> => {\n    const stats = await this.pc.getStats();\n    const currentStats = toObject(stats);\n\n    const performanceStats = this.withOverrides(\n      this.peerType === PeerType.SUBSCRIBER\n        ? this.getDecodeStats(currentStats)\n        : this.getEncodeStats(currentStats),\n    );\n\n    const delta = deltaCompression(this.previousStats, currentStats);\n\n    // store the current data for the next iteration\n    this.previousStats = currentStats;\n    this.frameTimeHistory = this.frameTimeHistory.slice(-2);\n    this.fpsHistory = this.fpsHistory.slice(-2);\n\n    return { performanceStats, delta, stats };\n  };\n\n  /**\n   * Collects encode stats from the RTCPeerConnection.\n   */\n  private getEncodeStats = (\n    currentStats: Record<string, RTCStats>,\n  ): PerformanceStats[] => {\n    const encodeStats: PerformanceStats[] = [];\n    for (const rtp of Object.values(currentStats)) {\n      if (rtp.type !== 'outbound-rtp') continue;\n\n      const {\n        codecId,\n        framesSent = 0,\n        kind,\n        id,\n        totalEncodeTime = 0,\n        framesPerSecond = 0,\n        frameHeight = 0,\n        frameWidth = 0,\n        targetBitrate = 0,\n        mediaSourceId,\n      } = rtp as RTCOutboundRtpStreamStats;\n\n      if (kind === 'audio' || !this.previousStats[id]) continue;\n      const prevRtp = this.previousStats[id] as RTCOutboundRtpStreamStats;\n\n      const deltaTotalEncodeTime =\n        totalEncodeTime - (prevRtp.totalEncodeTime || 0);\n      const deltaFramesSent = framesSent - (prevRtp.framesSent || 0);\n      const framesEncodeTime =\n        deltaFramesSent > 0\n          ? (deltaTotalEncodeTime / deltaFramesSent) * 1000\n          : 0;\n\n      this.frameTimeHistory.push(framesEncodeTime);\n      this.fpsHistory.push(framesPerSecond);\n\n      let trackType = TrackType.VIDEO;\n      if (mediaSourceId && currentStats[mediaSourceId]) {\n        const mediaSource = currentStats[mediaSourceId] as RTCMediaSourceStats;\n        trackType =\n          this.trackIdToTrackType.get(mediaSource.trackIdentifier) || trackType;\n      }\n\n      encodeStats.push({\n        trackType,\n        codec: getCodecFromStats(currentStats, codecId),\n        avgFrameTimeMs: average(this.frameTimeHistory),\n        avgFps: average(this.fpsHistory),\n        targetBitrate: Math.round(targetBitrate),\n        videoDimension: { width: frameWidth, height: frameHeight },\n      });\n    }\n\n    return encodeStats;\n  };\n\n  /**\n   * Collects decode stats from the RTCPeerConnection.\n   */\n  private getDecodeStats = (\n    currentStats: Record<string, RTCStats>,\n  ): PerformanceStats[] => {\n    let rtp: RTCInboundRtpStreamStats | undefined = undefined;\n    let max = 0;\n    for (const item of Object.values(currentStats)) {\n      if (item.type !== 'inbound-rtp') continue;\n      const rtpItem = item as RTCInboundRtpStreamStats;\n      const { kind, frameWidth = 0, frameHeight = 0 } = rtpItem;\n      const area = frameWidth * frameHeight;\n      if (kind === 'video' && area > max) {\n        rtp = rtpItem;\n        max = area;\n      }\n    }\n\n    if (!rtp || !this.previousStats[rtp.id]) return [];\n    const prevRtp = this.previousStats[rtp.id] as RTCInboundRtpStreamStats;\n\n    const {\n      framesDecoded = 0,\n      framesPerSecond = 0,\n      totalDecodeTime = 0,\n      trackIdentifier,\n    } = rtp;\n    const deltaTotalDecodeTime =\n      totalDecodeTime - (prevRtp.totalDecodeTime || 0);\n    const deltaFramesDecoded = framesDecoded - (prevRtp.framesDecoded || 0);\n\n    const framesDecodeTime =\n      deltaFramesDecoded > 0\n        ? (deltaTotalDecodeTime / deltaFramesDecoded) * 1000\n        : 0;\n\n    this.frameTimeHistory.push(framesDecodeTime);\n    this.fpsHistory.push(framesPerSecond);\n\n    const trackType =\n      this.trackIdToTrackType.get(trackIdentifier) || TrackType.VIDEO;\n\n    return [\n      PerformanceStats.create({\n        trackType,\n        codec: getCodecFromStats(currentStats, rtp.codecId),\n        avgFrameTimeMs: average(this.frameTimeHistory),\n        avgFps: average(this.fpsHistory),\n        videoDimension: { width: rtp.frameWidth, height: rtp.frameHeight },\n      }),\n    ];\n  };\n\n  /**\n   * Applies cost overrides to the performance stats.\n   * This is used to override the default encode/decode times with custom values.\n   * This is useful for testing and debugging purposes, and it shouldn't be used in production.\n   */\n  private withOverrides = (\n    performanceStats: PerformanceStats[],\n  ): PerformanceStats[] => {\n    if (this.costOverrides) {\n      for (const s of performanceStats) {\n        const override = this.costOverrides.get(s.trackType);\n        if (override !== undefined) {\n          // override the average encode/decode time with the provided cost.\n          // format: [override].[original-frame-time]\n          s.avgFrameTimeMs = override + (s.avgFrameTimeMs || 0) / 1000;\n        }\n      }\n    }\n    return performanceStats;\n  };\n\n  /**\n   * Set the encode/decode cost for a specific track type.\n   * This is used to override the default encode/decode times with custom values.\n   * This is useful for testing and debugging purposes, and it shouldn't be used in production.\n   *\n   * @internal\n   */\n  setCost = (cost: number, trackType = TrackType.VIDEO) => {\n    if (!this.costOverrides) this.costOverrides = new Map();\n    this.costOverrides.set(trackType, cost);\n  };\n}\n\n/**\n * Convert the stat report to an object.\n *\n * @param report the stat report to convert.\n */\nconst toObject = (report: RTCStatsReport): Record<string, RTCStats> => {\n  const obj: Record<string, RTCStats> = {};\n  report.forEach((v, k) => {\n    obj[k] = v;\n  });\n  return obj;\n};\n\n/**\n * Apply delta compression to the stats report.\n * Reduces size by ~90%.\n * To reduce further, report keys could be compressed.\n */\nconst deltaCompression = (\n  oldStats: Record<any, any>,\n  newStats: Record<any, any>,\n): Record<any, any> => {\n  newStats = JSON.parse(JSON.stringify(newStats));\n\n  for (const [id, report] of Object.entries(newStats)) {\n    delete report.id;\n    if (!oldStats[id]) continue;\n\n    for (const [name, value] of Object.entries(report)) {\n      if (value === oldStats[id][name]) {\n        delete report[name];\n      }\n    }\n  }\n\n  let timestamp = -Infinity;\n  const values = Object.values(newStats);\n  for (const report of values) {\n    if (report.timestamp > timestamp) {\n      timestamp = report.timestamp;\n    }\n  }\n  for (const report of values) {\n    if (report.timestamp === timestamp) {\n      report.timestamp = 0;\n    }\n  }\n  newStats.timestamp = timestamp;\n  return newStats;\n};\n\n/**\n * Calculates an average value.\n */\nconst average = (arr: number[]) => arr.reduce((a, b) => a + b, 0) / arr.length;\n\n/**\n * Create a Codec object from the codec stats.\n *\n * @param stats the stats report.\n * @param codecId the codec ID to look for.\n */\nconst getCodecFromStats = (\n  stats: Record<string, RTCStats>,\n  codecId: string | undefined,\n): Codec | undefined => {\n  if (!codecId || !stats[codecId]) return;\n  const codecStats = stats[codecId] as RTCCodecStats;\n  return Codec.create({\n    name: codecStats.mimeType.split('/').pop(), // video/av1 -> av1\n    clockRate: codecStats.clockRate,\n    payloadType: codecStats.payloadType,\n    fmtp: codecStats.sdpFmtpLine,\n  });\n};\n", "import type {\n  RTCStatsDataType,\n  Trace,\n  TraceKey,\n  TraceRecord,\n  TraceSlice,\n} from './types';\n\nexport class Tracer {\n  private buffer: TraceRecord[] = [];\n  private enabled = true;\n  private readonly id: string | null;\n  private keys?: Map<TraceKey, boolean>;\n\n  constructor(id: string | null) {\n    this.id = id;\n  }\n\n  setEnabled = (enabled: boolean) => {\n    if (this.enabled === enabled) return;\n    this.enabled = enabled;\n    this.buffer = [];\n  };\n\n  trace: Trace = (tag, data) => {\n    if (!this.enabled) return;\n    this.buffer.push([tag, this.id, data, Date.now()]);\n  };\n\n  traceOnce = (key: TraceKey, tag: string, data: RTCStatsDataType) => {\n    if (this.keys?.has(key)) return;\n    this.trace(tag, data);\n    (this.keys ??= new Map()).set(key, true);\n  };\n\n  resetTrace = (key: TraceKey) => {\n    this.keys?.delete(key);\n  };\n\n  take = (): TraceSlice => {\n    const snapshot = this.buffer;\n    this.buffer = [];\n    return {\n      snapshot,\n      rollback: () => {\n        this.buffer.unshift(...snapshot);\n      },\n    };\n  };\n\n  dispose = () => {\n    this.buffer = [];\n    this.keys?.clear();\n  };\n}\n", "import { ScopedLogger, videoLoggerSystem } from '../logger';\nimport type { CallEventListener } from '../coordinator/connection/types';\nimport { CallingState, CallState } from '../store';\nimport { createSafeAsyncSubscription } from '../store/rxUtils';\nimport {\n  ErrorCode,\n  PeerType,\n  TrackType,\n  WebsocketReconnectStrategy,\n} from '../gen/video/sfu/models/models';\nimport { NegotiationError } from './NegotiationError';\nimport { StreamSfuClient } from '../StreamSfuClient';\nimport { AllSfuEvents, Dispatcher } from './Dispatcher';\nimport { withoutConcurrency } from '../helpers/concurrency';\nimport { StatsTracer, Tracer, traceRTCPeerConnection } from '../stats';\nimport type { BasePeerConnectionOpts, OnReconnectionNeeded } from './types';\nimport type { ClientPublishOptions } from '../types';\n\n/**\n * A base class for the `Publisher` and `Subscriber` classes.\n * @internal\n */\nexport abstract class BasePeerConnection {\n  protected readonly logger: ScopedLogger;\n  protected readonly peerType: PeerType;\n  protected readonly pc: RTCPeerConnection;\n  protected readonly state: CallState;\n  protected readonly dispatcher: Dispatcher;\n  protected readonly clientPublishOptions?: ClientPublishOptions;\n  protected sfuClient: StreamSfuClient;\n\n  private onReconnectionNeeded?: OnReconnectionNeeded;\n  private readonly iceRestartDelay: number;\n  private iceRestartTimeout?: NodeJS.Timeout;\n  protected isIceRestarting = false;\n  private isDisposed = false;\n\n  protected trackIdToTrackType = new Map<string, TrackType>();\n\n  readonly tracer?: Tracer;\n  readonly stats: StatsTracer;\n\n  private readonly subscriptions: (() => void)[] = [];\n  private unsubscribeIceTrickle?: () => void;\n  protected readonly lock = Math.random().toString(36).slice(2);\n\n  /**\n   * Constructs a new `BasePeerConnection` instance.\n   */\n  protected constructor(\n    peerType: PeerType,\n    {\n      sfuClient,\n      connectionConfig,\n      state,\n      dispatcher,\n      onReconnectionNeeded,\n      tag,\n      enableTracing,\n      clientPublishOptions,\n      iceRestartDelay = 2500,\n    }: BasePeerConnectionOpts,\n  ) {\n    this.peerType = peerType;\n    this.sfuClient = sfuClient;\n    this.state = state;\n    this.dispatcher = dispatcher;\n    this.iceRestartDelay = iceRestartDelay;\n    this.clientPublishOptions = clientPublishOptions;\n    this.onReconnectionNeeded = onReconnectionNeeded;\n    this.logger = videoLoggerSystem.getLogger(\n      peerType === PeerType.SUBSCRIBER ? 'Subscriber' : 'Publisher',\n      { tags: [tag] },\n    );\n    this.pc = this.createPeerConnection(connectionConfig);\n    this.stats = new StatsTracer(this.pc, peerType, this.trackIdToTrackType);\n    if (enableTracing) {\n      this.tracer = new Tracer(\n        `${tag}-${peerType === PeerType.SUBSCRIBER ? 'sub' : 'pub'}`,\n      );\n      this.tracer.trace('create', {\n        url: sfuClient.edgeName,\n        ...connectionConfig,\n      });\n      traceRTCPeerConnection(this.pc, this.tracer.trace);\n    }\n  }\n\n  private createPeerConnection = (connectionConfig?: RTCConfiguration) => {\n    const pc = new RTCPeerConnection(connectionConfig);\n    pc.addEventListener('icecandidate', this.onIceCandidate);\n    pc.addEventListener('icecandidateerror', this.onIceCandidateError);\n    pc.addEventListener(\n      'iceconnectionstatechange',\n      this.onIceConnectionStateChange,\n    );\n    pc.addEventListener('icegatheringstatechange', this.onIceGatherChange);\n    pc.addEventListener('signalingstatechange', this.onSignalingChange);\n    pc.addEventListener('connectionstatechange', this.onConnectionStateChange);\n    return pc;\n  };\n\n  /**\n   * Disposes the `RTCPeerConnection` instance.\n   */\n  dispose() {\n    clearTimeout(this.iceRestartTimeout);\n    this.iceRestartTimeout = undefined;\n    this.onReconnectionNeeded = undefined;\n    this.isDisposed = true;\n    this.detachEventHandlers();\n    this.pc.close();\n    this.tracer?.dispose();\n  }\n\n  /**\n   * Detaches the event handlers from the `RTCPeerConnection`.\n   */\n  detachEventHandlers() {\n    const pc = this.pc;\n    pc.removeEventListener('icecandidate', this.onIceCandidate);\n    pc.removeEventListener('icecandidateerror', this.onIceCandidateError);\n    pc.removeEventListener('signalingstatechange', this.onSignalingChange);\n    pc.removeEventListener(\n      'iceconnectionstatechange',\n      this.onIceConnectionStateChange,\n    );\n    pc.removeEventListener('icegatheringstatechange', this.onIceGatherChange);\n    this.unsubscribeIceTrickle?.();\n    this.subscriptions.forEach((unsubscribe) => unsubscribe());\n  }\n\n  /**\n   * Performs an ICE restart on the `RTCPeerConnection`.\n   */\n  protected abstract restartIce(): Promise<void>;\n\n  /**\n   * Attempts to restart ICE on the `RTCPeerConnection`.\n   * This method intentionally doesn't await the `restartIce()` method,\n   * allowing it to run in the background and handle any errors that may occur.\n   */\n  protected tryRestartIce = () => {\n    this.restartIce().catch((e) => {\n      const reason = 'restartICE() failed, initiating reconnect';\n      this.logger.error(reason, e);\n      const strategy =\n        e instanceof NegotiationError &&\n        e.error.code === ErrorCode.PARTICIPANT_SIGNAL_LOST\n          ? WebsocketReconnectStrategy.FAST\n          : WebsocketReconnectStrategy.REJOIN;\n      this.onReconnectionNeeded?.(strategy, reason, this.peerType);\n    });\n  };\n\n  /**\n   * Handles events synchronously.\n   * Consecutive events are queued and executed one after the other.\n   */\n  protected on = <E extends keyof AllSfuEvents>(\n    event: E,\n    fn: CallEventListener<E>,\n  ): void => {\n    this.subscriptions.push(\n      this.dispatcher.on(event, (e) => {\n        const lockKey = `pc.${this.lock}.${event}`;\n        withoutConcurrency(lockKey, async () => fn(e)).catch((err) => {\n          if (this.isDisposed) return;\n          this.logger.warn(`Error handling ${event}`, err);\n        });\n      }),\n    );\n  };\n\n  /**\n   * Appends the trickled ICE candidates to the `RTCPeerConnection`.\n   */\n  protected addTrickledIceCandidates = () => {\n    const { iceTrickleBuffer } = this.sfuClient;\n    const observable =\n      this.peerType === PeerType.SUBSCRIBER\n        ? iceTrickleBuffer.subscriberCandidates\n        : iceTrickleBuffer.publisherCandidates;\n\n    this.unsubscribeIceTrickle?.();\n    this.unsubscribeIceTrickle = createSafeAsyncSubscription(\n      observable,\n      async (candidate) => {\n        return this.pc.addIceCandidate(candidate).catch((e) => {\n          if (this.isDisposed) return;\n          this.logger.warn(`ICE candidate error`, e, candidate);\n        });\n      },\n    );\n  };\n\n  /**\n   * Sets the SFU client to use.\n   *\n   * @param sfuClient the SFU client to use.\n   */\n  setSfuClient = (sfuClient: StreamSfuClient) => {\n    this.sfuClient = sfuClient;\n  };\n\n  /**\n   * Returns the result of the `RTCPeerConnection.getStats()` method\n   * @param selector an optional `MediaStreamTrack` to get the stats for.\n   */\n  getStats = (selector?: MediaStreamTrack | null) => {\n    return this.pc.getStats(selector);\n  };\n\n  /**\n   * Maps the given track ID to the corresponding track type.\n   */\n  getTrackType = (trackId: string): TrackType | undefined => {\n    return this.trackIdToTrackType.get(trackId);\n  };\n\n  /**\n   * Checks if the `RTCPeerConnection` is healthy.\n   * It checks the ICE connection state and the peer connection state.\n   * If either state is `failed`, `disconnected`, or `closed`,\n   * it returns `false`, otherwise it returns `true`.\n   */\n  isHealthy = () => {\n    const failedStates = new Set<\n      RTCIceConnectionState | RTCPeerConnectionState\n    >(['failed', 'closed']);\n\n    const iceState = this.pc.iceConnectionState;\n    const connectionState = this.pc.connectionState;\n    return !failedStates.has(iceState) && !failedStates.has(connectionState);\n  };\n\n  /**\n   * Handles the ICECandidate event and\n   * Initiates an ICE Trickle process with the SFU.\n   */\n  private onIceCandidate = (e: RTCPeerConnectionIceEvent) => {\n    const { candidate } = e;\n    if (!candidate) {\n      this.logger.debug('null ice candidate');\n      return;\n    }\n\n    const iceCandidate = this.asJSON(candidate);\n    this.sfuClient\n      .iceTrickle({ peerType: this.peerType, iceCandidate })\n      .catch((err) => {\n        if (this.isDisposed) return;\n        this.logger.warn(`ICETrickle failed`, err);\n      });\n  };\n\n  /**\n   * Converts the ICE candidate to a JSON string.\n   */\n  private asJSON = (candidate: RTCIceCandidate): string => {\n    if (!candidate.usernameFragment) {\n      // react-native-webrtc doesn't include usernameFragment in the candidate\n      const segments = candidate.candidate.split(' ');\n      const ufragIndex = segments.findIndex((s) => s === 'ufrag') + 1;\n      const usernameFragment = segments[ufragIndex];\n      return JSON.stringify({ ...candidate, usernameFragment });\n    }\n    return JSON.stringify(candidate.toJSON());\n  };\n\n  /**\n   * Handles the ConnectionStateChange event.\n   */\n  private onConnectionStateChange = async () => {\n    const state = this.pc.connectionState;\n    this.logger.debug(`Connection state changed`, state);\n    if (this.tracer && (state === 'connected' || state === 'failed')) {\n      try {\n        const stats = await this.stats.get();\n        this.tracer.trace('getstats', stats.delta);\n      } catch (err) {\n        this.tracer.trace('getstatsOnFailure', (err as Error).toString());\n      }\n    }\n\n    // we can't recover from a failed connection state (contrary to ICE)\n    if (state === 'failed') {\n      this.onReconnectionNeeded?.(\n        WebsocketReconnectStrategy.REJOIN,\n        'Connection failed',\n        this.peerType,\n      );\n      return;\n    }\n\n    this.handleConnectionStateUpdate(state);\n  };\n\n  /**\n   * Handles the ICE connection state change event.\n   */\n  private onIceConnectionStateChange = () => {\n    const state = this.pc.iceConnectionState;\n    this.logger.debug(`ICE connection state changed`, state);\n    this.handleConnectionStateUpdate(state);\n  };\n\n  private handleConnectionStateUpdate = (\n    state: RTCIceConnectionState | RTCPeerConnectionState,\n  ) => {\n    const { callingState } = this.state;\n    if (callingState === CallingState.OFFLINE) return;\n    if (callingState === CallingState.RECONNECTING) return;\n\n    // do nothing when ICE is restarting\n    if (this.isIceRestarting) return;\n\n    switch (state) {\n      case 'failed':\n        // in the `failed` state, we try to restart ICE immediately\n        this.logger.info('restartICE due to failed connection');\n        this.tryRestartIce();\n        break;\n\n      case 'disconnected':\n        // in the `disconnected` state, we schedule a restartICE() after a delay\n        // as the browser might recover the connection in the meantime\n        this.logger.info('disconnected connection, scheduling restartICE');\n        clearTimeout(this.iceRestartTimeout);\n        this.iceRestartTimeout = setTimeout(() => {\n          const currentState = this.pc.iceConnectionState;\n          if (currentState === 'disconnected' || currentState === 'failed') {\n            this.tryRestartIce();\n          }\n        }, this.iceRestartDelay);\n        break;\n\n      case 'connected':\n        // in the `connected` state, we clear the ice restart timeout if it exists\n        if (this.iceRestartTimeout) {\n          this.logger.info('connected connection, canceling restartICE');\n          clearTimeout(this.iceRestartTimeout);\n          this.iceRestartTimeout = undefined;\n        }\n        break;\n    }\n  };\n\n  /**\n   * Handles the ICE candidate error event.\n   */\n  private onIceCandidateError = (e: Event) => {\n    const errorMessage =\n      e instanceof RTCPeerConnectionIceErrorEvent\n        ? `${e.errorCode}: ${e.errorText}`\n        : e;\n    this.logger.debug('ICE Candidate error', errorMessage);\n  };\n\n  /**\n   * Handles the ICE gathering state change event.\n   */\n  private onIceGatherChange = () => {\n    this.logger.debug(`ICE Gathering State`, this.pc.iceGatheringState);\n  };\n\n  /**\n   * Handles the signaling state change event.\n   */\n  private onSignalingChange = () => {\n    this.logger.debug(`Signaling state changed`, this.pc.signalingState);\n  };\n}\n", "import { PublishOption } from '../gen/video/sfu/models/models';\nimport type { OptimalVideoLayer } from './layers';\nimport type { PublishBundle, TrackLayersCache } from './types';\n\nexport class TransceiverCache {\n  private readonly cache: PublishBundle[] = [];\n  private readonly layers: TrackLayersCache[] = [];\n\n  /**\n   * An array maintaining the order how transceivers were added to the peer connection.\n   * This is needed because some browsers (Firefox) don't reliably report\n   * trackId and `mid` parameters.\n   */\n  private readonly transceiverOrder: RTCRtpTransceiver[] = [];\n\n  /**\n   * Adds a transceiver to the cache.\n   */\n  add = (bundle: PublishBundle) => {\n    this.cache.push(bundle);\n    this.transceiverOrder.push(bundle.transceiver);\n  };\n\n  /**\n   * Gets the transceiver for the given publish option.\n   */\n  get = (publishOption: PublishOption): PublishBundle | undefined => {\n    return this.cache.find(\n      (bundle) =>\n        bundle.publishOption.id === publishOption.id &&\n        bundle.publishOption.trackType === publishOption.trackType,\n    );\n  };\n\n  /**\n   * Updates the cached bundle with the given patch.\n   */\n  update = (publishOption: PublishOption, patch: Partial<PublishBundle>) => {\n    const bundle = this.get(publishOption);\n    if (bundle) Object.assign(bundle, patch);\n  };\n\n  /**\n   * Checks if the cache has the given publish option.\n   */\n  has = (publishOption: PublishOption): boolean => {\n    return !!this.get(publishOption);\n  };\n\n  /**\n   * Finds the first transceiver that satisfies the given predicate.\n   */\n  find = (\n    predicate: (bundle: PublishBundle) => boolean,\n  ): PublishBundle | undefined => {\n    return this.cache.find(predicate);\n  };\n\n  /**\n   * Provides all the items in the cache.\n   */\n  items = (): PublishBundle[] => {\n    return this.cache;\n  };\n\n  /**\n   * Init index of the transceiver in the cache.\n   */\n  indexOf = (transceiver: RTCRtpTransceiver): number => {\n    return this.transceiverOrder.indexOf(transceiver);\n  };\n\n  /**\n   * Gets cached video layers for the given track.\n   */\n  getLayers = (\n    publishOption: PublishOption,\n  ): OptimalVideoLayer[] | undefined => {\n    const entry = this.layers.find(\n      (item) =>\n        item.publishOption.id === publishOption.id &&\n        item.publishOption.trackType === publishOption.trackType,\n    );\n    return entry?.layers;\n  };\n\n  /**\n   * Sets the video layers for the given track.\n   */\n  setLayers = (\n    publishOption: PublishOption,\n    layers: OptimalVideoLayer[] = [],\n  ) => {\n    const entry = this.findLayer(publishOption);\n    if (entry) {\n      entry.layers = layers;\n    } else {\n      this.layers.push({ publishOption, layers });\n    }\n  };\n\n  private findLayer = (publishOption: PublishOption) => {\n    return this.layers.find(\n      (item) =>\n        item.publishOption.id === publishOption.id &&\n        item.publishOption.trackType === publishOption.trackType,\n    );\n  };\n}\n", "import { videoLoggerSystem } from '../logger';\n\nexport const ensureExhausted = (x: never, message: string) => {\n  videoLoggerSystem.getLogger('helpers').warn(message, x);\n};\n", "import { TrackType } from '../../gen/video/sfu/models/models';\nimport { TrackMuteType } from '../../types';\nimport { ensureExhausted } from '../../helpers/ensureExhausted';\n\nexport const trackTypeToParticipantStreamKey = (\n  trackType: TrackType,\n):\n  | 'audioStream'\n  | 'videoStream'\n  | 'screenShareStream'\n  | 'screenShareAudioStream'\n  | undefined => {\n  switch (trackType) {\n    case TrackType.SCREEN_SHARE:\n      return 'screenShareStream';\n    case TrackType.SCREEN_SHARE_AUDIO:\n      return 'screenShareAudioStream';\n    case TrackType.VIDEO:\n      return 'videoStream';\n    case TrackType.AUDIO:\n      return 'audioStream';\n    case TrackType.UNSPECIFIED:\n      throw new Error('Track type is unspecified');\n    default:\n      ensureExhausted(trackType, 'Unknown track type');\n  }\n};\n\nexport const muteTypeToTrackType = (\n  muteType: TrackMuteType,\n): TrackType | undefined => {\n  switch (muteType) {\n    case 'audio':\n      return TrackType.AUDIO;\n    case 'video':\n      return TrackType.VIDEO;\n    case 'screenshare':\n      return TrackType.SCREEN_SHARE;\n    case 'screenshare_audio':\n      return TrackType.SCREEN_SHARE_AUDIO;\n    default:\n      ensureExhausted(muteType, 'Unknown mute type');\n  }\n};\n\nexport const toTrackType = (trackType: string): TrackType | undefined => {\n  switch (trackType) {\n    case 'TRACK_TYPE_AUDIO':\n      return TrackType.AUDIO;\n    case 'TRACK_TYPE_VIDEO':\n      return TrackType.VIDEO;\n    case 'TRACK_TYPE_SCREEN_SHARE':\n      return TrackType.SCREEN_SHARE;\n    case 'TRACK_TYPE_SCREEN_SHARE_AUDIO':\n      return TrackType.SCREEN_SHARE_AUDIO;\n    default:\n      return undefined;\n  }\n};\n\nexport const isAudioTrackType = (trackType: TrackType): boolean =>\n  trackType === TrackType.AUDIO || trackType === TrackType.SCREEN_SHARE_AUDIO;\n", "import { isSvcCodec } from './codecs';\nimport {\n  AudioBitrateProfile,\n  PublishOption,\n  VideoDimension,\n  VideoLayer,\n  VideoQuality,\n} from '../gen/video/sfu/models/models';\nimport { isAudioTrackType } from './helpers/tracks';\nimport { TrackPublishOptions } from './types';\n\nexport type OptimalVideoLayer = RTCRtpEncodingParameters & {\n  width: number;\n  height: number;\n  // NOTE OL: should be part of RTCRtpEncodingParameters\n  scalabilityMode?: string;\n};\n\n/**\n * Prepares the audio layer for the given track.\n * Based on the provided audio bitrate profile, we apply the appropriate bitrate.\n */\nexport const computeAudioLayers = (\n  publishOption: PublishOption,\n  options: TrackPublishOptions,\n): RTCRtpEncodingParameters[] | undefined => {\n  const { audioBitrateProfile } = options;\n  const profileConfig = publishOption.audioBitrateProfiles?.find(\n    (config) => config.profile === audioBitrateProfile,\n  );\n  const maxBitrate =\n    profileConfig?.bitrate ||\n    {\n      [AudioBitrateProfile.VOICE_STANDARD_UNSPECIFIED]: 64_000,\n      [AudioBitrateProfile.VOICE_HIGH_QUALITY]: 128_000,\n      [AudioBitrateProfile.MUSIC_HIGH_QUALITY]: 128_000,\n    }[audioBitrateProfile || AudioBitrateProfile.VOICE_STANDARD_UNSPECIFIED];\n\n  return [{ maxBitrate }];\n};\n\n/**\n * In SVC, we need to send only one video encoding (layer).\n * this layer will have the additional spatial and temporal layers\n * defined via the scalabilityMode property.\n *\n * @param layers the layers to process.\n */\nexport const toSvcEncodings = (\n  layers: RTCRtpEncodingParameters[] | undefined,\n): RTCRtpEncodingParameters[] | undefined => {\n  if (!layers) return;\n  // we take the highest quality layer, and we assign it to `q` encoder.\n  const withRid = (rid: string) => (layer: RTCRtpEncodingParameters) =>\n    layer.rid === rid;\n  const highestLayer =\n    layers.find(withRid('f')) ||\n    layers.find(withRid('h')) ||\n    layers.find(withRid('q'));\n  return [{ ...highestLayer, rid: 'q' }];\n};\n\n/**\n * Converts the rid to a video quality.\n */\nexport const ridToVideoQuality = (rid: string): VideoQuality => {\n  return rid === 'q'\n    ? VideoQuality.LOW_UNSPECIFIED\n    : rid === 'h'\n      ? VideoQuality.MID\n      : VideoQuality.HIGH; // default to HIGH\n};\n\n/**\n * Converts the given video layers to SFU video layers.\n */\nexport const toVideoLayers = (\n  layers: OptimalVideoLayer[] | undefined = [],\n): VideoLayer[] => {\n  return layers.map<VideoLayer>((layer) => ({\n    rid: layer.rid || '',\n    bitrate: layer.maxBitrate || 0,\n    fps: layer.maxFramerate || 0,\n    quality: ridToVideoQuality(layer.rid || ''),\n    videoDimension: { width: layer.width, height: layer.height },\n  }));\n};\n\n/**\n * Converts the spatial and temporal layers to a scalability mode.\n */\nconst toScalabilityMode = (spatialLayers: number, temporalLayers: number) =>\n  `L${spatialLayers}T${temporalLayers}${spatialLayers > 1 ? '_KEY' : ''}`;\n\n/**\n * Determines the most optimal video layers for the given track.\n *\n * @param videoTrack the video track to find optimal layers for.\n * @param publishOption the publish options for the track.\n */\nexport const computeVideoLayers = (\n  videoTrack: MediaStreamTrack,\n  publishOption: PublishOption,\n): OptimalVideoLayer[] | undefined => {\n  if (isAudioTrackType(publishOption.trackType)) return;\n  const optimalVideoLayers: OptimalVideoLayer[] = [];\n  const {\n    bitrate,\n    codec,\n    fps = 30,\n    maxSpatialLayers = 3,\n    maxTemporalLayers = 3,\n    videoDimension = { width: 1280, height: 720 },\n    useSingleLayer,\n  } = publishOption;\n  const { width = videoDimension.width, height = videoDimension.height } =\n    videoTrack.getSettings();\n  const maxBitrate = getComputedMaxBitrate(\n    videoDimension,\n    width,\n    height,\n    bitrate,\n  );\n  let downscaleFactor = 1;\n  let bitrateFactor = 1;\n  const svcCodec = isSvcCodec(codec?.name);\n  for (const rid of ['f', 'h', 'q'].slice(0, maxSpatialLayers)) {\n    const layer: OptimalVideoLayer = {\n      active: true,\n      rid,\n      width: Math.round(width / downscaleFactor),\n      height: Math.round(height / downscaleFactor),\n      maxBitrate:\n        Math.round(maxBitrate / bitrateFactor) ||\n        { q: 300_000, h: 750_000, f: 1_250_000 }[rid],\n      maxFramerate: fps,\n    };\n    if (svcCodec) {\n      // for SVC codecs, we need to set the scalability mode, and the\n      // codec will handle the rest (layers, temporal layers, etc.)\n      layer.scalabilityMode = toScalabilityMode(\n        useSingleLayer ? 1 : maxSpatialLayers,\n        maxTemporalLayers,\n      );\n    } else {\n      // for non-SVC codecs, we need to downscale proportionally (simulcast)\n      layer.scaleResolutionDownBy = downscaleFactor;\n    }\n\n    downscaleFactor *= 2;\n    bitrateFactor *= 2;\n\n    // Reversing the order [f, h, q] to [q, h, f] as Chrome uses encoding index\n    // when deciding which layer to disable when CPU or bandwidth is constrained.\n    // Encodings should be ordered in increasing spatial resolution order.\n    optimalVideoLayers.unshift(layer);\n  }\n\n  // for simplicity, we start with all layers enabled, then this function\n  // will clear/reassign the layers that are not needed\n  return withSimulcastConstraints(\n    width,\n    height,\n    optimalVideoLayers,\n    useSingleLayer,\n  );\n};\n\n/**\n * Computes the maximum bitrate for a given resolution.\n * If the current resolution is lower than the target resolution,\n * we want to proportionally reduce the target bitrate.\n * If the current resolution is higher than the target resolution,\n * we want to use the target bitrate.\n *\n * @param targetResolution the target resolution.\n * @param currentWidth the current width of the track.\n * @param currentHeight the current height of the track.\n * @param bitrate the target bitrate.\n */\nexport const getComputedMaxBitrate = (\n  targetResolution: VideoDimension,\n  currentWidth: number,\n  currentHeight: number,\n  bitrate: number,\n): number => {\n  // if the current resolution is lower than the target resolution,\n  // we want to proportionally reduce the target bitrate\n  const { width: targetWidth, height: targetHeight } = targetResolution;\n  if (currentWidth < targetWidth || currentHeight < targetHeight) {\n    const currentPixels = currentWidth * currentHeight;\n    const targetPixels = targetWidth * targetHeight;\n    const reductionFactor = currentPixels / targetPixels;\n    return Math.round(bitrate * reductionFactor);\n  }\n  return bitrate;\n};\n\n/**\n * Browsers have different simulcast constraints for different video resolutions.\n *\n * This function modifies the provided list of video layers according to the\n * current implementation of simulcast constraints in the Chromium based browsers.\n *\n * https://chromium.googlesource.com/external/webrtc/+/refs/heads/main/media/engine/simulcast.cc#90\n */\nconst withSimulcastConstraints = (\n  width: number,\n  height: number,\n  optimalVideoLayers: OptimalVideoLayer[],\n  useSingleLayer: boolean,\n) => {\n  let layers: OptimalVideoLayer[];\n\n  const size = Math.max(width, height);\n  if (size <= 320) {\n    // provide only one layer 320x240 (f), the one with the highest quality\n    layers = optimalVideoLayers.filter((layer) => layer.rid === 'f');\n  } else if (size <= 640) {\n    // provide two layers, 320x240 (h) and 640x480 (f)\n    layers = optimalVideoLayers.filter((layer) => layer.rid !== 'q');\n  } else {\n    // provide three layers for sizes > 640x480\n    layers = optimalVideoLayers;\n  }\n\n  // we might have removed some layers, so we need to reassign the rid\n  // to match the expected order of [q, h, f] for simulcast\n  const ridMapping = ['q', 'h', 'f'];\n  return layers.map<OptimalVideoLayer>((layer, index, arr) => ({\n    ...layer,\n    rid: ridMapping[index], // reassign rid\n    active: useSingleLayer && index < arr.length - 1 ? false : layer.active,\n  }));\n};\n", "import { BasePeerConnection } from './BasePeerConnection';\nimport type {\n  BasePeerConnectionOpts,\n  PublishBundle,\n  TrackPublishOptions,\n} from './types';\nimport { NegotiationError } from './NegotiationError';\nimport { TransceiverCache } from './TransceiverCache';\nimport {\n  PeerType,\n  PublishOption,\n  TrackInfo,\n  TrackType,\n} from '../gen/video/sfu/models/models';\nimport { VideoSender } from '../gen/video/sfu/event/events';\nimport {\n  computeAudioLayers,\n  computeVideoLayers,\n  toSvcEncodings,\n  toVideoLayers,\n} from './layers';\nimport { isSvcCodec } from './codecs';\nimport { isAudioTrackType } from './helpers/tracks';\nimport { extractMid, removeCodecsExcept } from './helpers/sdp';\nimport { withoutConcurrency } from '../helpers/concurrency';\nimport { isReactNative } from '../helpers/platforms';\n\n/**\n * The `Publisher` is responsible for publishing/unpublishing media streams to/from the SFU\n *\n * @internal\n */\nexport class Publisher extends BasePeerConnection {\n  private readonly transceiverCache = new TransceiverCache();\n  private readonly clonedTracks = new Set<MediaStreamTrack>();\n  private publishOptions: PublishOption[];\n\n  /**\n   * Constructs a new `Publisher` instance.\n   */\n  constructor(\n    baseOptions: BasePeerConnectionOpts,\n    publishOptions: PublishOption[],\n  ) {\n    super(PeerType.PUBLISHER_UNSPECIFIED, baseOptions);\n    this.publishOptions = publishOptions;\n\n    this.on('iceRestart', (iceRestart) => {\n      if (iceRestart.peerType !== PeerType.PUBLISHER_UNSPECIFIED) return;\n      this.tryRestartIce();\n    });\n\n    this.on('changePublishQuality', async (event) => {\n      for (const videoSender of event.videoSenders) {\n        await this.changePublishQuality(videoSender);\n      }\n    });\n\n    this.on('changePublishOptions', (event) => {\n      this.publishOptions = event.publishOptions;\n      return this.syncPublishOptions();\n    });\n  }\n\n  /**\n   * Disposes this Publisher instance.\n   */\n  dispose() {\n    super.dispose();\n    this.stopAllTracks();\n    this.clonedTracks.clear();\n  }\n\n  /**\n   * Starts publishing the given track of the given media stream.\n   *\n   * Consecutive calls to this method will replace the stream.\n   * The previous stream will be stopped.\n   *\n   * @param track the track to publish.\n   * @param trackType the track type to publish.\n   * @param options the publish options to use.\n   */\n  publish = async (\n    track: MediaStreamTrack,\n    trackType: TrackType,\n    options: TrackPublishOptions = {},\n  ) => {\n    if (!this.publishOptions.some((o) => o.trackType === trackType)) {\n      throw new Error(`No publish options found for ${TrackType[trackType]}`);\n    }\n\n    for (const publishOption of this.publishOptions) {\n      if (publishOption.trackType !== trackType) continue;\n\n      // create a clone of the track as otherwise the same trackId will\n      // appear in the SDP in multiple transceivers\n      const trackToPublish = this.cloneTrack(track);\n\n      const { transceiver } = this.transceiverCache.get(publishOption) || {};\n      if (!transceiver) {\n        await this.addTransceiver(trackToPublish, publishOption, options);\n      } else {\n        const previousTrack = transceiver.sender.track;\n        await this.updateTransceiver(\n          transceiver,\n          trackToPublish,\n          trackType,\n          options,\n        );\n        if (!isReactNative()) {\n          this.stopTrack(previousTrack);\n        }\n      }\n    }\n  };\n\n  /**\n   * Adds a new transceiver carrying the given track to the peer connection.\n   */\n  private addTransceiver = async (\n    track: MediaStreamTrack,\n    publishOption: PublishOption,\n    options: TrackPublishOptions,\n  ) => {\n    const encodings = isAudioTrackType(publishOption.trackType)\n      ? computeAudioLayers(publishOption, options)\n      : computeVideoLayers(track, publishOption);\n    const sendEncodings = isSvcCodec(publishOption.codec?.name)\n      ? toSvcEncodings(encodings)\n      : encodings;\n    const transceiver = this.pc.addTransceiver(track, {\n      direction: 'sendonly',\n      sendEncodings,\n    });\n\n    const params = transceiver.sender.getParameters();\n    params.degradationPreference = 'maintain-framerate';\n    await transceiver.sender.setParameters(params);\n\n    const trackType = publishOption.trackType;\n    this.logger.debug(`Added ${TrackType[trackType]} transceiver`);\n    this.transceiverCache.add({ publishOption, transceiver, options });\n    this.trackIdToTrackType.set(track.id, trackType);\n\n    await this.negotiate();\n  };\n\n  /**\n   * Updates the transceiver with the given track and track type.\n   */\n  private updateTransceiver = async (\n    transceiver: RTCRtpTransceiver,\n    track: MediaStreamTrack | null,\n    trackType: TrackType,\n    options: TrackPublishOptions = {},\n  ) => {\n    const sender = transceiver.sender;\n    if (sender.track) this.trackIdToTrackType.delete(sender.track.id);\n    await sender.replaceTrack(track);\n    if (track) this.trackIdToTrackType.set(track.id, trackType);\n    if (isAudioTrackType(trackType)) {\n      await this.updateAudioPublishOptions(trackType, options);\n    }\n  };\n\n  /**\n   * Updates the publish options for the given track type.\n   */\n  private updateAudioPublishOptions = async (\n    trackType: TrackType,\n    options: TrackPublishOptions,\n  ) => {\n    for (const publishOption of this.publishOptions) {\n      if (publishOption.trackType !== trackType) continue;\n      const bundle = this.transceiverCache.get(publishOption);\n      if (!bundle) continue;\n\n      const { transceiver, options: current } = bundle;\n      if (current.audioBitrateProfile !== options.audioBitrateProfile) {\n        const encodings = computeAudioLayers(publishOption, options);\n        if (encodings && encodings.length > 0) {\n          const params = transceiver.sender.getParameters();\n          const [currentEncoding] = params.encodings;\n          const [targetEncoding] = encodings;\n          if (currentEncoding.maxBitrate !== targetEncoding.maxBitrate) {\n            currentEncoding.maxBitrate = targetEncoding.maxBitrate;\n          }\n          await transceiver.sender.setParameters(params);\n        }\n      }\n      this.transceiverCache.update(publishOption, { options });\n    }\n  };\n\n  /**\n   * Synchronizes the current Publisher state with the provided publish options.\n   */\n  private syncPublishOptions = async () => {\n    // enable publishing with new options -> [av1, vp9]\n    for (const publishOption of this.publishOptions) {\n      const { trackType } = publishOption;\n      if (!this.isPublishing(trackType)) continue;\n      if (this.transceiverCache.has(publishOption)) continue;\n\n      const item = this.transceiverCache.find(\n        (i) =>\n          !!i.transceiver.sender.track &&\n          i.publishOption.trackType === trackType,\n      );\n      if (!item) continue;\n\n      // take the track from the existing transceiver for the same track type,\n      // clone it and publish it with the new publish options\n      const track = this.cloneTrack(item.transceiver.sender.track!);\n      await this.addTransceiver(track, publishOption, item.options);\n    }\n\n    // stop publishing with options not required anymore -> [vp9]\n    for (const item of this.transceiverCache.items()) {\n      const { publishOption, transceiver } = item;\n      const hasPublishOption = this.publishOptions.some(\n        (option) =>\n          option.id === publishOption.id &&\n          option.trackType === publishOption.trackType,\n      );\n      if (hasPublishOption) continue;\n      // it is safe to stop the track here, it is a clone\n      this.stopTrack(transceiver.sender.track);\n      await this.updateTransceiver(transceiver, null, publishOption.trackType);\n    }\n  };\n\n  /**\n   * Returns true if the given track type is currently being published to the SFU.\n   *\n   * @param trackType the track type to check. If omitted, checks if any track is being published.\n   */\n  isPublishing = (trackType?: TrackType): boolean => {\n    for (const item of this.transceiverCache.items()) {\n      if (trackType && item.publishOption.trackType !== trackType) continue;\n\n      const track = item.transceiver.sender.track;\n      if (!track) continue;\n\n      if (track.readyState === 'live' && track.enabled) return true;\n    }\n    return false;\n  };\n\n  /**\n   * Stops the cloned track that is being published to the SFU.\n   */\n  stopTracks = (...trackTypes: TrackType[]) => {\n    for (const item of this.transceiverCache.items()) {\n      const { publishOption, transceiver } = item;\n      if (!trackTypes.includes(publishOption.trackType)) continue;\n      this.stopTrack(transceiver.sender.track);\n    }\n  };\n\n  /**\n   * Stops all the cloned tracks that are being published to the SFU.\n   */\n  stopAllTracks = () => {\n    for (const { transceiver } of this.transceiverCache.items()) {\n      this.stopTrack(transceiver.sender.track);\n    }\n    for (const track of this.clonedTracks) {\n      this.stopTrack(track);\n    }\n  };\n\n  private changePublishQuality = async (videoSender: VideoSender) => {\n    const { trackType, layers, publishOptionId } = videoSender;\n    const enabledLayers = layers.filter((l) => l.active);\n\n    const tag = 'Update publish quality:';\n    this.logger.info(`${tag} requested layers by SFU:`, enabledLayers);\n\n    const transceiverId = this.transceiverCache.find(\n      (t) =>\n        t.publishOption.id === publishOptionId &&\n        t.publishOption.trackType === trackType,\n    );\n    const sender = transceiverId?.transceiver.sender;\n    if (!sender) {\n      return this.logger.warn(`${tag} no video sender found.`);\n    }\n\n    const params = sender.getParameters();\n    if (params.encodings.length === 0) {\n      return this.logger.warn(`${tag} there are no encodings set.`);\n    }\n\n    const codecInUse = transceiverId?.publishOption.codec?.name;\n    const usesSvcCodec = codecInUse && isSvcCodec(codecInUse);\n\n    let changed = false;\n    for (const encoder of params.encodings) {\n      const layer = usesSvcCodec\n        ? // for SVC, we only have one layer (q) and often rid is omitted\n          enabledLayers[0]\n        : // for non-SVC, we need to find the layer by rid (simulcast)\n          (enabledLayers.find((l) => l.name === encoder.rid) ??\n          (params.encodings.length === 1 ? enabledLayers[0] : undefined));\n\n      // flip 'active' flag only when necessary\n      const shouldActivate = !!layer?.active;\n      if (shouldActivate !== encoder.active) {\n        encoder.active = shouldActivate;\n        changed = true;\n      }\n\n      // skip the rest of the settings if the layer is disabled or not found\n      if (!layer) continue;\n\n      const {\n        maxFramerate,\n        scaleResolutionDownBy,\n        maxBitrate,\n        scalabilityMode,\n      } = layer;\n      if (\n        scaleResolutionDownBy >= 1 &&\n        scaleResolutionDownBy !== encoder.scaleResolutionDownBy\n      ) {\n        encoder.scaleResolutionDownBy = scaleResolutionDownBy;\n        changed = true;\n      }\n      if (maxBitrate > 0 && maxBitrate !== encoder.maxBitrate) {\n        encoder.maxBitrate = maxBitrate;\n        changed = true;\n      }\n      if (maxFramerate > 0 && maxFramerate !== encoder.maxFramerate) {\n        encoder.maxFramerate = maxFramerate;\n        changed = true;\n      }\n      // @ts-expect-error scalabilityMode is not in the typedefs yet\n      if (scalabilityMode && scalabilityMode !== encoder.scalabilityMode) {\n        // @ts-expect-error scalabilityMode is not in the typedefs yet\n        encoder.scalabilityMode = scalabilityMode;\n        changed = true;\n      }\n    }\n\n    const activeEncoders = params.encodings.filter((e) => e.active);\n    if (!changed) {\n      return this.logger.info(`${tag} no change:`, activeEncoders);\n    }\n\n    await sender.setParameters(params);\n    this.logger.info(`${tag} enabled rids:`, activeEncoders);\n  };\n\n  /**\n   * Restarts the ICE connection and renegotiates with the SFU.\n   */\n  restartIce = async (): Promise<void> => {\n    this.logger.debug('Restarting ICE connection');\n    const signalingState = this.pc.signalingState;\n    if (this.isIceRestarting || signalingState === 'have-local-offer') {\n      this.logger.debug('ICE restart is already in progress');\n      return;\n    }\n    await this.negotiate({ iceRestart: true });\n  };\n\n  /**\n   * Initiates a new offer/answer exchange with the currently connected SFU.\n   *\n   * @param options the optional offer options to use.\n   */\n  private negotiate = async (options?: RTCOfferOptions): Promise<void> => {\n    return withoutConcurrency(`publisher.negotiate.${this.lock}`, async () => {\n      const offer = await this.pc.createOffer(options);\n      const tracks = this.getAnnouncedTracks(offer.sdp);\n      if (!tracks.length) throw new Error(`Can't negotiate without any tracks`);\n\n      try {\n        this.isIceRestarting = options?.iceRestart ?? false;\n        await this.pc.setLocalDescription(offer);\n\n        const { sdp: baseSdp = '' } = offer;\n        const { dangerouslyForceCodec, fmtpLine } =\n          this.clientPublishOptions || {};\n        const sdp = dangerouslyForceCodec\n          ? removeCodecsExcept(baseSdp, dangerouslyForceCodec, fmtpLine)\n          : baseSdp;\n        const { response } = await this.sfuClient.setPublisher({ sdp, tracks });\n        if (response.error) throw new NegotiationError(response.error);\n\n        const { sdp: answerSdp } = response;\n        await this.pc.setRemoteDescription({ type: 'answer', sdp: answerSdp });\n      } catch (err) {\n        // negotiation failed, rollback to the previous state\n        if (this.pc.signalingState === 'have-local-offer') {\n          await this.pc.setLocalDescription({ type: 'rollback' });\n        }\n        throw err;\n      } finally {\n        this.isIceRestarting = false;\n      }\n\n      this.addTrickledIceCandidates();\n    });\n  };\n\n  /**\n   * Returns a list of tracks that are currently being published.\n   */\n  getPublishedTracks = (): MediaStreamTrack[] => {\n    const tracks: MediaStreamTrack[] = [];\n    for (const { transceiver } of this.transceiverCache.items()) {\n      const track = transceiver.sender.track;\n      if (track && track.readyState === 'live') tracks.push(track);\n    }\n    return tracks;\n  };\n\n  /**\n   * Returns a list of tracks that are currently being published.\n   * @param sdp an optional SDP to extract the `mid` from.\n   */\n  getAnnouncedTracks = (sdp: string | undefined): TrackInfo[] => {\n    const trackInfos: TrackInfo[] = [];\n    for (const bundle of this.transceiverCache.items()) {\n      if (!bundle.transceiver.sender.track) continue;\n      trackInfos.push(this.toTrackInfo(bundle, sdp));\n    }\n    return trackInfos;\n  };\n\n  /**\n   * Returns a list of tracks that are currently being published.\n   * This method shall be used for the reconnection flow.\n   * There we shouldn't announce the tracks that have been stopped due to a codec switch.\n   */\n  getAnnouncedTracksForReconnect = (): TrackInfo[] => {\n    const sdp = this.pc.localDescription?.sdp;\n    const trackInfos: TrackInfo[] = [];\n    for (const publishOption of this.publishOptions) {\n      const bundle = this.transceiverCache.get(publishOption);\n      if (!bundle || !bundle.transceiver.sender.track) continue;\n      trackInfos.push(this.toTrackInfo(bundle, sdp));\n    }\n    return trackInfos;\n  };\n\n  /**\n   * Converts the given transceiver to a `TrackInfo` object.\n   */\n  private toTrackInfo = (\n    bundle: PublishBundle,\n    sdp: string | undefined,\n  ): TrackInfo => {\n    const { transceiver, publishOption } = bundle;\n    const track = transceiver.sender.track!;\n    const isTrackLive = track.readyState === 'live';\n    const layers = isTrackLive\n      ? computeVideoLayers(track, publishOption)\n      : this.transceiverCache.getLayers(publishOption);\n    this.transceiverCache.setLayers(publishOption, layers);\n\n    const isAudioTrack = isAudioTrackType(publishOption.trackType);\n    const transceiverIndex = this.transceiverCache.indexOf(transceiver);\n    const audioSettings = this.state.settings?.audio;\n    const stereo =\n      publishOption.trackType === TrackType.SCREEN_SHARE_AUDIO ||\n      (isAudioTrack && !!audioSettings?.hifi_audio_enabled);\n\n    return {\n      trackId: track.id,\n      layers: toVideoLayers(layers),\n      trackType: publishOption.trackType,\n      mid: extractMid(transceiver, transceiverIndex, sdp),\n      stereo,\n      dtx: isAudioTrack && !!audioSettings?.opus_dtx_enabled,\n      red: isAudioTrack && !!audioSettings?.redundant_coding_enabled,\n      muted: !isTrackLive,\n      codec: publishOption.codec,\n      publishOptionId: publishOption.id,\n    };\n  };\n\n  private cloneTrack = (track: MediaStreamTrack): MediaStreamTrack => {\n    const clone = track.clone();\n    this.clonedTracks.add(clone);\n    return clone;\n  };\n\n  private stopTrack = (track: MediaStreamTrack | null | undefined) => {\n    if (!track) return;\n    track.stop();\n    this.clonedTracks.delete(track);\n  };\n}\n", "import { BasePeerConnection } from './BasePeerConnection';\nimport { BasePeerConnectionOpts } from './types';\nimport { NegotiationError } from './NegotiationError';\nimport { PeerType } from '../gen/video/sfu/models/models';\nimport { SubscriberOffer } from '../gen/video/sfu/event/events';\nimport { toTrackType, trackTypeToParticipantStreamKey } from './helpers/tracks';\nimport { enableStereo, removeCodecsExcept } from './helpers/sdp';\n\n/**\n * A wrapper around the `RTCPeerConnection` that handles the incoming\n * media streams from the SFU.\n *\n * @internal\n */\nexport class Subscriber extends BasePeerConnection {\n  /**\n   * Constructs a new `Subscriber` instance.\n   */\n  constructor(opts: BasePeerConnectionOpts) {\n    super(PeerType.SUBSCRIBER, opts);\n    this.pc.addEventListener('track', this.handleOnTrack);\n\n    this.on('subscriberOffer', async (subscriberOffer) => {\n      return this.negotiate(subscriberOffer).catch((err) => {\n        this.logger.error(`Negotiation failed.`, err);\n      });\n    });\n  }\n\n  /**\n   * Detaches the event handlers from the `RTCPeerConnection`.\n   * This is useful when we want to replace the `RTCPeerConnection`\n   * instance with a new one (in case of migration).\n   */\n  detachEventHandlers() {\n    super.detachEventHandlers();\n    this.pc.removeEventListener('track', this.handleOnTrack);\n  }\n\n  /**\n   * Restarts the ICE connection and renegotiates with the SFU.\n   */\n  restartIce = async () => {\n    this.logger.debug('Restarting ICE connection');\n    if (this.pc.signalingState === 'have-remote-offer') {\n      this.logger.debug('ICE restart is already in progress');\n      return;\n    }\n    if (this.pc.connectionState === 'new') {\n      this.logger.debug(\n        `ICE connection is not yet established, skipping restart.`,\n      );\n      return;\n    }\n    const previousIsIceRestarting = this.isIceRestarting;\n    this.isIceRestarting = true;\n    try {\n      const { response } = await this.sfuClient.iceRestart({\n        peerType: PeerType.SUBSCRIBER,\n      });\n      if (response.error) throw new NegotiationError(response.error);\n    } catch (e) {\n      // restore the previous state, as our intent for restarting ICE failed\n      this.isIceRestarting = previousIsIceRestarting;\n      throw e;\n    }\n  };\n\n  private handleOnTrack = (e: RTCTrackEvent) => {\n    const [primaryStream] = e.streams;\n    // example: `e3f6aaf8-b03d-4911-be36-83f47d37a76a:TRACK_TYPE_VIDEO`\n    const [trackId, rawTrackType] = primaryStream.id.split(':');\n    const participantToUpdate = this.state.participants.find(\n      (p) => p.trackLookupPrefix === trackId,\n    );\n    this.logger.debug(\n      `[onTrack]: Got remote ${rawTrackType} track for userId: ${participantToUpdate?.userId}`,\n      e.track.id,\n      e.track,\n    );\n\n    const trackDebugInfo = `${participantToUpdate?.userId} ${rawTrackType}:${trackId}`;\n    e.track.addEventListener('mute', () => {\n      this.logger.info(`[onTrack]: Track muted: ${trackDebugInfo}`);\n    });\n\n    e.track.addEventListener('unmute', () => {\n      this.logger.info(`[onTrack]: Track unmuted: ${trackDebugInfo}`);\n    });\n\n    e.track.addEventListener('ended', () => {\n      this.logger.info(`[onTrack]: Track ended: ${trackDebugInfo}`);\n      this.state.removeOrphanedTrack(primaryStream.id);\n    });\n\n    const trackType = toTrackType(rawTrackType);\n    if (!trackType) {\n      return this.logger.error(`Unknown track type: ${rawTrackType}`);\n    }\n\n    this.trackIdToTrackType.set(e.track.id, trackType);\n\n    if (!participantToUpdate) {\n      this.logger.warn(\n        `[onTrack]: Received track for unknown participant: ${trackId}`,\n        e,\n      );\n      this.state.registerOrphanedTrack({\n        id: primaryStream.id,\n        trackLookupPrefix: trackId,\n        track: primaryStream,\n        trackType,\n      });\n      return;\n    }\n\n    const streamKindProp = trackTypeToParticipantStreamKey(trackType);\n    if (!streamKindProp) {\n      this.logger.error(`Unknown track type: ${rawTrackType}`);\n      return;\n    }\n\n    // get the previous stream to dispose it later\n    // usually this happens during migration, when the stream is replaced\n    // with a new one but the old one is still in the state\n    const previousStream = participantToUpdate[streamKindProp];\n\n    // replace the previous stream with the new one, prevents flickering\n    this.state.updateParticipant(participantToUpdate.sessionId, {\n      [streamKindProp]: primaryStream,\n    });\n\n    // now, dispose the previous stream if it exists\n    if (previousStream) {\n      this.logger.info(\n        `[onTrack]: Cleaning up previous remote ${e.track.kind} tracks for userId: ${participantToUpdate.userId}`,\n      );\n      previousStream.getTracks().forEach((t) => {\n        t.stop();\n        previousStream.removeTrack(t);\n      });\n    }\n  };\n\n  private negotiate = async (subscriberOffer: SubscriberOffer) => {\n    await this.pc.setRemoteDescription({\n      type: 'offer',\n      sdp: subscriberOffer.sdp,\n    });\n\n    this.addTrickledIceCandidates();\n\n    const answer = await this.pc.createAnswer();\n    if (answer.sdp) {\n      answer.sdp = enableStereo(subscriberOffer.sdp, answer.sdp);\n      const { dangerouslyForceCodec, subscriberFmtpLine } =\n        this.clientPublishOptions || {};\n      if (dangerouslyForceCodec) {\n        answer.sdp = removeCodecsExcept(\n          answer.sdp,\n          dangerouslyForceCodec,\n          subscriberFmtpLine,\n        );\n      }\n    }\n    await this.pc.setLocalDescription(answer);\n\n    await this.sfuClient.sendAnswer({\n      peerType: PeerType.SUBSCRIBER,\n      sdp: answer.sdp || '',\n    });\n\n    this.isIceRestarting = false;\n  };\n}\n", "import { SfuEvent } from '../gen/video/sfu/event/events';\nimport { DispatchableMessage, SfuEventKinds } from './Dispatcher';\nimport { Tracer } from '../stats';\nimport { videoLoggerSystem } from '../logger';\n\nexport const createWebSocketSignalChannel = (opts: {\n  endpoint: string;\n  onMessage: <K extends SfuEventKinds>(message: DispatchableMessage<K>) => void;\n  tag: string;\n  tracer: Tracer | undefined;\n}) => {\n  const { endpoint, onMessage, tag, tracer } = opts;\n  const logger = videoLoggerSystem.getLogger('SfuClientWS', { tags: [tag] });\n  logger.debug('Creating signaling WS channel:', endpoint);\n  const ws = new WebSocket(endpoint);\n  ws.binaryType = 'arraybuffer'; // do we need this?\n\n  ws.addEventListener('error', (e) => {\n    logger.error('Signaling WS channel error', e);\n    tracer?.trace('signal.ws.error', e);\n  });\n\n  ws.addEventListener('close', (e) => {\n    logger.info('Signaling WS channel is closed', e);\n    tracer?.trace('signal.ws.close', e);\n  });\n\n  ws.addEventListener('open', (e) => {\n    logger.info('Signaling WS channel is open', e);\n    tracer?.trace('signal.ws.open', e);\n  });\n\n  ws.addEventListener('message', (e) => {\n    try {\n      const message =\n        e.data instanceof ArrayBuffer\n          ? SfuEvent.fromBinary(new Uint8Array(e.data))\n          : SfuEvent.fromJsonString(e.data.toString());\n\n      onMessage(message as DispatchableMessage<SfuEventKinds>);\n    } catch (err) {\n      const message =\n        'Failed to decode a message. Check whether the Proto models match.';\n      logger.error(message, { event: e, error: err });\n      tracer?.trace('signal.ws.message.error', message);\n    }\n  });\n  return ws;\n};\n", "import { ICEServer } from '../../gen/coordinator';\n\nexport const toRtcConfiguration = (config: ICEServer[]): RTCConfiguration => {\n  return {\n    bundlePolicy: 'max-bundle',\n    iceServers: config.map((ice) => ({\n      urls: ice.urls,\n      username: ice.username,\n      credential: ice.password,\n    })),\n  };\n};\n", "export interface SafePromise<T> {\n  (): Promise<T>;\n  checkPending(): boolean;\n}\n\ntype Fulfillment<T> =\n  | {\n      status: 'resolved';\n      result: T;\n    }\n  | {\n      status: 'rejected';\n      error: unknown;\n    };\n\n/**\n * Saving a long-lived reference to a promise that can reject can be unsafe,\n * since rejecting the promise causes an unhandled rejection error (even if the\n * rejection is handled everywhere promise result is expected).\n *\n * To avoid that, we add both resolution and rejection handlers to the promise.\n * That way, the saved promise never rejects. A callback is provided as return\n * value to build a *new* promise, that resolves and rejects along with\n * the original promise.\n * @param promise Promise to wrap, which possibly rejects\n * @returns Callback to build a new promise, which resolves and rejects along\n * with the original promise\n */\nexport function makeSafePromise<T>(promise: Promise<T>): SafePromise<T> {\n  let isPending = true;\n\n  const safePromise: Promise<Fulfillment<T>> = promise\n    .then(\n      (result) => ({ status: 'resolved' as const, result }),\n      (error) => ({ status: 'rejected' as const, error }),\n    )\n    .finally(() => (isPending = false));\n\n  const unwrapPromise = () =>\n    safePromise.then((fulfillment) => {\n      if (fulfillment.status === 'rejected') throw fulfillment.error;\n      return fulfillment.result;\n    });\n\n  unwrapPromise.checkPending = () => isPending;\n  return unwrapPromise;\n}\n\nexport type PromiseWithResolvers<T> = {\n  promise: Promise<T>;\n  resolve: (value: T | PromiseLike<T>) => void;\n  reject: (reason: any) => void;\n  isResolved: () => boolean;\n  isRejected: () => boolean;\n};\n\n/**\n * Creates a new promise with resolvers.\n *\n * Based on:\n * - https://github.com/tc39/proposal-promise-with-resolvers/blob/main/polyfills.js\n */\nexport const promiseWithResolvers = <T = void>(): PromiseWithResolvers<T> => {\n  let resolve: (value: T | PromiseLike<T>) => void;\n  let reject: (reason: any) => void;\n  const promise = new Promise<T>((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n  });\n\n  let isResolved = false;\n  let isRejected = false;\n\n  const resolver = (value: T | PromiseLike<T>) => {\n    isResolved = true;\n    resolve(value);\n  };\n\n  const rejecter = (reason: any) => {\n    isRejected = true;\n    reject(reason);\n  };\n\n  return {\n    promise,\n    resolve: resolver,\n    reject: rejecter,\n    isResolved: () => isResolved,\n    isRejected: () => isRejected,\n  };\n};\n", "const uninitialized = Symbol('uninitialized');\n\n/**\n * Lazily creates a value using a provided factory\n */\nexport function lazy<T, A>(factory: (...args: A[]) => T): (...args: A[]) => T {\n  let value: T | typeof uninitialized = uninitialized;\n  return (...args: A[]) => {\n    if (value === uninitialized) {\n      value = factory(...args);\n    }\n\n    return value;\n  };\n}\n", "import { WorkerTimer } from '@stream-io/worker-timer';\nimport { lazy } from '../helpers/lazy';\n\nlet timerWorkerEnabled = false;\n\nexport const enableTimerWorker = () => {\n  timerWorkerEnabled = true;\n};\n\nexport const getTimers = lazy(() => {\n  return new WorkerTimer({ useWorker: timerWorkerEnabled });\n});\n", "import { SignalServerClient } from './gen/video/sfu/signal_rpc/signal.client';\nimport {\n  createSignalClient,\n  retryable,\n  withHeaders,\n  withRequestLogger,\n  withRequestTracer,\n} from './rpc';\nimport {\n  createWebSocketSignalChannel,\n  Dispatcher,\n  IceTrickleBuffer,\n  SfuEventKinds,\n} from './rtc';\nimport {\n  JoinRequest,\n  JoinResponse,\n  SfuRequest,\n} from './gen/video/sfu/event/events';\nimport {\n  ICERestartRequest,\n  SendAnswerRequest,\n  SendStatsRequest,\n  SetPublisherRequest,\n  TrackMuteState,\n  TrackSubscriptionDetails,\n} from './gen/video/sfu/signal_rpc/signal';\nimport { ICETrickle } from './gen/video/sfu/models/models';\nimport { StreamClient } from './coordinator/connection/client';\nimport { generateUUIDv4 } from './coordinator/connection/utils';\nimport { Credentials } from './gen/coordinator';\nimport { ScopedLogger, videoLoggerSystem } from './logger';\nimport {\n  makeSafePromise,\n  PromiseWithResolvers,\n  promiseWithResolvers,\n  SafePromise,\n} from './helpers/promise';\nimport { getTimers } from './timers';\nimport { Tracer, TraceSlice } from './stats';\n\nexport type StreamSfuClientConstructor = {\n  /**\n   * The event dispatcher instance to use.\n   */\n  dispatcher: Dispatcher;\n\n  /**\n   * The credentials to use for the connection.\n   */\n  credentials: Credentials;\n\n  /**\n   * The `cid` (call ID) to use for the connection.\n   */\n  cid: string;\n\n  /**\n   * `sessionId` to use for the connection.\n   */\n  sessionId?: string;\n\n  /**\n   * A log tag to use for logging. Useful for debugging multiple instances.\n   */\n  tag: string;\n\n  /**\n   * The timeout in milliseconds for waiting for the `joinResponse`.\n   * Defaults to 5000ms.\n   */\n  joinResponseTimeout?: number;\n\n  /**\n   * Callback for when the WebSocket connection is closed.\n   */\n  onSignalClose?: (reason: string) => void;\n\n  /**\n   * The StreamClient instance to use for the connection.\n   */\n  streamClient: StreamClient;\n\n  /**\n   * Flag to enable tracing.\n   */\n  enableTracing: boolean;\n};\n\ntype SfuWebSocketParams = {\n  attempt: string; // the reconnect attempt, start with 0\n  user_id: string;\n  api_key: string;\n  user_session_id: string;\n  cid: string;\n};\n\n/**\n * The client used for exchanging information with the SFU.\n */\nexport class StreamSfuClient {\n  /**\n   * A buffer for ICE Candidates that are received before\n   * the Publisher and Subscriber Peer Connections are ready to handle them.\n   */\n  readonly iceTrickleBuffer = new IceTrickleBuffer();\n\n  /**\n   * The `sessionId` of the currently connected participant.\n   */\n  readonly sessionId: string;\n\n  /**\n   * The `edgeName` representing the edge the client is connected to.\n   */\n  readonly edgeName: string;\n\n  /**\n   * Holds the current WebSocket connection to the SFU.\n   */\n  private signalWs!: WebSocket;\n\n  /**\n   * Promise that resolves when the WebSocket connection is ready (open).\n   */\n  private signalReady!: SafePromise<WebSocket>;\n\n  /**\n   * Flag to indicate if the client is in the process of leaving the call.\n   * This is set to `true` when the user initiates the leave process.\n   */\n  isLeaving = false;\n\n  /**\n   * Flag to indicate if the client is in the process of clean closing the connection.\n   * When set to `true`, the client will not attempt to reconnect\n   * and will close the WebSocket connection gracefully.\n   * Otherwise, it will close the connection with an error code and\n   * trigger a reconnection attempt.\n   */\n  isClosingClean = false;\n\n  private readonly rpc: SignalServerClient;\n  private keepAliveInterval?: number;\n  private connectionCheckTimeout?: NodeJS.Timeout;\n  private migrateAwayTimeout?: NodeJS.Timeout;\n  private readonly pingIntervalInMs = 5 * 1000;\n  private readonly unhealthyTimeoutInMs = 15 * 1000;\n  private lastMessageTimestamp?: Date;\n  private readonly tracer?: Tracer;\n  private readonly unsubscribeIceTrickle: () => void;\n  private readonly unsubscribeNetworkChanged: () => void;\n  private readonly onSignalClose: ((reason: string) => void) | undefined;\n  private readonly logger: ScopedLogger;\n  readonly tag: string;\n  private readonly credentials: Credentials;\n  private readonly dispatcher: Dispatcher;\n  private readonly joinResponseTimeout: number;\n  private networkAvailableTask: PromiseWithResolvers<void> | undefined;\n  /**\n   * Promise that resolves when the JoinResponse is received.\n   * Rejects after a certain threshold if the response is not received.\n   */\n  private joinResponseTask = promiseWithResolvers<JoinResponse>();\n\n  /**\n   * Promise that resolves when the migration is complete.\n   * Rejects after a certain threshold if the migration is not complete.\n   */\n  private migrationTask?: PromiseWithResolvers<void>;\n\n  /**\n   * A controller to abort the current requests.\n   */\n  private readonly abortController = new AbortController();\n\n  /**\n   * The normal closure code. Used for controlled shutdowns.\n   */\n  static NORMAL_CLOSURE = 1000;\n  /**\n   * The error code used when the SFU connection is unhealthy.\n   * Usually, this means that no message has been received from the SFU for\n   * a certain amount of time (`connectionCheckTimeout`).\n   */\n  static ERROR_CONNECTION_UNHEALTHY = 4001;\n  /**\n   * The error code used when the SFU connection is disposed because a new\n   * connection is established or is about to be established.\n   * Here, we don't use 1000 (normal closure) because we don't want the\n   * SFU to clean up the resources associated with the current participant.\n   */\n  static DISPOSE_OLD_SOCKET = 4100;\n  /**\n   * The close code used when the client fails to join the call (on the SFU).\n   */\n  static JOIN_FAILED = 4101;\n\n  /**\n   * Constructs a new SFU client.\n   */\n  constructor({\n    dispatcher,\n    credentials,\n    sessionId,\n    cid,\n    tag,\n    joinResponseTimeout = 5000,\n    onSignalClose,\n    streamClient,\n    enableTracing,\n  }: StreamSfuClientConstructor) {\n    this.dispatcher = dispatcher;\n    this.sessionId = sessionId || generateUUIDv4();\n    this.onSignalClose = onSignalClose;\n    this.credentials = credentials;\n    const { server, token } = credentials;\n    this.edgeName = server.edge_name;\n    this.joinResponseTimeout = joinResponseTimeout;\n    this.tag = tag;\n    this.logger = videoLoggerSystem.getLogger('SfuClient', { tags: [tag] });\n    this.tracer = enableTracing\n      ? new Tracer(`${tag}-${this.edgeName}`)\n      : undefined;\n    this.rpc = createSignalClient({\n      baseUrl: server.url,\n      interceptors: [\n        withHeaders({ Authorization: `Bearer ${token}` }),\n        this.tracer && withRequestTracer(this.tracer.trace),\n        this.logger.getLogLevel() === 'trace' &&\n          withRequestLogger(this.logger, 'trace'),\n      ].filter((v) => !!v),\n    });\n\n    // Special handling for the ICETrickle kind of events.\n    // The SFU might trigger these events before the initial RTC\n    // connection is established or \"JoinResponse\" received.\n    // In that case, those events (ICE candidates) need to be buffered\n    // and later added to the appropriate PeerConnection\n    // once the remoteDescription is known and set.\n    this.unsubscribeIceTrickle = dispatcher.on('iceTrickle', (iceTrickle) => {\n      this.iceTrickleBuffer.push(iceTrickle);\n    });\n\n    // listen to network changes to handle offline state\n    // we shouldn't attempt to recover websocket connection when offline\n    this.unsubscribeNetworkChanged = streamClient.on('network.changed', (e) => {\n      if (!e.online) {\n        this.networkAvailableTask = promiseWithResolvers();\n      } else {\n        this.networkAvailableTask?.resolve();\n      }\n    });\n\n    this.createWebSocket({\n      attempt: tag,\n      user_id: streamClient.user?.id || '',\n      api_key: streamClient.key,\n      user_session_id: this.sessionId,\n      cid,\n    });\n  }\n\n  private createWebSocket = (params: SfuWebSocketParams) => {\n    const eventsToTrace: Partial<Record<SfuEventKinds, boolean>> = {\n      callEnded: true,\n      changePublishQuality: true,\n      changePublishOptions: true,\n      connectionQualityChanged: true,\n      error: true,\n      goAway: true,\n      inboundStateNotification: true,\n    };\n    this.signalWs = createWebSocketSignalChannel({\n      tag: this.tag,\n      endpoint: `${this.credentials.server.ws_endpoint}?${new URLSearchParams(params).toString()}`,\n      tracer: this.tracer,\n      onMessage: (message) => {\n        this.lastMessageTimestamp = new Date();\n        this.scheduleConnectionCheck();\n        const eventKind = message.eventPayload.oneofKind;\n        if (eventsToTrace[eventKind]) {\n          this.tracer?.trace(eventKind, message);\n        }\n        this.dispatcher.dispatch(message, this.tag);\n      },\n    });\n\n    let timeoutId: NodeJS.Timeout;\n    this.signalReady = makeSafePromise(\n      Promise.race<WebSocket>([\n        new Promise((resolve, reject) => {\n          let didOpen = false;\n          const onOpen = () => {\n            didOpen = true;\n            clearTimeout(timeoutId);\n            this.signalWs.removeEventListener('open', onOpen);\n            resolve(this.signalWs);\n          };\n\n          this.signalWs.addEventListener('open', onOpen);\n\n          this.signalWs.addEventListener('close', (e) => {\n            this.handleWebSocketClose(e);\n            // Normally, this shouldn't have any effect, because WS should never emit 'close'\n            // before emitting 'open'. However, stranger things have happened, and we don't\n            // want to leave signalReady in a pending state.\n            const message = didOpen\n              ? `SFU WS closed: ${e.code} ${e.reason}`\n              : `SFU WS connection can't be established: ${e.code} ${e.reason}`;\n            this.tracer?.trace('signal.close', message);\n            clearTimeout(timeoutId);\n            reject(new Error(message));\n          });\n        }),\n\n        new Promise((resolve, reject) => {\n          timeoutId = setTimeout(() => {\n            const message = `SFU WS connection failed to open after ${this.joinResponseTimeout}ms`;\n            this.tracer?.trace('signal.timeout', message);\n            reject(new Error(message));\n          }, this.joinResponseTimeout);\n        }),\n      ]),\n    );\n  };\n\n  get isHealthy() {\n    return (\n      this.signalWs.readyState === WebSocket.OPEN &&\n      this.joinResponseTask.isResolved()\n    );\n  }\n\n  get joinTask() {\n    return this.joinResponseTask.promise;\n  }\n\n  private handleWebSocketClose = (e: CloseEvent) => {\n    this.signalWs.removeEventListener('close', this.handleWebSocketClose);\n    getTimers().clearInterval(this.keepAliveInterval);\n    clearTimeout(this.connectionCheckTimeout);\n    this.onSignalClose?.(`${e.code} ${e.reason}`);\n  };\n\n  close = (code: number = StreamSfuClient.NORMAL_CLOSURE, reason?: string) => {\n    this.isClosingClean = code !== StreamSfuClient.ERROR_CONNECTION_UNHEALTHY;\n    if (this.signalWs.readyState === WebSocket.OPEN) {\n      this.logger.debug(`Closing SFU WS connection: ${code} - ${reason}`);\n      this.signalWs.close(code, `js-client: ${reason}`);\n      this.signalWs.removeEventListener('close', this.handleWebSocketClose);\n    }\n    this.dispose();\n  };\n\n  private dispose = () => {\n    this.logger.debug('Disposing SFU client');\n    this.unsubscribeIceTrickle();\n    this.unsubscribeNetworkChanged();\n    clearInterval(this.keepAliveInterval);\n    clearTimeout(this.connectionCheckTimeout);\n    clearTimeout(this.migrateAwayTimeout);\n    this.abortController.abort();\n    this.migrationTask?.resolve();\n    this.iceTrickleBuffer.dispose();\n  };\n\n  getTrace = (): TraceSlice | undefined => {\n    return this.tracer?.take();\n  };\n\n  leaveAndClose = async (reason: string) => {\n    try {\n      this.isLeaving = true;\n      await this.joinTask;\n      await this.notifyLeave(reason);\n    } catch (err) {\n      this.logger.debug('Error notifying SFU about leaving call', err);\n    }\n\n    this.close(StreamSfuClient.NORMAL_CLOSURE, reason.substring(0, 115));\n  };\n\n  updateSubscriptions = async (tracks: TrackSubscriptionDetails[]) => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.updateSubscriptions({ sessionId: this.sessionId, tracks }),\n      this.abortController.signal,\n    );\n  };\n\n  setPublisher = async (data: Omit<SetPublisherRequest, 'sessionId'>) => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.setPublisher({ ...data, sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  sendAnswer = async (data: Omit<SendAnswerRequest, 'sessionId'>) => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.sendAnswer({ ...data, sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  iceTrickle = async (data: Omit<ICETrickle, 'sessionId'>) => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.iceTrickle({ ...data, sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  iceRestart = async (data: Omit<ICERestartRequest, 'sessionId'>) => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.iceRestart({ ...data, sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  updateMuteStates = async (muteStates: TrackMuteState[]) => {\n    await this.joinTask;\n    return retryable(\n      () =>\n        this.rpc.updateMuteStates({ muteStates, sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  sendStats = async (stats: Omit<SendStatsRequest, 'sessionId'>) => {\n    await this.joinTask;\n    // NOTE: we don't retry sending stats\n    return this.rpc.sendStats({ ...stats, sessionId: this.sessionId });\n  };\n\n  startNoiseCancellation = async () => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.startNoiseCancellation({ sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  stopNoiseCancellation = async () => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.stopNoiseCancellation({ sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  enterMigration = async (opts: { timeout?: number } = {}) => {\n    this.isLeaving = true;\n    const { timeout = 7 * 1000 } = opts;\n\n    this.migrationTask?.reject(new Error('Cancelled previous migration'));\n    const task = (this.migrationTask = promiseWithResolvers());\n    const unsubscribe = this.dispatcher.on(\n      'participantMigrationComplete',\n      () => {\n        unsubscribe();\n        clearTimeout(this.migrateAwayTimeout);\n        task.resolve();\n      },\n    );\n    this.migrateAwayTimeout = setTimeout(() => {\n      unsubscribe();\n      task.reject(\n        new Error(`Migration (${this.tag}) failed to complete in ${timeout}ms`),\n      );\n    }, timeout);\n\n    return task.promise;\n  };\n\n  join = async (\n    data: Omit<JoinRequest, 'sessionId' | 'token'>,\n  ): Promise<JoinResponse> => {\n    // wait for the signal web socket to be ready before sending \"joinRequest\"\n    await this.signalReady();\n    if (\n      this.joinResponseTask.isResolved() ||\n      this.joinResponseTask.isRejected()\n    ) {\n      // we need to lock the RPC requests until we receive a JoinResponse.\n      // that's why we have this primitive lock mechanism.\n      // the client starts with already initialized joinResponseTask,\n      // and this code creates a new one for the next join request.\n      this.joinResponseTask = promiseWithResolvers<JoinResponse>();\n    }\n\n    // capture a reference to the current joinResponseTask as it might\n    // be replaced with a new one in case a second join request is made\n    const current = this.joinResponseTask;\n\n    let timeoutId: NodeJS.Timeout | undefined = undefined;\n    const unsubscribe = this.dispatcher.on('joinResponse', (joinResponse) => {\n      clearTimeout(timeoutId);\n      unsubscribe();\n      this.keepAlive();\n      current.resolve(joinResponse);\n    });\n\n    timeoutId = setTimeout(() => {\n      unsubscribe();\n      const message = `Waiting for \"joinResponse\" has timed out after ${this.joinResponseTimeout}ms`;\n      this.tracer?.trace('joinRequestTimeout', message);\n      current.reject(new Error(message));\n    }, this.joinResponseTimeout);\n\n    const joinRequest = SfuRequest.create({\n      requestPayload: {\n        oneofKind: 'joinRequest',\n        joinRequest: JoinRequest.create({\n          ...data,\n          sessionId: this.sessionId,\n          token: this.credentials.token,\n        }),\n      },\n    });\n\n    this.tracer?.trace('joinRequest', joinRequest);\n    await this.send(joinRequest);\n\n    return current.promise;\n  };\n\n  private ping = async () => {\n    return this.send(\n      SfuRequest.create({\n        requestPayload: {\n          oneofKind: 'healthCheckRequest',\n          healthCheckRequest: {},\n        },\n      }),\n    );\n  };\n\n  private notifyLeave = async (reason: string) => {\n    return this.send(\n      SfuRequest.create({\n        requestPayload: {\n          oneofKind: 'leaveCallRequest',\n          leaveCallRequest: {\n            sessionId: this.sessionId,\n            reason,\n          },\n        },\n      }),\n    );\n  };\n\n  private send = async (message: SfuRequest) => {\n    await this.signalReady(); // wait for the signal ws to be open\n    const msgJson = SfuRequest.toJson(message);\n    if (this.signalWs.readyState !== WebSocket.OPEN) {\n      this.logger.debug('Signal WS is not open. Skipping message', msgJson);\n      return;\n    }\n    this.logger.debug(`Sending message to: ${this.edgeName}`, msgJson);\n    this.signalWs.send(SfuRequest.toBinary(message));\n  };\n\n  private keepAlive = () => {\n    const timers = getTimers();\n    timers.clearInterval(this.keepAliveInterval);\n    this.keepAliveInterval = timers.setInterval(() => {\n      this.ping().catch((e) => {\n        this.logger.error('Error sending healthCheckRequest to SFU', e);\n      });\n    }, this.pingIntervalInMs);\n  };\n\n  private scheduleConnectionCheck = () => {\n    clearTimeout(this.connectionCheckTimeout);\n    this.connectionCheckTimeout = setTimeout(() => {\n      if (this.lastMessageTimestamp) {\n        const timeSinceLastMessage =\n          new Date().getTime() - this.lastMessageTimestamp.getTime();\n\n        if (timeSinceLastMessage > this.unhealthyTimeoutInMs) {\n          this.close(\n            StreamSfuClient.ERROR_CONNECTION_UNHEALTHY,\n            `SFU connection unhealthy. Didn't receive any message for ${this.unhealthyTimeoutInMs}ms`,\n          );\n        }\n      }\n    }, this.unhealthyTimeoutInMs);\n  };\n}\n", "import { CallingState } from '../store';\nimport { Call } from '../Call';\nimport {\n  CallAcceptedEvent,\n  CallRejectedEvent,\n  OwnCapability,\n} from '../gen/coordinator';\nimport { CallEnded } from '../gen/video/sfu/event/events';\nimport { CallEndedReason } from '../gen/video/sfu/models/models';\n\n/**\n * Event handler that watched the delivery of `call.accepted`.\n * Once the event is received, the call is joined.\n */\nexport const watchCallAccepted = (call: Call) => {\n  return async function onCallAccepted(event: CallAcceptedEvent) {\n    // We want to discard the event if it's from the current user\n    if (event.user.id === call.currentUserId) return;\n    const { state } = call;\n    if (\n      event.call.created_by.id === call.currentUserId &&\n      state.callingState === CallingState.RINGING\n    ) {\n      await call.join();\n    }\n  };\n};\n\n/**\n * Event handler that watches delivery of `call.rejected` Websocket event.\n * Once the event is received, the call is left.\n */\nexport const watchCallRejected = (call: Call) => {\n  return async function onCallRejected(event: CallRejectedEvent) {\n    // We want to discard the event if it's from the current user\n    if (event.user.id === call.currentUserId) return;\n    const { call: eventCall } = event;\n    const { session: callSession } = eventCall;\n\n    if (!callSession) {\n      call.logger.warn(\n        'No call session provided. Ignoring call.rejected event.',\n        event,\n      );\n      return;\n    }\n\n    const rejectedBy = callSession.rejected_by;\n    const { members, callingState } = call.state;\n    if (callingState !== CallingState.RINGING) {\n      call.logger.info(\n        'Call is not in ringing mode (it is either accepted or rejected already). Ignoring call.rejected event.',\n        event,\n      );\n      return;\n    }\n    if (call.isCreatedByMe) {\n      const everyoneElseRejected = members\n        .filter((m) => m.user_id !== call.currentUserId)\n        .every((m) => rejectedBy[m.user_id]);\n      if (everyoneElseRejected) {\n        call.logger.info('everyone rejected, leaving the call');\n        await call.leave({\n          reject: true,\n          reason: 'cancel',\n          message: 'ring: everyone rejected',\n        });\n      }\n    } else {\n      if (rejectedBy[eventCall.created_by.id]) {\n        call.logger.info('call creator rejected, leaving call');\n        await call.leave({ message: 'ring: creator rejected' });\n      }\n    }\n  };\n};\n\n/**\n * Event handler that watches the delivery of `call.ended` Websocket event.\n */\nexport const watchCallEnded = (call: Call) => {\n  return function onCallEnded() {\n    const { callingState } = call.state;\n    if (\n      callingState !== CallingState.IDLE &&\n      callingState !== CallingState.LEFT\n    ) {\n      call\n        .leave({ message: 'call.ended event received', reject: false })\n        .catch((err) => {\n          call.logger.error('Failed to leave call after call.ended ', err);\n        });\n    }\n  };\n};\n\n/**\n * Watches for `callEnded` events.\n */\nexport const watchSfuCallEnded = (call: Call) => {\n  return call.on('callEnded', async (e: CallEnded) => {\n    if (call.state.callingState === CallingState.LEFT) return;\n    try {\n      if (e.reason === CallEndedReason.LIVE_ENDED) {\n        call.state.setBackstage(true);\n\n        // don't leave the call if the user has permission to join backstage\n        const { hasPermission } = call.permissionsContext;\n        if (hasPermission(OwnCapability.JOIN_BACKSTAGE)) return;\n      }\n      // `call.ended` event arrived after the call is already left\n      // and all event handlers are detached. We need to manually\n      // update the call state to reflect the call has ended.\n      call.state.setEndedAt(new Date());\n      const reason = CallEndedReason[e.reason];\n      await call.leave({ message: `callEnded received: ${reason}` });\n    } catch (err) {\n      call.logger.error(\n        'Failed to leave call after being ended by the SFU',\n        err,\n      );\n    }\n  });\n};\n", "import { CallState } from '../store';\nimport type { CallGrantsUpdated } from '../gen/video/sfu/event/events';\n\n/**\n * Event handler that watches for `callGrantsUpdated` events.\n *\n * @param state the call state to update.\n */\nexport const watchCallGrantsUpdated = (state: CallState) => {\n  return function onCallGrantsUpdated(event: CallGrantsUpdated) {\n    const { currentGrants } = event;\n\n    if (!currentGrants) return;\n\n    state.setCallGrants(currentGrants);\n  };\n};\n", "/**\n * Adds unique values to an array.\n *\n * @param arr the array to add to.\n * @param values the values to add.\n */\nexport const pushToIfMissing = <T>(arr: T[], ...values: T[]): T[] => {\n  for (const v of values) {\n    if (!arr.includes(v)) {\n      arr.push(v);\n    }\n  }\n  return arr;\n};\n\n/**\n * Removes values from an array if they are present.\n *\n * @param arr the array to remove from.\n * @param values the values to remove.\n */\nexport const removeFromIfPresent = <T>(arr: T[], ...values: T[]): T[] => {\n  for (const v of values) {\n    const index = arr.indexOf(v);\n    if (index !== -1) {\n      arr.splice(index, 1);\n    }\n  }\n  return arr;\n};\n", "import { Dispatcher } from '../rtc';\nimport { Call } from '../Call';\nimport { CallState } from '../store';\nimport { StreamVideoParticipantPatches } from '../types';\nimport { pushToIfMissing, removeFromIfPresent } from '../helpers/array';\nimport type {\n  InboundStateNotification,\n  PinsChanged,\n} from '../gen/video/sfu/event/events';\nimport {\n  ErrorCode,\n  WebsocketReconnectStrategy,\n} from '../gen/video/sfu/models/models';\nimport { OwnCapability } from '../gen/coordinator';\nimport { videoLoggerSystem } from '../logger';\n\nexport const watchConnectionQualityChanged = (\n  dispatcher: Dispatcher,\n  state: CallState,\n) => {\n  return dispatcher.on('connectionQualityChanged', (e) => {\n    const { connectionQualityUpdates } = e;\n    if (!connectionQualityUpdates) return;\n    state.updateParticipants(\n      connectionQualityUpdates.reduce<StreamVideoParticipantPatches>(\n        (patches, update) => {\n          const { sessionId, connectionQuality } = update;\n          patches[sessionId] = {\n            connectionQuality,\n          };\n          return patches;\n        },\n        {},\n      ),\n    );\n  });\n};\n\n/**\n * Updates the approximate number of participants in the call by peeking at the\n * health check events that our SFU sends.\n */\nexport const watchParticipantCountChanged = (\n  dispatcher: Dispatcher,\n  state: CallState,\n) => {\n  return dispatcher.on('healthCheckResponse', (e) => {\n    const { participantCount } = e;\n    if (participantCount) {\n      state.setParticipantCount(participantCount.total);\n      state.setAnonymousParticipantCount(participantCount.anonymous);\n    }\n  });\n};\n\nexport const watchLiveEnded = (dispatcher: Dispatcher, call: Call) => {\n  return dispatcher.on('error', (e) => {\n    if (e.error && e.error.code !== ErrorCode.LIVE_ENDED) return;\n\n    call.state.setBackstage(true);\n    if (!call.permissionsContext.hasPermission(OwnCapability.JOIN_BACKSTAGE)) {\n      call.leave({ message: 'live ended' }).catch((err) => {\n        call.logger.error('Failed to leave call after live ended', err);\n      });\n    }\n  });\n};\n\n/**\n * Watches and logs the errors reported by the currently connected SFU.\n */\nexport const watchSfuErrorReports = (dispatcher: Dispatcher) => {\n  return dispatcher.on('error', (e) => {\n    if (!e.error) return;\n    const logger = videoLoggerSystem.getLogger('SfuClient');\n    const { error, reconnectStrategy } = e;\n    logger.error('SFU reported error', {\n      code: ErrorCode[error.code],\n      reconnectStrategy: WebsocketReconnectStrategy[reconnectStrategy],\n      message: error.message,\n      shouldRetry: error.shouldRetry,\n    });\n  });\n};\n\n/**\n * Watches for `pinsUpdated` events and updates the pinned state of participants\n * in the call.\n */\nexport const watchPinsUpdated = (state: CallState) => {\n  return function onPinsUpdated(e: PinsChanged) {\n    const { pins } = e;\n    state.setServerSidePins(pins);\n  };\n};\n\n/**\n * Watches for inbound state notifications and updates the paused tracks\n *\n * @param state the call state to update.\n */\nexport const watchInboundStateNotification = (state: CallState) => {\n  return function onInboundStateNotification(e: InboundStateNotification) {\n    const { inboundVideoStates } = e;\n    const current = state.getParticipantLookupBySessionId();\n    const patches: StreamVideoParticipantPatches = {};\n    for (const { sessionId, trackType, paused } of inboundVideoStates) {\n      const pausedTracks = [...(current[sessionId]?.pausedTracks ?? [])];\n      if (paused) {\n        pushToIfMissing(pausedTracks, trackType);\n      } else {\n        removeFromIfPresent(pausedTracks, trackType);\n      }\n      patches[sessionId] = { pausedTracks };\n    }\n    state.updateParticipants(patches);\n  };\n};\n", "import { Call } from '../Call';\nimport {\n  TrackType,\n  TrackUnpublishReason,\n} from '../gen/video/sfu/models/models';\n\n/**\n * An event handler that handles soft mutes.\n *\n * @param call the call.\n */\nexport const handleRemoteSoftMute = (call: Call) => {\n  return call.on('trackUnpublished', async (event) => {\n    const { cause, type, sessionId } = event;\n    const { localParticipant } = call.state;\n    if (\n      cause === TrackUnpublishReason.MODERATION &&\n      sessionId === localParticipant?.sessionId\n    ) {\n      const logger = call.logger;\n      logger.info(\n        `Local participant's ${TrackType[type]} track is muted remotely`,\n      );\n      try {\n        if (type === TrackType.VIDEO) {\n          await call.camera.disable();\n        } else if (type === TrackType.AUDIO) {\n          await call.microphone.disable();\n        } else if (\n          type === TrackType.SCREEN_SHARE ||\n          type === TrackType.SCREEN_SHARE_AUDIO\n        ) {\n          await call.screenShare.disable();\n        } else {\n          logger.warn('Unsupported track type to soft mute', TrackType[type]);\n        }\n      } catch (error) {\n        logger.error('Failed to stop publishing', error);\n      }\n    }\n  });\n};\n", "import type {\n  ParticipantJoined,\n  ParticipantLeft,\n  ParticipantUpdated,\n  TrackPublished,\n  TrackUnpublished,\n} from '../gen/video/sfu/event/events';\nimport type { Participant } from '../gen/video/sfu/models/models';\nimport {\n  StreamVideoParticipant,\n  StreamVideoParticipantPatch,\n  VisibilityState,\n} from '../types';\nimport { CallState } from '../store';\nimport { trackTypeToParticipantStreamKey } from '../rtc';\nimport { pushToIfMissing } from '../helpers/array';\n\n/**\n * An event responder which handles the `participantJoined` event.\n */\nexport const watchParticipantJoined = (state: CallState) => {\n  return function onParticipantJoined(e: ParticipantJoined) {\n    const { participant } = e;\n    if (!participant) return;\n    // `state.updateOrAddParticipant` acts as a safeguard against\n    // potential duplicate events from the SFU.\n    //\n    // Although the SFU should not send duplicate events, we have seen\n    // some race conditions in the past during the `join-flow`.\n    // The SFU would send participant info as part of the `join`\n    // response and then follow up with a `participantJoined` event for\n    // already announced participants.\n    const orphanedTracks = reconcileOrphanedTracks(state, participant);\n    state.updateOrAddParticipant(\n      participant.sessionId,\n      Object.assign<\n        StreamVideoParticipant,\n        StreamVideoParticipantPatch | undefined,\n        Partial<StreamVideoParticipant>\n      >(participant, orphanedTracks, {\n        viewportVisibilityState: {\n          videoTrack: VisibilityState.UNKNOWN,\n          screenShareTrack: VisibilityState.UNKNOWN,\n        },\n      }),\n    );\n  };\n};\n\n/**\n * An event responder which handles the `participantLeft` event.\n */\nexport const watchParticipantLeft = (state: CallState) => {\n  return function onParticipantLeft(e: ParticipantLeft) {\n    const { participant } = e;\n    if (!participant) return;\n\n    state.setParticipants((participants) =>\n      participants.filter((p) => p.sessionId !== participant.sessionId),\n    );\n  };\n};\n\n/**\n * An event responder which handles the `participantUpdated` event.\n */\nexport const watchParticipantUpdated = (state: CallState) => {\n  return function onParticipantUpdated(e: ParticipantUpdated) {\n    const { participant } = e;\n    if (!participant) return;\n    state.updateParticipant(participant.sessionId, participant);\n  };\n};\n\n/**\n * An event responder which handles the `trackPublished` event.\n * The SFU will send this event when a participant publishes a track.\n */\nexport const watchTrackPublished = (state: CallState) => {\n  return function onTrackPublished(e: TrackPublished) {\n    const { type, sessionId } = e;\n    // An optimization for large calls.\n    // After a certain threshold, the SFU would stop emitting `participantJoined`\n    // events, and instead, it would only provide the participant's information\n    // once they start publishing a track.\n    if (e.participant) {\n      const orphanedTracks = reconcileOrphanedTracks(state, e.participant);\n      const participant = Object.assign(e.participant, orphanedTracks);\n      state.updateOrAddParticipant(sessionId, participant);\n    } else {\n      state.updateParticipant(sessionId, (p) => ({\n        publishedTracks: pushToIfMissing([...p.publishedTracks], type),\n      }));\n    }\n  };\n};\n\n/**\n * An event responder which handles the `trackUnpublished` event.\n * The SFU will send this event when a participant unpublishes a track.\n */\nexport const watchTrackUnpublished = (state: CallState) => {\n  return function onTrackUnpublished(e: TrackUnpublished) {\n    const { type, sessionId } = e;\n    // An optimization for large calls. See `watchTrackPublished`.\n    if (e.participant) {\n      const orphanedTracks = reconcileOrphanedTracks(state, e.participant);\n      const participant = Object.assign(e.participant, orphanedTracks);\n      state.updateOrAddParticipant(sessionId, participant, (p) => ({\n        pausedTracks: p.pausedTracks?.filter((t) => t !== type),\n      }));\n    } else {\n      state.updateParticipant(sessionId, (p) => ({\n        publishedTracks: p.publishedTracks.filter((t) => t !== type),\n        pausedTracks: p.pausedTracks?.filter((t) => t !== type),\n      }));\n    }\n  };\n};\n\n/**\n * Reconciles orphaned tracks (if any) for the given participant.\n *\n * @param state the call state.\n * @param participant the participant.\n */\nconst reconcileOrphanedTracks = (\n  state: CallState,\n  participant: Participant,\n): StreamVideoParticipantPatch | undefined => {\n  const orphanTracks = state.takeOrphanedTracks(participant.trackLookupPrefix);\n  if (!orphanTracks.length) return;\n  const reconciledTracks: StreamVideoParticipantPatch = {};\n  for (const orphan of orphanTracks) {\n    const key = trackTypeToParticipantStreamKey(orphan.trackType);\n    if (!key) continue;\n    reconciledTracks[key] = orphan.track;\n  }\n  return reconciledTracks;\n};\n", "import { Dispatcher } from '../rtc';\nimport { CallState } from '../store';\nimport { StreamVideoParticipantPatches } from '../types';\n\n/**\n * Watches for `dominantSpeakerChanged` events.\n */\nexport const watchDominantSpeakerChanged = (\n  dispatcher: Dispatcher,\n  state: CallState,\n) => {\n  return dispatcher.on('dominantSpeakerChanged', (e) => {\n    const { sessionId } = e;\n    if (sessionId === state.dominantSpeaker?.sessionId) return;\n    state.setParticipants((participants) =>\n      participants.map((participant) => {\n        // mark the new dominant speaker\n        if (participant.sessionId === sessionId) {\n          return {\n            ...participant,\n            isDominantSpeaker: true,\n          };\n        }\n        // unmark the old dominant speaker\n        if (participant.isDominantSpeaker) {\n          return {\n            ...participant,\n            isDominantSpeaker: false,\n          };\n        }\n        return participant; // no change\n      }),\n    );\n  });\n};\n\n/**\n * Watches for `audioLevelChanged` events.\n */\nexport const watchAudioLevelChanged = (\n  dispatcher: Dispatcher,\n  state: CallState,\n) => {\n  return dispatcher.on('audioLevelChanged', (e) => {\n    const { audioLevels } = e;\n    state.updateParticipants(\n      audioLevels.reduce<StreamVideoParticipantPatches>((patches, current) => {\n        patches[current.sessionId] = {\n          audioLevel: current.level,\n          isSpeaking: current.isSpeaking,\n        };\n        return patches;\n      }, {}),\n    );\n  });\n};\n", "import { Call } from '../Call';\nimport { Dispatcher } from '../rtc';\nimport {\n  handleRemoteSoftMute,\n  watchAudioLevelChanged,\n  watchCallAccepted,\n  watchCallEnded,\n  watchCallGrantsUpdated,\n  watchCallRejected,\n  watchConnectionQualityChanged,\n  watchDominantSpeakerChanged,\n  watchInboundStateNotification,\n  watchLiveEnded,\n  watchParticipantCountChanged,\n  watchParticipantJoined,\n  watchParticipantLeft,\n  watchParticipantUpdated,\n  watchPinsUpdated,\n  watchSfuCallEnded,\n  watchSfuErrorReports,\n  watchTrackPublished,\n  watchTrackUnpublished,\n} from '../events';\nimport {\n  AllCallEvents,\n  AllClientCallEvents,\n  CallEventListener,\n} from '../coordinator/connection/types';\n\ntype RingCallEvents = Extract<\n  AllClientCallEvents,\n  'call.accepted' | 'call.rejected' | 'call.missed'\n>;\n\n/**\n * Registers the default event handlers for a call during its lifecycle.\n *\n * @param call the call to register event handlers for.\n * @param dispatcher the dispatcher.\n */\nexport const registerEventHandlers = (call: Call, dispatcher: Dispatcher) => {\n  const state = call.state;\n  const eventHandlers = [\n    call.on('call.ended', watchCallEnded(call)),\n    watchSfuCallEnded(call),\n\n    watchLiveEnded(dispatcher, call),\n    watchSfuErrorReports(dispatcher),\n    watchConnectionQualityChanged(dispatcher, state),\n    watchParticipantCountChanged(dispatcher, state),\n\n    call.on('participantJoined', watchParticipantJoined(state)),\n    call.on('participantLeft', watchParticipantLeft(state)),\n    call.on('participantUpdated', watchParticipantUpdated(state)),\n\n    call.on('trackPublished', watchTrackPublished(state)),\n    call.on('trackUnpublished', watchTrackUnpublished(state)),\n\n    watchAudioLevelChanged(dispatcher, state),\n    watchDominantSpeakerChanged(dispatcher, state),\n\n    call.on('callGrantsUpdated', watchCallGrantsUpdated(state)),\n    call.on('pinsUpdated', watchPinsUpdated(state)),\n    call.on('inboundStateNotification', watchInboundStateNotification(state)),\n\n    handleRemoteSoftMute(call),\n  ];\n\n  return () => {\n    eventHandlers.forEach((unsubscribe) => unsubscribe());\n  };\n};\n\n/**\n * Registers event handlers for a call that is of ringing type.\n *\n * @param call the call to register event handlers for.\n */\nexport const registerRingingCallEventHandlers = (call: Call) => {\n  const coordinatorRingEvents: {\n    [key in RingCallEvents]: (\n      call: Call,\n    ) => CallEventListener<AllCallEvents[key]>;\n  } = {\n    'call.accepted': watchCallAccepted(call),\n    'call.rejected': watchCallRejected(call),\n  };\n\n  const eventHandlers = Object.keys(coordinatorRingEvents).map((event) => {\n    const eventName = event as RingCallEvents;\n    return call.on(eventName, coordinatorRingEvents[eventName]);\n  });\n\n  return () => {\n    eventHandlers.forEach((unsubscribe) => unsubscribe());\n  };\n};\n", "const DEFAULT_THRESHOLD = 0.35;\n\nexport type EntryHandler = (entry: IntersectionObserverEntry) => void;\n\nexport type Unobserve = () => void;\n\nexport type Observe = (\n  element: HTMLElement,\n  entryHandler: EntryHandler,\n) => Unobserve;\n\nexport class ViewportTracker {\n  /**\n   * @private\n   */\n  private elementHandlerMap: Map<\n    HTMLElement,\n    (entry: IntersectionObserverEntry) => void\n  > = new Map();\n  /**\n   * @private\n   */\n  private observer: IntersectionObserver | null = null;\n  // in React children render before viewport is set, add\n  // them to the queue and observe them once the observer is ready\n  /**\n   * @private\n   */\n  private queueSet: Set<readonly [HTMLElement, EntryHandler]> = new Set();\n\n  /**\n   * Method to set scrollable viewport as root for the IntersectionObserver, returns\n   * cleanup function to be invoked upon disposing of the DOM element to prevent memory leaks\n   *\n   * @param viewportElement\n   * @param options\n   * @returns Unobserve\n   */\n  public setViewport = (\n    viewportElement: HTMLElement,\n    options?: Pick<IntersectionObserverInit, 'threshold' | 'rootMargin'>,\n  ) => {\n    const cleanup = () => {\n      this.observer?.disconnect();\n      this.observer = null;\n      this.elementHandlerMap.clear();\n    };\n\n    this.observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          const handler = this.elementHandlerMap.get(\n            entry.target as HTMLElement,\n          );\n          handler?.(entry);\n        });\n      },\n      {\n        root: viewportElement,\n        ...options,\n        threshold: options?.threshold ?? DEFAULT_THRESHOLD,\n      },\n    );\n\n    if (this.queueSet.size) {\n      this.queueSet.forEach(([queueElement, queueHandler]) => {\n        // check if element which requested observation is\n        // a child of a viewport element, skip if isn't\n        if (!viewportElement.contains(queueElement)) return;\n\n        this.observer!.observe(queueElement);\n        this.elementHandlerMap.set(queueElement, queueHandler);\n      });\n      this.queueSet.clear();\n    }\n\n    return cleanup;\n  };\n\n  /**\n   * Method to set element to observe and handler to be triggered whenever IntersectionObserver\n   * detects a possible change in element's visibility within specified viewport, returns\n   * cleanup function to be invoked upon disposing of the DOM element to prevent memory leaks\n   *\n   * @param element\n   * @param handler\n   * @returns Unobserve\n   */\n  public observe: Observe = (element, handler) => {\n    const queueItem = [element, handler] as const;\n\n    const cleanup = () => {\n      this.elementHandlerMap.delete(element);\n      this.observer?.unobserve(element);\n      this.queueSet.delete(queueItem);\n    };\n\n    if (this.elementHandlerMap.has(element)) return cleanup;\n\n    if (!this.observer) {\n      this.queueSet.add(queueItem);\n      return cleanup;\n    }\n\n    if (this.observer.root!.contains(element)) {\n      this.elementHandlerMap.set(element, handler);\n      this.observer.observe(element);\n    }\n\n    return cleanup;\n  };\n}\n", "import {\n  AudioTrackType,\n  DebounceType,\n  VideoTrackType,\n  VisibilityState,\n} from '../types';\nimport { TrackType, VideoDimension } from '../gen/video/sfu/models/models';\nimport {\n  BehaviorSubject,\n  combineLatest,\n  distinctUntilChanged,\n  distinctUntilKeyChanged,\n  map,\n  shareReplay,\n  takeWhile,\n} from 'rxjs';\nimport { ViewportTracker } from './ViewportTracker';\nimport { isFirefox, isSafari } from './browsers';\nimport {\n  hasScreenShare,\n  hasScreenShareAudio,\n  hasVideo,\n} from './participantUtils';\nimport type { TrackSubscriptionDetails } from '../gen/video/sfu/signal_rpc/signal';\nimport type { CallState } from '../store';\nimport type { StreamSfuClient } from '../StreamSfuClient';\nimport { SpeakerManager } from '../devices';\nimport { getCurrentValue, setCurrentValue } from '../store/rxUtils';\nimport { videoLoggerSystem } from '../logger';\n\nconst DEFAULT_VIEWPORT_VISIBILITY_STATE: Record<\n  VideoTrackType,\n  VisibilityState\n> = {\n  videoTrack: VisibilityState.UNKNOWN,\n  screenShareTrack: VisibilityState.UNKNOWN,\n} as const;\n\ntype VideoTrackSubscriptionOverride =\n  | {\n      enabled: true;\n      dimension: VideoDimension;\n    }\n  | { enabled: false };\n\nconst globalOverrideKey = Symbol('globalOverrideKey');\n\ninterface VideoTrackSubscriptionOverrides {\n  [sessionId: string]: VideoTrackSubscriptionOverride | undefined;\n  [globalOverrideKey]?: VideoTrackSubscriptionOverride;\n}\n\n/**\n * A manager class that handles dynascale related tasks like:\n *\n * - binding video elements to session ids\n * - binding audio elements to session ids\n * - tracking element visibility\n * - updating subscriptions based on viewport visibility\n * - updating subscriptions based on video element dimensions\n * - updating subscriptions based on published tracks\n */\nexport class DynascaleManager {\n  /**\n   * The viewport tracker instance.\n   */\n  readonly viewportTracker = new ViewportTracker();\n\n  private logger = videoLoggerSystem.getLogger('DynascaleManager');\n  private callState: CallState;\n  private speaker: SpeakerManager;\n  private audioContext: AudioContext | undefined;\n  private sfuClient: StreamSfuClient | undefined;\n  private pendingSubscriptionsUpdate: NodeJS.Timeout | null = null;\n\n  private videoTrackSubscriptionOverridesSubject =\n    new BehaviorSubject<VideoTrackSubscriptionOverrides>({});\n\n  videoTrackSubscriptionOverrides$ =\n    this.videoTrackSubscriptionOverridesSubject.asObservable();\n\n  incomingVideoSettings$ = this.videoTrackSubscriptionOverrides$.pipe(\n    map((overrides) => {\n      const { [globalOverrideKey]: globalSettings, ...participants } =\n        overrides;\n      return {\n        enabled: globalSettings?.enabled !== false,\n        preferredResolution: globalSettings?.enabled\n          ? globalSettings.dimension\n          : undefined,\n        participants: Object.fromEntries(\n          Object.entries(participants).map(\n            ([sessionId, participantOverride]) => [\n              sessionId,\n              {\n                enabled: participantOverride?.enabled !== false,\n                preferredResolution: participantOverride?.enabled\n                  ? participantOverride.dimension\n                  : undefined,\n              },\n            ],\n          ),\n        ),\n        isParticipantVideoEnabled: (sessionId: string) =>\n          overrides[sessionId]?.enabled ??\n          overrides[globalOverrideKey]?.enabled ??\n          true,\n      };\n    }),\n    shareReplay(1),\n  );\n\n  /**\n   * Creates a new DynascaleManager instance.\n   */\n  constructor(callState: CallState, speaker: SpeakerManager) {\n    this.callState = callState;\n    this.speaker = speaker;\n  }\n\n  /**\n   * Disposes the allocated resources and closes the audio context if it was created.\n   */\n  dispose = async () => {\n    if (this.pendingSubscriptionsUpdate) {\n      clearTimeout(this.pendingSubscriptionsUpdate);\n    }\n    const context = this.getOrCreateAudioContext();\n    if (context && context.state !== 'closed') {\n      document.removeEventListener('click', this.resumeAudioContext);\n      await context.close();\n      this.audioContext = undefined;\n    }\n  };\n\n  setSfuClient(sfuClient: StreamSfuClient | undefined) {\n    this.sfuClient = sfuClient;\n  }\n\n  get trackSubscriptions() {\n    const subscriptions: TrackSubscriptionDetails[] = [];\n    // Use getParticipantsSnapshot() to bypass the observable pipeline\n    // and avoid stale data caused by shareReplay with no active subscribers\n    const participants = this.callState.getParticipantsSnapshot();\n    const videoTrackSubscriptionOverrides =\n      this.videoTrackSubscriptionOverridesSubject.getValue();\n    for (const p of participants) {\n      if (p.isLocalParticipant) continue;\n      // NOTE: audio tracks don't have to be requested explicitly\n      // as the SFU will implicitly subscribe us to all of them,\n      // once they become available.\n      if (p.videoDimension && hasVideo(p)) {\n        const override =\n          videoTrackSubscriptionOverrides[p.sessionId] ??\n          videoTrackSubscriptionOverrides[globalOverrideKey];\n\n        if (override?.enabled !== false) {\n          subscriptions.push({\n            userId: p.userId,\n            sessionId: p.sessionId,\n            trackType: TrackType.VIDEO,\n            dimension: override?.dimension ?? p.videoDimension,\n          });\n        }\n      }\n      if (p.screenShareDimension && hasScreenShare(p)) {\n        subscriptions.push({\n          userId: p.userId,\n          sessionId: p.sessionId,\n          trackType: TrackType.SCREEN_SHARE,\n          dimension: p.screenShareDimension,\n        });\n      }\n      if (hasScreenShareAudio(p)) {\n        subscriptions.push({\n          userId: p.userId,\n          sessionId: p.sessionId,\n          trackType: TrackType.SCREEN_SHARE_AUDIO,\n        });\n      }\n    }\n    return subscriptions;\n  }\n\n  get videoTrackSubscriptionOverrides() {\n    return getCurrentValue(this.videoTrackSubscriptionOverrides$);\n  }\n\n  setVideoTrackSubscriptionOverrides = (\n    override: VideoTrackSubscriptionOverride | undefined,\n    sessionIds?: string[],\n  ) => {\n    if (!sessionIds) {\n      return setCurrentValue(\n        this.videoTrackSubscriptionOverridesSubject,\n        override ? { [globalOverrideKey]: override } : {},\n      );\n    }\n\n    return setCurrentValue(\n      this.videoTrackSubscriptionOverridesSubject,\n      (overrides) => ({\n        ...overrides,\n        ...Object.fromEntries(sessionIds.map((id) => [id, override])),\n      }),\n    );\n  };\n\n  applyTrackSubscriptions = (\n    debounceType: DebounceType = DebounceType.SLOW,\n  ) => {\n    if (this.pendingSubscriptionsUpdate) {\n      clearTimeout(this.pendingSubscriptionsUpdate);\n    }\n\n    const updateSubscriptions = () => {\n      this.pendingSubscriptionsUpdate = null;\n      this.sfuClient\n        ?.updateSubscriptions(this.trackSubscriptions)\n        .catch((err: unknown) => {\n          this.logger.debug(`Failed to update track subscriptions`, err);\n        });\n    };\n\n    if (debounceType) {\n      this.pendingSubscriptionsUpdate = setTimeout(\n        updateSubscriptions,\n        debounceType,\n      );\n    } else {\n      updateSubscriptions();\n    }\n  };\n\n  /**\n   * Will begin tracking the given element for visibility changes within the\n   * configured viewport element (`call.setViewport`).\n   *\n   * @param element the element to track.\n   * @param sessionId the session id.\n   * @param trackType the kind of video.\n   * @returns Untrack.\n   */\n  trackElementVisibility = <T extends HTMLElement>(\n    element: T,\n    sessionId: string,\n    trackType: VideoTrackType,\n  ) => {\n    const cleanup = this.viewportTracker.observe(element, (entry) => {\n      this.callState.updateParticipant(sessionId, (participant) => {\n        const previousVisibilityState =\n          participant.viewportVisibilityState ??\n          DEFAULT_VIEWPORT_VISIBILITY_STATE;\n\n        // observer triggers when the element is \"moved\" to be a fullscreen element\n        // keep it VISIBLE if that happens to prevent fullscreen with placeholder\n        const isVisible =\n          entry.isIntersecting || document.fullscreenElement === element\n            ? VisibilityState.VISIBLE\n            : VisibilityState.INVISIBLE;\n        return {\n          ...participant,\n          viewportVisibilityState: {\n            ...previousVisibilityState,\n            [trackType]: isVisible,\n          },\n        };\n      });\n    });\n\n    return () => {\n      cleanup();\n      // reset visibility state to UNKNOWN upon cleanup\n      // so that the layouts that are not actively observed\n      // can still function normally (runtime layout switching)\n      this.callState.updateParticipant(sessionId, (participant) => {\n        const previousVisibilityState =\n          participant.viewportVisibilityState ??\n          DEFAULT_VIEWPORT_VISIBILITY_STATE;\n        return {\n          ...participant,\n          viewportVisibilityState: {\n            ...previousVisibilityState,\n            [trackType]: VisibilityState.UNKNOWN,\n          },\n        };\n      });\n    };\n  };\n\n  /**\n   * Sets the viewport element to track bound video elements for visibility.\n   *\n   * @param element the viewport element.\n   */\n  setViewport = <T extends HTMLElement>(element: T) => {\n    return this.viewportTracker.setViewport(element);\n  };\n\n  /**\n   * Binds a DOM <video> element to the given session id.\n   * This method will make sure that the video element will play\n   * the correct video stream for the given session id.\n   *\n   * Under the hood, it would also keep track of the video element dimensions\n   * and update the subscription accordingly in order to optimize the bandwidth.\n   *\n   * If a \"viewport\" is configured, the video element will be automatically\n   * tracked for visibility and the subscription will be updated accordingly.\n   *\n   * @param videoElement the video element to bind to.\n   * @param sessionId the session id.\n   * @param trackType the kind of video.\n   */\n  bindVideoElement = (\n    videoElement: HTMLVideoElement,\n    sessionId: string,\n    trackType: VideoTrackType,\n  ) => {\n    const boundParticipant =\n      this.callState.findParticipantBySessionId(sessionId);\n    if (!boundParticipant) return;\n\n    const requestTrackWithDimensions = (\n      debounceType: DebounceType,\n      dimension: VideoDimension | undefined,\n    ) => {\n      if (dimension && (dimension.width === 0 || dimension.height === 0)) {\n        // ignore 0x0 dimensions. this can happen when the video element\n        // is not visible (e.g., has display: none).\n        // we treat this as \"unsubscription\" as we don't want to keep\n        // consuming bandwidth for a video that is not visible on the screen.\n        this.logger.debug(`Ignoring 0x0 dimension`, boundParticipant);\n        dimension = undefined;\n      }\n      this.callState.updateParticipantTracks(trackType, {\n        [sessionId]: { dimension },\n      });\n      this.applyTrackSubscriptions(debounceType);\n    };\n\n    const participant$ = this.callState.participants$.pipe(\n      map((ps) => ps.find((p) => p.sessionId === sessionId)),\n      takeWhile((participant) => !!participant),\n      distinctUntilChanged(),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    /**\n     * Since the video elements are now being removed from the DOM (React SDK) upon\n     * visibility change, this subscription is not in use an stays here only for the\n     * plain JS integrations where integrators might choose not to remove the video\n     * elements from the DOM.\n     */\n    // keep copy for resize observer handler\n    let viewportVisibilityState: VisibilityState | undefined;\n    const viewportVisibilityStateSubscription =\n      boundParticipant.isLocalParticipant\n        ? null\n        : participant$\n            .pipe(\n              map((p) => p.viewportVisibilityState?.[trackType]),\n              distinctUntilChanged(),\n            )\n            .subscribe((nextViewportVisibilityState) => {\n              // skip initial trigger\n              if (!viewportVisibilityState) {\n                viewportVisibilityState =\n                  nextViewportVisibilityState ?? VisibilityState.UNKNOWN;\n                return;\n              }\n              viewportVisibilityState =\n                nextViewportVisibilityState ?? VisibilityState.UNKNOWN;\n\n              if (nextViewportVisibilityState === VisibilityState.INVISIBLE) {\n                return requestTrackWithDimensions(\n                  DebounceType.MEDIUM,\n                  undefined,\n                );\n              }\n\n              requestTrackWithDimensions(DebounceType.MEDIUM, {\n                width: videoElement.clientWidth,\n                height: videoElement.clientHeight,\n              });\n            });\n\n    let lastDimensions: VideoDimension | undefined;\n    const resizeObserver = boundParticipant.isLocalParticipant\n      ? null\n      : new ResizeObserver(() => {\n          const currentDimensions = {\n            width: videoElement.clientWidth,\n            height: videoElement.clientHeight,\n          };\n\n          // skip initial trigger\n          if (!lastDimensions) {\n            lastDimensions = currentDimensions;\n            return;\n          }\n\n          if (\n            (lastDimensions.width === currentDimensions.width &&\n              lastDimensions.height === currentDimensions.height) ||\n            viewportVisibilityState === VisibilityState.INVISIBLE\n          ) {\n            return;\n          }\n\n          const relativeDelta = Math.max(\n            currentDimensions.width / lastDimensions.width,\n            currentDimensions.height / lastDimensions.height,\n          );\n          // Low quality video in an upscaled video element is very noticable.\n          // We try to upscale faster, and downscale slower. We also update debounce\n          // more if the size change is not significant, gurading against fast-firing\n          // resize events.\n          const debounceType =\n            relativeDelta > 1.2 ? DebounceType.IMMEDIATE : DebounceType.MEDIUM;\n          requestTrackWithDimensions(debounceType, {\n            width: videoElement.clientWidth,\n            height: videoElement.clientHeight,\n          });\n          lastDimensions = currentDimensions;\n        });\n    resizeObserver?.observe(videoElement);\n\n    // element renders and gets bound - track subscription gets\n    // triggered first other ones get skipped on initial subscriptions\n    const publishedTracksSubscription = boundParticipant.isLocalParticipant\n      ? null\n      : participant$\n          .pipe(\n            distinctUntilKeyChanged('publishedTracks'),\n            map((p) =>\n              trackType === 'videoTrack' ? hasVideo(p) : hasScreenShare(p),\n            ),\n            distinctUntilChanged(),\n          )\n          .subscribe((isPublishing) => {\n            if (isPublishing) {\n              // the participant just started to publish a track\n              requestTrackWithDimensions(DebounceType.IMMEDIATE, {\n                width: videoElement.clientWidth,\n                height: videoElement.clientHeight,\n              });\n            } else {\n              // the participant just stopped publishing a track\n              requestTrackWithDimensions(DebounceType.FAST, undefined);\n            }\n          });\n\n    videoElement.autoplay = true;\n    videoElement.playsInline = true;\n\n    // explicitly marking the element as muted will allow autoplay to work\n    // without prior user interaction:\n    // https://developer.mozilla.org/en-US/docs/Web/Media/Autoplay_guide\n    videoElement.muted = true;\n\n    const streamSubscription = participant$\n      .pipe(\n        distinctUntilKeyChanged(\n          trackType === 'videoTrack' ? 'videoStream' : 'screenShareStream',\n        ),\n      )\n      .subscribe((p) => {\n        const source =\n          trackType === 'videoTrack' ? p.videoStream : p.screenShareStream;\n        if (videoElement.srcObject === source) return;\n        videoElement.srcObject = source ?? null;\n        if (isSafari() || isFirefox()) {\n          setTimeout(() => {\n            videoElement.srcObject = source ?? null;\n            videoElement.play().catch((e) => {\n              this.logger.warn(`Failed to play stream`, e);\n            });\n            // we add extra delay until we attempt to force-play\n            // the participant's media stream in Firefox and Safari,\n            // as they seem to have some timing issues\n          }, 25);\n        }\n      });\n\n    return () => {\n      requestTrackWithDimensions(DebounceType.FAST, undefined);\n      viewportVisibilityStateSubscription?.unsubscribe();\n      publishedTracksSubscription?.unsubscribe();\n      streamSubscription.unsubscribe();\n      resizeObserver?.disconnect();\n    };\n  };\n\n  /**\n   * Binds a DOM <audio> element to the given session id.\n   *\n   * This method will make sure that the audio element will\n   * play the correct audio stream for the given session id.\n   *\n   * @param audioElement the audio element to bind to.\n   * @param sessionId the session id.\n   * @param trackType the kind of audio.\n   * @returns a cleanup function that will unbind the audio element.\n   */\n  bindAudioElement = (\n    audioElement: HTMLAudioElement,\n    sessionId: string,\n    trackType: AudioTrackType,\n  ) => {\n    const participant = this.callState.findParticipantBySessionId(sessionId);\n    if (!participant || participant.isLocalParticipant) return;\n\n    const participant$ = this.callState.participants$.pipe(\n      map((ps) => ps.find((p) => p.sessionId === sessionId)),\n      takeWhile((p) => !!p),\n      distinctUntilChanged(),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    const updateSinkId = (\n      deviceId: string,\n      audioContext: AudioContext | undefined,\n    ) => {\n      if (!deviceId) return;\n      if ('setSinkId' in audioElement) {\n        audioElement.setSinkId(deviceId).catch((e) => {\n          this.logger.warn(`Can't to set AudioElement sinkId`, e);\n        });\n      }\n\n      if (audioContext && 'setSinkId' in audioContext) {\n        // @ts-expect-error setSinkId is not available in all browsers\n        audioContext.setSinkId(deviceId).catch((e) => {\n          this.logger.warn(`Can't to set AudioContext sinkId`, e);\n        });\n      }\n    };\n\n    let sourceNode: MediaStreamAudioSourceNode | undefined = undefined;\n    let gainNode: GainNode | undefined = undefined;\n\n    const updateMediaStreamSubscription = participant$\n      .pipe(\n        distinctUntilKeyChanged(\n          trackType === 'screenShareAudioTrack'\n            ? 'screenShareAudioStream'\n            : 'audioStream',\n        ),\n      )\n      .subscribe((p) => {\n        const source =\n          trackType === 'screenShareAudioTrack'\n            ? p.screenShareAudioStream\n            : p.audioStream;\n        if (audioElement.srcObject === source) return;\n\n        setTimeout(() => {\n          audioElement.srcObject = source ?? null;\n          if (!source) return;\n\n          // Safari has a special quirk that prevents playing audio until the user\n          // interacts with the page or focuses on the tab where the call happens.\n          // This is a workaround for the issue where:\n          // - A and B are in a call\n          // - A switches to another tab\n          // - B mutes their microphone and unmutes it\n          // - A does not hear B's unmuted audio until they focus the tab\n          const audioContext = this.getOrCreateAudioContext();\n          if (audioContext) {\n            // we will play audio through the audio context in Safari\n            audioElement.muted = true;\n            sourceNode?.disconnect();\n            sourceNode = audioContext.createMediaStreamSource(source);\n            gainNode ??= audioContext.createGain();\n            gainNode.gain.value = p.audioVolume ?? this.speaker.state.volume;\n            sourceNode.connect(gainNode).connect(audioContext.destination);\n            this.resumeAudioContext();\n          } else {\n            // we will play audio directly through the audio element in other browsers\n            audioElement.muted = false;\n            audioElement.play().catch((e) => {\n              this.logger.warn(`Failed to play audio stream`, e);\n            });\n          }\n\n          const { selectedDevice } = this.speaker.state;\n          if (selectedDevice) updateSinkId(selectedDevice, audioContext);\n        });\n      });\n\n    const sinkIdSubscription = !('setSinkId' in audioElement)\n      ? null\n      : this.speaker.state.selectedDevice$.subscribe((deviceId) => {\n          const audioContext = this.getOrCreateAudioContext();\n          updateSinkId(deviceId, audioContext);\n        });\n\n    const volumeSubscription = combineLatest([\n      this.speaker.state.volume$,\n      participant$.pipe(distinctUntilKeyChanged('audioVolume')),\n    ]).subscribe(([volume, p]) => {\n      const participantVolume = p.audioVolume ?? volume;\n      audioElement.volume = participantVolume;\n      if (gainNode) gainNode.gain.value = participantVolume;\n    });\n\n    audioElement.autoplay = true;\n\n    return () => {\n      sinkIdSubscription?.unsubscribe();\n      volumeSubscription.unsubscribe();\n      updateMediaStreamSubscription.unsubscribe();\n      audioElement.srcObject = null;\n      sourceNode?.disconnect();\n      gainNode?.disconnect();\n    };\n  };\n\n  private getOrCreateAudioContext = (): AudioContext | undefined => {\n    if (this.audioContext || !isSafari()) return this.audioContext;\n    const context = new AudioContext();\n    if (context.state === 'suspended') {\n      document.addEventListener('click', this.resumeAudioContext);\n    }\n    // @ts-expect-error audioSession is available in Safari only\n    const audioSession = navigator.audioSession;\n    if (audioSession) {\n      // https://github.com/w3c/audio-session/blob/main/explainer.md\n      audioSession.type = 'play-and-record';\n    }\n    return (this.audioContext = context);\n  };\n\n  private resumeAudioContext = () => {\n    if (this.audioContext?.state === 'suspended') {\n      this.audioContext\n        .resume()\n        .catch((err) => this.logger.warn(`Can't resume audio context`, err))\n        .then(() => {\n          document.removeEventListener('click', this.resumeAudioContext);\n        });\n    }\n  };\n}\n", "import { CallSettingsResponse, OwnCapability } from '../gen/coordinator';\nimport { TrackType } from '../gen/video/sfu/models/models';\nimport { ensureExhausted } from '../helpers/ensureExhausted';\n\n/**\n * Stores the permissions for the current user and exposes\n * a few helper methods which make it easier to work with permissions.\n *\n * This is an internal class meant to be used in combination with\n * a {@link Call} instance.\n *\n * @internal\n */\nexport class PermissionsContext {\n  private permissions: OwnCapability[] = [];\n  private settings?: CallSettingsResponse;\n\n  /**\n   * Sets the permissions for the current user.\n   *\n   * @param permissions the permissions to set.\n   */\n  setPermissions = (permissions: OwnCapability[]) => {\n    this.permissions = permissions || [];\n  };\n\n  /**\n   * Sets the settings for the bound call.\n   * @param settings\n   */\n  setCallSettings = (settings: CallSettingsResponse) => {\n    this.settings = settings;\n  };\n\n  /**\n   * Checks if the current user has a specific permission.\n   *\n   * @param permission the permission to check for.\n   */\n  hasPermission = (permission: OwnCapability) => {\n    return this.permissions.includes(permission);\n  };\n\n  /**\n   * Helper method that checks whether the current user has the permission\n   * to publish the given track type.\n   */\n  canPublish = (trackType: TrackType) => {\n    switch (trackType) {\n      case TrackType.AUDIO:\n        return this.hasPermission(OwnCapability.SEND_AUDIO);\n      case TrackType.VIDEO:\n        return this.hasPermission(OwnCapability.SEND_VIDEO);\n      case TrackType.SCREEN_SHARE:\n      case TrackType.SCREEN_SHARE_AUDIO:\n        return this.hasPermission(OwnCapability.SCREENSHARE);\n      case TrackType.UNSPECIFIED:\n        return false;\n      default:\n        ensureExhausted(trackType, 'Unknown track type');\n    }\n  };\n\n  /**\n   * Checks if the current user can request a specific permission\n   * within the call.\n   *\n   * @param permission the permission to check for.\n   * @param settings the call settings to check against (optional).\n   */\n  canRequest = (\n    permission: OwnCapability,\n    settings: CallSettingsResponse | undefined = this.settings,\n  ) => {\n    if (!settings) return false;\n\n    const { audio, video, screensharing } = settings;\n    switch (permission) {\n      case OwnCapability.SEND_AUDIO:\n        return audio.access_request_enabled;\n      case OwnCapability.SEND_VIDEO:\n        return video.access_request_enabled;\n      case OwnCapability.SCREENSHARE:\n        return screensharing.access_request_enabled;\n      default:\n        return false;\n    }\n  };\n}\n", "import { StreamVideoParticipant } from './types';\nimport {\n  Comparator,\n  defaultSortPreset,\n  livestreamOrAudioRoomSortPreset,\n} from './sorting';\n\n/**\n * The options for a {@link CallType}.\n */\nexport type CallTypeOptions = {\n  /**\n   * The {@link Comparator} to use to sorting the participants in the call.\n   */\n  sortParticipantsBy?: Comparator<StreamVideoParticipant>;\n};\n\n/**\n * Represents a call type.\n */\nexport class CallType {\n  /**\n   * The name of the call type.\n   */\n  name: string;\n\n  /**\n   * The options for the call type.\n   */\n  options: CallTypeOptions;\n\n  /**\n   * Constructs a new CallType.\n   *\n   * @param name the name of the call type.\n   * @param options the options for the call type.\n   */\n  constructor(\n    name: string,\n    options: CallTypeOptions = {\n      sortParticipantsBy: defaultSortPreset,\n    },\n  ) {\n    this.name = name;\n    this.options = options;\n  }\n}\n\n/**\n * A registry of {@link CallType}s.\n * You can register and unregister call types.\n */\nclass CallTypesRegistry {\n  /**\n   * The call types registered in this registry.\n   * @private\n   */\n  private readonly callTypes: { [key: string]: CallType };\n\n  /**\n   * Constructs a new CallTypesRegistry.\n   *\n   * @param callTypes the initial call types to register.\n   */\n  constructor(callTypes: CallType[]) {\n    this.callTypes = callTypes.reduce<{ [key: string]: CallType }>(\n      (acc, callType) => {\n        acc[callType.name] = callType;\n        return acc;\n      },\n      {},\n    );\n  }\n\n  /**\n   * Registers a new call type.\n   *\n   * @param callType the call type to register.\n   */\n  register = (callType: CallType) => {\n    this.callTypes[callType.name] = callType;\n  };\n\n  /**\n   * Unregisters a call type.\n   *\n   * @param name the name of the call type to unregister.\n   */\n  unregister = (name: string) => {\n    delete this.callTypes[name];\n  };\n\n  /**\n   * Gets a call type by name.\n   *\n   * @param name the name of the call type to get.\n   */\n  get = (name: string): CallType => {\n    if (!this.callTypes[name]) {\n      this.register(new CallType(name));\n    }\n    return this.callTypes[name];\n  };\n}\n\n/**\n * The default call types registry.\n * You can use this instance to dynamically register and unregister call types.\n */\nexport const CallTypes = new CallTypesRegistry([\n  new CallType('default', {\n    sortParticipantsBy: defaultSortPreset,\n  }),\n  new CallType('development', {\n    sortParticipantsBy: defaultSortPreset,\n  }),\n  new CallType('livestream', {\n    sortParticipantsBy: livestreamOrAudioRoomSortPreset,\n  }),\n  new CallType('audio_room', {\n    sortParticipantsBy: livestreamOrAudioRoomSortPreset,\n  }),\n]);\n", "/**\n * Deactivates MediaStream (stops and removes tracks) to be later garbage collected\n *\n * @param stream MediaStream\n * @returns void\n */\nexport const disposeOfMediaStream = (stream: MediaStream) => {\n  if (!stream.active) return;\n  stream.getTracks().forEach((track) => {\n    track.stop();\n  });\n  // @ts-expect-error release() is present in react-native-webrtc and must be called to dispose the stream\n  if (typeof stream.release === 'function') {\n    // @ts-expect-error - release() is present in react-native-webrtc\n    stream.release();\n  }\n};\n", "import { fromEventPattern, map } from 'rxjs';\nimport { isReactNative } from '../helpers/platforms';\nimport { disposeOfMediaStream } from './utils';\nimport { withoutConcurrency } from '../helpers/concurrency';\nimport { videoLoggerSystem } from '../logger';\n\ninterface BrowserPermissionConfig {\n  constraints: DisplayMediaStreamOptions;\n  queryName: PermissionName;\n}\n\nexport type BrowserPermissionState = PermissionState | 'prompting';\n\nexport class BrowserPermission {\n  private ready: Promise<void>;\n  private disposeController = new AbortController();\n  private state: BrowserPermissionState | undefined;\n  private wasPrompted: boolean = false;\n  private listeners = new Set<(state: BrowserPermissionState) => void>();\n  private logger = videoLoggerSystem.getLogger('permissions');\n\n  constructor(private readonly permission: BrowserPermissionConfig) {\n    const signal = this.disposeController.signal;\n\n    this.ready = (async () => {\n      const assumeGranted = () => {\n        if (isReactNative()) {\n          this.setState('granted');\n        } else {\n          this.setState('prompt');\n        }\n      };\n\n      if (!canQueryPermissions()) {\n        return assumeGranted();\n      }\n\n      try {\n        const status = await navigator.permissions.query({\n          name: permission.queryName,\n        });\n\n        if (!signal.aborted) {\n          this.setState(status.state);\n          status.addEventListener('change', () => this.setState(status.state), {\n            signal,\n          });\n        }\n      } catch (err) {\n        this.logger.debug('Failed to query permission status', err);\n        assumeGranted();\n      }\n    })();\n  }\n\n  dispose() {\n    this.state = undefined;\n    this.disposeController.abort();\n  }\n\n  async getState() {\n    await this.ready;\n    if (!this.state) {\n      throw new Error('BrowserPermission instance possibly disposed');\n    }\n    return this.state;\n  }\n\n  async prompt({\n    forcePrompt = false,\n    throwOnNotAllowed = false,\n  }: { forcePrompt?: boolean; throwOnNotAllowed?: boolean } = {}) {\n    return await withoutConcurrency(\n      `permission-prompt-${this.permission.queryName}`,\n      async () => {\n        if (\n          (await this.getState()) !== 'prompt' ||\n          (this.wasPrompted && !forcePrompt)\n        ) {\n          const isGranted = this.state === 'granted';\n\n          if (!isGranted && throwOnNotAllowed) {\n            throw new Error(\n              'Permission was not granted previously, and prompting again is not allowed',\n            );\n          }\n\n          return isGranted;\n        }\n\n        try {\n          this.wasPrompted = true;\n          this.setState('prompting');\n          const stream = await navigator.mediaDevices.getUserMedia(\n            this.permission.constraints,\n          );\n          disposeOfMediaStream(stream);\n          this.setState('granted');\n          return true;\n        } catch (e) {\n          if (\n            e &&\n            typeof e === 'object' &&\n            'name' in e &&\n            (e.name === 'NotAllowedError' || e.name === 'SecurityError')\n          ) {\n            this.logger.info('Browser permission was not granted', {\n              permission: this.permission,\n            });\n            this.setState('denied');\n\n            if (throwOnNotAllowed) {\n              throw e;\n            }\n\n            return false;\n          }\n\n          this.logger.error(`Failed to getUserMedia`, {\n            error: e,\n            permission: this.permission,\n          });\n          this.setState('prompt');\n          throw e;\n        }\n      },\n    );\n  }\n\n  listen(cb: (state: BrowserPermissionState) => void) {\n    this.listeners.add(cb);\n    if (this.state) cb(this.state);\n    return () => this.listeners.delete(cb);\n  }\n\n  asObservable() {\n    return this.getStateObservable().pipe(\n      // In some browsers, the 'change' event doesn't reliably emit and hence,\n      // permissionState stays in 'prompt' state forever.\n      // Typically, this happens when a user grants one-time permission.\n      // Instead of checking if a permission is granted, we check if it isn't denied\n      map((state) => state !== 'denied'),\n    );\n  }\n\n  asStateObservable() {\n    return this.getStateObservable();\n  }\n\n  getIsPromptingObservable() {\n    return this.getStateObservable().pipe(\n      map((state) => state === 'prompting'),\n    );\n  }\n\n  private getStateObservable() {\n    return fromEventPattern<BrowserPermissionState>(\n      (handler) => this.listen(handler),\n      (handler, unlisten) => unlisten(),\n    );\n  }\n\n  private setState(state: BrowserPermissionState) {\n    if (this.state !== state) {\n      this.state = state;\n      this.listeners.forEach((listener) => listener(state));\n    }\n  }\n}\n\nfunction canQueryPermissions() {\n  return (\n    !isReactNative() &&\n    typeof navigator !== 'undefined' &&\n    !!navigator.permissions?.query\n  );\n}\n", "import {\n  concatMap,\n  debounceTime,\n  from,\n  fromEvent,\n  map,\n  merge,\n  shareReplay,\n  startWith,\n  tap,\n} from 'rxjs';\nimport { BrowserPermission } from './BrowserPermission';\nimport { lazy } from '../helpers/lazy';\nimport { isFirefox } from '../helpers/browsers';\nimport { dumpStream, Tracer } from '../stats';\nimport { getCurrentValue } from '../store/rxUtils';\nimport { videoLoggerSystem } from '../logger';\n\n/**\n * Returns an Observable that emits the list of available devices\n * that meet the given constraints.\n *\n * @param permission a BrowserPermission instance.\n * @param kind the kind of devices to enumerate.\n * @param tracer the tracer to use for tracing the device enumeration.\n */\nconst getDevices = (\n  permission: BrowserPermission,\n  kind: MediaDeviceKind,\n  tracer: Tracer | undefined,\n) => {\n  return from(\n    (async () => {\n      let devices = await navigator.mediaDevices.enumerateDevices();\n      // for privacy reasons, most browsers don't give you device labels\n      // unless you have a corresponding camera or microphone permission\n      const shouldPromptForBrowserPermission = devices.some(\n        (device) => device.kind === kind && device.label === '',\n      );\n      if (shouldPromptForBrowserPermission && (await permission.prompt())) {\n        devices = await navigator.mediaDevices.enumerateDevices();\n      }\n      tracer?.traceOnce(\n        'device-enumeration',\n        'navigator.mediaDevices.enumerateDevices',\n        devices,\n      );\n      return devices.filter(\n        (device) =>\n          device.kind === kind &&\n          device.label !== '' &&\n          device.deviceId !== 'default',\n      );\n    })(),\n  );\n};\n\n/**\n * Tells if the browser supports audio output change on 'audio' elements,\n * see https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/setSinkId.\n */\nexport const checkIfAudioOutputChangeSupported = () => {\n  if (typeof document === 'undefined') return false;\n  const element = document.createElement('audio');\n  return 'setSinkId' in element;\n};\n\n/**\n * The default constraints used to request audio devices.\n */\nconst audioDeviceConstraints = {\n  audio: {\n    autoGainControl: true,\n    noiseSuppression: true,\n    echoCancellation: true,\n  },\n} satisfies MediaStreamConstraints;\n\n/**\n * The default constraints used to request video devices.\n */\nconst videoDeviceConstraints = {\n  video: {\n    width: 1280,\n    height: 720,\n  },\n} satisfies MediaStreamConstraints;\n\n/**\n * Keeps track of the browser permission to use microphone. This permission also\n * affects an ability to enumerate audio devices.\n */\nexport const getAudioBrowserPermission = lazy(\n  () =>\n    new BrowserPermission({\n      constraints: audioDeviceConstraints,\n      queryName: 'microphone' as PermissionName,\n    }),\n);\n\n/**\n * Keeps track of the browser permission to use camera. This permission also\n * affects an ability to enumerate video devices.\n */\nexport const getVideoBrowserPermission = lazy(\n  () =>\n    new BrowserPermission({\n      constraints: videoDeviceConstraints,\n      queryName: 'camera' as PermissionName,\n    }),\n);\n\nconst getDeviceChangeObserver = lazy((tracer: Tracer | undefined) => {\n  // 'addEventListener' is not available in React Native, returning\n  // an observable that will never fire\n  if (!navigator.mediaDevices.addEventListener) return from([]);\n  return fromEvent(navigator.mediaDevices, 'devicechange').pipe(\n    tap(() => tracer?.resetTrace('device-enumeration')),\n    map(() => undefined),\n    debounceTime(500),\n  );\n});\n\n/**\n * Prompts the user for a permission to use audio devices (if not already granted\n * and was not prompted before) and lists the available 'audioinput' devices,\n * if devices are added/removed the list is updated, and if the permission is revoked,\n * the observable errors.\n */\nexport const getAudioDevices = lazy((tracer?: Tracer) => {\n  return merge(\n    getDeviceChangeObserver(tracer),\n    getAudioBrowserPermission().asObservable(),\n  ).pipe(\n    startWith(undefined),\n    concatMap(() =>\n      getDevices(getAudioBrowserPermission(), 'audioinput', tracer),\n    ),\n    shareReplay(1),\n  );\n});\n\n/**\n * Prompts the user for a permission to use video devices (if not already granted\n * and was not prompted before) and lists the available 'videoinput' devices,\n * if devices are added/removed the list is updated, and if the permission is revoked,\n * the observable errors.\n */\nexport const getVideoDevices = lazy((tracer?: Tracer) => {\n  return merge(\n    getDeviceChangeObserver(tracer),\n    getVideoBrowserPermission().asObservable(),\n  ).pipe(\n    startWith(undefined),\n    concatMap(() =>\n      getDevices(getVideoBrowserPermission(), 'videoinput', tracer),\n    ),\n    shareReplay(1),\n  );\n});\n\n/**\n * Prompts the user for a permission to use video devices (if not already granted\n * and was not prompted before) and lists the available 'audiooutput' devices,\n * if devices are added/removed the list is updated, and if the permission is revoked,\n * the observable errors.\n */\nexport const getAudioOutputDevices = lazy((tracer?: Tracer) => {\n  return merge(\n    getDeviceChangeObserver(tracer),\n    getAudioBrowserPermission().asObservable(),\n  ).pipe(\n    startWith(undefined),\n    concatMap(() =>\n      getDevices(getAudioBrowserPermission(), 'audiooutput', tracer),\n    ),\n    shareReplay(1),\n  );\n});\n\nlet getUserMediaExecId = 0;\nconst getStream = async (\n  constraints: MediaStreamConstraints,\n  tracer: Tracer | undefined,\n) => {\n  const tag = `navigator.mediaDevices.getUserMedia.${getUserMediaExecId++}.`;\n  try {\n    tracer?.trace(tag, constraints);\n    const stream = await navigator.mediaDevices.getUserMedia(constraints);\n    tracer?.trace(`${tag}OnSuccess`, dumpStream(stream));\n    if (isFirefox()) {\n      // When enumerating devices, Firefox will hide device labels unless there's been\n      // an active user media stream on the page. So we force device list updates after\n      // every successful getUserMedia call.\n      navigator.mediaDevices.dispatchEvent(new Event('devicechange'));\n    }\n    if (constraints.video) {\n      const [videoTrack] = stream.getVideoTracks();\n      if (videoTrack) {\n        const { width, height } = videoTrack.getSettings();\n        const target = constraints.video as MediaTrackConstraints;\n        if (width !== target.width || height !== target.height) {\n          tracer?.trace(\n            `${tag}Warn`,\n            `Requested resolution ${target.width}x${target.height} but got ${width}x${height}`,\n          );\n        }\n      }\n    }\n\n    return stream;\n  } catch (error) {\n    tracer?.trace(`${tag}OnFailure`, (error as Error).name);\n    throw error;\n  }\n};\n\nfunction isNotFoundOrOverconstrainedError(error: unknown) {\n  if (!error || typeof error !== 'object') {\n    return false;\n  }\n\n  if ('name' in error && typeof error.name === 'string') {\n    const name = error.name;\n    if (['OverconstrainedError', 'NotFoundError'].includes(name)) {\n      return true;\n    }\n  }\n\n  if ('message' in error && typeof error.message === 'string') {\n    const message = error.message;\n    if (message.startsWith('OverconstrainedError')) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * Returns an audio media stream that fulfills the given constraints.\n * If no constraints are provided, it uses the browser's default ones.\n *\n * @param trackConstraints the constraints to use when requesting the stream.\n * @param tracer the tracer to use for tracing the stream creation.\n * @returns a new `MediaStream` fulfilling the given constraints.\n */\nexport const getAudioStream = async (\n  trackConstraints?: MediaTrackConstraints,\n  tracer?: Tracer,\n): Promise<MediaStream> => {\n  const constraints: MediaStreamConstraints = {\n    audio: {\n      ...audioDeviceConstraints.audio,\n      ...trackConstraints,\n    },\n  };\n\n  try {\n    await getAudioBrowserPermission().prompt({\n      throwOnNotAllowed: true,\n      forcePrompt: true,\n    });\n    return await getStream(constraints, tracer);\n  } catch (error) {\n    if (isNotFoundOrOverconstrainedError(error) && trackConstraints?.deviceId) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { deviceId, ...relaxedConstraints } = trackConstraints;\n      videoLoggerSystem\n        .getLogger('devices')\n        .warn(\n          'Failed to get audio stream, will try again with relaxed constraints',\n          { error, constraints, relaxedConstraints },\n        );\n      return getAudioStream(relaxedConstraints);\n    }\n\n    videoLoggerSystem.getLogger('devices').error('Failed to get audio stream', {\n      error,\n      constraints,\n    });\n    throw error;\n  }\n};\n\n/**\n * Returns a video media stream that fulfills the given constraints.\n * If no constraints are provided, it uses the browser's default ones.\n *\n * @param trackConstraints the constraints to use when requesting the stream.\n * @param tracer the tracer to use for tracing the stream creation.\n * @returns a new `MediaStream` fulfilling the given constraints.\n */\nexport const getVideoStream = async (\n  trackConstraints?: MediaTrackConstraints,\n  tracer?: Tracer,\n): Promise<MediaStream> => {\n  const constraints: MediaStreamConstraints = {\n    video: {\n      ...videoDeviceConstraints.video,\n      ...trackConstraints,\n    },\n  };\n  try {\n    await getVideoBrowserPermission().prompt({\n      throwOnNotAllowed: true,\n      forcePrompt: true,\n    });\n    return await getStream(constraints, tracer);\n  } catch (error) {\n    if (isNotFoundOrOverconstrainedError(error) && trackConstraints?.deviceId) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { deviceId, ...relaxedConstraints } = trackConstraints;\n      videoLoggerSystem\n        .getLogger('devices')\n        .warn(\n          'Failed to get video stream, will try again with relaxed constraints',\n          { error, constraints, relaxedConstraints },\n        );\n      return getVideoStream(relaxedConstraints);\n    }\n\n    videoLoggerSystem.getLogger('devices').error('Failed to get video stream', {\n      error,\n      constraints,\n    });\n    throw error;\n  }\n};\n\nlet getDisplayMediaExecId = 0;\n\n/**\n * Prompts the user for a permission to share a screen.\n * If the user grants the permission, a screen sharing stream is returned. Throws otherwise.\n *\n * The callers of this API are responsible to handle the possible errors.\n *\n * @param options any additional options to pass to the [`getDisplayMedia`](https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getDisplayMedia) API.\n * @param tracer the tracer to use for tracing the stream creation.\n */\nexport const getScreenShareStream = async (\n  options?: DisplayMediaStreamOptions,\n  tracer?: Tracer | undefined,\n) => {\n  const tag = `navigator.mediaDevices.getDisplayMedia.${getDisplayMediaExecId++}.`;\n  try {\n    const constraints: DisplayMediaStreamOptions = {\n      // @ts-expect-error - not present in types yet\n      systemAudio: 'include',\n      ...options,\n      video:\n        typeof options?.video === 'boolean'\n          ? options.video // must be 'true'\n          : {\n              width: { max: 2560 },\n              height: { max: 1440 },\n              frameRate: { ideal: 30 },\n              ...options?.video,\n            },\n      audio:\n        typeof options?.audio === 'boolean'\n          ? options.audio\n          : {\n              channelCount: { ideal: 2 },\n              echoCancellation: false,\n              autoGainControl: false,\n              noiseSuppression: false,\n              ...options?.audio,\n            },\n    };\n    tracer?.trace(tag, constraints);\n    const stream = await navigator.mediaDevices.getDisplayMedia(constraints);\n    tracer?.trace(`${tag}OnSuccess`, dumpStream(stream));\n    return stream;\n  } catch (e) {\n    tracer?.trace(`${tag}OnFailure`, (e as Error).name);\n    videoLoggerSystem\n      .getLogger('devices')\n      .error('Failed to get screen share stream', e);\n    throw e;\n  }\n};\n\nexport const deviceIds$ =\n  typeof navigator !== 'undefined' &&\n  typeof navigator.mediaDevices !== 'undefined'\n    ? getDeviceChangeObserver().pipe(\n        startWith(undefined),\n        concatMap(() => navigator.mediaDevices.enumerateDevices()),\n        shareReplay(1),\n      )\n    : undefined;\n\n/**\n * Resolves `default` device id into the real device id. Some browsers (notably,\n * Chromium-based) report device with id `default` among audio input and output\n * devices. Since not every browser does that, we never want `default` id to be\n * used within our SDK. This function tries to find the real id for the `default`\n * device.\n */\nexport function resolveDeviceId(\n  deviceId: string | undefined,\n  kind: MediaDeviceKind,\n): string | undefined {\n  if (deviceId !== 'default') return deviceId;\n  const devices = deviceIds$ && getCurrentValue(deviceIds$);\n  if (!devices) return deviceId;\n  const defaultDeviceInfo = devices.find((d) => d.deviceId === deviceId);\n  if (!defaultDeviceInfo) return deviceId;\n  const groupId = defaultDeviceInfo.groupId;\n  const candidates = devices.filter(\n    (d) => d.kind === kind && d.deviceId !== 'default' && d.groupId === groupId,\n  );\n  return candidates.length === 1 ? candidates[0].deviceId : deviceId;\n}\n", "/**\n * Checks if the current platform is a mobile device.\n *\n * See:\n * https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent\n */\nexport const isMobile = () => /Mobi/i.test(navigator.userAgent);\n", "import { combineLatest, Observable, pairwise } from 'rxjs';\nimport { Call } from '../Call';\nimport { TrackPublishOptions } from '../rtc';\nimport { CallingState } from '../store';\nimport { createSubscription } from '../store/rxUtils';\nimport { DeviceManagerState } from './DeviceManagerState';\nimport { isMobile } from '../helpers/compatibility';\nimport { isReactNative } from '../helpers/platforms';\nimport { ScopedLogger, videoLoggerSystem } from '../logger';\nimport { TrackType } from '../gen/video/sfu/models/models';\nimport { deviceIds$ } from './devices';\nimport {\n  settled,\n  withCancellation,\n  withoutConcurrency,\n} from '../helpers/concurrency';\nimport {\n  MediaStreamFilter,\n  MediaStreamFilterEntry,\n  MediaStreamFilterRegistrationResult,\n} from './filters';\n\nexport abstract class DeviceManager<\n  S extends DeviceManagerState<C>,\n  C = MediaTrackConstraints,\n> {\n  /**\n   * if true, stops the media stream when call is left\n   */\n  stopOnLeave = true;\n  logger: ScopedLogger;\n\n  state: S;\n\n  protected readonly call: Call;\n  protected readonly trackType: TrackType;\n  protected subscriptions: Function[] = [];\n  private areSubscriptionsSetUp = false;\n  private isTrackStoppedDueToTrackEnd = false;\n  private filters: MediaStreamFilterEntry[] = [];\n  private statusChangeConcurrencyTag = Symbol('statusChangeConcurrencyTag');\n  private filterRegistrationConcurrencyTag = Symbol(\n    'filterRegistrationConcurrencyTag',\n  );\n\n  protected constructor(call: Call, state: S, trackType: TrackType) {\n    this.call = call;\n    this.state = state;\n    this.trackType = trackType;\n    this.logger = videoLoggerSystem.getLogger(\n      `${TrackType[trackType].toLowerCase()} manager`,\n    );\n    this.setup();\n  }\n\n  setup() {\n    if (this.areSubscriptionsSetUp) {\n      return;\n    }\n\n    this.areSubscriptionsSetUp = true;\n\n    if (\n      deviceIds$ &&\n      !isReactNative() &&\n      (this.trackType === TrackType.AUDIO || this.trackType === TrackType.VIDEO)\n    ) {\n      this.handleDisconnectedOrReplacedDevices();\n    }\n  }\n\n  /**\n   * Lists the available audio/video devices\n   *\n   * Note: It prompts the user for a permission to use devices (if not already granted)\n   *\n   * @returns an Observable that will be updated if a device is connected or disconnected\n   */\n  listDevices() {\n    return this.getDevices();\n  }\n\n  /**\n   * Returns `true` when this device is in enabled state.\n   */\n  get enabled() {\n    return this.state.status === 'enabled';\n  }\n\n  /**\n   * Starts stream.\n   */\n  async enable() {\n    this.state.prevStatus = this.state.optimisticStatus;\n    if (this.state.optimisticStatus === 'enabled') {\n      return;\n    }\n    this.state.setPendingStatus('enabled');\n\n    await withCancellation(this.statusChangeConcurrencyTag, async (signal) => {\n      try {\n        await this.unmuteStream();\n        this.state.setStatus('enabled');\n      } finally {\n        if (!signal.aborted) {\n          this.state.setPendingStatus(this.state.status);\n        }\n      }\n    });\n  }\n\n  /**\n   * Stops or pauses the stream based on state.disableMode\n   */\n  async disable(options: { forceStop?: boolean }): Promise<void>;\n  async disable(forceStop?: boolean): Promise<void>;\n  async disable(forceStopOrOptions?: boolean | { forceStop?: boolean }) {\n    const forceStop =\n      typeof forceStopOrOptions === 'boolean'\n        ? forceStopOrOptions\n        : (forceStopOrOptions?.forceStop ?? false);\n\n    this.state.prevStatus = this.state.optimisticStatus;\n    if (!forceStop && this.state.optimisticStatus === 'disabled') {\n      return;\n    }\n\n    this.state.setPendingStatus('disabled');\n\n    await withCancellation(this.statusChangeConcurrencyTag, async (signal) => {\n      try {\n        const stopTracks =\n          forceStop || this.state.disableMode === 'stop-tracks';\n        await this.muteStream(stopTracks);\n        this.state.setStatus('disabled');\n      } finally {\n        if (!signal.aborted) {\n          this.state.setPendingStatus(this.state.status);\n        }\n      }\n    });\n  }\n\n  /**\n   * Returns a promise that resolves when all pe\n   */\n  async statusChangeSettled() {\n    await settled(this.statusChangeConcurrencyTag);\n  }\n\n  /**\n   * If status was previously enabled, it will re-enable the device.\n   */\n  async resume() {\n    if (\n      this.state.prevStatus === 'enabled' &&\n      this.state.status !== 'enabled'\n    ) {\n      await this.enable();\n    }\n  }\n\n  /**\n   * If the current device status is disabled, it will enable the device,\n   * else it will disable it.\n   */\n  async toggle() {\n    if (this.state.optimisticStatus === 'enabled') {\n      return await this.disable();\n    } else {\n      return await this.enable();\n    }\n  }\n\n  /**\n   * Registers a filter that will be applied to the stream.\n   *\n   * The registered filter will get the existing stream, and it should return\n   * a new stream with the applied filter.\n   *\n   * @param filter the filter to register.\n   * @returns MediaStreamFilterRegistrationResult\n   */\n  registerFilter(\n    filter: MediaStreamFilter,\n  ): MediaStreamFilterRegistrationResult {\n    const entry: MediaStreamFilterEntry = {\n      start: filter,\n      stop: undefined,\n    };\n    this.call.tracer.trace(`registerFilter.${TrackType[this.trackType]}`, null);\n    const registered = withoutConcurrency(\n      this.filterRegistrationConcurrencyTag,\n      async () => {\n        await settled(this.statusChangeConcurrencyTag);\n        this.filters.push(entry);\n        await this.applySettingsToStream();\n      },\n    );\n\n    return {\n      registered,\n      unregister: () =>\n        withoutConcurrency(this.filterRegistrationConcurrencyTag, async () => {\n          await settled(this.statusChangeConcurrencyTag);\n          entry.stop?.();\n          this.filters = this.filters.filter((f) => f !== entry);\n          await this.applySettingsToStream();\n          this.call.tracer.trace(\n            `unregisterFilter.${TrackType[this.trackType]}`,\n            null,\n          );\n        }),\n    };\n  }\n\n  /**\n   * Will set the default constraints for the device.\n   *\n   * @param constraints the constraints to set.\n   */\n  setDefaultConstraints(constraints: C) {\n    this.state.setDefaultConstraints(constraints);\n  }\n\n  /**\n   * Selects a device.\n   *\n   * Note: This method is not supported in React Native\n   * @param deviceId the device id to select.\n   */\n  async select(deviceId: string | undefined) {\n    if (isReactNative()) {\n      throw new Error('This method is not supported in React Native.');\n    }\n    const prevDeviceId = this.state.selectedDevice;\n    if (deviceId === prevDeviceId) {\n      return;\n    }\n    try {\n      this.state.setDevice(deviceId);\n      await this.applySettingsToStream();\n    } catch (error) {\n      this.state.setDevice(prevDeviceId);\n      throw error;\n    }\n  }\n\n  /**\n   * Disposes the manager.\n   *\n   * @internal\n   */\n  dispose = () => {\n    this.subscriptions.forEach((s) => s());\n    this.subscriptions = [];\n    this.areSubscriptionsSetUp = false;\n  };\n\n  protected async applySettingsToStream() {\n    console.log('applySettingsToStream ');\n    await withCancellation(this.statusChangeConcurrencyTag, async (signal) => {\n      if (this.enabled) {\n        try {\n          await this.muteStream();\n          this.state.setStatus('disabled');\n\n          if (signal.aborted) {\n            return;\n          }\n\n          await this.unmuteStream();\n          this.state.setStatus('enabled');\n        } finally {\n          if (!signal.aborted) {\n            this.state.setPendingStatus(this.state.status);\n          }\n        }\n      }\n    });\n  }\n\n  protected abstract getDevices(): Observable<MediaDeviceInfo[]>;\n\n  protected abstract getStream(constraints: C): Promise<MediaStream>;\n\n  protected publishStream(\n    stream: MediaStream,\n    options?: TrackPublishOptions,\n  ): Promise<void> {\n    return this.call.publish(stream, this.trackType, options);\n  }\n\n  protected stopPublishStream(): Promise<void> {\n    return this.call.stopPublish(this.trackType);\n  }\n\n  protected getTracks(): MediaStreamTrack[] {\n    return this.state.mediaStream?.getTracks() ?? [];\n  }\n\n  protected async muteStream(stopTracks: boolean = true) {\n    const mediaStream = this.state.mediaStream;\n    if (!mediaStream) return;\n    this.logger.debug(`${stopTracks ? 'Stopping' : 'Disabling'} stream`);\n    if (this.call.state.callingState === CallingState.JOINED) {\n      await this.stopPublishStream();\n    }\n    this.muteLocalStream(stopTracks);\n    const allEnded = this.getTracks().every((t) => t.readyState === 'ended');\n    if (allEnded) {\n      // @ts-expect-error release() is present in react-native-webrtc\n      if (typeof mediaStream.release === 'function') {\n        // @ts-expect-error called to dispose the stream in RN\n        mediaStream.release();\n      }\n      this.state.setMediaStream(undefined, undefined);\n      this.filters.forEach((entry) => entry.stop?.());\n    }\n  }\n\n  private disableTracks() {\n    this.getTracks().forEach((track) => {\n      if (track.enabled) track.enabled = false;\n    });\n  }\n\n  private enableTracks() {\n    this.getTracks().forEach((track) => {\n      if (!track.enabled) track.enabled = true;\n    });\n  }\n\n  private stopTracks() {\n    this.getTracks().forEach((track) => {\n      if (track.readyState === 'live') track.stop();\n    });\n  }\n\n  private muteLocalStream(stopTracks: boolean) {\n    if (!this.state.mediaStream) {\n      return;\n    }\n    if (stopTracks) {\n      this.stopTracks();\n    } else {\n      this.disableTracks();\n    }\n  }\n\n  protected async unmuteStream() {\n    this.logger.debug('Starting stream');\n    let stream: MediaStream;\n    let rootStream: Promise<MediaStream> | undefined;\n    if (\n      this.state.mediaStream &&\n      this.getTracks().every((t) => t.readyState === 'live')\n    ) {\n      stream = this.state.mediaStream;\n      this.enableTracks();\n    } else {\n      const defaultConstraints = this.state.defaultConstraints;\n      const constraints: MediaTrackConstraints = {\n        ...defaultConstraints,\n        deviceId: this.state.selectedDevice\n          ? { exact: this.state.selectedDevice }\n          : undefined,\n      };\n\n      /**\n       * Chains two media streams together.\n       *\n       * In our case, filters MediaStreams are derived from their parent MediaStream.\n       * However, once a child filter's track is stopped,\n       * the tracks of the parent MediaStream aren't automatically stopped.\n       * This leads to a situation where the camera indicator light is still on\n       * even though the user stopped publishing video.\n       *\n       * This function works around this issue by stopping the parent MediaStream's tracks\n       * as well once the child filter's tracks are stopped.\n       *\n       * It works by patching the stop() method of the child filter's tracks to also stop\n       * the parent MediaStream's tracks of the same type. Here we assume that\n       * the parent MediaStream has only one track of each type.\n       *\n       * @param parentStream the parent MediaStream. Omit for the root stream.\n       */\n      const chainWith =\n        (parentStream?: Promise<MediaStream>) =>\n        async (filterStream: MediaStream): Promise<MediaStream> => {\n          if (!parentStream) return filterStream;\n          // TODO OL: take care of track.enabled property as well\n          const parent = await parentStream;\n          filterStream.getTracks().forEach((track) => {\n            const originalStop = track.stop;\n            track.stop = function stop() {\n              originalStop.call(track);\n              parent.getTracks().forEach((parentTrack) => {\n                if (parentTrack.kind === track.kind) {\n                  parentTrack.stop();\n                }\n              });\n            };\n          });\n\n          parent.getTracks().forEach((parentTrack) => {\n            // When the parent stream abruptly ends, we propagate the event\n            // to the filter stream.\n            // This usually happens when the camera/microphone permissions\n            // are revoked or when the device is disconnected.\n            const handleParentTrackEnded = () => {\n              filterStream.getTracks().forEach((track) => {\n                if (parentTrack.kind !== track.kind) return;\n                track.stop();\n                track.dispatchEvent(new Event('ended')); // propagate the event\n              });\n            };\n            parentTrack.addEventListener('ended', handleParentTrackEnded);\n            this.subscriptions.push(() => {\n              parentTrack.removeEventListener('ended', handleParentTrackEnded);\n            });\n          });\n\n          return filterStream;\n        };\n\n      // the rootStream represents the stream coming from the actual device\n      // e.g. camera or microphone stream\n      rootStream = this.getStream(constraints as C);\n      // we publish the last MediaStream of the chain\n      stream = await this.filters.reduce(\n        (parent, entry) =>\n          parent\n            .then((inputStream) => {\n              const { stop, output } = entry.start(inputStream);\n              entry.stop = stop;\n              return output;\n            })\n            .then(chainWith(parent), (error) => {\n              this.logger.warn(\n                'Filter failed to start and will be ignored',\n                error,\n              );\n              return parent;\n            }),\n        rootStream,\n      );\n    }\n    if (this.call.state.callingState === CallingState.JOINED) {\n      await this.publishStream(stream);\n    }\n    if (this.state.mediaStream !== stream) {\n      this.state.setMediaStream(stream, await rootStream);\n      const handleTrackEnded = async () => {\n        await this.statusChangeSettled();\n        if (this.enabled) {\n          this.isTrackStoppedDueToTrackEnd = true;\n          setTimeout(() => {\n            this.isTrackStoppedDueToTrackEnd = false;\n          }, 2000);\n          await this.disable();\n        }\n      };\n      const createTrackMuteHandler = (muted: boolean) => () => {\n        if (!isMobile() || this.trackType !== TrackType.VIDEO) return;\n        this.call.notifyTrackMuteState(muted, this.trackType).catch((err) => {\n          this.logger.warn('Error while notifying track mute state', err);\n        });\n      };\n      stream.getTracks().forEach((track) => {\n        const muteHandler = createTrackMuteHandler(true);\n        const unmuteHandler = createTrackMuteHandler(false);\n        track.addEventListener('mute', muteHandler);\n        track.addEventListener('unmute', unmuteHandler);\n        track.addEventListener('ended', handleTrackEnded);\n        this.subscriptions.push(() => {\n          track.removeEventListener('mute', muteHandler);\n          track.removeEventListener('unmute', unmuteHandler);\n          track.removeEventListener('ended', handleTrackEnded);\n        });\n      });\n    }\n  }\n\n  private get mediaDeviceKind() {\n    if (this.trackType === TrackType.AUDIO) {\n      return 'audioinput';\n    }\n    if (this.trackType === TrackType.VIDEO) {\n      return 'videoinput';\n    }\n    return '';\n  }\n\n  private handleDisconnectedOrReplacedDevices() {\n    this.subscriptions.push(\n      createSubscription(\n        combineLatest([\n          deviceIds$!.pipe(pairwise()),\n          this.state.selectedDevice$,\n        ]),\n        async ([[prevDevices, currentDevices], deviceId]) => {\n          try {\n            if (!deviceId) return;\n            await this.statusChangeSettled();\n\n            let isDeviceDisconnected = false;\n            let isDeviceReplaced = false;\n            const currentDevice = this.findDevice(currentDevices, deviceId);\n            const prevDevice = this.findDevice(prevDevices, deviceId);\n            if (!currentDevice && prevDevice) {\n              isDeviceDisconnected = true;\n            } else if (\n              currentDevice &&\n              prevDevice &&\n              currentDevice.deviceId === prevDevice.deviceId &&\n              currentDevice.groupId !== prevDevice.groupId\n            ) {\n              isDeviceReplaced = true;\n            }\n\n            if (isDeviceDisconnected) {\n              await this.disable();\n              await this.select(undefined);\n            }\n            if (isDeviceReplaced) {\n              if (\n                this.isTrackStoppedDueToTrackEnd &&\n                this.state.status === 'disabled'\n              ) {\n                await this.enable();\n                this.isTrackStoppedDueToTrackEnd = false;\n              } else {\n                await this.applySettingsToStream();\n              }\n            }\n          } catch (err) {\n            this.logger.warn(\n              'Unexpected error while handling disconnected or replaced device',\n              err,\n            );\n          }\n        },\n      ),\n    );\n  }\n\n  private findDevice(devices: MediaDeviceInfo[], deviceId: string) {\n    const kind = this.mediaDeviceKind;\n    return devices.find((d) => d.deviceId === deviceId && d.kind === kind);\n  }\n}\n", "import {\n  BehaviorSubject,\n  distinctUntilChanged,\n  Observable,\n  of,\n  shareReplay,\n} from 'rxjs';\nimport { RxUtils } from '../store';\nimport { BrowserPermission, BrowserPermissionState } from './BrowserPermission';\n\nexport type InputDeviceStatus = 'enabled' | 'disabled' | undefined;\nexport type TrackDisableMode = 'stop-tracks' | 'disable-tracks';\n\nexport abstract class DeviceManagerState<C = MediaTrackConstraints> {\n  protected statusSubject = new BehaviorSubject<InputDeviceStatus>(undefined);\n  protected optimisticStatusSubject = new BehaviorSubject<InputDeviceStatus>(\n    undefined,\n  );\n  protected mediaStreamSubject = new BehaviorSubject<MediaStream | undefined>(\n    undefined,\n  );\n  protected selectedDeviceSubject = new BehaviorSubject<string | undefined>(\n    undefined,\n  );\n  protected defaultConstraintsSubject = new BehaviorSubject<C | undefined>(\n    undefined,\n  );\n\n  /**\n   * @internal\n   */\n  prevStatus: InputDeviceStatus;\n\n  /**\n   * An Observable that emits the current media stream, or `undefined` if the device is currently disabled.\n   *\n   */\n  mediaStream$ = this.mediaStreamSubject.asObservable();\n\n  /**\n   * An Observable that emits the currently selected device\n   */\n  selectedDevice$ = this.selectedDeviceSubject\n    .asObservable()\n    .pipe(distinctUntilChanged());\n\n  /**\n   * An Observable that emits the device status\n   */\n  status$ = this.statusSubject.asObservable().pipe(distinctUntilChanged());\n\n  /**\n   * An Observable the reflects the requested device status. Useful for optimistic UIs\n   */\n  optimisticStatus$ = this.optimisticStatusSubject\n    .asObservable()\n    .pipe(distinctUntilChanged());\n\n  /**\n   * The default constraints for the device.\n   */\n  defaultConstraints$ = this.defaultConstraintsSubject.asObservable();\n\n  /**\n   * An observable that will emit `true` if browser/system permission\n   * is granted (or at least hasn't been denied), `false` otherwise.\n   */\n  hasBrowserPermission$: Observable<boolean>;\n\n  /**\n   * An observable that emits with browser permission state changes.\n   * Gives more granular visiblity than hasBrowserPermission$.\n   */\n  browserPermissionState$: Observable<BrowserPermissionState>;\n\n  /**\n   * An observable that emits `true` when SDK is prompting for browser permission\n   * (i.e. browser's UI for allowing or disallowing device access is visible)\n   */\n  isPromptingPermission$: Observable<boolean>;\n\n  readonly disableMode: TrackDisableMode;\n\n  /**\n   * Constructs a new InputMediaDeviceManagerState instance.\n   *\n   * @param disableMode the disable mode to use.\n   * @param permission the BrowserPermission to use for querying.\n   * `undefined` means no permission is required.\n   */\n  constructor(\n    disableMode: TrackDisableMode,\n    permission: BrowserPermission | undefined,\n  ) {\n    this.disableMode = disableMode;\n    this.hasBrowserPermission$ = permission\n      ? permission.asObservable().pipe(shareReplay(1))\n      : of(true);\n\n    this.browserPermissionState$ = permission\n      ? permission.asStateObservable().pipe(shareReplay(1))\n      : of('prompt');\n\n    this.isPromptingPermission$ = permission\n      ? permission.getIsPromptingObservable().pipe(shareReplay(1))\n      : of(false);\n  }\n\n  /**\n   * The device status\n   */\n  get status() {\n    return RxUtils.getCurrentValue(this.status$);\n  }\n\n  /**\n   * The requested device status. Useful for optimistic UIs\n   */\n  get optimisticStatus() {\n    return RxUtils.getCurrentValue(this.optimisticStatus$);\n  }\n\n  /**\n   * The currently selected device\n   */\n  get selectedDevice() {\n    return RxUtils.getCurrentValue(this.selectedDevice$);\n  }\n\n  /**\n   * The current media stream, or `undefined` if the device is currently disabled.\n   */\n  get mediaStream() {\n    return RxUtils.getCurrentValue(this.mediaStream$);\n  }\n\n  /**\n   * @internal\n   * @param status\n   */\n  setStatus(status: InputDeviceStatus) {\n    RxUtils.setCurrentValue(this.statusSubject, status);\n  }\n\n  /**\n   * @internal\n   * @param pendingStatus\n   */\n  setPendingStatus(pendingStatus: InputDeviceStatus) {\n    RxUtils.setCurrentValue(this.optimisticStatusSubject, pendingStatus);\n  }\n\n  /**\n   * Updates the `mediaStream` state variable.\n   *\n   * @internal\n   * @param stream the stream to set.\n   * @param rootStream the root stream, applicable when filters are used\n   * as this is the stream that holds the actual deviceId information.\n   */\n  setMediaStream(\n    stream: MediaStream | undefined,\n    rootStream: MediaStream | undefined,\n  ) {\n    RxUtils.setCurrentValue(this.mediaStreamSubject, stream);\n    if (rootStream) {\n      this.setDevice(this.getDeviceIdFromStream(rootStream));\n    }\n  }\n\n  /**\n   * @internal\n   * @param deviceId the device id to set.\n   */\n  setDevice(deviceId: string | undefined) {\n    RxUtils.setCurrentValue(this.selectedDeviceSubject, deviceId);\n  }\n\n  /**\n   * Gets the default constraints for the device.\n   */\n  get defaultConstraints() {\n    return RxUtils.getCurrentValue(this.defaultConstraints$);\n  }\n\n  /**\n   * Sets the default constraints for the device.\n   *\n   * @internal\n   * @param constraints the constraints to set.\n   */\n  setDefaultConstraints(constraints: C | undefined) {\n    RxUtils.setCurrentValue(this.defaultConstraintsSubject, constraints);\n  }\n\n  protected abstract getDeviceIdFromStream(\n    stream: MediaStream,\n  ): string | undefined;\n}\n", "import { BehaviorSubject, distinctUntilChanged } from 'rxjs';\nimport { DeviceManagerState } from './DeviceManagerState';\nimport { isReactNative } from '../helpers/platforms';\nimport { getVideoBrowserPermission } from './devices';\nimport { RxUtils } from '../store';\n\nexport type CameraDirection = 'front' | 'back' | undefined;\n\nexport class CameraManagerState extends DeviceManagerState {\n  private directionSubject = new BehaviorSubject<CameraDirection>(undefined);\n\n  /**\n   * Observable that emits the preferred camera direction\n   * front - means the camera facing the user\n   * back - means the camera facing the environment\n   */\n  direction$ = this.directionSubject\n    .asObservable()\n    .pipe(distinctUntilChanged());\n\n  constructor() {\n    super('stop-tracks', getVideoBrowserPermission());\n  }\n\n  /**\n   * The preferred camera direction\n   * front - means the camera facing the user\n   * back - means the camera facing the environment\n   */\n  get direction() {\n    return RxUtils.getCurrentValue(this.direction$);\n  }\n\n  /**\n   * @internal\n   */\n  setDirection(direction: CameraDirection) {\n    RxUtils.setCurrentValue(this.directionSubject, direction);\n  }\n\n  /**\n   * @internal\n   */\n  override setMediaStream(\n    stream: MediaStream | undefined,\n    rootStream: MediaStream | undefined,\n  ): void {\n    super.setMediaStream(stream, rootStream);\n    if (stream) {\n      // RN getSettings() doesn't return facingMode, so we don't verify camera direction\n      const direction = isReactNative()\n        ? this.direction\n        : stream.getVideoTracks()[0]?.getSettings().facingMode === 'environment'\n          ? 'back'\n          : 'front';\n      this.setDirection(direction);\n    }\n  }\n\n  protected override getDeviceIdFromStream(\n    stream: MediaStream,\n  ): string | undefined {\n    const [track] = stream.getVideoTracks();\n    return track?.getSettings().deviceId;\n  }\n}\n", "import { Observable } from 'rxjs';\nimport { Call } from '../Call';\nimport { CameraDirection, CameraManagerState } from './CameraManagerState';\nimport { DeviceManager } from './DeviceManager';\nimport { getVideoDevices, getVideoStream } from './devices';\nimport { OwnCapability, VideoSettingsResponse } from '../gen/coordinator';\nimport { TrackType } from '../gen/video/sfu/models/models';\nimport { isMobile } from '../helpers/compatibility';\nimport { isReactNative } from '../helpers/platforms';\n\nexport class CameraManager extends DeviceManager<CameraManagerState> {\n  private targetResolution = {\n    width: 1280,\n    height: 720,\n  };\n\n  /**\n   * Constructs a new CameraManager.\n   *\n   * @param call the call instance.\n   */\n  constructor(call: Call) {\n    super(call, new CameraManagerState(), TrackType.VIDEO);\n  }\n\n  private isDirectionSupportedByDevice() {\n    return isReactNative() || isMobile();\n  }\n\n  /**\n   * Select the camera direction.\n   *\n   * @param direction the direction of the camera to select.\n   */\n  async selectDirection(direction: Exclude<CameraDirection, undefined>) {\n    if (!this.isDirectionSupportedByDevice()) {\n      this.logger.warn('Setting direction is not supported on this device');\n      return;\n    }\n\n    if (isReactNative()) {\n      const videoTrack = this.getTracks()[0] as MediaStreamTrack | undefined;\n      await videoTrack?.applyConstraints({\n        facingMode: direction === 'front' ? 'user' : 'environment',\n      });\n    }\n    // providing both device id and direction doesn't work, so we deselect the device\n    this.state.setDirection(direction);\n    this.state.setDevice(undefined);\n    if (isReactNative()) {\n      return;\n    }\n    this.getTracks().forEach((track) => track.stop());\n    try {\n      await this.unmuteStream();\n    } catch (error) {\n      if (error instanceof Error && error.name === 'NotReadableError') {\n        // the camera is already in use, and the device can't use it unless it's released.\n        // in that case, we need to stop the stream and start it again.\n        await this.muteStream();\n        await this.unmuteStream();\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * Flips the camera direction: if it's front it will change to back, if it's back, it will change to front.\n   *\n   * Note: if there is no available camera with the desired direction, this method will do nothing.\n   * @returns\n   */\n  async flip() {\n    const newDirection = this.state.direction === 'front' ? 'back' : 'front';\n    await this.selectDirection(newDirection);\n  }\n\n  /**\n   * @internal\n   */\n  async selectTargetResolution(resolution: { width: number; height: number }) {\n    this.targetResolution.height = resolution.height;\n    this.targetResolution.width = resolution.width;\n    if (this.state.optimisticStatus === 'enabled') {\n      try {\n        await this.statusChangeSettled();\n      } catch (error) {\n        // couldn't enable device, target resolution will be applied the next time user attempts to start the device\n        this.logger.warn('could not apply target resolution', error);\n      }\n    }\n    if (this.enabled && this.state.mediaStream) {\n      const [videoTrack] = this.state.mediaStream.getVideoTracks();\n      if (!videoTrack) return;\n      const { width, height } = videoTrack.getSettings();\n      if (\n        width !== this.targetResolution.width ||\n        height !== this.targetResolution.height\n      ) {\n        await this.applySettingsToStream();\n        this.logger.debug(\n          `${width}x${height} target resolution applied to media stream`,\n        );\n      }\n    }\n  }\n\n  /**\n   * Applies the video settings to the camera.\n   *\n   * @param settings the video settings to apply.\n   * @param publish whether to publish the stream after applying the settings.\n   */\n  async apply(settings: VideoSettingsResponse, publish: boolean) {\n    const hasPublishedVideo = !!this.call.state.localParticipant?.videoStream;\n    const hasPermission = this.call.permissionsContext.hasPermission(\n      OwnCapability.SEND_AUDIO,\n    );\n    if (hasPublishedVideo || !hasPermission) return;\n\n    // Wait for any in progress camera operation\n    await this.statusChangeSettled();\n\n    const { target_resolution, camera_facing, camera_default_on, enabled } =\n      settings;\n    // normalize target resolution to landscape format.\n    // on mobile devices, the device itself adjusts the resolution to portrait or landscape\n    // depending on the orientation of the device. using portrait resolution\n    // will result in falling back to the default resolution (640x480).\n    let { width, height } = target_resolution;\n    if (width < height) [width, height] = [height, width];\n    await this.selectTargetResolution({ width, height });\n\n    // Set camera direction if it's not yet set\n    if (!this.state.direction && !this.state.selectedDevice) {\n      this.state.setDirection(camera_facing === 'front' ? 'front' : 'back');\n    }\n\n    if (!publish) return;\n\n    const { mediaStream } = this.state;\n    if (this.enabled && mediaStream) {\n      // The camera is already enabled (e.g. lobby screen). Publish the stream\n      await this.publishStream(mediaStream);\n    } else if (\n      this.state.status === undefined &&\n      camera_default_on &&\n      enabled\n    ) {\n      // Start camera if backend config specifies, and there is no local setting\n      await this.enable();\n    }\n  }\n\n  protected override getDevices(): Observable<MediaDeviceInfo[]> {\n    return getVideoDevices(this.call.tracer);\n  }\n\n  protected override getStream(\n    constraints: MediaTrackConstraints,\n  ): Promise<MediaStream> {\n    constraints.width = this.targetResolution.width;\n    constraints.height = this.targetResolution.height;\n    // We can't set both device id and facing mode\n    // Device id has higher priority\n\n    if (\n      !constraints.deviceId &&\n      this.state.direction &&\n      this.isDirectionSupportedByDevice()\n    ) {\n      constraints.facingMode =\n        this.state.direction === 'front' ? 'user' : 'environment';\n    }\n    return getVideoStream(constraints, this.call.tracer);\n  }\n}\n", "import { DeviceManager } from './DeviceManager';\nimport { AudioDeviceManagerState } from './AudioDeviceManagerState';\nimport { AudioBitrateProfile } from '../gen/video/sfu/models/models';\nimport { TrackPublishOptions } from '../rtc';\n\n/**\n * Base class for High Fidelity enabled Device Managers.\n */\nexport abstract class AudioDeviceManager<\n  S extends AudioDeviceManagerState<C>,\n  C = MediaTrackConstraints,\n> extends DeviceManager<S, C> {\n  /**\n   * Sets the audio bitrate profile and stereo mode.\n   */\n  async setAudioBitrateProfile(profile: AudioBitrateProfile) {\n    if (!this.call.state.settings?.audio.hifi_audio_enabled) {\n      throw new Error('High Fidelity audio is not enabled for this call');\n    }\n    this.doSetAudioBitrateProfile(profile);\n    this.state.setAudioBitrateProfile(profile);\n    if (this.enabled) {\n      await this.applySettingsToStream();\n    }\n  }\n\n  /**\n   * Overrides the default `publishStream` method to inject the audio bitrate profile.\n   */\n  protected override publishStream(\n    stream: MediaStream,\n    options?: TrackPublishOptions,\n  ): Promise<void> {\n    return super.publishStream(stream, {\n      audioBitrateProfile: this.state.audioBitrateProfile,\n      ...options,\n    });\n  }\n\n  /**\n   * Applies Device Manager's specific audio profile settings.\n   */\n  protected abstract doSetAudioBitrateProfile(\n    profile: AudioBitrateProfile,\n  ): void;\n}\n\n/**\n * Prepares a new MediaTrackConstraints set based on the provided arguments.\n */\nexport const createAudioConstraints = (\n  profile: AudioBitrateProfile,\n): MediaTrackConstraints => {\n  const stereo = profile === AudioBitrateProfile.MUSIC_HIGH_QUALITY;\n  return {\n    echoCancellation: !stereo,\n    noiseSuppression: !stereo,\n    autoGainControl: !stereo,\n    channelCount: { ideal: stereo ? 2 : 1 },\n  };\n};\n", "import { BehaviorSubject, distinctUntilChanged, Observable } from 'rxjs';\nimport { AudioBitrateProfile } from '../gen/video/sfu/models/models';\nimport { DeviceManagerState, TrackDisableMode } from './DeviceManagerState';\nimport { RxUtils } from './../store';\nimport { BrowserPermission } from './BrowserPermission';\n\n/**\n * Base state class for High Fidelity enabled device managers.\n */\nexport abstract class AudioDeviceManagerState<C> extends DeviceManagerState<C> {\n  private readonly audioBitrateProfileSubject: BehaviorSubject<AudioBitrateProfile>;\n\n  /** An Observable that emits the current audio bitrate profile. */\n  audioBitrateProfile$: Observable<AudioBitrateProfile>;\n\n  /**\n   * Constructs a new AudioDeviceManagerState instance.\n   */\n  protected constructor(\n    disableMode: TrackDisableMode,\n    permission: BrowserPermission | undefined,\n    profile: AudioBitrateProfile,\n  ) {\n    super(disableMode, permission);\n    this.audioBitrateProfileSubject = new BehaviorSubject(profile);\n    this.audioBitrateProfile$ = this.audioBitrateProfileSubject\n      .asObservable()\n      .pipe(distinctUntilChanged());\n  }\n\n  /**\n   * Returns the current audio bitrate profile.\n   */\n  get audioBitrateProfile() {\n    return RxUtils.getCurrentValue(this.audioBitrateProfile$);\n  }\n\n  /**\n   * Sets the audio bitrate profile and stereo mode.\n   */\n  setAudioBitrateProfile(profile: AudioBitrateProfile) {\n    RxUtils.setCurrentValue(this.audioBitrateProfileSubject, profile);\n  }\n}\n", "import { BehaviorSubject, distinctUntilChanged } from 'rxjs';\nimport { RxUtils } from '../store';\nimport { TrackDisableMode } from './DeviceManagerState';\nimport { AudioDeviceManagerState } from './AudioDeviceManagerState';\nimport { getAudioBrowserPermission, resolveDeviceId } from './devices';\nimport { AudioBitrateProfile } from '../gen/video/sfu/models/models';\n\nexport class MicrophoneManagerState extends AudioDeviceManagerState<MediaTrackConstraints> {\n  private speakingWhileMutedSubject = new BehaviorSubject<boolean>(false);\n\n  /**\n   * An Observable that emits `true` if the user's microphone is muted, but they're speaking.\n   */\n  speakingWhileMuted$ = this.speakingWhileMutedSubject\n    .asObservable()\n    .pipe(distinctUntilChanged());\n\n  constructor(disableMode: TrackDisableMode) {\n    super(\n      disableMode,\n      getAudioBrowserPermission(),\n      AudioBitrateProfile.VOICE_STANDARD_UNSPECIFIED,\n    );\n  }\n\n  /**\n   * `true` if the user's microphone is muted but they're speaking.\n   */\n  get speakingWhileMuted() {\n    return RxUtils.getCurrentValue(this.speakingWhileMuted$);\n  }\n\n  /**\n   * @internal\n   */\n  setSpeakingWhileMuted(isSpeaking: boolean) {\n    RxUtils.setCurrentValue(this.speakingWhileMutedSubject, isSpeaking);\n  }\n\n  protected override getDeviceIdFromStream(\n    stream: MediaStream,\n  ): string | undefined {\n    const [track] = stream.getAudioTracks();\n    const unresolvedDeviceId = track?.getSettings().deviceId;\n    return resolveDeviceId(unresolvedDeviceId, 'audioinput');\n  }\n}\n", "export type SoundDetectorOptions = {\n  /**\n   * Defines how often the detector should check whether a sound is present.\n   * Defaults to 500ms.\n   */\n  detectionFrequencyInMs?: number;\n\n  /**\n   * Defines the audio level threshold before a \"change\" is emitted.\n   * Defaults to 150. This value should be in the range of 0-255.\n   */\n  audioLevelThreshold?: number;\n\n  /**\n   * See https://developer.mozilla.org/en-US/docs/web/api/analysernode/fftsize\n   *\n   * Defaults to 128.\n   */\n  fftSize?: number;\n\n  /**\n   * Defines whether the provided audio stream should be stopped (destroyed)\n   * when the sound detector is stopped.\n   *\n   * Defaults to `true`.\n   */\n  destroyStreamOnStop?: boolean;\n};\n\nexport type SoundDetectorState = {\n  isSoundDetected: boolean;\n  /**\n   * Represented as percentage (0-100) where 100% is defined by `audioLevelThreshold` property.\n   * Decrease time between samples (to 50-100ms) with `detectionFrequencyInMs` property.\n   */\n  audioLevel: number;\n};\n\nexport type SoundStateChangeHandler = (state: SoundDetectorState) => void;\n\nconst DETECTION_FREQUENCY_IN_MS = 500;\nconst AUDIO_LEVEL_THRESHOLD = 150;\nconst FFT_SIZE = 128;\n\n/**\n * Creates a new sound detector.\n *\n * @param audioStream the audio stream to observe. Depending on the provided configuration, this stream might be destroyed when the sound detector is stopped.\n * @param onSoundDetectedStateChanged a callback which is called when the sound state changes.\n * @param options custom options for the sound detector.\n * @returns a clean-up function which once invoked stops the sound detector.\n */\nexport const createSoundDetector = (\n  audioStream: MediaStream,\n  onSoundDetectedStateChanged: SoundStateChangeHandler,\n  options: SoundDetectorOptions = {},\n) => {\n  const {\n    detectionFrequencyInMs = DETECTION_FREQUENCY_IN_MS,\n    audioLevelThreshold = AUDIO_LEVEL_THRESHOLD,\n    fftSize = FFT_SIZE,\n    destroyStreamOnStop = true,\n  } = options;\n\n  const audioContext = new AudioContext();\n  const analyser = audioContext.createAnalyser();\n  analyser.fftSize = fftSize;\n\n  const microphone = audioContext.createMediaStreamSource(audioStream);\n  microphone.connect(analyser);\n\n  const intervalId = setInterval(() => {\n    const data = new Uint8Array(analyser.frequencyBinCount);\n    analyser.getByteFrequencyData(data);\n\n    const isSoundDetected = data.some((value) => value >= audioLevelThreshold);\n\n    const averagedDataValue = data.reduce((pv, cv) => pv + cv, 0) / data.length;\n\n    const percentage =\n      averagedDataValue > audioLevelThreshold\n        ? 100\n        : Math.round((averagedDataValue / audioLevelThreshold) * 100);\n\n    // When the track is disabled, it takes time for the buffer to empty\n    // This check will ensure that we don't send anything if the track is disabled\n    if (audioStream.getAudioTracks()[0]?.enabled) {\n      onSoundDetectedStateChanged({ isSoundDetected, audioLevel: percentage });\n    } else {\n      onSoundDetectedStateChanged({ isSoundDetected: false, audioLevel: 0 });\n    }\n  }, detectionFrequencyInMs);\n\n  return async function stop() {\n    clearInterval(intervalId);\n\n    // clean-up the AudioContext elements\n    microphone.disconnect();\n    analyser.disconnect();\n    if (audioContext.state !== 'closed') {\n      await audioContext.close();\n    }\n\n    // stop the stream\n    if (destroyStreamOnStop) {\n      audioStream.getTracks().forEach((track) => {\n        track.stop();\n        audioStream.removeTrack(track);\n      });\n    }\n  };\n};\n", "import { BaseStats } from '../stats';\nimport { SoundStateChangeHandler } from './sound-detector';\nimport { flatten } from '../stats/utils';\nimport { videoLoggerSystem } from '../logger';\n\nexport class RNSpeechDetector {\n  private pc1 = new RTCPeerConnection({});\n  private pc2 = new RTCPeerConnection({});\n  private audioStream: MediaStream | undefined;\n  private externalAudioStream: MediaStream | undefined;\n\n  constructor(externalAudioStream?: MediaStream) {\n    this.externalAudioStream = externalAudioStream;\n  }\n\n  /**\n   * Starts the speech detection.\n   */\n  public async start(onSoundDetectedStateChanged: SoundStateChangeHandler) {\n    try {\n      let audioStream: MediaStream;\n      if (this.externalAudioStream != null) {\n        audioStream = this.externalAudioStream;\n      } else {\n        audioStream = await navigator.mediaDevices.getUserMedia({\n          audio: true,\n        });\n        this.audioStream = audioStream;\n      }\n\n      this.pc1.addEventListener('icecandidate', async (e) => {\n        await this.pc2.addIceCandidate(\n          e.candidate as RTCIceCandidateInit | undefined,\n        );\n      });\n      this.pc2.addEventListener('icecandidate', async (e) => {\n        await this.pc1.addIceCandidate(\n          e.candidate as RTCIceCandidateInit | undefined,\n        );\n      });\n      this.pc2.addEventListener('track', (e) => {\n        e.streams[0].getTracks().forEach((track) => {\n          // In RN, the remote track is automatically added to the audio output device\n          // so we need to mute it to avoid hearing the audio back\n          // @ts-expect-error _setVolume is a private method in react-native-webrtc\n          track._setVolume(0);\n        });\n      });\n\n      audioStream\n        .getTracks()\n        .forEach((track) => this.pc1.addTrack(track, audioStream));\n      const offer = await this.pc1.createOffer({});\n      await this.pc2.setRemoteDescription(offer);\n      await this.pc1.setLocalDescription(offer);\n      const answer = await this.pc2.createAnswer();\n      await this.pc1.setRemoteDescription(answer);\n      await this.pc2.setLocalDescription(answer);\n      const unsub = this.onSpeakingDetectedStateChange(\n        onSoundDetectedStateChanged,\n      );\n      return () => {\n        unsub();\n        this.stop();\n      };\n    } catch (error) {\n      const logger = videoLoggerSystem.getLogger('RNSpeechDetector');\n      logger.error('error handling permissions: ', error);\n      return () => {};\n    }\n  }\n\n  /**\n   * Stops the speech detection and releases all allocated resources.\n   */\n  private stop() {\n    this.pc1.close();\n    this.pc2.close();\n\n    if (this.externalAudioStream != null) {\n      this.externalAudioStream = undefined;\n    } else {\n      this.cleanupAudioStream();\n    }\n  }\n\n  /**\n   * Public method that detects the audio levels and returns the status.\n   */\n  private onSpeakingDetectedStateChange(\n    onSoundDetectedStateChanged: SoundStateChangeHandler,\n  ) {\n    const initialBaselineNoiseLevel = 0.13;\n    let baselineNoiseLevel = initialBaselineNoiseLevel;\n    let speechDetected = false;\n    let speechTimer: NodeJS.Timeout | undefined;\n    let silenceTimer: NodeJS.Timeout | undefined;\n    const audioLevelHistory: number[] = []; // Store recent audio levels for smoother detection\n    const historyLength = 10;\n    const silenceThreshold = 1.1;\n    const resetThreshold = 0.9;\n    const speechTimeout = 500; // Speech is set to true after 500ms of audio detection\n    const silenceTimeout = 5000; // Reset baseline after 5 seconds of silence\n\n    const checkAudioLevel = async () => {\n      try {\n        const stats = (await this.pc1.getStats()) as RTCStatsReport;\n        const report = flatten(stats);\n        // Audio levels are present inside stats of type `media-source` and of kind `audio`\n        const audioMediaSourceStats = report.find(\n          (stat) =>\n            stat.type === 'media-source' &&\n            (stat as RTCRtpStreamStats).kind === 'audio',\n        ) as BaseStats;\n        if (audioMediaSourceStats) {\n          const { audioLevel } = audioMediaSourceStats;\n          if (audioLevel) {\n            // Update audio level history (with max historyLength sized array)\n            audioLevelHistory.push(audioLevel);\n            if (audioLevelHistory.length > historyLength) {\n              audioLevelHistory.shift();\n            }\n\n            // Calculate average audio level\n            const avgAudioLevel =\n              audioLevelHistory.reduce((a, b) => a + b, 0) /\n              audioLevelHistory.length;\n\n            // Update baseline (if necessary) based on silence detection\n            if (avgAudioLevel < baselineNoiseLevel * silenceThreshold) {\n              if (!silenceTimer) {\n                silenceTimer = setTimeout(() => {\n                  baselineNoiseLevel = Math.min(\n                    avgAudioLevel * resetThreshold,\n                    initialBaselineNoiseLevel,\n                  );\n                }, silenceTimeout);\n              }\n            } else {\n              clearTimeout(silenceTimer);\n              silenceTimer = undefined;\n            }\n\n            // Speech detection with hysteresis\n            if (avgAudioLevel > baselineNoiseLevel * 1.5) {\n              if (!speechDetected) {\n                speechDetected = true;\n                onSoundDetectedStateChanged({\n                  isSoundDetected: true,\n                  audioLevel,\n                });\n              }\n\n              clearTimeout(speechTimer);\n\n              speechTimer = setTimeout(() => {\n                speechDetected = false;\n                onSoundDetectedStateChanged({\n                  isSoundDetected: false,\n                  audioLevel: 0,\n                });\n              }, speechTimeout);\n            }\n          }\n        }\n      } catch (error) {\n        const logger = videoLoggerSystem.getLogger('RNSpeechDetector');\n        logger.error('error checking audio level from stats', error);\n      }\n    };\n\n    // Call checkAudioLevel periodically (every 100ms)\n    const intervalId = setInterval(checkAudioLevel, 100);\n\n    return () => {\n      clearInterval(intervalId);\n      clearTimeout(speechTimer);\n      clearTimeout(silenceTimer);\n    };\n  }\n\n  private cleanupAudioStream() {\n    if (!this.audioStream) {\n      return;\n    }\n    this.audioStream.getTracks().forEach((track) => track.stop());\n    if (\n      // @ts-expect-error release() is present in react-native-webrtc\n      typeof this.audioStream.release === 'function'\n    ) {\n      // @ts-expect-error called to dispose the stream in RN\n      this.audioStream.release();\n    }\n  }\n}\n", "import { combineLatest, Observable } from 'rxjs';\nimport type { INoiseCancellation } from '@stream-io/audio-filters-web';\nimport { Call } from '../Call';\nimport {\n  AudioDeviceManager,\n  createAudioConstraints,\n} from './AudioDeviceManager';\nimport { MicrophoneManagerState } from './MicrophoneManagerState';\nimport { TrackDisableMode } from './DeviceManagerState';\nimport { getAudioDevices, getAudioStream } from './devices';\nimport { AudioBitrateProfile, TrackType } from '../gen/video/sfu/models/models';\nimport { createSoundDetector } from '../helpers/sound-detector';\nimport { isReactNative } from '../helpers/platforms';\nimport {\n  AudioSettingsResponse,\n  NoiseCancellationSettingsModeEnum,\n  OwnCapability,\n} from '../gen/coordinator';\nimport { CallingState } from '../store';\nimport {\n  createSafeAsyncSubscription,\n  createSubscription,\n} from '../store/rxUtils';\nimport { RNSpeechDetector } from '../helpers/RNSpeechDetector';\nimport { withoutConcurrency } from '../helpers/concurrency';\n\nexport class MicrophoneManager extends AudioDeviceManager<MicrophoneManagerState> {\n  private speakingWhileMutedNotificationEnabled = true;\n  private soundDetectorConcurrencyTag = Symbol('soundDetectorConcurrencyTag');\n  private soundDetectorCleanup?: Function;\n  private rnSpeechDetector: RNSpeechDetector | undefined;\n  private noiseCancellation: INoiseCancellation | undefined;\n  private noiseCancellationChangeUnsubscribe: (() => void) | undefined;\n  private noiseCancellationRegistration?: Promise<void>;\n  private unregisterNoiseCancellation?: () => Promise<void>;\n\n  constructor(call: Call, disableMode: TrackDisableMode = 'stop-tracks') {\n    super(call, new MicrophoneManagerState(disableMode), TrackType.AUDIO);\n  }\n\n  override setup(): void {\n    super.setup();\n    this.subscriptions.push(\n      createSafeAsyncSubscription(\n        combineLatest([\n          this.call.state.callingState$,\n          this.call.state.ownCapabilities$,\n          this.state.selectedDevice$,\n          this.state.status$,\n        ]),\n        async ([callingState, ownCapabilities, deviceId, status]) => {\n          try {\n            if (callingState === CallingState.LEFT) {\n              await this.stopSpeakingWhileMutedDetection();\n            }\n            if (callingState !== CallingState.JOINED) return;\n            if (!this.speakingWhileMutedNotificationEnabled) return;\n\n            if (ownCapabilities.includes(OwnCapability.SEND_AUDIO)) {\n              if (status === 'disabled') {\n                await this.startSpeakingWhileMutedDetection(deviceId);\n              } else {\n                await this.stopSpeakingWhileMutedDetection();\n              }\n            } else {\n              await this.stopSpeakingWhileMutedDetection();\n            }\n          } catch (err) {\n            this.logger.warn('Could not enable speaking while muted', err);\n          }\n        },\n      ),\n    );\n\n    this.subscriptions.push(\n      createSubscription(this.call.state.callingState$, (callingState) => {\n        // do nothing when noise filtering isn't turned on\n        if (!this.noiseCancellationRegistration || !this.noiseCancellation)\n          return;\n\n        const autoOn =\n          this.call.state.settings?.audio.noise_cancellation?.mode ===\n          NoiseCancellationSettingsModeEnum.AUTO_ON;\n\n        if (autoOn && callingState === CallingState.JOINED) {\n          this.noiseCancellationRegistration\n            .then(() => {\n              if (this.noiseCancellation?.canAutoEnable) {\n                return this.noiseCancellation.canAutoEnable();\n              }\n              return true;\n            })\n            .then((canAutoEnable) => {\n              if (canAutoEnable) {\n                this.noiseCancellation?.enable().catch((err) => {\n                  this.logger.warn('Failed to enable noise cancellation', err);\n                });\n              }\n            })\n            .catch((err) => {\n              this.logger.warn(`Failed to enable noise cancellation`, err);\n              return this.call.notifyNoiseCancellationStopped();\n            });\n        } else if (callingState === CallingState.LEFT) {\n          this.noiseCancellationRegistration\n            .then(() => this.noiseCancellation?.disable())\n            .catch((err) => {\n              this.logger.warn(`Failed to disable noise cancellation`, err);\n            });\n        }\n      }),\n    );\n  }\n\n  /**\n   * Enables noise cancellation for the microphone.\n   *\n   * @param noiseCancellation - a noise cancellation instance to use.\n   */\n  async enableNoiseCancellation(noiseCancellation: INoiseCancellation) {\n    const { ownCapabilities, settings } = this.call.state;\n    const hasNoiseCancellationCapability = ownCapabilities.includes(\n      OwnCapability.ENABLE_NOISE_CANCELLATION,\n    );\n    if (!hasNoiseCancellationCapability) {\n      throw new Error('Noise cancellation is not available.');\n    }\n    const noiseCancellationSettings = settings?.audio.noise_cancellation;\n    if (\n      !noiseCancellationSettings ||\n      noiseCancellationSettings.mode ===\n        NoiseCancellationSettingsModeEnum.DISABLED\n    ) {\n      throw new Error('Noise cancellation is disabled for this call type.');\n    }\n    try {\n      this.noiseCancellation = noiseCancellation;\n\n      // listen for change events and notify the SFU\n      this.noiseCancellationChangeUnsubscribe = this.noiseCancellation.on(\n        'change',\n        (enabled: boolean) => {\n          this.call.tracer.trace('noiseCancellation.enabled', enabled);\n          if (enabled) {\n            this.call.notifyNoiseCancellationStarting().catch((err) => {\n              this.logger.warn(`notifyNoiseCancellationStart failed`, err);\n            });\n          } else {\n            this.call.notifyNoiseCancellationStopped().catch((err) => {\n              this.logger.warn(`notifyNoiseCancellationStop failed`, err);\n            });\n          }\n        },\n      );\n\n      if (isReactNative()) {\n        // no filter registration in React Native, its done in the native code on app init\n        this.noiseCancellationRegistration = Promise.resolve();\n      } else {\n        const registrationResult = this.registerFilter(\n          noiseCancellation.toFilter(),\n        );\n        this.noiseCancellationRegistration = registrationResult.registered;\n        this.unregisterNoiseCancellation = registrationResult.unregister;\n        await this.noiseCancellationRegistration;\n      }\n\n      // handles an edge case where a noise cancellation is enabled after\n      // the participant as joined the call -> we immediately enable NC\n      if (\n        noiseCancellationSettings.mode ===\n          NoiseCancellationSettingsModeEnum.AUTO_ON &&\n        this.call.state.callingState === CallingState.JOINED\n      ) {\n        let canAutoEnable = true;\n        if (noiseCancellation.canAutoEnable) {\n          canAutoEnable = await noiseCancellation.canAutoEnable();\n        }\n        if (canAutoEnable) {\n          noiseCancellation.enable().catch((err) => {\n            this.logger.warn('Failed to enable noise cancellation', err);\n          });\n        }\n      }\n    } catch (e) {\n      this.logger.warn('Failed to enable noise cancellation', e);\n      await this.disableNoiseCancellation().catch((err) => {\n        this.logger.warn('Failed to disable noise cancellation', err);\n      });\n      throw e;\n    }\n  }\n\n  /**\n   * Disables noise cancellation for the microphone.\n   */\n  async disableNoiseCancellation() {\n    await (this.unregisterNoiseCancellation?.() ?? Promise.resolve())\n      .then(() => this.noiseCancellation?.disable())\n      .then(() => this.noiseCancellationChangeUnsubscribe?.())\n      .catch((err) => {\n        this.logger.warn('Failed to unregister noise cancellation', err);\n      });\n\n    this.call.tracer.trace('noiseCancellation.disabled', true);\n    await this.call.notifyNoiseCancellationStopped();\n  }\n\n  /**\n   * Enables speaking while muted notification.\n   */\n  async enableSpeakingWhileMutedNotification() {\n    this.speakingWhileMutedNotificationEnabled = true;\n    if (this.state.status === 'disabled') {\n      await this.startSpeakingWhileMutedDetection(this.state.selectedDevice);\n    }\n  }\n\n  /**\n   * Disables speaking while muted notification.\n   */\n  async disableSpeakingWhileMutedNotification() {\n    this.speakingWhileMutedNotificationEnabled = false;\n    await this.stopSpeakingWhileMutedDetection();\n  }\n\n  /**\n   * Applies the audio settings to the microphone.\n   * @param settings the audio settings to apply.\n   * @param publish whether to publish the stream after applying the settings.\n   */\n  async apply(settings: AudioSettingsResponse, publish: boolean) {\n    if (!publish) return;\n\n    const hasPublishedAudio = !!this.call.state.localParticipant?.audioStream;\n    const hasPermission = this.call.permissionsContext.hasPermission(\n      OwnCapability.SEND_AUDIO,\n    );\n    if (hasPublishedAudio || !hasPermission) return;\n\n    // Wait for any in progress mic operation\n    await this.statusChangeSettled();\n\n    // Publish media stream that was set before we joined\n    const { mediaStream } = this.state;\n    if (this.enabled && mediaStream) {\n      // The mic is already enabled (e.g. lobby screen). Publish the stream\n      await this.publishStream(mediaStream);\n    } else if (this.state.status === undefined && settings.mic_default_on) {\n      // Start mic if backend config specifies, and there is no local setting\n      await this.enable();\n    }\n  }\n\n  protected override getDevices(): Observable<MediaDeviceInfo[]> {\n    return getAudioDevices(this.call.tracer);\n  }\n\n  protected override getStream(\n    constraints: MediaTrackConstraints,\n  ): Promise<MediaStream> {\n    return getAudioStream(constraints, this.call.tracer);\n  }\n\n  protected override doSetAudioBitrateProfile(profile: AudioBitrateProfile) {\n    this.setDefaultConstraints({\n      ...this.state.defaultConstraints,\n      ...createAudioConstraints(profile),\n    });\n\n    if (this.noiseCancellation) {\n      const disableAudioProcessing =\n        profile === AudioBitrateProfile.MUSIC_HIGH_QUALITY;\n      if (disableAudioProcessing) {\n        this.noiseCancellation.disable().catch((err) => {\n          this.logger.warn(\n            'Failed to disable noise cancellation for music mode',\n            err,\n          );\n        }); // disable for high quality music mode\n      } else {\n        this.noiseCancellation.enable().catch((err) => {\n          this.logger.warn('Failed to enable noise cancellation', err);\n        }); // restore it for other modes if available\n      }\n    }\n  }\n\n  private async startSpeakingWhileMutedDetection(deviceId?: string) {\n    await withoutConcurrency(this.soundDetectorConcurrencyTag, async () => {\n      await this.stopSpeakingWhileMutedDetection();\n      if (isReactNative()) {\n        this.rnSpeechDetector = new RNSpeechDetector();\n        const unsubscribe = await this.rnSpeechDetector.start((event) => {\n          this.state.setSpeakingWhileMuted(event.isSoundDetected);\n        });\n        this.soundDetectorCleanup = () => {\n          unsubscribe();\n          this.rnSpeechDetector = undefined;\n        };\n      } else {\n        // Need to start a new stream that's not connected to publisher\n        const stream = await this.getStream({\n          deviceId: { exact: deviceId },\n        });\n        this.soundDetectorCleanup = createSoundDetector(stream, (event) => {\n          this.state.setSpeakingWhileMuted(event.isSoundDetected);\n        });\n      }\n    });\n  }\n\n  private async stopSpeakingWhileMutedDetection() {\n    await withoutConcurrency(this.soundDetectorConcurrencyTag, async () => {\n      if (!this.soundDetectorCleanup) return;\n      const soundDetectorCleanup = this.soundDetectorCleanup;\n      this.soundDetectorCleanup = undefined;\n      this.state.setSpeakingWhileMuted(false);\n      await soundDetectorCleanup();\n    });\n  }\n}\n", "import { BehaviorSubject, distinctUntilChanged } from 'rxjs';\nimport { AudioDeviceManagerState } from './AudioDeviceManagerState';\nimport { AudioBitrateProfile } from '../gen/video/sfu/models/models';\nimport { ScreenShareSettings } from '../types';\nimport { RxUtils } from '../store';\n\nexport class ScreenShareState extends AudioDeviceManagerState<DisplayMediaStreamOptions> {\n  private audioEnabledSubject = new BehaviorSubject<boolean>(true);\n  private settingsSubject = new BehaviorSubject<\n    ScreenShareSettings | undefined\n  >(undefined);\n\n  /**\n   * An Observable that emits the current screen share audio status.\n   */\n  audioEnabled$ = this.audioEnabledSubject\n    .asObservable()\n    .pipe(distinctUntilChanged());\n\n  /**\n   * An Observable that emits the current screen share settings.\n   */\n  settings$ = this.settingsSubject.asObservable();\n\n  /**\n   * Constructs a new ScreenShareState instance.\n   */\n  constructor() {\n    super('stop-tracks', undefined, AudioBitrateProfile.MUSIC_HIGH_QUALITY);\n  }\n\n  /**\n   * @internal\n   */\n  protected override getDeviceIdFromStream = (\n    stream: MediaStream,\n  ): string | undefined => {\n    const [track] = stream.getTracks();\n    return track?.getSettings().deviceId;\n  };\n\n  /**\n   * The current screen share audio status.\n   */\n  get audioEnabled() {\n    return RxUtils.getCurrentValue(this.audioEnabled$);\n  }\n\n  /**\n   * Set the current screen share audio status.\n   */\n  setAudioEnabled(isEnabled: boolean) {\n    RxUtils.setCurrentValue(this.audioEnabledSubject, isEnabled);\n  }\n\n  /**\n   * The current screen share settings.\n   */\n  get settings() {\n    return RxUtils.getCurrentValue(this.settings$);\n  }\n\n  /**\n   * Set the current screen share settings.\n   *\n   * @param settings the screen share settings to set.\n   */\n  setSettings(settings: ScreenShareSettings | undefined) {\n    RxUtils.setCurrentValue(this.settingsSubject, settings);\n  }\n}\n", "import { Observable, of } from 'rxjs';\nimport {\n  AudioDeviceManager,\n  createAudioConstraints,\n} from './AudioDeviceManager';\nimport { ScreenShareState } from './ScreenShareState';\nimport { Call } from '../Call';\nimport { AudioBitrateProfile, TrackType } from '../gen/video/sfu/models/models';\nimport { getScreenShareStream } from './devices';\nimport { ScreenShareSettings } from '../types';\nimport { createSubscription } from '../store/rxUtils';\n\nexport class ScreenShareManager extends AudioDeviceManager<\n  ScreenShareState,\n  DisplayMediaStreamOptions\n> {\n  constructor(call: Call) {\n    super(call, new ScreenShareState(), TrackType.SCREEN_SHARE);\n  }\n\n  override setup(): void {\n    super.setup();\n    this.subscriptions.push(\n      createSubscription(this.call.state.settings$, (settings) => {\n        const maybeTargetResolution = settings?.screensharing.target_resolution;\n\n        if (maybeTargetResolution) {\n          this.setDefaultConstraints({\n            ...this.state.defaultConstraints,\n            video: {\n              width: maybeTargetResolution.width,\n              height: maybeTargetResolution.height,\n            },\n          });\n        }\n      }),\n    );\n  }\n\n  /**\n   * Will enable screen share audio options on supported platforms.\n   *\n   * Note: for ongoing screen share, audio won't be enabled until you\n   * re-publish the screen share stream.\n   */\n  enableScreenShareAudio(): void {\n    this.state.setAudioEnabled(true);\n  }\n\n  /**\n   * Will disable screen share audio options on supported platforms.\n   */\n  async disableScreenShareAudio(): Promise<void> {\n    this.state.setAudioEnabled(false);\n    if (this.call.publisher?.isPublishing(TrackType.SCREEN_SHARE_AUDIO)) {\n      await this.call.stopPublish(TrackType.SCREEN_SHARE_AUDIO);\n    }\n  }\n\n  /**\n   * Returns the current screen share settings.\n   */\n  getSettings(): ScreenShareSettings | undefined {\n    return this.state.settings;\n  }\n\n  /**\n   * Sets the current screen share settings.\n   *\n   * @param settings the settings to set.\n   */\n  setSettings(settings: ScreenShareSettings | undefined): void {\n    this.state.setSettings(settings);\n  }\n\n  protected getDevices(): Observable<MediaDeviceInfo[]> {\n    return of([]); // there are no devices to be listed for Screen Share\n  }\n\n  protected override async getStream(\n    constraints: DisplayMediaStreamOptions,\n  ): Promise<MediaStream> {\n    if (!this.state.audioEnabled) {\n      constraints.audio = false;\n    }\n    const stream = await getScreenShareStream(constraints, this.call.tracer);\n    const [track] = stream.getVideoTracks();\n    const { contentHint } = this.state.settings || {};\n    if (typeof contentHint !== 'undefined' && track && 'contentHint' in track) {\n      this.call.tracer.trace(\n        'navigator.mediaDevices.getDisplayMedia.contentHint',\n        contentHint,\n      );\n      track.contentHint = contentHint;\n    }\n    return stream;\n  }\n\n  protected override doSetAudioBitrateProfile(profile: AudioBitrateProfile) {\n    const { defaultConstraints } = this.state;\n    const baseAudioConstraints =\n      typeof defaultConstraints?.audio !== 'boolean'\n        ? defaultConstraints?.audio\n        : null;\n    this.setDefaultConstraints({\n      ...defaultConstraints,\n      audio: {\n        ...baseAudioConstraints,\n        ...createAudioConstraints(profile),\n      },\n    });\n  }\n\n  protected override async stopPublishStream(): Promise<void> {\n    return this.call.stopPublish(\n      TrackType.SCREEN_SHARE,\n      TrackType.SCREEN_SHARE_AUDIO,\n    );\n  }\n\n  /**\n   * Overrides the default `select` method to throw an error.\n   */\n  override async select(): Promise<void> {\n    throw new Error('Not supported');\n  }\n}\n", "import { BehaviorSubject, distinctUntilChanged } from 'rxjs';\nimport { RxUtils } from '../store';\nimport { checkIfAudioOutputChangeSupported } from './devices';\nimport { Tracer } from '../stats';\n\nexport class SpeakerState {\n  protected selectedDeviceSubject = new BehaviorSubject<string>('');\n  protected volumeSubject = new BehaviorSubject<number>(1);\n  /**\n   * [Tells if the browser supports audio output change on 'audio' elements](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/setSinkId).\n   */\n  readonly isDeviceSelectionSupported = checkIfAudioOutputChangeSupported();\n\n  /**\n   * An Observable that emits the currently selected device\n   *\n   * Note: this feature is not supported in React Native\n   */\n  selectedDevice$ = this.selectedDeviceSubject\n    .asObservable()\n    .pipe(distinctUntilChanged());\n\n  /**\n   * An Observable that emits the currently selected volume\n   *\n   * Note: this feature is not supported in React Native\n   */\n  volume$ = this.volumeSubject.asObservable().pipe(distinctUntilChanged());\n\n  constructor(private tracer: Tracer) {}\n\n  /**\n   * The currently selected device\n   *\n   * Note: this feature is not supported in React Native\n   */\n  get selectedDevice() {\n    return RxUtils.getCurrentValue(this.selectedDevice$);\n  }\n\n  /**\n   * The currently selected volume\n   *\n   * Note: this feature is not supported in React Native\n   */\n  get volume() {\n    return RxUtils.getCurrentValue(this.volume$);\n  }\n\n  /**\n   * @internal\n   * @param deviceId\n   */\n  setDevice(deviceId: string) {\n    RxUtils.setCurrentValue(this.selectedDeviceSubject, deviceId);\n    this.tracer.trace('navigator.mediaDevices.setSinkId', deviceId);\n  }\n\n  /**\n   * @internal\n   * @param volume\n   */\n  setVolume(volume: number) {\n    RxUtils.setCurrentValue(this.volumeSubject, volume);\n  }\n}\n", "import { combineLatest, Subscription } from 'rxjs';\nimport { Call } from '../Call';\nimport { isReactNative } from '../helpers/platforms';\nimport { SpeakerState } from './SpeakerState';\nimport { deviceIds$, getAudioOutputDevices } from './devices';\n\nexport class SpeakerManager {\n  readonly state: SpeakerState;\n  private subscriptions: Subscription[] = [];\n  private areSubscriptionsSetUp = false;\n  private readonly call: Call;\n\n  constructor(call: Call) {\n    this.call = call;\n    this.state = new SpeakerState(call.tracer);\n    this.setup();\n  }\n\n  setup() {\n    if (this.areSubscriptionsSetUp) {\n      return;\n    }\n\n    this.areSubscriptionsSetUp = true;\n\n    if (deviceIds$ && !isReactNative()) {\n      this.subscriptions.push(\n        combineLatest([deviceIds$!, this.state.selectedDevice$]).subscribe(\n          ([devices, deviceId]) => {\n            if (!deviceId) {\n              return;\n            }\n            const device = devices.find(\n              (d) => d.deviceId === deviceId && d.kind === 'audiooutput',\n            );\n            if (!device) {\n              this.select('');\n            }\n          },\n        ),\n      );\n    }\n  }\n\n  /**\n   * Lists the available audio output devices\n   *\n   * Note: It prompts the user for a permission to use devices (if not already granted)\n   * Note: This method is not supported in React Native\n   *\n   * @returns an Observable that will be updated if a device is connected or disconnected\n   */\n  listDevices() {\n    if (isReactNative()) {\n      throw new Error(\n        'This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details',\n      );\n    }\n    return getAudioOutputDevices(this.call.tracer);\n  }\n\n  /**\n   * Select a device.\n   *\n   * Note: This method is not supported in React Native\n   *\n   * @param deviceId empty string means the system default\n   */\n  select(deviceId: string) {\n    if (isReactNative()) {\n      throw new Error(\n        'This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details',\n      );\n    }\n    this.state.setDevice(deviceId);\n  }\n\n  /**\n   * Disposes the manager.\n   *\n   * @internal\n   */\n  dispose = () => {\n    this.subscriptions.forEach((s) => s.unsubscribe());\n    this.subscriptions = [];\n    this.areSubscriptionsSetUp = false;\n  };\n\n  /**\n   * Set the volume of the audio elements\n   * @param volume a number between 0 and 1.\n   *\n   * Note: This method is not supported in React Native\n   */\n  setVolume(volume: number) {\n    if (isReactNative()) {\n      throw new Error(\n        'This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details',\n      );\n    }\n    if (volume && (volume < 0 || volume > 1)) {\n      throw new Error('Volume must be between 0 and 1');\n    }\n    this.state.setVolume(volume);\n  }\n\n  /**\n   * Set the volume of a participant.\n   *\n   * Note: This method is not supported in React Native.\n   *\n   * @param sessionId the participant's session id.\n   * @param volume a number between 0 and 1. Set it to `undefined` to use the default volume.\n   */\n  setParticipantVolume(sessionId: string, volume: number | undefined) {\n    if (volume && (volume < 0 || volume > 1)) {\n      throw new Error('Volume must be between 0 and 1, or undefined');\n    }\n    this.call.state.updateParticipant(sessionId, (p) => {\n      if (isReactNative() && p.audioStream) {\n        for (const track of p.audioStream.getAudioTracks()) {\n          // @ts-expect-error track._setVolume is present in react-native-webrtc\n          track?._setVolume(volume);\n        }\n      }\n      return { audioVolume: volume };\n    });\n  }\n}\n", "import { StreamSfuClient } from './StreamSfuClient';\nimport {\n  BasePeerConnectionOpts,\n  Dispatcher,\n  getGenericSdp,\n  isAudioTrackType,\n  isSfuEvent,\n  muteTypeToTrackType,\n  Publisher,\n  Subscriber,\n  toRtcConfiguration,\n  TrackPublishOptions,\n  trackTypeToParticipantStreamKey,\n} from './rtc';\nimport {\n  registerEventHandlers,\n  registerRingingCallEventHandlers,\n} from './events/callEventHandlers';\nimport {\n  CallingState,\n  CallState,\n  StreamVideoWriteableStateStore,\n} from './store';\nimport {\n  createSafeAsyncSubscription,\n  createSubscription,\n  getCurrentValue,\n} from './store/rxUtils';\nimport { ScopedLogger, videoLoggerSystem } from './logger';\nimport type {\n  AcceptCallResponse,\n  BlockUserRequest,\n  BlockUserResponse,\n  CallRingEvent,\n  CallSettingsResponse,\n  CollectUserFeedbackRequest,\n  CollectUserFeedbackResponse,\n  Credentials,\n  DeleteCallRequest,\n  DeleteCallResponse,\n  EndCallResponse,\n  GetCallReportResponse,\n  GetCallResponse,\n  GetCallSessionParticipantStatsDetailsResponse,\n  GetOrCreateCallRequest,\n  GetOrCreateCallResponse,\n  GoLiveRequest,\n  GoLiveResponse,\n  JoinCallRequest,\n  JoinCallResponse,\n  KickUserRequest,\n  KickUserResponse,\n  ListRecordingsResponse,\n  ListTranscriptionsResponse,\n  MuteUsersRequest,\n  MuteUsersResponse,\n  PinRequest,\n  PinResponse,\n  QueryCallMembersRequest,\n  QueryCallMembersResponse,\n  QueryCallSessionParticipantStatsResponse,\n  QueryCallSessionParticipantStatsTimelineResponse,\n  RejectCallRequest,\n  RejectCallResponse,\n  RequestPermissionRequest,\n  RequestPermissionResponse,\n  RingCallRequest,\n  RingCallResponse,\n  SendCallEventRequest,\n  SendCallEventResponse,\n  SendReactionRequest,\n  SendReactionResponse,\n  StartClosedCaptionsRequest,\n  StartClosedCaptionsResponse,\n  StartFrameRecordingRequest,\n  StartFrameRecordingResponse,\n  StartHLSBroadcastingResponse,\n  StartRecordingRequest,\n  StartRecordingResponse,\n  StartRTMPBroadcastsRequest,\n  StartRTMPBroadcastsResponse,\n  StartTranscriptionRequest,\n  StartTranscriptionResponse,\n  StatsOptions,\n  StopAllRTMPBroadcastsResponse,\n  StopClosedCaptionsRequest,\n  StopClosedCaptionsResponse,\n  StopFrameRecordingResponse,\n  StopHLSBroadcastingResponse,\n  StopLiveRequest,\n  StopLiveResponse,\n  StopRecordingResponse,\n  StopRTMPBroadcastsResponse,\n  StopTranscriptionResponse,\n  UnblockUserRequest,\n  UnblockUserResponse,\n  UnpinRequest,\n  UnpinResponse,\n  UpdateCallMembersRequest,\n  UpdateCallMembersResponse,\n  UpdateCallRequest,\n  UpdateCallResponse,\n  UpdateUserPermissionsRequest,\n  UpdateUserPermissionsResponse,\n} from './gen/coordinator';\nimport { OwnCapability } from './gen/coordinator';\nimport {\n  AudioTrackType,\n  CallConstructor,\n  CallLeaveOptions,\n  ClientPublishOptions,\n  ClosedCaptionsSettings,\n  JoinCallData,\n  TrackMuteType,\n  VideoTrackType,\n} from './types';\nimport { BehaviorSubject, Subject, takeWhile } from 'rxjs';\nimport { ReconnectDetails } from './gen/video/sfu/event/events';\nimport {\n  ClientCapability,\n  ClientDetails,\n  Codec,\n  ParticipantSource,\n  PeerType,\n  PublishOption,\n  SubscribeOption,\n  TrackType,\n  VideoDimension,\n  WebsocketReconnectStrategy,\n} from './gen/video/sfu/models/models';\nimport {\n  createStatsReporter,\n  getSdkSignature,\n  SfuStatsReporter,\n  StatsReporter,\n  Tracer,\n} from './stats';\nimport { DynascaleManager } from './helpers/DynascaleManager';\nimport { PermissionsContext } from './permissions';\nimport { CallTypes } from './CallType';\nimport { StreamClient } from './coordinator/connection/client';\nimport { retryInterval, sleep } from './coordinator/connection/utils';\nimport {\n  AllCallEvents,\n  CallEventListener,\n  ErrorFromResponse,\n  RejectReason,\n  StreamCallEvent,\n} from './coordinator/connection/types';\nimport { getClientDetails } from './helpers/client-details';\nimport {\n  CameraManager,\n  MicrophoneManager,\n  ScreenShareManager,\n  SpeakerManager,\n} from './devices';\nimport { hasPending, withoutConcurrency } from './helpers/concurrency';\nimport { ensureExhausted } from './helpers/ensureExhausted';\nimport { pushToIfMissing } from './helpers/array';\nimport {\n  makeSafePromise,\n  PromiseWithResolvers,\n  promiseWithResolvers,\n} from './helpers/promise';\nimport { GetCallStatsResponse } from './gen/shims';\n\n/**\n * An object representation of a `Call`.\n */\nexport class Call {\n  /**\n   * The type of the call.\n   */\n  readonly type: string;\n\n  /**\n   * The ID of the call.\n   */\n  readonly id: string;\n\n  /**\n   * The call CID.\n   */\n  readonly cid: string;\n\n  /**\n   * The state of this call.\n   */\n  readonly state = new CallState();\n\n  /**\n   * Flag indicating whether this call is \"watched\" and receives\n   * updates from the backend.\n   */\n  watching: boolean;\n\n  /**\n   * Device manager for the camera\n   */\n  readonly camera: CameraManager;\n\n  /**\n   * Device manager for the microphone.\n   */\n  readonly microphone: MicrophoneManager;\n\n  /**\n   * Device manager for the speaker.\n   */\n  readonly speaker: SpeakerManager;\n\n  /**\n   * Device manager for the screen.\n   */\n  readonly screenShare: ScreenShareManager;\n\n  /**\n   * The DynascaleManager instance.\n   */\n  readonly dynascaleManager: DynascaleManager;\n\n  subscriber?: Subscriber;\n  publisher?: Publisher;\n\n  /**\n   * Flag telling whether this call is a \"ringing\" call.\n   */\n  private readonly ringingSubject: Subject<boolean>;\n\n  /**\n   * The permissions context of this call.\n   */\n  readonly permissionsContext = new PermissionsContext();\n  readonly tracer = new Tracer(null);\n  readonly logger: ScopedLogger;\n\n  /**\n   * The event dispatcher instance dedicated to this Call instance.\n   * @private\n   */\n  private readonly dispatcher = new Dispatcher();\n\n  private clientPublishOptions?: ClientPublishOptions;\n  private currentPublishOptions?: PublishOption[];\n  private statsReportingIntervalInMs: number = 2000;\n  private statsReporter?: StatsReporter;\n  private sfuStatsReporter?: SfuStatsReporter;\n  private dropTimeout: ReturnType<typeof setTimeout> | undefined;\n\n  private readonly clientStore: StreamVideoWriteableStateStore;\n  public readonly streamClient: StreamClient;\n  private sfuClient?: StreamSfuClient;\n  private sfuClientTag = 0;\n  private unifiedSessionId?: string;\n\n  private readonly reconnectConcurrencyTag = Symbol('reconnectConcurrencyTag');\n  private reconnectAttempts = 0;\n  private reconnectStrategy = WebsocketReconnectStrategy.UNSPECIFIED;\n  private reconnectReason = '';\n  private fastReconnectDeadlineSeconds: number = 0;\n  private disconnectionTimeoutSeconds: number = 0;\n  private lastOfflineTimestamp: number = 0;\n  private networkAvailableTask: PromiseWithResolvers<void> | undefined;\n  // maintain the order of publishing tracks to restore them after a reconnection\n  // it shouldn't contain duplicates\n  private trackPublishOrder: TrackType[] = [];\n  private joinCallData?: JoinCallData;\n  private hasJoinedOnce = false;\n  private deviceSettingsAppliedOnce = false;\n  private credentials?: Credentials;\n\n  private initialized = false;\n  private readonly joinLeaveConcurrencyTag = Symbol('joinLeaveConcurrencyTag');\n\n  /**\n   * A list hooks/functions to invoke when the call is left.\n   * A typical use case is to clean up some global event handlers.\n   * @private\n   */\n  private readonly leaveCallHooks: Set<Function> = new Set();\n\n  private readonly streamClientBasePath: string;\n  private streamClientEventHandlers = new Map<Function, () => void>();\n\n  /**\n   * A list of capabilities that the client supports and are enabled.\n   */\n  private clientCapabilities = new Set<ClientCapability>([\n    ClientCapability.SUBSCRIBER_VIDEO_PAUSE,\n  ]);\n\n  /**\n   * Constructs a new `Call` instance.\n   *\n   * NOTE: Don't call the constructor directly, instead\n   * Use the [`StreamVideoClient.call`](./StreamVideoClient.md/#call)\n   * method to construct a `Call` instance.\n   */\n  constructor({\n    type,\n    id,\n    streamClient,\n    members,\n    ownCapabilities,\n    sortParticipantsBy,\n    clientStore,\n    ringing = false,\n    watching = false,\n  }: CallConstructor) {\n    this.type = type;\n    this.id = id;\n    this.cid = `${type}:${id}`;\n    this.ringingSubject = new BehaviorSubject(ringing);\n    this.watching = watching;\n    this.streamClient = streamClient;\n    this.clientStore = clientStore;\n    this.streamClientBasePath = `/call/${this.type}/${this.id}`;\n    this.logger = videoLoggerSystem.getLogger('Call');\n\n    const callTypeConfig = CallTypes.get(type);\n    const participantSorter =\n      sortParticipantsBy || callTypeConfig.options.sortParticipantsBy;\n    if (participantSorter) {\n      this.state.setSortParticipantsBy(participantSorter);\n    }\n\n    this.state.setMembers(members || []);\n    this.state.setOwnCapabilities(ownCapabilities || []);\n    this.state.setCallingState(\n      ringing ? CallingState.RINGING : CallingState.IDLE,\n    );\n\n    this.camera = new CameraManager(this);\n    this.microphone = new MicrophoneManager(this);\n    this.speaker = new SpeakerManager(this);\n    this.screenShare = new ScreenShareManager(this);\n    this.dynascaleManager = new DynascaleManager(this.state, this.speaker);\n  }\n\n  /**\n   * Sets up the call instance.\n   *\n   * @internal an internal method and should not be used outside the SDK.\n   */\n  setup = async () => {\n    await withoutConcurrency(this.joinLeaveConcurrencyTag, async () => {\n      if (this.initialized) return;\n\n      this.leaveCallHooks.add(\n        this.on('all', (event) => {\n          // update state with the latest event data\n          this.state.updateFromEvent(event);\n        }),\n      );\n\n      this.leaveCallHooks.add(\n        this.on('changePublishOptions', (event) => {\n          this.currentPublishOptions = event.publishOptions;\n        }),\n      );\n\n      this.leaveCallHooks.add(registerEventHandlers(this, this.dispatcher));\n      this.registerEffects();\n      this.registerReconnectHandlers();\n\n      this.camera.setup();\n      this.microphone.setup();\n      this.screenShare.setup();\n      this.speaker.setup();\n\n      if (this.state.callingState === CallingState.LEFT) {\n        this.state.setCallingState(CallingState.IDLE);\n      }\n\n      this.initialized = true;\n    });\n  };\n\n  private registerEffects = () => {\n    this.leaveCallHooks.add(\n      // handles updating the permissions context when the settings change.\n      createSubscription(this.state.settings$, (settings) => {\n        if (!settings) return;\n        this.permissionsContext.setCallSettings(settings);\n      }),\n    );\n\n    this.leaveCallHooks.add(\n      // handle the case when the user permissions are modified.\n      createSafeAsyncSubscription(\n        this.state.ownCapabilities$,\n        this.handleOwnCapabilitiesUpdated,\n      ),\n    );\n\n    this.leaveCallHooks.add(\n      // handles the case when the user is blocked by the call owner.\n      createSubscription(this.state.blockedUserIds$, async (blockedUserIds) => {\n        if (!blockedUserIds || blockedUserIds.length === 0) return;\n        const currentUserId = this.currentUserId;\n        if (currentUserId && blockedUserIds.includes(currentUserId)) {\n          this.logger.info('Leaving call because of being blocked');\n          await this.leave({ message: 'user blocked' }).catch((err) => {\n            this.logger.error('Error leaving call after being blocked', err);\n          });\n        }\n      }),\n    );\n\n    if (this.ringing) {\n      // if the call is ringing, we need to register the ringing call effects\n      this.handleRingingCall();\n    } else {\n      // if the call is not ringing, we need to register the ringing call subscriptions\n      // to handle the case when the call gets ringing flag after creation event\n      this.leaveCallHooks.add(\n        // \"ringing\" mode effects and event handlers\n        createSubscription(this.ringingSubject, (isRinging) => {\n          if (!isRinging) return;\n          this.handleRingingCall();\n        }),\n      );\n    }\n\n    this.leaveCallHooks.add(\n      // cancel auto-drop when call is accepted or rejected\n      createSubscription(this.state.session$, (session) => {\n        if (!this.ringing) return;\n\n        const receiverId = this.clientStore.connectedUser?.id;\n        if (!receiverId) return;\n\n        const isAcceptedByMe = Boolean(session?.accepted_by[receiverId]);\n        const isRejectedByMe = Boolean(session?.rejected_by[receiverId]);\n\n        if (isAcceptedByMe || isRejectedByMe) {\n          this.cancelAutoDrop();\n        }\n\n        const isAcceptedElsewhere =\n          isAcceptedByMe && this.state.callingState === CallingState.RINGING;\n\n        if (\n          (isAcceptedElsewhere || isRejectedByMe) &&\n          !hasPending(this.joinLeaveConcurrencyTag)\n        ) {\n          this.leave().catch(() => {\n            this.logger.error(\n              'Could not leave a call that was accepted or rejected elsewhere',\n            );\n          });\n        }\n      }),\n    );\n  };\n\n  private handleRingingCall = () => {\n    const callSession = this.state.session;\n    const receiver_id = this.clientStore.connectedUser?.id;\n    const ended_at = callSession?.ended_at;\n    const created_by_id = this.state.createdBy?.id;\n    const rejected_by = callSession?.rejected_by;\n    const accepted_by = callSession?.accepted_by;\n    let leaveCallIdle = false;\n    if (ended_at) {\n      // call was ended before it was accepted or rejected so we should leave it to idle\n      leaveCallIdle = true;\n    } else if (created_by_id && rejected_by) {\n      if (rejected_by[created_by_id]) {\n        // call was cancelled by the caller\n        leaveCallIdle = true;\n      }\n    } else if (receiver_id && rejected_by) {\n      if (rejected_by[receiver_id]) {\n        // call was rejected by the receiver in some other device\n        leaveCallIdle = true;\n      }\n    } else if (receiver_id && accepted_by) {\n      if (accepted_by[receiver_id]) {\n        // call was accepted by the receiver in some other device\n        leaveCallIdle = true;\n      }\n    }\n    if (leaveCallIdle) {\n      if (this.state.callingState !== CallingState.IDLE) {\n        this.state.setCallingState(CallingState.IDLE);\n      }\n    } else {\n      if (this.state.callingState === CallingState.IDLE) {\n        this.state.setCallingState(CallingState.RINGING);\n      }\n      this.scheduleAutoDrop();\n      this.leaveCallHooks.add(registerRingingCallEventHandlers(this));\n    }\n  };\n\n  private handleOwnCapabilitiesUpdated = async (\n    ownCapabilities: OwnCapability[],\n  ) => {\n    // update the permission context.\n    this.permissionsContext.setPermissions(ownCapabilities);\n\n    if (!this.publisher) return;\n\n    // check if the user still has publishing permissions and stop publishing if not.\n    const permissionToTrackType = {\n      [OwnCapability.SEND_AUDIO]: TrackType.AUDIO,\n      [OwnCapability.SEND_VIDEO]: TrackType.VIDEO,\n      [OwnCapability.SCREENSHARE]: TrackType.SCREEN_SHARE,\n    };\n    for (const [permission, trackType] of Object.entries(\n      permissionToTrackType,\n    )) {\n      const hasPermission = this.permissionsContext.hasPermission(\n        permission as OwnCapability,\n      );\n      if (hasPermission) continue;\n      try {\n        switch (trackType) {\n          case TrackType.AUDIO:\n            if (this.microphone.enabled) await this.microphone.disable();\n            break;\n          case TrackType.VIDEO:\n            if (this.camera.enabled) await this.camera.disable();\n            break;\n          case TrackType.SCREEN_SHARE:\n            if (this.screenShare.enabled) await this.screenShare.disable();\n            break;\n        }\n      } catch (err) {\n        this.logger.error(\n          `Can't disable mic/camera/screenshare after revoked permissions`,\n          err,\n        );\n      }\n    }\n  };\n\n  /**\n   * You can subscribe to WebSocket events provided by the API. To remove a subscription, call the `off` method.\n   * Please note that subscribing to WebSocket events is an advanced use-case.\n   * For most use-cases, it should be enough to watch for state changes.\n   *\n   * @param eventName the event name.\n   * @param fn the event handler.\n   */\n  on = <E extends keyof AllCallEvents>(\n    eventName: E,\n    fn: CallEventListener<E>,\n  ) => {\n    if (isSfuEvent(eventName)) {\n      return this.dispatcher.on(eventName, fn);\n    }\n\n    const offHandler = this.streamClient.on(eventName, (e) => {\n      const event = e as StreamCallEvent;\n      if (event.call_cid && event.call_cid === this.cid) {\n        fn(event as AllCallEvents[E]);\n      }\n    });\n\n    // keep the 'off' reference returned by the stream client\n    this.streamClientEventHandlers.set(fn, offHandler);\n    return () => {\n      this.off(eventName, fn);\n    };\n  };\n\n  /**\n   * Remove subscription for WebSocket events that were created by the `on` method.\n   *\n   * @param eventName the event name.\n   * @param fn the event handler.\n   */\n  off = <E extends keyof AllCallEvents>(\n    eventName: E,\n    fn: CallEventListener<E>,\n  ) => {\n    if (isSfuEvent(eventName)) {\n      return this.dispatcher.off(eventName, fn);\n    }\n\n    // unsubscribe from the stream client event by using the 'off' reference\n    const registeredOffHandler = this.streamClientEventHandlers.get(fn);\n    if (registeredOffHandler) {\n      registeredOffHandler();\n    }\n  };\n\n  /**\n   * Leave the call and stop the media streams that were published by the call.\n   */\n  leave = async ({ reject, reason, message }: CallLeaveOptions = {}) => {\n    if (this.state.callingState === CallingState.LEFT) {\n      throw new Error('Cannot leave call that has already been left.');\n    }\n\n    await withoutConcurrency(this.joinLeaveConcurrencyTag, async () => {\n      const callingState = this.state.callingState;\n\n      if (callingState === CallingState.LEFT) {\n        return;\n      }\n\n      if (callingState === CallingState.JOINING) {\n        const waitUntilCallJoined = () => {\n          return new Promise<void>((resolve) => {\n            this.state.callingState$\n              .pipe(takeWhile((state) => state !== CallingState.JOINED, true))\n              .subscribe(() => resolve());\n          });\n        };\n        await waitUntilCallJoined();\n      }\n\n      if (callingState === CallingState.RINGING && reject !== false) {\n        if (reject) {\n          await this.reject(reason ?? 'decline');\n        } else {\n          // if reject was undefined, we still have to cancel the call automatically\n          // when I am the creator and everyone else left the call\n          const hasOtherParticipants = this.state.remoteParticipants.length > 0;\n          if (this.isCreatedByMe && !hasOtherParticipants) {\n            await this.reject('cancel');\n          }\n        }\n      }\n\n      this.statsReporter?.stop();\n      this.statsReporter = undefined;\n\n      this.sfuStatsReporter?.flush();\n      this.sfuStatsReporter?.stop();\n      this.sfuStatsReporter = undefined;\n\n      this.subscriber?.dispose();\n      this.subscriber = undefined;\n\n      this.publisher?.dispose();\n      this.publisher = undefined;\n\n      await this.sfuClient?.leaveAndClose(\n        message ?? reason ?? 'user is leaving the call',\n      );\n      this.sfuClient = undefined;\n      this.dynascaleManager.setSfuClient(undefined);\n      await this.dynascaleManager.dispose();\n\n      this.state.setCallingState(CallingState.LEFT);\n      this.state.setParticipants([]);\n      this.state.dispose();\n\n      // Call all leave call hooks, e.g. to clean up global event handlers\n      this.leaveCallHooks.forEach((hook) => hook());\n      this.initialized = false;\n      this.hasJoinedOnce = false;\n      this.unifiedSessionId = undefined;\n      this.ringingSubject.next(false);\n      this.cancelAutoDrop();\n      this.clientStore.unregisterCall(this);\n\n      this.camera.dispose();\n      this.microphone.dispose();\n      this.screenShare.dispose();\n      this.speaker.dispose();\n      this.deviceSettingsAppliedOnce = false;\n\n      const stopOnLeavePromises: Promise<void>[] = [];\n      if (this.camera.stopOnLeave) {\n        stopOnLeavePromises.push(this.camera.disable(true));\n      }\n      if (this.microphone.stopOnLeave) {\n        stopOnLeavePromises.push(this.microphone.disable(true));\n      }\n      if (this.screenShare.stopOnLeave) {\n        stopOnLeavePromises.push(this.screenShare.disable(true));\n      }\n      await Promise.all(stopOnLeavePromises);\n    });\n  };\n\n  /**\n   * A flag indicating whether the call is \"ringing\" type of call.\n   */\n  get ringing() {\n    return getCurrentValue(this.ringingSubject);\n  }\n\n  /**\n   * Retrieves the current user ID.\n   */\n  get currentUserId() {\n    return this.clientStore.connectedUser?.id;\n  }\n\n  /**\n   * A flag indicating whether the call was created by the current user.\n   */\n  get isCreatedByMe() {\n    return this.state.createdBy?.id === this.currentUserId;\n  }\n\n  /**\n   * Update from the call response from the \"call.ring\" event\n   * @internal\n   */\n  updateFromRingingEvent = async (event: CallRingEvent) => {\n    await this.setup();\n    // call.ring event excludes the call creator in the members list\n    // as the creator does not get the ring event\n    // so update the member list accordingly\n    const { created_by, settings } = event.call;\n    const creator = this.state.members.find((m) => m.user.id === created_by.id);\n    if (!creator) {\n      this.state.setMembers(event.members);\n    } else {\n      this.state.setMembers([creator, ...event.members]);\n    }\n    // update the call state with the latest event data\n    this.state.updateFromCallResponse(event.call);\n    this.watching = true;\n    this.ringingSubject.next(true);\n    // we remove the instance from the calls list to enable the following filter in useCalls hook\n    // const calls = useCalls().filter((c) => c.ringing);\n    const calls = this.clientStore.calls.filter((c) => c.cid !== this.cid);\n    this.clientStore.setCalls([this, ...calls]);\n    await this.applyDeviceConfig(settings, false);\n  };\n\n  /**\n   * Loads the information about the call.\n   *\n   * @param params.ring if set to true, a `call.ring` event will be sent to the call members.\n   * @param params.notify if set to true, a `call.notification` event will be sent to the call members.\n   * @param params.members_limit the total number of members to return as part of the response.\n   * @param params.video if set to true, in a ringing scenario, mobile SDKs will show \"incoming video call\", audio only otherwise.\n   */\n  get = async (params?: {\n    ring?: boolean;\n    notify?: boolean;\n    members_limit?: number;\n    video?: boolean;\n  }): Promise<GetCallResponse> => {\n    await this.setup();\n    const response = await this.streamClient.get<GetCallResponse>(\n      this.streamClientBasePath,\n      params,\n    );\n\n    this.state.updateFromCallResponse(response.call);\n    this.state.setMembers(response.members);\n    this.state.setOwnCapabilities(response.own_capabilities);\n\n    if (params?.ring) {\n      this.ringingSubject.next(true);\n    }\n\n    if (this.streamClient._hasConnectionID()) {\n      this.watching = true;\n      this.clientStore.registerCall(this);\n    }\n\n    await this.applyDeviceConfig(response.call.settings, false);\n\n    return response;\n  };\n\n  /**\n   * Loads the information about the call and creates it if it doesn't exist.\n   *\n   * @param data the data to create the call with.\n   */\n  getOrCreate = async (data?: GetOrCreateCallRequest) => {\n    await this.setup();\n    const response = await this.streamClient.post<\n      GetOrCreateCallResponse,\n      GetOrCreateCallRequest\n    >(this.streamClientBasePath, data);\n\n    this.state.updateFromCallResponse(response.call);\n    this.state.setMembers(response.members);\n    this.state.setOwnCapabilities(response.own_capabilities);\n\n    if (data?.ring) {\n      this.ringingSubject.next(true);\n    }\n\n    if (this.streamClient._hasConnectionID()) {\n      this.watching = true;\n      this.clientStore.registerCall(this);\n    }\n\n    await this.applyDeviceConfig(response.call.settings, false);\n\n    return response;\n  };\n\n  /**\n   * Creates a call\n   *\n   * @param data the data to create the call with.\n   */\n  create = async (data?: GetOrCreateCallRequest) => {\n    return this.getOrCreate(data);\n  };\n\n  /**\n   * Deletes the call.\n   */\n  delete = async (\n    data: DeleteCallRequest = {},\n  ): Promise<DeleteCallResponse> => {\n    return this.streamClient.post<DeleteCallResponse, DeleteCallRequest>(\n      `${this.streamClientBasePath}/delete`,\n      data,\n    );\n  };\n\n  /**\n   * Sends a ring notification to the provided users who are not already in the call.\n   * All users should be members of the call.\n   */\n  ring = async (data: RingCallRequest = {}): Promise<RingCallResponse> => {\n    return this.streamClient.post<RingCallResponse, RingCallRequest>(\n      `${this.streamClientBasePath}/ring`,\n      data,\n    );\n  };\n\n  /**\n   * A shortcut for {@link Call.get} with `notify` parameter set to `true`.\n   * Will send a `call.notification` event to the call members.\n   */\n  notify = async (): Promise<GetCallResponse> => {\n    return await this.get({ notify: true });\n  };\n\n  /**\n   * Marks the incoming call as accepted.\n   *\n   * This method should be used only for \"ringing\" call flows.\n   * {@link Call.join} invokes this method automatically for you when joining a call.\n   * Unless you are implementing a custom \"ringing\" flow, you should not use this method.\n   */\n  accept = async () => {\n    return this.streamClient.post<AcceptCallResponse>(\n      `${this.streamClientBasePath}/accept`,\n    );\n  };\n\n  /**\n   * Marks the incoming call as rejected.\n   *\n   * This method should be used only for \"ringing\" call flows.\n   * {@link Call.leave} invokes this method automatically for you when you leave or reject this call.\n   * Unless you are implementing a custom \"ringing\" flow, you should not use this method.\n   *\n   * @param reason the reason for rejecting the call.\n   */\n  reject = async (\n    reason: RejectReason = 'decline',\n  ): Promise<RejectCallResponse> => {\n    return this.streamClient.post<RejectCallResponse, RejectCallRequest>(\n      `${this.streamClientBasePath}/reject`,\n      { reason: reason },\n    );\n  };\n\n  /**\n   * Will start to watch for call related WebSocket events and initiate a call session with the server.\n   *\n   * @returns a promise which resolves once the call join-flow has finished.\n   */\n  join = async ({\n    maxJoinRetries = 3,\n    ...data\n  }: JoinCallData & {\n    maxJoinRetries?: number;\n  } = {}): Promise<void> => {\n    await this.setup();\n    const callingState = this.state.callingState;\n\n    if ([CallingState.JOINED, CallingState.JOINING].includes(callingState)) {\n      throw new Error(`Illegal State: call.join() shall be called only once`);\n    }\n\n    // we will count the number of join failures per SFU.\n    // once the number of failures reaches 2, we will piggyback on the `migrating_from`\n    // field to force the coordinator to provide us another SFU\n    const sfuJoinFailures = new Map<string, number>();\n    const joinData: JoinCallData = data;\n    maxJoinRetries = Math.max(maxJoinRetries, 1);\n    for (let attempt = 0; attempt < maxJoinRetries; attempt++) {\n      try {\n        this.logger.trace(`Joining call (${attempt})`, this.cid);\n        await this.doJoin(data);\n        delete joinData.migrating_from;\n        break;\n      } catch (err) {\n        this.logger.warn(`Failed to join call (${attempt})`, this.cid);\n        if (err instanceof ErrorFromResponse && err.unrecoverable) {\n          // if the error is unrecoverable, we should not retry as that signals\n          // that connectivity is good, but the coordinator doesn't allow the user\n          // to join the call due to some reason (e.g., ended call, expired token...)\n          throw err;\n        }\n\n        const sfuId = this.credentials?.server.edge_name || '';\n        const failures = (sfuJoinFailures.get(sfuId) || 0) + 1;\n        sfuJoinFailures.set(sfuId, failures);\n        if (failures >= 2) {\n          joinData.migrating_from = sfuId;\n        }\n\n        if (attempt === maxJoinRetries - 1) {\n          throw err;\n        }\n      }\n\n      await sleep(retryInterval(attempt));\n    }\n  };\n\n  /**\n   * Will make a single attempt to watch for call related WebSocket events\n   * and initiate a call session with the server.\n   *\n   * @returns a promise which resolves once the call join-flow has finished.\n   */\n  private doJoin = async (data?: JoinCallData): Promise<void> => {\n    const connectStartTime = Date.now();\n    const callingState = this.state.callingState;\n\n    this.joinCallData = data;\n\n    this.logger.debug('Starting join flow');\n    this.state.setCallingState(CallingState.JOINING);\n\n    const performingMigration =\n      this.reconnectStrategy === WebsocketReconnectStrategy.MIGRATE;\n    const performingRejoin =\n      this.reconnectStrategy === WebsocketReconnectStrategy.REJOIN;\n    const performingFastReconnect =\n      this.reconnectStrategy === WebsocketReconnectStrategy.FAST;\n\n    let statsOptions = this.sfuStatsReporter?.options;\n    if (\n      !this.credentials ||\n      !statsOptions ||\n      performingRejoin ||\n      performingMigration\n    ) {\n      try {\n        const joinResponse = await this.doJoinRequest(data);\n        this.credentials = joinResponse.credentials;\n        statsOptions = joinResponse.stats_options;\n      } catch (error) {\n        // prevent triggering reconnect flow if the state is OFFLINE\n        const avoidRestoreState =\n          this.state.callingState === CallingState.OFFLINE;\n\n        if (!avoidRestoreState) {\n          // restore the previous call state if the join-flow fails\n          this.state.setCallingState(callingState);\n        }\n        throw error;\n      }\n    }\n\n    const previousSfuClient = this.sfuClient;\n    const previousSessionId = previousSfuClient?.sessionId;\n    const isWsHealthy = !!previousSfuClient?.isHealthy;\n    const sfuClient =\n      performingRejoin || performingMigration || !isWsHealthy\n        ? new StreamSfuClient({\n            tag: String(this.sfuClientTag++),\n            cid: this.cid,\n            dispatcher: this.dispatcher,\n            credentials: this.credentials,\n            streamClient: this.streamClient,\n            enableTracing: statsOptions.enable_rtc_stats,\n            // a new session_id is necessary for the REJOIN strategy.\n            // we use the previous session_id if available\n            sessionId: performingRejoin ? undefined : previousSessionId,\n            onSignalClose: (reason) =>\n              this.handleSfuSignalClose(sfuClient, reason),\n          })\n        : previousSfuClient;\n    this.sfuClient = sfuClient;\n    this.unifiedSessionId ??= sfuClient.sessionId;\n    this.dynascaleManager.setSfuClient(sfuClient);\n\n    const clientDetails = await getClientDetails();\n    // we don't need to send JoinRequest if we are re-using an existing healthy SFU client\n    if (previousSfuClient !== sfuClient) {\n      // prepare a generic SDP and send it to the SFU.\n      // these are throw-away SDPs that the SFU will use to determine\n      // the capabilities of the client (codec support, etc.)\n      const { dangerouslyForceCodec, fmtpLine, subscriberFmtpLine } =\n        this.clientPublishOptions || {};\n      const [subscriberSdp, publisherSdp] = await Promise.all([\n        getGenericSdp('recvonly', dangerouslyForceCodec, subscriberFmtpLine),\n        getGenericSdp('sendonly', dangerouslyForceCodec, fmtpLine),\n      ]);\n      const isReconnecting =\n        this.reconnectStrategy !== WebsocketReconnectStrategy.UNSPECIFIED;\n      const reconnectDetails = isReconnecting\n        ? this.getReconnectDetails(data?.migrating_from, previousSessionId)\n        : undefined;\n      const preferredPublishOptions = !isReconnecting\n        ? this.getPreferredPublishOptions()\n        : this.currentPublishOptions || [];\n      const preferredSubscribeOptions = !isReconnecting\n        ? this.getPreferredSubscribeOptions()\n        : [];\n\n      try {\n        const { callState, fastReconnectDeadlineSeconds, publishOptions } =\n          await sfuClient.join({\n            unifiedSessionId: this.unifiedSessionId,\n            subscriberSdp,\n            publisherSdp,\n            clientDetails,\n            fastReconnect: performingFastReconnect,\n            reconnectDetails,\n            preferredPublishOptions,\n            preferredSubscribeOptions,\n            capabilities: Array.from(this.clientCapabilities),\n            source: ParticipantSource.WEBRTC_UNSPECIFIED,\n          });\n\n        this.currentPublishOptions = publishOptions;\n        this.fastReconnectDeadlineSeconds = fastReconnectDeadlineSeconds;\n        if (callState) {\n          this.state.updateFromSfuCallState(\n            callState,\n            sfuClient.sessionId,\n            reconnectDetails,\n          );\n        }\n      } catch (error) {\n        this.logger.warn('Join SFU request failed', error);\n        sfuClient.close(\n          StreamSfuClient.JOIN_FAILED,\n          'Join request failed, connection considered unhealthy',\n        );\n        // restore the previous call state if the join-flow fails\n        this.state.setCallingState(callingState);\n        throw error;\n      }\n    }\n\n    if (!performingMigration) {\n      // in MIGRATION, `JOINED` state is set in `this.reconnectMigrate()`\n      this.state.setCallingState(CallingState.JOINED);\n    }\n    this.hasJoinedOnce = true;\n\n    // when performing fast reconnect, or when we reuse the same SFU client,\n    // (ws remained healthy), we just need to restore the ICE connection\n    if (performingFastReconnect) {\n      // the SFU automatically issues an ICE restart on the subscriber\n      // we don't have to do it ourselves\n      await this.restoreICE(sfuClient, { includeSubscriber: false });\n    } else {\n      const connectionConfig = toRtcConfiguration(this.credentials.ice_servers);\n      this.initPublisherAndSubscriber({\n        sfuClient,\n        connectionConfig,\n        clientDetails,\n        statsOptions,\n        publishOptions: this.currentPublishOptions || [],\n        closePreviousInstances: !performingMigration,\n        unifiedSessionId: this.unifiedSessionId,\n      });\n    }\n\n    // make sure we only track connection timing if we are not calling this method as part of a reconnection flow\n    if (!performingRejoin && !performingFastReconnect && !performingMigration) {\n      this.sfuStatsReporter?.sendConnectionTime(\n        (Date.now() - connectStartTime) / 1000,\n      );\n    }\n\n    if (performingRejoin && isWsHealthy) {\n      const strategy = WebsocketReconnectStrategy[this.reconnectStrategy];\n      await previousSfuClient?.leaveAndClose(\n        `Closing previous WS after reconnect with strategy: ${strategy}`,\n      );\n    } else if (!isWsHealthy) {\n      previousSfuClient?.close(\n        StreamSfuClient.DISPOSE_OLD_SOCKET,\n        'Closing unhealthy WS after reconnect',\n      );\n    }\n\n    // device settings should be applied only once, we don't have to\n    // re-apply them on later reconnections or server-side data fetches\n    if (!this.deviceSettingsAppliedOnce && this.state.settings) {\n      await this.applyDeviceConfig(this.state.settings, true);\n      this.deviceSettingsAppliedOnce = true;\n    }\n\n    // We shouldn't persist the `ring` and `notify` state after joining the call\n    // as it's a one-time event and clashes with the potential reconnection attempts.\n    // When reconnecting, if provided with `ring: true` or `notify: true`,\n    // we will spam the other participants with push notifications and `call.ring` events.\n    delete this.joinCallData?.ring;\n    delete this.joinCallData?.notify;\n    // reset the reconnect strategy to unspecified after a successful reconnection\n    this.reconnectStrategy = WebsocketReconnectStrategy.UNSPECIFIED;\n    this.reconnectReason = '';\n\n    this.logger.info(`Joined call ${this.cid}`);\n  };\n\n  /**\n   * Prepares Reconnect Details object.\n   * @internal\n   */\n  private getReconnectDetails = (\n    migratingFromSfuId: string | undefined,\n    previousSessionId: string | undefined,\n  ): ReconnectDetails => {\n    const strategy = this.reconnectStrategy;\n    const performingRejoin = strategy === WebsocketReconnectStrategy.REJOIN;\n    const announcedTracks =\n      this.publisher?.getAnnouncedTracksForReconnect() || [];\n    return {\n      strategy,\n      announcedTracks,\n      subscriptions: this.dynascaleManager.trackSubscriptions,\n      reconnectAttempt: this.reconnectAttempts,\n      fromSfuId: migratingFromSfuId || '',\n      previousSessionId: performingRejoin ? previousSessionId || '' : '',\n      reason: this.reconnectReason,\n    };\n  };\n\n  /**\n   * Prepares the preferred codec for the call.\n   * This is an experimental client feature and subject to change.\n   * @internal\n   */\n  private getPreferredPublishOptions = (): PublishOption[] => {\n    const { preferredCodec, fmtpLine, preferredBitrate, maxSimulcastLayers } =\n      this.clientPublishOptions || {};\n    if (!preferredCodec && !preferredBitrate && !maxSimulcastLayers) return [];\n\n    const codec = preferredCodec\n      ? Codec.create({ name: preferredCodec.split('/').pop(), fmtp: fmtpLine })\n      : undefined;\n\n    const preferredPublishOptions = [\n      PublishOption.create({\n        trackType: TrackType.VIDEO,\n        codec,\n        bitrate: preferredBitrate,\n        maxSpatialLayers: maxSimulcastLayers,\n      }),\n    ];\n\n    const screenShareSettings = this.screenShare.getSettings();\n    if (screenShareSettings) {\n      preferredPublishOptions.push(\n        PublishOption.create({\n          trackType: TrackType.SCREEN_SHARE,\n          fps: screenShareSettings.maxFramerate,\n          bitrate: screenShareSettings.maxBitrate,\n        }),\n      );\n    }\n\n    return preferredPublishOptions;\n  };\n\n  /**\n   * Prepares the preferred options for subscribing to tracks.\n   * This is an experimental client feature and subject to change.\n   * @internal\n   */\n  private getPreferredSubscribeOptions = (): SubscribeOption[] => {\n    const { subscriberCodec, subscriberFmtpLine } =\n      this.clientPublishOptions || {};\n    if (!subscriberCodec || !subscriberFmtpLine) return [];\n    return [\n      SubscribeOption.create({\n        trackType: TrackType.VIDEO,\n        codecs: [\n          { name: subscriberCodec.split('/').pop(), fmtp: subscriberFmtpLine },\n        ],\n      }),\n    ];\n  };\n\n  /**\n   * Performs an ICE restart on both the Publisher and Subscriber Peer Connections.\n   * Uses the provided SFU client to restore the ICE connection.\n   *\n   * This method can throw an error if the ICE restart fails.\n   * This error should be handled by the reconnect loop,\n   * and a new reconnection shall be attempted.\n   *\n   * @internal\n   */\n  private restoreICE = async (\n    nextSfuClient: StreamSfuClient,\n    opts: { includeSubscriber?: boolean; includePublisher?: boolean } = {},\n  ) => {\n    const { includeSubscriber = true, includePublisher = true } = opts;\n    if (this.subscriber) {\n      this.subscriber.setSfuClient(nextSfuClient);\n      if (includeSubscriber) {\n        await this.subscriber.restartIce();\n      }\n    }\n    if (this.publisher) {\n      this.publisher.setSfuClient(nextSfuClient);\n      if (includePublisher && this.publisher.isPublishing()) {\n        await this.publisher.restartIce();\n      }\n    }\n  };\n\n  /**\n   * Initializes the Publisher and Subscriber Peer Connections.\n   * @internal\n   */\n  private initPublisherAndSubscriber = (opts: {\n    sfuClient: StreamSfuClient;\n    connectionConfig: RTCConfiguration;\n    statsOptions: StatsOptions;\n    clientDetails: ClientDetails;\n    publishOptions: PublishOption[];\n    closePreviousInstances: boolean;\n    unifiedSessionId: string;\n  }) => {\n    const {\n      sfuClient,\n      connectionConfig,\n      clientDetails,\n      statsOptions,\n      publishOptions,\n      closePreviousInstances,\n      unifiedSessionId,\n    } = opts;\n    const { enable_rtc_stats: enableTracing } = statsOptions;\n    if (closePreviousInstances && this.subscriber) {\n      this.subscriber.dispose();\n    }\n    const basePeerConnectionOptions: BasePeerConnectionOpts = {\n      sfuClient,\n      dispatcher: this.dispatcher,\n      state: this.state,\n      connectionConfig,\n      tag: sfuClient.tag,\n      enableTracing,\n      clientPublishOptions: this.clientPublishOptions,\n      onReconnectionNeeded: (kind, reason, peerType) => {\n        this.reconnect(kind, reason).catch((err) => {\n          const message = `[Reconnect] Error reconnecting, after a ${PeerType[peerType]} error: ${reason}`;\n          this.logger.warn(message, err);\n        });\n      },\n    };\n\n    this.subscriber = new Subscriber(basePeerConnectionOptions);\n\n    // anonymous users can't publish anything hence, there is no need\n    // to create Publisher Peer Connection for them\n    const isAnonymous = this.streamClient.user?.type === 'anonymous';\n    if (!isAnonymous) {\n      if (closePreviousInstances && this.publisher) {\n        this.publisher.dispose();\n      }\n      this.publisher = new Publisher(basePeerConnectionOptions, publishOptions);\n    }\n\n    this.statsReporter?.stop();\n    if (this.statsReportingIntervalInMs > 0) {\n      this.statsReporter = createStatsReporter({\n        subscriber: this.subscriber,\n        publisher: this.publisher,\n        state: this.state,\n        datacenter: sfuClient.edgeName,\n        pollingIntervalInMs: this.statsReportingIntervalInMs,\n      });\n    }\n\n    this.tracer.setEnabled(enableTracing);\n    this.sfuStatsReporter?.flush();\n    this.sfuStatsReporter?.stop();\n    if (statsOptions?.reporting_interval_ms > 0) {\n      this.sfuStatsReporter = new SfuStatsReporter(sfuClient, {\n        clientDetails,\n        options: statsOptions,\n        subscriber: this.subscriber,\n        publisher: this.publisher,\n        microphone: this.microphone,\n        camera: this.camera,\n        state: this.state,\n        tracer: this.tracer,\n        unifiedSessionId,\n      });\n      this.sfuStatsReporter.start();\n    }\n  };\n\n  /**\n   * Retrieves credentials for joining the call.\n   *\n   * @internal\n   *\n   * @param data the join call data.\n   */\n  doJoinRequest = async (data?: JoinCallData): Promise<JoinCallResponse> => {\n    const location = await this.streamClient.getLocationHint();\n    const request: JoinCallRequest = { ...data, location };\n    const joinResponse = await this.streamClient.post<\n      JoinCallResponse,\n      JoinCallRequest\n    >(`${this.streamClientBasePath}/join`, request);\n    this.state.updateFromCallResponse(joinResponse.call);\n    this.state.setMembers(joinResponse.members);\n    this.state.setOwnCapabilities(joinResponse.own_capabilities);\n\n    if (data?.ring) {\n      this.ringingSubject.next(true);\n    }\n\n    const isReconnecting =\n      this.reconnectStrategy !== WebsocketReconnectStrategy.UNSPECIFIED;\n\n    if (!isReconnecting && this.ringing && !this.isCreatedByMe) {\n      // signals other users that I have accepted the incoming call.\n      await this.accept();\n    }\n\n    if (this.streamClient._hasConnectionID()) {\n      this.watching = true;\n      this.clientStore.registerCall(this);\n    }\n\n    return joinResponse;\n  };\n\n  /**\n   * Handles the closing of the SFU signal connection.\n   *\n   * @internal\n   * @param sfuClient the SFU client instance that was closed.\n   * @param reason the reason for the closure.\n   */\n  private handleSfuSignalClose = (\n    sfuClient: StreamSfuClient,\n    reason: string,\n  ) => {\n    this.logger.debug('[Reconnect] SFU signal connection closed');\n    const { callingState } = this.state;\n    if (\n      // SFU WS closed before we finished current join,\n      // no need to schedule reconnecting\n      callingState === CallingState.JOINING ||\n      // we are already in the process of reconnecting,\n      // no need to schedule another one\n      callingState === CallingState.RECONNECTING ||\n      // SFU WS closed as a result of unsuccessful join,\n      // and no further retries need to be made\n      callingState === CallingState.IDLE ||\n      callingState === CallingState.LEFT\n    )\n      return;\n    // normal close, no need to reconnect\n    if (sfuClient.isLeaving || sfuClient.isClosingClean) return;\n\n    const strategy =\n      this.publisher?.isHealthy() && this.subscriber?.isHealthy()\n        ? WebsocketReconnectStrategy.FAST\n        : WebsocketReconnectStrategy.REJOIN;\n    this.reconnect(strategy, reason).catch((err) => {\n      this.logger.warn('[Reconnect] Error reconnecting', err);\n    });\n  };\n\n  /**\n   * Handles the reconnection flow.\n   *\n   * @internal\n   *\n   * @param strategy the reconnection strategy to use.\n   * @param reason the reason for the reconnection.\n   */\n  private reconnect = async (\n    strategy: WebsocketReconnectStrategy,\n    reason: string,\n  ): Promise<void> => {\n    if (\n      this.state.callingState === CallingState.RECONNECTING ||\n      this.state.callingState === CallingState.MIGRATING ||\n      this.state.callingState === CallingState.RECONNECTING_FAILED\n    )\n      return;\n\n    return withoutConcurrency(this.reconnectConcurrencyTag, async () => {\n      const reconnectStartTime = Date.now();\n      this.reconnectStrategy = strategy;\n      this.reconnectReason = reason;\n\n      const markAsReconnectingFailed = async () => {\n        try {\n          // attempt to fetch the call data from the server, as the call\n          // state might have changed while we were reconnecting or were offline\n          await this.get();\n        } finally {\n          this.state.setCallingState(CallingState.RECONNECTING_FAILED);\n        }\n      };\n\n      let attempt = 0;\n      do {\n        const reconnectingTime = Date.now() - reconnectStartTime;\n        const shouldGiveUpReconnecting =\n          this.disconnectionTimeoutSeconds > 0 &&\n          reconnectingTime / 1000 > this.disconnectionTimeoutSeconds;\n\n        if (shouldGiveUpReconnecting) {\n          this.logger.warn(\n            '[Reconnect] Stopping reconnection attempts after reaching disconnection timeout',\n          );\n          await markAsReconnectingFailed();\n          return;\n        }\n\n        // we don't increment reconnect attempts for the FAST strategy.\n        if (this.reconnectStrategy !== WebsocketReconnectStrategy.FAST) {\n          this.reconnectAttempts++;\n        }\n        const currentStrategy =\n          WebsocketReconnectStrategy[this.reconnectStrategy];\n        try {\n          // wait until the network is available\n          await this.networkAvailableTask?.promise;\n\n          this.logger.info(\n            `[Reconnect] Reconnecting with strategy ${WebsocketReconnectStrategy[this.reconnectStrategy]}`,\n          );\n\n          switch (this.reconnectStrategy) {\n            case WebsocketReconnectStrategy.UNSPECIFIED:\n            case WebsocketReconnectStrategy.DISCONNECT:\n              this.logger.debug(\n                `[Reconnect] No-op strategy ${currentStrategy}`,\n              );\n              break;\n            case WebsocketReconnectStrategy.FAST:\n              await this.reconnectFast();\n              break;\n            case WebsocketReconnectStrategy.REJOIN:\n              await this.reconnectRejoin();\n              break;\n            case WebsocketReconnectStrategy.MIGRATE:\n              await this.reconnectMigrate();\n              break;\n            default:\n              ensureExhausted(\n                this.reconnectStrategy,\n                'Unknown reconnection strategy',\n              );\n              break;\n          }\n          break; // do-while loop, reconnection worked, exit the loop\n        } catch (error) {\n          if (this.state.callingState === CallingState.OFFLINE) {\n            this.logger.debug(\n              `[Reconnect] Can't reconnect while offline, stopping reconnection attempts`,\n            );\n            break;\n            // we don't need to handle the error if the call is offline\n            // network change event will trigger the reconnection\n          }\n          if (error instanceof ErrorFromResponse && error.unrecoverable) {\n            this.logger.warn(\n              `[Reconnect] Can't reconnect due to coordinator unrecoverable error`,\n              error,\n            );\n            await markAsReconnectingFailed();\n            return;\n          }\n\n          await sleep(500);\n\n          const wasMigrating =\n            this.reconnectStrategy === WebsocketReconnectStrategy.MIGRATE;\n          const mustPerformRejoin =\n            (Date.now() - reconnectStartTime) / 1000 >\n            this.fastReconnectDeadlineSeconds;\n\n          // don't immediately switch to the REJOIN strategy, but instead attempt\n          // to reconnect with the FAST strategy for a few times before switching.\n          // in some cases, we immediately switch to the REJOIN strategy.\n          const shouldRejoin =\n            mustPerformRejoin || // if we are past the fast reconnect deadline\n            wasMigrating || // if we were migrating, but the migration failed\n            attempt >= 3 || // after 3 failed attempts\n            !(this.publisher?.isHealthy() ?? true) || // if the publisher is not healthy\n            !(this.subscriber?.isHealthy() ?? true); // if the subscriber is not healthy\n\n          attempt++;\n\n          const nextStrategy = shouldRejoin\n            ? WebsocketReconnectStrategy.REJOIN\n            : WebsocketReconnectStrategy.FAST;\n          this.reconnectStrategy = nextStrategy;\n\n          this.logger.info(\n            `[Reconnect] ${currentStrategy} (${this.reconnectAttempts}) failed. Attempting with ${WebsocketReconnectStrategy[nextStrategy]}`,\n            error,\n          );\n        }\n      } while (\n        this.state.callingState !== CallingState.JOINED &&\n        this.state.callingState !== CallingState.RECONNECTING_FAILED &&\n        this.state.callingState !== CallingState.LEFT\n      );\n      this.logger.info('[Reconnect] Reconnection flow finished');\n    });\n  };\n\n  /**\n   * Initiates the reconnection flow with the \"fast\" strategy.\n   * @internal\n   */\n  private reconnectFast = async () => {\n    const reconnectStartTime = Date.now();\n    this.reconnectStrategy = WebsocketReconnectStrategy.FAST;\n    this.state.setCallingState(CallingState.RECONNECTING);\n    await this.doJoin(this.joinCallData);\n    await this.get(); // fetch the latest call state, as it might have changed\n    this.sfuStatsReporter?.sendReconnectionTime(\n      WebsocketReconnectStrategy.FAST,\n      (Date.now() - reconnectStartTime) / 1000,\n    );\n  };\n\n  /**\n   * Initiates the reconnection flow with the \"rejoin\" strategy.\n   * @internal\n   */\n  private reconnectRejoin = async () => {\n    const reconnectStartTime = Date.now();\n    this.reconnectStrategy = WebsocketReconnectStrategy.REJOIN;\n    this.state.setCallingState(CallingState.RECONNECTING);\n    await this.doJoin(this.joinCallData);\n    await this.restorePublishedTracks();\n    this.restoreSubscribedTracks();\n    this.sfuStatsReporter?.sendReconnectionTime(\n      WebsocketReconnectStrategy.REJOIN,\n      (Date.now() - reconnectStartTime) / 1000,\n    );\n  };\n\n  /**\n   * Initiates the reconnection flow with the \"migrate\" strategy.\n   * @internal\n   */\n  private reconnectMigrate = async () => {\n    const reconnectStartTime = Date.now();\n    const currentSfuClient = this.sfuClient;\n    if (!currentSfuClient) {\n      throw new Error('Cannot migrate without an active SFU client');\n    }\n\n    this.reconnectStrategy = WebsocketReconnectStrategy.MIGRATE;\n    this.state.setCallingState(CallingState.MIGRATING);\n    const currentSubscriber = this.subscriber;\n    const currentPublisher = this.publisher;\n\n    currentSubscriber?.detachEventHandlers();\n    currentPublisher?.detachEventHandlers();\n\n    const migrationTask = makeSafePromise(currentSfuClient.enterMigration());\n\n    try {\n      const currentSfu = currentSfuClient.edgeName;\n      await this.doJoin({ ...this.joinCallData, migrating_from: currentSfu });\n    } finally {\n      // cleanup the migration_from field after the migration is complete or failed\n      // as we don't want to keep dirty data in the join call data\n      delete this.joinCallData?.migrating_from;\n    }\n\n    await this.restorePublishedTracks();\n    this.restoreSubscribedTracks();\n\n    try {\n      // Wait for the migration to complete, then close the previous SFU client\n      // and the peer connection instances. In case of failure, the migration\n      // task would throw an error and REJOIN would be attempted.\n      await migrationTask();\n\n      // in MIGRATE, we can consider the call as joined only after\n      // `participantMigrationComplete` event is received, signaled by\n      // the `migrationTask`\n      this.state.setCallingState(CallingState.JOINED);\n    } finally {\n      currentSubscriber?.dispose();\n      currentPublisher?.dispose();\n\n      // and close the previous SFU client, without specifying close code\n      currentSfuClient.close(StreamSfuClient.NORMAL_CLOSURE, 'Migrating away');\n    }\n    this.sfuStatsReporter?.sendReconnectionTime(\n      WebsocketReconnectStrategy.MIGRATE,\n      (Date.now() - reconnectStartTime) / 1000,\n    );\n  };\n\n  /**\n   * Registers the various event handlers for reconnection.\n   *\n   * @internal\n   */\n  private registerReconnectHandlers = () => {\n    // handles the legacy \"goAway\" event\n    const unregisterGoAway = this.on('goAway', () => {\n      this.reconnect(WebsocketReconnectStrategy.MIGRATE, 'goAway').catch(\n        (err) => this.logger.warn('[Reconnect] Error reconnecting', err),\n      );\n    });\n\n    // handles the \"error\" event, through which the SFU can request a reconnect\n    const unregisterOnError = this.on('error', (e) => {\n      const { reconnectStrategy: strategy, error } = e;\n      if (strategy === WebsocketReconnectStrategy.UNSPECIFIED) return;\n      if (strategy === WebsocketReconnectStrategy.DISCONNECT) {\n        this.leave({ message: 'SFU instructed to disconnect' }).catch((err) => {\n          this.logger.warn(`Can't leave call after disconnect request`, err);\n        });\n      } else {\n        this.reconnect(strategy, error?.message || 'SFU Error').catch((err) => {\n          this.logger.warn('[Reconnect] Error reconnecting', err);\n        });\n      }\n    });\n\n    const unregisterNetworkChanged = this.streamClient.on(\n      'network.changed',\n      (e) => {\n        this.tracer.trace('network.changed', e);\n        if (!e.online) {\n          this.logger.debug('[Reconnect] Going offline');\n          if (!this.hasJoinedOnce) return;\n          this.lastOfflineTimestamp = Date.now();\n          // create a new task that would resolve when the network is available\n          const networkAvailableTask = promiseWithResolvers();\n          networkAvailableTask.promise.then(() => {\n            let strategy = WebsocketReconnectStrategy.FAST;\n            if (this.lastOfflineTimestamp) {\n              const offline = (Date.now() - this.lastOfflineTimestamp) / 1000;\n              if (offline > this.fastReconnectDeadlineSeconds) {\n                // We shouldn't attempt FAST if we have exceeded the deadline.\n                // The SFU would have already wiped out the session.\n                strategy = WebsocketReconnectStrategy.REJOIN;\n              }\n            }\n\n            this.reconnect(strategy, 'Going online').catch((err) => {\n              this.logger.warn(\n                '[Reconnect] Error reconnecting after going online',\n                err,\n              );\n            });\n          });\n          this.networkAvailableTask = networkAvailableTask;\n          this.sfuStatsReporter?.stop();\n          this.state.setCallingState(CallingState.OFFLINE);\n        } else {\n          this.logger.debug('[Reconnect] Going online');\n          this.sfuClient?.close(\n            StreamSfuClient.DISPOSE_OLD_SOCKET,\n            'Closing WS to reconnect after going online',\n          );\n          // we went online, release the previous waiters and reset the state\n          this.networkAvailableTask?.resolve();\n          this.networkAvailableTask = undefined;\n          this.sfuStatsReporter?.start();\n        }\n      },\n    );\n\n    this.leaveCallHooks\n      .add(unregisterGoAway)\n      .add(unregisterOnError)\n      .add(unregisterNetworkChanged);\n  };\n\n  /**\n   * Restores the published tracks after a reconnection.\n   * @internal\n   */\n  private restorePublishedTracks = async () => {\n    // the tracks need to be restored in their original order of publishing\n    // otherwise, we might get `m-lines order mismatch` errors\n    for (const trackType of this.trackPublishOrder) {\n      let mediaStream: MediaStream | undefined;\n      switch (trackType) {\n        case TrackType.AUDIO:\n          mediaStream = this.microphone.state.mediaStream;\n          break;\n        case TrackType.VIDEO:\n          mediaStream = this.camera.state.mediaStream;\n          break;\n        case TrackType.SCREEN_SHARE:\n          mediaStream = this.screenShare.state.mediaStream;\n          break;\n        // screen share audio can't exist without a screen share, so we handle it there\n        case TrackType.SCREEN_SHARE_AUDIO:\n        case TrackType.UNSPECIFIED:\n          break;\n        default:\n          ensureExhausted(trackType, 'Unknown track type');\n          break;\n      }\n\n      if (mediaStream) await this.publish(mediaStream, trackType);\n    }\n  };\n\n  /**\n   * Restores the subscribed tracks after a reconnection.\n   * @internal\n   */\n  private restoreSubscribedTracks = () => {\n    const { remoteParticipants } = this.state;\n    if (remoteParticipants.length <= 0) return;\n    this.dynascaleManager.applyTrackSubscriptions(undefined);\n  };\n\n  /**\n   * Starts publishing the given video stream to the call.\n   * @deprecated use `call.publish()`.\n   */\n  publishVideoStream = async (videoStream: MediaStream) => {\n    await this.publish(videoStream, TrackType.VIDEO);\n  };\n\n  /**\n   * Starts publishing the given audio stream to the call.\n   * @deprecated use `call.publish()`\n   */\n  publishAudioStream = async (audioStream: MediaStream) => {\n    await this.publish(audioStream, TrackType.AUDIO);\n  };\n\n  /**\n   * Starts publishing the given screen-share stream to the call.\n   * @deprecated use `call.publish()`\n   */\n  publishScreenShareStream = async (screenShareStream: MediaStream) => {\n    await this.publish(screenShareStream, TrackType.SCREEN_SHARE);\n  };\n\n  /**\n   * Publishes the given media stream.\n   *\n   * @param mediaStream the media stream to publish.\n   * @param trackType the type of the track to announce.\n   * @param options the publish options.\n   */\n  publish = async (\n    mediaStream: MediaStream,\n    trackType: TrackType,\n    options?: TrackPublishOptions,\n  ) => {\n    if (!this.sfuClient) throw new Error(`Call is not joined yet`);\n    // joining is in progress, and we should wait until the client is ready\n    await this.sfuClient.joinTask;\n\n    if (!this.permissionsContext.canPublish(trackType)) {\n      throw new Error(`No permission to publish ${TrackType[trackType]}`);\n    }\n\n    if (!this.publisher) throw new Error('Publisher is not initialized');\n\n    const [track] = isAudioTrackType(trackType)\n      ? mediaStream.getAudioTracks()\n      : mediaStream.getVideoTracks();\n\n    if (!track) {\n      throw new Error(\n        `There is no ${TrackType[trackType]} track in the stream`,\n      );\n    }\n\n    if (track.readyState === 'ended') {\n      throw new Error(`Can't publish ended tracks.`);\n    }\n\n    pushToIfMissing(this.trackPublishOrder, trackType);\n    await this.publisher.publish(track, trackType, options);\n\n    const trackTypes = [trackType];\n    if (trackType === TrackType.SCREEN_SHARE) {\n      const [audioTrack] = mediaStream.getAudioTracks();\n      if (audioTrack) {\n        const screenShareAudio = TrackType.SCREEN_SHARE_AUDIO;\n        pushToIfMissing(this.trackPublishOrder, screenShareAudio);\n        await this.publisher.publish(audioTrack, screenShareAudio, options);\n        trackTypes.push(screenShareAudio);\n      }\n    }\n\n    if (track.kind === 'video') {\n      // schedules calibration report - the SFU will use the performance stats\n      // to adjust the quality thresholds as early as possible\n      this.sfuStatsReporter?.scheduleOne(3000);\n    }\n\n    await this.updateLocalStreamState(mediaStream, ...trackTypes);\n  };\n\n  /**\n   * Stops publishing the given track type to the call, if it is currently being published.\n   *\n   * @param trackTypes the track types to stop publishing.\n   */\n  stopPublish = async (...trackTypes: TrackType[]) => {\n    if (!this.sfuClient || !this.publisher) return;\n    this.publisher.stopTracks(...trackTypes);\n    await this.updateLocalStreamState(undefined, ...trackTypes);\n  };\n\n  /**\n   * Updates the call state with the new stream.\n   *\n   * @param mediaStream the new stream to update the call state with.\n   * If undefined, the stream will be removed from the call state.\n   * @param trackTypes the track types to update the call state with.\n   */\n  private updateLocalStreamState = async (\n    mediaStream: MediaStream | undefined,\n    ...trackTypes: TrackType[]\n  ) => {\n    if (!this.sfuClient || !this.sfuClient.sessionId) return;\n    await this.notifyTrackMuteState(!mediaStream, ...trackTypes);\n\n    const { sessionId } = this.sfuClient;\n    for (const trackType of trackTypes) {\n      const streamStateProp = trackTypeToParticipantStreamKey(trackType);\n      if (!streamStateProp) continue;\n\n      this.state.updateParticipant(sessionId, (p) => ({\n        publishedTracks: mediaStream\n          ? pushToIfMissing([...p.publishedTracks], trackType)\n          : p.publishedTracks.filter((t) => t !== trackType),\n        [streamStateProp]: mediaStream,\n      }));\n    }\n  };\n\n  /**\n   * Updates the preferred publishing options\n   *\n   * @internal\n   * @param options the options to use.\n   */\n  updatePublishOptions = (options: ClientPublishOptions) => {\n    this.logger.warn(\n      '[call.updatePublishOptions]: You are manually overriding the publish options for this call. ' +\n        'This is not recommended, and it can cause call stability/compatibility issues. Use with caution.',\n    );\n    if (this.state.callingState === CallingState.JOINED) {\n      this.logger.warn(\n        'Updating publish options after joining the call does not have an effect',\n      );\n    }\n    this.clientPublishOptions = { ...this.clientPublishOptions, ...options };\n  };\n\n  /**\n   * Notifies the SFU that a noise cancellation process has started.\n   *\n   * @internal\n   */\n  notifyNoiseCancellationStarting = async () => {\n    return this.sfuClient?.startNoiseCancellation().catch((err) => {\n      this.logger.warn('Failed to notify start of noise cancellation', err);\n    });\n  };\n\n  /**\n   * Notifies the SFU that a noise cancellation process has stopped.\n   *\n   * @internal\n   */\n  notifyNoiseCancellationStopped = async () => {\n    return this.sfuClient?.stopNoiseCancellation().catch((err) => {\n      this.logger.warn('Failed to notify stop of noise cancellation', err);\n    });\n  };\n\n  /**\n   * Notifies the SFU about the mute state of the given track types.\n   * @internal\n   */\n  notifyTrackMuteState = async (muted: boolean, ...trackTypes: TrackType[]) => {\n    const key = `muteState.${this.cid}.${trackTypes.join('-')}`;\n    await withoutConcurrency(key, async () => {\n      if (!this.sfuClient) return;\n      await this.sfuClient.updateMuteStates(\n        trackTypes.map((trackType) => ({ trackType, muted })),\n      );\n    });\n  };\n\n  /**\n   * Will enhance the reported stats with additional participant-specific information (`callStatsReport$` state [store variable](./StreamVideoClient.md/#readonlystatestore)).\n   * This is usually helpful when detailed stats for a specific participant are needed.\n   *\n   * @param sessionId the sessionId to start reporting for.\n   */\n  startReportingStatsFor = (sessionId: string) => {\n    return this.statsReporter?.startReportingStatsFor(sessionId);\n  };\n\n  /**\n   * Opposite of `startReportingStatsFor`.\n   * Will turn off stats reporting for a specific participant.\n   *\n   * @param sessionId the sessionId to stop reporting for.\n   */\n  stopReportingStatsFor = (sessionId: string) => {\n    return this.statsReporter?.stopReportingStatsFor(sessionId);\n  };\n\n  /**\n   * Sets the frequency of the call stats reporting.\n   *\n   * @param intervalInMs the interval in milliseconds to report the stats.\n   */\n  setStatsReportingIntervalInMs = (intervalInMs: number) => {\n    this.statsReportingIntervalInMs = intervalInMs;\n  };\n\n  /**\n   * Resets the last sent reaction for the user holding the given `sessionId`. This is a local action, it won't reset the reaction on the backend.\n   *\n   * @param sessionId the session id.\n   */\n  resetReaction = (sessionId: string) => {\n    this.state.updateParticipant(sessionId, {\n      reaction: undefined,\n    });\n  };\n\n  /**\n   * Sets the list of criteria to sort the participants by.\n   *\n   * @param criteria the list of criteria to sort the participants by.\n   */\n  setSortParticipantsBy: CallState['setSortParticipantsBy'] = (criteria) => {\n    return this.state.setSortParticipantsBy(criteria);\n  };\n\n  /**\n   * Sends a reaction to the other call participants.\n   *\n   * @param reaction the reaction to send.\n   */\n  sendReaction = async (\n    reaction: SendReactionRequest,\n  ): Promise<SendReactionResponse> => {\n    return this.streamClient.post<SendReactionResponse, SendReactionRequest>(\n      `${this.streamClientBasePath}/reaction`,\n      reaction,\n    );\n  };\n\n  /**\n   * Blocks the user with the given `userId`.\n   *\n   * @param userId the id of the user to block.\n   */\n  blockUser = async (userId: string) => {\n    return this.streamClient.post<BlockUserResponse, BlockUserRequest>(\n      `${this.streamClientBasePath}/block`,\n      {\n        user_id: userId,\n      },\n    );\n  };\n\n  /**\n   * Unblocks the user with the given `userId`.\n   *\n   * @param userId the id of the user to unblock.\n   */\n  unblockUser = async (userId: string) => {\n    return this.streamClient.post<UnblockUserResponse, UnblockUserRequest>(\n      `${this.streamClientBasePath}/unblock`,\n      {\n        user_id: userId,\n      },\n    );\n  };\n\n  /**\n   * Kicks the user with the given `userId`.\n   * @param data the kick request.\n   */\n  kickUser = async (data: KickUserRequest): Promise<KickUserResponse> => {\n    return this.streamClient.post<KickUserResponse, KickUserRequest>(\n      `${this.streamClientBasePath}/kick`,\n      data,\n    );\n  };\n\n  /**\n   * Mutes the current user.\n   *\n   * @param type the type of the mute operation.\n   */\n  muteSelf = (type: TrackMuteType) => {\n    const myUserId = this.currentUserId;\n    if (myUserId) {\n      return this.muteUser(myUserId, type);\n    }\n  };\n\n  /**\n   * Mutes all the other participants.\n   *\n   * @param type the type of the mute operation.\n   */\n  muteOthers = (type: TrackMuteType) => {\n    const trackType = muteTypeToTrackType(type);\n    if (!trackType) return;\n    const userIdsToMute: string[] = [];\n    for (const participant of this.state.remoteParticipants) {\n      if (participant.publishedTracks.includes(trackType)) {\n        userIdsToMute.push(participant.userId);\n      }\n    }\n\n    if (userIdsToMute.length > 0) {\n      return this.muteUser(userIdsToMute, type);\n    }\n  };\n\n  /**\n   * Mutes the user with the given `userId`.\n   *\n   * @param userId the id of the user to mute.\n   * @param type the type of the mute operation.\n   */\n  muteUser = (userId: string | string[], type: TrackMuteType) => {\n    return this.streamClient.post<MuteUsersResponse, MuteUsersRequest>(\n      `${this.streamClientBasePath}/mute_users`,\n      {\n        user_ids: Array.isArray(userId) ? userId : [userId],\n        [type]: true,\n      },\n    );\n  };\n\n  /**\n   * Will mute all users in the call.\n   *\n   * @param type the type of the mute operation.\n   */\n  muteAllUsers = (type: TrackMuteType) => {\n    return this.streamClient.post<MuteUsersResponse, MuteUsersRequest>(\n      `${this.streamClientBasePath}/mute_users`,\n      {\n        mute_all_users: true,\n        [type]: true,\n      },\n    );\n  };\n\n  /**\n   * Starts recording the call\n   */\n  startRecording = async (request?: StartRecordingRequest) => {\n    return this.streamClient.post<\n      StartRecordingResponse,\n      StartRecordingRequest\n    >(`${this.streamClientBasePath}/start_recording`, request ? request : {});\n  };\n\n  /**\n   * Stops recording the call\n   */\n  stopRecording = async () => {\n    return this.streamClient.post<StopRecordingResponse>(\n      `${this.streamClientBasePath}/stop_recording`,\n      {},\n    );\n  };\n\n  /**\n   * Starts the transcription of the call.\n   *\n   * @param request the request data.\n   */\n  startTranscription = async (\n    request?: StartTranscriptionRequest,\n  ): Promise<StartTranscriptionResponse> => {\n    return this.streamClient.post<\n      StartTranscriptionResponse,\n      StartTranscriptionRequest\n    >(`${this.streamClientBasePath}/start_transcription`, request);\n  };\n\n  /**\n   * Stops the transcription of the call.\n   */\n  stopTranscription = async (): Promise<StopTranscriptionResponse> => {\n    return this.streamClient.post<StopTranscriptionResponse>(\n      `${this.streamClientBasePath}/stop_transcription`,\n    );\n  };\n\n  /**\n   * Starts the closed captions of the call.\n   */\n  startClosedCaptions = async (\n    options?: StartClosedCaptionsRequest,\n  ): Promise<StartClosedCaptionsResponse> => {\n    const trx = this.state.setCaptioning(true); // optimistic update\n    try {\n      return await this.streamClient.post<\n        StartClosedCaptionsResponse,\n        StartClosedCaptionsRequest\n      >(`${this.streamClientBasePath}/start_closed_captions`, options);\n    } catch (err) {\n      trx.rollback(); // revert the optimistic update\n      throw err;\n    }\n  };\n\n  /**\n   * Stops the closed captions of the call.\n   */\n  stopClosedCaptions = async (\n    options?: StopClosedCaptionsRequest,\n  ): Promise<StopClosedCaptionsResponse> => {\n    const trx = this.state.setCaptioning(false); // optimistic update\n    try {\n      return await this.streamClient.post<\n        StopClosedCaptionsResponse,\n        StopClosedCaptionsRequest\n      >(`${this.streamClientBasePath}/stop_closed_captions`, options);\n    } catch (err) {\n      trx.rollback(); // revert the optimistic update\n      throw err;\n    }\n  };\n\n  /**\n   * Updates the closed caption settings.\n   *\n   * @param config the closed caption settings to apply\n   */\n  updateClosedCaptionSettings = (config: Partial<ClosedCaptionsSettings>) => {\n    this.state.updateClosedCaptionSettings(config);\n  };\n\n  /**\n   * Sends a `call.permission_request` event to all users connected to the call.\n   * The call settings object contains information about which permissions can be requested during a call\n   * (for example, a user might be allowed to request permission to publish audio, but not video).\n   */\n  requestPermissions = async (\n    data: RequestPermissionRequest,\n  ): Promise<RequestPermissionResponse> => {\n    const { permissions } = data;\n    const canRequestPermissions = permissions.every((permission) =>\n      this.permissionsContext.canRequest(permission as OwnCapability),\n    );\n    if (!canRequestPermissions) {\n      throw new Error(\n        `You are not allowed to request permissions: ${permissions.join(', ')}`,\n      );\n    }\n    return this.streamClient.post<\n      RequestPermissionResponse,\n      RequestPermissionRequest\n    >(`${this.streamClientBasePath}/request_permission`, data);\n  };\n\n  /**\n   * Allows you to grant certain permissions to a user in a call.\n   * The permissions are specific to the call experience and do not survive the call itself.\n   *\n   * Supported permissions that can be granted are:\n   * - `send-audio`\n   * - `send-video`\n   * - `screenshare`\n   *\n   * @param userId the id of the user to grant permissions to.\n   * @param permissions the permissions to grant.\n   */\n  grantPermissions = async (userId: string, permissions: string[]) => {\n    return this.updateUserPermissions({\n      user_id: userId,\n      grant_permissions: permissions,\n    });\n  };\n\n  /**\n   * Allows you to revoke certain permissions from a user in a call.\n   * The permissions are specific to the call experience and do not survive the call itself.\n   *\n   * Supported permissions that can be revoked are:\n   * - `send-audio`\n   * - `send-video`\n   * - `screenshare`\n   *\n   * @param userId the id of the user to revoke permissions from.\n   * @param permissions the permissions to revoke.\n   */\n  revokePermissions = async (userId: string, permissions: string[]) => {\n    return this.updateUserPermissions({\n      user_id: userId,\n      revoke_permissions: permissions,\n    });\n  };\n\n  /**\n   * Allows you to grant or revoke a specific permission to a user in a call. The permissions are specific to the call experience and do not survive the call itself.\n   * When revoking a permission, this endpoint will also mute the relevant track from the user. This is similar to muting a user with the difference that the user will not be able to unmute afterwards.\n   * Supported permissions that can be granted or revoked: `send-audio`, `send-video` and `screenshare`.\n   *\n   * `call.permissions_updated` event is sent to all members of the call.\n   */\n  updateUserPermissions = async (data: UpdateUserPermissionsRequest) => {\n    return this.streamClient.post<\n      UpdateUserPermissionsResponse,\n      UpdateUserPermissionsRequest\n    >(`${this.streamClientBasePath}/user_permissions`, data);\n  };\n\n  /**\n   * Starts the livestreaming of the call.\n   *\n   * @param data the request data.\n   * @param params the request params.\n   */\n  goLive = async (data: GoLiveRequest = {}, params?: { notify?: boolean }) => {\n    return this.streamClient.post<GoLiveResponse, GoLiveRequest>(\n      `${this.streamClientBasePath}/go_live`,\n      data,\n      params,\n    );\n  };\n\n  /**\n   * Stops the livestreaming of the call.\n   */\n  stopLive = async (data: StopLiveRequest = {}) => {\n    return this.streamClient.post<StopLiveResponse>(\n      `${this.streamClientBasePath}/stop_live`,\n      data,\n    );\n  };\n\n  /**\n   * Starts the broadcasting of the call.\n   */\n  startHLS = async () => {\n    return this.streamClient.post<StartHLSBroadcastingResponse>(\n      `${this.streamClientBasePath}/start_broadcasting`,\n      {},\n    );\n  };\n\n  /**\n   * Stops the broadcasting of the call.\n   */\n  stopHLS = async () => {\n    return this.streamClient.post<StopHLSBroadcastingResponse>(\n      `${this.streamClientBasePath}/stop_broadcasting`,\n      {},\n    );\n  };\n\n  /**\n   * Starts the RTMP-out broadcasting of the call.\n   */\n  startRTMPBroadcasts = async (\n    data: StartRTMPBroadcastsRequest,\n  ): Promise<StartRTMPBroadcastsResponse> => {\n    return this.streamClient.post<\n      StartRTMPBroadcastsResponse,\n      StartRTMPBroadcastsRequest\n    >(`${this.streamClientBasePath}/rtmp_broadcasts`, data);\n  };\n\n  /**\n   * Stops all RTMP-out broadcasting of the call.\n   */\n  stopAllRTMPBroadcasts = async (): Promise<StopAllRTMPBroadcastsResponse> => {\n    return this.streamClient.post<StopAllRTMPBroadcastsResponse>(\n      `${this.streamClientBasePath}/rtmp_broadcasts/stop`,\n    );\n  };\n\n  /**\n   * Stops the RTMP-out broadcasting of the call specified by it's name.\n   */\n  stopRTMPBroadcast = async (\n    name: string,\n  ): Promise<StopRTMPBroadcastsResponse> => {\n    return this.streamClient.post<StopRTMPBroadcastsResponse>(\n      `${this.streamClientBasePath}/rtmp_broadcasts/${name}/stop`,\n    );\n  };\n\n  /**\n   * Starts frame by frame recording.\n   * Sends call.frame_recording_started events\n   */\n  startFrameRecording = async (\n    data: StartFrameRecordingRequest,\n  ): Promise<StartFrameRecordingResponse> => {\n    return this.streamClient.post<\n      StartFrameRecordingResponse,\n      StartFrameRecordingRequest\n    >(`${this.streamClientBasePath}/start_frame_recording`, data);\n  };\n\n  /**\n   * Stops frame recording.\n   */\n  stopFrameRecording = async (): Promise<StopFrameRecordingResponse> => {\n    return this.streamClient.post<StopFrameRecordingResponse>(\n      `${this.streamClientBasePath}/stop_frame_recording`,\n    );\n  };\n\n  /**\n   * Updates the call settings or custom data.\n   *\n   * @param updates the updates to apply to the call.\n   */\n  update = async (updates: UpdateCallRequest) => {\n    const response = await this.streamClient.patch<\n      UpdateCallResponse,\n      UpdateCallRequest\n    >(`${this.streamClientBasePath}`, updates);\n\n    const { call, members, own_capabilities } = response;\n    this.state.updateFromCallResponse(call);\n    this.state.setMembers(members);\n    this.state.setOwnCapabilities(own_capabilities);\n\n    return response;\n  };\n\n  /**\n   * Ends the call. Once the call is ended, it cannot be re-joined.\n   */\n  endCall = async () => {\n    return this.streamClient.post<EndCallResponse>(\n      `${this.streamClientBasePath}/mark_ended`,\n    );\n  };\n\n  /**\n   * Pins the given session to the top of the participants list.\n   *\n   * @param sessionId the sessionId to pin.\n   */\n  pin = (sessionId: string) => {\n    this.state.updateParticipant(sessionId, {\n      pin: {\n        isLocalPin: true,\n        pinnedAt: Date.now(),\n      },\n    });\n  };\n\n  /**\n   * Unpins the given session from the top of the participants list.\n   *\n   * @param sessionId the sessionId to unpin.\n   */\n  unpin = (sessionId: string) => {\n    this.state.updateParticipant(sessionId, {\n      pin: undefined,\n    });\n  };\n\n  /**\n   * Pins the given session to the top of the participants list for everyone\n   * in the call.\n   * You can execute this method only if you have the `pin-for-everyone` capability.\n   *\n   * @param request the request object.\n   */\n  pinForEveryone = async (request: PinRequest) => {\n    return this.streamClient.post<PinResponse, PinRequest>(\n      `${this.streamClientBasePath}/pin`,\n      request,\n    );\n  };\n\n  /**\n   * Unpins the given session from the top of the participants list for everyone\n   * in the call.\n   * You can execute this method only if you have the `pin-for-everyone` capability.\n   *\n   * @param request the request object.\n   */\n  unpinForEveryone = async (request: UnpinRequest) => {\n    return this.streamClient.post<UnpinResponse, UnpinRequest>(\n      `${this.streamClientBasePath}/unpin`,\n      request,\n    );\n  };\n\n  /**\n   * Query call members with filter query. The result won't be stored in call state.\n   * @param request\n   * @returns\n   */\n  queryMembers = (request?: Omit<QueryCallMembersRequest, 'type' | 'id'>) => {\n    return this.streamClient.post<\n      QueryCallMembersResponse,\n      QueryCallMembersRequest\n    >('/call/members', {\n      ...(request || {}),\n      id: this.id,\n      type: this.type,\n    });\n  };\n\n  /**\n   * Will update the call members.\n   *\n   * @param data the request data.\n   */\n  updateCallMembers = async (\n    data: UpdateCallMembersRequest,\n  ): Promise<UpdateCallMembersResponse> => {\n    return this.streamClient.post<\n      UpdateCallMembersResponse,\n      UpdateCallMembersRequest\n    >(`${this.streamClientBasePath}/members`, data);\n  };\n\n  /**\n   * Schedules an auto-drop timeout based on the call settings.\n   * Applicable only for ringing calls.\n   */\n  private scheduleAutoDrop = () => {\n    this.cancelAutoDrop();\n\n    const settings = this.state.settings;\n    if (!settings) return;\n    // ignore if the call is not ringing\n    if (this.state.callingState !== CallingState.RINGING) return;\n\n    const timeoutInMs = this.isCreatedByMe\n      ? settings.ring.auto_cancel_timeout_ms\n      : settings.ring.incoming_call_timeout_ms;\n\n    // 0 means no auto-drop\n    if (timeoutInMs <= 0) return;\n    this.dropTimeout = setTimeout(() => {\n      // the call might have stopped ringing by this point,\n      // e.g. it was already accepted and joined\n      if (this.state.callingState !== CallingState.RINGING) return;\n      this.leave({\n        reject: true,\n        reason: 'timeout',\n        message: `ringing timeout - ${this.isCreatedByMe ? 'no one accepted' : `user didn't interact with incoming call screen`}`,\n      }).catch((err) => {\n        this.logger.error('Failed to drop call', err);\n      });\n    }, timeoutInMs);\n  };\n\n  /**\n   * Cancels a scheduled auto-drop timeout.\n   */\n  private cancelAutoDrop = () => {\n    clearTimeout(this.dropTimeout);\n    this.dropTimeout = undefined;\n  };\n\n  /**\n   * Retrieves the list of recordings for the current call or call session.\n   *\n   * If `callSessionId` is provided, it will return the recordings for that call session.\n   * Otherwise, all recordings for the current call will be returned.\n   *\n   * @param callSessionId the call session id to retrieve recordings for.\n   */\n  queryRecordings = async (\n    callSessionId?: string,\n  ): Promise<ListRecordingsResponse> => {\n    let endpoint = this.streamClientBasePath;\n    if (callSessionId) {\n      endpoint = `${endpoint}/${callSessionId}`;\n    }\n    return this.streamClient.get<ListRecordingsResponse>(\n      `${endpoint}/recordings`,\n    );\n  };\n\n  /**\n   * Retrieves the list of transcriptions for the current call.\n   *\n   * @returns the list of transcriptions.\n   */\n  queryTranscriptions = async (): Promise<ListTranscriptionsResponse> => {\n    return this.streamClient.get<ListTranscriptionsResponse>(\n      `${this.streamClientBasePath}/transcriptions`,\n    );\n  };\n\n  /**\n   * Retrieve call statistics for a particular call session (historical).\n   * Here `callSessionID` is mandatory.\n   *\n   * @param callSessionID the call session ID to retrieve statistics for.\n   * @returns The call stats.\n   * @deprecated use `call.getCallReport` instead.\n   * @internal\n   */\n  getCallStats = async (callSessionID: string) => {\n    const endpoint = `${this.streamClientBasePath}/stats/${callSessionID}`;\n    return this.streamClient.get<GetCallStatsResponse>(endpoint);\n  };\n\n  /**\n   * Retrieve call report. If the `callSessionID` is not specified, then the\n   * report for the latest call session is retrieved. If it is specified, then\n   * the report for that particular session is retrieved if it exists.\n   *\n   * @param callSessionID the optional call session ID to retrieve statistics for\n   * @returns the call report\n   */\n  getCallReport = async (callSessionID: string = '') => {\n    const endpoint = `${this.streamClientBasePath}/report`;\n    const params = callSessionID !== '' ? { session_id: callSessionID } : {};\n    return this.streamClient.get<GetCallReportResponse>(endpoint, params);\n  };\n\n  /**\n   * Loads the call participant stats for the given parameters.\n   */\n  getCallParticipantsStats = async (opts: {\n    sessionId?: string;\n    userId?: string;\n    userSessionId?: string;\n    kind?: 'timeline' | 'details';\n  }): Promise<\n    | QueryCallSessionParticipantStatsResponse\n    | GetCallSessionParticipantStatsDetailsResponse\n    | QueryCallSessionParticipantStatsTimelineResponse\n    | undefined\n  > => {\n    const {\n      sessionId = this.state.session?.id,\n      userId = this.currentUserId,\n      userSessionId = this.unifiedSessionId,\n      kind = 'details',\n    } = opts;\n    if (!sessionId) return;\n    const base = `${this.streamClient.baseURL}/call_stats/${this.type}/${this.id}/${sessionId}`;\n    if (!userId || !userSessionId) {\n      return this.streamClient.get<QueryCallSessionParticipantStatsResponse>(\n        `${base}/participants`,\n      );\n    }\n    if (kind === 'details') {\n      return this.streamClient.get<GetCallSessionParticipantStatsDetailsResponse>(\n        `${base}/participant/${userId}/${userSessionId}/details`,\n      );\n    }\n    return this.streamClient.get<QueryCallSessionParticipantStatsTimelineResponse>(\n      `${base}/participants/${userId}/${userSessionId}/timeline`,\n    );\n  };\n\n  /**\n   * Submit user feedback for the call\n   *\n   * @param rating Rating between 1 and 5 denoting the experience of the user in the call\n   * @param reason The reason/description for the rating\n   * @param custom Custom data\n   */\n  submitFeedback = async (\n    rating: number,\n    {\n      reason,\n      custom,\n    }: Pick<CollectUserFeedbackRequest, 'reason' | 'custom'> = {},\n  ): Promise<CollectUserFeedbackResponse> => {\n    const { sdkName, sdkVersion, ...platform } = getSdkSignature(\n      await getClientDetails(),\n    );\n    return this.streamClient.post<\n      CollectUserFeedbackResponse,\n      CollectUserFeedbackRequest\n    >(`${this.streamClientBasePath}/feedback`, {\n      rating,\n      reason,\n      user_session_id: this.sfuClient?.sessionId,\n      sdk: sdkName,\n      sdk_version: sdkVersion,\n      custom: {\n        ...custom,\n        'x-stream-platform-data': platform,\n      },\n    });\n  };\n\n  /**\n   * Sends a custom event to all call participants.\n   *\n   * @param payload the payload to send.\n   */\n  sendCustomEvent = async (payload: { [key: string]: any }) => {\n    return this.streamClient.post<SendCallEventResponse, SendCallEventRequest>(\n      `${this.streamClientBasePath}/event`,\n      { custom: payload },\n    );\n  };\n\n  /**\n   * Applies the device configuration from the backend.\n   *\n   * @internal\n   */\n  applyDeviceConfig = async (\n    settings: CallSettingsResponse,\n    publish: boolean,\n  ) => {\n    await this.camera.apply(settings.video, publish).catch((err) => {\n      this.logger.warn('Camera init failed', err);\n    });\n    await this.microphone.apply(settings.audio, publish).catch((err) => {\n      this.logger.warn('Mic init failed', err);\n    });\n  };\n\n  /**\n   * Will begin tracking the given element for visibility changes within the\n   * configured viewport element (`call.setViewport`).\n   *\n   * @param element the element to track.\n   * @param sessionId the session id.\n   * @param trackType the video mode.\n   */\n  trackElementVisibility = <T extends HTMLElement>(\n    element: T,\n    sessionId: string,\n    trackType: VideoTrackType,\n  ) => {\n    return this.dynascaleManager.trackElementVisibility(\n      element,\n      sessionId,\n      trackType,\n    );\n  };\n\n  /**\n   * Sets the viewport element to track bound video elements for visibility.\n   *\n   * @param element the viewport element.\n   */\n  setViewport = <T extends HTMLElement>(element: T) => {\n    return this.dynascaleManager.setViewport(element);\n  };\n\n  /**\n   * Binds a DOM <video> element to the given session id.\n   * This method will make sure that the video element will play\n   * the correct video stream for the given session id.\n   *\n   * Under the hood, it would also keep track of the video element dimensions\n   * and update the subscription accordingly in order to optimize the bandwidth.\n   *\n   * If a \"viewport\" is configured, the video element will be automatically\n   * tracked for visibility and the subscription will be updated accordingly.\n   *\n   * @param videoElement the video element to bind to.\n   * @param sessionId the session id.\n   * @param trackType the kind of video.\n   */\n  bindVideoElement = (\n    videoElement: HTMLVideoElement,\n    sessionId: string,\n    trackType: VideoTrackType,\n  ) => {\n    const unbind = this.dynascaleManager.bindVideoElement(\n      videoElement,\n      sessionId,\n      trackType,\n    );\n\n    if (!unbind) return;\n    this.leaveCallHooks.add(unbind);\n    return () => {\n      this.leaveCallHooks.delete(unbind);\n      unbind();\n    };\n  };\n\n  /**\n   * Binds a DOM <audio> element to the given session id.\n   *\n   * This method will make sure that the audio element will\n   * play the correct audio stream for the given session id.\n   *\n   * @param audioElement the audio element to bind to.\n   * @param sessionId the session id.\n   * @param trackType the kind of audio.\n   */\n  bindAudioElement = (\n    audioElement: HTMLAudioElement,\n    sessionId: string,\n    trackType: AudioTrackType = 'audioTrack',\n  ) => {\n    const unbind = this.dynascaleManager.bindAudioElement(\n      audioElement,\n      sessionId,\n      trackType,\n    );\n\n    if (!unbind) return;\n    this.leaveCallHooks.add(unbind);\n    return () => {\n      this.leaveCallHooks.delete(unbind);\n      unbind();\n    };\n  };\n\n  /**\n   * Binds a DOM <img> element to this call's thumbnail (if enabled in settings).\n   *\n   * @param imageElement the image element to bind to.\n   * @param opts options for the binding.\n   */\n  bindCallThumbnailElement = (\n    imageElement: HTMLImageElement,\n    opts: {\n      fallbackImageSource?: string;\n    } = {},\n  ) => {\n    const handleError = () => {\n      imageElement.src =\n        opts.fallbackImageSource ||\n        'https://getstream.io/random_svg/?name=x&id=x';\n    };\n\n    const unsubscribe = createSubscription(\n      this.state.thumbnails$,\n      (thumbnails) => {\n        if (!thumbnails) return;\n        imageElement.addEventListener('error', handleError);\n\n        const thumbnailUrl = new URL(thumbnails.image_url);\n        thumbnailUrl.searchParams.set('w', String(imageElement.clientWidth));\n        thumbnailUrl.searchParams.set('h', String(imageElement.clientHeight));\n\n        imageElement.src = thumbnailUrl.toString();\n      },\n    );\n\n    return () => {\n      unsubscribe();\n      imageElement.removeEventListener('error', handleError);\n    };\n  };\n\n  /**\n   * Specify preference for incoming video resolution. The preference will\n   * be matched as close as possible, but actual resolution will depend\n   * on the video source quality and client network conditions. Will enable\n   * incoming video, if previously disabled.\n   *\n   * @param resolution preferred resolution, or `undefined` to clear preference\n   * @param sessionIds optionally specify session ids of the participants this\n   * preference has effect on. Affects all participants by default.\n   */\n  setPreferredIncomingVideoResolution = (\n    resolution: VideoDimension | undefined,\n    sessionIds?: string[],\n  ) => {\n    this.dynascaleManager.setVideoTrackSubscriptionOverrides(\n      resolution\n        ? {\n            enabled: true,\n            dimension: resolution,\n          }\n        : undefined,\n      sessionIds,\n    );\n    this.dynascaleManager.applyTrackSubscriptions();\n  };\n\n  /**\n   * Enables or disables incoming video from all remote call participants,\n   * and removes any preference for preferred resolution.\n   */\n  setIncomingVideoEnabled = (enabled: boolean) => {\n    this.dynascaleManager.setVideoTrackSubscriptionOverrides(\n      enabled ? undefined : { enabled: false },\n    );\n    this.dynascaleManager.applyTrackSubscriptions();\n  };\n\n  /**\n   * Sets the maximum amount of time a user can remain waiting for a reconnect\n   * after a network disruption\n   * @param timeoutSeconds Timeout in seconds, or 0 to keep reconnecting indefinetely\n   */\n  setDisconnectionTimeout = (timeoutSeconds: number) => {\n    this.disconnectionTimeoutSeconds = timeoutSeconds;\n  };\n\n  /**\n   * Enables the provided client capabilities.\n   */\n  enableClientCapabilities = (...capabilities: ClientCapability[]) => {\n    for (const capability of capabilities) {\n      this.clientCapabilities.add(capability);\n    }\n  };\n\n  /**\n   * Disables the provided client capabilities.\n   */\n  disableClientCapabilities = (...capabilities: ClientCapability[]) => {\n    for (const capability of capabilities) {\n      this.clientCapabilities.delete(capability);\n    }\n  };\n}\n", "export default null;", "export const APIErrorCodes: Record<number, string> = {\n  [-1]: 'InternalSystemError',\n  2: 'AccessKeyError',\n  3: 'AuthenticationFailedError',\n  4: 'InputError',\n  5: 'AuthenticationError',\n  6: 'DuplicateUsernameError',\n  9: 'RateLimitError',\n  16: 'DoesNotExistError',\n  17: 'NotAllowedError',\n  18: 'EventNotSupportedError',\n  19: 'ChannelFeatureNotSupportedError',\n  20: 'MessageTooLongError',\n  21: 'MultipleNestingLevelError',\n  22: 'PayloadTooBigError',\n  23: 'RequestTimeoutError',\n  24: 'MaxHeaderSizeExceededError',\n  40: 'AuthErrorTokenExpired',\n  41: 'AuthErrorTokenNotValidYet',\n  42: 'AuthErrorTokenUsedBeforeIssuedAt',\n  43: 'AuthErrorTokenSignatureInvalid',\n  44: 'CustomCommandEndpointMissingError',\n  45: 'CustomCommandEndpointCallError',\n  46: 'ConnectionIDNotFoundError',\n  60: 'CoolDownError',\n  69: 'ErrWrongRegion',\n  70: 'ErrQueryChannelPermissions',\n  71: 'ErrTooManyConnections',\n  73: 'MessageModerationFailedError',\n  99: 'AppSuspendedError',\n};\n", "import { StreamClient } from './client';\nimport {\n  addConnectionEventListeners,\n  isCloseEvent,\n  KnownCodes,\n  removeConnectionEventListeners,\n  retryInterval,\n  sleep,\n} from './utils';\nimport type { StreamVideoEvent, UR } from './types';\nimport type { LogLevel } from '@stream-io/logger';\nimport type {\n  ConnectedEvent,\n  ConnectionErrorEvent,\n  WSAuthMessage,\n} from '../../gen/coordinator';\nimport { makeSafePromise, type SafePromise } from '../../helpers/promise';\nimport { getTimers } from '../../timers';\nimport { APIErrorCodes } from './errors';\n\n/**\n * StableWSConnection - A WS connection that reconnects upon failure.\n * - the browser will sometimes report that you're online or offline\n * - the WS connection can break and fail (there is a 30s health check)\n * - sometimes your WS connection will seem to work while the user is in fact offline\n * - to speed up online/offline detection you can use the window.addEventListener('offline');\n *\n * There are 4 ways in which a connection can become unhealthy:\n * - websocket.onerror is called\n * - websocket.onclose is called\n * - the health check fails and no event is received for ~40 seconds\n * - the browser indicates the connection is now offline\n *\n * There are 2 assumptions we make about the server:\n * - state can be recovered by querying the channel again\n * - if the servers fails to publish a message to the client, the WS connection is destroyed\n */\nexport class StableWSConnection {\n  // local vars\n  connectionID?: string;\n  private connectionOpenSafe?: SafePromise<ConnectedEvent>;\n  consecutiveFailures: number;\n  pingInterval: number;\n  healthCheckTimeoutRef?: number;\n  isConnecting: boolean;\n  isDisconnected: boolean;\n  isHealthy: boolean;\n  isConnectionOpenResolved?: boolean;\n  lastEvent: Date | null;\n  connectionCheckTimeout: number;\n  connectionCheckTimeoutRef?: NodeJS.Timeout;\n  rejectConnectionOpen?: (\n    reason?: Error & {\n      code?: string | number;\n      isWSFailure?: boolean;\n      StatusCode?: string | number;\n    },\n  ) => void;\n  resolveConnectionOpen?: (value: ConnectedEvent) => void;\n  totalFailures: number;\n  ws?: WebSocket;\n  wsID: number;\n\n  client: StreamClient;\n\n  constructor(client: StreamClient) {\n    this.client = client;\n    /** consecutive failures influence the duration of the timeout */\n    this.consecutiveFailures = 0;\n    /** keep track of the total number of failures */\n    this.totalFailures = 0;\n    /** We only make 1 attempt to reconnect at the same time.. */\n    this.isConnecting = false;\n    /** To avoid reconnect if client is disconnected */\n    this.isDisconnected = false;\n    /** Boolean that indicates if the connection promise is resolved */\n    this.isConnectionOpenResolved = false;\n    /** Boolean that indicates if we have a working connection to the server */\n    this.isHealthy = false;\n    /** Incremented when a new WS connection is made */\n    this.wsID = 1;\n    /** Store the last event time for health checks */\n    this.lastEvent = null;\n    /** Send a health check message every 25 seconds */\n    this.pingInterval = 25 * 1000;\n    this.connectionCheckTimeout = this.pingInterval + 10 * 1000;\n\n    addConnectionEventListeners(this.onlineStatusChanged);\n  }\n\n  _log = (msg: string, extra: UR = {}, level: LogLevel = 'info') => {\n    this.client.logger[level](`connection:${msg}`, extra);\n  };\n\n  setClient = (client: StreamClient) => {\n    this.client = client;\n  };\n\n  /**\n   * connect - Connect to the WS URL\n   * the default 15s timeout allows between 2~3 tries\n   * @return {ConnectAPIResponse<ConnectedEvent>} Promise that completes once the first health check message is received\n   */\n  async connect(timeout = 15000) {\n    if (this.isConnecting) {\n      throw Error(\n        `You've called connect twice, can only attempt 1 connection at the time`,\n      );\n    }\n\n    this.isDisconnected = false;\n\n    try {\n      const healthCheck = await this._connect();\n      this.consecutiveFailures = 0;\n\n      this._log(\n        `connect() - Established ws connection with healthcheck: ${healthCheck}`,\n      );\n    } catch (error) {\n      this.isHealthy = false;\n      this.consecutiveFailures += 1;\n\n      if (\n        // @ts-expect-error type issue\n        error.code === KnownCodes.TOKEN_EXPIRED &&\n        !this.client.tokenManager.isStatic()\n      ) {\n        this._log(\n          'connect() - WS failure due to expired token, so going to try to reload token and reconnect',\n        );\n        this._reconnect({ refreshToken: true });\n      } else {\n        // @ts-expect-error type issue\n        if (!error.isWSFailure) {\n          // API rejected the connection and we should not retry\n          throw new Error(\n            JSON.stringify({\n              // @ts-expect-error type issue\n              code: error.code,\n              // @ts-expect-error type issue\n              StatusCode: error.StatusCode,\n              // @ts-expect-error type issue\n              message: error.message,\n              // @ts-expect-error type issue\n              isWSFailure: error.isWSFailure,\n            }),\n          );\n        }\n      }\n    }\n\n    return await this._waitForHealthy(timeout);\n  }\n\n  /**\n   * _waitForHealthy polls the promise connection to see if its resolved until it times out\n   * the default 15s timeout allows between 2~3 tries\n   * @param timeout duration(ms)\n   */\n  async _waitForHealthy(timeout = 15000) {\n    return Promise.race([\n      (async () => {\n        const interval = 50; // ms\n        for (let i = 0; i <= timeout; i += interval) {\n          try {\n            return await this.connectionOpen;\n          } catch (error: any) {\n            if (i === timeout) {\n              throw new Error(\n                JSON.stringify({\n                  code: error.code,\n                  StatusCode: error.StatusCode,\n                  message: error.message,\n                  isWSFailure: error.isWSFailure,\n                }),\n              );\n            }\n            await sleep(interval);\n          }\n        }\n      })(),\n      (async () => {\n        await sleep(timeout);\n        this.isConnecting = false;\n        throw new Error(\n          JSON.stringify({\n            code: '',\n            StatusCode: '',\n            message: 'initial WS connection could not be established',\n            isWSFailure: true,\n          }),\n        );\n      })(),\n    ]);\n  }\n\n  /**\n   * Builds and returns the url for websocket.\n   * @private\n   * @returns url string\n   */\n  _buildUrl = () => {\n    const params = new URLSearchParams();\n    params.set('api_key', this.client.key);\n    params.set('stream-auth-type', this.client.getAuthType());\n    params.set('X-Stream-Client', this.client.getUserAgent());\n\n    return `${this.client.wsBaseURL}/connect?${params.toString()}`;\n  };\n\n  /**\n   * disconnect - Disconnect the connection and doesn't recover...\n   *\n   */\n  disconnect(timeout?: number) {\n    this._log(\n      `disconnect() - Closing the websocket connection for wsID ${this.wsID}`,\n    );\n\n    this.wsID += 1;\n    this.isConnecting = false;\n    this.isDisconnected = true;\n\n    // start by removing all the listeners\n    if (this.healthCheckTimeoutRef) {\n      getTimers().clearInterval(this.healthCheckTimeoutRef);\n    }\n    if (this.connectionCheckTimeoutRef) {\n      clearInterval(this.connectionCheckTimeoutRef);\n    }\n\n    removeConnectionEventListeners(this.onlineStatusChanged);\n\n    this.isHealthy = false;\n\n    let isClosedPromise: Promise<void>;\n    // and finally close...\n    // Assigning to local here because we will remove it from this before the\n    // promise resolves.\n    const { ws } = this;\n    if (ws && ws.close && ws.readyState === ws.OPEN) {\n      isClosedPromise = new Promise((resolve) => {\n        const onclose = (event: CloseEvent) => {\n          this._log(\n            `disconnect() - resolving isClosedPromise ${\n              event ? 'with' : 'without'\n            } close frame`,\n            { event },\n          );\n          resolve();\n        };\n\n        ws.onclose = onclose;\n        // In case we don't receive close frame websocket server in time,\n        // lets not wait for more than 1 second.\n        setTimeout(onclose, timeout != null ? timeout : 1000);\n      });\n\n      this._log(\n        `disconnect() - Manually closed connection by calling client.disconnect()`,\n      );\n\n      ws.close(\n        KnownCodes.WS_CLOSED_SUCCESS,\n        'Manually closed connection by calling client.disconnect()',\n      );\n    } else {\n      this._log(\n        `disconnect() - ws connection doesn't exist or it is already closed.`,\n      );\n      isClosedPromise = Promise.resolve();\n    }\n\n    delete this.ws;\n\n    return isClosedPromise;\n  }\n\n  /**\n   * _connect - Connect to the WS endpoint\n   *\n   * @return {ConnectAPIResponse<ConnectedEvent>} Promise that completes once the first health check message is received\n   */\n  async _connect() {\n    if (this.isConnecting) return; // ignore _connect if it's currently trying to connect\n    this.isConnecting = true;\n    let isTokenReady = false;\n    try {\n      this._log(`_connect() - waiting for token`);\n      await this.client.tokenManager.tokenReady();\n      isTokenReady = true;\n    } catch {\n      // token provider has failed before, so try again\n    }\n\n    try {\n      if (!isTokenReady) {\n        this._log(\n          `_connect() - tokenProvider failed before, so going to retry`,\n        );\n        await this.client.tokenManager.loadToken();\n      }\n\n      if (!this.client.isConnectionIsPromisePending) {\n        this.client._setupConnectionIdPromise();\n      }\n      this._setupConnectionPromise();\n      const wsURL = this._buildUrl();\n      this._log(`_connect() - Connecting to ${wsURL}`);\n      const WS = this.client.options.WebSocketImpl ?? WebSocket;\n      this.ws = new WS(wsURL);\n      this.ws.onopen = this.onopen.bind(this, this.wsID);\n      this.ws.onclose = this.onclose.bind(this, this.wsID);\n      this.ws.onerror = this.onerror.bind(this, this.wsID);\n      this.ws.onmessage = this.onmessage.bind(this, this.wsID);\n      const response = await this.connectionOpen;\n      this.isConnecting = false;\n\n      if (response) {\n        this.connectionID = response.connection_id;\n        this.client.resolveConnectionId?.(this.connectionID);\n        return response;\n      }\n    } catch (err) {\n      this.client._setupConnectionIdPromise();\n      this.isConnecting = false;\n      // @ts-expect-error type issue\n      this._log(`_connect() - Error - `, err);\n      this.client.rejectConnectionId?.(err);\n      throw err;\n    }\n  }\n\n  /**\n   * _reconnect - Retry the connection to WS endpoint\n   *\n   * @param {{ interval?: number; refreshToken?: boolean }} options Following options are available\n   *\n   * - `interval`\t{int}\t\t\tnumber of ms that function should wait before reconnecting\n   * - `refreshToken` {boolean}\treload/refresh user token be refreshed before attempting reconnection.\n   */\n  async _reconnect(\n    options: { interval?: number; refreshToken?: boolean } = {},\n  ): Promise<void> {\n    this._log('_reconnect() - Initiating the reconnect');\n\n    // only allow 1 connection at the time\n    if (this.isConnecting || this.isHealthy) {\n      this._log('_reconnect() - Abort (1) since already connecting or healthy');\n      return;\n    }\n\n    // reconnect in case of on error or on close\n    // also reconnect if the health check cycle fails\n    let interval = options.interval;\n    if (!interval) {\n      interval = retryInterval(this.consecutiveFailures);\n    }\n    // reconnect, or try again after a little while...\n    await sleep(interval);\n\n    // Check once again if by some other call to _reconnect is active or connection is\n    // already restored, then no need to proceed.\n    if (this.isConnecting || this.isHealthy) {\n      this._log('_reconnect() - Abort (2) since already connecting or healthy');\n      return;\n    }\n\n    if (this.isDisconnected) {\n      this._log('_reconnect() - Abort (3) since disconnect() is called');\n      return;\n    }\n\n    this._log('_reconnect() - Destroying current WS connection');\n\n    // cleanup the old connection\n    this._destroyCurrentWSConnection();\n\n    if (options.refreshToken) {\n      await this.client.tokenManager.loadToken();\n    }\n\n    try {\n      await this._connect();\n      this._log('_reconnect() - Waiting for recoverCallBack');\n      // await this.client.recoverState();\n      this._log('_reconnect() - Finished recoverCallBack');\n\n      this.consecutiveFailures = 0;\n    } catch (error: any) {\n      this.isHealthy = false;\n      this.consecutiveFailures += 1;\n      if (\n        error.code === KnownCodes.TOKEN_EXPIRED &&\n        !this.client.tokenManager.isStatic()\n      ) {\n        this._log(\n          '_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect',\n        );\n\n        return this._reconnect({ refreshToken: true });\n      }\n\n      // reconnect on WS failures, don't reconnect if there is a code bug\n      if (error.isWSFailure) {\n        this._log('_reconnect() - WS failure, so going to try to reconnect');\n\n        this._reconnect();\n      }\n    }\n    this._log('_reconnect() - == END ==');\n  }\n\n  /**\n   * onlineStatusChanged - this function is called when the browser connects or disconnects from the internet.\n   *\n   * @param {Event} event Event with type online or offline\n   *\n   */\n  onlineStatusChanged = (event: Event) => {\n    if (event.type === 'offline') {\n      // mark the connection as down\n      this._log('onlineStatusChanged() - Status changing to offline');\n      // we know that the app is offline so dispatch the unhealthy connection event immediately\n      this._setHealth(false, true);\n    } else if (event.type === 'online') {\n      // retry right now...\n      // We check this.isHealthy, not sure if it's always\n      // smart to create a new WS connection if the old one is still up and running.\n      // it's possible we didn't miss any messages, so this process is just expensive and not needed.\n      this._log(\n        `onlineStatusChanged() - Status changing to online. isHealthy: ${this.isHealthy}`,\n      );\n      if (!this.isHealthy) {\n        this._reconnect({ interval: 10 });\n      }\n    }\n  };\n\n  onopen = (wsID: number) => {\n    if (this.wsID !== wsID) return;\n\n    const user = this.client.user;\n    if (!user) {\n      this.client.logger.error(`User not set, can't connect to WS`);\n      return;\n    }\n\n    const token = this.client._getToken();\n    if (!token) {\n      this.client.logger.error(`Token not set, can't connect authenticate`);\n      return;\n    }\n\n    const authMessage = JSON.stringify({\n      token,\n      user_details: {\n        id: user.id,\n        name: user.name,\n        image: user.image,\n        custom: user.custom,\n      },\n    } as WSAuthMessage);\n\n    this._log(`onopen() - Sending auth message ${authMessage}`, {}, 'trace');\n\n    this.ws?.send(authMessage);\n    this._log('onopen() - onopen callback', { wsID });\n  };\n\n  onmessage = (wsID: number, event: MessageEvent) => {\n    if (this.wsID !== wsID) return;\n\n    const data =\n      typeof event.data === 'string'\n        ? (JSON.parse(event.data) as StreamVideoEvent)\n        : null;\n\n    // we wait till the first message before we consider the connection open.\n    // the reason for this is that auth errors and similar errors trigger a ws.onopen and immediately\n    // after that a ws.onclose.\n    if (\n      !this.isConnectionOpenResolved &&\n      data &&\n      data.type === 'connection.error'\n    ) {\n      this.isConnectionOpenResolved = true;\n      if (data.error) {\n        this.rejectConnectionOpen?.(this._errorFromWSEvent(data, false));\n        return;\n      }\n    }\n\n    // trigger the event..\n    this.lastEvent = new Date();\n\n    if (\n      data &&\n      (data.type === 'health.check' || data.type === 'connection.ok')\n    ) {\n      // the initial health-check should come from the client\n      this.scheduleNextPing();\n    }\n\n    if (data && data.type === 'connection.ok') {\n      this.resolveConnectionOpen?.(data);\n      this._setHealth(true);\n    }\n\n    if (data && data.type === 'connection.error' && data.error) {\n      const { code } = data.error;\n      this.isHealthy = false;\n      this.isConnecting = false;\n      this.consecutiveFailures += 1;\n      if (\n        code === KnownCodes.TOKEN_EXPIRED &&\n        !this.client.tokenManager.isStatic()\n      ) {\n        clearTimeout(this.connectionCheckTimeoutRef);\n        this._log(\n          'connect() - WS failure due to expired token, so going to try to reload token and reconnect',\n        );\n        this._reconnect({ refreshToken: true });\n      }\n    }\n\n    if (data) {\n      data.received_at = new Date();\n      this.client.dispatchEvent(data);\n    }\n    this.scheduleConnectionCheck();\n  };\n\n  onclose = (wsID: number, event: CloseEvent) => {\n    if (this.wsID !== wsID) return;\n\n    this._log('onclose() - onclose callback - ' + event.code, { event, wsID });\n\n    if (event.code === KnownCodes.WS_CLOSED_SUCCESS) {\n      // this is a permanent error raised by stream..\n      // usually caused by invalid auth details\n      const error = new Error(\n        `WS connection reject with error ${event.reason}`,\n      );\n\n      // @ts-expect-error type issue\n      error.reason = event.reason;\n      // @ts-expect-error type issue\n      error.code = event.code;\n      // @ts-expect-error type issue\n      error.wasClean = event.wasClean;\n      // @ts-expect-error type issue\n      error.target = event.target;\n\n      this.rejectConnectionOpen?.(error);\n      this._log(`onclose() - WS connection reject with error ${event.reason}`, {\n        event,\n      });\n    } else {\n      this.consecutiveFailures += 1;\n      this.totalFailures += 1;\n      this._setHealth(false);\n      this.isConnecting = false;\n\n      this.rejectConnectionOpen?.(this._errorFromWSEvent(event));\n\n      this._log(`onclose() - WS connection closed. Calling reconnect ...`, {\n        event,\n      });\n\n      // reconnect if its an abnormal failure\n      this._reconnect();\n    }\n  };\n\n  onerror = (wsID: number, event: Event) => {\n    if (this.wsID !== wsID) return;\n\n    this.consecutiveFailures += 1;\n    this.totalFailures += 1;\n    this._setHealth(false);\n    this.isConnecting = false;\n    this._log(`onerror() - WS connection resulted into error`, { event });\n\n    this._reconnect();\n  };\n\n  /**\n   * _setHealth - Sets the connection to healthy or unhealthy.\n   * Broadcasts an event in case the connection status changed.\n   *\n   * @param {boolean} healthy boolean indicating if the connection is healthy or not\n   * @param {boolean} dispatchImmediately boolean indicating to dispatch event immediately even if the connection is unhealthy\n   */\n  _setHealth = (healthy: boolean, dispatchImmediately = false) => {\n    if (healthy === this.isHealthy) return;\n\n    this.isHealthy = healthy;\n\n    if (this.isHealthy || dispatchImmediately) {\n      this.client.dispatchEvent({\n        type: 'connection.changed',\n        online: this.isHealthy,\n      });\n      return;\n    }\n\n    // we're offline, wait few seconds and fire and event if still offline\n    setTimeout(() => {\n      if (this.isHealthy) return;\n      this.client.dispatchEvent({\n        type: 'connection.changed',\n        online: this.isHealthy,\n      });\n    }, 5000);\n  };\n\n  /**\n   * _errorFromWSEvent - Creates an error object for the WS event\n   */\n  private _errorFromWSEvent = (\n    event: CloseEvent | ConnectionErrorEvent,\n    isWSFailure = true,\n  ) => {\n    let code: number;\n    let statusCode: number;\n    let message: string;\n    if (isCloseEvent(event)) {\n      code = event.code;\n      message = event.reason;\n      statusCode = 0;\n    } else {\n      const { error } = event;\n      code = error.code;\n      message = error.message;\n      statusCode = error.StatusCode;\n    }\n\n    const msg = `WS failed with code: ${code}: ${APIErrorCodes[code] || code} and reason: ${message}`;\n    this._log(msg, { event }, 'warn');\n    const error = new Error(msg) as Error & {\n      code?: number;\n      isWSFailure?: boolean;\n      StatusCode?: number;\n    };\n    error.code = code;\n    /**\n     * StatusCode does not exist on any event types but has been left\n     * as is to preserve JS functionality during the TS implementation\n     */\n    error.StatusCode = statusCode;\n    error.isWSFailure = isWSFailure;\n    return error;\n  };\n\n  /**\n   * _destroyCurrentWSConnection - Removes the current WS connection\n   *\n   */\n  _destroyCurrentWSConnection() {\n    // increment the ID, meaning we will ignore all messages from the old\n    // ws connection from now on.\n    this.wsID += 1;\n\n    try {\n      this?.ws?.close();\n    } catch {\n      // we don't care\n    }\n  }\n\n  /**\n   * _setupPromise - sets up the this.connectOpen promise\n   */\n  _setupConnectionPromise = () => {\n    this.isConnectionOpenResolved = false;\n    /** a promise that is resolved once ws.open is called */\n    this.connectionOpenSafe = makeSafePromise(\n      new Promise<ConnectedEvent>((resolve, reject) => {\n        this.resolveConnectionOpen = resolve;\n        this.rejectConnectionOpen = reject;\n      }),\n    );\n  };\n\n  get connectionOpen() {\n    return this.connectionOpenSafe?.();\n  }\n\n  /**\n   * Schedules a next health check ping for websocket.\n   */\n  scheduleNextPing = () => {\n    const timers = getTimers();\n    if (this.healthCheckTimeoutRef) {\n      timers.clearTimeout(this.healthCheckTimeoutRef);\n    }\n\n    // 30 seconds is the recommended interval (messenger uses this)\n    this.healthCheckTimeoutRef = timers.setTimeout(() => {\n      // send the healthcheck..., server replies with a health check event\n      const data = [{ type: 'health.check', client_id: this.client.clientID }];\n      // try to send on the connection\n      try {\n        this.ws?.send(JSON.stringify(data));\n      } catch {\n        // error will already be detected elsewhere\n      }\n    }, this.pingInterval);\n  };\n\n  /**\n   * scheduleConnectionCheck - schedules a check for time difference between last received event and now.\n   * If the difference is more than 35 seconds, it means our health check logic has failed and websocket needs\n   * to be reconnected.\n   */\n  scheduleConnectionCheck = () => {\n    clearTimeout(this.connectionCheckTimeoutRef);\n    this.connectionCheckTimeoutRef = setTimeout(() => {\n      const now = new Date();\n      if (\n        this.lastEvent &&\n        now.getTime() - this.lastEvent.getTime() > this.connectionCheckTimeout\n      ) {\n        this._log('scheduleConnectionCheck - going to reconnect');\n        this._setHealth(false);\n        this._reconnect();\n      }\n    }, this.connectionCheckTimeout);\n  };\n}\n", "export function getUserFromToken(token: string) {\n  const fragments = token.split('.');\n  if (fragments.length !== 3) {\n    return '';\n  }\n  const b64Payload = fragments[1];\n  const payload = decodeBase64(b64Payload);\n  const data = JSON.parse(payload);\n  return data.user_id as string | undefined;\n}\n\n// base-64 decoder throws exception if encoded string is not padded by '=' to make string length\n// in multiples of 4. So gonna use our own method for this purpose to keep backwards compatibility\n// https://github.com/beatgammit/base64-js/blob/master/index.js#L26\nconst decodeBase64 = (s: string): string => {\n  const e = {} as { [key: string]: number },\n    w = String.fromCharCode,\n    L = s.length;\n  let i,\n    b = 0,\n    c,\n    x,\n    l = 0,\n    a,\n    r = '';\n  const A = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n  for (i = 0; i < 64; i++) {\n    e[A.charAt(i)] = i;\n  }\n  for (x = 0; x < L; x++) {\n    c = e[s.charAt(x)];\n    b = (b << 6) + c;\n    l += 6;\n    while (l >= 8) {\n      if ((a = (b >>> (l -= 8)) & 0xff) || x < L - 2) r += w(a);\n    }\n  }\n  return r;\n};\n", "import { getUserFromToken } from './signing';\nimport { isFunction } from './utils';\nimport type { TokenOrProvider, UserWithId } from './types';\n\n/**\n * TokenManager\n *\n * Handles all the operations around user token.\n */\nexport class TokenManager {\n  private loadTokenPromise: Promise<string> | null = null;\n  private type: 'static' | 'provider' = 'static';\n  private readonly secret?: string;\n  private token?: string;\n  private tokenProvider?: TokenOrProvider;\n  private user?: UserWithId;\n  private isAnonymous?: boolean;\n\n  constructor(secret?: string) {\n    this.secret = secret;\n  }\n\n  /**\n   * Set the static string token or token provider.\n   * Token provider should return a token string or a promise which resolves to string token.\n   *\n   * @param {TokenOrProvider} tokenOrProvider - the token or token provider.\n   * @param {UserResponse} user - the user object.\n   * @param {boolean} isAnonymous - whether the user is anonymous or not.\n   */\n  setTokenOrProvider = async (\n    tokenOrProvider: TokenOrProvider,\n    user: UserWithId,\n    isAnonymous: boolean,\n  ) => {\n    this.user = user;\n    this.isAnonymous = isAnonymous;\n    this.validateToken(tokenOrProvider);\n\n    if (isFunction(tokenOrProvider)) {\n      this.tokenProvider = tokenOrProvider;\n      this.type = 'provider';\n    }\n\n    if (typeof tokenOrProvider === 'string') {\n      this.token = tokenOrProvider;\n      this.type = 'static';\n    }\n\n    await this.loadToken();\n  };\n\n  /**\n   * Resets the token manager.\n   * Useful for client disconnection or switching user.\n   */\n  reset = () => {\n    this.token = undefined;\n    this.tokenProvider = undefined;\n    this.type = 'static';\n    this.user = undefined;\n    this.loadTokenPromise = null;\n  };\n\n  // Validates the user token.\n  validateToken = (tokenOrProvider: TokenOrProvider) => {\n    // allow empty token for anon user\n    if (this.user && this.isAnonymous && !tokenOrProvider) return;\n\n    // Don't allow empty token for non-server side client.\n    if (!this.secret && !tokenOrProvider) {\n      throw new Error('User token can not be empty');\n    }\n\n    if (typeof tokenOrProvider !== 'string' && !isFunction(tokenOrProvider)) {\n      throw new Error('User token should either be a string or a function');\n    }\n\n    if (typeof tokenOrProvider === 'string') {\n      // Allow empty token for anonymous users\n      if (this.isAnonymous && tokenOrProvider === '') return;\n\n      const tokenUserId = getUserFromToken(tokenOrProvider);\n      if (\n        tokenOrProvider != null &&\n        (tokenUserId == null ||\n          tokenUserId === '' ||\n          (!this.isAnonymous && tokenUserId !== this.user!.id))\n      ) {\n        throw new Error(\n          'userToken does not have a user_id or is not matching with user.id',\n        );\n      }\n    }\n  };\n\n  // Resolves when token is ready. This function is simply to check if loadToken is in progress, in which\n  // case a function should wait.\n  tokenReady = () => this.loadTokenPromise;\n\n  // Fetches a token from tokenProvider function and sets in tokenManager.\n  // In case of static token, it will simply resolve to static token.\n  loadToken = () => {\n    this.loadTokenPromise = new Promise(async (resolve, reject) => {\n      if (this.type === 'static') {\n        return resolve(this.token as string);\n      }\n\n      if (this.tokenProvider && typeof this.tokenProvider !== 'string') {\n        try {\n          const token = await this.tokenProvider();\n          this.validateToken(token);\n          this.token = token;\n        } catch (e) {\n          return reject(\n            new Error(`Call to tokenProvider failed with message: ${e}`, {\n              cause: e,\n            }),\n          );\n        }\n        resolve(this.token);\n      }\n    });\n\n    return this.loadTokenPromise;\n  };\n\n  // Returns a current token\n  getToken = () => {\n    if (this.token) {\n      return this.token;\n    }\n\n    if (this.user && !this.token) {\n      return this.token;\n    }\n\n    throw new Error(\n      `User token is not set. Either client.connectUser wasn't called or client.disconnect was called`,\n    );\n  };\n\n  isStatic = () => this.type === 'static';\n}\n", "import { videoLoggerSystem } from '../../logger';\n\nexport const getLocationHint = async (\n  hintUrl = `https://hint.stream-io-video.com/`,\n  timeout = 2000,\n  maxAttempts = 3,\n): Promise<string> => {\n  const logger = videoLoggerSystem.getLogger('location-hint');\n\n  let attempt = 0;\n  let locationHint = 'ERR';\n  do {\n    const abortController = new AbortController();\n    const timeoutId = setTimeout(() => abortController.abort(), timeout);\n    try {\n      const response = await fetch(hintUrl, {\n        method: 'HEAD',\n        signal: abortController.signal,\n      });\n      const awsPop = response.headers.get('x-amz-cf-pop') || 'ERR';\n      logger.debug(`Location header: ${awsPop}`);\n      locationHint = awsPop.substring(0, 3); // AMS1-P2 -> AMS\n    } catch (e) {\n      logger.warn(`Failed to get location hint from ${hintUrl}`, e);\n      locationHint = 'ERR';\n    } finally {\n      clearTimeout(timeoutId);\n    }\n  } while (locationHint === 'ERR' && ++attempt < maxAttempts);\n\n  return locationHint;\n};\n", "import axios, {\n  AxiosError,\n  AxiosInstance,\n  AxiosRequestConfig,\n  AxiosResponse,\n} from 'axios';\nimport https from 'https';\nimport { StableWSConnection } from './connection';\nimport { TokenManager } from './token_manager';\nimport {\n  addConnectionEventListeners,\n  generateUUIDv4,\n  isErrorResponse,\n  KnownCodes,\n  removeConnectionEventListeners,\n  retryInterval,\n  sleep,\n} from './utils';\nimport {\n  AllClientEvents,\n  AllClientEventTypes,\n  APIErrorResponse,\n  ClientEventListener,\n  ConnectAPIResponse,\n  ErrorFromResponse,\n  StreamClientOptions,\n  StreamVideoEvent,\n  TokenOrProvider,\n  User,\n  UserWithId,\n} from './types';\nimport { getLocationHint } from './location';\nimport {\n  ConnectedEvent,\n  CreateGuestRequest,\n  CreateGuestResponse,\n} from '../../gen/coordinator';\nimport { makeSafePromise, type SafePromise } from '../../helpers/promise';\nimport { ScopedLogger, videoLoggerSystem } from '../../logger';\n\nexport class StreamClient {\n  _user?: UserWithId;\n  anonymous: boolean;\n  persistUserOnConnectionFailure?: boolean;\n  axiosInstance: AxiosInstance;\n  baseURL?: string;\n  browser: boolean;\n  clientID?: string;\n  key: string;\n  listeners: Partial<\n    Record<AllClientEventTypes, ClientEventListener<any>[] | undefined>\n  > = {};\n  logger: ScopedLogger;\n\n  private locationHint: Promise<string> | undefined;\n\n  node: boolean;\n  options: StreamClientOptions;\n  secret?: string;\n  connectUserTask: ConnectAPIResponse | null;\n  tokenManager: TokenManager;\n  user?: UserWithId;\n  private cachedUserAgent?: string;\n  userID?: string;\n  wsBaseURL?: string;\n  wsConnection: StableWSConnection | null;\n  private wsPromiseSafe: SafePromise<ConnectedEvent | undefined> | null;\n  consecutiveFailures: number;\n  defaultWSTimeout: number;\n  resolveConnectionId?: Function;\n  rejectConnectionId?: Function;\n  private connectionIdPromiseSafe?: SafePromise<string | undefined>;\n  guestUserCreatePromise?: Promise<CreateGuestResponse>;\n\n  /**\n   * Initialize a client.\n   *\n   * @param {string} key - the api key\n   * @param {StreamClientOptions} [options] - additional options, here you can pass custom options to axios instance\n   * @param {string} [options.secret] - the api secret\n   * @param {boolean} [options.browser] - enforce the client to be in browser mode\n   * @param {boolean} [options.warmUp] - default to false, if true, client will open a connection as soon as possible to speed up following requests\n   * @param {Logger} [options.Logger] - custom logger\n   * @param {number} [options.timeout] - default to 3000\n   * @param {httpsAgent} [options.httpsAgent] - custom httpsAgent, in node it's default to https.agent()\n   */\n  constructor(key: string, options?: StreamClientOptions) {\n    // set the key\n    this.key = key;\n\n    // set the secret\n    this.secret = options?.secret;\n\n    // set the options... and figure out defaults...\n    const inputOptions = options\n      ? options\n      : ({\n          browser: typeof window !== 'undefined',\n        } as Partial<StreamClientOptions>);\n\n    this.browser = inputOptions.browser || typeof window !== 'undefined';\n    this.node = !this.browser;\n\n    if (this.browser) {\n      this.locationHint = getLocationHint(\n        options?.locationHintUrl,\n        options?.locationHintTimeout,\n        options?.locationHintMaxAttempts,\n      );\n    }\n\n    this.options = {\n      timeout: 5000,\n      withCredentials: false, // making sure cookies are not sent\n      ...inputOptions,\n    };\n\n    if (this.node && !this.options.httpsAgent) {\n      this.options.httpsAgent = new https.Agent({\n        keepAlive: true,\n        keepAliveMsecs: 3000,\n      });\n    }\n\n    this.setBaseURL(\n      this.options.baseURL || 'https://video.stream-io-api.com/video',\n    );\n\n    this.axiosInstance = axios.create({\n      ...this.options,\n      baseURL: this.baseURL,\n    });\n\n    // WS connection is initialized when setUser is called\n    this.wsConnection = null;\n    this.wsPromiseSafe = null;\n    this.connectUserTask = null;\n\n    // mapping between channel groups and configs\n    this.anonymous = false;\n    this.persistUserOnConnectionFailure =\n      this.options?.persistUserOnConnectionFailure;\n\n    // If it is a server-side client, then lets initialize the tokenManager, since token will be\n    // generated from secret.\n    this.tokenManager = new TokenManager(this.secret);\n    this.consecutiveFailures = 0;\n\n    this.defaultWSTimeout = this.options.defaultWsTimeout ?? 15000;\n\n    this.logger = videoLoggerSystem.getLogger('coordinator');\n  }\n\n  getAuthType = () => {\n    return this.anonymous ? 'anonymous' : 'jwt';\n  };\n\n  setBaseURL = (baseURL: string) => {\n    this.baseURL = baseURL;\n    this.wsBaseURL = this.baseURL\n      .replace('http', 'ws')\n      .replace(':3030', ':8800');\n  };\n\n  getLocationHint = async (\n    hintUrl?: string,\n    timeout?: number,\n  ): Promise<string> => {\n    const hint = await this.locationHint;\n    if (!hint || hint === 'ERR') {\n      this.locationHint = getLocationHint(\n        hintUrl ?? this.options.locationHintUrl,\n        timeout ?? this.options.locationHintTimeout,\n      );\n      return this.locationHint;\n    }\n    return hint;\n  };\n\n  _getConnectionID = () => this.wsConnection?.connectionID;\n\n  _hasConnectionID = () => Boolean(this._getConnectionID());\n\n  /**\n   * connectUser - Set the current user and open a WebSocket connection\n   *\n   * @param user Data about this user. IE {name: \"john\"}\n   * @param {TokenOrProvider} tokenOrProvider Token or provider\n   *\n   * @return {ConnectAPIResponse} Returns a promise that resolves when the connection is setup\n   */\n  connectUser = async (\n    user: UserWithId,\n    tokenOrProvider: TokenOrProvider,\n  ): ConnectAPIResponse => {\n    if (!user.id) {\n      throw new Error('The \"id\" field on the user is missing');\n    }\n\n    /**\n     * Calling connectUser multiple times is potentially the result of a  bad integration, however,\n     * If the user id remains the same we don't throw error\n     */\n    if (this.userID === user.id && this.connectUserTask) {\n      this.logger.warn(\n        'Consecutive calls to connectUser is detected, ideally you should only call this function once in your app.',\n      );\n      return this.connectUserTask;\n    }\n\n    if (this.userID) {\n      throw new Error(\n        'Use client.disconnect() before trying to connect as a different user. connectUser was called twice.',\n      );\n    }\n\n    if ((this.secret || this.node) && !this.options.allowServerSideConnect) {\n      this.logger.warn(\n        'Please do not use connectUser server side. Use our @stream-io/node-sdk instead: https://getstream.io/video/docs/api/',\n      );\n    }\n\n    // we generate the client id client side\n    this.userID = user.id;\n    this.anonymous = false;\n    await this.tokenManager.setTokenOrProvider(tokenOrProvider, user, false);\n    this._setUser(user);\n\n    this.connectUserTask = this.openConnection();\n\n    try {\n      addConnectionEventListeners(this.updateNetworkConnectionStatus);\n      return await this.connectUserTask;\n    } catch (err) {\n      if (this.persistUserOnConnectionFailure) {\n        // cleanup client to allow the user to retry connectUser again\n        await this.closeConnection();\n      } else {\n        await this.disconnectUser();\n      }\n      throw err;\n    }\n  };\n\n  _setUser = (user: UserWithId) => {\n    /**\n     * This one is used by the frontend. This is a copy of the current user object stored on backend.\n     * It contains reserved properties and own user properties which are not present in `this._user`.\n     */\n    this.user = user;\n    this.userID = user.id;\n    // this one is actually used for requests. This is a copy of current user provided to `connectUser` function.\n    this._user = { ...user };\n  };\n\n  /**\n   * Disconnects the websocket connection, without removing the user set on client.\n   * client.closeConnection will not trigger default auto-retry mechanism for reconnection. You need\n   * to call client.openConnection to reconnect to websocket.\n   *\n   * This is mainly useful on mobile side. You can only receive push notifications\n   * if you don't have active websocket connection.\n   * So when your app goes to background, you can call `client.closeConnection`.\n   * And when app comes back to foreground, call `client.openConnection`.\n   *\n   * @param timeout Max number of ms, to wait for close event of websocket, before forcefully assuming succesful disconnection.\n   *                https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n   */\n  closeConnection = async (timeout?: number) => {\n    await this.wsConnection?.disconnect(timeout);\n  };\n\n  /**\n   * Creates a new WebSocket connection with the current user. Returns empty promise, if there is an active connection\n   */\n  openConnection = async () => {\n    if (!this.userID) {\n      throw Error(\n        'UserWithId is not set on client, use client.connectUser or client.connectAnonymousUser instead',\n      );\n    }\n\n    const wsPromise = this.wsPromiseSafe?.();\n    if (this.wsConnection?.isConnecting && wsPromise) {\n      this.logger.info(\n        'client:openConnection() - connection already in progress',\n      );\n      return await wsPromise;\n    }\n\n    if (this.wsConnection?.isHealthy && this._hasConnectionID()) {\n      this.logger.info(\n        'client:openConnection() - openConnection called twice, healthy connection already exists',\n      );\n\n      return;\n    }\n\n    this._setupConnectionIdPromise();\n\n    this.clientID = `${this.userID}--${generateUUIDv4()}`;\n    const newWsPromise = this.connect();\n    this.wsPromiseSafe = makeSafePromise(newWsPromise);\n    return await newWsPromise;\n  };\n\n  /**\n   * Disconnects the websocket and removes the user from client.\n   *\n   * @param timeout Max number of ms, to wait for close event of websocket, before forcefully assuming successful disconnection.\n   *                https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n   */\n  disconnectUser = async (timeout?: number) => {\n    this.logger.info('client:disconnect() - Disconnecting the client');\n\n    // remove the user specific fields\n    delete this.user;\n    delete this._user;\n    delete this.userID;\n\n    this.anonymous = false;\n\n    await this.closeConnection(timeout);\n    removeConnectionEventListeners(this.updateNetworkConnectionStatus);\n\n    this.tokenManager.reset();\n\n    this.connectionIdPromiseSafe = undefined;\n    this.rejectConnectionId = undefined;\n    this.resolveConnectionId = undefined;\n  };\n\n  connectGuestUser = async (user: User & { type: 'guest' }) => {\n    this.guestUserCreatePromise = this.doAxiosRequest<\n      CreateGuestResponse,\n      CreateGuestRequest\n    >('post', '/guest', { user }, { publicEndpoint: true });\n\n    const response = await this.guestUserCreatePromise;\n    this.guestUserCreatePromise.finally(\n      () => (this.guestUserCreatePromise = undefined),\n    );\n\n    return this.connectUser(response.user, response.access_token);\n  };\n\n  /**\n   * connectAnonymousUser - Set an anonymous user and open a WebSocket connection\n   */\n  connectAnonymousUser = async (\n    user: UserWithId,\n    tokenOrProvider: TokenOrProvider,\n  ) => {\n    addConnectionEventListeners(this.updateNetworkConnectionStatus);\n    this._setupConnectionIdPromise();\n\n    this.anonymous = true;\n    await this.tokenManager.setTokenOrProvider(tokenOrProvider, user, true);\n\n    this._setUser(user);\n    // some endpoints require a connection_id to be resolved.\n    // as anonymous users aren't allowed to open WS connections, we just\n    // resolve the connection_id here.\n    this.resolveConnectionId?.();\n  };\n\n  /**\n   * on - Listen to events on all channels and users your watching\n   *\n   * client.on('message.new', event => {console.log(\"my new message\", event, channel.state.messages)})\n   *\n   * @param eventName The event type to listen for (optional)\n   * @param callback The callback to call\n   *\n   * @return  Returns a function which, when called, unsubscribes the event handler.\n   */\n  on = <E extends keyof AllClientEvents>(\n    eventName: E,\n    callback: ClientEventListener<E>,\n  ) => {\n    if (!this.listeners[eventName]) {\n      this.listeners[eventName] = [];\n    }\n\n    this.logger.debug(`Adding listener for ${eventName} event`);\n    this.listeners[eventName]?.push(callback as ClientEventListener<any>);\n    return () => {\n      this.off(eventName, callback);\n    };\n  };\n\n  /**\n   * off - Remove the event handler\n   */\n  off = <E extends keyof AllClientEvents>(\n    eventName: E,\n    callback: ClientEventListener<E>,\n  ) => {\n    if (!this.listeners[eventName]) {\n      this.listeners[eventName] = [];\n    }\n\n    this.logger.debug(`Removing listener for ${eventName} event`);\n    this.listeners[eventName] = this.listeners[eventName]?.filter(\n      (value) => value !== callback,\n    );\n  };\n\n  /**\n   * sets up the this.connectionIdPromise\n   */\n  _setupConnectionIdPromise = () => {\n    /** a promise that is resolved once connection id is set */\n    this.connectionIdPromiseSafe = makeSafePromise(\n      new Promise<string | undefined>((resolve, reject) => {\n        this.resolveConnectionId = resolve;\n        this.rejectConnectionId = reject;\n      }),\n    );\n  };\n\n  get connectionIdPromise() {\n    return this.connectionIdPromiseSafe?.();\n  }\n\n  get isConnectionIsPromisePending() {\n    return this.connectionIdPromiseSafe?.checkPending() ?? false;\n  }\n\n  get wsPromise() {\n    return this.wsPromiseSafe?.();\n  }\n\n  _logApiRequest = (\n    type: string,\n    url: string,\n    data: unknown,\n    config: AxiosRequestConfig & {\n      config?: AxiosRequestConfig & { maxBodyLength?: number };\n    },\n  ) => {\n    if (this.logger.getLogLevel() !== 'trace') return;\n    this.logger.trace(`client: ${type} - Request - ${url}`, {\n      payload: data,\n      config,\n    });\n  };\n\n  _logApiResponse = <T>(\n    type: string,\n    url: string,\n    response: AxiosResponse<T>,\n  ) => {\n    if (this.logger.getLogLevel() !== 'trace') return;\n    this.logger.trace(\n      `client:${type} - Response - url: ${url} > status ${response.status}`,\n      {\n        response,\n      },\n    );\n  };\n\n  doAxiosRequest = async <T, D = unknown>(\n    type: string,\n    url: string,\n    data?: D,\n    options: AxiosRequestConfig & {\n      config?: AxiosRequestConfig & { maxBodyLength?: number };\n      publicEndpoint?: boolean;\n    } = {},\n  ): Promise<T> => {\n    if (!options.publicEndpoint) {\n      await Promise.all([\n        this.tokenManager.tokenReady(),\n        this.guestUserCreatePromise,\n      ]);\n      // we need to wait for presence of connection id before making requests\n      try {\n        await this.connectionIdPromise;\n      } catch {\n        // in case connection id was rejected\n        // reconnection maybe in progress\n        // we can wait for healthy connection to resolve, which rejects when 15s timeout is reached\n        await this.wsConnection?._waitForHealthy();\n        await this.connectionIdPromise;\n      }\n    }\n    const requestConfig = this._enrichAxiosOptions(options);\n    try {\n      let response: AxiosResponse<T>;\n      this._logApiRequest(type, url, data, requestConfig);\n      switch (type) {\n        case 'get':\n          response = await this.axiosInstance.get(url, requestConfig);\n          break;\n        case 'delete':\n          response = await this.axiosInstance.delete(url, requestConfig);\n          break;\n        case 'post':\n          response = await this.axiosInstance.post(url, data, requestConfig);\n          break;\n        case 'put':\n          response = await this.axiosInstance.put(url, data, requestConfig);\n          break;\n        case 'patch':\n          response = await this.axiosInstance.patch(url, data, requestConfig);\n          break;\n        case 'options':\n          response = await this.axiosInstance.options(url, requestConfig);\n          break;\n        default:\n          throw new Error('Invalid request type');\n      }\n      this._logApiResponse<T>(type, url, response);\n      this.consecutiveFailures = 0;\n      return response.data;\n    } catch (e: any /**TODO: generalize error types  */) {\n      e.client_request_id = requestConfig.headers?.['x-client-request-id'];\n\n      this.consecutiveFailures += 1;\n      const { response } = e;\n      if (!response || !isErrorResponse(response)) {\n        this.logger.error(`client:${type} url: ${url}`, e);\n        throw e as AxiosError<APIErrorResponse>;\n      }\n\n      const { data: responseData, status } = response;\n      const isTokenExpired = responseData.code === KnownCodes.TOKEN_EXPIRED;\n      if (isTokenExpired && !this.tokenManager.isStatic()) {\n        this.logger.warn(`client:${type}: url: ${url}`, response);\n        if (this.consecutiveFailures > 1) {\n          await sleep(retryInterval(this.consecutiveFailures));\n        }\n        // refresh and retry the request\n        await this.tokenManager.loadToken();\n        return await this.doAxiosRequest<T, D>(type, url, data, options);\n      } else {\n        this.logger.error(`client:${type} url: ${url}`, response);\n        throw new ErrorFromResponse<APIErrorResponse>({\n          message: `Stream error code ${responseData.code}: ${responseData.message}`,\n          code: responseData.code ?? null,\n          unrecoverable: responseData.unrecoverable ?? null,\n          response: response,\n          status: status,\n        });\n      }\n    }\n  };\n\n  get = <T>(url: string, params?: AxiosRequestConfig['params']) => {\n    return this.doAxiosRequest<T, unknown>('get', url, null, {\n      params,\n    });\n  };\n\n  put = <T, D = unknown>(\n    url: string,\n    data?: D,\n    params?: AxiosRequestConfig['params'],\n  ) => {\n    return this.doAxiosRequest<T, D>('put', url, data, { params });\n  };\n\n  post = <T, D = unknown>(\n    url: string,\n    data?: D,\n    params?: AxiosRequestConfig['params'],\n  ) => {\n    return this.doAxiosRequest<T, D>('post', url, data, { params });\n  };\n\n  patch = <T, D = unknown>(\n    url: string,\n    data?: D,\n    params?: AxiosRequestConfig['params'],\n  ) => {\n    return this.doAxiosRequest<T, D>('patch', url, data, { params });\n  };\n\n  delete = <T>(url: string, params?: AxiosRequestConfig['params']) => {\n    return this.doAxiosRequest<T, unknown>('delete', url, null, {\n      params,\n    });\n  };\n\n  dispatchEvent = (event: StreamVideoEvent) => {\n    this.logger.debug(`Dispatching event: ${event.type}`, event);\n    if (!this.listeners) return;\n\n    // call generic listeners\n    for (const listener of this.listeners.all || []) {\n      listener(event);\n    }\n\n    // call type specific listeners\n    for (const listener of this.listeners[event.type] || []) {\n      listener(event);\n    }\n  };\n\n  /**\n   * @private\n   */\n  connect = async () => {\n    if (!this.userID || !this._user) {\n      throw Error(\n        'Call connectUser or connectAnonymousUser before starting the connection',\n      );\n    }\n    if (!this.wsBaseURL) throw Error('Websocket base url not set');\n    if (!this.clientID) throw Error('clientID is not set');\n\n    // The StableWSConnection handles all the reconnection logic.\n    this.wsConnection = new StableWSConnection(this);\n\n    this.logger.info('StreamClient.connect: this.wsConnection.connect()');\n    return await this.wsConnection.connect(this.defaultWSTimeout);\n  };\n\n  getUserAgent = (): string => {\n    if (!this.cachedUserAgent) {\n      const { clientAppIdentifier = {} } = this.options;\n      const {\n        sdkName = 'js',\n        sdkVersion = process.env.PKG_VERSION || '0.0.0',\n        ...extras\n      } = clientAppIdentifier;\n\n      this.cachedUserAgent = [\n        `stream-video-${sdkName}-v${sdkVersion}`,\n        ...Object.entries(extras).map(([key, value]) => `${key}=${value}`),\n        `client_bundle=${process.env.CLIENT_BUNDLE || (this.node ? 'node' : 'browser')}`,\n      ].join('|');\n    }\n\n    return this.cachedUserAgent;\n  };\n\n  _enrichAxiosOptions = (\n    options: AxiosRequestConfig & { config?: AxiosRequestConfig } & {\n      publicEndpoint?: boolean;\n    } = {\n      params: {},\n      headers: {},\n      config: {},\n    },\n  ): AxiosRequestConfig => {\n    const token =\n      options.publicEndpoint && !this.user ? undefined : this._getToken();\n    const authorization = token ? { Authorization: token } : undefined;\n\n    if (!options.headers?.['x-client-request-id']) {\n      options.headers = {\n        ...options.headers,\n        'x-client-request-id': generateUUIDv4(),\n      };\n    }\n\n    const {\n      params: axiosConfigParams,\n      headers: axiosConfigHeaders,\n      ...axiosRequestConfig\n    } = this.options.axiosRequestConfig || {};\n\n    return {\n      params: {\n        user_id: this.userID,\n        connection_id: this._getConnectionID(),\n        api_key: this.key,\n        ...options.params,\n        ...axiosConfigParams,\n      },\n      headers: {\n        ...authorization,\n        'stream-auth-type':\n          options.publicEndpoint && !this.user\n            ? 'anonymous'\n            : this.getAuthType(),\n        'X-Stream-Client': this.getUserAgent(),\n        ...options.headers,\n        ...axiosConfigHeaders,\n      },\n      ...options.config,\n      ...axiosRequestConfig,\n    };\n  };\n\n  _getToken = () => {\n    if (!this.tokenManager) return null;\n\n    return this.tokenManager.getToken();\n  };\n\n  updateNetworkConnectionStatus = (\n    event: { type: 'online' | 'offline' } | Event,\n  ) => {\n    if (event.type === 'offline') {\n      this.logger.debug('device went offline');\n      this.dispatchEvent({ type: 'network.changed', online: false });\n    } else if (event.type === 'online') {\n      this.logger.debug('device went online');\n      this.dispatchEvent({ type: 'network.changed', online: true });\n    }\n  };\n}\n", "import type {\n  ClientAppIdentifier,\n  StreamClientOptions,\n  TokenOrProvider,\n  User,\n} from '../coordinator/connection/types';\nimport { StreamClient } from '../coordinator/connection/client';\nimport { getSdkInfo } from './client-details';\nimport { SdkType } from '../gen/video/sfu/models/models';\nimport type { StreamVideoClientOptions } from '../StreamVideoClient';\n\n/**\n * Utility function to get the instance key.\n */\nexport const getInstanceKey = (apiKey: string, user: User) => {\n  return `${apiKey}/${user.id}`;\n};\n\n/**\n * Returns a concurrency tag for call initialization.\n * @internal\n *\n * @param cid the call cid.\n */\nexport const getCallInitConcurrencyTag = (cid: string) => `call.init-${cid}`;\n\n/**\n * Utility function to get the client app identifier.\n */\nconst getClientAppIdentifier = (\n  options?: StreamClientOptions,\n): ClientAppIdentifier => {\n  const appId = options?.clientAppIdentifier || {};\n  const sdkInfo = getSdkInfo();\n  if (sdkInfo) {\n    // ensure the sdk name and version are set correctly,\n    // overriding any user-provided values\n    appId.sdkName = SdkType[sdkInfo.type].toLowerCase();\n    appId.sdkVersion = `${sdkInfo.major}.${sdkInfo.minor}.${sdkInfo.patch}`;\n  }\n  return appId;\n};\n\n/**\n * Creates a coordinator client.\n */\nexport const createCoordinatorClient = (\n  apiKey: string,\n  options: StreamClientOptions | undefined,\n) => {\n  const clientAppIdentifier = getClientAppIdentifier(options);\n\n  return new StreamClient(apiKey, {\n    persistUserOnConnectionFailure: true,\n    ...options,\n    clientAppIdentifier,\n  });\n};\n\n/**\n * Creates a token provider and allows integrators to provide\n * a static token and a token provider at the same time.\n *\n * When both of them are provided, this function will create an internal\n * token provider that will use the static token on the first invocation\n * and the token provider on the later invocations.\n */\nexport const createTokenOrProvider = (\n  options: StreamVideoClientOptions,\n): TokenOrProvider => {\n  const { token, tokenProvider } = options;\n  if (token && tokenProvider) {\n    let initialTokenUsed = false;\n    return async function wrappedTokenProvider(): Promise<string> {\n      if (!initialTokenUsed) {\n        initialTokenUsed = true;\n        return token;\n      }\n      return tokenProvider();\n    };\n  }\n  return token || tokenProvider;\n};\n", "import { Call } from './Call';\nimport { StreamClient } from './coordinator/connection/client';\nimport {\n  CallingState,\n  StreamVideoReadOnlyStateStore,\n  StreamVideoWriteableStateStore,\n} from './store';\nimport type {\n  CallCreatedEvent,\n  CallRingEvent,\n  ConnectedEvent,\n  CreateDeviceRequest,\n  CreateGuestRequest,\n  CreateGuestResponse,\n  GetEdgesResponse,\n  ListDevicesResponse,\n  QueryAggregateCallStatsRequest,\n  QueryAggregateCallStatsResponse,\n  QueryCallsRequest,\n  QueryCallsResponse,\n  QueryCallStatsRequest,\n  QueryCallStatsResponse,\n} from './gen/coordinator';\nimport {\n  AllClientEvents,\n  ClientEventListener,\n  StreamClientOptions,\n  TokenOrProvider,\n  TokenProvider,\n  User,\n  UserWithId,\n} from './coordinator/connection/types';\nimport { retryInterval, sleep } from './coordinator/connection/utils';\nimport {\n  createCoordinatorClient,\n  createTokenOrProvider,\n  getCallInitConcurrencyTag,\n  getInstanceKey,\n} from './helpers/clientUtils';\nimport { logToConsole, ScopedLogger, videoLoggerSystem } from './logger';\nimport { withoutConcurrency } from './helpers/concurrency';\nimport { enableTimerWorker } from './timers';\n\nexport type StreamVideoClientOptions = {\n  apiKey: string;\n  options?: StreamClientOptions;\n  user?: User;\n  token?: string;\n  tokenProvider?: TokenProvider;\n};\n\n/**\n * A `StreamVideoClient` instance lets you communicate with our API, and authenticate users.\n */\nexport class StreamVideoClient {\n  /**\n   * A reactive store that exposes all the state variables reactively.\n   * You can subscribe to changes of the different state variables.\n   * Our library is built in a way that all state changes are exposed in this store,\n   * o all UI changes in your application should be handled by subscribing to these variables.\n   *\n   * @deprecated use the `client.state` getter.\n   */\n  readonly readOnlyStateStore: StreamVideoReadOnlyStateStore;\n  readonly logger: ScopedLogger;\n\n  protected readonly writeableStateStore: StreamVideoWriteableStateStore;\n  streamClient: StreamClient;\n\n  private effectsRegistered = false;\n  private eventHandlersToUnregister: Array<() => void> = [];\n  private readonly connectionConcurrencyTag = Symbol(\n    'connectionConcurrencyTag',\n  );\n\n  private static _instances = new Map<string, StreamVideoClient>();\n  private rejectCallWhenBusy = false;\n\n  /**\n   * You should create only one instance of `StreamVideoClient`.\n   */\n  constructor(apiKey: string, opts?: StreamClientOptions);\n  constructor(args: StreamVideoClientOptions);\n  constructor(\n    apiKeyOrArgs: string | StreamVideoClientOptions,\n    opts?: StreamClientOptions,\n  ) {\n    const apiKey =\n      typeof apiKeyOrArgs === 'string' ? apiKeyOrArgs : apiKeyOrArgs.apiKey;\n    const clientOptions =\n      typeof apiKeyOrArgs === 'string' ? opts : apiKeyOrArgs.options;\n\n    if (clientOptions?.enableTimerWorker) enableTimerWorker();\n\n    const rootLogger = clientOptions?.logger || logToConsole;\n\n    videoLoggerSystem.configureLoggers({\n      default: { sink: rootLogger, level: clientOptions?.logLevel || 'warn' },\n      ...clientOptions?.logOptions,\n    });\n\n    this.logger = videoLoggerSystem.getLogger('client');\n    this.rejectCallWhenBusy = clientOptions?.rejectCallWhenBusy ?? false;\n\n    this.streamClient = createCoordinatorClient(apiKey, clientOptions);\n\n    this.writeableStateStore = new StreamVideoWriteableStateStore();\n    this.readOnlyStateStore = new StreamVideoReadOnlyStateStore(\n      this.writeableStateStore,\n    );\n\n    if (typeof apiKeyOrArgs !== 'string' && apiKeyOrArgs.user) {\n      const user = apiKeyOrArgs.user;\n      if (user.type === 'anonymous') user.id = '!anon';\n      if (user.id) this.registerClientInstance(apiKey, user);\n\n      const tokenOrProvider = createTokenOrProvider(apiKeyOrArgs);\n      this.connectUser(user, tokenOrProvider).catch((err) => {\n        this.logger.error('Failed to connect', err);\n      });\n    }\n  }\n\n  /**\n   * Gets or creates a StreamVideoClient instance based on the given options.\n   */\n  static getOrCreateInstance(\n    args: StreamVideoClientOptions & { user: User },\n  ): StreamVideoClient {\n    const { apiKey, user, token, tokenProvider } = args;\n    if (!user.id && user.type !== 'anonymous') {\n      throw new Error('user.id is required for a non-anonymous user');\n    }\n\n    if (\n      !token &&\n      !tokenProvider &&\n      user.type !== 'anonymous' &&\n      user.type !== 'guest'\n    ) {\n      throw new Error(\n        'tokenProvider or token is required for a authenticated users',\n      );\n    }\n\n    return (\n      StreamVideoClient._instances.get(getInstanceKey(apiKey, user)) ||\n      new StreamVideoClient(args)\n    );\n  }\n\n  private registerClientInstance = (apiKey: string, user: User) => {\n    const instanceKey = getInstanceKey(apiKey, user);\n    if (StreamVideoClient._instances.has(instanceKey)) {\n      this.logger.warn(\n        `A StreamVideoClient already exists for ${user.id}; Prefer using getOrCreateInstance method`,\n      );\n    }\n    StreamVideoClient._instances.set(instanceKey, this);\n  };\n\n  /**\n   * Return the reactive state store, use this if you want to be notified about changes to the client state\n   */\n  get state() {\n    return this.readOnlyStateStore;\n  }\n\n  private registerEffects = () => {\n    if (this.effectsRegistered) return;\n\n    this.eventHandlersToUnregister.push(\n      this.on('call.created', (event) => this.initCallFromEvent(event)),\n      this.on('call.ring', (event) => this.initCallFromEvent(event)),\n      this.on('connection.changed', (event) => {\n        if (!event.online) return;\n\n        const callsToReWatch = this.writeableStateStore.calls\n          .filter((call) => call.watching)\n          .map((call) => call.cid);\n        if (callsToReWatch.length <= 0) return;\n\n        this.logger.info(`Rewatching calls ${callsToReWatch.join(', ')}`);\n        this.queryCalls({\n          watch: true,\n          filter_conditions: { cid: { $in: callsToReWatch } },\n          sort: [{ field: 'cid', direction: 1 }],\n        }).catch((err) => {\n          this.logger.error('Failed to re-watch calls', err);\n        });\n      }),\n    );\n\n    this.effectsRegistered = true;\n  };\n\n  /**\n   * Initializes a call from a call created or ringing event.\n   * @param e the event.\n   */\n  private initCallFromEvent = async (e: CallCreatedEvent | CallRingEvent) => {\n    try {\n      const concurrencyTag = getCallInitConcurrencyTag(e.call_cid);\n      await withoutConcurrency(concurrencyTag, async () => {\n        const ringing = e.type === 'call.ring';\n        let call = this.writeableStateStore.findCall(e.call.type, e.call.id);\n        if (call) {\n          if (ringing) {\n            if (this.shouldRejectCall(call.cid)) {\n              this.logger.info(\n                `Leaving call with busy reject reason ${call.cid} because user is busy`,\n              );\n              // remove the instance from the state store\n              await call.leave();\n              // explicitly reject the call with busy reason as calling state was not ringing before and leave would not call it therefore\n              await call.reject('busy');\n            } else {\n              await call.updateFromRingingEvent(e as CallRingEvent);\n            }\n          } else {\n            call.state.updateFromCallResponse(e.call);\n          }\n          return;\n        }\n\n        call = new Call({\n          streamClient: this.streamClient,\n          type: e.call.type,\n          id: e.call.id,\n          members: e.members,\n          clientStore: this.writeableStateStore,\n          ringing,\n        });\n\n        if (ringing) {\n          if (this.shouldRejectCall(call.cid)) {\n            this.logger.info(`Rejecting call ${call.cid} because user is busy`);\n            // call is not in the state store yet, so just reject api is enough\n            await call.reject('busy');\n          } else {\n            await call.updateFromRingingEvent(e as CallRingEvent);\n            await call.get();\n          }\n        } else {\n          call.state.updateFromCallResponse(e.call);\n          this.writeableStateStore.registerCall(call);\n          this.logger.info(`New call created and registered: ${call.cid}`);\n        }\n      });\n    } catch (err) {\n      this.logger.error(`Failed to init call from event ${e.type}`, err);\n    }\n  };\n\n  /**\n   * Connects the given user to the client.\n   * Only one user can connect at a time, if you want to change users, call `disconnectUser` before connecting a new user.\n   * If the connection is successful, the connected user [state variable](#readonlystatestore) will be updated accordingly.\n   *\n   * @param user the user to connect.\n   * @param tokenOrProvider a token or a function that returns a token.\n   */\n  connectUser = async (\n    user: User,\n    tokenOrProvider?: TokenOrProvider,\n  ): Promise<void | ConnectedEvent> => {\n    if (user.type === 'anonymous') {\n      user.id = '!anon';\n      return this.connectAnonymousUser(user as UserWithId, tokenOrProvider);\n    }\n\n    const connectUserResponse = await withoutConcurrency(\n      this.connectionConcurrencyTag,\n      async () => {\n        const client = this.streamClient;\n        const { onConnectUserError, persistUserOnConnectionFailure } =\n          client.options;\n        let { maxConnectUserRetries = 5 } = client.options;\n        maxConnectUserRetries = Math.max(maxConnectUserRetries, 1);\n\n        const errorQueue: Error[] = [];\n        for (let attempt = 0; attempt < maxConnectUserRetries; attempt++) {\n          try {\n            this.logger.trace(`Connecting user (${attempt})`, user);\n            return user.type === 'guest'\n              ? await client.connectGuestUser(user)\n              : await client.connectUser(user, tokenOrProvider);\n          } catch (err) {\n            this.logger.warn(`Failed to connect a user (${attempt})`, err);\n            errorQueue.push(err as Error);\n            if (attempt === maxConnectUserRetries - 1) {\n              onConnectUserError?.(err as Error, errorQueue);\n              throw err;\n            }\n\n            // we need to force to disconnect the user if the client is\n            // configured to persist the user on connection failure\n            if (persistUserOnConnectionFailure) {\n              await client.disconnectUser();\n            }\n\n            await sleep(retryInterval(attempt));\n          }\n        }\n      },\n    );\n\n    // connectUserResponse will be void if connectUser called twice for the same user\n    if (connectUserResponse?.me) {\n      this.writeableStateStore.setConnectedUser(connectUserResponse.me);\n    }\n\n    this.registerEffects();\n\n    return connectUserResponse;\n  };\n\n  /**\n   * Disconnects the currently connected user from the client.\n   *\n   * If the connection is successfully disconnected, the connected user [state variable](#readonlystatestore) will be updated accordingly\n   *\n   * @param timeout Max number of ms, to wait for close event of websocket, before forcefully assuming successful disconnection.\n   *                https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n   */\n  disconnectUser = async (timeout?: number) => {\n    await withoutConcurrency(this.connectionConcurrencyTag, async () => {\n      const { user, key } = this.streamClient;\n      if (!user) return;\n\n      await this.streamClient.disconnectUser(timeout);\n\n      if (user.id) {\n        StreamVideoClient._instances.delete(getInstanceKey(key, user));\n      }\n      this.eventHandlersToUnregister.forEach((unregister) => unregister());\n      this.eventHandlersToUnregister = [];\n      this.effectsRegistered = false;\n      this.writeableStateStore.setConnectedUser(undefined);\n    });\n  };\n\n  /**\n   * You can subscribe to WebSocket events provided by the API.\n   * To remove a subscription, call the `off` method or, execute the returned unsubscribe function.\n   * Please note that subscribing to WebSocket events is an advanced use-case, for most use-cases it should be enough to watch for changes in the reactive [state store](#readonlystatestore).\n   *\n   * @param eventName the event name or 'all'.\n   * @param callback the callback which will be called when the event is emitted.\n   * @returns an unsubscribe function.\n   */\n  on = <E extends keyof AllClientEvents>(\n    eventName: E,\n    callback: ClientEventListener<E>,\n  ) => {\n    return this.streamClient.on(eventName, callback);\n  };\n\n  /**\n   * Remove subscription for WebSocket events that were created by the `on` method.\n   *\n   * @param eventName the event name.\n   * @param callback the callback which was passed to the `on` method.\n   */\n  off = <E extends keyof AllClientEvents>(\n    eventName: E,\n    callback: ClientEventListener<E>,\n  ) => {\n    return this.streamClient.off(eventName, callback);\n  };\n\n  /**\n   * Creates a new call.\n   *\n   * @param type the type of the call.\n   * @param id the id of the call.\n   * @param options additional options for call creation.\n   */\n  call = (\n    type: string,\n    id: string,\n    options: { reuseInstance?: boolean } = {},\n  ) => {\n    const call = options.reuseInstance\n      ? this.writeableStateStore.findCall(type, id)\n      : undefined;\n    return (\n      call ??\n      new Call({\n        streamClient: this.streamClient,\n        id: id,\n        type: type,\n        clientStore: this.writeableStateStore,\n      })\n    );\n  };\n\n  /**\n   * Creates a new guest user with the given data.\n   *\n   * @param data the data for the guest user.\n   */\n  createGuestUser = async (data: CreateGuestRequest) => {\n    return this.streamClient.doAxiosRequest<\n      CreateGuestResponse,\n      CreateGuestRequest\n    >('post', '/guest', data, { publicEndpoint: true });\n  };\n\n  /**\n   * Will query the API for calls matching the given filters.\n   *\n   * @param data the query data.\n   */\n  queryCalls = async (data: QueryCallsRequest = {}) => {\n    const response = await this.streamClient.post<\n      QueryCallsResponse,\n      QueryCallsRequest\n    >('/calls', data);\n    const calls = [];\n    for (const c of response.calls) {\n      const call = new Call({\n        streamClient: this.streamClient,\n        id: c.call.id,\n        type: c.call.type,\n        members: c.members,\n        ownCapabilities: c.own_capabilities,\n        watching: data.watch,\n        clientStore: this.writeableStateStore,\n      });\n      call.state.updateFromCallResponse(c.call);\n      await call.applyDeviceConfig(c.call.settings, false);\n      if (data.watch) {\n        await call.setup();\n        this.writeableStateStore.registerCall(call);\n      }\n      calls.push(call);\n    }\n    return {\n      ...response,\n      calls: calls,\n    };\n  };\n\n  /**\n   * Retrieve the list of available call statistics reports matching a particular condition.\n   *\n   * @param data Filter and sort conditions for retrieving available call report summaries.\n   * @returns List with summary of available call reports matching the condition.\n   */\n  queryCallStats = async (data: QueryCallStatsRequest = {}) => {\n    return this.streamClient.post<\n      QueryCallStatsResponse,\n      QueryCallStatsRequest\n    >(`/call/stats`, data);\n  };\n\n  /**\n   * Retrieve the list of available reports aggregated from the call stats.\n   *\n   * @param data Specify filter conditions like from and to (within last 30 days) and the report types\n   * @returns Requested reports with (mostly) raw daily data for each report type requested\n   */\n  queryAggregateCallStats = async (\n    data: QueryAggregateCallStatsRequest = {},\n  ) => {\n    return this.streamClient.post<\n      QueryAggregateCallStatsResponse,\n      QueryAggregateCallStatsRequest\n    >(`/stats`, data);\n  };\n\n  /**\n   * Returns a list of available data centers available for hosting calls.\n   */\n  edges = async () => {\n    return this.streamClient.get<GetEdgesResponse>(`/edges`);\n  };\n\n  /**\n   * addDevice - Adds a push device for a user.\n   *\n   * @param {string} id the device id\n   * @param {string} push_provider the push provider name (eg. apn, firebase)\n   * @param {string} push_provider_name user provided push provider name\n   * @param {string} [userID] the user id (defaults to current user)\n   * @param {boolean} [voip_token] enables use of VoIP token for push notifications on iOS platform\n   */\n  addDevice = async (\n    id: string,\n    push_provider: string,\n    push_provider_name?: string,\n    userID?: string,\n    voip_token?: boolean,\n  ) => {\n    return await this.streamClient.post<CreateDeviceRequest>('/devices', {\n      id,\n      push_provider,\n      voip_token,\n      ...(userID != null ? { user_id: userID } : {}),\n      ...(push_provider_name != null ? { push_provider_name } : {}),\n    });\n  };\n\n  /**\n   * addDevice - Adds a push device for a user.\n   *\n   * @param {string} id the device id\n   * @param {string} push_provider the push provider name (eg. apn, firebase)\n   * @param {string} push_provider_name user provided push provider name\n   * @param {string} [userID] the user id (defaults to current user)\n   */\n  addVoipDevice = async (\n    id: string,\n    push_provider: string,\n    push_provider_name: string,\n    userID?: string,\n  ) => {\n    return await this.addDevice(\n      id,\n      push_provider,\n      push_provider_name,\n      userID,\n      true,\n    );\n  };\n\n  /**\n   * getDevices - Returns the devices associated with a current user\n   * @param {string} [userID] User ID. Only works on serverside\n   */\n  getDevices = async (userID?: string) => {\n    return await this.streamClient.get<ListDevicesResponse>(\n      '/devices',\n      userID ? { user_id: userID } : {},\n    );\n  };\n\n  /**\n   * removeDevice - Removes the device with the given id.\n   *\n   * @param {string} id The device id\n   * @param {string} [userID] The user id. Only specify this for serverside requests\n   */\n  removeDevice = async (id: string, userID?: string) => {\n    return await this.streamClient.delete('/devices', {\n      id,\n      ...(userID ? { user_id: userID } : {}),\n    });\n  };\n\n  /**\n   * A callback that can be used to create ringing calls from push notifications. If the call already exists, it will do nothing.\n   * @param call_cid\n   * @returns\n   */\n  onRingingCall = async (call_cid: string) => {\n    return withoutConcurrency(getCallInitConcurrencyTag(call_cid), async () => {\n      // if we find the call and is already ringing, we don't need to create a new call\n      // as client would have received the call.ring state because the app had WS alive when receiving push notifications\n      let call = this.state.calls.find((c) => c.cid === call_cid && c.ringing);\n      if (!call) {\n        // if not it means that WS is not alive when receiving the push notifications and we need to fetch the call\n        const [callType, callId] = call_cid.split(':');\n        call = new Call({\n          streamClient: this.streamClient,\n          type: callType,\n          id: callId,\n          clientStore: this.writeableStateStore,\n          ringing: true,\n        });\n        await call.get();\n      }\n      return call;\n    });\n  };\n\n  /**\n   * Connects the given anonymous user to the client.\n   *\n   * @param user the user to connect.\n   * @param tokenOrProvider a token or a function that returns a token.\n   */\n  private connectAnonymousUser = async (\n    user: UserWithId,\n    tokenOrProvider: TokenOrProvider,\n  ) => {\n    return withoutConcurrency(this.connectionConcurrencyTag, () =>\n      this.streamClient.connectAnonymousUser(user, tokenOrProvider),\n    );\n  };\n\n  private shouldRejectCall = (currentCallId: string) => {\n    if (!this.rejectCallWhenBusy) return false;\n    return this.state.calls.some(\n      (c) =>\n        c.cid !== currentCallId &&\n        c.ringing &&\n        !c.isCreatedByMe &&\n        c.state.callingState !== CallingState.IDLE &&\n        c.state.callingState !== CallingState.LEFT &&\n        c.state.callingState !== CallingState.RECONNECTING_FAILED,\n    );\n  };\n}\n", "import { createContext, PropsWithChildren, useContext } from 'react';\nimport { Call } from '@stream-io/video-client';\n\nconst StreamCallContext = createContext<Call | undefined>(undefined);\n\n/**\n * The props for the StreamCallProvider component.\n */\nexport interface StreamCallProviderProps {\n  /**\n   * The call instance to provide to the component tree.\n   */\n  call?: Call;\n}\n\n/**\n * A provider for the call object.\n */\nexport const StreamCallProvider = (\n  props: PropsWithChildren<StreamCallProviderProps>,\n) => {\n  const { call, children } = props;\n  return (\n    <StreamCallContext.Provider value={call}>\n      {children}\n    </StreamCallContext.Provider>\n  );\n};\n\n/**\n * A hook to get the call object from the closest provider.\n */\nexport const useCall = () => {\n  return useContext(StreamCallContext);\n};\n", "import i18next from 'i18next';\nimport {\n  TranslationLanguage,\n  TranslationsMap,\n  TranslationsRegistry,\n  TranslatorFunction,\n} from './types';\n\nconst mapToRegistry = (translationsMap: TranslationsMap, namespace: string) =>\n  Object.entries(translationsMap).reduce((acc, [lng, translations]) => {\n    acc[lng] = { [namespace]: translations };\n    return acc;\n  }, {} as TranslationsRegistry);\n\nexport const defaultTranslationFunction = (key: string) => key;\n\nexport type StreamI18nConstructor = {\n  /** Language into which the provided strings are translated */\n  currentLanguage?: TranslationLanguage;\n  /** Fallback language which will be used if no translation is found for current language */\n  fallbackLanguage?: TranslationLanguage;\n  /** Logs info level to console output. Helps find issues with loading not working. */\n  debug?: boolean;\n  /** Custom translations that will be merged with the defaults provided by the library. */\n  translationsOverrides?: TranslationsMap;\n};\n\nexport class StreamI18n {\n  /** Exposed i18n instance from the i18next library */\n  i18nInstance;\n  /** Translator function that converts the provided string into its equivalent in the current language. */\n  t: TranslatorFunction = defaultTranslationFunction;\n\n  constructor({\n    debug = false,\n    currentLanguage = 'en',\n    fallbackLanguage,\n    translationsOverrides = { en: {} },\n  }: StreamI18nConstructor = {}) {\n    const ns = 'stream-video';\n    this.i18nInstance = i18next.createInstance({\n      debug,\n      defaultNS: ns,\n      fallbackLng: fallbackLanguage,\n      interpolation: { escapeValue: false },\n      keySeparator: false,\n      lng: currentLanguage,\n      nsSeparator: false,\n      parseMissingKeyHandler: defaultTranslationFunction,\n      resources: mapToRegistry(translationsOverrides, ns),\n    });\n  }\n\n  get currentLanguage() {\n    return this.i18nInstance.language;\n  }\n\n  get isInitialized() {\n    return this.i18nInstance.isInitialized;\n  }\n\n  init = async () => {\n    this.t = await this.i18nInstance.init();\n    return this.t;\n  };\n\n  changeLanguage = async (language?: TranslationLanguage) => {\n    this.t = await this.i18nInstance.changeLanguage(language);\n    return this.t;\n  };\n}\n", "import {\n  createContext,\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport {\n  defaultTranslationFunction,\n  StreamI18n,\n  TranslationLanguage,\n  TranslationsMap,\n} from '../i18n';\n\ntype StreamI18nContextValue = {\n  t: StreamI18n['t'];\n  i18n?: StreamI18n;\n};\n\nconst StreamI18nContext = createContext<StreamI18nContextValue>({\n  t: defaultTranslationFunction,\n});\n\ntype CreateI18nParams = {\n  i18nInstance?: StreamI18n;\n  language?: TranslationLanguage;\n  fallbackLanguage?: TranslationLanguage;\n  translationsOverrides?: TranslationsMap;\n};\n\nexport type StreamI18nProviderProps = CreateI18nParams;\n\nexport const StreamI18nProvider = ({\n  children,\n  ...createI18nParams\n}: PropsWithChildren<StreamI18nProviderProps>) => {\n  const api = useCreateI18n(createI18nParams);\n  return (\n    <StreamI18nContext.Provider value={api}>\n      {children}\n    </StreamI18nContext.Provider>\n  );\n};\n\nconst useCreateI18n = ({\n  i18nInstance,\n  language,\n  fallbackLanguage,\n  translationsOverrides,\n}: CreateI18nParams) => {\n  const [i18n] = useState(\n    () =>\n      i18nInstance ||\n      new StreamI18n({\n        currentLanguage: language,\n        fallbackLanguage,\n        translationsOverrides,\n      }),\n  );\n  const [t, setTranslationFn] = useState<StreamI18n['t']>(() => i18n.t);\n  useEffect(() => {\n    if (!i18n.isInitialized) {\n      i18n.init().then(() => setTranslationFn(() => i18n.t));\n    } else if (i18n.currentLanguage !== language) {\n      i18n.changeLanguage(language).then(() => setTranslationFn(() => i18n.t));\n    }\n  }, [i18n, language]);\n\n  return useMemo(() => ({ i18n, t }), [i18n, t]);\n};\n\n/**\n * A hook to get the i18n instance and translation function from the closest provider.\n *\n * Example usage:\n * const { t, i18n } = useI18n();\n * const message = t('hello_world');\n * console.log(message);\n */\nexport const useI18n = () => useContext(StreamI18nContext);\n", "import { createContext, PropsWithChildren, useContext } from 'react';\nimport { StreamVideoClient } from '@stream-io/video-client';\nimport {\n  StreamI18nProvider,\n  StreamI18nProviderProps,\n} from './StreamI18nContext';\n\nconst StreamVideoContext = createContext<StreamVideoClient | undefined>(\n  undefined,\n);\n\n/**\n * The props for the StreamVideoProvider component.\n */\nexport type StreamVideoProps = StreamI18nProviderProps & {\n  /**\n   * The client instance to provide to the component tree.\n   */\n  client: StreamVideoClient;\n};\n\n/**\n * StreamVideo is a provider component which should be used to wrap the entire application.\n * It provides the client object to all children components and initializes the i18n instance.\n */\nexport const StreamVideoProvider = ({\n  children,\n  client,\n  i18nInstance,\n  language,\n  translationsOverrides,\n}: PropsWithChildren<StreamVideoProps>) => {\n  return (\n    <StreamVideoContext.Provider value={client}>\n      <StreamI18nProvider\n        i18nInstance={i18nInstance}\n        language={language}\n        translationsOverrides={translationsOverrides}\n      >\n        {children}\n      </StreamI18nProvider>\n    </StreamVideoContext.Provider>\n  );\n};\n\n/**\n * Hook to access the nearest StreamVideo client instance.\n */\nexport const useStreamVideoClient = () => {\n  return useContext(StreamVideoContext);\n};\n", "/**\n * Checks whether we are using React Native\n */\nexport const isReactNative = () => {\n  if (typeof navigator === 'undefined') return false;\n  return navigator.product?.toLowerCase() === 'reactnative';\n};\n", "import type { Observable } from 'rxjs';\nimport { useCallback } from 'react';\nimport { useSyncExternalStore } from 'use-sync-external-store/shim';\nimport { RxUtils } from '@stream-io/video-client';\n\n/**\n * Utility hook which provides the current value of the given observable.\n *\n * @param observable$ the observable to read data from.\n * @param defaultValue a default value. Used when the observable data can't be read or emits an error - must be stable.\n */\nexport const useObservableValue = <T>(\n  observable$: Observable<T>,\n  defaultValue?: T,\n) => {\n  const getSnapshot = useCallback(() => {\n    try {\n      return RxUtils.getCurrentValue(observable$);\n    } catch (error) {\n      if (typeof defaultValue === 'undefined') throw error;\n      return defaultValue;\n    }\n  }, [defaultValue, observable$]);\n\n  const subscribe = useCallback(\n    (onStoreChange: (v: T) => void) => {\n      const unsubscribe = RxUtils.createSubscription(\n        observable$,\n        onStoreChange,\n        (error) => {\n          console.log('An error occurred while reading an observable', error);\n\n          if (defaultValue) onStoreChange(defaultValue);\n        },\n      );\n\n      return unsubscribe;\n    },\n    [defaultValue, observable$],\n  );\n\n  return useSyncExternalStore(subscribe, getSnapshot);\n};\n", "import {\n  Call,\n  CallClosedCaption,\n  CallIngressResponse,\n  CallSessionResponse,\n  CallSettingsResponse,\n  CallState,\n  CallStatsReport,\n  Comparator,\n  EgressResponse,\n  InputDeviceStatus,\n  MemberResponse,\n  OwnCapability,\n  StreamVideoParticipant,\n  UserResponse,\n} from '@stream-io/video-client';\nimport { useMemo, useState } from 'react';\nimport { Observable, of } from 'rxjs';\nimport { useCall } from '../contexts';\nimport { isReactNative } from '../helpers/platforms';\nimport { useObservableValue } from './useObservableValue';\n\n// kind-of memoized, used as a default value\nconst EMPTY_DEVICES_ARRAY = Object.freeze<MediaDeviceInfo[]>(\n  [],\n) as MediaDeviceInfo[];\n\nexport type UseInputMediaDeviceOptions = {\n  /**\n   * If `true`, the hook will use the optimistic status to determine whether the device is muted or not.\n   */\n  optimisticUpdates?: boolean;\n};\n\n/**\n * Utility hook, which provides the current call's state.\n */\nexport const useCallState = () => {\n  const call = useCall();\n  // return an empty and unlinked CallState object if there is no call in the provider\n  // this ensures that the hooks always return a value and many null checks can be avoided\n  if (!call) {\n    const message =\n      'You are using useCallState() outside a Call context. ' +\n      'Please wrap your component in <StreamCall /> and provide a \"call\" instance.';\n    console.warn(message);\n    return new CallState();\n  }\n  return call.state;\n};\n\n/**\n * Utility hook which provides information whether the current call is being recorded. It will return `true` if the call is being recorded.\n */\nexport const useIsCallRecordingInProgress = (): boolean => {\n  const { recording$ } = useCallState();\n  return useObservableValue(recording$);\n};\n\n/**\n * Utility hook which provides information whether the current call is broadcasting.\n */\nexport const useIsCallHLSBroadcastingInProgress = (): boolean => {\n  const { egress$ } = useCallState();\n  const egress = useObservableValue(egress$);\n  if (!egress) return false;\n  return egress.broadcasting;\n};\n\n/**\n * Utility hook which provides information whether the current call is live.\n */\nexport const useIsCallLive = (): boolean => {\n  const { backstage$ } = useCallState();\n  const isBackstageOn = useObservableValue(backstage$);\n  return !isBackstageOn;\n};\n\n/**\n * Returns the list of blocked users in the current call.\n */\nexport const useCallBlockedUserIds = (): string[] => {\n  const { blockedUserIds$ } = useCallState();\n  return useObservableValue(blockedUserIds$);\n};\n\n/**\n * Returns the timestamp when this call was created.\n */\nexport const useCallCreatedAt = (): Date | undefined => {\n  const { createdAt$ } = useCallState();\n  return useObservableValue(createdAt$);\n};\n\n/**\n * Returns the timestamp when this call was ended.\n */\nexport const useCallEndedAt = (): Date | undefined => {\n  const { endedAt$ } = useCallState();\n  return useObservableValue(endedAt$);\n};\n\n/**\n * Returns the timestamp telling when the call is scheduled to start.\n */\nexport const useCallStartsAt = (): Date | undefined => {\n  const { startsAt$ } = useCallState();\n  return useObservableValue(startsAt$);\n};\n\n/**\n * Returns the timestamp when this call was updated.\n */\nexport const useCallUpdatedAt = (): Date | undefined => {\n  const { updatedAt$ } = useCallState();\n  return useObservableValue(updatedAt$);\n};\n\n/**\n * Returns the information about the call's creator.\n */\nexport const useCallCreatedBy = (): UserResponse | undefined => {\n  const { createdBy$ } = useCallState();\n  return useObservableValue(createdBy$);\n};\n\n/**\n * Returns the call's custom data.\n */\nexport const useCallCustomData = (): Record<string, any> => {\n  const { custom$ } = useCallState();\n  return useObservableValue(custom$);\n};\n\n/**\n * Returns the call's Egress information.\n */\nexport const useCallEgress = (): EgressResponse | undefined => {\n  const { egress$ } = useCallState();\n  return useObservableValue(egress$);\n};\n\n/**\n * Returns the call's Ingress information.\n */\nexport const useCallIngress = (): CallIngressResponse | undefined => {\n  const { ingress$ } = useCallState();\n  return useObservableValue(ingress$);\n};\n\n/**\n * Returns the data for the current call session.\n */\nexport const useCallSession = (): CallSessionResponse | undefined => {\n  const { session$ } = useCallState();\n  return useObservableValue(session$);\n};\n\n/**\n * Returns the call's settings.\n */\nexport const useCallSettings = (): CallSettingsResponse | undefined => {\n  const { settings$ } = useCallState();\n  return useObservableValue(settings$);\n};\n\n/**\n * Returns whether the call has transcribing enabled.\n */\nexport const useIsCallTranscribingInProgress = (): boolean => {\n  const { transcribing$ } = useCallState();\n  return useObservableValue(transcribing$);\n};\n\n/**\n * Returns information about the user who has marked this call as ended.\n */\nexport const useCallEndedBy = (): UserResponse | undefined => {\n  const { endedBy$ } = useCallState();\n  return useObservableValue(endedBy$);\n};\n\n/**\n * Utility hook which provides a boolean indicating whether there is\n * a participant in the current call which shares their screen.\n */\nexport const useHasOngoingScreenShare = (): boolean => {\n  const { hasOngoingScreenShare$ } = useCallState();\n  return useObservableValue(hasOngoingScreenShare$);\n};\n\n/**\n * Utility hook which provides the latest stats report of the current call.\n *\n * The latest stats report of the current call.\n * When stats gathering is enabled, this observable will emit a new value\n * at a regular (configurable) interval.\n *\n * Consumers of this observable can implement their own batching logic\n * in case they want to show historical stats data.\n */\nexport const useCallStatsReport = (): CallStatsReport | undefined => {\n  const { callStatsReport$ } = useCallState();\n  return useObservableValue(callStatsReport$);\n};\n\n/**\n * Utility hook which provides the dominant speaker of the current call.\n */\nexport const useDominantSpeaker = (): StreamVideoParticipant | undefined => {\n  const { dominantSpeaker$ } = useCallState();\n  return useObservableValue(dominantSpeaker$);\n};\n\n/**\n * Utility hook which provides a list of call members.\n */\nexport const useCallMembers = (): MemberResponse[] => {\n  const { members$ } = useCallState();\n  return useObservableValue(members$);\n};\n\n/**\n * Utility hook providing the current calling state of the call. For example, `RINGING` or `JOINED`.\n */\nexport const useCallCallingState = () => {\n  const { callingState$ } = useCallState();\n  return useObservableValue(callingState$);\n};\n\n/**\n * Utility hook providing the actual start time of the current session.\n * Useful for calculating the call duration.\n */\nexport const useCallStartedAt = () => {\n  const { startedAt$ } = useCallState();\n  return useObservableValue(startedAt$);\n};\n\n/**\n * A hook which provides a list of all participants that have joined an active call.\n *\n * @param options.sortBy - A comparator function to sort the participants by.\n * Make sure to memoize output of the `combineComparators` function\n * (or keep it out of component's scope if possible) before passing it down to this property.\n */\nexport const useParticipants = ({\n  sortBy,\n}: {\n  /**\n   * Make sure to memoize output of the `combineComparators` function\n   * (or keep it out of component's scope if possible) before passing it down to this property.\n   */\n  sortBy?: Comparator<StreamVideoParticipant>;\n} = {}) => {\n  const { participants$ } = useCallState();\n  const participants = useObservableValue(participants$);\n\n  return useMemo(() => {\n    if (sortBy) {\n      return [...participants].sort(sortBy);\n    }\n    return participants;\n  }, [participants, sortBy]);\n};\n\n/**\n * A hook which provides a list of all participants that have joined an active call.\n * Unlike `useParticipants`, it returns a more stable reference that is not affected\n * by participant sort settings.\n *\n * @category Call State\n */\nexport const useRawParticipants = () => {\n  const { rawParticipants$ } = useCallState();\n  return useObservableValue(rawParticipants$);\n};\n\n/**\n * A hook which provides a StreamVideoLocalParticipant object.\n * It signals that I have joined a call.\n */\nexport const useLocalParticipant = () => {\n  const { localParticipant$ } = useCallState();\n  return useObservableValue(localParticipant$);\n};\n\n/**\n * A hook which provides a list of all other participants than me that have joined an active call.\n */\nexport const useRemoteParticipants = () => {\n  const { remoteParticipants$ } = useCallState();\n  return useObservableValue(remoteParticipants$);\n};\n\n/**\n * A hook which provides a list of participants that are currently pinned.\n */\nexport const usePinnedParticipants = () => {\n  const { pinnedParticipants$ } = useCallState();\n  return useObservableValue(pinnedParticipants$);\n};\n\n/**\n * Returns the approximate participant count of the active call.\n * This includes the anonymous users as well, and it is computed on the server.\n */\nexport const useParticipantCount = () => {\n  const { participantCount$ } = useCallState();\n  return useObservableValue(participantCount$);\n};\n\n/**\n * Returns the approximate anonymous participant count of the active call.\n * The regular participants are not included in this count. It is computed on the server.\n */\nexport const useAnonymousParticipantCount = () => {\n  const { anonymousParticipantCount$ } = useCallState();\n  return useObservableValue(anonymousParticipantCount$);\n};\n\n/**\n * Returns the generated thumbnail of the current call, if enabled in settings.\n */\nexport const useCallThumbnail = () => {\n  const { thumbnails$ } = useCallState();\n  return useObservableValue(thumbnails$);\n};\n\n/**\n * A hook which returns the local participant's own capabilities.\n */\nexport const useOwnCapabilities = (): OwnCapability[] | undefined => {\n  const { ownCapabilities$ } = useCallState();\n  return useObservableValue(ownCapabilities$);\n};\n\n/**\n * Hook that returns true if the local participant has all the given permissions.\n *\n * @param permissions the permissions to check.\n */\nexport const useHasPermissions = (...permissions: OwnCapability[]): boolean => {\n  const capabilities = useOwnCapabilities();\n  return permissions.every((permission) => capabilities?.includes(permission));\n};\n\n/**\n * Returns the camera state of the current call.\n */\nexport const useCameraState = ({\n  optimisticUpdates = true,\n}: UseInputMediaDeviceOptions = {}) => {\n  const call = useCall();\n  const { camera } = call as Call;\n\n  const { state } = camera;\n  const direction = useObservableValue(state.direction$);\n  const mediaStream = useObservableValue(state.mediaStream$);\n  const selectedDevice = useObservableValue(state.selectedDevice$);\n  const { getDevices } = useLazyDeviceList(camera);\n  const hasBrowserPermission = useObservableValue(state.hasBrowserPermission$);\n  const isPromptingPermission = useObservableValue(\n    state.isPromptingPermission$,\n  );\n\n  return {\n    camera,\n    direction,\n    mediaStream,\n    get devices() {\n      return getDevices();\n    },\n    hasBrowserPermission,\n    isPromptingPermission,\n    selectedDevice,\n    ...getComputedStatus(\n      useObservableValue(state.status$),\n      useObservableValue(state.optimisticStatus$),\n      { optimisticUpdates },\n    ),\n  };\n};\n\n/**\n * Returns the microphone state of the current call.\n */\nexport const useMicrophoneState = ({\n  optimisticUpdates = true,\n}: UseInputMediaDeviceOptions = {}) => {\n  const call = useCall();\n  const { microphone } = call as Call;\n\n  const { state } = microphone;\n  const mediaStream = useObservableValue(state.mediaStream$);\n  const selectedDevice = useObservableValue(state.selectedDevice$);\n  const { getDevices } = useLazyDeviceList(microphone);\n  const hasBrowserPermission = useObservableValue(state.hasBrowserPermission$);\n  const isPromptingPermission = useObservableValue(\n    state.isPromptingPermission$,\n  );\n  const isSpeakingWhileMuted = useObservableValue(state.speakingWhileMuted$);\n  const audioBitrateProfile = useObservableValue(state.audioBitrateProfile$);\n\n  return {\n    microphone,\n    mediaStream,\n    get devices() {\n      return getDevices();\n    },\n    selectedDevice,\n    hasBrowserPermission,\n    isPromptingPermission,\n    isSpeakingWhileMuted,\n    audioBitrateProfile,\n    ...getComputedStatus(\n      useObservableValue(state.status$),\n      useObservableValue(state.optimisticStatus$),\n      { optimisticUpdates },\n    ),\n  };\n};\n\n/**\n * Returns the speaker state of the current call.\n *\n * Note: This hook is not supported in React Native\n */\nexport const useSpeakerState = () => {\n  if (isReactNative()) {\n    throw new Error(\n      'This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details',\n    );\n  }\n  const call = useCall();\n  const { speaker } = call as Call;\n\n  const { getDevices } = useLazyDeviceList(speaker);\n  const selectedDevice = useObservableValue(speaker.state.selectedDevice$);\n\n  return {\n    speaker,\n    get devices() {\n      return getDevices();\n    },\n    selectedDevice,\n    isDeviceSelectionSupported: speaker.state.isDeviceSelectionSupported,\n  };\n};\n\n/**\n * Returns the Screen Share state of the current call.\n */\nexport const useScreenShareState = ({\n  optimisticUpdates = true,\n}: UseInputMediaDeviceOptions = {}) => {\n  const call = useCall();\n  const { screenShare } = call as Call;\n  const { state } = screenShare;\n  return {\n    screenShare,\n    mediaStream: useObservableValue(state.mediaStream$),\n    audioBitrateProfile: useObservableValue(state.audioBitrateProfile$),\n    ...getComputedStatus(\n      useObservableValue(state.status$),\n      useObservableValue(state.optimisticStatus$),\n      { optimisticUpdates },\n    ),\n  };\n};\n\n/**\n * Returns incoming video settings for the current call, including\n * global and per-participant manual video quality overrides.\n */\nexport const useIncomingVideoSettings = () => {\n  const call = useCall() as Call;\n  return useObservableValue(call.dynascaleManager.incomingVideoSettings$);\n};\n\n/**\n * Returns the current call's closed captions queue.\n */\nexport const useCallClosedCaptions = (): CallClosedCaption[] => {\n  const { closedCaptions$ } = useCallState();\n  return useObservableValue(closedCaptions$);\n};\n\n/**\n * Returns the current call's closed captions queue.\n */\nexport const useIsCallCaptioningInProgress = (): boolean => {\n  const { captioning$ } = useCallState();\n  return useObservableValue(captioning$);\n};\n\nfunction getComputedStatus(\n  status: InputDeviceStatus,\n  pendingStatus: InputDeviceStatus,\n  options: Required<UseInputMediaDeviceOptions>,\n) {\n  const optimisticStatus = pendingStatus ?? status;\n\n  return {\n    status,\n    optimisticStatus,\n    isEnabled: status === 'enabled',\n    isMute: status !== 'enabled',\n    optimisticIsMute: optimisticStatus !== 'enabled',\n    isTogglePending: optimisticStatus !== status,\n    /**\n     * If optimistic updates are enabled (`options.optimisticUpdates`), we\n     * consider the optimistic status to determine whether the device is muted or not.\n     * Otherwise, we rely on the actual status.\n     */\n    optionsAwareIsMute: options.optimisticUpdates\n      ? optimisticStatus !== 'enabled'\n      : status !== 'enabled',\n  };\n}\n\ninterface DeviceManagerLike {\n  listDevices(): Observable<MediaDeviceInfo[]>;\n}\n\nfunction useLazyDeviceList(manager: DeviceManagerLike) {\n  const placeholderDevices$ = useMemo(() => of(EMPTY_DEVICES_ARRAY), []);\n  const [devices$, setDevices$] = useState(placeholderDevices$);\n  const devices = useObservableValue(devices$, EMPTY_DEVICES_ARRAY);\n\n  const getDevices = () => {\n    if (devices$ === placeholderDevices$) {\n      setDevices$(manager.listDevices());\n    }\n\n    return devices ?? EMPTY_DEVICES_ARRAY;\n  };\n\n  return { getDevices };\n}\n", "import { useCallback, useLayoutEffect, useRef } from 'react';\n\nfunction useEffectEventShim<T extends (...args: any[]) => any>(\n  cb: T,\n): (...funcArgs: Parameters<T>) => ReturnType<T> {\n  const cbRef = useRef(cb);\n\n  useLayoutEffect(() => {\n    cbRef.current = cb;\n  }, [cb]);\n\n  return useCallback((...args: Parameters<T>) => {\n    const callback = cbRef.current;\n    return callback(...args);\n  }, []);\n}\n\nexport const useEffectEvent = useEffectEventShim;\n", "import { useStreamVideoClient } from '../contexts';\nimport { useObservableValue } from './useObservableValue';\n\n/**\n * Utility hook which provides access to client's state store.\n */\nexport const useStore = () => {\n  const client = useStreamVideoClient();\n  if (!client) {\n    throw new Error(\n      `StreamVideoClient isn't initialized or this hook is called outside of <StreamVideo> context.`,\n    );\n  }\n  return client.state;\n};\n\n/**\n * Utility hook which provides a list of all notifications about created calls.\n * In the ring call settings, these calls can be outgoing (I have called somebody)\n * or incoming (somebody has called me).\n */\nexport const useCalls = () => {\n  const { calls$ } = useStore();\n  return useObservableValue(calls$);\n};\n\n/**\n * Returns the current connected user.\n */\nexport const useConnectedUser = () => {\n  const { connectedUser$ } = useStore();\n  return useObservableValue(connectedUser$);\n};\n", "import { useCallback, useEffect, useState } from 'react';\nimport { useCall } from '../contexts';\nimport { useIsCallRecordingInProgress } from './callStateHooks';\n\n/**\n * Custom hook for toggling call recording in a video call.\n *\n * This hook provides functionality to start and stop call recording,\n * along with state management for tracking the recording status\n * and the loading indicator while awaiting a response.\n */\nexport const useToggleCallRecording = () => {\n  const call = useCall();\n  const isCallRecordingInProgress = useIsCallRecordingInProgress();\n  const [isAwaitingResponse, setIsAwaitingResponse] = useState(false);\n\n  // TODO: add permissions\n\n  useEffect(() => {\n    // we wait until call.recording_started/stopped event to flips the\n    // `isCallRecordingInProgress` state variable.\n    // Once the flip happens, we remove the loading indicator\n    setIsAwaitingResponse((isAwaiting) => {\n      if (isAwaiting) return false;\n      return isAwaiting;\n    });\n  }, [isCallRecordingInProgress]);\n\n  const toggleCallRecording = useCallback(async () => {\n    try {\n      setIsAwaitingResponse(true);\n      if (isCallRecordingInProgress) {\n        await call?.stopRecording();\n      } else {\n        await call?.startRecording();\n      }\n    } catch (e) {\n      console.error(`Failed start recording`, e);\n      throw e;\n    }\n  }, [call, isCallRecordingInProgress]);\n\n  return { toggleCallRecording, isAwaitingResponse, isCallRecordingInProgress };\n};\n", "import * as CallStateHooks from './callStateHooks';\nexport * from './useEffectEvent';\nexport * from './useObservableValue';\n\nexport * from './store';\nexport * from './callUtilHooks';\n\nexport type { UseInputMediaDeviceOptions } from './callStateHooks';\n\n/**\n * A hook-alike function that exposes all call state hooks.\n */\nexport const useCallStateHooks = () => CallStateHooks;\n", "import { OwnCapability } from '@stream-io/video-client';\n\nimport { PropsWithChildren } from 'react';\nimport { useCall } from '../contexts';\nimport { useCallStateHooks } from '../hooks';\n\ntype RestrictedProps = PropsWithChildren<{\n  /**\n   * Required grants for the component to be able to render supplied children elements\n   */\n  requiredGrants: OwnCapability[];\n  /**\n   * Render children only if user can request capability, but does not have it\n   */\n  canRequestOnly?: boolean;\n  /**\n   * Render children only if user has capability\n   */\n  hasPermissionsOnly?: boolean;\n  /**\n   * Require all grants specified in `requiredGrants` to be available in the `availableGrants`,\n   * component by default requires only one grant to appear in both arrays to render its children\n   */\n  requireAll?: boolean;\n}>;\n\nexport const Restricted = ({\n  canRequestOnly,\n  hasPermissionsOnly,\n  requiredGrants,\n  requireAll = true,\n  children,\n}: RestrictedProps) => {\n  const call = useCall();\n  const { useCallSettings, useOwnCapabilities } = useCallStateHooks();\n  const ownCapabilities = useOwnCapabilities();\n  const settings = useCallSettings();\n  const hasPermissions = requiredGrants[requireAll ? 'every' : 'some'](\n    (capability) => ownCapabilities?.includes(capability),\n  );\n\n  if (hasPermissionsOnly) return hasPermissions ? <>{children}</> : null;\n\n  const canRequest = requiredGrants.some((capability) =>\n    call?.permissionsContext.canRequest(capability, settings),\n  );\n\n  if (canRequestOnly) return canRequest ? <>{children}</> : null;\n\n  if (hasPermissions || canRequest) return <>{children}</>;\n\n  return null;\n};\n", "export const bigInt=()=>(async e=>{try{return(await WebAssembly.instantiate(e)).instance.exports.b(BigInt(0))===BigInt(0)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,126,1,126,3,2,1,0,7,5,1,1,98,0,0,10,6,1,4,0,32,0,11])),bulkMemory=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),exceptions=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),exceptionsFinal=()=>(async()=>{try{return new WebAssembly.Module(Uint8Array.from(atob(\"AGFzbQEAAAABBAFgAAADAgEAChABDgACaR9AAQMAAAsACxoL\"),(e=>e.codePointAt(0)))),!0}catch(e){return!1}})(),extendedConst=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,5,3,1,0,1,11,9,1,0,65,1,65,2,106,11,0])),gc=()=>(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,95,1,120,0])))(),jsStringBuiltins=()=>(async()=>{try{return await WebAssembly.instantiate(Uint8Array.from(atob(\"AGFzbQEAAAABBgFgAW8BfwIXAQ53YXNtOmpzLXN0cmluZwR0ZXN0AAA=\"),(e=>e.codePointAt(0))),{},{builtins:[\"js-string\"]}),!0}catch(e){return!1}})(),jspi=()=>(async()=>\"Suspending\"in WebAssembly)(),memory64=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,5,3,1,4,1])),multiMemory=()=>(async()=>{try{return new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,5,5,2,0,0,0,0])),!0}catch(e){return!1}})(),multiValue=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,0,2,127,127,3,2,1,0,10,8,1,6,0,65,0,65,0,11])),mutableGlobals=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1])),referenceTypes=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,7,1,5,0,208,112,26,11])),relaxedSimd=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,15,1,13,0,65,1,253,15,65,2,253,15,253,128,2,11])),saturatedFloatToInt=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,12,1,10,0,67,0,0,0,0,252,0,26,11])),signExtensions=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,65,0,192,26,11])),simd=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),streamingCompilation=()=>(async()=>\"compileStreaming\"in WebAssembly)(),tailCall=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,6,1,4,0,18,0,11])),threads=()=>(async e=>{try{return\"undefined\"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),typeReflection=()=>(async()=>\"Function\"in WebAssembly)(),typedFunctionReferences=()=>(async()=>{try{return new WebAssembly.Module(Uint8Array.from(atob(\"AGFzbQEAAAABEANgAX8Bf2ABZAABf2AAAX8DBAMBAAIJBQEDAAEBChwDCwBBCkEqIAAUAGoLBwAgAEEBagsGANIBEAAL\"),(e=>e.codePointAt(0)))),!0}catch(e){return!1}})();\n", "var t=\"undefined\"!=typeof self?self:{};function e(){throw Error(\"Invalid UTF8\")}function n(t,e){return e=String.fromCharCode.apply(null,e),null==t?e:t+e}let r,i;const s=\"undefined\"!=typeof TextDecoder;let o;const a=\"undefined\"!=typeof TextEncoder;function c(t){if(a)t=(o||=new TextEncoder).encode(t);else{let n=0;const r=new Uint8Array(3*t.length);for(let i=0;i<t.length;i++){var e=t.charCodeAt(i);if(e<128)r[n++]=e;else{if(e<2048)r[n++]=e>>6|192;else{if(e>=55296&&e<=57343){if(e<=56319&&i<t.length){const s=t.charCodeAt(++i);if(s>=56320&&s<=57343){e=1024*(e-55296)+s-56320+65536,r[n++]=e>>18|240,r[n++]=e>>12&63|128,r[n++]=e>>6&63|128,r[n++]=63&e|128;continue}i--}e=65533}r[n++]=e>>12|224,r[n++]=e>>6&63|128}r[n++]=63&e|128}}t=n===r.length?r:r.subarray(0,n)}return t}var h,u;t:{for(var l=[\"CLOSURE_FLAGS\"],d=t,f=0;f<l.length;f++)if(null==(d=d[l[f]])){u=null;break t}u=d}var p,g=u&&u[610401301];h=null!=g&&g;const m=t.navigator;function y(t){return!!h&&(!!p&&p.brands.some((({brand:e})=>e&&-1!=e.indexOf(t))))}function _(e){var n;return(n=t.navigator)&&(n=n.userAgent)||(n=\"\"),-1!=n.indexOf(e)}function v(){return!!h&&(!!p&&p.brands.length>0)}function E(){return v()?y(\"Chromium\"):(_(\"Chrome\")||_(\"CriOS\"))&&!(!v()&&_(\"Edge\"))||_(\"Silk\")}function w(t){return w[\" \"](t),t}p=m&&m.userAgentData||null,w[\" \"]=function(){};var T=!v()&&(_(\"Trident\")||_(\"MSIE\"));!_(\"Android\")||E(),E(),_(\"Safari\")&&(E()||!v()&&_(\"Coast\")||!v()&&_(\"Opera\")||!v()&&_(\"Edge\")||(v()?y(\"Microsoft Edge\"):_(\"Edg/\"))||v()&&y(\"Opera\"));var A={},b=null;function k(t){const e=t.length;let n=3*e/4;n%3?n=Math.floor(n):-1!=\"=.\".indexOf(t[e-1])&&(n=-1!=\"=.\".indexOf(t[e-2])?n-2:n-1);const r=new Uint8Array(n);let i=0;return function(t,e){function n(e){for(;r<t.length;){const e=t.charAt(r++),n=b[e];if(null!=n)return n;if(!/^[\\s\\xa0]*$/.test(e))throw Error(\"Unknown base64 encoding at char: \"+e)}return e}S();let r=0;for(;;){const t=n(-1),r=n(0),i=n(64),s=n(64);if(64===s&&-1===t)break;e(t<<2|r>>4),64!=i&&(e(r<<4&240|i>>2),64!=s&&e(i<<6&192|s))}}(t,(function(t){r[i++]=t})),i!==n?r.subarray(0,i):r}function S(){if(!b){b={};var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\".split(\"\"),e=[\"+/=\",\"+/\",\"-_=\",\"-_.\",\"-_\"];for(let n=0;n<5;n++){const r=t.concat(e[n].split(\"\"));A[n]=r;for(let t=0;t<r.length;t++){const e=r[t];void 0===b[e]&&(b[e]=t)}}}}var x=\"undefined\"!=typeof Uint8Array,L=!T&&\"function\"==typeof btoa;function R(t){if(!L){var e;void 0===e&&(e=0),S(),e=A[e];var n=Array(Math.floor(t.length/3)),r=e[64]||\"\";let c=0,h=0;for(;c<t.length-2;c+=3){var i=t[c],s=t[c+1],o=t[c+2],a=e[i>>2];i=e[(3&i)<<4|s>>4],s=e[(15&s)<<2|o>>6],o=e[63&o],n[h++]=a+i+s+o}switch(a=0,o=r,t.length-c){case 2:o=e[(15&(a=t[c+1]))<<2]||r;case 1:t=t[c],n[h]=e[t>>2]+e[(3&t)<<4|a>>4]+o+r}return n.join(\"\")}for(e=\"\",n=0,r=t.length-10240;n<r;)e+=String.fromCharCode.apply(null,t.subarray(n,n+=10240));return e+=String.fromCharCode.apply(null,n?t.subarray(n):t),btoa(e)}const F=/[-_.]/g,I={\"-\":\"+\",_:\"/\",\".\":\"=\"};function M(t){return I[t]||\"\"}function P(t){if(!L)return k(t);F.test(t)&&(t=t.replace(F,M)),t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function C(t){return x&&null!=t&&t instanceof Uint8Array}var O={};function U(){return B||=new N(null,O)}function D(t){j(O);var e=t.g;return null==(e=null==e||C(e)?e:\"string\"==typeof e?P(e):null)?e:t.g=e}var N=class{h(){return new Uint8Array(D(this)||0)}constructor(t,e){if(j(e),this.g=t,null!=t&&0===t.length)throw Error(\"ByteString should be constructed with non-empty values\")}};let B,G;function j(t){if(t!==O)throw Error(\"illegal external caller\")}function V(t,e){t.__closure__error__context__984382||(t.__closure__error__context__984382={}),t.__closure__error__context__984382.severity=e}function X(t){return V(t=Error(t),\"warning\"),t}function H(e){if(null!=e){var n=G??={},r=n[e]||0;r>=5||(n[e]=r+1,V(e=Error(),\"incident\"),function(e){t.setTimeout((()=>{throw e}),0)}(e))}}var W=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol();function z(t,e,n=!1){return\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol()?n&&Symbol.for&&t?Symbol.for(t):null!=t?Symbol(t):Symbol():e}var K=z(\"jas\",void 0,!0),Y=z(void 0,\"0di\"),$=z(void 0,\"1oa\"),q=z(void 0,Symbol()),J=z(void 0,\"0actk\"),Z=z(void 0,\"8utk\");const Q=W?K:\"Ea\",tt={Ea:{value:0,configurable:!0,writable:!0,enumerable:!1}},et=Object.defineProperties;function nt(t,e){W||Q in t||et(t,tt),t[Q]|=e}function rt(t,e){W||Q in t||et(t,tt),t[Q]=e}function it(t){return nt(t,34),t}function st(t,e){rt(e,-15615&(0|t))}function ot(t,e){rt(e,-15581&(34|t))}function at(){return\"function\"==typeof BigInt}function ct(t){return Array.prototype.slice.call(t)}var ht,ut={};function lt(t){return null!==t&&\"object\"==typeof t&&!Array.isArray(t)&&t.constructor===Object}function dt(t,e){if(null!=t)if(\"string\"==typeof t)t=t?new N(t,O):U();else if(t.constructor!==N)if(C(t))t=t.length?new N(new Uint8Array(t),O):U();else{if(!e)throw Error();t=void 0}return t}const ft=[];function pt(t){if(2&t)throw Error()}rt(ft,55),ht=Object.freeze(ft);class gt{constructor(t,e,n){this.g=t,this.h=e,this.l=n}next(){const t=this.g.next();return t.done||(t.value=this.h.call(this.l,t.value)),t}[Symbol.iterator](){return this}}function mt(t){return q?t[q]:void 0}var yt=Object.freeze({});function _t(t){return t.Na=!0,t}var vt=_t((t=>\"number\"==typeof t)),Et=_t((t=>\"string\"==typeof t)),wt=_t((t=>\"boolean\"==typeof t)),Tt=\"function\"==typeof t.BigInt&&\"bigint\"==typeof t.BigInt(0);function At(t){var e=t;if(Et(e)){if(!/^\\s*(?:-?[1-9]\\d*|0)?\\s*$/.test(e))throw Error(String(e))}else if(vt(e)&&!Number.isSafeInteger(e))throw Error(String(e));return Tt?BigInt(t):t=wt(t)?t?\"1\":\"0\":Et(t)?t.trim()||\"0\":String(t)}var bt=_t((t=>Tt?t>=St&&t<=Lt:\"-\"===t[0]?Rt(t,kt):Rt(t,xt)));const kt=Number.MIN_SAFE_INTEGER.toString(),St=Tt?BigInt(Number.MIN_SAFE_INTEGER):void 0,xt=Number.MAX_SAFE_INTEGER.toString(),Lt=Tt?BigInt(Number.MAX_SAFE_INTEGER):void 0;function Rt(t,e){if(t.length>e.length)return!1;if(t.length<e.length||t===e)return!0;for(let n=0;n<t.length;n++){const r=t[n],i=e[n];if(r>i)return!1;if(r<i)return!0}}const Ft=\"function\"==typeof Uint8Array.prototype.slice;let It,Mt=0,Pt=0;function Ct(t){const e=t>>>0;Mt=e,Pt=(t-e)/4294967296>>>0}function Ot(t){if(t<0){Ct(-t);const[e,n]=Xt(Mt,Pt);Mt=e>>>0,Pt=n>>>0}else Ct(t)}function Ut(t){const e=It||=new DataView(new ArrayBuffer(8));e.setFloat32(0,+t,!0),Pt=0,Mt=e.getUint32(0,!0)}function Dt(t,e){const n=4294967296*e+(t>>>0);return Number.isSafeInteger(n)?n:Bt(t,e)}function Nt(t,e){const n=2147483648&e;return n&&(e=~e>>>0,0==(t=1+~t>>>0)&&(e=e+1>>>0)),\"number\"==typeof(t=Dt(t,e))?n?-t:t:n?\"-\"+t:t}function Bt(t,e){if(t>>>=0,(e>>>=0)<=2097151)var n=\"\"+(4294967296*e+t);else at()?n=\"\"+(BigInt(e)<<BigInt(32)|BigInt(t)):(t=(16777215&t)+6777216*(n=16777215&(t>>>24|e<<8))+6710656*(e=e>>16&65535),n+=8147497*e,e*=2,t>=1e7&&(n+=t/1e7>>>0,t%=1e7),n>=1e7&&(e+=n/1e7>>>0,n%=1e7),n=e+Gt(n)+Gt(t));return n}function Gt(t){return t=String(t),\"0000000\".slice(t.length)+t}function jt(){var t=Mt,e=Pt;if(2147483648&e)if(at())t=\"\"+(BigInt(0|e)<<BigInt(32)|BigInt(t>>>0));else{const[n,r]=Xt(t,e);t=\"-\"+Bt(n,r)}else t=Bt(t,e);return t}function Vt(t){if(t.length<16)Ot(Number(t));else if(at())t=BigInt(t),Mt=Number(t&BigInt(4294967295))>>>0,Pt=Number(t>>BigInt(32)&BigInt(4294967295));else{const e=+(\"-\"===t[0]);Pt=Mt=0;const n=t.length;for(let r=e,i=(n-e)%6+e;i<=n;r=i,i+=6){const e=Number(t.slice(r,i));Pt*=1e6,Mt=1e6*Mt+e,Mt>=4294967296&&(Pt+=Math.trunc(Mt/4294967296),Pt>>>=0,Mt>>>=0)}if(e){const[t,e]=Xt(Mt,Pt);Mt=t,Pt=e}}}function Xt(t,e){return e=~e,t?t=1+~t:e+=1,[t,e]}const Ht=\"function\"==typeof BigInt?BigInt.asIntN:void 0,Wt=\"function\"==typeof BigInt?BigInt.asUintN:void 0,zt=Number.isSafeInteger,Kt=Number.isFinite,Yt=Math.trunc,$t=At(0);function qt(t){return null==t||\"number\"==typeof t?t:\"NaN\"===t||\"Infinity\"===t||\"-Infinity\"===t?Number(t):void 0}function Jt(t){return null==t||\"boolean\"==typeof t?t:\"number\"==typeof t?!!t:void 0}const Zt=/^-?([1-9][0-9]*|0)(\\.[0-9]+)?$/;function Qt(t){switch(typeof t){case\"bigint\":return!0;case\"number\":return Kt(t);case\"string\":return Zt.test(t);default:return!1}}function te(t){if(null==t)return t;if(\"string\"==typeof t&&t)t=+t;else if(\"number\"!=typeof t)return;return Kt(t)?0|t:void 0}function ee(t){if(null==t)return t;if(\"string\"==typeof t&&t)t=+t;else if(\"number\"!=typeof t)return;return Kt(t)?t>>>0:void 0}function ne(t){if(\"-\"===t[0])return!1;const e=t.length;return e<20||20===e&&Number(t.substring(0,6))<184467}function re(t){const e=t.length;return\"-\"===t[0]?e<20||20===e&&Number(t.substring(0,7))>-922337:e<19||19===e&&Number(t.substring(0,6))<922337}function ie(t){return re(t)?t:(Vt(t),jt())}function se(t){return t=Yt(t),zt(t)||(Ot(t),t=Nt(Mt,Pt)),t}function oe(t){var e=Yt(Number(t));return zt(e)?String(e):(-1!==(e=t.indexOf(\".\"))&&(t=t.substring(0,e)),ie(t))}function ae(t){var e=Yt(Number(t));return zt(e)?At(e):(-1!==(e=t.indexOf(\".\"))&&(t=t.substring(0,e)),at()?At(Ht(64,BigInt(t))):At(ie(t)))}function ce(t){if(zt(t))t=At(se(t));else{if(t=Yt(t),zt(t))t=String(t);else{const e=String(t);re(e)?t=e:(Ot(t),t=jt())}t=At(t)}return t}function he(t){return null==t?t:\"bigint\"==typeof t?(bt(t)?t=Number(t):(t=Ht(64,t),t=bt(t)?Number(t):String(t)),t):Qt(t)?\"number\"==typeof t?se(t):oe(t):void 0}function ue(t){if(null==t)return t;var e=typeof t;if(\"bigint\"===e)return String(Wt(64,t));if(Qt(t)){if(\"string\"===e)return e=Yt(Number(t)),zt(e)&&e>=0?t=String(e):(-1!==(e=t.indexOf(\".\"))&&(t=t.substring(0,e)),ne(t)||(Vt(t),t=Bt(Mt,Pt))),t;if(\"number\"===e)return(t=Yt(t))>=0&&zt(t)?t:function(t){if(t<0){Ot(t);var e=Bt(Mt,Pt);return t=Number(e),zt(t)?t:e}return ne(e=String(t))?e:(Ot(t),Dt(Mt,Pt))}(t)}}function le(t){if(\"string\"!=typeof t)throw Error();return t}function de(t){if(null!=t&&\"string\"!=typeof t)throw Error();return t}function fe(t){return null==t||\"string\"==typeof t?t:void 0}function pe(t,e,n,r){if(null!=t&&\"object\"==typeof t&&t.W===ut)return t;if(!Array.isArray(t))return n?2&r?((t=e[Y])||(it((t=new e).u),t=e[Y]=t),e=t):e=new e:e=void 0,e;let i=n=0|t[Q];return 0===i&&(i|=32&r),i|=2&r,i!==n&&rt(t,i),new e(t)}function ge(t,e,n){if(e)t:{if(!Qt(e=t))throw X(\"int64\");switch(typeof e){case\"string\":e=ae(e);break t;case\"bigint\":e=At(Ht(64,e));break t;default:e=ce(e)}}else t=typeof(e=t),e=null==e?e:\"bigint\"===t?At(Ht(64,e)):Qt(e)?\"string\"===t?ae(e):ce(e):void 0;return null==(t=e)?n?$t:void 0:t}function me(t){return t}const ye={};let _e=function(){try{return w(new class extends Map{constructor(){super()}}),!1}catch{return!0}}();class ve{constructor(){this.g=new Map}get(t){return this.g.get(t)}set(t,e){return this.g.set(t,e),this.size=this.g.size,this}delete(t){return t=this.g.delete(t),this.size=this.g.size,t}clear(){this.g.clear(),this.size=this.g.size}has(t){return this.g.has(t)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(t,e){return this.g.forEach(t,e)}[Symbol.iterator](){return this.entries()}}const Ee=_e?(Object.setPrototypeOf(ve.prototype,Map.prototype),Object.defineProperties(ve.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),ve):class extends Map{constructor(){super()}};function we(t){return t}function Te(t){if(2&t.M)throw Error(\"Cannot mutate an immutable Map\")}var Ae=class extends Ee{constructor(t,e,n=we,r=we){super();let i=0|t[Q];i|=64,rt(t,i),this.M=i,this.I=e,this.S=n,this.X=this.I?be:r;for(let s=0;s<t.length;s++){const o=t[s],a=n(o[0],!1,!0);let c=o[1];e?void 0===c&&(c=null):c=r(o[1],!1,!0,void 0,void 0,i),super.set(a,c)}}La(){var t=Ce;if(0!==this.size)return Array.from(super.entries(),(e=>(e[0]=t(e[0]),e[1]=t(e[1]),e)))}da(t=ke){const e=[],n=super.entries();for(var r;!(r=n.next()).done;)(r=r.value)[0]=t(r[0]),r[1]=t(r[1]),e.push(r);return e}clear(){Te(this),super.clear()}delete(t){return Te(this),super.delete(this.S(t,!0,!1))}entries(){if(this.I){var t=super.keys();t=new gt(t,Se,this)}else t=super.entries();return t}values(){if(this.I){var t=super.keys();t=new gt(t,Ae.prototype.get,this)}else t=super.values();return t}forEach(t,e){this.I?super.forEach(((n,r,i)=>{t.call(e,i.get(r),r,i)})):super.forEach(t,e)}set(t,e){return Te(this),null==(t=this.S(t,!0,!1))?this:null==e?(super.delete(t),this):super.set(t,this.X(e,!0,!0,this.I,!1,this.M))}Ja(t){const e=this.S(t[0],!1,!0);t=t[1],t=this.I?void 0===t?null:t:this.X(t,!1,!0,void 0,!1,this.M),super.set(e,t)}has(t){return super.has(this.S(t,!1,!1))}get(t){t=this.S(t,!1,!1);const e=super.get(t);if(void 0!==e){var n=this.I;return n?((n=this.X(e,!1,!0,n,this.pa,this.M))!==e&&super.set(t,n),n):e}}[Symbol.iterator](){return this.entries()}};function be(t,e,n,r,i,s){return t=pe(t,r,n,s),i&&(t=je(t)),t}function ke(t){return t}function Se(t){return[t,this.get(t)]}let xe,Le,Re,Fe;function Ie(){return xe||=new Ae(it([]),void 0,void 0,void 0,ye)}function Me(t,e,n,r,i){if(null!=t){if(Array.isArray(t)){const s=0|t[Q];return 0===t.length&&1&s?void 0:i&&2&s?t:Pe(t,e,n,void 0!==r,i)}return e(t,r)}}function Pe(t,e,n,r,i){const s=r||n?0|t[Q]:0,o=r?!!(32&s):void 0;let a=0;const c=(r=ct(t)).length;for(let t=0;t<c;t++){var h=r[t];if(t===c-1&&lt(h)){var u=e,l=n,d=o,f=i;let t;for(let e in h){const n=Me(h[e],u,l,d,f);null!=n&&((t??={})[e]=n)}h=t}else h=Me(r[t],e,n,o,i);r[t]=h,null!=h&&(a=t+1)}return a<c&&(r.length=a),n&&((t=mt(t))&&(r[q]=ct(t)),n(s,r)),r}function Ce(t){return Me(t,Oe,void 0,void 0,!1)}function Oe(t){switch(typeof t){case\"number\":return Number.isFinite(t)?t:\"\"+t;case\"bigint\":return bt(t)?Number(t):\"\"+t;case\"boolean\":return t?1:0;case\"object\":if(C(t))return C(t)&&H(Z),R(t);if(t.W===ut)return Ue(t);if(t instanceof N){const e=t.g;return null==e?\"\":\"string\"==typeof e?e:t.g=R(e)}return t instanceof Ae?t.La():void 0}return t}function Ue(t){var e=t.u;t=Pe(e,Oe,void 0,void 0,!1);var n=0|e[Q];if((e=t.length)&&!(512&n)){var r=t[e-1],i=!1;lt(r)?(e--,i=!0):r=void 0;var s=e-(n=512&n?0:-1),o=(Le??me)(s,n,t,r);if(r&&(t[e]=void 0),s<o&&r){for(var a in s=!0,r){const c=+a;c<=o?(t[i=c+n]=r[a],e=Math.max(i+1,e),i=!1,delete r[a]):s=!1}s&&(r=void 0)}for(s=e-1;e>0;s=e-1)if(null==(a=t[s]))e--,i=!0;else{if(!((s-=n)>=o))break;(r??={})[s]=a,e--,i=!0}i&&(t.length=e),r&&t.push(r)}return t}function De(t,e,n){return t=Ne(t,e[0],e[1],n?1:2),e!==Re&&n&&nt(t,8192),t}function Ne(t,e,n,r){if(null==t){var i=96;n?(t=[n],i|=512):t=[],e&&(i=-16760833&i|(1023&e)<<14)}else{if(!Array.isArray(t))throw Error(\"narr\");if(8192&(i=0|t[Q])||!(64&i)||2&i||H(J),1024&i)throw Error(\"farr\");if(64&i)return t;if(1===r||2===r||(i|=64),n&&(i|=512,n!==t[0]))throw Error(\"mid\");t:{var s=(n=t).length;if(s){var o=s-1;if(lt(r=n[o])){if((o-=e=512&(i|=256)?0:-1)>=1024)throw Error(\"pvtlmt\");for(var a in r)(s=+a)<o&&(n[s+e]=r[a],delete r[a]);i=-16760833&i|(1023&o)<<14;break t}}if(e){if((a=Math.max(e,s-(512&i?0:-1)))>1024)throw Error(\"spvt\");i=-16760833&i|(1023&a)<<14}}}return rt(t,i),t}function Be(t,e,n=ot){if(null!=t){if(x&&t instanceof Uint8Array)return e?t:new Uint8Array(t);if(Array.isArray(t)){var r=0|t[Q];return 2&r?t:(e&&=0===r||!!(32&r)&&!(64&r||!(16&r)),e?(rt(t,34|r),4&r&&Object.freeze(t),t):Pe(t,Be,4&r?ot:n,!0,!0))}return t.W===ut?t=2&(r=0|(n=t.u)[Q])?t:new t.constructor(Ge(n,r,!0)):t instanceof Ae&&!(2&t.M)&&(n=it(t.da(Be)),t=new Ae(n,t.I,t.S,t.X)),t}}function Ge(t,e,n){const r=n||2&e?ot:st,i=!!(32&e);return t=function(t,e,n){const r=ct(t);var i=r.length;const s=256&e?r[i-1]:void 0;for(i+=s?-1:0,e=512&e?1:0;e<i;e++)r[e]=n(r[e]);if(s){e=r[e]={};for(const t in s)e[t]=n(s[t])}return(t=mt(t))&&(r[q]=ct(t)),r}(t,e,(t=>Be(t,i,r))),nt(t,32|(n?2:0)),t}function je(t){const e=t.u,n=0|e[Q];return 2&n?new t.constructor(Ge(e,n,!1)):t}function Ve(t,e){return Xe(t=t.u,0|t[Q],e)}function Xe(t,e,n){if(-1===n)return null;const r=n+(512&e?0:-1),i=t.length-1;return r>=i&&256&e?t[i][n]:r<=i?t[r]:void 0}function He(t,e,n){const r=t.u;let i=0|r[Q];return pt(i),We(r,i,e,n),t}function We(t,e,n,r){const i=512&e?0:-1,s=n+i;var o=t.length-1;return s>=o&&256&e?(t[o][n]=r,e):s<=o?(t[s]=r,e):(void 0!==r&&(n>=(o=e>>14&1023||536870912)?null!=r&&(t[o+i]={[n]:r},rt(t,e|=256)):t[s]=r),e)}function ze(t,e){let n=0|(t=t.u)[Q];const r=Xe(t,n,e),i=qt(r);return null!=i&&i!==r&&We(t,n,e,i),i}function Ke(t){let e=0|(t=t.u)[Q];const n=Xe(t,e,1),r=dt(n,!0);return null!=r&&r!==n&&We(t,e,1,r),r}function Ye(){return void 0===yt?2:4}function $e(t,e,n,r,i){const s=t.u,o=2&(t=0|s[Q])?1:r;i=!!i;let a=0|(r=qe(s,t,e))[Q];if(!(4&a)){4&a&&(r=ct(r),a=pn(a,t),t=We(s,t,e,r));let i=0,o=0;for(;i<r.length;i++){const t=n(r[i]);null!=t&&(r[o++]=t)}o<i&&(r.length=o),a=Je(a,t),n=-2049&(20|a),a=n&=-4097,rt(r,a),2&a&&Object.freeze(r)}return 1===o||4===o&&32&a?Ze(a)||(i=a,a|=2,a!==i&&rt(r,a),Object.freeze(r)):(2===o&&Ze(a)&&(r=ct(r),a=pn(a,t),a=gn(a,t,i),rt(r,a),t=We(s,t,e,r)),Ze(a)||(e=a,a=gn(a,t,i),a!==e&&rt(r,a))),r}function qe(t,e,n){return t=Xe(t,e,n),Array.isArray(t)?t:ht}function Je(t,e){return 0===t&&(t=pn(t,e)),1|t}function Ze(t){return!!(2&t)&&!!(4&t)||!!(1024&t)}function Qe(t){t=ct(t);for(let e=0;e<t.length;e++){const n=t[e]=ct(t[e]);Array.isArray(n[1])&&(n[1]=it(n[1]))}return t}function tn(t,e,n,r){let i=0|(t=t.u)[Q];pt(i),We(t,i,e,(\"0\"===r?0===Number(n):n===r)?void 0:n)}function en(t,e,n,r){pt(e);let i=qe(t,e,n);const s=i!==ht;if(64&e||!(8192&e)||!s){const o=s?0|i[Q]:0;let a=o;(!s||2&a||Ze(a)||4&a&&!(32&a))&&(i=ct(i),a=pn(a,e),e=We(t,e,n,i)),a=-13&Je(a,e),a=gn(r?-17&a:16|a,e,!0),a!==o&&rt(i,a)}return i}function nn(t,e){var n=Ts;return on(rn(t=t.u),t,0|t[Q],n)===e?e:-1}function rn(t){if(W)return t[$]??(t[$]=new Map);if($ in t)return t[$];const e=new Map;return Object.defineProperty(t,$,{value:e}),e}function sn(t,e,n,r){const i=rn(t),s=on(i,t,e,n);return s!==r&&(s&&(e=We(t,e,s)),i.set(n,r)),e}function on(t,e,n,r){let i=t.get(r);if(null!=i)return i;i=0;for(let t=0;t<r.length;t++){const s=r[t];null!=Xe(e,n,s)&&(0!==i&&(n=We(e,n,i)),i=s)}return t.set(r,i),i}function an(t,e,n){let r=0|t[Q];const i=Xe(t,r,n);let s;if(null!=i&&i.W===ut)return(e=je(i))!==i&&We(t,r,n,e),e.u;if(Array.isArray(i)){const t=0|i[Q];s=2&t?De(Ge(i,t,!1),e,!0):64&t?i:De(s,e,!0)}else s=De(void 0,e,!0);return s!==i&&We(t,r,n,s),s}function cn(t,e,n){let r=0|(t=t.u)[Q];const i=Xe(t,r,n);return(e=pe(i,e,!1,r))!==i&&null!=e&&We(t,r,n,e),e}function hn(t,e,n){if(null==(e=cn(t,e,n)))return e;let r=0|(t=t.u)[Q];if(!(2&r)){const i=je(e);i!==e&&We(t,r,n,e=i)}return e}function un(t,e,n,r,i,s,o){t=t.u;var a=!!(2&e);const c=a?1:i;s=!!s,o&&=!a;var h=0|(i=qe(t,e,r))[Q];if(!(a=!!(4&h))){var u=i,l=e;const t=!!(2&(h=Je(h,e)));t&&(l|=2);let r=!t,s=!0,o=0,a=0;for(;o<u.length;o++){const e=pe(u[o],n,!1,l);if(e instanceof n){if(!t){const t=!!(2&(0|e.u[Q]));r&&=!t,s&&=t}u[a++]=e}}a<o&&(u.length=a),h|=4,h=s?16|h:-17&h,rt(u,h=r?8|h:-9&h),t&&Object.freeze(u)}if(o&&!(8&h||!i.length&&(1===c||4===c&&32&h))){for(Ze(h)&&(i=ct(i),h=pn(h,e),e=We(t,e,r,i)),n=i,o=h,u=0;u<n.length;u++)(h=n[u])!==(l=je(h))&&(n[u]=l);o|=8,rt(n,o=n.length?-17&o:16|o),h=o}return 1===c||4===c&&32&h?Ze(h)||(e=h,(h|=!i.length||16&h&&(!a||32&h)?2:1024)!==e&&rt(i,h),Object.freeze(i)):(2===c&&Ze(h)&&(rt(i=ct(i),h=gn(h=pn(h,e),e,s)),e=We(t,e,r,i)),Ze(h)||(r=h,(h=gn(h,e,s))!==r&&rt(i,h))),i}function ln(t,e,n){const r=0|t.u[Q];return un(t,r,e,n,Ye(),!1,!(2&r))}function dn(t,e,n,r){return null==r&&(r=void 0),He(t,n,r)}function fn(t,e,n,r){null==r&&(r=void 0);t:{let i=0|(t=t.u)[Q];if(pt(i),null==r){const r=rn(t);if(on(r,t,i,n)!==e)break t;r.set(n,0)}else i=sn(t,i,n,e);We(t,i,e,r)}}function pn(t,e){return-1025&(t=32|(2&e?2|t:-3&t))}function gn(t,e,n){return 32&e&&n||(t&=-33),t}function mn(t,e,n){pt(0|t.u[Q]),$e(t,e,fe,2,!0).push(le(n))}function yn(t,e,n,r){const i=0|t.u[Q];pt(i),t=un(t,i,n,e,2,!0),r=null!=r?r:new n,t.push(r),t[Q]=2&(0|r.u[Q])?-9&t[Q]:-17&t[Q]}function _n(t,e){return te(Ve(t,e))}function vn(t,e){return fe(Ve(t,e))}function En(t,e){return ze(t,e)??0}function wn(t,e,n){if(null!=n&&\"boolean\"!=typeof n)throw t=typeof n,Error(`Expected boolean but got ${\"object\"!=t?t:n?Array.isArray(n)?\"array\":t:\"null\"}: ${n}`);He(t,e,n)}function Tn(t,e,n){if(null!=n){if(\"number\"!=typeof n)throw X(\"int32\");if(!Kt(n))throw X(\"int32\");n|=0}He(t,e,n)}function An(t,e,n){if(null!=n&&\"number\"!=typeof n)throw Error(`Value of float/double field must be a number, found ${typeof n}: ${n}`);He(t,e,n)}function bn(t,e,n){{const o=t.u;let a=0|o[Q];if(pt(a),null==n)We(o,a,e);else{var r=t=0|n[Q],i=Ze(t),s=i||Object.isFrozen(n);for(i||(t=0),s||(n=ct(n),r=0,t=gn(t=pn(t,a),a,!0),s=!1),t|=21,i=0;i<n.length;i++){const e=n[i],o=le(e);Object.is(e,o)||(s&&(n=ct(n),r=0,t=gn(t=pn(t,a),a,!0),s=!1),n[i]=o)}t!==r&&(s&&(n=ct(n),t=gn(t=pn(t,a),a,!0)),rt(n,t)),We(o,a,e,n)}}}function kn(t,e){return Error(`Invalid wire type: ${t} (at position ${e})`)}function Sn(){return Error(\"Failed to read varint, encoding is invalid.\")}function xn(t,e){return Error(`Tried to read past the end of the data ${e} > ${t}`)}function Ln(t){if(\"string\"==typeof t)return{buffer:P(t),O:!1};if(Array.isArray(t))return{buffer:new Uint8Array(t),O:!1};if(t.constructor===Uint8Array)return{buffer:t,O:!1};if(t.constructor===ArrayBuffer)return{buffer:new Uint8Array(t),O:!1};if(t.constructor===N)return{buffer:D(t)||new Uint8Array(0),O:!0};if(t instanceof Uint8Array)return{buffer:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),O:!1};throw Error(\"Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers\")}function Rn(t,e){let n,r=0,i=0,s=0;const o=t.h;let a=t.g;do{n=o[a++],r|=(127&n)<<s,s+=7}while(s<32&&128&n);for(s>32&&(i|=(127&n)>>4),s=3;s<32&&128&n;s+=7)n=o[a++],i|=(127&n)<<s;if(Dn(t,a),n<128)return e(r>>>0,i>>>0);throw Sn()}function Fn(t){let e=0,n=t.g;const r=n+10,i=t.h;for(;n<r;){const r=i[n++];if(e|=r,0==(128&r))return Dn(t,n),!!(127&e)}throw Sn()}function In(t){const e=t.h;let n=t.g,r=e[n++],i=127&r;if(128&r&&(r=e[n++],i|=(127&r)<<7,128&r&&(r=e[n++],i|=(127&r)<<14,128&r&&(r=e[n++],i|=(127&r)<<21,128&r&&(r=e[n++],i|=r<<28,128&r&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++])))))throw Sn();return Dn(t,n),i}function Mn(t){return In(t)>>>0}function Pn(t){var e=t.h;const n=t.g,r=e[n],i=e[n+1],s=e[n+2];return e=e[n+3],Dn(t,t.g+4),(r<<0|i<<8|s<<16|e<<24)>>>0}function Cn(t){var e=Pn(t);t=2*(e>>31)+1;const n=e>>>23&255;return e&=8388607,255==n?e?NaN:t*(1/0):0==n?1401298464324817e-60*t*e:t*Math.pow(2,n-150)*(e+8388608)}function On(t){return In(t)}function Un(t,e,{aa:n=!1}={}){t.aa=n,e&&(e=Ln(e),t.h=e.buffer,t.m=e.O,t.j=0,t.l=t.h.length,t.g=t.j)}function Dn(t,e){if(t.g=e,e>t.l)throw xn(t.l,e)}function Nn(t,e){if(e<0)throw Error(`Tried to read a negative byte length: ${e}`);const n=t.g,r=n+e;if(r>t.l)throw xn(e,t.l-n);return t.g=r,n}function Bn(t,e){if(0==e)return U();var n=Nn(t,e);return t.aa&&t.m?n=t.h.subarray(n,n+e):(t=t.h,n=n===(e=n+e)?new Uint8Array(0):Ft?t.slice(n,e):new Uint8Array(t.subarray(n,e))),0==n.length?U():new N(n,O)}Ae.prototype.toJSON=void 0;var Gn=[];function jn(t){var e=t.g;if(e.g==e.l)return!1;t.l=t.g.g;var n=Mn(t.g);if(e=n>>>3,!((n&=7)>=0&&n<=5))throw kn(n,t.l);if(e<1)throw Error(`Invalid field number: ${e} (at position ${t.l})`);return t.m=e,t.h=n,!0}function Vn(t){switch(t.h){case 0:0!=t.h?Vn(t):Fn(t.g);break;case 1:Dn(t=t.g,t.g+8);break;case 2:if(2!=t.h)Vn(t);else{var e=Mn(t.g);Dn(t=t.g,t.g+e)}break;case 5:Dn(t=t.g,t.g+4);break;case 3:for(e=t.m;;){if(!jn(t))throw Error(\"Unmatched start-group tag: stream EOF\");if(4==t.h){if(t.m!=e)throw Error(\"Unmatched end-group tag\");break}Vn(t)}break;default:throw kn(t.h,t.l)}}function Xn(t,e,n){const r=t.g.l,i=Mn(t.g),s=t.g.g+i;let o=s-r;if(o<=0&&(t.g.l=s,n(e,t,void 0,void 0,void 0),o=s-t.g.g),o)throw Error(`Message parsing ended unexpectedly. Expected to read ${i} bytes, instead read ${i-o} bytes, either the data ended unexpectedly or the message misreported its own length`);return t.g.g=s,t.g.l=r,e}function Hn(t){var o=Mn(t.g),a=Nn(t=t.g,o);if(t=t.h,s){var c,h=t;(c=i)||(c=i=new TextDecoder(\"utf-8\",{fatal:!0})),o=a+o,h=0===a&&o===h.length?h:h.subarray(a,o);try{var u=c.decode(h)}catch(t){if(void 0===r){try{c.decode(new Uint8Array([128]))}catch(t){}try{c.decode(new Uint8Array([97])),r=!0}catch(t){r=!1}}throw!r&&(i=void 0),t}}else{o=(u=a)+o,a=[];let r,i=null;for(;u<o;){var l=t[u++];l<128?a.push(l):l<224?u>=o?e():(r=t[u++],l<194||128!=(192&r)?(u--,e()):a.push((31&l)<<6|63&r)):l<240?u>=o-1?e():(r=t[u++],128!=(192&r)||224===l&&r<160||237===l&&r>=160||128!=(192&(c=t[u++]))?(u--,e()):a.push((15&l)<<12|(63&r)<<6|63&c)):l<=244?u>=o-2?e():(r=t[u++],128!=(192&r)||r-144+(l<<28)>>30!=0||128!=(192&(c=t[u++]))||128!=(192&(h=t[u++]))?(u--,e()):(l=(7&l)<<18|(63&r)<<12|(63&c)<<6|63&h,l-=65536,a.push(55296+(l>>10&1023),56320+(1023&l)))):e(),a.length>=8192&&(i=n(i,a),a.length=0)}u=n(i,a)}return u}function Wn(t){const e=Mn(t.g);return Bn(t.g,e)}function zn(t,e,n){var r=Mn(t.g);for(r=t.g.g+r;t.g.g<r;)n.push(e(t.g))}var Kn=[];function Yn(t,e,n){e.g?e.m(t,e.g,e.h,n):e.m(t,e.h,n)}var $n=class{constructor(t,e){this.u=Ne(t,e)}toJSON(){try{var t=Ue(this)}finally{Le=void 0}return t}l(){var t=_o;return t.g?t.l(this,t.g,t.h):t.l(this,t.h,t.defaultValue)}clone(){const t=this.u;return new this.constructor(Ge(t,0|t[Q],!1))}O(){return!!(2&(0|this.u[Q]))}};function qn(t){return t?/^\\d+$/.test(t)?(Vt(t),new Jn(Mt,Pt)):null:Zn||=new Jn(0,0)}$n.prototype.W=ut,$n.prototype.toString=function(){return this.u.toString()};var Jn=class{constructor(t,e){this.h=t>>>0,this.g=e>>>0}};let Zn;function Qn(t){return t?/^-?\\d+$/.test(t)?(Vt(t),new tr(Mt,Pt)):null:er||=new tr(0,0)}var tr=class{constructor(t,e){this.h=t>>>0,this.g=e>>>0}};let er;function nr(t,e,n){for(;n>0||e>127;)t.g.push(127&e|128),e=(e>>>7|n<<25)>>>0,n>>>=7;t.g.push(e)}function rr(t,e){for(;e>127;)t.g.push(127&e|128),e>>>=7;t.g.push(e)}function ir(t,e){if(e>=0)rr(t,e);else{for(let n=0;n<9;n++)t.g.push(127&e|128),e>>=7;t.g.push(1)}}function sr(t,e){t.g.push(e>>>0&255),t.g.push(e>>>8&255),t.g.push(e>>>16&255),t.g.push(e>>>24&255)}function or(t,e){0!==e.length&&(t.l.push(e),t.h+=e.length)}function ar(t,e,n){rr(t.g,8*e+n)}function cr(t,e){return ar(t,e,2),e=t.g.end(),or(t,e),e.push(t.h),e}function hr(t,e){var n=e.pop();for(n=t.h+t.g.length()-n;n>127;)e.push(127&n|128),n>>>=7,t.h++;e.push(n),t.h++}function ur(t,e,n){ar(t,e,2),rr(t.g,n.length),or(t,t.g.end()),or(t,n)}function lr(t,e,n,r){null!=n&&(e=cr(t,e),r(n,t),hr(t,e))}function dr(){const t=class{constructor(){throw Error()}};return Object.setPrototypeOf(t,t.prototype),t}var fr=dr(),pr=dr(),gr=dr(),mr=dr(),yr=dr(),_r=dr(),vr=dr(),Er=dr(),wr=dr(),Tr=class{constructor(t,e,n){this.g=t,this.h=e,t=fr,this.l=!!t&&n===t||!1}};function Ar(t,e){return new Tr(t,e,fr)}function br(t,e,n,r,i){lr(t,n,Or(e,r),i)}const kr=Ar((function(t,e,n,r,i){return 2===t.h&&(Xn(t,an(e,r,n),i),!0)}),br),Sr=Ar((function(t,e,n,r,i){return 2===t.h&&(Xn(t,an(e,r,n),i),!0)}),br);var xr=Symbol(),Lr=Symbol(),Rr=Symbol(),Fr=Symbol();let Ir,Mr;function Pr(t,e,n,r){var i=r[t];if(i)return i;(i={}).Ma=r,i.T=function(t){switch(typeof t){case\"boolean\":return Re||=[0,void 0,!0];case\"number\":return t>0?void 0:0===t?Fe||=[0,void 0]:[-t,void 0];case\"string\":return[0,t];case\"object\":return t}}(r[0]);var s=r[1];let o=1;s&&s.constructor===Object&&(i.ga=s,\"function\"==typeof(s=r[++o])&&(i.la=!0,Ir??=s,Mr??=r[o+1],s=r[o+=2]));const a={};for(;s&&Array.isArray(s)&&s.length&&\"number\"==typeof s[0]&&s[0]>0;){for(var c=0;c<s.length;c++)a[s[c]]=s;s=r[++o]}for(c=1;void 0!==s;){let t;\"number\"==typeof s&&(c+=s,s=r[++o]);var h=void 0;if(s instanceof Tr?t=s:(t=kr,o--),t?.l){s=r[++o],h=r;var u=o;\"function\"==typeof s&&(s=s(),h[u]=s),h=s}for(u=c+1,\"number\"==typeof(s=r[++o])&&s<0&&(u-=s,s=r[++o]);c<u;c++){const r=a[c];h?n(i,c,t,h,r):e(i,c,t,r)}}return r[t]=i}function Cr(t){return Array.isArray(t)?t[0]instanceof Tr?t:[Sr,t]:[t,void 0]}function Or(t,e){return t instanceof $n?t.u:Array.isArray(t)?De(t,e,!1):void 0}function Ur(t,e,n,r){const i=n.g;t[e]=r?(t,e,n)=>i(t,e,n,r):i}function Dr(t,e,n,r,i){const s=n.g;let o,a;t[e]=(t,e,n)=>s(t,e,n,a||=Pr(Lr,Ur,Dr,r).T,o||=Nr(r),i)}function Nr(t){let e=t[Rr];if(null!=e)return e;const n=Pr(Lr,Ur,Dr,t);return e=n.la?(t,e)=>Ir(t,e,n):(t,e)=>{const r=0|t[Q];for(;jn(e)&&4!=e.h;){var i=e.m,s=n[i];if(null==s){var o=n.ga;o&&(o=o[i])&&(null!=(o=Br(o))&&(s=n[i]=o))}null!=s&&s(e,t,i)||(i=(s=e).l,Vn(s),s.fa?s=void 0:(o=s.g.g-i,s.g.g=i,s=Bn(s.g,o)),i=t,s&&((o=i[q])?o.push(s):i[q]=[s]))}return 8192&r&&it(t),!0},t[Rr]=e}function Br(t){const e=(t=Cr(t))[0].g;if(t=t[1]){const n=Nr(t),r=Pr(Lr,Ur,Dr,t).T;return(t,i,s)=>e(t,i,s,r,n)}return e}function Gr(t,e,n){t[e]=n.h}function jr(t,e,n,r){let i,s;const o=n.h;t[e]=(t,e,n)=>o(t,e,n,s||=Pr(xr,Gr,jr,r).T,i||=Vr(r))}function Vr(t){let e=t[Fr];if(!e){const n=Pr(xr,Gr,jr,t);e=(t,e)=>Xr(t,e,n),t[Fr]=e}return e}function Xr(t,e,n){!function(t,e,n){const r=512&e?0:-1,i=t.length,s=i+((e=64&e?256&e:!!i&&lt(t[i-1]))?-1:0);for(let e=0;e<s;e++)n(e-r,t[e]);if(e){t=t[i-1];for(const e in t)!isNaN(e)&&n(+e,t[e])}}(t,0|t[Q]|(n.T[1]?512:0),((t,r)=>{if(null!=r){var i=function(t,e){var n=t[e];if(n)return n;if((n=t.ga)&&(n=n[e])){var r=(n=Cr(n))[0].h;if(n=n[1]){const e=Vr(n),i=Pr(xr,Gr,jr,n).T;n=t.la?Mr(i,e):(t,n,s)=>r(t,n,s,i,e)}else n=r;return t[e]=n}}(n,t);i&&i(e,r,t)}})),(t=mt(t))&&function(t,e){or(t,t.g.end());for(let n=0;n<e.length;n++)or(t,D(e[n])||new Uint8Array(0))}(e,t)}function Hr(t,e){if(Array.isArray(e)){var n=0|e[Q];if(4&n)return e;for(var r=0,i=0;r<e.length;r++){const n=t(e[r]);null!=n&&(e[i++]=n)}return i<r&&(e.length=i),rt(e,-6145&(5|n)),2&n&&Object.freeze(e),e}}function Wr(t,e,n){return new Tr(t,e,n)}function zr(t,e,n){return new Tr(t,e,n)}function Kr(t,e,n){We(t,0|t[Q],e,n)}var Yr=Ar((function(t,e,n,r,i){return 2===t.h&&(t=Xn(t,De([void 0,void 0],r,!0),i),pt(r=0|e[Q]),(i=Xe(e,r,n))instanceof Ae?0!=(2&i.M)?((i=i.da()).push(t),We(e,r,n,i)):i.Ja(t):Array.isArray(i)?(2&(0|i[Q])&&We(e,r,n,i=Qe(i)),i.push(t)):We(e,r,n,[t]),!0)}),(function(t,e,n,r,i){if(e instanceof Ae)e.forEach(((e,s)=>{lr(t,n,De([s,e],r,!1),i)}));else if(Array.isArray(e))for(let s=0;s<e.length;s++){const o=e[s];Array.isArray(o)&&lr(t,n,De(o,r,!1),i)}}));function $r(t,e,n){if(e=function(t){if(null==t)return t;const e=typeof t;if(\"bigint\"===e)return String(Ht(64,t));if(Qt(t)){if(\"string\"===e)return oe(t);if(\"number\"===e)return se(t)}}(e),null!=e){if(\"string\"==typeof e)Qn(e);if(null!=e)switch(ar(t,n,0),typeof e){case\"number\":t=t.g,Ot(e),nr(t,Mt,Pt);break;case\"bigint\":n=BigInt.asUintN(64,e),n=new tr(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),nr(t.g,n.h,n.g);break;default:n=Qn(e),nr(t.g,n.h,n.g)}}}function qr(t,e,n){null!=(e=te(e))&&null!=e&&(ar(t,n,0),ir(t.g,e))}function Jr(t,e,n){null!=(e=Jt(e))&&(ar(t,n,0),t.g.g.push(e?1:0))}function Zr(t,e,n){null!=(e=fe(e))&&ur(t,n,c(e))}function Qr(t,e,n,r,i){lr(t,n,Or(e,r),i)}function ti(t,e,n){null==e||\"string\"==typeof e||e instanceof N||(C(e)?C(e)&&H(Z):e=void 0),null!=e&&ur(t,n,Ln(e).buffer)}function ei(t,e,n){return(5===t.h||2===t.h)&&(e=en(e,0|e[Q],n,!1),2==t.h?zn(t,Cn,e):e.push(Cn(t.g)),!0)}var ni=Wr((function(t,e,n){if(1!==t.h)return!1;var r=t.g;t=Pn(r);const i=Pn(r);r=2*(i>>31)+1;const s=i>>>20&2047;return t=4294967296*(1048575&i)+t,Kr(e,n,2047==s?t?NaN:r*(1/0):0==s?5e-324*r*t:r*Math.pow(2,s-1075)*(t+4503599627370496)),!0}),(function(t,e,n){null!=(e=qt(e))&&(ar(t,n,1),t=t.g,(n=It||=new DataView(new ArrayBuffer(8))).setFloat64(0,+e,!0),Mt=n.getUint32(0,!0),Pt=n.getUint32(4,!0),sr(t,Mt),sr(t,Pt))}),dr()),ri=Wr((function(t,e,n){return 5===t.h&&(Kr(e,n,Cn(t.g)),!0)}),(function(t,e,n){null!=(e=qt(e))&&(ar(t,n,5),t=t.g,Ut(e),sr(t,Mt))}),vr),ii=zr(ei,(function(t,e,n){if(null!=(e=Hr(qt,e)))for(let o=0;o<e.length;o++){var r=t,i=n,s=e[o];null!=s&&(ar(r,i,5),r=r.g,Ut(s),sr(r,Mt))}}),vr),si=zr(ei,(function(t,e,n){if(null!=(e=Hr(qt,e))&&e.length){ar(t,n,2),rr(t.g,4*e.length);for(let r=0;r<e.length;r++)n=t.g,Ut(e[r]),sr(n,Mt)}}),vr),oi=Wr((function(t,e,n){return 0===t.h&&(Kr(e,n,Rn(t.g,Nt)),!0)}),$r,_r),ai=Wr((function(t,e,n){return 0===t.h&&(Kr(e,n,0===(t=Rn(t.g,Nt))?void 0:t),!0)}),$r,_r),ci=Wr((function(t,e,n){return 0===t.h&&(Kr(e,n,Rn(t.g,Dt)),!0)}),(function(t,e,n){if(null!=(e=ue(e))){if(\"string\"==typeof e)qn(e);if(null!=e)switch(ar(t,n,0),typeof e){case\"number\":t=t.g,Ot(e),nr(t,Mt,Pt);break;case\"bigint\":n=BigInt.asUintN(64,e),n=new Jn(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),nr(t.g,n.h,n.g);break;default:n=qn(e),nr(t.g,n.h,n.g)}}}),dr()),hi=Wr((function(t,e,n){return 0===t.h&&(Kr(e,n,In(t.g)),!0)}),qr,mr),ui=zr((function(t,e,n){return(0===t.h||2===t.h)&&(e=en(e,0|e[Q],n,!1),2==t.h?zn(t,In,e):e.push(In(t.g)),!0)}),(function(t,e,n){if(null!=(e=Hr(te,e))&&e.length){n=cr(t,n);for(let n=0;n<e.length;n++)ir(t.g,e[n]);hr(t,n)}}),mr),li=Wr((function(t,e,n){return 0===t.h&&(Kr(e,n,0===(t=In(t.g))?void 0:t),!0)}),qr,mr),di=Wr((function(t,e,n){return 0===t.h&&(Kr(e,n,Fn(t.g)),!0)}),Jr,pr),fi=Wr((function(t,e,n){return 0===t.h&&(Kr(e,n,!1===(t=Fn(t.g))?void 0:t),!0)}),Jr,pr),pi=zr((function(t,e,n){return 2===t.h&&(t=Hn(t),en(e,0|e[Q],n,!1).push(t),!0)}),(function(t,e,n){if(null!=(e=Hr(fe,e)))for(let o=0;o<e.length;o++){var r=t,i=n,s=e[o];null!=s&&ur(r,i,c(s))}}),gr),gi=Wr((function(t,e,n){return 2===t.h&&(Kr(e,n,\"\"===(t=Hn(t))?void 0:t),!0)}),Zr,gr),mi=Wr((function(t,e,n){return 2===t.h&&(Kr(e,n,Hn(t)),!0)}),Zr,gr),yi=function(t,e,n=fr){return new Tr(t,e,n)}((function(t,e,n,r,i){return 2===t.h&&(r=De(void 0,r,!0),en(e,0|e[Q],n,!0).push(r),Xn(t,r,i),!0)}),(function(t,e,n,r,i){if(Array.isArray(e))for(let s=0;s<e.length;s++)Qr(t,e[s],n,r,i)})),_i=Ar((function(t,e,n,r,i,s){return 2===t.h&&(sn(e,0|e[Q],s,n),Xn(t,e=an(e,r,n),i),!0)}),Qr),vi=Wr((function(t,e,n){return 2===t.h&&(Kr(e,n,Wn(t)),!0)}),ti,Er),Ei=zr((function(t,e,n){return(0===t.h||2===t.h)&&(e=en(e,0|e[Q],n,!1),2==t.h?zn(t,Mn,e):e.push(Mn(t.g)),!0)}),(function(t,e,n){if(null!=(e=Hr(ee,e)))for(let o=0;o<e.length;o++){var r=t,i=n,s=e[o];null!=s&&(ar(r,i,0),rr(r.g,s))}}),yr),wi=Wr((function(t,e,n){return 0===t.h&&(Kr(e,n,0===(t=Mn(t.g))?void 0:t),!0)}),(function(t,e,n){null!=(e=ee(e))&&null!=e&&(ar(t,n,0),rr(t.g,e))}),yr),Ti=Wr((function(t,e,n){return 0===t.h&&(Kr(e,n,In(t.g)),!0)}),(function(t,e,n){null!=(e=te(e))&&(e=parseInt(e,10),ar(t,n,0),ir(t.g,e))}),wr);class Ai{constructor(t,e){this.h=t,this.g=e,this.l=hn,this.m=dn,this.defaultValue=void 0}register(){w(this)}}function bi(t,e){return new Ai(t,e)}function ki(t,e){return(n,r)=>{if(Kn.length){const t=Kn.pop();t.o(r),Un(t.g,n,r),n=t}else n=new class{constructor(t,e){if(Gn.length){const n=Gn.pop();Un(n,t,e),t=n}else t=new class{constructor(t,e){this.h=null,this.m=!1,this.g=this.l=this.j=0,Un(this,t,e)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.aa=!1}}(t,e);this.g=t,this.l=this.g.g,this.h=this.m=-1,this.o(e)}o({fa:t=!1}={}){this.fa=t}}(n,r);try{const r=new t,s=r.u;Nr(e)(s,n);var i=r}finally{n.g.clear(),n.m=-1,n.h=-1,Kn.length<100&&Kn.push(n)}return i}}function Si(t){return function(){const e=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const t=this.g;return this.g=[],t}}}};Xr(this.u,e,Pr(xr,Gr,jr,t)),or(e,e.g.end());const n=new Uint8Array(e.h),r=e.l,i=r.length;let s=0;for(let t=0;t<i;t++){const e=r[t];n.set(e,s),s+=e.length}return e.l=[n],n}}var xi=class extends $n{constructor(t){super(t)}},Li=[0,gi,Wr((function(t,e,n){return 2===t.h&&(Kr(e,n,(t=Wn(t))===U()?void 0:t),!0)}),(function(t,e,n){if(null!=e){if(e instanceof $n){const r=e.Oa;return void(r&&(e=r(e),null!=e&&ur(t,n,Ln(e).buffer)))}if(Array.isArray(e))return}ti(t,e,n)}),Er)];let Ri,Fi=globalThis.trustedTypes;function Ii(t){void 0===Ri&&(Ri=function(){let t=null;if(!Fi)return t;try{const e=t=>t;t=Fi.createPolicy(\"goog#html\",{createHTML:e,createScript:e,createScriptURL:e})}catch(t){}return t}());var e=Ri;return new class{constructor(t){this.g=t}toString(){return this.g+\"\"}}(e?e.createScriptURL(t):t)}function Mi(t,...e){if(0===e.length)return Ii(t[0]);let n=t[0];for(let r=0;r<e.length;r++)n+=encodeURIComponent(e[r])+t[r+1];return Ii(n)}var Pi=[0,hi,Ti,di,-1,ui,Ti,-1],Ci=class extends $n{constructor(t){super(t)}},Oi=[0,di,mi,di,Ti,-1,zr((function(t,e,n){return(0===t.h||2===t.h)&&(e=en(e,0|e[Q],n,!1),2==t.h?zn(t,On,e):e.push(In(t.g)),!0)}),(function(t,e,n){if(null!=(e=Hr(te,e))&&e.length){n=cr(t,n);for(let n=0;n<e.length;n++)ir(t.g,e[n]);hr(t,n)}}),wr),mi,-1,[0,di,-1],Ti,di,-1],Ui=[0,mi,-2],Di=class extends $n{constructor(t){super(t)}},Ni=[0],Bi=[0,hi,di,1,di,-3],Gi=class extends $n{constructor(t){super(t,2)}},ji={};ji[336783863]=[0,mi,di,-1,hi,[0,[1,2,3,4,5,6,7,8,9],_i,Ni,_i,Oi,_i,Ui,_i,Bi,_i,Pi,_i,[0,mi,-2],_i,[0,mi,Ti],_i,[0,Ti,mi,-1],_i,[0,Ti,-1]],[0,mi],di,[0,[1,3],[2,4],_i,[0,ui],-1,_i,[0,pi],-1,yi,[0,mi,-1]],mi];var Vi=[0,ai,-1,fi,-3,ai,ui,gi,li,ai,-1,fi,li,fi,-2,gi];function Xi(t,e){tn(t,2,de(e),\"\")}function Hi(t,e){mn(t,3,e)}function Wi(t,e){mn(t,4,e)}var zi=class extends $n{constructor(t){super(t,500)}o(t){return dn(this,0,7,t)}},Ki=[-1,{}],Yi=[0,mi,1,Ki],$i=[0,mi,pi,Ki];function qi(t,e){yn(t,1,zi,e)}function Ji(t,e){mn(t,10,e)}function Zi(t,e){mn(t,15,e)}var Qi=class extends $n{constructor(t){super(t,500)}o(t){return dn(this,0,1001,t)}},ts=[-500,yi,[-500,gi,-1,pi,-3,[-2,ji,di],yi,Li,li,-1,Yi,$i,yi,[0,gi,fi],gi,Vi,li,pi,987,pi],4,yi,[-500,mi,-1,[-1,{}],998,mi],yi,[-500,mi,pi,-1,[-2,{},di],997,pi,-1],li,yi,[-500,mi,pi,Ki,998,pi],pi,li,Yi,$i,yi,[0,gi,-1,Ki],pi,-2,Vi,gi,-1,fi,[0,fi,wi],978,Ki,yi,Li];Qi.prototype.g=Si(ts);var es=ki(Qi,ts),ns=class extends $n{constructor(t){super(t)}},rs=class extends $n{constructor(t){super(t)}g(){return ln(this,ns,1)}},is=[0,yi,[0,hi,ri,mi,-1]],ss=ki(rs,is),os=class extends $n{constructor(t){super(t)}},as=class extends $n{constructor(t){super(t)}},cs=class extends $n{constructor(t){super(t)}h(){return hn(this,os,2)}g(){return ln(this,as,5)}},hs=ki(class extends $n{constructor(t){super(t)}},[0,pi,ui,si,[0,Ti,[0,hi,-3],[0,ri,-3],[0,hi,-1,[0,yi,[0,hi,-2]]],yi,[0,ri,-1,mi,ri]],mi,-1,oi,yi,[0,hi,ri],pi,oi]),us=class extends $n{constructor(t){super(t)}},ls=ki(class extends $n{constructor(t){super(t)}},[0,yi,[0,ri,-4]]),ds=class extends $n{constructor(t){super(t)}},fs=ki(class extends $n{constructor(t){super(t)}},[0,yi,[0,ri,-4]]),ps=class extends $n{constructor(t){super(t)}},gs=[0,hi,-1,si,Ti],ms=class extends $n{constructor(t){super(t)}};ms.prototype.g=Si([0,ri,-4,oi]);var ys=class extends $n{constructor(t){super(t)}},_s=ki(class extends $n{constructor(t){super(t)}},[0,yi,[0,1,hi,mi,is],oi]),vs=class extends $n{constructor(t){super(t)}},Es=class extends $n{constructor(t){super(t)}ma(){const t=Ke(this);return null==t?U():t}},ws=class extends $n{constructor(t){super(t)}},Ts=[1,2],As=ki(class extends $n{constructor(t){super(t)}},[0,yi,[0,Ts,_i,[0,si],_i,[0,vi],hi,mi],oi]),bs=class extends $n{constructor(t){super(t)}},ks=[0,mi,hi,ri,pi,-1],Ss=class extends $n{constructor(t){super(t)}},xs=[0,di,-1],Ls=class extends $n{constructor(t){super(t)}},Rs=[1,2,3,4,5],Fs=class extends $n{constructor(t){super(t)}g(){return null!=Ke(this)}h(){return null!=vn(this,2)}},Is=class extends $n{constructor(t){super(t)}g(){return Jt(Ve(this,2))??!1}},Ms=[0,vi,mi,[0,hi,oi,-1],[0,ci,oi]],Ps=[0,Ms,di,[0,Rs,_i,Bi,_i,Oi,_i,Pi,_i,Ni,_i,Ui],Ti],Cs=class extends $n{constructor(t){super(t)}},Os=[0,Ps,ri,-1,hi],Us=bi(502141897,Cs);ji[502141897]=Os;var Ds=ki(class extends $n{constructor(t){super(t)}},[0,[0,Ti,-1,ii,Ei],gs]),Ns=class extends $n{constructor(t){super(t)}},Bs=class extends $n{constructor(t){super(t)}},Gs=[0,Ps,ri,[0,Ps],di],js=[0,Ps,Os,Gs,ri,[0,[0,Ms]]],Vs=bi(508968150,Bs);ji[508968150]=js,ji[508968149]=Gs;var Xs=class extends $n{constructor(t){super(t)}},Hs=bi(513916220,Xs);ji[513916220]=[0,Ps,js,hi];var Ws=class extends $n{constructor(t){super(t)}h(){return hn(this,bs,2)}g(){He(this,2)}},zs=[0,Ps,ks];ji[478825465]=zs;var Ks=class extends $n{constructor(t){super(t)}},Ys=class extends $n{constructor(t){super(t)}},$s=class extends $n{constructor(t){super(t)}},qs=class extends $n{constructor(t){super(t)}},Js=class extends $n{constructor(t){super(t)}},Zs=[0,Ps,[0,Ps],zs,-1],Qs=[0,Ps,ri,hi],to=[0,Ps,ri],eo=[0,Ps,Qs,to,ri],no=bi(479097054,Js);ji[479097054]=[0,Ps,eo,Zs],ji[463370452]=Zs,ji[464864288]=Qs;var ro=bi(462713202,qs);ji[462713202]=eo,ji[474472470]=to;var io=class extends $n{constructor(t){super(t)}},so=class extends $n{constructor(t){super(t)}},oo=class extends $n{constructor(t){super(t)}},ao=class extends $n{constructor(t){super(t)}},co=[0,Ps,ri,-1,hi],ho=[0,Ps,ri,di];ao.prototype.g=Si([0,Ps,to,[0,Ps],Os,Gs,co,ho]);var uo=class extends $n{constructor(t){super(t)}},lo=bi(456383383,uo);ji[456383383]=[0,Ps,ks];var fo=class extends $n{constructor(t){super(t)}},po=bi(476348187,fo);ji[476348187]=[0,Ps,xs];var go=class extends $n{constructor(t){super(t)}},mo=class extends $n{constructor(t){super(t)}},yo=[0,Ti,-1],_o=bi(458105876,class extends $n{constructor(t){super(t)}g(){var t=this.u;const e=0|t[Q],n=2&e;return t=function(t,e,n){var r=mo;const i=2&e;let s=!1;if(null==n){if(i)return Ie();n=[]}else if(n.constructor===Ae){if(0==(2&n.M)||i)return n;n=n.da()}else Array.isArray(n)?s=!!(2&(0|n[Q])):n=[];if(i){if(!n.length)return Ie();s||(s=!0,it(n))}else s&&(s=!1,n=Qe(n));return s||(64&(0|n[Q])?n[Q]&=-33:32&e&&nt(n,32)),We(t,e,2,r=new Ae(n,r,ge,void 0)),r}(t,e,Xe(t,e,2)),!n&&mo&&(t.pa=!0),t}});ji[458105876]=[0,yo,Yr,[!0,oi,[0,mi,-1,pi]]];var vo=class extends $n{constructor(t){super(t)}},Eo=bi(458105758,vo);ji[458105758]=[0,Ps,mi,yo];var wo=class extends $n{constructor(t){super(t)}},To=bi(443442058,wo);ji[443442058]=[0,Ps,mi,hi,ri,pi,-1,di,ri],ji[514774813]=co;var Ao=class extends $n{constructor(t){super(t)}},bo=bi(516587230,Ao);function ko(t,e){return e=e?e.clone():new bs,void 0!==t.displayNamesLocale?He(e,1,de(t.displayNamesLocale)):void 0===t.displayNamesLocale&&He(e,1),void 0!==t.maxResults?Tn(e,2,t.maxResults):\"maxResults\"in t&&He(e,2),void 0!==t.scoreThreshold?An(e,3,t.scoreThreshold):\"scoreThreshold\"in t&&He(e,3),void 0!==t.categoryAllowlist?bn(e,4,t.categoryAllowlist):\"categoryAllowlist\"in t&&He(e,4),void 0!==t.categoryDenylist?bn(e,5,t.categoryDenylist):\"categoryDenylist\"in t&&He(e,5),e}function So(t,e=-1,n=\"\"){return{categories:t.map((t=>({index:_n(t,1)??0??-1,score:En(t,2)??0,categoryName:vn(t,3)??\"\"??\"\",displayName:vn(t,4)??\"\"??\"\"}))),headIndex:e,headName:n}}function xo(t){var e=$e(t,3,qt,Ye()),n=$e(t,2,te,Ye()),r=$e(t,1,fe,Ye()),i=$e(t,9,fe,Ye());const s={categories:[],keypoints:[]};for(let t=0;t<e.length;t++)s.categories.push({score:e[t],index:n[t]??-1,categoryName:r[t]??\"\",displayName:i[t]??\"\"});if((e=hn(t,cs,4)?.h())&&(s.boundingBox={originX:_n(e,1)??0,originY:_n(e,2)??0,width:_n(e,3)??0,height:_n(e,4)??0,angle:0}),hn(t,cs,4)?.g().length)for(const e of hn(t,cs,4).g())s.keypoints.push({x:ze(e,1)??0,y:ze(e,2)??0,score:ze(e,4)??0,label:vn(e,3)??\"\"});return s}function Lo(t){const e=[];for(const n of ln(t,ds,1))e.push({x:En(n,1)??0,y:En(n,2)??0,z:En(n,3)??0,visibility:En(n,4)??0});return e}function Ro(t){const e=[];for(const n of ln(t,us,1))e.push({x:En(n,1)??0,y:En(n,2)??0,z:En(n,3)??0,visibility:En(n,4)??0});return e}function Fo(t){return Array.from(t,(t=>t>127?t-256:t))}function Io(t,e){if(t.length!==e.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${t.length} vs. ${e.length}).`);let n=0,r=0,i=0;for(let s=0;s<t.length;s++)n+=t[s]*e[s],r+=t[s]*t[s],i+=e[s]*e[s];if(r<=0||i<=0)throw Error(\"Cannot compute cosine similarity on embedding with 0 norm.\");return n/Math.sqrt(r*i)}let Mo;ji[516587230]=[0,Ps,co,ho,ri],ji[518928384]=ho;const Po=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function Co(){if(void 0===Mo)try{await WebAssembly.instantiate(Po),Mo=!0}catch{Mo=!1}return Mo}async function Oo(t,e=Mi``){const n=await Co()?\"wasm_internal\":\"wasm_nosimd_internal\";return{wasmLoaderPath:`${e}/${t}_${n}.js`,wasmBinaryPath:`${e}/${t}_${n}.wasm`}}var Uo=class{};function Do(){var t=navigator;return\"undefined\"!=typeof OffscreenCanvas&&(!function(t=navigator){return(t=t.userAgent).includes(\"Safari\")&&!t.includes(\"Chrome\")}(t)||!!((t=t.userAgent.match(/Version\\/([\\d]+).*Safari/))&&t.length>=1&&Number(t[1])>=17))}async function No(t){if(\"function\"!=typeof importScripts){const e=document.createElement(\"script\");return e.src=t.toString(),e.crossOrigin=\"anonymous\",new Promise(((t,n)=>{e.addEventListener(\"load\",(()=>{t()}),!1),e.addEventListener(\"error\",(t=>{n(t)}),!1),document.body.appendChild(e)}))}importScripts(t.toString())}function Bo(t){return void 0!==t.videoWidth?[t.videoWidth,t.videoHeight]:void 0!==t.naturalWidth?[t.naturalWidth,t.naturalHeight]:void 0!==t.displayWidth?[t.displayWidth,t.displayHeight]:[t.width,t.height]}function Go(t,e,n){t.m||console.error(\"No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target\"),n(e=t.i.stringToNewUTF8(e)),t.i._free(e)}function jo(t,e,n){if(!t.i.canvas)throw Error(\"No OpenGL canvas configured.\");if(n?t.i._bindTextureToStream(n):t.i._bindTextureToCanvas(),!(n=t.i.canvas.getContext(\"webgl2\")||t.i.canvas.getContext(\"webgl\")))throw Error(\"Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.\");t.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e),t.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const[r,i]=Bo(e);return!t.l||r===t.i.canvas.width&&i===t.i.canvas.height||(t.i.canvas.width=r,t.i.canvas.height=i),[r,i]}function Vo(t,e,n){t.m||console.error(\"No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target\");const r=new Uint32Array(e.length);for(let n=0;n<e.length;n++)r[n]=t.i.stringToNewUTF8(e[n]);e=t.i._malloc(4*r.length),t.i.HEAPU32.set(r,e>>2),n(e);for(const e of r)t.i._free(e);t.i._free(e)}function Xo(t,e,n){t.i.simpleListeners=t.i.simpleListeners||{},t.i.simpleListeners[e]=n}function Ho(t,e,n){let r=[];t.i.simpleListeners=t.i.simpleListeners||{},t.i.simpleListeners[e]=(t,e,i)=>{e?(n(r,i),r=[]):r.push(t)}}Uo.forVisionTasks=function(t){return Oo(\"vision\",t)},Uo.forTextTasks=function(t){return Oo(\"text\",t)},Uo.forGenAiExperimentalTasks=function(t){return Oo(\"genai_experimental\",t)},Uo.forGenAiTasks=function(t){return Oo(\"genai\",t)},Uo.forAudioTasks=function(t){return Oo(\"audio\",t)},Uo.isSimdSupported=function(){return Co()};async function Wo(t,e,n,r){return t=await(async(t,e,n,r,i)=>{if(e&&await No(e),!self.ModuleFactory)throw Error(\"ModuleFactory not set.\");if(n&&(await No(n),!self.ModuleFactory))throw Error(\"ModuleFactory not set.\");return self.Module&&i&&((e=self.Module).locateFile=i.locateFile,i.mainScriptUrlOrBlob&&(e.mainScriptUrlOrBlob=i.mainScriptUrlOrBlob)),i=await self.ModuleFactory(self.Module||i),self.ModuleFactory=self.Module=void 0,new t(i,r)})(t,n.wasmLoaderPath,n.assetLoaderPath,e,{locateFile:t=>t.endsWith(\".wasm\")?n.wasmBinaryPath.toString():n.assetBinaryPath&&t.endsWith(\".data\")?n.assetBinaryPath.toString():t}),await t.o(r),t}function zo(t,e){const n=hn(t.baseOptions,Fs,1)||new Fs;\"string\"==typeof e?(He(n,2,de(e)),He(n,1)):e instanceof Uint8Array&&(He(n,1,dt(e,!1)),He(n,2)),dn(t.baseOptions,0,1,n)}function Ko(t){try{const e=t.G.length;if(1===e)throw Error(t.G[0].message);if(e>1)throw Error(\"Encountered multiple errors: \"+t.G.map((t=>t.message)).join(\", \"))}finally{t.G=[]}}function Yo(t,e){t.B=Math.max(t.B,e)}function $o(t,e){t.A=new zi,Xi(t.A,\"PassThroughCalculator\"),Hi(t.A,\"free_memory\"),Wi(t.A,\"free_memory_unused_out\"),Ji(e,\"free_memory\"),qi(e,t.A)}function qo(t,e){Hi(t.A,e),Wi(t.A,e+\"_unused_out\")}function Jo(t){t.g.addBoolToStream(!0,\"free_memory\",t.B)}var Zo=class{constructor(t){this.g=t,this.G=[],this.B=0,this.g.setAutoRenderToScreen(!1)}l(t,e=!0){if(e){const e=t.baseOptions||{};if(t.baseOptions?.modelAssetBuffer&&t.baseOptions?.modelAssetPath)throw Error(\"Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer\");if(!(hn(this.baseOptions,Fs,1)?.g()||hn(this.baseOptions,Fs,1)?.h()||t.baseOptions?.modelAssetBuffer||t.baseOptions?.modelAssetPath))throw Error(\"Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set\");if(function(t,e){let n=hn(t.baseOptions,Ls,3);if(!n){var r=n=new Ls,i=new Di;fn(r,4,Rs,i)}\"delegate\"in e&&(\"GPU\"===e.delegate?(e=n,r=new Ci,fn(e,2,Rs,r)):(e=n,r=new Di,fn(e,4,Rs,r))),dn(t.baseOptions,0,3,n)}(this,e),e.modelAssetPath)return fetch(e.modelAssetPath.toString()).then((t=>{if(t.ok)return t.arrayBuffer();throw Error(`Failed to fetch model: ${e.modelAssetPath} (${t.status})`)})).then((t=>{try{this.g.i.FS_unlink(\"/model.dat\")}catch{}this.g.i.FS_createDataFile(\"/\",\"model.dat\",new Uint8Array(t),!0,!1,!1),zo(this,\"/model.dat\"),this.m(),this.J()}));if(e.modelAssetBuffer instanceof Uint8Array)zo(this,e.modelAssetBuffer);else if(e.modelAssetBuffer)return async function(t){const e=[];for(var n=0;;){const{done:r,value:i}=await t.read();if(r)break;e.push(i),n+=i.length}if(0===e.length)return new Uint8Array(0);if(1===e.length)return e[0];t=new Uint8Array(n),n=0;for(const r of e)t.set(r,n),n+=r.length;return t}(e.modelAssetBuffer).then((t=>{zo(this,t),this.m(),this.J()}))}return this.m(),this.J(),Promise.resolve()}J(){}ca(){let t;if(this.g.ca((e=>{t=es(e)})),!t)throw Error(\"Failed to retrieve CalculatorGraphConfig\");return t}setGraph(t,e){this.g.attachErrorListener(((t,e)=>{this.G.push(Error(e))})),this.g.Ha(),this.g.setGraph(t,e),this.A=void 0,Ko(this)}finishProcessing(){this.g.finishProcessing(),Ko(this)}close(){this.A=void 0,this.g.closeGraph()}};function Qo(t,e){if(!t)throw Error(`Unable to obtain required WebGL resource: ${e}`);return t}Zo.prototype.close=Zo.prototype.close;class ta{constructor(t,e,n,r){this.g=t,this.h=e,this.m=n,this.l=r}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function ea(t,e,n){const r=t.g;if(n=Qo(r.createShader(n),\"Failed to create WebGL shader\"),r.shaderSource(n,e),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${r.getShaderInfoLog(n)}`);return r.attachShader(t.h,n),n}function na(t,e){const n=t.g,r=Qo(n.createVertexArray(),\"Failed to create vertex array\");n.bindVertexArray(r);const i=Qo(n.createBuffer(),\"Failed to create buffer\");n.bindBuffer(n.ARRAY_BUFFER,i),n.enableVertexAttribArray(t.P),n.vertexAttribPointer(t.P,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW);const s=Qo(n.createBuffer(),\"Failed to create buffer\");return n.bindBuffer(n.ARRAY_BUFFER,s),n.enableVertexAttribArray(t.J),n.vertexAttribPointer(t.J,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array(e?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindVertexArray(null),new ta(n,r,i,s)}function ra(t,e){if(t.g){if(e!==t.g)throw Error(\"Cannot change GL context once initialized\")}else t.g=e}function ia(t,e,n,r){return ra(t,e),t.h||(t.m(),t.C()),n?(t.s||(t.s=na(t,!0)),n=t.s):(t.v||(t.v=na(t,!1)),n=t.v),e.useProgram(t.h),n.bind(),t.l(),t=r(),n.g.bindVertexArray(null),t}function sa(t,e,n){return ra(t,e),t=Qo(e.createTexture(),\"Failed to create texture\"),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n??e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n??e.LINEAR),e.bindTexture(e.TEXTURE_2D,null),t}function oa(t,e,n){ra(t,e),t.A||(t.A=Qo(e.createFramebuffer(),\"Failed to create framebuffe.\")),e.bindFramebuffer(e.FRAMEBUFFER,t.A),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}function aa(t){t.g?.bindFramebuffer(t.g.FRAMEBUFFER,null)}var ca=class{G(){return\"\\n  precision mediump float;\\n  varying vec2 vTex;\\n  uniform sampler2D inputTexture;\\n  void main() {\\n    gl_FragColor = texture2D(inputTexture, vTex);\\n  }\\n \"}m(){const t=this.g;if(this.h=Qo(t.createProgram(),\"Failed to create WebGL program\"),this.Z=ea(this,\"\\n  attribute vec2 aVertex;\\n  attribute vec2 aTex;\\n  varying vec2 vTex;\\n  void main(void) {\\n    gl_Position = vec4(aVertex, 0.0, 1.0);\\n    vTex = aTex;\\n  }\",t.VERTEX_SHADER),this.Y=ea(this,this.G(),t.FRAGMENT_SHADER),t.linkProgram(this.h),!t.getProgramParameter(this.h,t.LINK_STATUS))throw Error(`Error during program linking: ${t.getProgramInfoLog(this.h)}`);this.P=t.getAttribLocation(this.h,\"aVertex\"),this.J=t.getAttribLocation(this.h,\"aTex\")}C(){}l(){}close(){if(this.h){const t=this.g;t.deleteProgram(this.h),t.deleteShader(this.Z),t.deleteShader(this.Y)}this.A&&this.g.deleteFramebuffer(this.A),this.v&&this.v.close(),this.s&&this.s.close()}};var ha=class extends ca{G(){return\"\\n  precision mediump float;\\n  uniform sampler2D backgroundTexture;\\n  uniform sampler2D maskTexture;\\n  uniform sampler2D colorMappingTexture;\\n  varying vec2 vTex;\\n  void main() {\\n    vec4 backgroundColor = texture2D(backgroundTexture, vTex);\\n    float category = texture2D(maskTexture, vTex).r;\\n    vec4 categoryColor = texture2D(colorMappingTexture, vec2(category, 0.0));\\n    gl_FragColor = mix(backgroundColor, categoryColor, categoryColor.a);\\n  }\\n \"}C(){const t=this.g;t.activeTexture(t.TEXTURE1),this.B=sa(this,t,t.LINEAR),t.activeTexture(t.TEXTURE2),this.j=sa(this,t,t.NEAREST)}m(){super.m();const t=this.g;this.L=Qo(t.getUniformLocation(this.h,\"backgroundTexture\"),\"Uniform location\"),this.U=Qo(t.getUniformLocation(this.h,\"colorMappingTexture\"),\"Uniform location\"),this.K=Qo(t.getUniformLocation(this.h,\"maskTexture\"),\"Uniform location\")}l(){super.l();const t=this.g;t.uniform1i(this.K,0),t.uniform1i(this.L,1),t.uniform1i(this.U,2)}close(){this.B&&this.g.deleteTexture(this.B),this.j&&this.g.deleteTexture(this.j),super.close()}},ua=class extends ca{G(){return\"\\n  precision mediump float;\\n  uniform sampler2D maskTexture;\\n  uniform sampler2D defaultTexture;\\n  uniform sampler2D overlayTexture;\\n  varying vec2 vTex;\\n  void main() {\\n    float confidence = texture2D(maskTexture, vTex).r;\\n    vec4 defaultColor = texture2D(defaultTexture, vTex);\\n    vec4 overlayColor = texture2D(overlayTexture, vTex);\\n    // Apply the alpha from the overlay and merge in the default color\\n    overlayColor = mix(defaultColor, overlayColor, overlayColor.a);\\n    gl_FragColor = mix(defaultColor, overlayColor, confidence);\\n  }\\n \"}C(){const t=this.g;t.activeTexture(t.TEXTURE1),this.j=sa(this,t),t.activeTexture(t.TEXTURE2),this.B=sa(this,t)}m(){super.m();const t=this.g;this.K=Qo(t.getUniformLocation(this.h,\"defaultTexture\"),\"Uniform location\"),this.L=Qo(t.getUniformLocation(this.h,\"overlayTexture\"),\"Uniform location\"),this.H=Qo(t.getUniformLocation(this.h,\"maskTexture\"),\"Uniform location\")}l(){super.l();const t=this.g;t.uniform1i(this.H,0),t.uniform1i(this.K,1),t.uniform1i(this.L,2)}close(){this.j&&this.g.deleteTexture(this.j),this.B&&this.g.deleteTexture(this.B),super.close()}};function la(t,e){switch(e){case 0:return t.g.find((t=>t instanceof Uint8Array));case 1:return t.g.find((t=>t instanceof Float32Array));case 2:return t.g.find((t=>\"undefined\"!=typeof WebGLTexture&&t instanceof WebGLTexture));default:throw Error(`Type is not supported: ${e}`)}}function da(t){var e=la(t,1);if(!e){if(e=la(t,0))e=new Float32Array(e).map((t=>t/255));else{e=new Float32Array(t.width*t.height);const r=pa(t);var n=ma(t);if(oa(n,r,fa(t)),\"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod\".split(\";\").includes(navigator.platform)||navigator.userAgent.includes(\"Mac\")&&\"document\"in self&&\"ontouchend\"in self.document){n=new Float32Array(t.width*t.height*4),r.readPixels(0,0,t.width,t.height,r.RGBA,r.FLOAT,n);for(let t=0,r=0;t<e.length;++t,r+=4)e[t]=n[r]}else r.readPixels(0,0,t.width,t.height,r.RED,r.FLOAT,e)}t.g.push(e)}return e}function fa(t){let e=la(t,2);if(!e){const n=pa(t);e=ya(t);const r=da(t),i=ga(t);n.texImage2D(n.TEXTURE_2D,0,i,t.width,t.height,0,n.RED,n.FLOAT,r),_a(t)}return e}function pa(t){if(!t.canvas)throw Error(\"Conversion to different image formats require that a canvas is passed when initializing the image.\");return t.h||(t.h=Qo(t.canvas.getContext(\"webgl2\"),\"You cannot use a canvas that is already bound to a different type of rendering context.\")),t.h}function ga(t){if(t=pa(t),!va)if(t.getExtension(\"EXT_color_buffer_float\")&&t.getExtension(\"OES_texture_float_linear\")&&t.getExtension(\"EXT_float_blend\"))va=t.R32F;else{if(!t.getExtension(\"EXT_color_buffer_half_float\"))throw Error(\"GPU does not fully support 4-channel float32 or float16 formats\");va=t.R16F}return va}function ma(t){return t.l||(t.l=new ca),t.l}function ya(t){const e=pa(t);e.viewport(0,0,t.width,t.height),e.activeTexture(e.TEXTURE0);let n=la(t,2);return n||(n=sa(ma(t),e,t.m?e.LINEAR:e.NEAREST),t.g.push(n),t.j=!0),e.bindTexture(e.TEXTURE_2D,n),n}function _a(t){t.h.bindTexture(t.h.TEXTURE_2D,null)}var va,Ea=class{constructor(t,e,n,r,i,s,o){this.g=t,this.m=e,this.j=n,this.canvas=r,this.l=i,this.width=s,this.height=o,this.j&&(0===--wa&&console.error(\"You seem to be creating MPMask instances without invoking .close(). This leaks resources.\"))}Da(){return!!la(this,0)}ja(){return!!la(this,1)}R(){return!!la(this,2)}ia(){return(e=la(t=this,0))||(e=da(t),e=new Uint8Array(e.map((t=>255*t))),t.g.push(e)),e;var t,e}ha(){return da(this)}N(){return fa(this)}clone(){const t=[];for(const e of this.g){let n;if(e instanceof Uint8Array)n=new Uint8Array(e);else if(e instanceof Float32Array)n=new Float32Array(e);else{if(!(e instanceof WebGLTexture))throw Error(`Type is not supported: ${e}`);{const t=pa(this),e=ma(this);t.activeTexture(t.TEXTURE1),n=sa(e,t,this.m?t.LINEAR:t.NEAREST),t.bindTexture(t.TEXTURE_2D,n);const r=ga(this);t.texImage2D(t.TEXTURE_2D,0,r,this.width,this.height,0,t.RED,t.FLOAT,null),t.bindTexture(t.TEXTURE_2D,null),oa(e,t,n),ia(e,t,!1,(()=>{ya(this),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLE_FAN,0,4),_a(this)})),aa(e),_a(this)}}t.push(n)}return new Ea(t,this.m,this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&pa(this).deleteTexture(la(this,2)),wa=-1}};Ea.prototype.close=Ea.prototype.close,Ea.prototype.clone=Ea.prototype.clone,Ea.prototype.getAsWebGLTexture=Ea.prototype.N,Ea.prototype.getAsFloat32Array=Ea.prototype.ha,Ea.prototype.getAsUint8Array=Ea.prototype.ia,Ea.prototype.hasWebGLTexture=Ea.prototype.R,Ea.prototype.hasFloat32Array=Ea.prototype.ja,Ea.prototype.hasUint8Array=Ea.prototype.Da;var wa=250;const Ta={color:\"white\",lineWidth:4,radius:6};function Aa(t){return{...Ta,fillColor:(t=t||{}).color,...t}}function ba(t,e){return t instanceof Function?t(e):t}function ka(t,e,n){return Math.max(Math.min(e,n),Math.min(Math.max(e,n),t))}function Sa(t){if(!t.l)throw Error(\"CPU rendering requested but CanvasRenderingContext2D not provided.\");return t.l}function xa(t){if(!t.j)throw Error(\"GPU rendering requested but WebGL2RenderingContext not provided.\");return t.j}function La(t,e,n){if(e.R())n(e.N());else{const r=e.ja()?e.ha():e.ia();t.m=t.m??new ca;const i=xa(t);n((t=new Ea([r],e.m,!1,i.canvas,t.m,e.width,e.height)).N()),t.close()}}function Ra(t,e,n,r){const i=function(t){return t.g||(t.g=new ha),t.g}(t),s=xa(t),o=Array.isArray(n)?new ImageData(new Uint8ClampedArray(n),1,1):n;ia(i,s,!0,(()=>{!function(t,e,n,r){const i=t.g;if(i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t.B),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n),t.H&&function(t,e){if(t!==e)return!1;t=t.entries(),e=e.entries();for(const[r,i]of t){t=r;const s=i;var n=e.next();if(n.done)return!1;const[o,a]=n.value;if(n=a,t!==o||s[0]!==n[0]||s[1]!==n[1]||s[2]!==n[2]||s[3]!==n[3])return!1}return!!e.next().done}(t.H,r))i.activeTexture(i.TEXTURE2),i.bindTexture(i.TEXTURE_2D,t.j);else{t.H=r;const e=Array(1024).fill(0);r.forEach(((t,n)=>{if(4!==t.length)throw Error(`Color at index ${n} is not a four-channel value.`);e[4*n]=t[0],e[4*n+1]=t[1],e[4*n+2]=t[2],e[4*n+3]=t[3]})),i.activeTexture(i.TEXTURE2),i.bindTexture(i.TEXTURE_2D,t.j),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,256,1,0,i.RGBA,i.UNSIGNED_BYTE,new Uint8Array(e))}}(i,e,o,r),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT),s.drawArrays(s.TRIANGLE_FAN,0,4);const t=i.g;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,null)}))}function Fa(t,e,n,r){const i=xa(t),s=function(t){return t.h||(t.h=new ua),t.h}(t),o=Array.isArray(n)?new ImageData(new Uint8ClampedArray(n),1,1):n,a=Array.isArray(r)?new ImageData(new Uint8ClampedArray(r),1,1):r;ia(s,i,!0,(()=>{var t=s.g;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,s.j),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,o),t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,s.B),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,a),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_FAN,0,4),i.bindTexture(i.TEXTURE_2D,null),(t=s.g).activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,null)}))}var Ia=class{constructor(t,e){\"undefined\"!=typeof CanvasRenderingContext2D&&t instanceof CanvasRenderingContext2D||t instanceof OffscreenCanvasRenderingContext2D?(this.l=t,this.j=e):this.j=t}wa(t,e){if(t){var n=Sa(this);e=Aa(e),n.save();var r=n.canvas,i=0;for(const s of t)n.fillStyle=ba(e.fillColor,{index:i,from:s}),n.strokeStyle=ba(e.color,{index:i,from:s}),n.lineWidth=ba(e.lineWidth,{index:i,from:s}),(t=new Path2D).arc(s.x*r.width,s.y*r.height,ba(e.radius,{index:i,from:s}),0,2*Math.PI),n.fill(t),n.stroke(t),++i;n.restore()}}va(t,e,n){if(t&&e){var r=Sa(this);n=Aa(n),r.save();var i=r.canvas,s=0;for(const o of e){r.beginPath(),e=t[o.start];const a=t[o.end];e&&a&&(r.strokeStyle=ba(n.color,{index:s,from:e,to:a}),r.lineWidth=ba(n.lineWidth,{index:s,from:e,to:a}),r.moveTo(e.x*i.width,e.y*i.height),r.lineTo(a.x*i.width,a.y*i.height)),++s,r.stroke()}r.restore()}}sa(t,e){const n=Sa(this);e=Aa(e),n.save(),n.beginPath(),n.lineWidth=ba(e.lineWidth,{}),n.strokeStyle=ba(e.color,{}),n.fillStyle=ba(e.fillColor,{}),n.moveTo(t.originX,t.originY),n.lineTo(t.originX+t.width,t.originY),n.lineTo(t.originX+t.width,t.originY+t.height),n.lineTo(t.originX,t.originY+t.height),n.lineTo(t.originX,t.originY),n.stroke(),n.fill(),n.restore()}ta(t,e,n=[0,0,0,255]){this.l?function(t,e,n,r){const i=xa(t);La(t,e,(e=>{Ra(t,e,n,r),(e=Sa(t)).drawImage(i.canvas,0,0,e.canvas.width,e.canvas.height)}))}(this,t,n,e):Ra(this,t.N(),n,e)}ua(t,e,n){this.l?function(t,e,n,r){const i=xa(t);La(t,e,(e=>{Fa(t,e,n,r),(e=Sa(t)).drawImage(i.canvas,0,0,e.canvas.width,e.canvas.height)}))}(this,t,e,n):Fa(this,t.N(),e,n)}close(){this.g?.close(),this.g=void 0,this.h?.close(),this.h=void 0,this.m?.close(),this.m=void 0}};function Ma(t,e){switch(e){case 0:return t.g.find((t=>t instanceof ImageData));case 1:return t.g.find((t=>\"undefined\"!=typeof ImageBitmap&&t instanceof ImageBitmap));case 2:return t.g.find((t=>\"undefined\"!=typeof WebGLTexture&&t instanceof WebGLTexture));default:throw Error(`Type is not supported: ${e}`)}}function Pa(t){var e=Ma(t,0);if(!e){e=Oa(t);const n=Ua(t),r=new Uint8Array(t.width*t.height*4);oa(n,e,Ca(t)),e.readPixels(0,0,t.width,t.height,e.RGBA,e.UNSIGNED_BYTE,r),aa(n),e=new ImageData(new Uint8ClampedArray(r.buffer),t.width,t.height),t.g.push(e)}return e}function Ca(t){let e=Ma(t,2);if(!e){const n=Oa(t);e=Da(t);const r=Ma(t,1)||Pa(t);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),Na(t)}return e}function Oa(t){if(!t.canvas)throw Error(\"Conversion to different image formats require that a canvas is passed when initializing the image.\");return t.h||(t.h=Qo(t.canvas.getContext(\"webgl2\"),\"You cannot use a canvas that is already bound to a different type of rendering context.\")),t.h}function Ua(t){return t.l||(t.l=new ca),t.l}function Da(t){const e=Oa(t);e.viewport(0,0,t.width,t.height),e.activeTexture(e.TEXTURE0);let n=Ma(t,2);return n||(n=sa(Ua(t),e),t.g.push(n),t.m=!0),e.bindTexture(e.TEXTURE_2D,n),n}function Na(t){t.h.bindTexture(t.h.TEXTURE_2D,null)}function Ba(t){const e=Oa(t);return ia(Ua(t),e,!0,(()=>function(t,e){const n=t.canvas;if(n.width===t.width&&n.height===t.height)return e();const r=n.width,i=n.height;return n.width=t.width,n.height=t.height,t=e(),n.width=r,n.height=i,t}(t,(()=>{if(e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_FAN,0,4),!(t.canvas instanceof OffscreenCanvas))throw Error(\"Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas\");return t.canvas.transferToImageBitmap()}))))}Ia.prototype.close=Ia.prototype.close,Ia.prototype.drawConfidenceMask=Ia.prototype.ua,Ia.prototype.drawCategoryMask=Ia.prototype.ta,Ia.prototype.drawBoundingBox=Ia.prototype.sa,Ia.prototype.drawConnectors=Ia.prototype.va,Ia.prototype.drawLandmarks=Ia.prototype.wa,Ia.lerp=function(t,e,n,r,i){return ka(r*(1-(t-e)/(n-e))+i*(1-(n-t)/(n-e)),r,i)},Ia.clamp=ka;var Ga=class{constructor(t,e,n,r,i,s,o){this.g=t,this.j=e,this.m=n,this.canvas=r,this.l=i,this.width=s,this.height=o,(this.j||this.m)&&(0===--ja&&console.error(\"You seem to be creating MPImage instances without invoking .close(). This leaks resources.\"))}Ca(){return!!Ma(this,0)}ka(){return!!Ma(this,1)}R(){return!!Ma(this,2)}Aa(){return Pa(this)}za(){var t=Ma(this,1);return t||(Ca(this),Da(this),t=Ba(this),Na(this),this.g.push(t),this.j=!0),t}N(){return Ca(this)}clone(){const t=[];for(const e of this.g){let n;if(e instanceof ImageData)n=new ImageData(e.data,this.width,this.height);else if(e instanceof WebGLTexture){const t=Oa(this),e=Ua(this);t.activeTexture(t.TEXTURE1),n=sa(e,t),t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.bindTexture(t.TEXTURE_2D,null),oa(e,t,n),ia(e,t,!1,(()=>{Da(this),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLE_FAN,0,4),Na(this)})),aa(e),Na(this)}else{if(!(e instanceof ImageBitmap))throw Error(`Type is not supported: ${e}`);Ca(this),Da(this),n=Ba(this),Na(this)}t.push(n)}return new Ga(t,this.ka(),this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&Ma(this,1).close(),this.m&&Oa(this).deleteTexture(Ma(this,2)),ja=-1}};Ga.prototype.close=Ga.prototype.close,Ga.prototype.clone=Ga.prototype.clone,Ga.prototype.getAsWebGLTexture=Ga.prototype.N,Ga.prototype.getAsImageBitmap=Ga.prototype.za,Ga.prototype.getAsImageData=Ga.prototype.Aa,Ga.prototype.hasWebGLTexture=Ga.prototype.R,Ga.prototype.hasImageBitmap=Ga.prototype.ka,Ga.prototype.hasImageData=Ga.prototype.Ca;var ja=250;function Va(...t){return t.map((([t,e])=>({start:t,end:e})))}const Xa=function(t){return class extends t{Ha(){this.i._registerModelResourcesGraphService()}}}((Ha=class{constructor(t,e){this.l=!0,this.i=t,this.g=null,this.h=0,this.m=\"function\"==typeof this.i._addIntToInputStream,void 0!==e?this.i.canvas=e:Do()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn(\"OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas.\"),this.i.canvas=document.createElement(\"canvas\"))}async initializeGraph(t){const e=await(await fetch(t)).arrayBuffer();t=!(t.endsWith(\".pbtxt\")||t.endsWith(\".textproto\")),this.setGraph(new Uint8Array(e),t)}setGraphFromString(t){this.setGraph((new TextEncoder).encode(t),!1)}setGraph(t,e){const n=t.length,r=this.i._malloc(n);this.i.HEAPU8.set(t,r),e?this.i._changeBinaryGraph(n,r):this.i._changeTextGraph(n,r),this.i._free(r)}configureAudio(t,e,n,r,i){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep \":gl_graph_runner_audio\" missing?'),Go(this,r||\"input_audio\",(r=>{Go(this,i=i||\"audio_header\",(i=>{this.i._configureAudio(r,i,t,e??0,n)}))}))}setAutoResizeCanvas(t){this.l=t}setAutoRenderToScreen(t){this.i._setAutoRenderToScreen(t)}setGpuBufferVerticalFlip(t){this.i.gpuOriginForWebTexturesIsBottomLeft=t}ca(t){Xo(this,\"__graph_config__\",(e=>{t(e)})),Go(this,\"__graph_config__\",(t=>{this.i._getGraphConfig(t,void 0)})),delete this.i.simpleListeners.__graph_config__}attachErrorListener(t){this.i.errorListener=t}attachEmptyPacketListener(t,e){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[t]=e}addAudioToStream(t,e,n){this.addAudioToStreamWithShape(t,0,0,e,n)}addAudioToStreamWithShape(t,e,n,r,i){const s=4*t.length;this.h!==s&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(s),this.h=s),this.i.HEAPF32.set(t,this.g/4),Go(this,r,(t=>{this.i._addAudioToInputStream(this.g,e,n,t,i)}))}addGpuBufferToStream(t,e,n){Go(this,e,(e=>{const[r,i]=jo(this,t,e);this.i._addBoundTextureToStream(e,r,i,n)}))}addBoolToStream(t,e,n){Go(this,e,(e=>{this.i._addBoolToInputStream(t,e,n)}))}addDoubleToStream(t,e,n){Go(this,e,(e=>{this.i._addDoubleToInputStream(t,e,n)}))}addFloatToStream(t,e,n){Go(this,e,(e=>{this.i._addFloatToInputStream(t,e,n)}))}addIntToStream(t,e,n){Go(this,e,(e=>{this.i._addIntToInputStream(t,e,n)}))}addUintToStream(t,e,n){Go(this,e,(e=>{this.i._addUintToInputStream(t,e,n)}))}addStringToStream(t,e,n){Go(this,e,(e=>{Go(this,t,(t=>{this.i._addStringToInputStream(t,e,n)}))}))}addStringRecordToStream(t,e,n){Go(this,e,(e=>{Vo(this,Object.keys(t),(r=>{Vo(this,Object.values(t),(i=>{this.i._addFlatHashMapToInputStream(r,i,Object.keys(t).length,e,n)}))}))}))}addProtoToStream(t,e,n,r){Go(this,n,(n=>{Go(this,e,(e=>{const i=this.i._malloc(t.length);this.i.HEAPU8.set(t,i),this.i._addProtoToInputStream(i,t.length,e,n,r),this.i._free(i)}))}))}addEmptyPacketToStream(t,e){Go(this,t,(t=>{this.i._addEmptyPacketToInputStream(t,e)}))}addBoolVectorToStream(t,e,n){Go(this,e,(e=>{const r=this.i._allocateBoolVector(t.length);if(!r)throw Error(\"Unable to allocate new bool vector on heap.\");for(const e of t)this.i._addBoolVectorEntry(r,e);this.i._addBoolVectorToInputStream(r,e,n)}))}addDoubleVectorToStream(t,e,n){Go(this,e,(e=>{const r=this.i._allocateDoubleVector(t.length);if(!r)throw Error(\"Unable to allocate new double vector on heap.\");for(const e of t)this.i._addDoubleVectorEntry(r,e);this.i._addDoubleVectorToInputStream(r,e,n)}))}addFloatVectorToStream(t,e,n){Go(this,e,(e=>{const r=this.i._allocateFloatVector(t.length);if(!r)throw Error(\"Unable to allocate new float vector on heap.\");for(const e of t)this.i._addFloatVectorEntry(r,e);this.i._addFloatVectorToInputStream(r,e,n)}))}addIntVectorToStream(t,e,n){Go(this,e,(e=>{const r=this.i._allocateIntVector(t.length);if(!r)throw Error(\"Unable to allocate new int vector on heap.\");for(const e of t)this.i._addIntVectorEntry(r,e);this.i._addIntVectorToInputStream(r,e,n)}))}addUintVectorToStream(t,e,n){Go(this,e,(e=>{const r=this.i._allocateUintVector(t.length);if(!r)throw Error(\"Unable to allocate new unsigned int vector on heap.\");for(const e of t)this.i._addUintVectorEntry(r,e);this.i._addUintVectorToInputStream(r,e,n)}))}addStringVectorToStream(t,e,n){Go(this,e,(e=>{const r=this.i._allocateStringVector(t.length);if(!r)throw Error(\"Unable to allocate new string vector on heap.\");for(const e of t)Go(this,e,(t=>{this.i._addStringVectorEntry(r,t)}));this.i._addStringVectorToInputStream(r,e,n)}))}addBoolToInputSidePacket(t,e){Go(this,e,(e=>{this.i._addBoolToInputSidePacket(t,e)}))}addDoubleToInputSidePacket(t,e){Go(this,e,(e=>{this.i._addDoubleToInputSidePacket(t,e)}))}addFloatToInputSidePacket(t,e){Go(this,e,(e=>{this.i._addFloatToInputSidePacket(t,e)}))}addIntToInputSidePacket(t,e){Go(this,e,(e=>{this.i._addIntToInputSidePacket(t,e)}))}addUintToInputSidePacket(t,e){Go(this,e,(e=>{this.i._addUintToInputSidePacket(t,e)}))}addStringToInputSidePacket(t,e){Go(this,e,(e=>{Go(this,t,(t=>{this.i._addStringToInputSidePacket(t,e)}))}))}addProtoToInputSidePacket(t,e,n){Go(this,n,(n=>{Go(this,e,(e=>{const r=this.i._malloc(t.length);this.i.HEAPU8.set(t,r),this.i._addProtoToInputSidePacket(r,t.length,e,n),this.i._free(r)}))}))}addBoolVectorToInputSidePacket(t,e){Go(this,e,(e=>{const n=this.i._allocateBoolVector(t.length);if(!n)throw Error(\"Unable to allocate new bool vector on heap.\");for(const e of t)this.i._addBoolVectorEntry(n,e);this.i._addBoolVectorToInputSidePacket(n,e)}))}addDoubleVectorToInputSidePacket(t,e){Go(this,e,(e=>{const n=this.i._allocateDoubleVector(t.length);if(!n)throw Error(\"Unable to allocate new double vector on heap.\");for(const e of t)this.i._addDoubleVectorEntry(n,e);this.i._addDoubleVectorToInputSidePacket(n,e)}))}addFloatVectorToInputSidePacket(t,e){Go(this,e,(e=>{const n=this.i._allocateFloatVector(t.length);if(!n)throw Error(\"Unable to allocate new float vector on heap.\");for(const e of t)this.i._addFloatVectorEntry(n,e);this.i._addFloatVectorToInputSidePacket(n,e)}))}addIntVectorToInputSidePacket(t,e){Go(this,e,(e=>{const n=this.i._allocateIntVector(t.length);if(!n)throw Error(\"Unable to allocate new int vector on heap.\");for(const e of t)this.i._addIntVectorEntry(n,e);this.i._addIntVectorToInputSidePacket(n,e)}))}addUintVectorToInputSidePacket(t,e){Go(this,e,(e=>{const n=this.i._allocateUintVector(t.length);if(!n)throw Error(\"Unable to allocate new unsigned int vector on heap.\");for(const e of t)this.i._addUintVectorEntry(n,e);this.i._addUintVectorToInputSidePacket(n,e)}))}addStringVectorToInputSidePacket(t,e){Go(this,e,(e=>{const n=this.i._allocateStringVector(t.length);if(!n)throw Error(\"Unable to allocate new string vector on heap.\");for(const e of t)Go(this,e,(t=>{this.i._addStringVectorEntry(n,t)}));this.i._addStringVectorToInputSidePacket(n,e)}))}attachBoolListener(t,e){Xo(this,t,e),Go(this,t,(t=>{this.i._attachBoolListener(t)}))}attachBoolVectorListener(t,e){Ho(this,t,e),Go(this,t,(t=>{this.i._attachBoolVectorListener(t)}))}attachIntListener(t,e){Xo(this,t,e),Go(this,t,(t=>{this.i._attachIntListener(t)}))}attachIntVectorListener(t,e){Ho(this,t,e),Go(this,t,(t=>{this.i._attachIntVectorListener(t)}))}attachUintListener(t,e){Xo(this,t,e),Go(this,t,(t=>{this.i._attachUintListener(t)}))}attachUintVectorListener(t,e){Ho(this,t,e),Go(this,t,(t=>{this.i._attachUintVectorListener(t)}))}attachDoubleListener(t,e){Xo(this,t,e),Go(this,t,(t=>{this.i._attachDoubleListener(t)}))}attachDoubleVectorListener(t,e){Ho(this,t,e),Go(this,t,(t=>{this.i._attachDoubleVectorListener(t)}))}attachFloatListener(t,e){Xo(this,t,e),Go(this,t,(t=>{this.i._attachFloatListener(t)}))}attachFloatVectorListener(t,e){Ho(this,t,e),Go(this,t,(t=>{this.i._attachFloatVectorListener(t)}))}attachStringListener(t,e){Xo(this,t,e),Go(this,t,(t=>{this.i._attachStringListener(t)}))}attachStringVectorListener(t,e){Ho(this,t,e),Go(this,t,(t=>{this.i._attachStringVectorListener(t)}))}attachProtoListener(t,e,n){Xo(this,t,e),Go(this,t,(t=>{this.i._attachProtoListener(t,n||!1)}))}attachProtoVectorListener(t,e,n){Ho(this,t,e),Go(this,t,(t=>{this.i._attachProtoVectorListener(t,n||!1)}))}attachAudioListener(t,e,n){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep \":gl_graph_runner_audio_out\" missing?'),Xo(this,t,((t,n)=>{t=new Float32Array(t.buffer,t.byteOffset,t.length/4),e(t,n)})),Go(this,t,(t=>{this.i._attachAudioListener(t,n||!1)}))}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends Ha{get ea(){return this.i}oa(t,e,n){Go(this,e,(e=>{const[r,i]=jo(this,t,e);this.ea._addBoundTextureAsImageToStream(e,r,i,n)}))}V(t,e){Xo(this,t,e),Go(this,t,(t=>{this.ea._attachImageListener(t)}))}ba(t,e){Ho(this,t,e),Go(this,t,(t=>{this.ea._attachImageVectorListener(t)}))}}));var Ha,Wa=class extends Xa{};async function za(t,e,n){return async function(t,e,n,r){return Wo(t,e,n,r)}(t,n.canvas??(Do()?void 0:document.createElement(\"canvas\")),e,n)}function Ka(t,e,n,r){if(t.U){const s=new ms;if(n?.regionOfInterest){if(!t.na)throw Error(\"This task doesn't support region-of-interest.\");var i=n.regionOfInterest;if(i.left>=i.right||i.top>=i.bottom)throw Error(\"Expected RectF with left < right and top < bottom.\");if(i.left<0||i.top<0||i.right>1||i.bottom>1)throw Error(\"Expected RectF values to be in [0,1].\");An(s,1,(i.left+i.right)/2),An(s,2,(i.top+i.bottom)/2),An(s,4,i.right-i.left),An(s,3,i.bottom-i.top)}else An(s,1,.5),An(s,2,.5),An(s,4,1),An(s,3,1);if(n?.rotationDegrees){if(n?.rotationDegrees%90!=0)throw Error(\"Expected rotation to be a multiple of 90Â°.\");if(An(s,5,-Math.PI*n.rotationDegrees/180),n?.rotationDegrees%180!=0){const[t,r]=Bo(e);n=En(s,3)*r/t,i=En(s,4)*t/r,An(s,4,n),An(s,3,i)}}t.g.addProtoToStream(s.g(),\"mediapipe.NormalizedRect\",t.U,r)}t.g.oa(e,t.Z,r??performance.now()),t.finishProcessing()}function Ya(t,e,n){if(t.baseOptions?.g())throw Error(\"Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.\");Ka(t,e,n,t.B+1)}function $a(t,e,n,r){if(!t.baseOptions?.g())throw Error(\"Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.\");Ka(t,e,n,r)}function qa(t,e,n,r){var i=e.data;const s=e.width,o=s*(e=e.height);if((i instanceof Uint8Array||i instanceof Float32Array)&&i.length!==o)throw Error(\"Unsupported channel count: \"+i.length/o);return t=new Ea([i],n,!1,t.g.i.canvas,t.P,s,e),r?t.clone():t}var Ja=class extends Zo{constructor(t,e,n,r){super(t),this.g=t,this.Z=e,this.U=n,this.na=r,this.P=new ca}l(t,e=!0){if(\"runningMode\"in t&&wn(this.baseOptions,2,!!t.runningMode&&\"IMAGE\"!==t.runningMode),void 0!==t.canvas&&this.g.i.canvas!==t.canvas)throw Error(\"You must create a new task to reset the canvas.\");return super.l(t,e)}close(){this.P.close(),super.close()}};Ja.prototype.close=Ja.prototype.close;var Za=class extends Ja{constructor(t,e){super(new Wa(t,e),\"image_in\",\"norm_rect_in\",!1),this.j={detections:[]},dn(t=this.h=new Cs,0,1,e=new Is),An(this.h,2,.5),An(this.h,3,.3)}get baseOptions(){return hn(this.h,Is,1)}set baseOptions(t){dn(this.h,0,1,t)}o(t){return\"minDetectionConfidence\"in t&&An(this.h,2,t.minDetectionConfidence??.5),\"minSuppressionThreshold\"in t&&An(this.h,3,t.minSuppressionThreshold??.3),this.l(t)}D(t,e){return this.j={detections:[]},Ya(this,t,e),this.j}F(t,e,n){return this.j={detections:[]},$a(this,t,n,e),this.j}m(){var t=new Qi;Ji(t,\"image_in\"),Ji(t,\"norm_rect_in\"),Zi(t,\"detections\");const e=new Gi;Yn(e,Us,this.h);const n=new zi;Xi(n,\"mediapipe.tasks.vision.face_detector.FaceDetectorGraph\"),Hi(n,\"IMAGE:image_in\"),Hi(n,\"NORM_RECT:norm_rect_in\"),Wi(n,\"DETECTIONS:detections\"),n.o(e),qi(t,n),this.g.attachProtoVectorListener(\"detections\",((t,e)=>{for(const e of t)t=hs(e),this.j.detections.push(xo(t));Yo(this,e)})),this.g.attachEmptyPacketListener(\"detections\",(t=>{Yo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Za.prototype.detectForVideo=Za.prototype.F,Za.prototype.detect=Za.prototype.D,Za.prototype.setOptions=Za.prototype.o,Za.createFromModelPath=async function(t,e){return za(Za,t,{baseOptions:{modelAssetPath:e}})},Za.createFromModelBuffer=function(t,e){return za(Za,t,{baseOptions:{modelAssetBuffer:e}})},Za.createFromOptions=function(t,e){return za(Za,t,e)};var Qa=Va([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),tc=Va([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),ec=Va([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),nc=Va([474,475],[475,476],[476,477],[477,474]),rc=Va([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),ic=Va([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),sc=Va([469,470],[470,471],[471,472],[472,469]),oc=Va([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),ac=[...Qa,...tc,...ec,...rc,...ic,...oc],cc=Va([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function hc(t){t.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var uc=class extends Ja{constructor(t,e){super(new Wa(t,e),\"image_in\",\"norm_rect\",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,dn(t=this.h=new Bs,0,1,e=new Is),this.v=new Ns,dn(this.h,0,3,this.v),this.s=new Cs,dn(this.h,0,2,this.s),Tn(this.s,4,1),An(this.s,2,.5),An(this.v,2,.5),An(this.h,4,.5)}get baseOptions(){return hn(this.h,Is,1)}set baseOptions(t){dn(this.h,0,1,t)}o(t){return\"numFaces\"in t&&Tn(this.s,4,t.numFaces??1),\"minFaceDetectionConfidence\"in t&&An(this.s,2,t.minFaceDetectionConfidence??.5),\"minTrackingConfidence\"in t&&An(this.h,4,t.minTrackingConfidence??.5),\"minFacePresenceConfidence\"in t&&An(this.v,2,t.minFacePresenceConfidence??.5),\"outputFaceBlendshapes\"in t&&(this.outputFaceBlendshapes=!!t.outputFaceBlendshapes),\"outputFacialTransformationMatrixes\"in t&&(this.outputFacialTransformationMatrixes=!!t.outputFacialTransformationMatrixes),this.l(t)}D(t,e){return hc(this),Ya(this,t,e),this.j}F(t,e,n){return hc(this),$a(this,t,n,e),this.j}m(){var t=new Qi;Ji(t,\"image_in\"),Ji(t,\"norm_rect\"),Zi(t,\"face_landmarks\");const e=new Gi;Yn(e,Vs,this.h);const n=new zi;Xi(n,\"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph\"),Hi(n,\"IMAGE:image_in\"),Hi(n,\"NORM_RECT:norm_rect\"),Wi(n,\"NORM_LANDMARKS:face_landmarks\"),n.o(e),qi(t,n),this.g.attachProtoVectorListener(\"face_landmarks\",((t,e)=>{for(const e of t)t=fs(e),this.j.faceLandmarks.push(Lo(t));Yo(this,e)})),this.g.attachEmptyPacketListener(\"face_landmarks\",(t=>{Yo(this,t)})),this.outputFaceBlendshapes&&(Zi(t,\"blendshapes\"),Wi(n,\"BLENDSHAPES:blendshapes\"),this.g.attachProtoVectorListener(\"blendshapes\",((t,e)=>{if(this.outputFaceBlendshapes)for(const e of t)t=ss(e),this.j.faceBlendshapes.push(So(t.g()??[]));Yo(this,e)})),this.g.attachEmptyPacketListener(\"blendshapes\",(t=>{Yo(this,t)}))),this.outputFacialTransformationMatrixes&&(Zi(t,\"face_geometry\"),Wi(n,\"FACE_GEOMETRY:face_geometry\"),this.g.attachProtoVectorListener(\"face_geometry\",((t,e)=>{if(this.outputFacialTransformationMatrixes)for(const e of t)(t=hn(Ds(e),ps,2))&&this.j.facialTransformationMatrixes.push({rows:_n(t,1)??0??0,columns:_n(t,2)??0??0,data:$e(t,3,qt,Ye()).slice()??[]});Yo(this,e)})),this.g.attachEmptyPacketListener(\"face_geometry\",(t=>{Yo(this,t)}))),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};uc.prototype.detectForVideo=uc.prototype.F,uc.prototype.detect=uc.prototype.D,uc.prototype.setOptions=uc.prototype.o,uc.createFromModelPath=function(t,e){return za(uc,t,{baseOptions:{modelAssetPath:e}})},uc.createFromModelBuffer=function(t,e){return za(uc,t,{baseOptions:{modelAssetBuffer:e}})},uc.createFromOptions=function(t,e){return za(uc,t,e)},uc.FACE_LANDMARKS_LIPS=Qa,uc.FACE_LANDMARKS_LEFT_EYE=tc,uc.FACE_LANDMARKS_LEFT_EYEBROW=ec,uc.FACE_LANDMARKS_LEFT_IRIS=nc,uc.FACE_LANDMARKS_RIGHT_EYE=rc,uc.FACE_LANDMARKS_RIGHT_EYEBROW=ic,uc.FACE_LANDMARKS_RIGHT_IRIS=sc,uc.FACE_LANDMARKS_FACE_OVAL=oc,uc.FACE_LANDMARKS_CONTOURS=ac,uc.FACE_LANDMARKS_TESSELATION=cc;var lc=class extends Ja{constructor(t,e){super(new Wa(t,e),\"image_in\",\"norm_rect\",!0),dn(t=this.j=new Xs,0,1,e=new Is)}get baseOptions(){return hn(this.j,Is,1)}set baseOptions(t){dn(this.j,0,1,t)}o(t){return super.l(t)}Ka(t,e,n){const r=\"function\"!=typeof e?e:{};if(this.h=\"function\"==typeof e?e:n,Ya(this,t,r??{}),!this.h)return this.s}m(){var t=new Qi;Ji(t,\"image_in\"),Ji(t,\"norm_rect\"),Zi(t,\"stylized_image\");const e=new Gi;Yn(e,Hs,this.j);const n=new zi;Xi(n,\"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph\"),Hi(n,\"IMAGE:image_in\"),Hi(n,\"NORM_RECT:norm_rect\"),Wi(n,\"STYLIZED_IMAGE:stylized_image\"),n.o(e),qi(t,n),this.g.V(\"stylized_image\",((t,e)=>{var n=!this.h,r=t.data,i=t.width;const s=i*(t=t.height);if(r instanceof Uint8Array)if(r.length===3*s){const e=new Uint8ClampedArray(4*s);for(let t=0;t<s;++t)e[4*t]=r[3*t],e[4*t+1]=r[3*t+1],e[4*t+2]=r[3*t+2],e[4*t+3]=255;r=new ImageData(e,i,t)}else{if(r.length!==4*s)throw Error(\"Unsupported channel count: \"+r.length/s);r=new ImageData(new Uint8ClampedArray(r.buffer,r.byteOffset,r.length),i,t)}else if(!(r instanceof WebGLTexture))throw Error(`Unsupported format: ${r.constructor.name}`);i=new Ga([r],!1,!1,this.g.i.canvas,this.P,i,t),this.s=n=n?i.clone():i,this.h&&this.h(n),Yo(this,e)})),this.g.attachEmptyPacketListener(\"stylized_image\",(t=>{this.s=null,this.h&&this.h(null),Yo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};lc.prototype.stylize=lc.prototype.Ka,lc.prototype.setOptions=lc.prototype.o,lc.createFromModelPath=function(t,e){return za(lc,t,{baseOptions:{modelAssetPath:e}})},lc.createFromModelBuffer=function(t,e){return za(lc,t,{baseOptions:{modelAssetBuffer:e}})},lc.createFromOptions=function(t,e){return za(lc,t,e)};var dc=Va([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function fc(t){t.gestures=[],t.landmarks=[],t.worldLandmarks=[],t.handedness=[]}function pc(t){return 0===t.gestures.length?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:t.gestures,landmarks:t.landmarks,worldLandmarks:t.worldLandmarks,handedness:t.handedness,handednesses:t.handedness}}function gc(t,e=!0){const n=[];for(const i of t){var r=ss(i);t=[];for(const n of r.g())r=e&&null!=_n(n,1)?_n(n,1)??0:-1,t.push({score:En(n,2)??0,index:r,categoryName:vn(n,3)??\"\"??\"\",displayName:vn(n,4)??\"\"??\"\"});n.push(t)}return n}var mc=class extends Ja{constructor(t,e){super(new Wa(t,e),\"image_in\",\"norm_rect\",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],dn(t=this.j=new Js,0,1,e=new Is),this.s=new qs,dn(this.j,0,2,this.s),this.C=new $s,dn(this.s,0,3,this.C),this.v=new Ys,dn(this.s,0,2,this.v),this.h=new Ks,dn(this.j,0,3,this.h),An(this.v,2,.5),An(this.s,4,.5),An(this.C,2,.5)}get baseOptions(){return hn(this.j,Is,1)}set baseOptions(t){dn(this.j,0,1,t)}o(t){if(Tn(this.v,3,t.numHands??1),\"minHandDetectionConfidence\"in t&&An(this.v,2,t.minHandDetectionConfidence??.5),\"minTrackingConfidence\"in t&&An(this.s,4,t.minTrackingConfidence??.5),\"minHandPresenceConfidence\"in t&&An(this.C,2,t.minHandPresenceConfidence??.5),t.cannedGesturesClassifierOptions){var e=new Ws,n=e,r=ko(t.cannedGesturesClassifierOptions,hn(this.h,Ws,3)?.h());dn(n,0,2,r),dn(this.h,0,3,e)}else void 0===t.cannedGesturesClassifierOptions&&hn(this.h,Ws,3)?.g();return t.customGesturesClassifierOptions?(dn(n=e=new Ws,0,2,r=ko(t.customGesturesClassifierOptions,hn(this.h,Ws,4)?.h())),dn(this.h,0,4,e)):void 0===t.customGesturesClassifierOptions&&hn(this.h,Ws,4)?.g(),this.l(t)}Fa(t,e){return fc(this),Ya(this,t,e),pc(this)}Ga(t,e,n){return fc(this),$a(this,t,n,e),pc(this)}m(){var t=new Qi;Ji(t,\"image_in\"),Ji(t,\"norm_rect\"),Zi(t,\"hand_gestures\"),Zi(t,\"hand_landmarks\"),Zi(t,\"world_hand_landmarks\"),Zi(t,\"handedness\");const e=new Gi;Yn(e,no,this.j);const n=new zi;Xi(n,\"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph\"),Hi(n,\"IMAGE:image_in\"),Hi(n,\"NORM_RECT:norm_rect\"),Wi(n,\"HAND_GESTURES:hand_gestures\"),Wi(n,\"LANDMARKS:hand_landmarks\"),Wi(n,\"WORLD_LANDMARKS:world_hand_landmarks\"),Wi(n,\"HANDEDNESS:handedness\"),n.o(e),qi(t,n),this.g.attachProtoVectorListener(\"hand_landmarks\",((t,e)=>{for(const e of t){t=fs(e);const n=[];for(const e of ln(t,ds,1))n.push({x:En(e,1)??0,y:En(e,2)??0,z:En(e,3)??0,visibility:En(e,4)??0});this.landmarks.push(n)}Yo(this,e)})),this.g.attachEmptyPacketListener(\"hand_landmarks\",(t=>{Yo(this,t)})),this.g.attachProtoVectorListener(\"world_hand_landmarks\",((t,e)=>{for(const e of t){t=ls(e);const n=[];for(const e of ln(t,us,1))n.push({x:En(e,1)??0,y:En(e,2)??0,z:En(e,3)??0,visibility:En(e,4)??0});this.worldLandmarks.push(n)}Yo(this,e)})),this.g.attachEmptyPacketListener(\"world_hand_landmarks\",(t=>{Yo(this,t)})),this.g.attachProtoVectorListener(\"hand_gestures\",((t,e)=>{this.gestures.push(...gc(t,!1)),Yo(this,e)})),this.g.attachEmptyPacketListener(\"hand_gestures\",(t=>{Yo(this,t)})),this.g.attachProtoVectorListener(\"handedness\",((t,e)=>{this.handedness.push(...gc(t)),Yo(this,e)})),this.g.attachEmptyPacketListener(\"handedness\",(t=>{Yo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};function yc(t){return{landmarks:t.landmarks,worldLandmarks:t.worldLandmarks,handednesses:t.handedness,handedness:t.handedness}}mc.prototype.recognizeForVideo=mc.prototype.Ga,mc.prototype.recognize=mc.prototype.Fa,mc.prototype.setOptions=mc.prototype.o,mc.createFromModelPath=function(t,e){return za(mc,t,{baseOptions:{modelAssetPath:e}})},mc.createFromModelBuffer=function(t,e){return za(mc,t,{baseOptions:{modelAssetBuffer:e}})},mc.createFromOptions=function(t,e){return za(mc,t,e)},mc.HAND_CONNECTIONS=dc;var _c=class extends Ja{constructor(t,e){super(new Wa(t,e),\"image_in\",\"norm_rect\",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],dn(t=this.h=new qs,0,1,e=new Is),this.s=new $s,dn(this.h,0,3,this.s),this.j=new Ys,dn(this.h,0,2,this.j),Tn(this.j,3,1),An(this.j,2,.5),An(this.s,2,.5),An(this.h,4,.5)}get baseOptions(){return hn(this.h,Is,1)}set baseOptions(t){dn(this.h,0,1,t)}o(t){return\"numHands\"in t&&Tn(this.j,3,t.numHands??1),\"minHandDetectionConfidence\"in t&&An(this.j,2,t.minHandDetectionConfidence??.5),\"minTrackingConfidence\"in t&&An(this.h,4,t.minTrackingConfidence??.5),\"minHandPresenceConfidence\"in t&&An(this.s,2,t.minHandPresenceConfidence??.5),this.l(t)}D(t,e){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Ya(this,t,e),yc(this)}F(t,e,n){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],$a(this,t,n,e),yc(this)}m(){var t=new Qi;Ji(t,\"image_in\"),Ji(t,\"norm_rect\"),Zi(t,\"hand_landmarks\"),Zi(t,\"world_hand_landmarks\"),Zi(t,\"handedness\");const e=new Gi;Yn(e,ro,this.h);const n=new zi;Xi(n,\"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph\"),Hi(n,\"IMAGE:image_in\"),Hi(n,\"NORM_RECT:norm_rect\"),Wi(n,\"LANDMARKS:hand_landmarks\"),Wi(n,\"WORLD_LANDMARKS:world_hand_landmarks\"),Wi(n,\"HANDEDNESS:handedness\"),n.o(e),qi(t,n),this.g.attachProtoVectorListener(\"hand_landmarks\",((t,e)=>{for(const e of t)t=fs(e),this.landmarks.push(Lo(t));Yo(this,e)})),this.g.attachEmptyPacketListener(\"hand_landmarks\",(t=>{Yo(this,t)})),this.g.attachProtoVectorListener(\"world_hand_landmarks\",((t,e)=>{for(const e of t)t=ls(e),this.worldLandmarks.push(Ro(t));Yo(this,e)})),this.g.attachEmptyPacketListener(\"world_hand_landmarks\",(t=>{Yo(this,t)})),this.g.attachProtoVectorListener(\"handedness\",((t,e)=>{var n=this.handedness,r=n.push;const i=[];for(const e of t){t=ss(e);const n=[];for(const e of t.g())n.push({score:En(e,2)??0,index:_n(e,1)??0??-1,categoryName:vn(e,3)??\"\"??\"\",displayName:vn(e,4)??\"\"??\"\"});i.push(n)}r.call(n,...i),Yo(this,e)})),this.g.attachEmptyPacketListener(\"handedness\",(t=>{Yo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};_c.prototype.detectForVideo=_c.prototype.F,_c.prototype.detect=_c.prototype.D,_c.prototype.setOptions=_c.prototype.o,_c.createFromModelPath=function(t,e){return za(_c,t,{baseOptions:{modelAssetPath:e}})},_c.createFromModelBuffer=function(t,e){return za(_c,t,{baseOptions:{modelAssetBuffer:e}})},_c.createFromOptions=function(t,e){return za(_c,t,e)},_c.HAND_CONNECTIONS=dc;var vc=Va([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function Ec(t){t.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function wc(t){try{if(!t.C)return t.h;t.C(t.h)}finally{Jo(t)}}function Tc(t,e){t=fs(t),e.push(Lo(t))}var Ac=class extends Ja{constructor(t,e){super(new Wa(t,e),\"input_frames_image\",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,dn(t=this.j=new ao,0,1,e=new Is),this.K=new $s,dn(this.j,0,2,this.K),this.Y=new io,dn(this.j,0,3,this.Y),this.s=new Cs,dn(this.j,0,4,this.s),this.H=new Ns,dn(this.j,0,5,this.H),this.v=new so,dn(this.j,0,6,this.v),this.L=new oo,dn(this.j,0,7,this.L),An(this.s,2,.5),An(this.s,3,.3),An(this.H,2,.5),An(this.v,2,.5),An(this.v,3,.3),An(this.L,2,.5),An(this.K,2,.5)}get baseOptions(){return hn(this.j,Is,1)}set baseOptions(t){dn(this.j,0,1,t)}o(t){return\"minFaceDetectionConfidence\"in t&&An(this.s,2,t.minFaceDetectionConfidence??.5),\"minFaceSuppressionThreshold\"in t&&An(this.s,3,t.minFaceSuppressionThreshold??.3),\"minFacePresenceConfidence\"in t&&An(this.H,2,t.minFacePresenceConfidence??.5),\"outputFaceBlendshapes\"in t&&(this.outputFaceBlendshapes=!!t.outputFaceBlendshapes),\"minPoseDetectionConfidence\"in t&&An(this.v,2,t.minPoseDetectionConfidence??.5),\"minPoseSuppressionThreshold\"in t&&An(this.v,3,t.minPoseSuppressionThreshold??.3),\"minPosePresenceConfidence\"in t&&An(this.L,2,t.minPosePresenceConfidence??.5),\"outputPoseSegmentationMasks\"in t&&(this.outputPoseSegmentationMasks=!!t.outputPoseSegmentationMasks),\"minHandLandmarksConfidence\"in t&&An(this.K,2,t.minHandLandmarksConfidence??.5),this.l(t)}D(t,e,n){const r=\"function\"!=typeof e?e:{};return this.C=\"function\"==typeof e?e:n,Ec(this),Ya(this,t,r),wc(this)}F(t,e,n,r){const i=\"function\"!=typeof n?n:{};return this.C=\"function\"==typeof n?n:r,Ec(this),$a(this,t,i,e),wc(this)}m(){var t=new Qi;Ji(t,\"input_frames_image\"),Zi(t,\"pose_landmarks\"),Zi(t,\"pose_world_landmarks\"),Zi(t,\"face_landmarks\"),Zi(t,\"left_hand_landmarks\"),Zi(t,\"left_hand_world_landmarks\"),Zi(t,\"right_hand_landmarks\"),Zi(t,\"right_hand_world_landmarks\");const e=new Gi,n=new xi;tn(n,1,de(\"type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions\"),\"\"),function(t,e){if(null!=e)if(Array.isArray(e))He(t,2,Pe(e,Oe,void 0,void 0,!1));else{if(!(\"string\"==typeof e||e instanceof N||C(e)))throw Error(\"invalid value in Any.value field: \"+e+\" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array\");tn(t,2,dt(e,!1),U())}}(n,this.j.g());const r=new zi;Xi(r,\"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph\"),yn(r,8,xi,n),Hi(r,\"IMAGE:input_frames_image\"),Wi(r,\"POSE_LANDMARKS:pose_landmarks\"),Wi(r,\"POSE_WORLD_LANDMARKS:pose_world_landmarks\"),Wi(r,\"FACE_LANDMARKS:face_landmarks\"),Wi(r,\"LEFT_HAND_LANDMARKS:left_hand_landmarks\"),Wi(r,\"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks\"),Wi(r,\"RIGHT_HAND_LANDMARKS:right_hand_landmarks\"),Wi(r,\"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks\"),r.o(e),qi(t,r),$o(this,t),this.g.attachProtoListener(\"pose_landmarks\",((t,e)=>{Tc(t,this.h.poseLandmarks),Yo(this,e)})),this.g.attachEmptyPacketListener(\"pose_landmarks\",(t=>{Yo(this,t)})),this.g.attachProtoListener(\"pose_world_landmarks\",((t,e)=>{var n=this.h.poseWorldLandmarks;t=ls(t),n.push(Ro(t)),Yo(this,e)})),this.g.attachEmptyPacketListener(\"pose_world_landmarks\",(t=>{Yo(this,t)})),this.outputPoseSegmentationMasks&&(Wi(r,\"POSE_SEGMENTATION_MASK:pose_segmentation_mask\"),qo(this,\"pose_segmentation_mask\"),this.g.V(\"pose_segmentation_mask\",((t,e)=>{this.h.poseSegmentationMasks=[qa(this,t,!0,!this.C)],Yo(this,e)})),this.g.attachEmptyPacketListener(\"pose_segmentation_mask\",(t=>{this.h.poseSegmentationMasks=[],Yo(this,t)}))),this.g.attachProtoListener(\"face_landmarks\",((t,e)=>{Tc(t,this.h.faceLandmarks),Yo(this,e)})),this.g.attachEmptyPacketListener(\"face_landmarks\",(t=>{Yo(this,t)})),this.outputFaceBlendshapes&&(Zi(t,\"extra_blendshapes\"),Wi(r,\"FACE_BLENDSHAPES:extra_blendshapes\"),this.g.attachProtoListener(\"extra_blendshapes\",((t,e)=>{var n=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(t=ss(t),n.push(So(t.g()??[]))),Yo(this,e)})),this.g.attachEmptyPacketListener(\"extra_blendshapes\",(t=>{Yo(this,t)}))),this.g.attachProtoListener(\"left_hand_landmarks\",((t,e)=>{Tc(t,this.h.leftHandLandmarks),Yo(this,e)})),this.g.attachEmptyPacketListener(\"left_hand_landmarks\",(t=>{Yo(this,t)})),this.g.attachProtoListener(\"left_hand_world_landmarks\",((t,e)=>{var n=this.h.leftHandWorldLandmarks;t=ls(t),n.push(Ro(t)),Yo(this,e)})),this.g.attachEmptyPacketListener(\"left_hand_world_landmarks\",(t=>{Yo(this,t)})),this.g.attachProtoListener(\"right_hand_landmarks\",((t,e)=>{Tc(t,this.h.rightHandLandmarks),Yo(this,e)})),this.g.attachEmptyPacketListener(\"right_hand_landmarks\",(t=>{Yo(this,t)})),this.g.attachProtoListener(\"right_hand_world_landmarks\",((t,e)=>{var n=this.h.rightHandWorldLandmarks;t=ls(t),n.push(Ro(t)),Yo(this,e)})),this.g.attachEmptyPacketListener(\"right_hand_world_landmarks\",(t=>{Yo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Ac.prototype.detectForVideo=Ac.prototype.F,Ac.prototype.detect=Ac.prototype.D,Ac.prototype.setOptions=Ac.prototype.o,Ac.createFromModelPath=function(t,e){return za(Ac,t,{baseOptions:{modelAssetPath:e}})},Ac.createFromModelBuffer=function(t,e){return za(Ac,t,{baseOptions:{modelAssetBuffer:e}})},Ac.createFromOptions=function(t,e){return za(Ac,t,e)},Ac.HAND_CONNECTIONS=dc,Ac.POSE_CONNECTIONS=vc,Ac.FACE_LANDMARKS_LIPS=Qa,Ac.FACE_LANDMARKS_LEFT_EYE=tc,Ac.FACE_LANDMARKS_LEFT_EYEBROW=ec,Ac.FACE_LANDMARKS_LEFT_IRIS=nc,Ac.FACE_LANDMARKS_RIGHT_EYE=rc,Ac.FACE_LANDMARKS_RIGHT_EYEBROW=ic,Ac.FACE_LANDMARKS_RIGHT_IRIS=sc,Ac.FACE_LANDMARKS_FACE_OVAL=oc,Ac.FACE_LANDMARKS_CONTOURS=ac,Ac.FACE_LANDMARKS_TESSELATION=cc;var bc=class extends Ja{constructor(t,e){super(new Wa(t,e),\"input_image\",\"norm_rect\",!0),this.j={classifications:[]},dn(t=this.h=new uo,0,1,e=new Is)}get baseOptions(){return hn(this.h,Is,1)}set baseOptions(t){dn(this.h,0,1,t)}o(t){return dn(this.h,0,2,ko(t,hn(this.h,bs,2))),this.l(t)}qa(t,e){return this.j={classifications:[]},Ya(this,t,e),this.j}ra(t,e,n){return this.j={classifications:[]},$a(this,t,n,e),this.j}m(){var t=new Qi;Ji(t,\"input_image\"),Ji(t,\"norm_rect\"),Zi(t,\"classifications\");const e=new Gi;Yn(e,lo,this.h);const n=new zi;Xi(n,\"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph\"),Hi(n,\"IMAGE:input_image\"),Hi(n,\"NORM_RECT:norm_rect\"),Wi(n,\"CLASSIFICATIONS:classifications\"),n.o(e),qi(t,n),this.g.attachProtoListener(\"classifications\",((t,e)=>{this.j=function(t){const e={classifications:ln(t,ys,1).map((t=>So(hn(t,rs,4)?.g()??[],_n(t,2)??0,vn(t,3)??\"\")))};return null!=he(Ve(t,2))&&(e.timestampMs=he(Ve(t,2))??0),e}(_s(t)),Yo(this,e)})),this.g.attachEmptyPacketListener(\"classifications\",(t=>{Yo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};bc.prototype.classifyForVideo=bc.prototype.ra,bc.prototype.classify=bc.prototype.qa,bc.prototype.setOptions=bc.prototype.o,bc.createFromModelPath=function(t,e){return za(bc,t,{baseOptions:{modelAssetPath:e}})},bc.createFromModelBuffer=function(t,e){return za(bc,t,{baseOptions:{modelAssetBuffer:e}})},bc.createFromOptions=function(t,e){return za(bc,t,e)};var kc=class extends Ja{constructor(t,e){super(new Wa(t,e),\"image_in\",\"norm_rect\",!0),this.h=new fo,this.embeddings={embeddings:[]},dn(t=this.h,0,1,e=new Is)}get baseOptions(){return hn(this.h,Is,1)}set baseOptions(t){dn(this.h,0,1,t)}o(t){var e=this.h,n=hn(this.h,Ss,2);return n=n?n.clone():new Ss,void 0!==t.l2Normalize?wn(n,1,t.l2Normalize):\"l2Normalize\"in t&&He(n,1),void 0!==t.quantize?wn(n,2,t.quantize):\"quantize\"in t&&He(n,2),dn(e,0,2,n),this.l(t)}xa(t,e){return Ya(this,t,e),this.embeddings}ya(t,e,n){return $a(this,t,n,e),this.embeddings}m(){var t=new Qi;Ji(t,\"image_in\"),Ji(t,\"norm_rect\"),Zi(t,\"embeddings_out\");const e=new Gi;Yn(e,po,this.h);const n=new zi;Xi(n,\"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph\"),Hi(n,\"IMAGE:image_in\"),Hi(n,\"NORM_RECT:norm_rect\"),Wi(n,\"EMBEDDINGS:embeddings_out\"),n.o(e),qi(t,n),this.g.attachProtoListener(\"embeddings_out\",((t,e)=>{t=As(t),this.embeddings=function(t){return{embeddings:ln(t,ws,1).map((t=>{const e={headIndex:_n(t,3)??0??-1,headName:vn(t,4)??\"\"??\"\"};if(void 0!==cn(t,vs,nn(t,1)))t=$e(t=hn(t,vs,nn(t,1)),1,qt,Ye()),e.floatEmbedding=t.slice();else{const n=new Uint8Array(0);e.quantizedEmbedding=hn(t,Es,nn(t,2))?.ma()?.h()??n}return e})),timestampMs:he(Ve(t,2))??0}}(t),Yo(this,e)})),this.g.attachEmptyPacketListener(\"embeddings_out\",(t=>{Yo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};kc.cosineSimilarity=function(t,e){if(t.floatEmbedding&&e.floatEmbedding)t=Io(t.floatEmbedding,e.floatEmbedding);else{if(!t.quantizedEmbedding||!e.quantizedEmbedding)throw Error(\"Cannot compute cosine similarity between quantized and float embeddings.\");t=Io(Fo(t.quantizedEmbedding),Fo(e.quantizedEmbedding))}return t},kc.prototype.embedForVideo=kc.prototype.ya,kc.prototype.embed=kc.prototype.xa,kc.prototype.setOptions=kc.prototype.o,kc.createFromModelPath=function(t,e){return za(kc,t,{baseOptions:{modelAssetPath:e}})},kc.createFromModelBuffer=function(t,e){return za(kc,t,{baseOptions:{modelAssetBuffer:e}})},kc.createFromOptions=function(t,e){return za(kc,t,e)};var Sc=class{constructor(t,e,n){this.confidenceMasks=t,this.categoryMask=e,this.qualityScores=n}close(){this.confidenceMasks?.forEach((t=>{t.close()})),this.categoryMask?.close()}};function xc(t){t.categoryMask=void 0,t.confidenceMasks=void 0,t.qualityScores=void 0}function Lc(t){try{const e=new Sc(t.confidenceMasks,t.categoryMask,t.qualityScores);if(!t.j)return e;t.j(e)}finally{Jo(t)}}Sc.prototype.close=Sc.prototype.close;var Rc=class extends Ja{constructor(t,e){super(new Wa(t,e),\"image_in\",\"norm_rect\",!1),this.s=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new vo,this.v=new go,dn(this.h,0,3,this.v),dn(t=this.h,0,1,e=new Is)}get baseOptions(){return hn(this.h,Is,1)}set baseOptions(t){dn(this.h,0,1,t)}o(t){return void 0!==t.displayNamesLocale?He(this.h,2,de(t.displayNamesLocale)):\"displayNamesLocale\"in t&&He(this.h,2),\"outputCategoryMask\"in t&&(this.outputCategoryMask=t.outputCategoryMask??!1),\"outputConfidenceMasks\"in t&&(this.outputConfidenceMasks=t.outputConfidenceMasks??!0),super.l(t)}J(){!function(t){const e=ln(t.ca(),zi,1).filter((t=>(vn(t,1)??\"\").includes(\"mediapipe.tasks.TensorsToSegmentationCalculator\")));if(t.s=[],e.length>1)throw Error(\"The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.\");1===e.length&&(hn(e[0],Gi,7)?.l()?.g()??new Map).forEach(((e,n)=>{t.s[Number(n)]=vn(e,1)??\"\"}))}(this)}segment(t,e,n){const r=\"function\"!=typeof e?e:{};return this.j=\"function\"==typeof e?e:n,xc(this),Ya(this,t,r),Lc(this)}Ia(t,e,n,r){const i=\"function\"!=typeof n?n:{};return this.j=\"function\"==typeof n?n:r,xc(this),$a(this,t,i,e),Lc(this)}Ba(){return this.s}m(){var t=new Qi;Ji(t,\"image_in\"),Ji(t,\"norm_rect\");const e=new Gi;Yn(e,Eo,this.h);const n=new zi;Xi(n,\"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph\"),Hi(n,\"IMAGE:image_in\"),Hi(n,\"NORM_RECT:norm_rect\"),n.o(e),qi(t,n),$o(this,t),this.outputConfidenceMasks&&(Zi(t,\"confidence_masks\"),Wi(n,\"CONFIDENCE_MASKS:confidence_masks\"),qo(this,\"confidence_masks\"),this.g.ba(\"confidence_masks\",((t,e)=>{this.confidenceMasks=t.map((t=>qa(this,t,!0,!this.j))),Yo(this,e)})),this.g.attachEmptyPacketListener(\"confidence_masks\",(t=>{this.confidenceMasks=[],Yo(this,t)}))),this.outputCategoryMask&&(Zi(t,\"category_mask\"),Wi(n,\"CATEGORY_MASK:category_mask\"),qo(this,\"category_mask\"),this.g.V(\"category_mask\",((t,e)=>{this.categoryMask=qa(this,t,!1,!this.j),Yo(this,e)})),this.g.attachEmptyPacketListener(\"category_mask\",(t=>{this.categoryMask=void 0,Yo(this,t)}))),Zi(t,\"quality_scores\"),Wi(n,\"QUALITY_SCORES:quality_scores\"),this.g.attachFloatVectorListener(\"quality_scores\",((t,e)=>{this.qualityScores=t,Yo(this,e)})),this.g.attachEmptyPacketListener(\"quality_scores\",(t=>{this.categoryMask=void 0,Yo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Rc.prototype.getLabels=Rc.prototype.Ba,Rc.prototype.segmentForVideo=Rc.prototype.Ia,Rc.prototype.segment=Rc.prototype.segment,Rc.prototype.setOptions=Rc.prototype.o,Rc.createFromModelPath=function(t,e){return za(Rc,t,{baseOptions:{modelAssetPath:e}})},Rc.createFromModelBuffer=function(t,e){return za(Rc,t,{baseOptions:{modelAssetBuffer:e}})},Rc.createFromOptions=function(t,e){return za(Rc,t,e)};var Fc=class{constructor(t,e,n){this.confidenceMasks=t,this.categoryMask=e,this.qualityScores=n}close(){this.confidenceMasks?.forEach((t=>{t.close()})),this.categoryMask?.close()}};Fc.prototype.close=Fc.prototype.close;var Ic=class extends $n{constructor(t){super(t)}},Mc=[0,hi,-2],Pc=[0,ni,-3,di,ni,-1],Cc=[0,Pc],Oc=[0,Pc,hi,-1],Uc=class extends $n{constructor(t){super(t)}},Dc=[0,ni,-1,di],Nc=class extends $n{constructor(t){super(t)}},Bc=class extends $n{constructor(t){super(t)}},Gc=[1,2,3,4,5,6,7,8,9,10,14,15],jc=class extends $n{constructor(t){super(t)}};jc.prototype.g=Si([0,yi,[0,Gc,_i,Pc,_i,[0,Pc,Mc],_i,Cc,_i,[0,Cc,Mc],_i,Dc,_i,[0,ni,-3,di,Ti],_i,[0,ni,-3,di],_i,[0,mi,ni,-2,di,hi,di,-1,2,ni,Mc],_i,Oc,_i,[0,Oc,Mc],ni,Mc,mi,_i,[0,ni,-3,di,Mc,-1],_i,[0,yi,Dc]],mi,[0,mi,hi,-1,di]]);var Vc=class extends Ja{constructor(t,e){super(new Wa(t,e),\"image_in\",\"norm_rect_in\",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new vo,this.s=new go,dn(this.h,0,3,this.s),dn(t=this.h,0,1,e=new Is)}get baseOptions(){return hn(this.h,Is,1)}set baseOptions(t){dn(this.h,0,1,t)}o(t){return\"outputCategoryMask\"in t&&(this.outputCategoryMask=t.outputCategoryMask??!1),\"outputConfidenceMasks\"in t&&(this.outputConfidenceMasks=t.outputConfidenceMasks??!0),super.l(t)}segment(t,e,n,r){const i=\"function\"!=typeof n?n:{};this.j=\"function\"==typeof n?n:r,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,n=this.B+1,r=new jc;const s=new Bc;var o=new Ic;if(Tn(o,1,255),dn(s,0,12,o),e.keypoint&&e.scribble)throw Error(\"Cannot provide both keypoint and scribble.\");if(e.keypoint){var a=new Uc;wn(a,3,!0),An(a,1,e.keypoint.x),An(a,2,e.keypoint.y),fn(s,5,Gc,a)}else{if(!e.scribble)throw Error(\"Must provide either a keypoint or a scribble.\");for(a of(o=new Nc,e.scribble))wn(e=new Uc,3,!0),An(e,1,a.x),An(e,2,a.y),yn(o,1,Uc,e);fn(s,15,Gc,o)}yn(r,1,Bc,s),this.g.addProtoToStream(r.g(),\"drishti.RenderData\",\"roi_in\",n),Ya(this,t,i);t:{try{const t=new Fc(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var c=t;break t}this.j(t)}finally{Jo(this)}c=void 0}return c}m(){var t=new Qi;Ji(t,\"image_in\"),Ji(t,\"roi_in\"),Ji(t,\"norm_rect_in\");const e=new Gi;Yn(e,Eo,this.h);const n=new zi;Xi(n,\"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph\"),Hi(n,\"IMAGE:image_in\"),Hi(n,\"ROI:roi_in\"),Hi(n,\"NORM_RECT:norm_rect_in\"),n.o(e),qi(t,n),$o(this,t),this.outputConfidenceMasks&&(Zi(t,\"confidence_masks\"),Wi(n,\"CONFIDENCE_MASKS:confidence_masks\"),qo(this,\"confidence_masks\"),this.g.ba(\"confidence_masks\",((t,e)=>{this.confidenceMasks=t.map((t=>qa(this,t,!0,!this.j))),Yo(this,e)})),this.g.attachEmptyPacketListener(\"confidence_masks\",(t=>{this.confidenceMasks=[],Yo(this,t)}))),this.outputCategoryMask&&(Zi(t,\"category_mask\"),Wi(n,\"CATEGORY_MASK:category_mask\"),qo(this,\"category_mask\"),this.g.V(\"category_mask\",((t,e)=>{this.categoryMask=qa(this,t,!1,!this.j),Yo(this,e)})),this.g.attachEmptyPacketListener(\"category_mask\",(t=>{this.categoryMask=void 0,Yo(this,t)}))),Zi(t,\"quality_scores\"),Wi(n,\"QUALITY_SCORES:quality_scores\"),this.g.attachFloatVectorListener(\"quality_scores\",((t,e)=>{this.qualityScores=t,Yo(this,e)})),this.g.attachEmptyPacketListener(\"quality_scores\",(t=>{this.categoryMask=void 0,Yo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Vc.prototype.segment=Vc.prototype.segment,Vc.prototype.setOptions=Vc.prototype.o,Vc.createFromModelPath=function(t,e){return za(Vc,t,{baseOptions:{modelAssetPath:e}})},Vc.createFromModelBuffer=function(t,e){return za(Vc,t,{baseOptions:{modelAssetBuffer:e}})},Vc.createFromOptions=function(t,e){return za(Vc,t,e)};var Xc=class extends Ja{constructor(t,e){super(new Wa(t,e),\"input_frame_gpu\",\"norm_rect\",!1),this.j={detections:[]},dn(t=this.h=new wo,0,1,e=new Is)}get baseOptions(){return hn(this.h,Is,1)}set baseOptions(t){dn(this.h,0,1,t)}o(t){return void 0!==t.displayNamesLocale?He(this.h,2,de(t.displayNamesLocale)):\"displayNamesLocale\"in t&&He(this.h,2),void 0!==t.maxResults?Tn(this.h,3,t.maxResults):\"maxResults\"in t&&He(this.h,3),void 0!==t.scoreThreshold?An(this.h,4,t.scoreThreshold):\"scoreThreshold\"in t&&He(this.h,4),void 0!==t.categoryAllowlist?bn(this.h,5,t.categoryAllowlist):\"categoryAllowlist\"in t&&He(this.h,5),void 0!==t.categoryDenylist?bn(this.h,6,t.categoryDenylist):\"categoryDenylist\"in t&&He(this.h,6),this.l(t)}D(t,e){return this.j={detections:[]},Ya(this,t,e),this.j}F(t,e,n){return this.j={detections:[]},$a(this,t,n,e),this.j}m(){var t=new Qi;Ji(t,\"input_frame_gpu\"),Ji(t,\"norm_rect\"),Zi(t,\"detections\");const e=new Gi;Yn(e,To,this.h);const n=new zi;Xi(n,\"mediapipe.tasks.vision.ObjectDetectorGraph\"),Hi(n,\"IMAGE:input_frame_gpu\"),Hi(n,\"NORM_RECT:norm_rect\"),Wi(n,\"DETECTIONS:detections\"),n.o(e),qi(t,n),this.g.attachProtoVectorListener(\"detections\",((t,e)=>{for(const e of t)t=hs(e),this.j.detections.push(xo(t));Yo(this,e)})),this.g.attachEmptyPacketListener(\"detections\",(t=>{Yo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Xc.prototype.detectForVideo=Xc.prototype.F,Xc.prototype.detect=Xc.prototype.D,Xc.prototype.setOptions=Xc.prototype.o,Xc.createFromModelPath=async function(t,e){return za(Xc,t,{baseOptions:{modelAssetPath:e}})},Xc.createFromModelBuffer=function(t,e){return za(Xc,t,{baseOptions:{modelAssetBuffer:e}})},Xc.createFromOptions=function(t,e){return za(Xc,t,e)};var Hc=class{constructor(t,e,n){this.landmarks=t,this.worldLandmarks=e,this.segmentationMasks=n}close(){this.segmentationMasks?.forEach((t=>{t.close()}))}};function Wc(t){t.landmarks=[],t.worldLandmarks=[],t.segmentationMasks=void 0}function zc(t){try{const e=new Hc(t.landmarks,t.worldLandmarks,t.segmentationMasks);if(!t.s)return e;t.s(e)}finally{Jo(t)}}Hc.prototype.close=Hc.prototype.close;var Kc=class extends Ja{constructor(t,e){super(new Wa(t,e),\"image_in\",\"norm_rect\",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,dn(t=this.h=new Ao,0,1,e=new Is),this.v=new oo,dn(this.h,0,3,this.v),this.j=new so,dn(this.h,0,2,this.j),Tn(this.j,4,1),An(this.j,2,.5),An(this.v,2,.5),An(this.h,4,.5)}get baseOptions(){return hn(this.h,Is,1)}set baseOptions(t){dn(this.h,0,1,t)}o(t){return\"numPoses\"in t&&Tn(this.j,4,t.numPoses??1),\"minPoseDetectionConfidence\"in t&&An(this.j,2,t.minPoseDetectionConfidence??.5),\"minTrackingConfidence\"in t&&An(this.h,4,t.minTrackingConfidence??.5),\"minPosePresenceConfidence\"in t&&An(this.v,2,t.minPosePresenceConfidence??.5),\"outputSegmentationMasks\"in t&&(this.outputSegmentationMasks=t.outputSegmentationMasks??!1),this.l(t)}D(t,e,n){const r=\"function\"!=typeof e?e:{};return this.s=\"function\"==typeof e?e:n,Wc(this),Ya(this,t,r),zc(this)}F(t,e,n,r){const i=\"function\"!=typeof n?n:{};return this.s=\"function\"==typeof n?n:r,Wc(this),$a(this,t,i,e),zc(this)}m(){var t=new Qi;Ji(t,\"image_in\"),Ji(t,\"norm_rect\"),Zi(t,\"normalized_landmarks\"),Zi(t,\"world_landmarks\"),Zi(t,\"segmentation_masks\");const e=new Gi;Yn(e,bo,this.h);const n=new zi;Xi(n,\"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph\"),Hi(n,\"IMAGE:image_in\"),Hi(n,\"NORM_RECT:norm_rect\"),Wi(n,\"NORM_LANDMARKS:normalized_landmarks\"),Wi(n,\"WORLD_LANDMARKS:world_landmarks\"),n.o(e),qi(t,n),$o(this,t),this.g.attachProtoVectorListener(\"normalized_landmarks\",((t,e)=>{this.landmarks=[];for(const e of t)t=fs(e),this.landmarks.push(Lo(t));Yo(this,e)})),this.g.attachEmptyPacketListener(\"normalized_landmarks\",(t=>{this.landmarks=[],Yo(this,t)})),this.g.attachProtoVectorListener(\"world_landmarks\",((t,e)=>{this.worldLandmarks=[];for(const e of t)t=ls(e),this.worldLandmarks.push(Ro(t));Yo(this,e)})),this.g.attachEmptyPacketListener(\"world_landmarks\",(t=>{this.worldLandmarks=[],Yo(this,t)})),this.outputSegmentationMasks&&(Wi(n,\"SEGMENTATION_MASK:segmentation_masks\"),qo(this,\"segmentation_masks\"),this.g.ba(\"segmentation_masks\",((t,e)=>{this.segmentationMasks=t.map((t=>qa(this,t,!0,!this.s))),Yo(this,e)})),this.g.attachEmptyPacketListener(\"segmentation_masks\",(t=>{this.segmentationMasks=[],Yo(this,t)}))),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Kc.prototype.detectForVideo=Kc.prototype.F,Kc.prototype.detect=Kc.prototype.D,Kc.prototype.setOptions=Kc.prototype.o,Kc.createFromModelPath=function(t,e){return za(Kc,t,{baseOptions:{modelAssetPath:e}})},Kc.createFromModelBuffer=function(t,e){return za(Kc,t,{baseOptions:{modelAssetBuffer:e}})},Kc.createFromOptions=function(t,e){return za(Kc,t,e)},Kc.POSE_CONNECTIONS=vc;export{Ia as DrawingUtils,Za as FaceDetector,uc as FaceLandmarker,lc as FaceStylizer,Uo as FilesetResolver,mc as GestureRecognizer,_c as HandLandmarker,Ac as HolisticLandmarker,bc as ImageClassifier,kc as ImageEmbedder,Rc as ImageSegmenter,Sc as ImageSegmenterResult,Vc as InteractiveSegmenter,Fc as InteractiveSegmenterResult,Ga as MPImage,Ea as MPMask,Xc as ObjectDetector,Kc as PoseLandmarker,Zo as TaskRunner,Ja as VisionTaskRunner};\n//# sourceMappingURL=vision_bundle_mjs.js.map\n", "import { simd } from 'wasm-feature-detect';\n\nexport type PlatformSupportFlags = {\n  /**\n   * Forces support for mobile devices, although performance isn't optimal.\n   */\n  forceMobileSupport?: boolean;\n\n  /**\n   * Forces support for Safari, although in cases where the tab is put in the background,\n   * the FPS can drop significantly or freeze completely due to intensive timer throttling.\n   */\n  forceSafariSupport?: boolean;\n};\n\n/**\n * Checks if the current platform is a mobile device.\n *\n * See:\n * https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent\n */\nconst isMobile = () => /Mobi/i.test(navigator.userAgent);\n\n/**\n * Checks whether the current browser is Safari.\n */\nconst isSafari = () =>\n  /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\n/**\n * Runs a check to see if the current platform supports\n * the necessary APIs required for the video filters.\n */\nexport const isPlatformSupported = async ({\n  forceMobileSupport = false,\n  forceSafariSupport = false,\n}: PlatformSupportFlags = {}) =>\n  typeof document !== 'undefined' &&\n  typeof window !== 'undefined' &&\n  typeof navigator !== 'undefined' &&\n  // we don't support mobile devices yet due to performance issues\n  (forceMobileSupport || !isMobile()) &&\n  // Safari has issues with timer throttling, causing low FPS when the tab goes to the background\n  (forceSafariSupport || !isSafari()) &&\n  typeof WebAssembly !== 'undefined' &&\n  !!window.WebGL2RenderingContext && // WebGL2 is required for the video filters\n  !!document.createElement('canvas').getContext('webgl2') &&\n  (await simd()); // SIMD is required for the wasm module\n\n/**\n * Runs a check to see if the current platform supports\n * the necessary APIs required for the MediaPipe-based video filters.\n */\nexport const isMediaPipePlatformSupported = async ({\n  forceMobileSupport = false,\n  forceSafariSupport = false,\n}: PlatformSupportFlags = {}) =>\n  typeof document !== 'undefined' &&\n  typeof window !== 'undefined' &&\n  typeof navigator !== 'undefined' &&\n  // we don't support mobile devices yet due to performance issues\n  (forceMobileSupport || !isMobile()) &&\n  // Safari has issues with timer throttling, causing low FPS when the tab goes to the background\n  (forceSafariSupport || !isSafari()) &&\n  typeof WebAssembly !== 'undefined' &&\n  typeof OffscreenCanvas !== 'undefined' && // OffscreenCanvas is required for efficient rendering\n  !!window.WebGL2RenderingContext && // WebGL2 is required for the video filters\n  !!new OffscreenCanvas(1, 1).getContext('webgl2') &&\n  typeof VideoFrame !== 'undefined' && // VideoFrame API is required for frame processing\n  typeof createImageBitmap !== 'undefined'; // createImageBitmap is required for background image processing\n", "/**\n * Use it along with boyswan.glsl-literal VSCode extension\n * to get GLSL syntax highlighting.\n * https://marketplace.visualstudio.com/items?itemName=boyswan.glsl-literal\n *\n * On VSCode OSS, boyswan.glsl-literal requires slevesque.shader extension\n * to be installed as well.\n * https://marketplace.visualstudio.com/items?itemName=slevesque.shader\n */\nexport const glsl = String.raw;\n\nexport function createPipelineStageProgram(\n  gl: WebGL2RenderingContext,\n  vertexShader: WebGLShader,\n  fragmentShader: WebGLShader,\n  positionBuffer: WebGLBuffer,\n  texCoordBuffer: WebGLBuffer,\n) {\n  const program = createProgram(gl, vertexShader, fragmentShader);\n\n  const positionAttributeLocation = gl.getAttribLocation(program, 'a_position');\n  gl.enableVertexAttribArray(positionAttributeLocation);\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n  gl.vertexAttribPointer(positionAttributeLocation, 2, gl.FLOAT, false, 0, 0);\n\n  const texCoordAttributeLocation = gl.getAttribLocation(program, 'a_texCoord');\n  gl.enableVertexAttribArray(texCoordAttributeLocation);\n  gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\n  gl.vertexAttribPointer(texCoordAttributeLocation, 2, gl.FLOAT, false, 0, 0);\n\n  return program;\n}\n\nexport function createProgram(\n  gl: WebGL2RenderingContext,\n  vertexShader: WebGLShader,\n  fragmentShader: WebGLShader,\n) {\n  const program = gl.createProgram()!;\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  gl.linkProgram(program);\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n    throw new Error(\n      `Could not link WebGL program: ${gl.getProgramInfoLog(program)}`,\n    );\n  }\n  return program;\n}\n\nexport function compileShader(\n  gl: WebGL2RenderingContext,\n  shaderType: number,\n  shaderSource: string,\n) {\n  const shader = gl.createShader(shaderType)!;\n  gl.shaderSource(shader, shaderSource);\n  gl.compileShader(shader);\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    throw new Error(`Could not compile shader: ${gl.getShaderInfoLog(shader)}`);\n  }\n  return shader;\n}\n\nexport function createTexture(\n  gl: WebGL2RenderingContext,\n  internalformat: number,\n  width: number,\n  height: number,\n  minFilter = gl.NEAREST,\n  magFilter = gl.NEAREST,\n) {\n  const texture = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter);\n  gl.texStorage2D(gl.TEXTURE_2D, 1, internalformat, width, height);\n  return texture;\n}\n\nexport async function readPixelsAsync(\n  gl: WebGL2RenderingContext,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  format: number,\n  type: number,\n  dest: ArrayBufferView,\n) {\n  const buf = gl.createBuffer()!;\n  gl.bindBuffer(gl.PIXEL_PACK_BUFFER, buf);\n  gl.bufferData(gl.PIXEL_PACK_BUFFER, dest.byteLength, gl.STREAM_READ);\n  gl.readPixels(x, y, width, height, format, type, 0);\n  gl.bindBuffer(gl.PIXEL_PACK_BUFFER, null);\n\n  await getBufferSubDataAsync(gl, gl.PIXEL_PACK_BUFFER, buf, 0, dest);\n\n  gl.deleteBuffer(buf);\n  return dest;\n}\n\nasync function getBufferSubDataAsync(\n  gl: WebGL2RenderingContext,\n  target: number,\n  buffer: WebGLBuffer,\n  srcByteOffset: number,\n  dstBuffer: ArrayBufferView,\n  dstOffset?: number,\n  length?: number,\n) {\n  const sync = gl.fenceSync(gl.SYNC_GPU_COMMANDS_COMPLETE, 0);\n  gl.flush();\n  if (!sync) return;\n\n  const res = await clientWaitAsync(gl, sync);\n  gl.deleteSync(sync);\n\n  if (res !== gl.WAIT_FAILED) {\n    gl.bindBuffer(target, buffer);\n    gl.getBufferSubData(target, srcByteOffset, dstBuffer, dstOffset, length);\n    gl.bindBuffer(target, null);\n  }\n}\n\nfunction clientWaitAsync(gl: WebGL2RenderingContext, sync: WebGLSync) {\n  return new Promise<number>((resolve) => {\n    function test() {\n      const res = gl.clientWaitSync(sync, 0, 0);\n      if (res === gl.WAIT_FAILED) {\n        resolve(res);\n        return;\n      }\n      if (res === gl.TIMEOUT_EXPIRED) {\n        setTimeout(test);\n        return;\n      }\n      resolve(res);\n    }\n    setTimeout(test);\n  });\n}\n", "import {\n  compileShader,\n  createPipelineStageProgram,\n  createTexture,\n  glsl,\n} from '../helpers/webglHelper';\nimport { BackgroundBlurLevel } from '../../types';\n\nexport type BackgroundBlurStage = {\n  render(): void;\n  updateCoverage(coverage: [number, number]): void;\n  cleanUp(): void;\n};\n\nexport function buildBackgroundBlurStage(\n  gl: WebGL2RenderingContext,\n  vertexShader: WebGLShader,\n  positionBuffer: WebGLBuffer,\n  texCoordBuffer: WebGLBuffer,\n  personMaskTexture: WebGLTexture,\n  canvas: HTMLCanvasElement,\n  blurLevel: BackgroundBlurLevel,\n): BackgroundBlurStage {\n  const blurPass = buildBlurPass(\n    gl,\n    vertexShader,\n    positionBuffer,\n    texCoordBuffer,\n    personMaskTexture,\n    canvas,\n    blurLevel,\n  );\n  const blendPass = buildBlendPass(gl, positionBuffer, texCoordBuffer, canvas);\n\n  function render() {\n    blurPass.render();\n    blendPass.render();\n  }\n\n  function updateCoverage(coverage: [number, number]) {\n    blendPass.updateCoverage(coverage);\n  }\n\n  function cleanUp() {\n    blendPass.cleanUp();\n    blurPass.cleanUp();\n  }\n\n  return {\n    render,\n    updateCoverage,\n    cleanUp,\n  };\n}\n\nfunction buildBlurPass(\n  gl: WebGL2RenderingContext,\n  vertexShader: WebGLShader,\n  positionBuffer: WebGLBuffer,\n  texCoordBuffer: WebGLBuffer,\n  personMaskTexture: WebGLTexture,\n  canvas: HTMLCanvasElement,\n  blurLevel: BackgroundBlurLevel,\n) {\n  const sigma =\n    typeof blurLevel === 'number'\n      ? blurLevel\n      : blurLevel === 'low'\n        ? 2\n        : blurLevel === 'medium'\n          ? 4\n          : 6;\n  const windowSize = Math.max(1, Math.floor(sigma * 3));\n  const offset = new Array<number>(windowSize).fill(0).map((v, index) => index);\n  const variance = sigma ** 2;\n  const weights = offset.map((x) => {\n    const m = sigma * Math.sqrt(2 * Math.PI);\n    const e = Math.exp(-(x ** 2) / (2 * variance));\n    return e / m;\n  });\n\n  const fragmentShaderSource = glsl`#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform vec2 u_texelSize;\n\n    in vec2 v_texCoord;\n    out vec4 outColor;\n\n    const float offset[${windowSize}] = float[](${offset.map((i) => i.toFixed(10)).join(', ')});\n    const float weight[${windowSize}] = float[](${weights.map((i) => i.toFixed(10)).join(', ')});\n\n    void main() {\n      vec4 centerColor = texture(u_inputFrame, v_texCoord);\n      float personMask = texture(u_personMask, v_texCoord).a;\n\n      vec4 frameColor = centerColor * weight[0] * (1.0 - personMask);\n\n      for (int i = 1; i < ${windowSize}; i++) {\n        vec2 offset = vec2(offset[i]) * u_texelSize;\n\n        vec2 texCoord = v_texCoord + offset;\n        frameColor += texture(u_inputFrame, texCoord)\n           * weight[i]\n           * (1.0 - texture(u_personMask, texCoord).a);\n\n        texCoord = v_texCoord - offset;\n        frameColor += texture(u_inputFrame, texCoord)\n          * weight[i]\n          * (1.0 - texture(u_personMask, texCoord).a);\n      }\n      outColor = vec4(frameColor.rgb + (1.0 - frameColor.a) * centerColor.rgb, 1.0);\n    }\n  `;\n\n  const scale = 0.5;\n  const outputWidth = canvas.width * scale;\n  const outputHeight = canvas.height * scale;\n  const texelWidth = 1 / outputWidth;\n  const texelHeight = 1 / outputHeight;\n\n  const fragmentShader = compileShader(\n    gl,\n    gl.FRAGMENT_SHADER,\n    fragmentShaderSource,\n  );\n  const program = createPipelineStageProgram(\n    gl,\n    vertexShader,\n    fragmentShader,\n    positionBuffer,\n    texCoordBuffer,\n  );\n  const inputFrameLocation = gl.getUniformLocation(program, 'u_inputFrame');\n  const personMaskLocation = gl.getUniformLocation(program, 'u_personMask');\n  const texelSizeLocation = gl.getUniformLocation(program, 'u_texelSize');\n  const texture1 = createTexture(\n    gl,\n    gl.RGBA8,\n    outputWidth,\n    outputHeight,\n    gl.NEAREST,\n    // @ts-expect-error types are incomplete\n    gl.LINEAR,\n  );\n  const texture2 = createTexture(\n    gl,\n    gl.RGBA8,\n    outputWidth,\n    outputHeight,\n    gl.NEAREST,\n    // @ts-expect-error types are incomplete\n    gl.LINEAR,\n  );\n\n  const frameBuffer1 = gl.createFramebuffer();\n  gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer1);\n  gl.framebufferTexture2D(\n    gl.FRAMEBUFFER,\n    gl.COLOR_ATTACHMENT0,\n    gl.TEXTURE_2D,\n    texture1,\n    0,\n  );\n\n  const frameBuffer2 = gl.createFramebuffer();\n  gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer2);\n  gl.framebufferTexture2D(\n    gl.FRAMEBUFFER,\n    gl.COLOR_ATTACHMENT0,\n    gl.TEXTURE_2D,\n    texture2,\n    0,\n  );\n\n  gl.useProgram(program);\n  gl.uniform1i(personMaskLocation, 1);\n\n  function render() {\n    gl.viewport(0, 0, outputWidth, outputHeight);\n    gl.useProgram(program);\n    gl.uniform1i(inputFrameLocation, 0);\n    gl.activeTexture(gl.TEXTURE1);\n    gl.bindTexture(gl.TEXTURE_2D, personMaskTexture);\n\n    for (let i = 0; i < 3; i++) {\n      gl.uniform2f(texelSizeLocation, 0, texelHeight);\n      gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer1);\n      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n      gl.activeTexture(gl.TEXTURE2);\n      gl.bindTexture(gl.TEXTURE_2D, texture1);\n      gl.uniform1i(inputFrameLocation, 2);\n\n      gl.uniform2f(texelSizeLocation, texelWidth, 0);\n      gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer2);\n      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n      gl.bindTexture(gl.TEXTURE_2D, texture2);\n    }\n  }\n\n  function cleanUp() {\n    gl.deleteFramebuffer(frameBuffer2);\n    gl.deleteFramebuffer(frameBuffer1);\n    gl.deleteTexture(texture2);\n    gl.deleteTexture(texture1);\n    gl.deleteProgram(program);\n    gl.deleteShader(fragmentShader);\n  }\n\n  return {\n    render,\n    cleanUp,\n  };\n}\n\nfunction buildBlendPass(\n  gl: WebGL2RenderingContext,\n  positionBuffer: WebGLBuffer,\n  texCoordBuffer: WebGLBuffer,\n  canvas: HTMLCanvasElement,\n) {\n  const vertexShaderSource = glsl`#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  `;\n\n  const fragmentShaderSource = glsl`#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_blurredInputFrame;\n    uniform vec2 u_coverage;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec3 color = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 blurredColor = texture(u_blurredInputFrame, v_texCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(mix(blurredColor, color, personMask), 1.0);\n    }\n  `;\n\n  const { width: outputWidth, height: outputHeight } = canvas;\n\n  const vertexShader = compileShader(gl, gl.VERTEX_SHADER, vertexShaderSource);\n  const fragmentShader = compileShader(\n    gl,\n    gl.FRAGMENT_SHADER,\n    fragmentShaderSource,\n  );\n  const program = createPipelineStageProgram(\n    gl,\n    vertexShader,\n    fragmentShader,\n    positionBuffer,\n    texCoordBuffer,\n  );\n  const inputFrameLocation = gl.getUniformLocation(program, 'u_inputFrame');\n  const personMaskLocation = gl.getUniformLocation(program, 'u_personMask');\n  const blurredInputFrame = gl.getUniformLocation(\n    program,\n    'u_blurredInputFrame',\n  );\n  const coverageLocation = gl.getUniformLocation(program, 'u_coverage');\n\n  gl.useProgram(program);\n  gl.uniform1i(inputFrameLocation, 0);\n  gl.uniform1i(personMaskLocation, 1);\n  gl.uniform1i(blurredInputFrame, 2);\n  gl.uniform2f(coverageLocation, 0, 1);\n\n  function render() {\n    gl.viewport(0, 0, outputWidth, outputHeight);\n    gl.useProgram(program);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  }\n\n  function updateCoverage(coverage: [number, number]) {\n    gl.useProgram(program);\n    gl.uniform2f(coverageLocation, coverage[0], coverage[1]);\n  }\n\n  function cleanUp() {\n    gl.deleteProgram(program);\n    gl.deleteShader(fragmentShader);\n    gl.deleteShader(vertexShader);\n  }\n\n  return {\n    render,\n    updateCoverage,\n    cleanUp,\n  };\n}\n", "import {\n  compileShader,\n  createPipelineStageProgram,\n  createTexture,\n  glsl,\n} from '../helpers/webglHelper';\n\nexport type BackgroundImageStage = {\n  render(): void;\n  updateCoverage(coverage: [number, number]): void;\n  updateLightWrapping(lightWrapping: number): void;\n  updateBlendMode(blendMode: 'screen' | 'linearDodge'): void;\n  cleanUp(): void;\n};\n\nexport function buildBackgroundImageStage(\n  gl: WebGL2RenderingContext,\n  positionBuffer: WebGLBuffer,\n  texCoordBuffer: WebGLBuffer,\n  personMaskTexture: WebGLTexture,\n  backgroundImage: HTMLImageElement | undefined,\n  canvas: HTMLCanvasElement,\n): BackgroundImageStage {\n  const vertexShaderSource = glsl`#version 300 es\n\n    uniform vec2 u_backgroundScale;\n    uniform vec2 u_backgroundOffset;\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n    out vec2 v_backgroundCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n      v_backgroundCoord = a_texCoord * u_backgroundScale + u_backgroundOffset;\n    }\n  `;\n\n  const fragmentShaderSource = glsl`#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_background;\n    uniform vec2 u_coverage;\n    uniform float u_lightWrapping;\n    uniform float u_blendMode;\n\n    in vec2 v_texCoord;\n    in vec2 v_backgroundCoord;\n\n    out vec4 outColor;\n\n    vec3 screen(vec3 a, vec3 b) {\n      return 1.0 - (1.0 - a) * (1.0 - b);\n    }\n\n    vec3 linearDodge(vec3 a, vec3 b) {\n      return a + b;\n    }\n\n    void main() {\n      vec3 frameColor = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 backgroundColor = texture(u_background, v_backgroundCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      float lightWrapMask = 1.0 - max(0.0, personMask - u_coverage.y) / (1.0 - u_coverage.y);\n      vec3 lightWrap = u_lightWrapping * lightWrapMask * backgroundColor;\n\n      frameColor = u_blendMode * linearDodge(frameColor, lightWrap)\n        + (1.0 - u_blendMode) * screen(frameColor, lightWrap);\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(frameColor * personMask + backgroundColor * (1.0 - personMask), 1.0);\n    }\n  `;\n\n  const { width: outputWidth, height: outputHeight } = canvas;\n  const outputRatio = outputWidth / outputHeight;\n\n  const vertexShader = compileShader(gl, gl.VERTEX_SHADER, vertexShaderSource);\n  const fragmentShader = compileShader(\n    gl,\n    gl.FRAGMENT_SHADER,\n    fragmentShaderSource,\n  );\n  const program = createPipelineStageProgram(\n    gl,\n    vertexShader,\n    fragmentShader,\n    positionBuffer,\n    texCoordBuffer,\n  );\n  const backgroundScaleLocation = gl.getUniformLocation(\n    program,\n    'u_backgroundScale',\n  );\n  const backgroundOffsetLocation = gl.getUniformLocation(\n    program,\n    'u_backgroundOffset',\n  );\n  const inputFrameLocation = gl.getUniformLocation(program, 'u_inputFrame');\n  const personMaskLocation = gl.getUniformLocation(program, 'u_personMask');\n  const backgroundLocation = gl.getUniformLocation(program, 'u_background');\n  const coverageLocation = gl.getUniformLocation(program, 'u_coverage');\n  const lightWrappingLocation = gl.getUniformLocation(\n    program,\n    'u_lightWrapping',\n  );\n  const blendModeLocation = gl.getUniformLocation(program, 'u_blendMode');\n\n  gl.useProgram(program);\n  gl.uniform2f(backgroundScaleLocation, 1, 1);\n  gl.uniform2f(backgroundOffsetLocation, 0, 0);\n  gl.uniform1i(inputFrameLocation, 0);\n  gl.uniform1i(personMaskLocation, 1);\n  gl.uniform2f(coverageLocation, 0, 1);\n  gl.uniform1f(lightWrappingLocation, 0);\n  gl.uniform1f(blendModeLocation, 0);\n\n  let backgroundTexture: WebGLTexture | null = null;\n  // TODO Find a better to handle background being loaded\n  if (backgroundImage?.complete) {\n    updateBackgroundImage(backgroundImage);\n  } else if (backgroundImage) {\n    backgroundImage.onload = () => {\n      updateBackgroundImage(backgroundImage);\n    };\n  }\n\n  function render() {\n    gl.viewport(0, 0, outputWidth, outputHeight);\n    gl.useProgram(program);\n    gl.activeTexture(gl.TEXTURE1);\n    gl.bindTexture(gl.TEXTURE_2D, personMaskTexture);\n    if (backgroundTexture !== null) {\n      gl.activeTexture(gl.TEXTURE2);\n      gl.bindTexture(gl.TEXTURE_2D, backgroundTexture);\n      // TODO Handle correctly the background not loaded yet\n      gl.uniform1i(backgroundLocation, 2);\n    }\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  }\n\n  function updateBackgroundImage(bgImage: HTMLImageElement) {\n    backgroundTexture = createTexture(\n      gl,\n      gl.RGBA8,\n      bgImage.naturalWidth,\n      bgImage.naturalHeight,\n      // @ts-expect-error types are incomplete\n      gl.LINEAR,\n      gl.LINEAR,\n    );\n    gl.texSubImage2D(\n      gl.TEXTURE_2D,\n      0,\n      0,\n      0,\n      bgImage.naturalWidth,\n      bgImage.naturalHeight,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      bgImage,\n    );\n\n    let xOffset = 0;\n    let yOffset = 0;\n    let backgroundWidth = bgImage.naturalWidth;\n    let backgroundHeight = bgImage.naturalHeight;\n    const backgroundRatio = backgroundWidth / backgroundHeight;\n    if (backgroundRatio < outputRatio) {\n      backgroundHeight = backgroundWidth / outputRatio;\n      yOffset = (bgImage.naturalHeight - backgroundHeight) / 2;\n    } else {\n      backgroundWidth = backgroundHeight * outputRatio;\n      xOffset = (bgImage.naturalWidth - backgroundWidth) / 2;\n    }\n\n    const xScale = backgroundWidth / bgImage.naturalWidth;\n    const yScale = backgroundHeight / bgImage.naturalHeight;\n    xOffset /= bgImage.naturalWidth;\n    yOffset /= bgImage.naturalHeight;\n\n    gl.uniform2f(backgroundScaleLocation, xScale, yScale);\n    gl.uniform2f(backgroundOffsetLocation, xOffset, yOffset);\n  }\n\n  function updateCoverage(coverage: [number, number]) {\n    gl.useProgram(program);\n    gl.uniform2f(coverageLocation, coverage[0], coverage[1]);\n  }\n\n  function updateLightWrapping(lightWrapping: number) {\n    gl.useProgram(program);\n    gl.uniform1f(lightWrappingLocation, lightWrapping);\n  }\n\n  function updateBlendMode(blendMode: 'screen' | 'linearDodge') {\n    gl.useProgram(program);\n    gl.uniform1f(blendModeLocation, blendMode === 'screen' ? 0 : 1);\n  }\n\n  function cleanUp() {\n    gl.deleteTexture(backgroundTexture);\n    gl.deleteProgram(program);\n    gl.deleteShader(fragmentShader);\n    gl.deleteShader(vertexShader);\n  }\n\n  return {\n    render,\n    updateCoverage,\n    updateLightWrapping,\n    updateBlendMode,\n    cleanUp,\n  };\n}\n", "import {\n  compileShader,\n  createPipelineStageProgram,\n  glsl,\n} from '../helpers/webglHelper';\nimport { SegmentationParams } from '../segmentation';\n\nexport function buildJointBilateralFilterStage(\n  gl: WebGL2RenderingContext,\n  vertexShader: WebGLShader,\n  positionBuffer: WebGLBuffer,\n  texCoordBuffer: WebGLBuffer,\n  inputTexture: WebGLTexture,\n  outputTexture: WebGLTexture,\n  canvas: HTMLCanvasElement,\n  segmentationConfig: SegmentationParams,\n) {\n  const fragmentShaderSource = glsl`#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_segmentationMask;\n    uniform vec2 u_texelSize;\n    uniform float u_step;\n    uniform float u_radius;\n    uniform float u_offset;\n    uniform float u_sigmaTexel;\n    uniform float u_sigmaColor;\n\n    in vec2 v_texCoord;\n    out vec4 outColor;\n\n    float gaussian(float x, float sigma) {\n      float coeff = -0.5 / (sigma * sigma * 4.0 + 1.0e-6);\n      return exp((x * x) * coeff);\n    }\n\n    void main() {\n      vec2 centerCoord = v_texCoord;\n      vec3 centerColor = texture(u_inputFrame, centerCoord).rgb;\n      float newVal = 0.0;\n\n      float spaceWeight = 0.0;\n      float colorWeight = 0.0;\n      float totalWeight = 0.0;\n\n      // Subsample kernel space.\n      for (float i = -u_radius + u_offset; i <= u_radius; i += u_step) {\n        for (float j = -u_radius + u_offset; j <= u_radius; j += u_step) {\n          vec2 shift = vec2(j, i) * u_texelSize;\n          vec2 coord = vec2(centerCoord + shift);\n          vec3 frameColor = texture(u_inputFrame, coord).rgb;\n          float outVal = texture(u_segmentationMask, coord).a;\n\n          spaceWeight = gaussian(distance(centerCoord, coord), u_sigmaTexel);\n          colorWeight = gaussian(distance(centerColor, frameColor), u_sigmaColor);\n          totalWeight += spaceWeight * colorWeight;\n\n          newVal += spaceWeight * colorWeight * outVal;\n        }\n      }\n      newVal /= totalWeight;\n\n      outColor = vec4(vec3(0.0), newVal);\n    }\n  `;\n\n  const { width: segmentationWidth, height: segmentationHeight } =\n    segmentationConfig;\n  const { width: outputWidth, height: outputHeight } = canvas;\n  const texelWidth = 1 / outputWidth;\n  const texelHeight = 1 / outputHeight;\n\n  const fragmentShader = compileShader(\n    gl,\n    gl.FRAGMENT_SHADER,\n    fragmentShaderSource,\n  );\n  const program = createPipelineStageProgram(\n    gl,\n    vertexShader,\n    fragmentShader,\n    positionBuffer,\n    texCoordBuffer,\n  );\n  const inputFrameLocation = gl.getUniformLocation(program, 'u_inputFrame');\n  const segmentationMaskLocation = gl.getUniformLocation(\n    program,\n    'u_segmentationMask',\n  );\n  const texelSizeLocation = gl.getUniformLocation(program, 'u_texelSize');\n  const stepLocation = gl.getUniformLocation(program, 'u_step');\n  const radiusLocation = gl.getUniformLocation(program, 'u_radius');\n  const offsetLocation = gl.getUniformLocation(program, 'u_offset');\n  const sigmaTexelLocation = gl.getUniformLocation(program, 'u_sigmaTexel');\n  const sigmaColorLocation = gl.getUniformLocation(program, 'u_sigmaColor');\n\n  const frameBuffer = gl.createFramebuffer();\n  gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer);\n  gl.framebufferTexture2D(\n    gl.FRAMEBUFFER,\n    gl.COLOR_ATTACHMENT0,\n    gl.TEXTURE_2D,\n    outputTexture,\n    0,\n  );\n\n  gl.useProgram(program);\n  gl.uniform1i(inputFrameLocation, 0);\n  gl.uniform1i(segmentationMaskLocation, 1);\n  gl.uniform2f(texelSizeLocation, texelWidth, texelHeight);\n\n  // Ensures default values are configured to prevent infinite\n  // loop in fragment shader\n  updateSigmaSpace(0);\n  updateSigmaColor(0);\n\n  function render() {\n    gl.viewport(0, 0, outputWidth, outputHeight);\n    gl.useProgram(program);\n    gl.activeTexture(gl.TEXTURE1);\n    gl.bindTexture(gl.TEXTURE_2D, inputTexture);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  }\n\n  function updateSigmaSpace(sigmaSpace: number) {\n    sigmaSpace *= Math.max(\n      outputWidth / segmentationWidth,\n      outputHeight / segmentationHeight,\n    );\n\n    const kSparsityFactor = 0.66; // Higher is sparser.\n    const step = Math.max(1, Math.sqrt(sigmaSpace) * kSparsityFactor);\n    const radius = sigmaSpace;\n    const offset = step > 1 ? step * 0.5 : 0;\n    const sigmaTexel = Math.max(texelWidth, texelHeight) * sigmaSpace;\n\n    gl.useProgram(program);\n    gl.uniform1f(stepLocation, step);\n    gl.uniform1f(radiusLocation, radius);\n    gl.uniform1f(offsetLocation, offset);\n    gl.uniform1f(sigmaTexelLocation, sigmaTexel);\n  }\n\n  function updateSigmaColor(sigmaColor: number) {\n    gl.useProgram(program);\n    gl.uniform1f(sigmaColorLocation, sigmaColor);\n  }\n\n  function cleanUp() {\n    gl.deleteFramebuffer(frameBuffer);\n    gl.deleteProgram(program);\n    gl.deleteShader(fragmentShader);\n  }\n\n  return { render, updateSigmaSpace, updateSigmaColor, cleanUp };\n}\n", "import { TFLite } from '../tflite';\nimport {\n  compileShader,\n  createPipelineStageProgram,\n  createTexture,\n  glsl,\n  readPixelsAsync,\n} from '../helpers/webglHelper';\nimport { SegmentationParams } from '../segmentation';\n\nexport function buildResizingStage(\n  gl: WebGL2RenderingContext,\n  vertexShader: WebGLShader,\n  positionBuffer: WebGLBuffer,\n  texCoordBuffer: WebGLBuffer,\n  tflite: TFLite,\n  segmentationConfig: SegmentationParams,\n  onError?: (error: any) => void,\n) {\n  const fragmentShaderSource = glsl`#version 300 es\n\n    precision highp float;\n    uniform sampler2D u_inputFrame;\n    in vec2 v_texCoord;\n    out vec4 outColor;\n\n    void main() {\n      outColor = texture(u_inputFrame, v_texCoord);\n    }\n  `;\n\n  // TFLite memory will be accessed as float32\n  const tfliteInputMemoryOffset = tflite._getInputMemoryOffset() / 4;\n\n  const { width: outputWidth, height: outputHeight } = segmentationConfig;\n  const outputPixelCount = outputWidth * outputHeight;\n\n  const fragmentShader = compileShader(\n    gl,\n    gl.FRAGMENT_SHADER,\n    fragmentShaderSource,\n  );\n  const program = createPipelineStageProgram(\n    gl,\n    vertexShader,\n    fragmentShader,\n    positionBuffer,\n    texCoordBuffer,\n  );\n  const inputFrameLocation = gl.getUniformLocation(program, 'u_inputFrame');\n  const outputTexture = createTexture(gl, gl.RGBA8, outputWidth, outputHeight);\n\n  const frameBuffer = gl.createFramebuffer();\n  gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer);\n  gl.framebufferTexture2D(\n    gl.FRAMEBUFFER,\n    gl.COLOR_ATTACHMENT0,\n    gl.TEXTURE_2D,\n    outputTexture,\n    0,\n  );\n  const outputPixels = new Uint8Array(outputPixelCount * 4);\n\n  gl.useProgram(program);\n  gl.uniform1i(inputFrameLocation, 0);\n\n  function render() {\n    gl.viewport(0, 0, outputWidth, outputHeight);\n    gl.useProgram(program);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n    // Downloads pixels asynchronously from GPU while rendering the current frame.\n    // The pixels will be available in the next frame render which results\n    // in offsets in the segmentation output but increases the frame rate.\n    readPixelsAsync(\n      gl,\n      0,\n      0,\n      outputWidth,\n      outputHeight,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      outputPixels,\n    ).catch((error: any) => {\n      onError?.(error);\n    });\n\n    for (let i = 0; i < outputPixelCount; i++) {\n      const tfliteIndex = tfliteInputMemoryOffset + i * 3;\n      const outputIndex = i * 4;\n      tflite.HEAPF32[tfliteIndex] = outputPixels[outputIndex] / 255;\n      tflite.HEAPF32[tfliteIndex + 1] = outputPixels[outputIndex + 1] / 255;\n      tflite.HEAPF32[tfliteIndex + 2] = outputPixels[outputIndex + 2] / 255;\n    }\n  }\n\n  function cleanUp() {\n    gl.deleteFramebuffer(frameBuffer);\n    gl.deleteTexture(outputTexture);\n    gl.deleteProgram(program);\n    gl.deleteShader(fragmentShader);\n  }\n\n  return { render, cleanUp };\n}\n", "import { TFLite } from '../tflite';\nimport {\n  compileShader,\n  createPipelineStageProgram,\n  createTexture,\n  glsl,\n} from '../helpers/webglHelper';\nimport { SegmentationParams } from '../segmentation';\n\nexport function buildSoftmaxStage(\n  gl: WebGL2RenderingContext,\n  vertexShader: WebGLShader,\n  positionBuffer: WebGLBuffer,\n  texCoordBuffer: WebGLBuffer,\n  tflite: TFLite,\n  outputTexture: WebGLTexture,\n  segmentationConfig: SegmentationParams,\n) {\n  const fragmentShaderSource = glsl`#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n    in vec2 v_texCoord;\n    out vec4 outColor;\n\n    void main() {\n      vec2 segmentation = texture(u_inputSegmentation, v_texCoord).rg;\n      float shift = max(segmentation.r, segmentation.g);\n      float backgroundExp = exp(segmentation.r - shift);\n      float personExp = exp(segmentation.g - shift);\n      outColor = vec4(vec3(0.0), personExp / (backgroundExp + personExp));\n    }\n  `;\n\n  // TFLite memory will be accessed as float32\n  const tfliteOutputMemoryOffset = tflite._getOutputMemoryOffset() / 4;\n  const { width: segmentationWidth, height: segmentationHeight } =\n    segmentationConfig;\n\n  const fragmentShader = compileShader(\n    gl,\n    gl.FRAGMENT_SHADER,\n    fragmentShaderSource,\n  );\n  const program = createPipelineStageProgram(\n    gl,\n    vertexShader,\n    fragmentShader,\n    positionBuffer,\n    texCoordBuffer,\n  );\n  const inputLocation = gl.getUniformLocation(program, 'u_inputSegmentation');\n  const inputTexture = createTexture(\n    gl,\n    gl.RG32F,\n    segmentationWidth,\n    segmentationHeight,\n  );\n\n  const frameBuffer = gl.createFramebuffer();\n  gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer);\n  gl.framebufferTexture2D(\n    gl.FRAMEBUFFER,\n    gl.COLOR_ATTACHMENT0,\n    gl.TEXTURE_2D,\n    outputTexture,\n    0,\n  );\n\n  gl.useProgram(program);\n  gl.uniform1i(inputLocation, 1);\n\n  function render() {\n    gl.viewport(0, 0, segmentationWidth, segmentationHeight);\n    gl.useProgram(program);\n    gl.activeTexture(gl.TEXTURE1);\n    gl.bindTexture(gl.TEXTURE_2D, inputTexture);\n    gl.texSubImage2D(\n      gl.TEXTURE_2D,\n      0,\n      0,\n      0,\n      segmentationWidth,\n      segmentationHeight,\n      gl.RG,\n      gl.FLOAT,\n      tflite.HEAPF32,\n      tfliteOutputMemoryOffset,\n    );\n    gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  }\n\n  function cleanUp() {\n    gl.deleteFramebuffer(frameBuffer);\n    gl.deleteTexture(inputTexture);\n    gl.deleteProgram(program);\n    gl.deleteShader(fragmentShader);\n  }\n\n  return { render, cleanUp };\n}\n", "import { TFLite } from '../tflite';\nimport { compileShader, createTexture, glsl } from '../helpers/webglHelper';\nimport {\n  BackgroundBlurStage,\n  buildBackgroundBlurStage,\n} from './backgroundBlurStage';\nimport {\n  BackgroundImageStage,\n  buildBackgroundImageStage,\n} from './backgroundImageStage';\nimport { buildJointBilateralFilterStage } from './jointBilateralFilterStage';\nimport { buildResizingStage } from './resizingStage';\nimport { buildSoftmaxStage } from './softmaxStage';\nimport { SegmentationParams } from '../segmentation';\nimport type { BackgroundBlurLevel, BackgroundFilter } from '../../types';\n\nexport function buildWebGL2Pipeline(\n  videoSource: HTMLVideoElement,\n  backgroundImage: HTMLImageElement | undefined,\n  blurLevel: BackgroundBlurLevel | undefined,\n  backgroundFilter: BackgroundFilter,\n  canvas: HTMLCanvasElement,\n  tflite: TFLite,\n  segmentationConfig: SegmentationParams,\n  onError?: (error: any) => void,\n) {\n  const gl = canvas.getContext('webgl2')!;\n  if (!gl) throw new Error('WebGL2 is not supported');\n  if (gl.isContextLost()) throw new Error('WebGL2 context was lost');\n\n  const { width: frameWidth, height: frameHeight } = videoSource;\n  const { width: segmentationWidth, height: segmentationHeight } =\n    segmentationConfig;\n\n  const vertexShaderSource = glsl`#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n    out vec2 v_texCoord;\n\n    void main() {\n      gl_Position = vec4(a_position, 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  `;\n  const vertexShader = compileShader(gl, gl.VERTEX_SHADER, vertexShaderSource);\n\n  const vertexArray = gl.createVertexArray();\n  gl.bindVertexArray(vertexArray);\n\n  const positionBuffer = gl.createBuffer()!;\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n  gl.bufferData(\n    gl.ARRAY_BUFFER,\n    new Float32Array([-1.0, -1.0, 1.0, -1.0, -1.0, 1.0, 1.0, 1.0]),\n    gl.STATIC_DRAW,\n  );\n\n  const texCoordBuffer = gl.createBuffer()!;\n  gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\n  gl.bufferData(\n    gl.ARRAY_BUFFER,\n    new Float32Array([0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 1.0, 1.0]),\n    gl.STATIC_DRAW,\n  );\n\n  // We don't use texStorage2D here because texImage2D seems faster\n  // to upload video texture than texSubImage2D even though the latter\n  // is supposed to be the recommended way:\n  // https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#use_texstorage_to_create_textures\n  const inputFrameTexture = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, inputFrameTexture);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n  // TODO Rename segmentation and person mask to be more specific\n  const segmentationTexture = createTexture(\n    gl,\n    gl.RGBA8,\n    segmentationWidth,\n    segmentationHeight,\n  )!;\n  const personMaskTexture = createTexture(\n    gl,\n    gl.RGBA8,\n    frameWidth,\n    frameHeight,\n  )!;\n\n  const resizingStage = buildResizingStage(\n    gl,\n    vertexShader,\n    positionBuffer,\n    texCoordBuffer,\n    tflite,\n    segmentationConfig,\n    onError,\n  );\n  const loadSegmentationStage = buildSoftmaxStage(\n    gl,\n    vertexShader,\n    positionBuffer,\n    texCoordBuffer,\n    tflite,\n    segmentationTexture,\n    segmentationConfig,\n  );\n\n  const jointBilateralFilterStage = buildJointBilateralFilterStage(\n    gl,\n    vertexShader,\n    positionBuffer,\n    texCoordBuffer,\n    segmentationTexture,\n    personMaskTexture,\n    canvas,\n    segmentationConfig,\n  );\n  const backgroundStage =\n    backgroundFilter === 'blur'\n      ? buildBackgroundBlurStage(\n          gl,\n          vertexShader,\n          positionBuffer,\n          texCoordBuffer,\n          personMaskTexture,\n          canvas,\n          blurLevel || 'high',\n        )\n      : buildBackgroundImageStage(\n          gl,\n          positionBuffer,\n          texCoordBuffer,\n          personMaskTexture,\n          backgroundImage,\n          canvas,\n        );\n\n  function render() {\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, inputFrameTexture);\n\n    // texImage2D seems faster than texSubImage2D to upload\n    // video texture\n    gl.texImage2D(\n      gl.TEXTURE_2D,\n      0,\n      gl.RGBA,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      videoSource,\n    );\n\n    gl.bindVertexArray(vertexArray);\n\n    resizingStage.render();\n\n    tflite._runInference();\n\n    loadSegmentationStage.render();\n    jointBilateralFilterStage.render();\n    backgroundStage.render();\n  }\n\n  function updatePostProcessingConfig() {\n    jointBilateralFilterStage.updateSigmaSpace(1);\n    jointBilateralFilterStage.updateSigmaColor(0.1);\n\n    if (backgroundFilter === 'image') {\n      const backgroundImageStage = backgroundStage as BackgroundImageStage;\n      backgroundImageStage.updateCoverage([0.5, 0.75]);\n      backgroundImageStage.updateLightWrapping(0.3);\n      backgroundImageStage.updateBlendMode('screen');\n    } else if (backgroundFilter === 'blur') {\n      const backgroundBlurStage = backgroundStage as BackgroundBlurStage;\n      backgroundBlurStage.updateCoverage([0.5, 0.75]);\n    } else {\n      // TODO Handle no background in a separate pipeline path\n      const backgroundImageStage = backgroundStage as BackgroundImageStage;\n      backgroundImageStage.updateCoverage([0, 0.9999]);\n      backgroundImageStage.updateLightWrapping(0);\n    }\n  }\n\n  function cleanUp() {\n    backgroundStage.cleanUp();\n    jointBilateralFilterStage.cleanUp();\n    loadSegmentationStage.cleanUp();\n    resizingStage.cleanUp();\n\n    gl.deleteTexture(personMaskTexture);\n    gl.deleteTexture(segmentationTexture);\n    gl.deleteTexture(inputFrameTexture);\n    gl.deleteBuffer(texCoordBuffer);\n    gl.deleteBuffer(positionBuffer);\n    gl.deleteVertexArray(vertexArray);\n    gl.deleteShader(vertexShader);\n  }\n\n  return { render, updatePostProcessingConfig, cleanUp };\n}\n", "export type SegmentationParams = {\n  width: number;\n  height: number;\n};\n\nexport enum SegmentationLevel {\n  LOW = 'low',\n  HIGH = 'high',\n}\n\nexport const getSegmentationParams = (\n  level: SegmentationLevel,\n): SegmentationParams => {\n  if (level === SegmentationLevel.HIGH) {\n    return { width: 256, height: 144 };\n  }\n  return { width: 160, height: 96 };\n};\n", "import { WorkerTimer } from '@stream-io/worker-timer';\nimport { TFLite } from './tflite';\nimport { buildWebGL2Pipeline } from './webgl2/webgl2Pipeline';\nimport { getSegmentationParams, SegmentationLevel } from './segmentation';\nimport { BackgroundBlurLevel, BackgroundFilter } from '../types';\n\nexport type Renderer = {\n  /**\n   * Disposes of the renderer.\n   */\n  dispose: () => void;\n};\n\nexport function createRenderer(\n  tflite: TFLite,\n  videoSource: HTMLVideoElement,\n  targetCanvas: HTMLCanvasElement,\n  options: {\n    backgroundFilter: BackgroundFilter;\n    segmentationLevel?: SegmentationLevel;\n    backgroundImage?: HTMLImageElement;\n    backgroundBlurLevel?: BackgroundBlurLevel;\n    fps?: number;\n  },\n  onError?: (error: any) => void,\n): Renderer {\n  const {\n    backgroundFilter,\n    backgroundImage,\n    backgroundBlurLevel,\n    segmentationLevel = SegmentationLevel.HIGH,\n    fps = 30,\n  } = options;\n  if (backgroundFilter === 'image' && !backgroundImage) {\n    throw new Error(\n      `backgroundImage element is required when backgroundFilter is image`,\n    );\n  }\n\n  const pipeline = buildWebGL2Pipeline(\n    videoSource,\n    backgroundImage,\n    backgroundBlurLevel,\n    backgroundFilter,\n    targetCanvas,\n    tflite,\n    getSegmentationParams(segmentationLevel),\n  );\n\n  const timers = new WorkerTimer({ useWorker: true });\n  const id = timers.setInterval(\n    () => {\n      try {\n        pipeline.render();\n\n        if (backgroundFilter === 'image') {\n          pipeline.updatePostProcessingConfig();\n        }\n      } catch (error) {\n        onError?.(error);\n      }\n    },\n    Math.floor(1000 / (fps <= 0 ? 30 : fps)),\n  );\n\n  return {\n    dispose: () => {\n      pipeline.cleanUp();\n      timers.clearInterval(id);\n      timers.destroy();\n    },\n  };\n}\n", "export const createTFLiteSIMDModule = (__Module) => {\n  __Module = __Module || {};\n\n  var _scriptDir =\n    typeof document !== 'undefined' && document.currentScript\n      ? document.currentScript.src\n      : undefined;\n\n  var Module = typeof __Module != 'undefined' ? __Module : {};\n  var readyPromiseResolve, readyPromiseReject;\n  Module['ready'] = new Promise(function (resolve, reject) {\n    readyPromiseResolve = resolve;\n    readyPromiseReject = reject;\n  });\n  var moduleOverrides = Object.assign({}, Module);\n  var arguments_ = [];\n  var thisProgram = './this.program';\n  var quit_ = (status, toThrow) => {\n    throw toThrow;\n  };\n  var ENVIRONMENT_IS_WEB = true;\n  var ENVIRONMENT_IS_WORKER = false;\n  var scriptDirectory = '';\n\n  function locateFile(path) {\n    if (Module['locateFile']) {\n      return Module['locateFile'](path, scriptDirectory);\n    }\n    return scriptDirectory + path;\n  }\n\n  var read_, readAsync, readBinary, setWindowTitle;\n  if (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER) {\n    if (ENVIRONMENT_IS_WORKER) {\n      // eslint-disable-next-line no-restricted-globals\n      scriptDirectory = self.location.href;\n    } else if (typeof document != 'undefined' && document.currentScript) {\n      scriptDirectory = document.currentScript.src;\n    }\n    if (_scriptDir) {\n      scriptDirectory = _scriptDir;\n    }\n    if (scriptDirectory.indexOf('blob:') !== 0) {\n      scriptDirectory = scriptDirectory.substr(\n        0,\n        scriptDirectory.replace(/[?#].*/, '').lastIndexOf('/') + 1,\n      );\n    } else {\n      scriptDirectory = '';\n    }\n    {\n      read_ = (url) => {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', url, false);\n        xhr.send(null);\n        return xhr.responseText;\n      };\n      if (ENVIRONMENT_IS_WORKER) {\n        readBinary = (url) => {\n          var xhr = new XMLHttpRequest();\n          xhr.open('GET', url, false);\n          xhr.responseType = 'arraybuffer';\n          xhr.send(null);\n          return new Uint8Array(xhr.response);\n        };\n      }\n      readAsync = (url, onload, onerror) => {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', url, true);\n        xhr.responseType = 'arraybuffer';\n        xhr.onload = () => {\n          if (xhr.status == 200 || (xhr.status == 0 && xhr.response)) {\n            onload(xhr.response);\n            return;\n          }\n          onerror();\n        };\n        xhr.onerror = onerror;\n        xhr.send(null);\n      };\n    }\n    setWindowTitle = (title) => (document.title = title);\n  } else {\n  }\n  var out = Module['print'] || console.log.bind(console);\n  var err = Module['printErr'] || console.warn.bind(console);\n  Object.assign(Module, moduleOverrides);\n  moduleOverrides = null;\n  if (Module['arguments']) arguments_ = Module['arguments'];\n  if (Module['thisProgram']) thisProgram = Module['thisProgram'];\n  if (Module['quit']) quit_ = Module['quit'];\n  var POINTER_SIZE = 4;\n  var wasmBinary;\n  if (Module['wasmBinary']) wasmBinary = Module['wasmBinary'];\n  var noExitRuntime = Module['noExitRuntime'] || true;\n  if (typeof WebAssembly != 'object') {\n    abort('no native wasm support detected');\n  }\n  var wasmMemory;\n  var ABORT = false;\n  var EXITSTATUS;\n\n  function assert(condition, text) {\n    if (!condition) {\n      abort(text);\n    }\n  }\n\n  var UTF8Decoder =\n    typeof TextDecoder != 'undefined' ? new TextDecoder('utf8') : undefined;\n\n  function UTF8ArrayToString(heapOrArray, idx, maxBytesToRead) {\n    var endIdx = idx + maxBytesToRead;\n    var endPtr = idx;\n    while (heapOrArray[endPtr] && !(endPtr >= endIdx)) ++endPtr;\n    if (endPtr - idx > 16 && heapOrArray.buffer && UTF8Decoder) {\n      return UTF8Decoder.decode(heapOrArray.subarray(idx, endPtr));\n    }\n    var str = '';\n    while (idx < endPtr) {\n      var u0 = heapOrArray[idx++];\n      if (!(u0 & 128)) {\n        str += String.fromCharCode(u0);\n        continue;\n      }\n      var u1 = heapOrArray[idx++] & 63;\n      if ((u0 & 224) == 192) {\n        str += String.fromCharCode(((u0 & 31) << 6) | u1);\n        continue;\n      }\n      var u2 = heapOrArray[idx++] & 63;\n      if ((u0 & 240) == 224) {\n        u0 = ((u0 & 15) << 12) | (u1 << 6) | u2;\n      } else {\n        u0 =\n          ((u0 & 7) << 18) | (u1 << 12) | (u2 << 6) | (heapOrArray[idx++] & 63);\n      }\n      if (u0 < 65536) {\n        str += String.fromCharCode(u0);\n      } else {\n        var ch = u0 - 65536;\n        str += String.fromCharCode(55296 | (ch >> 10), 56320 | (ch & 1023));\n      }\n    }\n    return str;\n  }\n\n  function UTF8ToString(ptr, maxBytesToRead) {\n    return ptr ? UTF8ArrayToString(HEAPU8, ptr, maxBytesToRead) : '';\n  }\n\n  function stringToUTF8Array(str, heap, outIdx, maxBytesToWrite) {\n    if (!(maxBytesToWrite > 0)) return 0;\n    var startIdx = outIdx;\n    var endIdx = outIdx + maxBytesToWrite - 1;\n    for (var i = 0; i < str.length; ++i) {\n      var u = str.charCodeAt(i);\n      if (u >= 55296 && u <= 57343) {\n        var u1 = str.charCodeAt(++i);\n        u = (65536 + ((u & 1023) << 10)) | (u1 & 1023);\n      }\n      if (u <= 127) {\n        if (outIdx >= endIdx) break;\n        heap[outIdx++] = u;\n      } else if (u <= 2047) {\n        if (outIdx + 1 >= endIdx) break;\n        heap[outIdx++] = 192 | (u >> 6);\n        heap[outIdx++] = 128 | (u & 63);\n      } else if (u <= 65535) {\n        if (outIdx + 2 >= endIdx) break;\n        heap[outIdx++] = 224 | (u >> 12);\n        heap[outIdx++] = 128 | ((u >> 6) & 63);\n        heap[outIdx++] = 128 | (u & 63);\n      } else {\n        if (outIdx + 3 >= endIdx) break;\n        heap[outIdx++] = 240 | (u >> 18);\n        heap[outIdx++] = 128 | ((u >> 12) & 63);\n        heap[outIdx++] = 128 | ((u >> 6) & 63);\n        heap[outIdx++] = 128 | (u & 63);\n      }\n    }\n    heap[outIdx] = 0;\n    return outIdx - startIdx;\n  }\n\n  var buffer, HEAP8, HEAPU8, HEAP16, HEAPU16, HEAP32, HEAPU32, HEAPF32, HEAPF64;\n\n  function updateGlobalBufferAndViews(buf) {\n    buffer = buf;\n    Module['HEAP8'] = HEAP8 = new Int8Array(buf);\n    Module['HEAP16'] = HEAP16 = new Int16Array(buf);\n    Module['HEAP32'] = HEAP32 = new Int32Array(buf);\n    Module['HEAPU8'] = HEAPU8 = new Uint8Array(buf);\n    Module['HEAPU16'] = HEAPU16 = new Uint16Array(buf);\n    Module['HEAPU32'] = HEAPU32 = new Uint32Array(buf);\n    Module['HEAPF32'] = HEAPF32 = new Float32Array(buf);\n    Module['HEAPF64'] = HEAPF64 = new Float64Array(buf);\n  }\n\n  var INITIAL_MEMORY = Module['INITIAL_MEMORY'] || 16777216;\n  var wasmTable;\n  var __ATPRERUN__ = [];\n  var __ATINIT__ = [];\n  var __ATPOSTRUN__ = [];\n  var runtimeInitialized = false;\n\n  function keepRuntimeAlive() {\n    return noExitRuntime;\n  }\n\n  function preRun() {\n    if (Module['preRun']) {\n      if (typeof Module['preRun'] == 'function')\n        Module['preRun'] = [Module['preRun']];\n      while (Module['preRun'].length) {\n        addOnPreRun(Module['preRun'].shift());\n      }\n    }\n    callRuntimeCallbacks(__ATPRERUN__);\n  }\n\n  function initRuntime() {\n    runtimeInitialized = true;\n    callRuntimeCallbacks(__ATINIT__);\n  }\n\n  function postRun() {\n    if (Module['postRun']) {\n      if (typeof Module['postRun'] == 'function')\n        Module['postRun'] = [Module['postRun']];\n      while (Module['postRun'].length) {\n        addOnPostRun(Module['postRun'].shift());\n      }\n    }\n    callRuntimeCallbacks(__ATPOSTRUN__);\n  }\n\n  function addOnPreRun(cb) {\n    __ATPRERUN__.unshift(cb);\n  }\n\n  function addOnInit(cb) {\n    __ATINIT__.unshift(cb);\n  }\n\n  function addOnPostRun(cb) {\n    __ATPOSTRUN__.unshift(cb);\n  }\n\n  var runDependencies = 0;\n  var runDependencyWatcher = null;\n  var dependenciesFulfilled = null;\n\n  function addRunDependency(id) {\n    runDependencies++;\n    if (Module['monitorRunDependencies']) {\n      Module['monitorRunDependencies'](runDependencies);\n    }\n  }\n\n  function removeRunDependency(id) {\n    runDependencies--;\n    if (Module['monitorRunDependencies']) {\n      Module['monitorRunDependencies'](runDependencies);\n    }\n    if (runDependencies == 0) {\n      if (runDependencyWatcher !== null) {\n        clearInterval(runDependencyWatcher);\n        runDependencyWatcher = null;\n      }\n      if (dependenciesFulfilled) {\n        var callback = dependenciesFulfilled;\n        dependenciesFulfilled = null;\n        callback();\n      }\n    }\n  }\n\n  function abort(what) {\n    {\n      if (Module['onAbort']) {\n        Module['onAbort'](what);\n      }\n    }\n    what = 'Aborted(' + what + ')';\n    err(what);\n    ABORT = true;\n    EXITSTATUS = 1;\n    what += '. Build with -sASSERTIONS for more info.';\n    var e = new WebAssembly.RuntimeError(what);\n    readyPromiseReject(e);\n    throw e;\n  }\n\n  var dataURIPrefix = 'data:application/octet-stream;base64,';\n\n  function isDataURI(filename) {\n    return filename.startsWith(dataURIPrefix);\n  }\n\n  var wasmBinaryFile;\n  wasmBinaryFile = 'tflite-simd.wasm';\n  if (!isDataURI(wasmBinaryFile)) {\n    wasmBinaryFile = locateFile(wasmBinaryFile);\n  }\n\n  function getBinary(file) {\n    try {\n      if (file == wasmBinaryFile && wasmBinary) {\n        return new Uint8Array(wasmBinary);\n      }\n      if (readBinary) {\n        return readBinary(file);\n      }\n      throw 'both async and sync fetching of the wasm failed';\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n    } catch (err) {\n      abort(err);\n    }\n  }\n\n  function getBinaryPromise() {\n    if (!wasmBinary && (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER)) {\n      if (typeof fetch == 'function') {\n        return fetch(wasmBinaryFile, { credentials: 'same-origin' })\n          .then(function (response) {\n            if (!response['ok']) {\n              throw (\n                \"failed to load wasm binary file at '\" + wasmBinaryFile + \"'\"\n              );\n            }\n            return response['arrayBuffer']();\n          })\n          .catch(function () {\n            return getBinary(wasmBinaryFile);\n          });\n      }\n    }\n    return Promise.resolve().then(function () {\n      return getBinary(wasmBinaryFile);\n    });\n  }\n\n  function createWasm() {\n    var info = {\n      env: asmLibraryArg,\n      wasi_snapshot_preview1: asmLibraryArg,\n    };\n\n    function receiveInstance(instance, module) {\n      var exports = instance.exports;\n      Module['asm'] = exports;\n      wasmMemory = Module['asm']['memory'];\n      updateGlobalBufferAndViews(wasmMemory.buffer);\n      wasmTable = Module['asm']['__indirect_function_table'];\n      addOnInit(Module['asm']['__wasm_call_ctors']);\n      removeRunDependency('wasm-instantiate');\n    }\n\n    addRunDependency('wasm-instantiate');\n\n    function receiveInstantiationResult(result) {\n      receiveInstance(result['instance']);\n    }\n\n    function instantiateArrayBuffer(receiver) {\n      return getBinaryPromise()\n        .then(function (binary) {\n          return WebAssembly.instantiate(binary, info);\n        })\n        .then(function (instance) {\n          return instance;\n        })\n        .then(receiver, function (reason) {\n          err('failed to asynchronously prepare wasm: ' + reason);\n          abort(reason);\n        });\n    }\n\n    function instantiateAsync() {\n      if (\n        !wasmBinary &&\n        typeof WebAssembly.instantiateStreaming == 'function' &&\n        !isDataURI(wasmBinaryFile) &&\n        typeof fetch == 'function'\n      ) {\n        return fetch(wasmBinaryFile, { credentials: 'same-origin' }).then(\n          function (response) {\n            var result = WebAssembly.instantiateStreaming(response, info);\n            return result.then(receiveInstantiationResult, function (reason) {\n              err('wasm streaming compile failed: ' + reason);\n              err('falling back to ArrayBuffer instantiation');\n              return instantiateArrayBuffer(receiveInstantiationResult);\n            });\n          },\n        );\n      } else {\n        return instantiateArrayBuffer(receiveInstantiationResult);\n      }\n    }\n\n    if (Module['instantiateWasm']) {\n      try {\n        var exports = Module['instantiateWasm'](info, receiveInstance);\n        return exports;\n      } catch (e) {\n        err('Module.instantiateWasm callback failed with error: ' + e);\n        readyPromiseReject(e);\n      }\n    }\n    instantiateAsync().catch(readyPromiseReject);\n    return {};\n  }\n\n  var tempDouble;\n  var tempI64;\n\n  function ExitStatus(status) {\n    this.name = 'ExitStatus';\n    this.message = 'Program terminated with exit(' + status + ')';\n    this.status = status;\n  }\n\n  function callRuntimeCallbacks(callbacks) {\n    while (callbacks.length > 0) {\n      callbacks.shift()(Module);\n    }\n  }\n\n  function demangle(func) {\n    return func;\n  }\n\n  function demangleAll(text) {\n    var regex = /\\b_Z[\\w\\d_]+/g;\n    return text.replace(regex, function (x) {\n      var y = demangle(x);\n      return x === y ? x : y + ' [' + x + ']';\n    });\n  }\n\n  function jsStackTrace() {\n    var error = new Error();\n    if (!error.stack) {\n      try {\n        throw new Error();\n      } catch (e) {\n        error = e;\n      }\n      if (!error.stack) {\n        return '(no stack trace available)';\n      }\n    }\n    return error.stack.toString();\n  }\n\n  function __dlinit(main_dso_handle) {}\n\n  var dlopenMissingError =\n    'To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking';\n\n  function __dlopen_js(filename, flag) {\n    abort(dlopenMissingError);\n  }\n\n  function __dlsym_js(handle, symbol) {\n    abort(dlopenMissingError);\n  }\n\n  var nowIsMonotonic = true;\n\n  function __emscripten_get_now_is_monotonic() {\n    return nowIsMonotonic;\n  }\n\n  var SYSCALLS = {\n    varargs: undefined,\n    get: function () {\n      SYSCALLS.varargs += 4;\n      var ret = HEAP32[(SYSCALLS.varargs - 4) >> 2];\n      return ret;\n    },\n    getStr: function (ptr) {\n      var ret = UTF8ToString(ptr);\n      return ret;\n    },\n  };\n\n  function __mmap_js(len, prot, flags, fd, off, allocated) {\n    return -52;\n  }\n\n  function __munmap_js(addr, len, prot, flags, fd, offset) {}\n\n  function _abort() {\n    abort('');\n  }\n\n  function _emscripten_date_now() {\n    return Date.now();\n  }\n\n  function getHeapMax() {\n    return 2147483648;\n  }\n\n  function _emscripten_get_heap_max() {\n    return getHeapMax();\n  }\n\n  var _emscripten_get_now;\n  _emscripten_get_now = () => performance.now();\n\n  function _emscripten_memcpy_big(dest, src, num) {\n    HEAPU8.copyWithin(dest, src, src + num);\n  }\n\n  function emscripten_realloc_buffer(size) {\n    try {\n      wasmMemory.grow((size - buffer.byteLength + 65535) >>> 16);\n      updateGlobalBufferAndViews(wasmMemory.buffer);\n      return 1;\n    } catch (e) {}\n  }\n\n  function _emscripten_resize_heap(requestedSize) {\n    var oldSize = HEAPU8.length;\n    requestedSize = requestedSize >>> 0;\n    var maxHeapSize = getHeapMax();\n    if (requestedSize > maxHeapSize) {\n      return false;\n    }\n    let alignUp = (x, multiple) => x + ((multiple - (x % multiple)) % multiple);\n    for (var cutDown = 1; cutDown <= 4; cutDown *= 2) {\n      var overGrownHeapSize = oldSize * (1 + 0.2 / cutDown);\n      overGrownHeapSize = Math.min(\n        overGrownHeapSize,\n        requestedSize + 100663296,\n      );\n      var newSize = Math.min(\n        maxHeapSize,\n        alignUp(Math.max(requestedSize, overGrownHeapSize), 65536),\n      );\n      var replacement = emscripten_realloc_buffer(newSize);\n      if (replacement) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  var ENV = {};\n\n  function getExecutableName() {\n    return thisProgram || './this.program';\n  }\n\n  function getEnvStrings() {\n    if (!getEnvStrings.strings) {\n      var lang =\n        (\n          (typeof navigator == 'object' &&\n            navigator.languages &&\n            navigator.languages[0]) ||\n          'C'\n        ).replace('-', '_') + '.UTF-8';\n      var env = {\n        USER: 'web_user',\n        LOGNAME: 'web_user',\n        PATH: '/',\n        PWD: '/',\n        HOME: '/home/web_user',\n        LANG: lang,\n        _: getExecutableName(),\n      };\n      for (var x in ENV) {\n        if (ENV[x] === undefined) delete env[x];\n        else env[x] = ENV[x];\n      }\n      var strings = [];\n      for (var x in env) {\n        strings.push(x + '=' + env[x]);\n      }\n      getEnvStrings.strings = strings;\n    }\n    return getEnvStrings.strings;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  function writeAsciiToMemory(str, buffer, dontAddNull) {\n    for (var i = 0; i < str.length; ++i) {\n      HEAP8[buffer++ >> 0] = str.charCodeAt(i);\n    }\n    if (!dontAddNull) HEAP8[buffer >> 0] = 0;\n  }\n\n  function _environ_get(__environ, environ_buf) {\n    var bufSize = 0;\n    getEnvStrings().forEach(function (string, i) {\n      var ptr = environ_buf + bufSize;\n      HEAPU32[(__environ + i * 4) >> 2] = ptr;\n      writeAsciiToMemory(string, ptr);\n      bufSize += string.length + 1;\n    });\n    return 0;\n  }\n\n  function _environ_sizes_get(penviron_count, penviron_buf_size) {\n    var strings = getEnvStrings();\n    HEAPU32[penviron_count >> 2] = strings.length;\n    var bufSize = 0;\n    strings.forEach(function (string) {\n      bufSize += string.length + 1;\n    });\n    HEAPU32[penviron_buf_size >> 2] = bufSize;\n    return 0;\n  }\n\n  function _proc_exit(code) {\n    EXITSTATUS = code;\n    if (!keepRuntimeAlive()) {\n      if (Module['onExit']) Module['onExit'](code);\n      ABORT = true;\n    }\n    quit_(code, new ExitStatus(code));\n  }\n\n  function exitJS(status, implicit) {\n    EXITSTATUS = status;\n    _proc_exit(status);\n  }\n\n  var _exit = exitJS;\n\n  function _fd_close(fd) {\n    return 52;\n  }\n\n  function _fd_seek(fd, offset_low, offset_high, whence, newOffset) {\n    return 70;\n  }\n\n  var printCharBuffers = [null, [], []];\n\n  function printChar(stream, curr) {\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    var buffer = printCharBuffers[stream];\n    if (curr === 0 || curr === 10) {\n      (stream === 1 ? out : err)(UTF8ArrayToString(buffer, 0));\n      buffer.length = 0;\n    } else {\n      buffer.push(curr);\n    }\n  }\n\n  function _fd_write(fd, iov, iovcnt, pnum) {\n    var num = 0;\n    for (var i = 0; i < iovcnt; i++) {\n      var ptr = HEAPU32[iov >> 2];\n      var len = HEAPU32[(iov + 4) >> 2];\n      iov += 8;\n      for (var j = 0; j < len; j++) {\n        printChar(fd, HEAPU8[ptr + j]);\n      }\n      num += len;\n    }\n    HEAPU32[pnum >> 2] = num;\n    return 0;\n  }\n\n  function getRandomDevice() {\n    if (\n      typeof crypto == 'object' &&\n      typeof crypto['getRandomValues'] == 'function'\n    ) {\n      var randomBuffer = new Uint8Array(1);\n      return () => {\n        crypto.getRandomValues(randomBuffer);\n        return randomBuffer[0];\n      };\n    } else return () => abort('randomDevice');\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  function _getentropy(buffer, size) {\n    if (!_getentropy.randomDevice) {\n      _getentropy.randomDevice = getRandomDevice();\n    }\n    for (var i = 0; i < size; i++) {\n      HEAP8[(buffer + i) >> 0] = _getentropy.randomDevice();\n    }\n    return 0;\n  }\n\n  var asmLibraryArg = {\n    _dlinit: __dlinit,\n    _dlopen_js: __dlopen_js,\n    _dlsym_js: __dlsym_js,\n    _emscripten_get_now_is_monotonic: __emscripten_get_now_is_monotonic,\n    _mmap_js: __mmap_js,\n    _munmap_js: __munmap_js,\n    abort: _abort,\n    emscripten_date_now: _emscripten_date_now,\n    emscripten_get_heap_max: _emscripten_get_heap_max,\n    emscripten_get_now: _emscripten_get_now,\n    emscripten_memcpy_big: _emscripten_memcpy_big,\n    emscripten_resize_heap: _emscripten_resize_heap,\n    environ_get: _environ_get,\n    environ_sizes_get: _environ_sizes_get,\n    exit: _exit,\n    fd_close: _fd_close,\n    fd_seek: _fd_seek,\n    fd_write: _fd_write,\n    getentropy: _getentropy,\n  };\n  var asm = createWasm();\n  var ___wasm_call_ctors = (Module['___wasm_call_ctors'] = function () {\n    return (___wasm_call_ctors = Module['___wasm_call_ctors'] =\n      Module['asm']['__wasm_call_ctors']).apply(null, arguments);\n  });\n  var _getModelBufferMemoryOffset = (Module['_getModelBufferMemoryOffset'] =\n    function () {\n      return (_getModelBufferMemoryOffset = Module[\n        '_getModelBufferMemoryOffset'\n      ] =\n        Module['asm']['getModelBufferMemoryOffset']).apply(null, arguments);\n    });\n  var _getInputMemoryOffset = (Module['_getInputMemoryOffset'] = function () {\n    return (_getInputMemoryOffset = Module['_getInputMemoryOffset'] =\n      Module['asm']['getInputMemoryOffset']).apply(null, arguments);\n  });\n  var _getInputHeight = (Module['_getInputHeight'] = function () {\n    return (_getInputHeight = Module['_getInputHeight'] =\n      Module['asm']['getInputHeight']).apply(null, arguments);\n  });\n  var _getInputWidth = (Module['_getInputWidth'] = function () {\n    return (_getInputWidth = Module['_getInputWidth'] =\n      Module['asm']['getInputWidth']).apply(null, arguments);\n  });\n  var _getInputChannelCount = (Module['_getInputChannelCount'] = function () {\n    return (_getInputChannelCount = Module['_getInputChannelCount'] =\n      Module['asm']['getInputChannelCount']).apply(null, arguments);\n  });\n  var _getOutputMemoryOffset = (Module['_getOutputMemoryOffset'] = function () {\n    return (_getOutputMemoryOffset = Module['_getOutputMemoryOffset'] =\n      Module['asm']['getOutputMemoryOffset']).apply(null, arguments);\n  });\n  var _getOutputHeight = (Module['_getOutputHeight'] = function () {\n    return (_getOutputHeight = Module['_getOutputHeight'] =\n      Module['asm']['getOutputHeight']).apply(null, arguments);\n  });\n  var _getOutputWidth = (Module['_getOutputWidth'] = function () {\n    return (_getOutputWidth = Module['_getOutputWidth'] =\n      Module['asm']['getOutputWidth']).apply(null, arguments);\n  });\n  var _getOutputChannelCount = (Module['_getOutputChannelCount'] = function () {\n    return (_getOutputChannelCount = Module['_getOutputChannelCount'] =\n      Module['asm']['getOutputChannelCount']).apply(null, arguments);\n  });\n  var _loadModel = (Module['_loadModel'] = function () {\n    return (_loadModel = Module['_loadModel'] =\n      Module['asm']['loadModel']).apply(null, arguments);\n  });\n  var _runInference = (Module['_runInference'] = function () {\n    return (_runInference = Module['_runInference'] =\n      Module['asm']['runInference']).apply(null, arguments);\n  });\n  var _malloc = (Module['_malloc'] = function () {\n    return (_malloc = Module['_malloc'] = Module['asm']['malloc']).apply(\n      null,\n      arguments,\n    );\n  });\n  var ___errno_location = (Module['___errno_location'] = function () {\n    return (___errno_location = Module['___errno_location'] =\n      Module['asm']['__errno_location']).apply(null, arguments);\n  });\n  var ___dl_seterr = (Module['___dl_seterr'] = function () {\n    return (___dl_seterr = Module['___dl_seterr'] =\n      Module['asm']['__dl_seterr']).apply(null, arguments);\n  });\n  var stackSave = (Module['stackSave'] = function () {\n    return (stackSave = Module['stackSave'] = Module['asm']['stackSave']).apply(\n      null,\n      arguments,\n    );\n  });\n  var stackRestore = (Module['stackRestore'] = function () {\n    return (stackRestore = Module['stackRestore'] =\n      Module['asm']['stackRestore']).apply(null, arguments);\n  });\n  var stackAlloc = (Module['stackAlloc'] = function () {\n    return (stackAlloc = Module['stackAlloc'] =\n      Module['asm']['stackAlloc']).apply(null, arguments);\n  });\n  var dynCall_jjj = (Module['dynCall_jjj'] = function () {\n    return (dynCall_jjj = Module['dynCall_jjj'] =\n      Module['asm']['dynCall_jjj']).apply(null, arguments);\n  });\n  var dynCall_jiii = (Module['dynCall_jiii'] = function () {\n    return (dynCall_jiii = Module['dynCall_jiii'] =\n      Module['asm']['dynCall_jiii']).apply(null, arguments);\n  });\n  var dynCall_iiiijj = (Module['dynCall_iiiijj'] = function () {\n    return (dynCall_iiiijj = Module['dynCall_iiiijj'] =\n      Module['asm']['dynCall_iiiijj']).apply(null, arguments);\n  });\n  var dynCall_viijj = (Module['dynCall_viijj'] = function () {\n    return (dynCall_viijj = Module['dynCall_viijj'] =\n      Module['asm']['dynCall_viijj']).apply(null, arguments);\n  });\n  var dynCall_viiijjj = (Module['dynCall_viiijjj'] = function () {\n    return (dynCall_viiijjj = Module['dynCall_viiijjj'] =\n      Module['asm']['dynCall_viiijjj']).apply(null, arguments);\n  });\n  var dynCall_iijjiiii = (Module['dynCall_iijjiiii'] = function () {\n    return (dynCall_iijjiiii = Module['dynCall_iijjiiii'] =\n      Module['asm']['dynCall_iijjiiii']).apply(null, arguments);\n  });\n  var dynCall_jiji = (Module['dynCall_jiji'] = function () {\n    return (dynCall_jiji = Module['dynCall_jiji'] =\n      Module['asm']['dynCall_jiji']).apply(null, arguments);\n  });\n  var calledRun;\n  dependenciesFulfilled = function runCaller() {\n    if (!calledRun) run();\n    if (!calledRun) dependenciesFulfilled = runCaller;\n  };\n\n  function run(args) {\n    args = args || arguments_;\n    if (runDependencies > 0) {\n      return;\n    }\n    preRun();\n    if (runDependencies > 0) {\n      return;\n    }\n\n    function doRun() {\n      if (calledRun) return;\n      calledRun = true;\n      Module['calledRun'] = true;\n      if (ABORT) return;\n      initRuntime();\n      readyPromiseResolve(Module);\n      if (Module['onRuntimeInitialized']) Module['onRuntimeInitialized']();\n      postRun();\n    }\n\n    if (Module['setStatus']) {\n      Module['setStatus']('Running...');\n      setTimeout(function () {\n        setTimeout(function () {\n          Module['setStatus']('');\n        }, 1);\n        doRun();\n      }, 1);\n    } else {\n      doRun();\n    }\n  }\n\n  if (Module['preInit']) {\n    if (typeof Module['preInit'] == 'function')\n      Module['preInit'] = [Module['preInit']];\n    while (Module['preInit'].length > 0) {\n      Module['preInit'].pop()();\n    }\n  }\n  run();\n\n  return __Module.ready;\n};\n", "export const version = process.env.PKG_VERSION || '0.0.0-development';\nexport const packageName =\n  process.env.PKG_NAME || '@stream-io/video-filters-web';\n", "// @ts-expect-error - module is not declared\nimport { createTFLiteSIMDModule } from './tflite-simd.js';\nimport { packageName, version } from '../version';\n\n// This is a WebAssembly module compiled from the TensorFlow Lite C++ library.\nconst createTFLite = createTFLiteSIMDModule as (opts?: any) => Promise<TFLite>;\n\nexport interface TFLite extends EmscriptenModule {\n  _getModelBufferMemoryOffset(): number;\n  _getInputMemoryOffset(): number;\n  _getInputHeight(): number;\n  _getInputWidth(): number;\n  _getInputChannelCount(): number;\n  _getOutputMemoryOffset(): number;\n  _getOutputHeight(): number;\n  _getOutputWidth(): number;\n  _getOutputChannelCount(): number;\n  _loadModel(bufferSize: number): number;\n  _runInference(): number;\n}\n\nexport const loadTFLite = async (\n  options: {\n    basePath?: string;\n    tfFilePath?: string;\n    modelFilePath?: string;\n  } = {},\n) => {\n  const {\n    basePath = `https://unpkg.com/${packageName}@${version}/tf`,\n    tfFilePath = `${basePath}/tflite/tflite-simd.wasm`,\n    modelFilePath = `${basePath}/models/segm_full_v679.tflite`,\n  } = options;\n\n  const [tfLite, model] = await Promise.all([\n    createTFLite({ locateFile: () => tfFilePath }),\n    fetchModel(modelFilePath),\n  ]);\n\n  const modelBufferOffset = tfLite._getModelBufferMemoryOffset();\n  tfLite.HEAPU8.set(new Uint8Array(model), modelBufferOffset);\n  tfLite._loadModel(model.byteLength);\n\n  return tfLite;\n};\n\nlet lastModelFilePath = '';\nlet modelFileCache: ArrayBuffer | undefined;\nconst fetchModel = async (modelFilePath: string) => {\n  const model =\n    modelFilePath === lastModelFilePath && modelFileCache\n      ? modelFileCache\n      : await fetch(modelFilePath).then((r) => r.arrayBuffer());\n\n  // Cache the model file for future use.\n  modelFileCache = model;\n  lastModelFilePath = modelFilePath;\n  return model;\n};\n", "import { packageName, version } from './version';\n\nlet lastModelFilePath = '';\nlet modelFileCache: ArrayBuffer | undefined;\nexport const loadMediaPipe = async (\n  options: {\n    basePath?: string;\n    modelPath?: string;\n  } = {},\n): Promise<ArrayBuffer> => {\n  const {\n    basePath = `https://unpkg.com/${packageName}@${version}/mediapipe`,\n    modelPath = `${basePath}/models/selfie_segmenter.tflite`,\n  } = options;\n\n  const model =\n    modelPath === lastModelFilePath && modelFileCache\n      ? modelFileCache\n      : await fetch(modelPath).then((r) => r.arrayBuffer());\n\n  modelFileCache = model;\n  lastModelFilePath = modelPath;\n\n  return model;\n};\n", "export type BackgroundSource = {\n  type: string;\n  media?: ImageBitmap | ReadableStream;\n  url: string;\n  video?: HTMLVideoElement;\n  track?: MediaStreamTrack;\n};\nexport type BackgroundFilter = 'blur' | 'image';\nexport type BackgroundBlurLevel = 'low' | 'medium' | 'high' | number;\n\nexport interface SegmenterOptions {\n  backgroundSource?: BackgroundSource | null;\n  bgBlur: number;\n  bgBlurRadius: number;\n  isSelfieMode: boolean;\n}\n/**\n * Static configuration for the processor, defining which background\n * effect should be applied and how it should behave.\n */\nexport interface BackgroundOptions {\n  basePath?: string;\n  modelPath?: string;\n  backgroundFilter?: BackgroundFilter;\n  backgroundBlurLevel?: BackgroundBlurLevel;\n  backgroundImage?: string | undefined;\n}\n\n/**\n * Performance statistics for video processing.\n */\nexport interface PerformanceStats {\n  delay: number;\n  fps: number;\n  timestamp: number;\n}\n\n/**\n * Runtime hooks for handling lifecycle or error events.\n */\nexport interface VideoTrackProcessorHooks {\n  onError?: (error: unknown) => void;\n  onStats?: (stats: PerformanceStats) => void;\n}\n\nexport const BACKGROUND_BLUR_MAP: Record<\n  BackgroundBlurLevel,\n  { bgBlur: number; bgBlurRadius: number }\n> = {\n  low: {\n    bgBlur: 15,\n    bgBlurRadius: 5,\n  },\n  medium: {\n    bgBlur: 20,\n    bgBlurRadius: 7,\n  },\n  high: {\n    bgBlur: 25,\n    bgBlurRadius: 10,\n  },\n};\n", "import { BackgroundSource } from './types';\n\ntype ImageInfo = {\n  type: 'image';\n  texture: WebGLTexture;\n  width: number;\n  height: number;\n  url: string;\n};\n\ntype VideoInfo = {\n  type: 'video';\n  texture: WebGLTexture;\n  url: string;\n  media: ReadableStream;\n  canvas: OffscreenCanvas;\n};\n\ntype ColorInfo = {\n  type: 'color';\n  texture: WebGLTexture;\n  color: readonly [number, number, number, number];\n};\n\ntype BackgroundRenderInfo = ImageInfo | VideoInfo | ColorInfo;\n\nexport class WebGLRenderer {\n  readonly canvas: OffscreenCanvas;\n  readonly gl: WebGL2RenderingContext;\n\n  readonly stateUpdateProgram: WebGLProgram;\n  readonly maskRefineProgram: WebGLProgram;\n  readonly blurProgram: WebGLProgram;\n  readonly blendProgram: WebGLProgram;\n\n  readonly stateUpdateLocations: {\n    position: number;\n    texCoord: number;\n    categoryTexture: WebGLUniformLocation | null;\n    confidenceTexture: WebGLUniformLocation | null;\n    prevStateTexture: WebGLUniformLocation | null;\n    smoothingFactor: WebGLUniformLocation | null;\n    smoothstepMin: WebGLUniformLocation | null;\n    smoothstepMax: WebGLUniformLocation | null;\n    selfieModel: WebGLUniformLocation | null;\n  };\n  readonly maskRefineLocations: {\n    position: number;\n    texCoord: number;\n    maskTexture: WebGLUniformLocation | null;\n    frameTexture: WebGLUniformLocation | null;\n    texelSize: WebGLUniformLocation | null;\n    sigmaSpatial: WebGLUniformLocation | null;\n    sigmaRange: WebGLUniformLocation | null;\n  };\n  readonly blurLocations: {\n    position: number;\n    texCoord: number;\n    image: WebGLUniformLocation | null;\n    texelSize: WebGLUniformLocation | null;\n    sigma: WebGLUniformLocation | null;\n    radiusScale: WebGLUniformLocation | null;\n    personMask: WebGLUniformLocation | null;\n    direction: WebGLUniformLocation | null;\n  };\n  readonly blendLocations: {\n    position: number;\n    texCoord: number;\n    frameTexture: WebGLUniformLocation | null;\n    currentStateTexture: WebGLUniformLocation | null;\n    backgroundTexture: WebGLUniformLocation | null;\n    bgImageDimensions: WebGLUniformLocation | null;\n    canvasDimensions: WebGLUniformLocation | null;\n    borderSmooth: WebGLUniformLocation | null;\n    bgBlur: WebGLUniformLocation | null;\n    bgBlurRadius: WebGLUniformLocation | null;\n    enabled: WebGLUniformLocation | null;\n  };\n  readonly positionBuffer: WebGLBuffer | null;\n  readonly texCoordBuffer: WebGLBuffer | null;\n  readonly storedStateTextures: (WebGLTexture | null)[];\n  readonly fbo: WebGLFramebuffer | null;\n  readonly refineFbo: WebGLFramebuffer | null;\n  readonly refinedMaskTexture: WebGLTexture | null;\n  readonly frameTexture: WebGLTexture | null;\n  readonly blurTexture1: WebGLTexture | null;\n  readonly blurTexture2: WebGLTexture | null;\n  readonly blurFbo1: WebGLFramebuffer | null;\n  readonly blurFbo2: WebGLFramebuffer | null;\n\n  private running = false;\n  private static readonly DEFAULT_BG_COLOR: readonly [\n    number,\n    number,\n    number,\n    number,\n  ] = [33, 150, 243, 255];\n  private currentStateIndex = 0;\n  private backgroundRenderInfo: BackgroundRenderInfo | null = null;\n  private activeBackgroundSourceIdentifier: string | null = null;\n\n  constructor(canvas: OffscreenCanvas) {\n    this.canvas = canvas;\n    const gl = this.canvas.getContext('webgl2', {\n      alpha: false,\n      antialias: false,\n      desynchronized: true,\n    });\n    if (!gl) throw new Error('WebGL2 not supported');\n    this.gl = gl;\n\n    const stateUpdateVertexShaderSource = `attribute vec2 a_position; attribute vec2 a_texCoord; varying vec2 v_texCoord; void main() { gl_Position = vec4(a_position, 0.0, 1.0); v_texCoord = a_texCoord; }`;\n    const stateUpdateFragmentShaderSource = `\n      precision mediump float;\n      varying vec2 v_texCoord;\n      uniform sampler2D u_categoryTexture;\n      uniform sampler2D u_confidenceTexture;\n      uniform sampler2D u_prevStateTexture;\n      uniform float u_smoothingFactor;\n      uniform float u_smoothstepMin;\n      uniform float u_smoothstepMax;\n      uniform int u_selfieModel;\n\n      void main() {\n        vec2 prevCoord = vec2(v_texCoord.x, 1.0 - v_texCoord.y);\n        float categoryValue = texture2D(u_categoryTexture, v_texCoord).r;\n        float confidenceValue = texture2D(u_confidenceTexture, v_texCoord).r;\n\n        if (u_selfieModel == 1) {\n            categoryValue = 1.0 - categoryValue;\n            confidenceValue = 1.0 - confidenceValue;\n        }\n\n        if (categoryValue > 0.0) {\n            categoryValue = 1.0;\n            confidenceValue = 1.0 - confidenceValue;\n        }\n\n        float nonLinearConfidence = smoothstep(u_smoothstepMin, u_smoothstepMax, confidenceValue);\n        float prevCategoryValue = texture2D(u_prevStateTexture, prevCoord).r;\n        float alpha = u_smoothingFactor * nonLinearConfidence;\n        float newCategoryValue = alpha * categoryValue + (1.0 - alpha) * prevCategoryValue;\n\n        gl_FragColor = vec4(newCategoryValue, 0.0, 0.0, 0.0);\n      }\n    `;\n    this.stateUpdateProgram = this.createAndLinkProgram(\n      stateUpdateVertexShaderSource,\n      stateUpdateFragmentShaderSource,\n    );\n    this.stateUpdateLocations = {\n      position: gl.getAttribLocation(this.stateUpdateProgram, 'a_position'),\n      texCoord: gl.getAttribLocation(this.stateUpdateProgram, 'a_texCoord'),\n      categoryTexture: gl.getUniformLocation(\n        this.stateUpdateProgram,\n        'u_categoryTexture',\n      ),\n      confidenceTexture: gl.getUniformLocation(\n        this.stateUpdateProgram,\n        'u_confidenceTexture',\n      ),\n      prevStateTexture: gl.getUniformLocation(\n        this.stateUpdateProgram,\n        'u_prevStateTexture',\n      ),\n      smoothingFactor: gl.getUniformLocation(\n        this.stateUpdateProgram,\n        'u_smoothingFactor',\n      ),\n      smoothstepMin: gl.getUniformLocation(\n        this.stateUpdateProgram,\n        'u_smoothstepMin',\n      ),\n      smoothstepMax: gl.getUniformLocation(\n        this.stateUpdateProgram,\n        'u_smoothstepMax',\n      ),\n      selfieModel: gl.getUniformLocation(\n        this.stateUpdateProgram,\n        'u_selfieModel',\n      ),\n    };\n\n    const maskRefineVertexShaderSource = stateUpdateVertexShaderSource;\n    const maskRefineFragmentShaderSource = `\n      precision mediump float;\n      varying vec2 v_texCoord;\n\n      uniform sampler2D u_maskTexture;\n      uniform sampler2D u_frameTexture;\n      uniform vec2 u_texelSize;\n      uniform float u_sigmaSpatial;\n      uniform float u_sigmaRange;\n\n      void main() {\n        vec2 flippedCoord = v_texCoord;\n        vec3 centerPixelColor = texture2D(u_frameTexture, v_texCoord).rgb;\n        float totalWeight = 0.0;\n        float weightedMaskSum = 0.0;\n\n        for (int offsetX = -2; offsetX <= 2; offsetX++) {\n          for (int offsetY = -2; offsetY <= 2; offsetY++) {\n            vec2 shift = vec2(float(offsetX), float(offsetY)) * u_texelSize;\n            vec2 frameCoord = v_texCoord + shift;\n            vec2 maskCoord = flippedCoord + shift;\n\n            vec3 neighborPixelColor = texture2D(u_frameTexture, frameCoord).rgb;\n            float neighborMaskValue = texture2D(u_maskTexture, maskCoord).r;\n\n            float spatialWeight = exp(-dot(shift, shift) / (2.0 * u_sigmaSpatial * u_sigmaSpatial));\n            vec3 colorDifference = neighborPixelColor - centerPixelColor;\n            float rangeWeight = exp(-(dot(colorDifference, colorDifference)) / (2.0 * u_sigmaRange * u_sigmaRange));\n\n            float combinedWeight = spatialWeight * rangeWeight;\n            weightedMaskSum += neighborMaskValue * combinedWeight;\n            totalWeight += combinedWeight;\n          }\n        }\n\n        float refinedMaskValue = weightedMaskSum / max(totalWeight, 1e-6);\n        gl_FragColor = vec4(refinedMaskValue, refinedMaskValue, refinedMaskValue, 1.0);\n      }\n    `;\n\n    this.maskRefineProgram = this.createAndLinkProgram(\n      maskRefineVertexShaderSource,\n      maskRefineFragmentShaderSource,\n    );\n    this.maskRefineLocations = {\n      position: gl.getAttribLocation(this.maskRefineProgram, 'a_position'),\n      texCoord: gl.getAttribLocation(this.maskRefineProgram, 'a_texCoord'),\n      maskTexture: gl.getUniformLocation(\n        this.maskRefineProgram,\n        'u_maskTexture',\n      ),\n      frameTexture: gl.getUniformLocation(\n        this.maskRefineProgram,\n        'u_frameTexture',\n      ),\n      texelSize: gl.getUniformLocation(this.maskRefineProgram, 'u_texelSize'),\n      sigmaSpatial: gl.getUniformLocation(\n        this.maskRefineProgram,\n        'u_sigmaSpatial',\n      ),\n      sigmaRange: gl.getUniformLocation(this.maskRefineProgram, 'u_sigmaRange'),\n    };\n\n    const blurVertexShaderSource = stateUpdateVertexShaderSource;\n    const blurFragmentShaderSource = `\n      precision highp float;\n      varying vec2 v_texCoord;\n\n      uniform sampler2D u_image;\n      uniform sampler2D u_personMask;\n      uniform vec2 u_texelSize;\n      uniform float u_sigma;\n      uniform float u_radiusScale;\n      uniform vec2 u_direction;\n\n      const int KERNEL_RADIUS = 10;\n\n      float gauss(float x, float s) {\n        return exp(-(x * x) / (2.0 * s * s));\n      }\n\n      void main() {\n        vec2 maskCoord = u_direction.y > 0.5 ? vec2(v_texCoord.x, 1.0 - v_texCoord.y) : v_texCoord;\n        float mCenter = texture2D(u_personMask, maskCoord).r;\n        float wCenter = gauss(0.0, u_sigma);\n        vec4 accum = texture2D(u_image, v_texCoord) * wCenter * (1.0 - mCenter);\n        float weightSum = wCenter * (1.0 - mCenter);\n\n        for (int i = 1; i <= KERNEL_RADIUS; i++) {\n          float f = float(i);\n          float offset = f * u_radiusScale;\n          float w = gauss(offset, u_sigma);\n          vec2 texOffset = u_direction * offset * u_texelSize;\n\n          vec2 uvPlus = v_texCoord + texOffset;\n          vec2 maskCoordPlus = u_direction.y > 0.5 ? vec2(uvPlus.x, 1.0 - uvPlus.y) : uvPlus;\n          float mPlus = texture2D(u_personMask, maskCoordPlus).r;\n          accum += texture2D(u_image, uvPlus) * w * (1.0 - mPlus);\n          weightSum += w * (1.0 - mPlus);\n\n          vec2 uvMinus = v_texCoord - texOffset;\n          vec2 maskCoordMinus = u_direction.y > 0.5 ? vec2(uvMinus.x, 1.0 - uvMinus.y) : uvMinus;\n          float mMinus = texture2D(u_personMask, maskCoordMinus).r;\n          accum += texture2D(u_image, uvMinus) * w * (1.0 - mMinus);\n          weightSum += w * (1.0 - mMinus);\n        }\n\n        vec4 blurred = accum / max(weightSum, 1e-6);\n        gl_FragColor = blurred;\n      }\n    `;\n\n    this.blurProgram = this.createAndLinkProgram(\n      blurVertexShaderSource,\n      blurFragmentShaderSource,\n    );\n    this.blurLocations = {\n      position: gl.getAttribLocation(this.blurProgram, 'a_position'),\n      texCoord: gl.getAttribLocation(this.blurProgram, 'a_texCoord'),\n      image: gl.getUniformLocation(this.blurProgram, 'u_image'),\n      personMask: gl.getUniformLocation(this.blurProgram, 'u_personMask'),\n      texelSize: gl.getUniformLocation(this.blurProgram, 'u_texelSize'),\n      sigma: gl.getUniformLocation(this.blurProgram, 'u_sigma'),\n      radiusScale: gl.getUniformLocation(this.blurProgram, 'u_radiusScale'),\n      direction: gl.getUniformLocation(this.blurProgram, 'u_direction'),\n    };\n\n    const blendVertexShaderSource = stateUpdateVertexShaderSource;\n    const blendFragmentShaderSource = `\n      precision mediump float;\n      varying vec2 v_texCoord;\n\n      uniform sampler2D u_frameTexture;\n      uniform sampler2D u_currentStateTexture;\n      uniform sampler2D u_backgroundTexture;\n      uniform vec2 u_bgImageDimensions;\n      uniform vec2 u_canvasDimensions;\n      uniform float u_borderSmooth;\n      uniform float u_bgBlur;\n      uniform float u_bgBlurRadius;\n      uniform int u_enabled;\n\n      vec4 getMixedFragColor(vec2 bgTexCoord, vec2 categoryCoord, vec2 offset) {\n          vec4 backgroundColor = texture2D(u_backgroundTexture, bgTexCoord + offset);\n          vec4 frameColor = texture2D(u_frameTexture, v_texCoord + offset);\n          float categoryValue = texture2D(u_currentStateTexture, categoryCoord + offset).r;\n          return mix(backgroundColor, frameColor, categoryValue);\n      }\n\n      void main() {\n        if (u_enabled == 0) {\n          gl_FragColor = texture2D(u_frameTexture, v_texCoord);\n          return;\n        }\n\n        vec2 categoryCoord = v_texCoord;\n        float categoryValue = texture2D(u_currentStateTexture, categoryCoord).r;\n\n        float canvasAspect = u_canvasDimensions.x / u_canvasDimensions.y;\n          float bgAspect = u_bgImageDimensions.x / u_bgImageDimensions.y;\n\n          vec2 bgTexCoord = v_texCoord;\n          float scaleX = 1.0;\n          float scaleY = 1.0;\n          float offsetX = 0.0;\n          float offsetY = 0.0;\n\n          if (canvasAspect < bgAspect) {\n              scaleY = 1.0;\n              scaleX = bgAspect / canvasAspect;\n              offsetX = (1.0 - scaleX) / 2.0;\n          } else {\n              scaleX = 1.0;\n              scaleY = canvasAspect / bgAspect;\n              offsetY = (1.0 - scaleY) / 2.0;\n          }\n\n          bgTexCoord = vec2((v_texCoord.x - offsetX) / scaleX, (v_texCoord.y - offsetY) / scaleY);\n          gl_FragColor = getMixedFragColor(bgTexCoord, categoryCoord, vec2(0.0, 0.0));\n    }`;\n\n    this.blendProgram = this.createAndLinkProgram(\n      blendVertexShaderSource,\n      blendFragmentShaderSource,\n    );\n    this.blendLocations = {\n      position: gl.getAttribLocation(this.blendProgram, 'a_position'),\n      texCoord: gl.getAttribLocation(this.blendProgram, 'a_texCoord'),\n      frameTexture: gl.getUniformLocation(this.blendProgram, 'u_frameTexture'),\n      currentStateTexture: gl.getUniformLocation(\n        this.blendProgram,\n        'u_currentStateTexture',\n      ),\n      backgroundTexture: gl.getUniformLocation(\n        this.blendProgram,\n        'u_backgroundTexture',\n      ),\n      bgImageDimensions: gl.getUniformLocation(\n        this.blendProgram,\n        'u_bgImageDimensions',\n      ),\n      canvasDimensions: gl.getUniformLocation(\n        this.blendProgram,\n        'u_canvasDimensions',\n      ),\n      borderSmooth: gl.getUniformLocation(this.blendProgram, 'u_borderSmooth'),\n      bgBlur: gl.getUniformLocation(this.blendProgram, 'u_bgBlur'),\n      bgBlurRadius: gl.getUniformLocation(this.blendProgram, 'u_bgBlurRadius'),\n      enabled: gl.getUniformLocation(this.blendProgram, 'u_enabled'),\n    };\n\n    this.positionBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n    gl.bufferData(\n      gl.ARRAY_BUFFER,\n      new Float32Array([-1, -1, 1, -1, -1, 1, -1, 1, 1, -1, 1, 1]),\n      gl.STATIC_DRAW,\n    );\n\n    this.texCoordBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.texCoordBuffer);\n    gl.bufferData(\n      gl.ARRAY_BUFFER,\n      new Float32Array([0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0]),\n      gl.STATIC_DRAW,\n    );\n\n    this.storedStateTextures = Array.from({ length: 2 }, () => {\n      const tex = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, tex);\n      gl.texImage2D(\n        gl.TEXTURE_2D,\n        0,\n        gl.RGBA,\n        1,\n        1,\n        0,\n        gl.RGBA,\n        gl.UNSIGNED_BYTE,\n        new Uint8Array([0, 0, 0, 255]),\n      );\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n      return tex;\n    });\n    gl.bindTexture(gl.TEXTURE_2D, null);\n\n    this.fbo = gl.createFramebuffer();\n    this.refineFbo = gl.createFramebuffer();\n\n    const refinedTex = gl.createTexture();\n    this.frameTexture = gl.createTexture();\n    if (!refinedTex) throw new Error('Failed to create refined mask texture');\n    gl.bindTexture(gl.TEXTURE_2D, refinedTex);\n    gl.texImage2D(\n      gl.TEXTURE_2D,\n      0,\n      gl.RGBA,\n      1,\n      1,\n      0,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      null,\n    );\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    this.refinedMaskTexture = refinedTex;\n\n    const mkColorTex = () => {\n      const t = gl.createTexture();\n      if (!t) throw new Error('Failed to create blur texture');\n      gl.bindTexture(gl.TEXTURE_2D, t);\n      gl.texImage2D(\n        gl.TEXTURE_2D,\n        0,\n        gl.RGBA,\n        1,\n        1,\n        0,\n        gl.RGBA,\n        gl.UNSIGNED_BYTE,\n        null,\n      );\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n      gl.bindTexture(gl.TEXTURE_2D, null);\n      return t;\n    };\n    this.blurTexture1 = mkColorTex();\n    this.blurTexture2 = mkColorTex();\n\n    const mkFbo = (tex: WebGLTexture | null) => {\n      const fb = gl.createFramebuffer();\n      if (!fb || !tex) throw new Error('Failed to create blur FBO');\n      gl.bindFramebuffer(gl.FRAMEBUFFER, fb);\n      gl.framebufferTexture2D(\n        gl.FRAMEBUFFER,\n        gl.COLOR_ATTACHMENT0,\n        gl.TEXTURE_2D,\n        tex,\n        0,\n      );\n      gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n      return fb;\n    };\n    this.blurFbo1 = mkFbo(this.blurTexture1);\n    this.blurFbo2 = mkFbo(this.blurTexture2);\n\n    this.running = true;\n  }\n\n  private createAndLinkProgram(\n    vsSource: string,\n    fsSource: string,\n  ): WebGLProgram {\n    const vs = this.createShader(this.gl.VERTEX_SHADER, vsSource);\n    const fs = this.createShader(this.gl.FRAGMENT_SHADER, fsSource);\n    const prog = this.gl.createProgram();\n    if (!prog) throw new Error('Failed to create program');\n    this.gl.attachShader(prog, vs);\n    this.gl.attachShader(prog, fs);\n    this.gl.linkProgram(prog);\n    if (!this.gl.getProgramParameter(prog, this.gl.LINK_STATUS)) {\n      console.error('Program link error:', this.gl.getProgramInfoLog(prog));\n      this.gl.deleteProgram(prog);\n      throw new Error('Link fail');\n    }\n    this.gl.detachShader(prog, vs);\n    this.gl.detachShader(prog, fs);\n    this.gl.deleteShader(vs);\n    this.gl.deleteShader(fs);\n    return prog;\n  }\n\n  private createShader(type: number, source: string): WebGLShader {\n    const shader = this.gl.createShader(type);\n    if (!shader) throw new Error(`Failed to create shader type: ${type}`);\n    this.gl.shaderSource(shader, source);\n    this.gl.compileShader(shader);\n    if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\n      console.error('Shader compile error:', this.gl.getShaderInfoLog(shader));\n      this.gl.deleteShader(shader);\n      throw new Error('Failed to compile shader');\n    }\n    return shader;\n  }\n\n  private createColorTexture(\n    r: number,\n    g: number,\n    b: number,\n    a: number,\n  ): {\n    texture: WebGLTexture;\n    color: readonly [number, number, number, number];\n  } {\n    const texture = this.gl.createTexture();\n    if (!texture) throw new Error('Failed to create texture for color');\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n    const pixel = new Uint8Array([r, g, b, a]);\n    this.gl.texImage2D(\n      this.gl.TEXTURE_2D,\n      0,\n      this.gl.RGBA,\n      1,\n      1,\n      0,\n      this.gl.RGBA,\n      this.gl.UNSIGNED_BYTE,\n      pixel,\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_WRAP_S,\n      this.gl.CLAMP_TO_EDGE,\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_WRAP_T,\n      this.gl.CLAMP_TO_EDGE,\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_MIN_FILTER,\n      this.gl.NEAREST,\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_MAG_FILTER,\n      this.gl.NEAREST,\n    );\n    this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n    return { texture, color: [r, g, b, a] as const };\n  }\n\n  private updateBackgroundIfNeeded(newSource?: BackgroundSource | null) {\n    const gl = this.gl;\n    let newIdentifier: string;\n\n    if (!newSource) {\n      const [r, g, b, a] = WebGLRenderer.DEFAULT_BG_COLOR;\n      newIdentifier = `color(${r},${g},${b},${a})`;\n    } else {\n      newIdentifier = newSource.url;\n    }\n\n    if (\n      newIdentifier === this.activeBackgroundSourceIdentifier &&\n      this.backgroundRenderInfo\n    ) {\n      return;\n    }\n\n    if (this.backgroundRenderInfo) {\n      gl.deleteTexture(this.backgroundRenderInfo.texture);\n      this.backgroundRenderInfo = null;\n    }\n    this.activeBackgroundSourceIdentifier = newIdentifier;\n\n    if (!newSource) {\n      const [r, g, b, a] = WebGLRenderer.DEFAULT_BG_COLOR;\n      const colorTexData = this.createColorTexture(r, g, b, a);\n      this.backgroundRenderInfo = {\n        type: 'color',\n        texture: colorTexData.texture,\n        color: colorTexData.color,\n      };\n      this.activeBackgroundSourceIdentifier = `color(${r},${g},${b},${a})`;\n    } else {\n      if (newSource.type === 'image') {\n        const { media, url } = newSource as { media: ImageBitmap; url: string };\n        const texture = this.gl.createTexture();\n        if (!texture) {\n          throw new Error('Failed to create texture object for image.');\n        }\n        this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n        this.gl.texImage2D(\n          this.gl.TEXTURE_2D,\n          0,\n          this.gl.RGBA,\n          this.gl.RGBA,\n          this.gl.UNSIGNED_BYTE,\n          media,\n        );\n        this.gl.texParameteri(\n          this.gl.TEXTURE_2D,\n          this.gl.TEXTURE_WRAP_S,\n          this.gl.CLAMP_TO_EDGE,\n        );\n        this.gl.texParameteri(\n          this.gl.TEXTURE_2D,\n          this.gl.TEXTURE_WRAP_T,\n          this.gl.CLAMP_TO_EDGE,\n        );\n        this.gl.texParameteri(\n          this.gl.TEXTURE_2D,\n          this.gl.TEXTURE_MIN_FILTER,\n          this.gl.LINEAR,\n        );\n        this.gl.texParameteri(\n          this.gl.TEXTURE_2D,\n          this.gl.TEXTURE_MAG_FILTER,\n          this.gl.LINEAR,\n        );\n        this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n\n        this.backgroundRenderInfo = {\n          type: 'image',\n          texture,\n          width: media.width,\n          height: media.height,\n          url,\n        };\n      } else if (newSource.type === 'video') {\n        const { media, url } = newSource as {\n          media: ReadableStream;\n          url: string;\n        };\n\n        const canvas = new OffscreenCanvas(1, 1);\n        const ctx = canvas.getContext('2d');\n        const writer = new WritableStream({\n          write(videoFrame: VideoFrame) {\n            canvas.width = videoFrame.codedWidth;\n            canvas.height = videoFrame.codedHeight;\n            ctx?.drawImage(videoFrame, 0, 0);\n            videoFrame.close();\n          },\n          close() {\n            console.log('[virtual-background] video background close');\n          },\n        });\n        media.pipeTo(writer).catch((err) => {\n          console.error('media.pipeTo(writer) error', err);\n        });\n\n        const texture = this.gl.createTexture();\n        if (!texture) throw new Error('Failed to create texture for video');\n        this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n        this.gl.texImage2D(\n          this.gl.TEXTURE_2D,\n          0,\n          this.gl.RGBA,\n          1,\n          1,\n          0,\n          this.gl.RGBA,\n          this.gl.UNSIGNED_BYTE,\n          null,\n        );\n        this.gl.texParameteri(\n          this.gl.TEXTURE_2D,\n          this.gl.TEXTURE_WRAP_S,\n          this.gl.CLAMP_TO_EDGE,\n        );\n        this.gl.texParameteri(\n          this.gl.TEXTURE_2D,\n          this.gl.TEXTURE_WRAP_T,\n          this.gl.CLAMP_TO_EDGE,\n        );\n        this.gl.texParameteri(\n          this.gl.TEXTURE_2D,\n          this.gl.TEXTURE_MIN_FILTER,\n          this.gl.LINEAR,\n        );\n        this.gl.texParameteri(\n          this.gl.TEXTURE_2D,\n          this.gl.TEXTURE_MAG_FILTER,\n          this.gl.LINEAR,\n        );\n        this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n\n        this.backgroundRenderInfo = {\n          type: 'video',\n          texture,\n          url,\n          media,\n          canvas,\n        };\n      }\n    }\n\n    if (!this.backgroundRenderInfo) {\n      console.error(\n        'Critical: backgroundRenderInfo is null after processing new source. Setting default color.',\n      );\n      const [r, g, b, a] = WebGLRenderer.DEFAULT_BG_COLOR;\n      const colorTexData = this.createColorTexture(r, g, b, a);\n      this.backgroundRenderInfo = {\n        type: 'color',\n        texture: colorTexData.texture,\n        color: colorTexData.color,\n      };\n      this.activeBackgroundSourceIdentifier = `color(${r},${g},${b},${a})`;\n    }\n  }\n\n  public render(\n    videoFrame: VideoFrame,\n    options: {\n      backgroundSource?: BackgroundSource | null;\n      bgBlur: number;\n      bgBlurRadius: number;\n      isSelfieMode: boolean;\n    },\n    categoryTexture?: WebGLTexture,\n    confidenceTexture?: WebGLTexture,\n  ) {\n    if (!this.running) return;\n    const {\n      gl,\n      fbo,\n      frameTexture,\n      storedStateTextures,\n      stateUpdateProgram,\n      stateUpdateLocations,\n      refineFbo,\n      refinedMaskTexture,\n      maskRefineProgram,\n      maskRefineLocations,\n      blendProgram,\n      blendLocations,\n      blurFbo1,\n      blurFbo2,\n      blurTexture1,\n      blurTexture2,\n    } = this;\n\n    const { displayWidth: width, displayHeight: height } = videoFrame;\n    if (this.canvas.width !== width || this.canvas.height !== height) {\n      this.canvas.width = width;\n      this.canvas.height = height;\n    }\n\n    if (!categoryTexture || !confidenceTexture) {\n      gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n      gl.useProgram(blendProgram);\n\n      const frame = gl.createTexture();\n      gl.activeTexture(gl.TEXTURE0);\n      gl.bindTexture(gl.TEXTURE_2D, frame);\n      gl.texImage2D(\n        gl.TEXTURE_2D,\n        0,\n        gl.RGBA,\n        gl.RGBA,\n        gl.UNSIGNED_BYTE,\n        videoFrame,\n      );\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n      gl.uniform1i(blendLocations.frameTexture, 0);\n      gl.uniform1i(blendLocations.enabled, 0);\n\n      gl.enableVertexAttribArray(blendLocations.position);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n      gl.vertexAttribPointer(blendLocations.position, 2, gl.FLOAT, false, 0, 0);\n      gl.enableVertexAttribArray(blendLocations.texCoord);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.texCoordBuffer);\n      gl.vertexAttribPointer(blendLocations.texCoord, 2, gl.FLOAT, false, 0, 0);\n\n      gl.drawArrays(gl.TRIANGLES, 0, 6);\n\n      gl.deleteTexture(frame);\n      gl.activeTexture(gl.TEXTURE0);\n      gl.bindTexture(gl.TEXTURE_2D, null);\n\n      return;\n    }\n\n    const readStateIndex = this.currentStateIndex;\n    const writeStateIndex = (this.currentStateIndex + 1) % 2;\n    const prevStateTexture = storedStateTextures[readStateIndex];\n    const newStateTexture = storedStateTextures[writeStateIndex];\n\n    this.updateBackgroundIfNeeded(options.backgroundSource);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n    gl.framebufferTexture2D(\n      gl.FRAMEBUFFER,\n      gl.COLOR_ATTACHMENT0,\n      gl.TEXTURE_2D,\n      newStateTexture,\n      0,\n    );\n\n    gl.bindTexture(gl.TEXTURE_2D, newStateTexture);\n    gl.texImage2D(\n      gl.TEXTURE_2D,\n      0,\n      gl.RGBA,\n      width,\n      height,\n      0,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      null,\n    );\n\n    gl.viewport(0, 0, width, height);\n    gl.useProgram(stateUpdateProgram);\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, categoryTexture);\n    gl.uniform1i(stateUpdateLocations.categoryTexture, 0);\n    gl.activeTexture(gl.TEXTURE1);\n    gl.bindTexture(gl.TEXTURE_2D, confidenceTexture);\n    gl.uniform1i(stateUpdateLocations.confidenceTexture, 1);\n    gl.activeTexture(gl.TEXTURE2);\n    gl.bindTexture(gl.TEXTURE_2D, prevStateTexture);\n    gl.uniform1i(stateUpdateLocations.prevStateTexture, 2);\n\n    gl.uniform1f(stateUpdateLocations.smoothingFactor, 0.8);\n    gl.uniform1f(stateUpdateLocations.smoothstepMin, 0.6);\n    gl.uniform1f(stateUpdateLocations.smoothstepMax, 0.9);\n\n    gl.uniform1i(\n      stateUpdateLocations.selfieModel,\n      options.isSelfieMode ? 1 : 0,\n    );\n\n    gl.enableVertexAttribArray(stateUpdateLocations.position);\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n    gl.vertexAttribPointer(\n      stateUpdateLocations.position,\n      2,\n      gl.FLOAT,\n      false,\n      0,\n      0,\n    );\n    gl.enableVertexAttribArray(stateUpdateLocations.texCoord);\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.texCoordBuffer);\n    gl.vertexAttribPointer(\n      stateUpdateLocations.texCoord,\n      2,\n      gl.FLOAT,\n      false,\n      0,\n      0,\n    );\n\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, refineFbo);\n    gl.framebufferTexture2D(\n      gl.FRAMEBUFFER,\n      gl.COLOR_ATTACHMENT0,\n      gl.TEXTURE_2D,\n      refinedMaskTexture,\n      0,\n    );\n\n    gl.bindTexture(gl.TEXTURE_2D, refinedMaskTexture);\n    gl.texImage2D(\n      gl.TEXTURE_2D,\n      0,\n      gl.RGBA,\n      width,\n      height,\n      0,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      null,\n    );\n\n    gl.viewport(0, 0, width, height);\n    gl.useProgram(maskRefineProgram);\n\n    gl.enableVertexAttribArray(maskRefineLocations.position);\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n    gl.vertexAttribPointer(\n      maskRefineLocations.position,\n      2,\n      gl.FLOAT,\n      false,\n      0,\n      0,\n    );\n    gl.enableVertexAttribArray(maskRefineLocations.texCoord);\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.texCoordBuffer);\n    gl.vertexAttribPointer(\n      maskRefineLocations.texCoord,\n      2,\n      gl.FLOAT,\n      false,\n      0,\n      0,\n    );\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, newStateTexture);\n    gl.uniform1i(maskRefineLocations.maskTexture, 0);\n\n    gl.activeTexture(gl.TEXTURE1);\n    gl.bindTexture(gl.TEXTURE_2D, frameTexture);\n    gl.texImage2D(\n      gl.TEXTURE_2D,\n      0,\n      gl.RGBA,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      videoFrame,\n    );\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.uniform1i(maskRefineLocations.frameTexture, 1);\n\n    gl.uniform2f(maskRefineLocations.texelSize, 1.0 / width, 1.0 / height);\n    gl.uniform1f(maskRefineLocations.sigmaSpatial, 2.0);\n    gl.uniform1f(maskRefineLocations.sigmaRange, 0.1);\n\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\n\n    gl.disableVertexAttribArray(maskRefineLocations.position);\n    gl.disableVertexAttribArray(maskRefineLocations.texCoord);\n\n    let backgroundTexToUse: WebGLTexture | null;\n    let bgWToSend = width;\n    let bgHToSend = height;\n\n    if (options.bgBlur > 0 && options.bgBlurRadius > 0) {\n      const downscale = 0.5;\n      const blurW = Math.floor(width * downscale);\n      const blurH = Math.floor(height * downscale);\n\n      gl.bindTexture(gl.TEXTURE_2D, blurTexture1);\n      gl.texImage2D(\n        gl.TEXTURE_2D,\n        0,\n        gl.RGBA,\n        blurW,\n        blurH,\n        0,\n        gl.RGBA,\n        gl.UNSIGNED_BYTE,\n        null,\n      );\n      gl.bindTexture(gl.TEXTURE_2D, blurTexture2);\n      gl.texImage2D(\n        gl.TEXTURE_2D,\n        0,\n        gl.RGBA,\n        blurW,\n        blurH,\n        0,\n        gl.RGBA,\n        gl.UNSIGNED_BYTE,\n        null,\n      );\n\n      const KERNEL_RADIUS = 10.0;\n      const radiusScale = Math.max(0.0, options.bgBlurRadius) / KERNEL_RADIUS;\n\n      gl.useProgram(this.blurProgram);\n\n      gl.enableVertexAttribArray(this.blurLocations.position);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n      gl.vertexAttribPointer(\n        this.blurLocations.position,\n        2,\n        gl.FLOAT,\n        false,\n        0,\n        0,\n      );\n      gl.enableVertexAttribArray(this.blurLocations.texCoord);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.texCoordBuffer);\n      gl.vertexAttribPointer(\n        this.blurLocations.texCoord,\n        2,\n        gl.FLOAT,\n        false,\n        0,\n        0,\n      );\n\n      gl.activeTexture(gl.TEXTURE1);\n      gl.bindTexture(gl.TEXTURE_2D, refinedMaskTexture);\n      gl.uniform1i(this.blurLocations.personMask, 1);\n      gl.uniform1f(this.blurLocations.sigma, options.bgBlur * 0.7);\n      gl.uniform1f(this.blurLocations.radiusScale, radiusScale);\n\n      const blurPasses = [\n        {\n          direction: [1.0, 0.0],\n          input: frameTexture,\n          output: blurFbo1,\n          texelSize: [1.0 / width, 1.0 / height],\n        },\n        {\n          direction: [0.0, 1.0],\n          input: blurTexture1,\n          output: blurFbo2,\n          texelSize: [1.0 / blurW, 1.0 / blurH],\n        },\n        {\n          direction: [1.0, 0.0],\n          input: blurTexture2,\n          output: blurFbo1,\n          texelSize: [1.0 / blurW, 1.0 / blurH],\n        },\n        {\n          direction: [0.0, 1.0],\n          input: blurTexture1,\n          output: blurFbo2,\n          texelSize: [1.0 / blurW, 1.0 / blurH],\n        },\n      ];\n\n      for (const pass of blurPasses) {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, pass.output);\n        gl.viewport(0, 0, blurW, blurH);\n\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, pass.input);\n        gl.uniform1i(this.blurLocations.image, 0);\n        gl.uniform2f(\n          this.blurLocations.texelSize,\n          pass.texelSize[0],\n          pass.texelSize[1],\n        );\n        gl.uniform2f(\n          this.blurLocations.direction,\n          pass.direction[0],\n          pass.direction[1],\n        );\n\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\n      }\n\n      backgroundTexToUse = blurTexture2!;\n      bgWToSend = blurW;\n      bgHToSend = blurH;\n    } else if (options.backgroundSource && this.backgroundRenderInfo) {\n      backgroundTexToUse = this.backgroundRenderInfo.texture;\n      if (this.backgroundRenderInfo.type === 'video') {\n        const { canvas } = this.backgroundRenderInfo;\n        bgWToSend = canvas.width || width;\n        bgHToSend = canvas.height || height;\n      } else if (this.backgroundRenderInfo.type === 'image') {\n        bgWToSend = this.backgroundRenderInfo.width;\n        bgHToSend = this.backgroundRenderInfo.height;\n      } else {\n        bgWToSend = width;\n        bgHToSend = height;\n      }\n    } else {\n      backgroundTexToUse = this.backgroundRenderInfo?.texture ?? null;\n    }\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    gl.useProgram(blendProgram);\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, frameTexture);\n    gl.uniform1i(blendLocations.frameTexture, 0);\n    gl.uniform1f(blendLocations.borderSmooth, 0);\n    gl.uniform1f(blendLocations.bgBlur, options.bgBlur);\n    gl.uniform1f(blendLocations.bgBlurRadius, options.bgBlurRadius);\n    gl.uniform1i(blendLocations.enabled, 1);\n\n    gl.activeTexture(gl.TEXTURE1);\n    gl.bindTexture(gl.TEXTURE_2D, refinedMaskTexture);\n    gl.uniform1i(blendLocations.currentStateTexture, 1);\n\n    if (backgroundTexToUse) {\n      gl.activeTexture(gl.TEXTURE2);\n      gl.bindTexture(gl.TEXTURE_2D, backgroundTexToUse);\n\n      gl.uniform1i(blendLocations.backgroundTexture, 2);\n      gl.uniform2f(blendLocations.bgImageDimensions, bgWToSend, bgHToSend);\n      gl.uniform2f(blendLocations.canvasDimensions, width, height);\n    } else {\n      gl.uniform2f(blendLocations.bgImageDimensions, width, height);\n      gl.uniform2f(blendLocations.canvasDimensions, width, height);\n    }\n\n    gl.enableVertexAttribArray(blendLocations.position);\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n    gl.vertexAttribPointer(blendLocations.position, 2, gl.FLOAT, false, 0, 0);\n    gl.enableVertexAttribArray(blendLocations.texCoord);\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.texCoordBuffer);\n    gl.vertexAttribPointer(blendLocations.texCoord, 2, gl.FLOAT, false, 0, 0);\n\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\n\n    for (let i = 0; i < 3; ++i) {\n      gl.activeTexture(gl.TEXTURE0 + i);\n      gl.bindTexture(gl.TEXTURE_2D, null);\n    }\n\n    this.currentStateIndex = writeStateIndex;\n  }\n\n  public close() {\n    if (!this.running) return;\n    this.running = false;\n\n    const { gl, fbo, refineFbo, refinedMaskTexture, blurFbo1, blurFbo2 } = this;\n\n    gl.clearColor(0, 0, 0, 0);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    if (fbo) gl.deleteFramebuffer(fbo);\n    if (refineFbo) gl.deleteFramebuffer(refineFbo);\n    if (blurFbo1) gl.deleteFramebuffer(blurFbo1);\n    if (blurFbo2) gl.deleteFramebuffer(blurFbo2);\n\n    gl.deleteProgram(this.stateUpdateProgram);\n    gl.deleteProgram(this.maskRefineProgram);\n    gl.deleteProgram(this.blurProgram);\n    gl.deleteProgram(this.blendProgram);\n\n    if (this.positionBuffer) gl.deleteBuffer(this.positionBuffer);\n    if (this.texCoordBuffer) gl.deleteBuffer(this.texCoordBuffer);\n\n    if (refinedMaskTexture) gl.deleteTexture(refinedMaskTexture);\n    if (this.blurTexture1) gl.deleteTexture(this.blurTexture1);\n    if (this.blurTexture2) gl.deleteTexture(this.blurTexture2);\n    this.storedStateTextures.forEach((t) => t && gl.deleteTexture(t));\n    this.storedStateTextures.splice(0, this.storedStateTextures.length);\n    if (this.backgroundRenderInfo?.texture) {\n      gl.deleteTexture(this.backgroundRenderInfo.texture);\n      this.backgroundRenderInfo = null;\n    }\n    this.activeBackgroundSourceIdentifier = null;\n  }\n}\n", "/**\n * Type representing a video track generator that can be either the native\n * MediaStreamTrackGenerator or the fallback implementation.\n */\nexport interface MediaStreamTrackGenerator<T> extends MediaStreamTrack {\n  writable: WritableStream<T>;\n}\n\n/**\n * Configuration options for creating a track generator.\n */\nexport interface TrackGeneratorOptions {\n  readonly kind: 'video';\n  readonly signalTarget?: MediaStreamTrack;\n}\n\n/**\n * Fallback video processor for browsers that do not support MediaStreamTrackGenerator.\n *\n * Produces a video MediaStreamTrack sourced from a canvas and exposes\n * a WritableStream<VideoFrame> on track.writable for writing frames.\n */\nclass FallbackGenerator {\n  constructor({ kind, signalTarget }: TrackGeneratorOptions) {\n    if (kind !== 'video') {\n      throw new Error('Only video tracks are supported');\n    }\n\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d', { desynchronized: true });\n    if (!ctx) {\n      throw new Error('Failed to get 2D context from canvas');\n    }\n\n    const mediaStream = canvas.captureStream();\n    const track =\n      mediaStream.getVideoTracks()[0] as MediaStreamTrackGenerator<VideoFrame>;\n\n    const height = signalTarget?.getSettings().height;\n    const width = signalTarget?.getSettings().width;\n    if (height && width) {\n      canvas.height = height;\n      canvas.width = width;\n    }\n\n    if (!track) {\n      throw new Error('Failed to create canvas track');\n    }\n\n    if (signalTarget) {\n      signalTarget.addEventListener('ended', () => {\n        track.stop();\n      });\n    }\n\n    track.writable = new WritableStream({\n      write: (frame: VideoFrame) => {\n        if (\n          canvas.width !== frame.displayWidth ||\n          canvas.height !== frame.displayHeight\n        ) {\n          canvas.width = frame.displayWidth;\n          canvas.height = frame.displayHeight;\n        }\n\n        ctx.drawImage(frame, 0, 0, canvas.width, canvas.height);\n        frame.close();\n      },\n      abort: () => {\n        track.stop();\n      },\n      close: () => {\n        track.stop();\n      },\n    });\n\n    return track as MediaStreamTrackGenerator<VideoFrame>;\n  }\n}\n\ntype VideoTrackGeneratorConstructor = new (\n  options: TrackGeneratorOptions,\n) => MediaStreamTrackGenerator<VideoFrame>;\n\nconst TrackGenerator: VideoTrackGeneratorConstructor =\n  typeof MediaStreamTrackGenerator !== 'undefined'\n    ? (MediaStreamTrackGenerator as unknown as VideoTrackGeneratorConstructor)\n    : (FallbackGenerator as unknown as VideoTrackGeneratorConstructor);\n\nexport { TrackGenerator };\n", "import { WorkerTimer } from '@stream-io/worker-timer';\n\n/**\n * Representing a video track processor that can be either the native\n * MediaStreamTrackProcessor or the fallback implementation.\n */\nexport interface MediaStreamTrackProcessor<T> {\n  readonly readable: ReadableStream<T>;\n}\n\n/**\n * Configuration options for creating a track processor.\n */\nexport interface TrackProcessorOptions {\n  readonly track: MediaStreamTrack;\n}\n\n/**\n * Fallback implementation for browsers without MediaStreamTrackGenerator.\n *\n * Produces a video MediaStreamTrack sourced from a canvas and exposes a\n * WritableStream<VideoFrame> on track.writable. Written frames are drawn\n * into the canvas and update the underlying track automatically.\n */\nclass FallbackProcessor implements MediaStreamTrackProcessor<VideoFrame> {\n  readonly readable: ReadableStream<VideoFrame>;\n\n  readonly workerTimer: WorkerTimer;\n  readonly video: HTMLVideoElement;\n\n  constructor({ track }: TrackProcessorOptions) {\n    if (!track) throw new Error('MediaStreamTrack is required');\n    if (track.kind !== 'video') {\n      throw new Error('MediaStreamTrack must be video');\n    }\n    let running = true;\n\n    this.video = document.createElement('video');\n\n    this.video.muted = true;\n    this.video.playsInline = true;\n    this.video.srcObject = new MediaStream([track]);\n\n    const canvas = new OffscreenCanvas(1, 1);\n    const ctx = canvas.getContext('2d');\n\n    if (!ctx) throw new Error('Failed to get 2D context from OffscreenCanvas');\n\n    let timestamp = 0;\n    const frameRate = track.getSettings().frameRate || 30;\n    let frameDuration = 1000 / frameRate;\n    let lastVideoTime = -1;\n\n    this.workerTimer = new WorkerTimer({ useWorker: true });\n    this.readable = new ReadableStream({\n      start: async () => {\n        await Promise.all([\n          this.video.play(),\n          new Promise((r) =>\n            this.video.addEventListener('loadeddata', r, { once: true }),\n          ),\n        ]);\n        frameDuration = 1000 / (track.getSettings().frameRate || 30);\n        timestamp = performance.now();\n      },\n      pull: async (controller) => {\n        if (!running) {\n          controller.close();\n          this.close();\n          return;\n        }\n        const delta = performance.now() - timestamp;\n        if (delta <= frameDuration) {\n          await new Promise((r: (value?: unknown) => void) =>\n            this.workerTimer.setTimeout(r, frameDuration - delta),\n          );\n        }\n        timestamp = performance.now();\n\n        const currentTime = this.video.currentTime;\n        const hasNewFrame = currentTime !== lastVideoTime;\n\n        if (!hasNewFrame) {\n          await new Promise((r: (value?: unknown) => void) =>\n            this.workerTimer.setTimeout(r, frameDuration),\n          );\n          return;\n        }\n\n        lastVideoTime = currentTime;\n\n        if (\n          canvas.width !== this.video.videoWidth ||\n          canvas.height !== this.video.videoHeight\n        ) {\n          canvas.width = this.video.videoWidth;\n          canvas.height = this.video.videoHeight;\n        }\n\n        ctx.drawImage(this.video, 0, 0);\n\n        try {\n          const frame = new VideoFrame(canvas, { timestamp });\n          controller.enqueue(frame);\n        } catch (err) {\n          running = false;\n          controller.error(err);\n          this.close();\n        }\n      },\n      cancel: () => {\n        running = false;\n        this.close();\n      },\n    });\n  }\n\n  public close = () => {\n    this.video.pause();\n    this.video.srcObject = null;\n    this.video.src = '';\n\n    this.workerTimer.destroy();\n  };\n}\n\nconst TrackProcessor =\n  typeof MediaStreamTrackProcessor !== 'undefined'\n    ? MediaStreamTrackProcessor\n    : FallbackProcessor;\n\nexport { TrackProcessor };\n", "import {\n  BACKGROUND_BLUR_MAP,\n  BackgroundOptions,\n  SegmenterOptions,\n  VideoTrackProcessorHooks,\n} from './types';\nimport { FilesetResolver, ImageSegmenter } from '@mediapipe/tasks-vision';\nimport { WebGLRenderer } from './WebGLRenderer';\nimport { packageName, version } from './version';\nimport { TrackGenerator, MediaStreamTrackGenerator } from './FallbackGenerator';\nimport { MediaStreamTrackProcessor, TrackProcessor } from './FallbackProcessor';\n\n/**\n * Wraps a video MediaStreamTrack in a real-time processing pipeline.\n * Incoming frames are processed through a transformer and re-emitted\n * on a new MediaStreamVideoTrack for downstream consumption.\n */\nexport class VirtualBackground {\n  private readonly processor: MediaStreamTrackProcessor<VideoFrame>;\n  private readonly generator: MediaStreamTrackGenerator<VideoFrame>;\n\n  private canvas!: OffscreenCanvas;\n  private segmenter: ImageSegmenter | null = null;\n  private isSegmenterReady = false;\n  private webGlRenderer!: WebGLRenderer;\n  private abortController: AbortController;\n\n  private segmenterDelayTotal = 0;\n  private frames = 0;\n  private lastStatsTime = 0;\n\n  constructor(\n    private readonly track: MediaStreamVideoTrack,\n    private readonly options: BackgroundOptions = {},\n    private readonly hooks: VideoTrackProcessorHooks = {},\n  ) {\n    this.processor = new TrackProcessor({ track });\n    this.generator = new TrackGenerator({\n      kind: 'video',\n      signalTarget: track,\n    });\n\n    this.abortController = new AbortController();\n  }\n\n  public async start(): Promise<MediaStreamTrack> {\n    const { onError } = this.hooks;\n\n    const { readable } = this.processor;\n    const { writable } = this.generator;\n\n    const displayWidth = this.track.getSettings().width ?? 1280;\n    const displayHeight = this.track.getSettings().height ?? 720;\n\n    this.canvas = new OffscreenCanvas(displayWidth, displayHeight);\n    this.webGlRenderer = new WebGLRenderer(this.canvas);\n\n    await this.initializeSegmenter();\n\n    const opts = await this.initializeSegmenterOptions();\n\n    const transformStream = new TransformStream<VideoFrame, VideoFrame>({\n      transform: async (frame, controller) => {\n        try {\n          if (this.abortController.signal.aborted) {\n            return frame.close();\n          }\n\n          const processed = await this.transform(frame, opts);\n          controller.enqueue(processed);\n        } catch (e) {\n          console.error('[virtual-background] error processing frame:', e);\n          this.hooks.onError?.(e);\n\n          if (!this.abortController.signal.aborted) {\n            controller.enqueue(frame);\n          }\n        } finally {\n          frame.close();\n        }\n      },\n      flush: () => {\n        if (this.segmenter) {\n          this.segmenter.close();\n          this.segmenter = null;\n        }\n        this.isSegmenterReady = false;\n      },\n    });\n\n    const signal = this.abortController.signal;\n\n    readable\n      .pipeThrough(transformStream, { signal })\n      .pipeTo(writable, { signal })\n      .catch((e) => {\n        if (e.name !== 'AbortError') {\n          console.error('[virtual-background] Error processing track:', e);\n          onError?.(e);\n        }\n      });\n\n    return this.generator;\n  }\n\n  /**\n   * Loads and initializes the MediaPipe `ImageSegmenter`.\n   */\n  private async initializeSegmenter() {\n    try {\n      const basePath =\n        this.options?.basePath ||\n        `https://unpkg.com/${packageName}@${version}/mediapipe`;\n\n      const defaultModelPath = `${basePath}/models/selfie_segmenter.tflite`;\n\n      const model = this.options?.modelPath || defaultModelPath;\n\n      const wasmPath = `${basePath}/wasm`;\n\n      const fileset = await FilesetResolver.forVisionTasks(wasmPath);\n\n      this.segmenter = await ImageSegmenter.createFromOptions(fileset, {\n        baseOptions: {\n          modelAssetPath: model,\n          delegate: 'GPU',\n        },\n        runningMode: 'VIDEO',\n        outputCategoryMask: true,\n        outputConfidenceMasks: true,\n        canvas: this.canvas,\n      });\n\n      this.isSegmenterReady = true;\n    } catch (error) {\n      console.error(\n        '[virtual-background] Failed to initialize MediaPipe segmenter:',\n        error,\n      );\n      this.isSegmenterReady = false;\n    }\n  }\n\n  /**\n   * Processes a single video frame.\n   *\n   * Performs segmentation via MediaPipe and then composites the frame\n   * through the WebGL renderer to apply background effects.\n   *\n   * @param frame - The incoming frame from the processor.\n   * @param opts - The segmentation options to use.\n   *\n   * @returns A new `VideoFrame` containing the processed image.\n   */\n  private async transform(\n    frame: VideoFrame,\n    opts: SegmenterOptions,\n  ): Promise<VideoFrame> {\n    if (this.isSegmenterReady && this.segmenter) {\n      try {\n        const start = performance.now();\n        await new Promise<void>((resolve) => {\n          this.segmenter!.segmentForVideo(frame, frame.timestamp, (result) => {\n            const categoryMask = result.categoryMask!.getAsWebGLTexture();\n            const confidenceMask =\n              result.confidenceMasks![0].getAsWebGLTexture();\n\n            this.webGlRenderer.render(\n              frame,\n              opts,\n              categoryMask,\n              confidenceMask,\n            );\n\n            const now = performance.now();\n            this.segmenterDelayTotal += now - start;\n            this.frames++;\n\n            if (this.lastStatsTime === 0) {\n              this.lastStatsTime = now;\n            }\n\n            if (now - this.lastStatsTime > 1000) {\n              const delay =\n                Math.round((this.segmenterDelayTotal / this.frames) * 100) /\n                100;\n              const fps = Math.round(\n                (1000 * this.frames) / (now - this.lastStatsTime),\n              );\n\n              this.hooks.onStats?.({ delay, fps, timestamp: now });\n\n              this.lastStatsTime = now;\n              this.segmenterDelayTotal = 0;\n              this.frames = 0;\n            }\n\n            resolve();\n          });\n        });\n      } catch (error) {\n        console.error('[virtual-background] Error during segmentation:', error);\n      }\n    }\n\n    return new VideoFrame(this.canvas, { timestamp: frame.timestamp });\n  }\n\n  private async loadBackground(url: string | undefined) {\n    if (!url) {\n      return;\n    }\n\n    const response = await fetch(url);\n    if (!response.ok) {\n      console.error(\n        `[virtual-background] Failed to fetch background source ${url} (status: ${response.status})`,\n      );\n      return;\n    }\n    const blob = await response.blob();\n\n    const imageBitmap = await createImageBitmap(blob);\n    return { type: 'image', media: imageBitmap, url };\n  }\n\n  private async initializeSegmenterOptions(): Promise<SegmenterOptions> {\n    const isSelfieMode = this.options.modelPath\n      ? this.options.modelPath?.includes('selfie_segmenter')\n      : true;\n\n    if (this.options.backgroundFilter === 'image') {\n      return {\n        backgroundSource: await this.loadBackground(\n          this.options.backgroundImage,\n        ),\n        bgBlur: 0,\n        bgBlurRadius: 0,\n        isSelfieMode,\n      };\n    }\n\n    const blurLevel = this.options.backgroundBlurLevel;\n    if (typeof blurLevel === 'string') {\n      return {\n        ...BACKGROUND_BLUR_MAP[blurLevel],\n        backgroundSource: undefined,\n        isSelfieMode,\n      };\n    }\n\n    const numeric = blurLevel ?? 5;\n\n    const bgBlur = Math.min(numeric * 3, 30);\n    const bgBlurRadius = Math.min(numeric, 10);\n\n    return {\n      backgroundSource: undefined,\n      bgBlur,\n      bgBlurRadius,\n      isSelfieMode,\n    };\n  }\n\n  public stop(): void {\n    this.abortController.abort();\n    this.webGlRenderer.close();\n    this.generator.stop();\n\n    if (this.segmenter) {\n      this.segmenter.close();\n      this.segmenter = null;\n    }\n    this.isSegmenterReady = false;\n  }\n}\n", "import { ComponentPropsWithoutRef, useEffect, useState } from 'react';\nimport {\n  AudioTrackType,\n  StreamVideoParticipant,\n} from '@stream-io/video-client';\nimport { useCall } from '@stream-io/video-react-bindings';\n\nexport type AudioProps = ComponentPropsWithoutRef<'audio'> & {\n  /**\n   * The participant whose audio stream we want to play.\n   */\n  participant: StreamVideoParticipant;\n\n  /**\n   * The type of audio stream to play for the given participant.\n   * The default value is `audioTrack`.\n   */\n  trackType?: AudioTrackType;\n};\n\nexport const Audio = ({\n  participant,\n  trackType = 'audioTrack',\n  ...rest\n}: AudioProps) => {\n  const call = useCall();\n  const [audioElement, setAudioElement] = useState<HTMLAudioElement | null>(\n    null,\n  );\n  const { userId, sessionId } = participant;\n\n  useEffect(() => {\n    if (!call || !audioElement) return;\n    const cleanup = call.bindAudioElement(audioElement, sessionId, trackType);\n    return () => {\n      cleanup?.();\n    };\n  }, [call, sessionId, audioElement, trackType]);\n\n  return (\n    <audio\n      autoPlay\n      {...rest}\n      ref={setAudioElement}\n      data-user-id={userId}\n      data-session-id={sessionId}\n      data-track-type={trackType}\n    />\n  );\n};\n\nAudio.displayName = 'Audio';\n", "import { ComponentProps, Fragment } from 'react';\nimport {\n  hasAudio,\n  hasScreenShareAudio,\n  StreamVideoParticipant,\n} from '@stream-io/video-client';\nimport { Audio } from './Audio';\n\nexport type ParticipantsAudioProps = {\n  /**\n   * The participants to play audio for.\n   */\n  participants: StreamVideoParticipant[];\n\n  /**\n   * Props to pass to the underlying `Audio` components.\n   */\n  audioProps?: ComponentProps<typeof Audio>;\n};\n\nexport const ParticipantsAudio = (props: ParticipantsAudioProps) => {\n  const { participants, audioProps } = props;\n  return (\n    <>\n      {participants.map((participant) => {\n        if (participant.isLocalParticipant) return null;\n        const { audioStream, screenShareAudioStream, sessionId } = participant;\n\n        const hasAudioTrack = hasAudio(participant);\n        const audioTrackElement = hasAudioTrack && audioStream && (\n          <Audio\n            {...audioProps}\n            trackType=\"audioTrack\"\n            participant={participant}\n          />\n        );\n\n        const hasScreenShareAudioTrack = hasScreenShareAudio(participant);\n        const screenShareAudioTrackElement = hasScreenShareAudioTrack &&\n          screenShareAudioStream && (\n            <Audio\n              {...audioProps}\n              trackType=\"screenShareAudioTrack\"\n              participant={participant}\n            />\n          );\n\n        return (\n          <Fragment key={sessionId}>\n            {audioTrackElement}\n            {screenShareAudioTrackElement}\n          </Fragment>\n        );\n      })}\n    </>\n  );\n};\n\nParticipantsAudio.displayName = 'ParticipantsAudio';\n", "import { createContext, useContext } from 'react';\nimport { ParticipantViewProps } from './ParticipantView';\n\nexport type ParticipantViewContextValue = Required<\n  Pick<ParticipantViewProps, 'participant' | 'trackType'>\n> & {\n  participantViewElement?: HTMLDivElement | null;\n  videoElement?: HTMLVideoElement | null;\n  videoPlaceholderElement?: HTMLDivElement | null;\n};\n\nexport const ParticipantViewContext = createContext<\n  ParticipantViewContextValue | undefined\n>(undefined);\n\nexport const useParticipantViewContext = () =>\n  useContext(ParticipantViewContext) as ParticipantViewContextValue;\n", "import { useEffect } from 'react';\nimport type { UseFloatingOptions } from '@floating-ui/react';\nimport {\n  autoUpdate,\n  flip,\n  offset,\n  shift,\n  size,\n  useFloating,\n} from '@floating-ui/react';\n\nexport const useFloatingUIPreset = ({\n  middleware = [],\n  placement,\n  strategy,\n  offset: offsetInPx = 10,\n}: Pick<UseFloatingOptions, 'placement' | 'strategy' | 'middleware'> & {\n  offset?: number;\n}) => {\n  const {\n    refs,\n    x,\n    y,\n    update,\n    elements: { domReference, floating },\n    context,\n  } = useFloating({\n    placement,\n    strategy,\n    middleware: [\n      offset(offsetInPx),\n      shift(),\n      flip(),\n      size({\n        padding: 10,\n        apply: ({ availableHeight, elements }) => {\n          Object.assign(elements.floating.style, {\n            maxHeight: `${availableHeight}px`,\n          });\n        },\n      }),\n      ...middleware,\n    ],\n  });\n\n  // handle window resizing\n  useEffect(() => {\n    if (!domReference || !floating) return;\n\n    const cleanup = autoUpdate(domReference, floating, update);\n\n    return () => cleanup();\n  }, [domReference, floating, update]);\n\n  return { refs, x, y, domReference, floating, strategy, context };\n};\n", "import { useEffect, useState } from 'react';\nimport { CallingState, InputDeviceStatus } from '@stream-io/video-client';\nimport { useCallStateHooks } from '@stream-io/video-react-bindings';\n\nexport type LocalDevicePreference = {\n  selectedDeviceId: string;\n  selectedDeviceLabel: string;\n  muted?: boolean;\n};\n\nexport type LocalDevicePreferences = {\n  // Array is preference history with latest preferences first.\n  // Single preference still acceptable for backwards compatibility.\n  [type in DeviceKey]?: LocalDevicePreference | LocalDevicePreference[];\n};\n\ntype DeviceKey = 'microphone' | 'camera' | 'speaker';\n\ntype DeviceState<K extends DeviceKey> = {\n  [ManagerKey in K]: DeviceManagerLike;\n} & {\n  isMute?: boolean;\n  devices: MediaDeviceInfo[];\n  selectedDevice: string | undefined;\n};\n\ninterface DeviceManagerLike {\n  state: { selectedDevice: string | undefined; status?: InputDeviceStatus };\n  select: (deviceId: string) => Promise<void> | void;\n  enable?: () => Promise<void>;\n  disable?: () => Promise<void>;\n}\n\nconst defaultDevice = 'default';\n\n/**\n * This hook will apply and persist the device preferences from local storage.\n *\n * @param key the key to use for local storage.\n */\nexport const usePersistedDevicePreferences = (\n  key: string = '@stream-io/device-preferences',\n): void => {\n  const {\n    useCallSettings,\n    useCallCallingState,\n    useMicrophoneState,\n    useCameraState,\n    useSpeakerState,\n  } = useCallStateHooks();\n  const settings = useCallSettings();\n  const callingState = useCallCallingState();\n\n  const microphoneState: DeviceState<'microphone'> = useMicrophoneState();\n  const cameraState: DeviceState<'camera'> = useCameraState();\n  const speakerState: DeviceState<'speaker'> = useSpeakerState();\n\n  const [applyingState, setApplyingState] = useState<\n    'idle' | 'applying' | 'applied'\n  >('idle');\n\n  // when the camera is disabled on call type level, we should discard\n  // any stored camera preferences.\n  const cameraDevices = settings?.video?.enabled ? cameraState.devices : false;\n  useEffect(\n    function apply() {\n      if (\n        callingState === CallingState.LEFT ||\n        microphoneState.devices.length === 0 ||\n        (Array.isArray(cameraDevices) && cameraDevices.length === 0) ||\n        speakerState.devices.length === 0 ||\n        !settings ||\n        applyingState !== 'idle'\n      ) {\n        return;\n      }\n\n      setApplyingState('applying');\n\n      (async () => {\n        const { audio, video } = settings;\n        for (const [deviceKey, state, defaultMuted, enabledInCallType] of [\n          ['microphone', microphoneState, !audio.mic_default_on, true],\n          ['camera', cameraState, !video.camera_default_on, video.enabled],\n          ['speaker', speakerState, false, true],\n        ] as const) {\n          const preferences = parseLocalDevicePreferences(key);\n          const preference = preferences[deviceKey];\n          const manager = (\n            state as DeviceState<'camera' | 'microphone' | 'speaker'>\n          )[deviceKey];\n\n          const applyPromise = preference\n            ? applyLocalDevicePreference(\n                manager,\n                [preference].flat(),\n                deviceKey === 'camera' ? cameraDevices || [] : state.devices,\n                enabledInCallType,\n              )\n            : applyMutedState(manager, defaultMuted, enabledInCallType);\n\n          await applyPromise.catch((err) => {\n            console.warn(\n              `Failed to apply ${deviceKey} device preferences`,\n              err,\n            );\n          });\n        }\n      })().finally(() =>\n        setApplyingState((state) => (state === 'applying' ? 'applied' : state)),\n      );\n    },\n    [\n      applyingState,\n      callingState,\n      cameraState,\n      cameraDevices,\n      key,\n      microphoneState,\n      microphoneState.devices,\n      settings,\n      speakerState,\n      speakerState.devices,\n    ],\n  );\n\n  useEffect(\n    function persist() {\n      if (callingState === CallingState.LEFT || applyingState !== 'applied') {\n        return;\n      }\n\n      for (const [deviceKey, devices, selectedDevice, isMute] of [\n        [\n          'camera',\n          cameraDevices || [],\n          cameraState.selectedDevice,\n          cameraState.isMute,\n        ],\n        [\n          'microphone',\n          microphoneState.devices,\n          microphoneState.selectedDevice,\n          microphoneState.isMute,\n        ],\n        [\n          'speaker',\n          speakerState.devices,\n          speakerState.selectedDevice,\n          speakerState.isMute,\n        ],\n      ] as const) {\n        try {\n          patchLocalDevicePreference(key, deviceKey, {\n            devices,\n            selectedDevice,\n            isMute,\n          });\n        } catch (err) {\n          console.warn(`Failed to save ${deviceKey} device preferences`, err);\n        }\n      }\n    },\n    [\n      applyingState,\n      callingState,\n      cameraDevices,\n      cameraState.isMute,\n      cameraState.selectedDevice,\n      key,\n      microphoneState.devices,\n      microphoneState.isMute,\n      microphoneState.selectedDevice,\n      speakerState.devices,\n      speakerState.isMute,\n      speakerState.selectedDevice,\n    ],\n  );\n};\n\n// const usePersistedDevicePreference = <K extends DeviceKey>(\n//   key: string,\n//   deviceKey: K,\n//   state: DeviceState<K>,\n//   defaultMuted?: boolean,\n// ): void => {\n//   const { useCallCallingState } = useCallStateHooks();\n//   const callingState = useCallCallingState();\n//   const [applyingState, setApplyingState] = useState<\n//     'idle' | 'applying' | 'applied'\n//   >('idle');\n//   const manager = state[deviceKey];\n\n//   useEffect(\n//     function apply() {\n//       if (\n//         callingState === CallingState.LEFT ||\n//         !state.devices?.length ||\n//         typeof defaultMuted !== 'boolean' ||\n//         applyingState !== 'idle'\n//       ) {\n//         return;\n//       }\n\n//       const preferences = parseLocalDevicePreferences(key);\n//       const preference = preferences[deviceKey];\n\n//       setApplyingState('applying');\n\n//       if (!manager.state.selectedDevice) {\n//         const applyPromise = preference\n//           ? applyLocalDevicePreference(\n//               manager,\n//               [preference].flat(),\n//               state.devices,\n//             )\n//           : applyMutedState(manager, defaultMuted);\n\n//         applyPromise\n//           .catch((err) => {\n//             console.warn(\n//               `Failed to apply ${deviceKey} device preferences`,\n//               err,\n//             );\n//           })\n//           .finally(() => setApplyingState('applied'));\n//       } else {\n//         setApplyingState('applied');\n//       }\n//     },\n//     [\n//       applyingState,\n//       callingState,\n//       defaultMuted,\n//       deviceKey,\n//       key,\n//       manager,\n//       state.devices,\n//     ],\n//   );\n\n//   useEffect(\n//     function persist() {\n//       if (\n//         callingState === CallingState.LEFT ||\n//         !state.devices?.length ||\n//         applyingState !== 'applied'\n//       ) {\n//         return;\n//       }\n\n//       try {\n//         patchLocalDevicePreference(key, deviceKey, {\n//           devices: state.devices,\n//           selectedDevice: state.selectedDevice,\n//           isMute: state.isMute,\n//         });\n//       } catch (err) {\n//         console.warn(`Failed to save ${deviceKey} device preferences`, err);\n//       }\n//     },\n//     [\n//       applyingState,\n//       callingState,\n//       deviceKey,\n//       key,\n//       state.devices,\n//       state.isMute,\n//       state.selectedDevice,\n//     ],\n//   );\n// };\n\nconst parseLocalDevicePreferences = (key: string): LocalDevicePreferences => {\n  const preferencesStr = window.localStorage.getItem(key);\n  let preferences: LocalDevicePreferences = {};\n\n  if (preferencesStr) {\n    try {\n      preferences = JSON.parse(preferencesStr);\n\n      if (Object.hasOwn(preferences, 'mic')) {\n        // for backwards compatibility\n        preferences.microphone = (\n          preferences as { mic: LocalDevicePreference }\n        ).mic;\n      }\n    } catch {\n      /* assume preferences are empty */\n    }\n  }\n\n  return preferences;\n};\n\nconst patchLocalDevicePreference = (\n  key: string,\n  deviceKey: DeviceKey,\n  state: Pick<DeviceState<never>, 'devices' | 'selectedDevice' | 'isMute'>,\n): void => {\n  const preferences = parseLocalDevicePreferences(key);\n  const nextPreference = getSelectedDevicePreference(\n    state.devices,\n    state.selectedDevice,\n  );\n  const preferenceHistory = [preferences[deviceKey] ?? []]\n    .flat()\n    .filter(\n      (p) =>\n        p.selectedDeviceId !== nextPreference.selectedDeviceId &&\n        (p.selectedDeviceLabel === '' ||\n          p.selectedDeviceLabel !== nextPreference.selectedDeviceLabel),\n    );\n\n  window.localStorage.setItem(\n    key,\n    JSON.stringify({\n      ...preferences,\n      mic: undefined, // for backwards compatibility\n      [deviceKey]: [\n        {\n          ...nextPreference,\n          muted: state.isMute,\n        } satisfies LocalDevicePreference,\n        ...preferenceHistory,\n      ].slice(0, 3),\n    }),\n  );\n};\n\nconst applyLocalDevicePreference = async (\n  manager: DeviceManagerLike,\n  preference: LocalDevicePreference[],\n  devices: MediaDeviceInfo[],\n  enabledInCallType: boolean,\n): Promise<void> => {\n  let muted: boolean | undefined;\n\n  for (const p of preference) {\n    muted ??= p.muted;\n\n    if (p.selectedDeviceId === defaultDevice) {\n      break;\n    }\n\n    const device =\n      devices.find((d) => d.deviceId === p.selectedDeviceId) ??\n      devices.find((d) => d.label === p.selectedDeviceLabel);\n\n    if (device) {\n      if (!manager.state.selectedDevice) {\n        await manager.select(device.deviceId);\n      }\n\n      muted = p.muted;\n      break;\n    }\n  }\n\n  if (typeof muted === 'boolean') {\n    await applyMutedState(manager, muted, enabledInCallType);\n  }\n};\n\nconst applyMutedState = async (\n  manager: DeviceManagerLike,\n  muted: boolean,\n  enabledInCallType: boolean,\n) => {\n  if (enabledInCallType && !manager.state.status) {\n    await manager[muted ? 'disable' : 'enable']?.();\n  }\n};\n\nconst getSelectedDevicePreference = (\n  devices: MediaDeviceInfo[],\n  selectedDevice: string | undefined,\n): Pick<LocalDevicePreference, 'selectedDeviceId' | 'selectedDeviceLabel'> => ({\n  selectedDeviceId: selectedDevice || defaultDevice,\n  selectedDeviceLabel:\n    devices?.find((d) => d.deviceId === selectedDevice)?.label ?? '',\n});\n", "import { useEffect, useState } from 'react';\n\nconst SCROLL_THRESHOLD = 10;\n\n/**\n * Hook which observes element's scroll position and returns text value based on the\n * position of the scrollbar (`top`, `bottom`, `between` and `null` if no scrollbar is available)\n */\nexport const useVerticalScrollPosition = (\n  scrollElement: HTMLElement | null,\n  threshold: number = SCROLL_THRESHOLD,\n) => {\n  const [scrollPosition, setScrollPosition] = useState<\n    'top' | 'bottom' | 'between' | null\n  >(null);\n\n  useEffect(() => {\n    if (!scrollElement) return;\n\n    const scrollHandler = () => {\n      const element = scrollElement;\n\n      const hasVerticalScrollbar = element.scrollHeight > element.clientHeight;\n\n      if (!hasVerticalScrollbar) return setScrollPosition(null);\n\n      const isAtTheTop = element.scrollTop <= threshold;\n      if (isAtTheTop) return setScrollPosition('top');\n\n      const isAtTheBottom =\n        Math.abs(\n          element.scrollHeight - element.scrollTop - element.clientHeight,\n        ) <= threshold;\n\n      if (isAtTheBottom) return setScrollPosition('bottom');\n\n      setScrollPosition('between');\n    };\n\n    const resizeObserver = new ResizeObserver(scrollHandler);\n    resizeObserver.observe(scrollElement);\n\n    scrollElement.addEventListener('scroll', scrollHandler);\n    return () => {\n      scrollElement.removeEventListener('scroll', scrollHandler);\n      resizeObserver.disconnect();\n    };\n  }, [scrollElement, threshold]);\n\n  return scrollPosition;\n};\n\nexport const useHorizontalScrollPosition = (\n  scrollElement: HTMLElement | null,\n  threshold: number = SCROLL_THRESHOLD,\n) => {\n  const [scrollPosition, setScrollPosition] = useState<\n    'start' | 'end' | 'between' | null\n  >(null);\n\n  useEffect(() => {\n    if (!scrollElement) return;\n\n    const scrollHandler = () => {\n      const element = scrollElement;\n\n      const hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;\n\n      if (!hasHorizontalScrollbar) return setScrollPosition(null);\n\n      const isAtTheStart = element.scrollLeft <= threshold;\n      if (isAtTheStart) return setScrollPosition('start');\n\n      const isAtTheEnd =\n        Math.abs(\n          element.scrollWidth - element.scrollLeft - element.clientWidth,\n        ) <= threshold;\n\n      if (isAtTheEnd) return setScrollPosition('end');\n\n      setScrollPosition('between');\n    };\n\n    const resizeObserver = new ResizeObserver(scrollHandler);\n    resizeObserver.observe(scrollElement);\n\n    scrollElement.addEventListener('scroll', scrollHandler);\n    return () => {\n      scrollElement.removeEventListener('scroll', scrollHandler);\n      resizeObserver.disconnect();\n    };\n  }, [scrollElement, threshold]);\n\n  return scrollPosition;\n};\n", "import { useCallback, useEffect, useState } from 'react';\nimport { OwnCapability } from '@stream-io/video-client';\nimport { useCall, useCallStateHooks } from '@stream-io/video-react-bindings';\n\nexport const useRequestPermission = (permission: OwnCapability) => {\n  const call = useCall();\n  const { useHasPermissions } = useCallStateHooks();\n  const hasPermission = useHasPermissions(permission);\n  const [isAwaitingPermission, setIsAwaitingPermission] = useState(false); // TODO: load with possibly pending state\n\n  useEffect(() => {\n    const reset = () => setIsAwaitingPermission(false);\n\n    if (hasPermission) reset();\n  }, [hasPermission]);\n\n  const requestPermission = useCallback(async () => {\n    if (hasPermission) return true;\n\n    const canRequestPermission =\n      !!call?.permissionsContext.canRequest(permission);\n    if (isAwaitingPermission || !canRequestPermission) return false;\n\n    setIsAwaitingPermission(true);\n\n    try {\n      await call?.requestPermissions({\n        permissions: [permission],\n      });\n    } catch (error) {\n      setIsAwaitingPermission(false);\n      throw new Error(`requestPermission failed: ${error}`);\n    }\n\n    return false;\n  }, [call, hasPermission, isAwaitingPermission, permission]);\n\n  return {\n    requestPermission,\n    hasPermission,\n    canRequestPermission: !!call?.permissionsContext.canRequest(permission),\n    isAwaitingPermission,\n  };\n};\n", "import { useI18n } from '@stream-io/video-react-bindings';\nimport { useMemo } from 'react';\n\nexport interface DeviceListItem {\n  deviceId: string;\n  label: string;\n  isSelected: boolean;\n}\n\n/**\n * Utility hook that helps render a list of devices or implement a device selector.\n * Compared to someting like `useCameraState().devices`, it has some handy features:\n * 1. Adds the \"Default\" device to the list if applicable (either the user did not\n * select a device, or a previously selected device is no longer available).\n * 2. Maps the device list to a format more suitable for rendering.\n */\nexport function useDeviceList(\n  devices: MediaDeviceInfo[],\n  selectedDeviceId: string | undefined,\n): {\n  deviceList: DeviceListItem[];\n  selectedDeviceInfo: DeviceListItem;\n  selectedIndex: number;\n} {\n  const { t } = useI18n();\n\n  return useMemo(() => {\n    let selectedDeviceInfo: DeviceListItem | null = null;\n    let selectedIndex: number | null = null;\n\n    const deviceList: DeviceListItem[] = devices.map((d, i) => {\n      const isSelected = d.deviceId === selectedDeviceId;\n      const device = { deviceId: d.deviceId, label: d.label, isSelected };\n\n      if (isSelected) {\n        selectedDeviceInfo = device;\n        selectedIndex = i;\n      }\n\n      return device;\n    });\n\n    if (selectedDeviceInfo === null || selectedIndex === null) {\n      const defaultDevice = {\n        deviceId: 'default',\n        label: t('Default'),\n        isSelected: true,\n      };\n\n      selectedDeviceInfo = defaultDevice;\n      selectedIndex = 0;\n      deviceList.unshift(defaultDevice);\n    }\n\n    return { deviceList, selectedDeviceInfo, selectedIndex };\n  }, [devices, selectedDeviceId, t]);\n}\n", "import {\n  ComponentType,\n  createContext,\n  PropsWithChildren,\n  RefAttributes,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport {\n  FloatingOverlay,\n  FloatingPortal,\n  Placement,\n  Strategy,\n  UseFloatingReturn,\n} from '@floating-ui/react';\n\nimport { useFloatingUIPreset } from '../../hooks';\n\nexport type ToggleMenuButtonProps<E extends HTMLElement = HTMLButtonElement> = {\n  menuShown: boolean;\n} & RefAttributes<E>;\n\nexport enum MenuVisualType {\n  PORTAL = 'portal',\n  MENU = 'menu',\n}\n\nexport type MenuToggleProps<E extends HTMLElement> = PropsWithChildren<{\n  ToggleButton: ComponentType<ToggleMenuButtonProps<E>>;\n  placement?: Placement;\n  strategy?: Strategy;\n  offset?: number;\n  visualType?: MenuVisualType;\n  onToggle?: (menuShown: boolean) => void;\n}>;\n\nexport type MenuContextValue = {\n  close?: () => void;\n};\n\n/**\n * Used to provide utility APIs to the components rendered inside the portal.\n */\nconst MenuContext = createContext<MenuContextValue>({});\n\n/**\n * Access to the closes MenuContext.\n */\nexport const useMenuContext = (): MenuContextValue => {\n  return useContext(MenuContext);\n};\n\nconst MenuPortal = ({\n  children,\n  refs,\n}: PropsWithChildren<{\n  refs: UseFloatingReturn['refs'];\n}>) => {\n  const portalId = useMemo(\n    () => `str-video-portal-${Math.random().toString(36).substring(2, 9)}`,\n    [],\n  );\n\n  return (\n    <>\n      <div id={portalId} className=\"str-video__portal\" />\n      <FloatingOverlay>\n        <FloatingPortal id={portalId}>\n          <div className=\"str-video__portal-content\" ref={refs.setFloating}>\n            {children}\n          </div>\n        </FloatingPortal>\n      </FloatingOverlay>\n    </>\n  );\n};\n\nexport const MenuToggle = <E extends HTMLElement>({\n  ToggleButton,\n  placement = 'top-start',\n  strategy = 'absolute',\n  offset,\n  visualType = MenuVisualType.MENU,\n  children,\n  onToggle,\n}: MenuToggleProps<E>) => {\n  const [menuShown, setMenuShown] = useState(false);\n  const toggleHandler = useRef(onToggle);\n  toggleHandler.current = onToggle;\n\n  const { floating, domReference, refs, x, y } = useFloatingUIPreset({\n    placement,\n    strategy,\n    offset,\n  });\n\n  useEffect(() => {\n    const parentDocument = domReference?.ownerDocument;\n\n    const handleClick = (event: MouseEvent) => {\n      if (!floating && domReference?.contains(event.target as Node)) {\n        setMenuShown(true);\n        toggleHandler.current?.(true);\n      } else if (floating && !floating?.contains(event.target as Node)) {\n        setMenuShown(false);\n        toggleHandler.current?.(false);\n      }\n    };\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key && // key can be undefined in some browsers\n        event.key.toLowerCase() === 'escape' &&\n        !event.altKey &&\n        !event.ctrlKey\n      ) {\n        setMenuShown(false);\n        toggleHandler.current?.(false);\n      }\n    };\n    parentDocument?.addEventListener('click', handleClick, { capture: true });\n    parentDocument?.addEventListener('keydown', handleKeyDown);\n    return () => {\n      parentDocument?.removeEventListener('click', handleClick, {\n        capture: true,\n      });\n      parentDocument?.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [floating, domReference]);\n\n  return (\n    <>\n      {menuShown && (\n        <MenuContext.Provider value={{ close: () => setMenuShown(false) }}>\n          {visualType === MenuVisualType.PORTAL ? (\n            <MenuPortal refs={refs} children={children} />\n          ) : visualType === MenuVisualType.MENU ? (\n            <div\n              className=\"str-video__menu-container\"\n              ref={refs.setFloating}\n              style={{\n                position: strategy,\n                top: y ?? 0,\n                left: x ?? 0,\n                overflowY: 'auto',\n              }}\n              role=\"menu\"\n              children={children}\n            />\n          ) : null}\n        </MenuContext.Provider>\n      )}\n      <ToggleButton menuShown={menuShown} ref={refs.setReference} />\n    </>\n  );\n};\n", "import { ComponentProps, MouseEvent, PropsWithChildren, useRef } from 'react';\n\nexport const GenericMenu = ({\n  children,\n  onItemClick,\n}: PropsWithChildren<{\n  onItemClick?: (e: MouseEvent) => void;\n}>) => {\n  const ref = useRef<HTMLUListElement>(null);\n  return (\n    <ul\n      className=\"str-video__generic-menu\"\n      ref={ref}\n      onClick={(e) => {\n        if (\n          onItemClick &&\n          e.target !== ref.current &&\n          ref.current?.contains(e.target as Node)\n        ) {\n          onItemClick(e);\n        }\n      }}\n    >\n      {children}\n    </ul>\n  );\n};\n\nexport const GenericMenuButtonItem = ({\n  children,\n  ...rest\n}: Omit<ComponentProps<'button'>, 'ref'>) => {\n  return (\n    <li className=\"str-video__generic-menu--item\">\n      <button {...rest}>{children}</button>\n    </li>\n  );\n};\n", "import clsx from 'clsx';\n\nexport type IconProps = {\n  icon: string;\n  className?: string;\n};\n\nexport const Icon = ({ className, icon }: IconProps) => (\n  <span\n    className={clsx(\n      'str-video__icon',\n      icon && `str-video__icon--${icon}`,\n      className,\n    )}\n  />\n);\n", "import { useEffect, useState } from 'react';\n\nexport function usePictureInPictureState(videoElement?: HTMLVideoElement) {\n  const [isPiP, setIsPiP] = useState(\n    document.pictureInPictureElement === videoElement,\n  );\n\n  if (!videoElement && isPiP) setIsPiP(false);\n\n  useEffect(() => {\n    if (!videoElement) return;\n\n    const handlePiP = () => {\n      setIsPiP(document.pictureInPictureElement === videoElement);\n    };\n\n    videoElement.addEventListener('enterpictureinpicture', handlePiP);\n    videoElement.addEventListener('leavepictureinpicture', handlePiP);\n\n    return () => {\n      videoElement.removeEventListener('enterpictureinpicture', handlePiP);\n      videoElement.removeEventListener('leavepictureinpicture', handlePiP);\n    };\n  }, [videoElement]);\n\n  return isPiP;\n}\n", "import { useEffect, useState } from 'react';\nimport { Restricted, useCall, useI18n } from '@stream-io/video-react-bindings';\nimport {\n  hasAudio,\n  hasScreenShare,\n  hasScreenShareAudio,\n  hasVideo,\n  OwnCapability,\n} from '@stream-io/video-client';\nimport { useParticipantViewContext } from './ParticipantViewContext';\nimport {\n  GenericMenu,\n  GenericMenuButtonItem,\n  useMenuContext,\n} from '../../../components/Menu';\nimport { Icon } from '../../../components/Icon';\nimport { usePictureInPictureState } from '../../hooks/usePictureInPictureState';\n\nexport const ParticipantActionsContextMenu = () => {\n  const { participant, participantViewElement, videoElement } =\n    useParticipantViewContext();\n  const [fullscreenModeOn, setFullscreenModeOn] = useState(\n    !!document.fullscreenElement,\n  );\n  const call = useCall();\n  const isPiP = usePictureInPictureState(videoElement ?? undefined);\n  const { t } = useI18n();\n\n  const { pin, sessionId, userId } = participant;\n\n  const hasAudioTrack = hasAudio(participant);\n  const hasVideoTrack = hasVideo(participant);\n  const hasScreenShareTrack = hasScreenShare(participant);\n  const hasScreenShareAudioTrack = hasScreenShareAudio(participant);\n\n  const blockUser = () => call?.blockUser(userId);\n  const kickUser = () => call?.kickUser({ user_id: userId });\n  const muteAudio = () => call?.muteUser(userId, 'audio');\n  const muteVideo = () => call?.muteUser(userId, 'video');\n  const muteScreenShare = () => call?.muteUser(userId, 'screenshare');\n  const muteScreenShareAudio = () =>\n    call?.muteUser(userId, 'screenshare_audio');\n\n  const grantPermission = (permission: string) => () => {\n    call?.updateUserPermissions({\n      user_id: userId,\n      grant_permissions: [permission],\n    });\n  };\n\n  const revokePermission = (permission: string) => () => {\n    call?.updateUserPermissions({\n      user_id: userId,\n      revoke_permissions: [permission],\n    });\n  };\n\n  const toggleParticipantPin = () => {\n    if (pin) {\n      call?.unpin(sessionId);\n    } else {\n      call?.pin(sessionId);\n    }\n  };\n\n  const pinForEveryone = () => {\n    call\n      ?.pinForEveryone({ user_id: userId, session_id: sessionId })\n      .catch((err) => {\n        console.error(`Failed to pin participant ${userId}`, err);\n      });\n  };\n\n  const unpinForEveryone = () => {\n    call\n      ?.unpinForEveryone({ user_id: userId, session_id: sessionId })\n      .catch((err) => {\n        console.error(`Failed to unpin participant ${userId}`, err);\n      });\n  };\n\n  const toggleFullscreenMode = () => {\n    if (!fullscreenModeOn) {\n      return participantViewElement?.requestFullscreen().catch(console.error);\n    }\n    return document.exitFullscreen().catch(console.error);\n  };\n\n  useEffect(() => {\n    // handles the case when fullscreen mode is toggled externally,\n    // e.g., by pressing ESC key or some other keyboard shortcut\n    const handleFullscreenChange = () => {\n      setFullscreenModeOn(!!document.fullscreenElement);\n    };\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n    return () => {\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n    };\n  }, []);\n\n  const togglePictureInPicture = () => {\n    if (videoElement && !isPiP) {\n      return videoElement\n        .requestPictureInPicture()\n        .catch(console.error) as Promise<void>;\n    }\n\n    return document.exitPictureInPicture().catch(console.error);\n  };\n\n  const { close } = useMenuContext() || {};\n  return (\n    <GenericMenu onItemClick={close}>\n      <GenericMenuButtonItem\n        onClick={toggleParticipantPin}\n        disabled={pin && !pin.isLocalPin}\n      >\n        <Icon icon=\"pin\" />\n        {pin ? t('Unpin') : t('Pin')}\n      </GenericMenuButtonItem>\n      <Restricted requiredGrants={[OwnCapability.PIN_FOR_EVERYONE]}>\n        <GenericMenuButtonItem\n          onClick={pinForEveryone}\n          disabled={pin && !pin.isLocalPin}\n        >\n          <Icon icon=\"pin\" />\n          {t('Pin for everyone')}\n        </GenericMenuButtonItem>\n        <GenericMenuButtonItem\n          onClick={unpinForEveryone}\n          disabled={!pin || pin.isLocalPin}\n        >\n          <Icon icon=\"pin\" />\n          {t('Unpin for everyone')}\n        </GenericMenuButtonItem>\n      </Restricted>\n      <Restricted requiredGrants={[OwnCapability.BLOCK_USERS]}>\n        <GenericMenuButtonItem onClick={blockUser}>\n          <Icon icon=\"not-allowed\" />\n          {t('Block')}\n        </GenericMenuButtonItem>\n      </Restricted>\n      <Restricted requiredGrants={[OwnCapability.KICK_USER]}>\n        <GenericMenuButtonItem onClick={kickUser}>\n          <Icon icon=\"kick-user\" />\n          {t('Kick')}\n        </GenericMenuButtonItem>\n      </Restricted>\n      <Restricted requiredGrants={[OwnCapability.MUTE_USERS]}>\n        {hasVideoTrack && (\n          <GenericMenuButtonItem onClick={muteVideo}>\n            <Icon icon=\"camera-off-outline\" />\n            {t('Turn off video')}\n          </GenericMenuButtonItem>\n        )}\n        {hasScreenShareTrack && (\n          <GenericMenuButtonItem onClick={muteScreenShare}>\n            <Icon icon=\"screen-share-off\" />\n            {t('Turn off screen share')}\n          </GenericMenuButtonItem>\n        )}\n        {hasAudioTrack && (\n          <GenericMenuButtonItem onClick={muteAudio}>\n            <Icon icon=\"no-audio\" />\n            {t('Mute audio')}\n          </GenericMenuButtonItem>\n        )}\n        {hasScreenShareAudioTrack && (\n          <GenericMenuButtonItem onClick={muteScreenShareAudio}>\n            <Icon icon=\"no-audio\" />\n            {t('Mute screen share audio')}\n          </GenericMenuButtonItem>\n        )}\n      </Restricted>\n      {participantViewElement &&\n        typeof participantViewElement.requestFullscreen !== 'undefined' && (\n          <GenericMenuButtonItem onClick={toggleFullscreenMode}>\n            {t('{{ direction }} fullscreen', {\n              direction: fullscreenModeOn ? t('Leave') : t('Enter'),\n            })}\n          </GenericMenuButtonItem>\n        )}\n      {videoElement && document.pictureInPictureEnabled && (\n        <GenericMenuButtonItem onClick={togglePictureInPicture}>\n          {t('{{ direction }} picture-in-picture', {\n            direction: isPiP ? t('Leave') : t('Enter'),\n          })}\n        </GenericMenuButtonItem>\n      )}\n      <Restricted requiredGrants={[OwnCapability.UPDATE_CALL_PERMISSIONS]}>\n        <GenericMenuButtonItem\n          onClick={grantPermission(OwnCapability.SEND_AUDIO)}\n        >\n          {t('Allow audio')}\n        </GenericMenuButtonItem>\n        <GenericMenuButtonItem\n          onClick={grantPermission(OwnCapability.SEND_VIDEO)}\n        >\n          {t('Allow video')}\n        </GenericMenuButtonItem>\n        <GenericMenuButtonItem\n          onClick={grantPermission(OwnCapability.SCREENSHARE)}\n        >\n          {t('Allow screen sharing')}\n        </GenericMenuButtonItem>\n\n        <GenericMenuButtonItem\n          onClick={revokePermission(OwnCapability.SEND_AUDIO)}\n        >\n          {t('Disable audio')}\n        </GenericMenuButtonItem>\n        <GenericMenuButtonItem\n          onClick={revokePermission(OwnCapability.SEND_VIDEO)}\n        >\n          {t('Disable video')}\n        </GenericMenuButtonItem>\n        <GenericMenuButtonItem\n          onClick={revokePermission(OwnCapability.SCREENSHARE)}\n        >\n          {t('Disable screen sharing')}\n        </GenericMenuButtonItem>\n      </Restricted>\n    </GenericMenu>\n  );\n};\n", "import { ComponentType, isValidElement, ReactElement } from 'react';\n\nexport const isComponentType = <T extends {}>(\n  elementOrComponent?: ComponentType<T> | ReactElement | null,\n): elementOrComponent is ComponentType<T> => {\n  return elementOrComponent === null\n    ? false\n    : !isValidElement(elementOrComponent);\n};\n", "export const chunk = <T extends unknown[]>(array: T, size: number) => {\n  const chunkCount = Math.ceil(array.length / size);\n\n  return Array.from(\n    { length: chunkCount },\n    (_, index) => array.slice(size * index, size * index + size) as T,\n  );\n};\n", "import type { ForwardedRef } from 'react';\n\nexport const applyElementToRef = <T extends HTMLElement | null>(\n  ref: ForwardedRef<T>,\n  element: T,\n) => {\n  if (!ref) return;\n\n  if (typeof ref === 'function') return ref(element);\n\n  ref.current = element;\n};\n", "import { ComponentPropsWithRef, forwardRef, useEffect, useState } from 'react';\nimport { Browsers } from '@stream-io/video-client';\n\nimport { applyElementToRef } from '../../../utilities';\n\nexport type BaseVideoProps = ComponentPropsWithRef<'video'> & {\n  stream?: MediaStream;\n};\n\n/**\n * @description Extends video element with `stream` property\n * (`srcObject`) to reactively handle stream changes\n */\nexport const BaseVideo = forwardRef<HTMLVideoElement, BaseVideoProps>(\n  function BaseVideo({ stream, ...rest }, ref) {\n    const [videoElement, setVideoElement] = useState<HTMLVideoElement | null>(\n      null,\n    );\n\n    useEffect(() => {\n      if (!videoElement || !stream) return;\n      if (stream === videoElement.srcObject) return;\n\n      videoElement.srcObject = stream;\n      if (Browsers.isSafari() || Browsers.isFirefox()) {\n        // Firefox and Safari have some timing issue\n        setTimeout(() => {\n          videoElement.srcObject = stream;\n          videoElement.play().catch((e) => {\n            console.error(`Failed to play stream`, e);\n          });\n        }, 0);\n      }\n\n      return () => {\n        videoElement.pause();\n        videoElement.srcObject = null;\n      };\n    }, [stream, videoElement]);\n\n    return (\n      <video\n        autoPlay\n        playsInline\n        {...rest}\n        ref={(element) => {\n          applyElementToRef(ref, element);\n          setVideoElement(element);\n        }}\n      />\n    );\n  },\n);\n", "import { ComponentProps, RefAttributes, forwardRef, useState } from 'react';\nimport type { StreamVideoParticipant } from '@stream-io/video-client';\n\nexport type BaseVideoPlaceholderProps = {\n  participant: StreamVideoParticipant;\n} & RefAttributes<HTMLDivElement> &\n  ComponentProps<'div'>;\n\nexport const BaseVideoPlaceholder = forwardRef<\n  HTMLDivElement,\n  BaseVideoPlaceholderProps\n>(function DefaultVideoPlaceholder({ participant, style, children }, ref) {\n  const [error, setError] = useState(false);\n  const name = participant.name || participant.userId;\n  return (\n    <div className=\"str-video__video-placeholder\" style={style} ref={ref}>\n      {(!participant.image || error) &&\n        (name ? (\n          <InitialsFallback name={name} />\n        ) : (\n          <div className=\"str-video__video-placeholder__no-video-label\">\n            {children}\n          </div>\n        ))}\n      {participant.image && !error && (\n        <img\n          onError={() => setError(true)}\n          alt={name}\n          className=\"str-video__video-placeholder__avatar\"\n          src={participant.image}\n        />\n      )}\n    </div>\n  );\n});\n\nconst InitialsFallback = (props: { name: string }) => {\n  const { name } = props;\n  const initials = name\n    .split(' ')\n    .slice(0, 2)\n    .map((n) => n[0])\n    .join('');\n  return (\n    <div className=\"str-video__video-placeholder__initials-fallback\">\n      {initials}\n    </div>\n  );\n};\n", "import { forwardRef } from 'react';\nimport { useI18n } from '@stream-io/video-react-bindings';\nimport {\n  BaseVideoPlaceholder,\n  type BaseVideoPlaceholderProps,\n} from './BaseVideoPlaceholder';\n\nexport type VideoPlaceholderProps = BaseVideoPlaceholderProps;\n\nexport const DefaultVideoPlaceholder = forwardRef<\n  HTMLDivElement,\n  VideoPlaceholderProps\n>(function DefaultVideoPlaceholder(props, ref) {\n  const { t } = useI18n();\n  return (\n    <BaseVideoPlaceholder ref={ref} {...props}>\n      {t('Video is disabled')}\n    </BaseVideoPlaceholder>\n  );\n});\n", "import { forwardRef } from 'react';\nimport { useI18n } from '@stream-io/video-react-bindings';\nimport {\n  BaseVideoPlaceholder,\n  type BaseVideoPlaceholderProps,\n} from './BaseVideoPlaceholder';\n\nexport type PictureInPicturePlaceholderProps = BaseVideoPlaceholderProps;\n\nexport const DefaultPictureInPicturePlaceholder = forwardRef<\n  HTMLDivElement,\n  PictureInPicturePlaceholderProps\n>(function DefaultPictureInPicturePlaceholder(props, ref) {\n  const { t } = useI18n();\n  return (\n    <BaseVideoPlaceholder ref={ref} {...props}>\n      {t('Video is playing in a popup')}\n    </BaseVideoPlaceholder>\n  );\n});\n", "import {\n  ComponentPropsWithoutRef,\n  ComponentType,\n  useEffect,\n  useLayoutEffect,\n  useState,\n} from 'react';\nimport {\n  hasPausedTrack,\n  hasScreenShare,\n  hasVideo,\n  StreamVideoParticipant,\n  VideoTrackType,\n  VisibilityState,\n} from '@stream-io/video-client';\nimport clsx from 'clsx';\nimport {\n  DefaultVideoPlaceholder,\n  VideoPlaceholderProps,\n} from './DefaultVideoPlaceholder';\nimport { useCall } from '@stream-io/video-react-bindings';\nimport { usePictureInPictureState } from '../../hooks/usePictureInPictureState';\nimport {\n  DefaultPictureInPicturePlaceholder,\n  PictureInPicturePlaceholderProps,\n} from './DefaultPictureInPicturePlaceholder';\n\nexport type VideoProps = ComponentPropsWithoutRef<'video'> & {\n  /**\n   * Pass false to disable rendering video and render fallback\n   * even if the participant has published video.\n   * @default true\n   */\n  enabled?: boolean;\n  /**\n   * Forces the video to be mirrored or unmirrored. By default, video track\n   * from the local participant is mirrored, and all other videos are not mirrored.\n   */\n  mirror?: boolean;\n  /**\n   * The track type to display.\n   */\n  trackType: VideoTrackType | 'none';\n  /**\n   * The participant represented by this video element.\n   */\n  participant: StreamVideoParticipant;\n  /**\n   * Override the default UI that's visible when a participant turned off their video.\n   * Set it to `null` if you wish to disable the video placeholder.\n   *\n   * @default DefaultVideoPlaceholder\n   */\n  VideoPlaceholder?: ComponentType<VideoPlaceholderProps> | null;\n  /**\n   * Override the default UI that's dispayed in place of the video when it's playing\n   * in picture-in-picture. Set it to `null` if you wish to display the browser's default\n   * placeholder.\n   *\n   * @default DefaultPictureInPicturePlaceholder\n   */\n  PictureInPicturePlaceholder?: ComponentType<PictureInPicturePlaceholderProps> | null;\n  /**\n  /**\n   * An object with setRef functions\n   * meant for exposing some of the internal elements of this component.\n   */\n  refs?: {\n    /**\n     * The video element that's used to play the video stream.\n     * @param element the video element.\n     */\n    setVideoElement?: (element: HTMLVideoElement | null) => void;\n    /**\n     * The video placeholder element that's used when the video stream is not playing.\n     * @param element the video placeholder element.\n     */\n    setVideoPlaceholderElement?: (element: HTMLDivElement | null) => void;\n    setPictureInPicturePlaceholderElement?: (\n      element: HTMLDivElement | null,\n    ) => void;\n  };\n};\n\nexport const Video = ({\n  enabled = true,\n  mirror,\n  trackType,\n  participant,\n  className,\n  VideoPlaceholder = DefaultVideoPlaceholder,\n  PictureInPicturePlaceholder = DefaultPictureInPicturePlaceholder,\n  refs,\n  ...rest\n}: VideoProps) => {\n  const {\n    sessionId,\n    videoStream,\n    screenShareStream,\n    viewportVisibilityState,\n    isLocalParticipant,\n    userId,\n  } = participant;\n\n  const call = useCall();\n  const [videoElement, setVideoElement] = useState<HTMLVideoElement | null>(\n    null,\n  );\n  // start with true, will flip once the video starts playing\n  const [isVideoPaused, setIsVideoPaused] = useState(true);\n  const [isWideMode, setIsWideMode] = useState(true);\n  const isPiP = usePictureInPictureState(videoElement ?? undefined);\n\n  const stream =\n    trackType === 'videoTrack'\n      ? videoStream\n      : trackType === 'screenShareTrack'\n        ? screenShareStream\n        : undefined;\n\n  useLayoutEffect(() => {\n    if (!call || !videoElement || trackType === 'none') return;\n\n    const cleanup = call.bindVideoElement(videoElement, sessionId, trackType);\n\n    return () => {\n      cleanup?.();\n    };\n  }, [call, trackType, sessionId, videoElement]);\n\n  useEffect(() => {\n    if (!stream || !videoElement) return;\n\n    const [track] = stream.getVideoTracks();\n    if (!track) return;\n\n    const handlePlayPause = () => {\n      setIsVideoPaused(videoElement.paused);\n\n      const { width = 0, height = 0 } = track.getSettings();\n      setIsWideMode(width >= height);\n    };\n\n    // playback may have started before we had a chance to\n    // attach the 'play/pause' event listener, so we set the state\n    // here to make sure it's in sync\n    setIsVideoPaused(videoElement.paused);\n\n    videoElement.addEventListener('play', handlePlayPause);\n    videoElement.addEventListener('pause', handlePlayPause);\n    track.addEventListener('unmute', handlePlayPause);\n    return () => {\n      videoElement.removeEventListener('play', handlePlayPause);\n      videoElement.removeEventListener('pause', handlePlayPause);\n      track.removeEventListener('unmute', handlePlayPause);\n\n      // reset the 'pause' state once we unmount the video element\n      setIsVideoPaused(true);\n    };\n  }, [stream, videoElement]);\n\n  if (!call) return null;\n\n  const isPublishingTrack =\n    trackType === 'videoTrack'\n      ? hasVideo(participant)\n      : trackType === 'screenShareTrack'\n        ? hasScreenShare(participant)\n        : false;\n\n  const isInvisible =\n    trackType === 'none' ||\n    viewportVisibilityState?.[trackType] === VisibilityState.INVISIBLE;\n\n  const hasNoVideoOrInvisible =\n    !enabled ||\n    !isPublishingTrack ||\n    isInvisible ||\n    hasPausedTrack(participant, trackType);\n  const mirrorVideo =\n    mirror === undefined\n      ? isLocalParticipant && trackType === 'videoTrack'\n      : mirror;\n  const isScreenShareTrack = trackType === 'screenShareTrack';\n  return (\n    <>\n      {!hasNoVideoOrInvisible && (\n        <video\n          {...rest}\n          className={clsx('str-video__video', className, {\n            'str-video__video--not-playing': isVideoPaused,\n            'str-video__video--tall': !isWideMode,\n            'str-video__video--mirror': mirrorVideo,\n            'str-video__video--screen-share': isScreenShareTrack,\n          })}\n          data-user-id={userId}\n          data-session-id={sessionId}\n          ref={(element) => {\n            setVideoElement(element);\n            refs?.setVideoElement?.(element);\n          }}\n        />\n      )}\n      {isPiP && PictureInPicturePlaceholder && (\n        <PictureInPicturePlaceholder\n          style={{ position: 'absolute' }}\n          participant={participant}\n        />\n      )}\n      {/* TODO: add condition to \"hold\" the placeholder until track unmutes as well */}\n      {(hasNoVideoOrInvisible || isVideoPaused) && VideoPlaceholder && (\n        <VideoPlaceholder\n          style={{ position: 'absolute' }}\n          participant={participant}\n          ref={refs?.setVideoPlaceholderElement}\n        />\n      )}\n    </>\n  );\n};\n\nVideo.displayName = 'Video';\n", "import { useEffect } from 'react';\nimport { DynascaleManager, VideoTrackType } from '@stream-io/video-client';\nimport { useCall } from '@stream-io/video-react-bindings';\n\nexport const useTrackElementVisibility = <T extends HTMLElement>({\n  trackedElement,\n  dynascaleManager: propsDynascaleManager,\n  sessionId,\n  trackType,\n}: {\n  trackedElement: T | null;\n  sessionId: string;\n  dynascaleManager?: DynascaleManager;\n  trackType: VideoTrackType | 'none';\n}) => {\n  const call = useCall();\n  const manager = propsDynascaleManager ?? call?.dynascaleManager;\n  useEffect(() => {\n    if (!trackedElement || !manager || !call || trackType === 'none') return;\n    const unobserve = manager.trackElementVisibility(\n      trackedElement,\n      sessionId,\n      trackType,\n    );\n    return () => {\n      unobserve();\n    };\n  }, [trackedElement, manager, call, sessionId, trackType]);\n};\n", "import { ComponentProps, CSSProperties, useState } from 'react';\nimport clsx from 'clsx';\n\nexport type AvatarData = {\n  imageSrc?: string;\n  name?: string;\n  style?: CSSProperties & Record<string, string | number>;\n};\n\nexport type AvatarProps = AvatarData & ComponentProps<'img'>;\n\nexport const Avatar = ({\n  imageSrc,\n  name,\n  style,\n  className,\n  ...rest\n}: AvatarProps) => {\n  const [error, setError] = useState(false);\n\n  return (\n    <>\n      {(!imageSrc || error) && name && (\n        <AvatarFallback className={className} style={style} names={[name]} />\n      )}\n      {imageSrc && !error && (\n        <img\n          onError={() => setError(true)}\n          alt=\"avatar\"\n          className={clsx('str-video__avatar', className)}\n          src={imageSrc}\n          style={style}\n          {...rest}\n        />\n      )}\n    </>\n  );\n};\n\ntype AvatarFallbackProps = {\n  names: string[];\n  className?: string;\n  style?: CSSProperties & Record<string, string | number>;\n};\nexport const AvatarFallback = ({\n  className,\n  names,\n  style,\n}: AvatarFallbackProps) => {\n  return (\n    <div\n      className={clsx('str-video__avatar--initials-fallback', className)}\n      style={style}\n    >\n      <div>\n        {names[0][0]}\n        {names[1]?.[0]}\n      </div>\n    </div>\n  );\n};\n", "import {\n  createContext,\n  PropsWithChildren,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { flushSync } from 'react-dom';\nimport { useCall, useCallStateHooks } from '@stream-io/video-react-bindings';\nimport { Call, disposeOfMediaStream } from '@stream-io/video-client';\nimport {\n  BackgroundBlurLevel,\n  BackgroundFilter,\n  createRenderer,\n  isPlatformSupported,\n  isMediaPipePlatformSupported,\n  loadTFLite,\n  loadMediaPipe,\n  PlatformSupportFlags,\n  VirtualBackground,\n  Renderer,\n  TFLite,\n  PerformanceStats,\n} from '@stream-io/video-filters-web';\nimport clsx from 'clsx';\n\n/**\n * Constants for FPS warning calculation.\n * Smooths out quick spikes using an EMA, ignores brief outliers,\n * and uses two thresholds to avoid flickering near the limit.\n */\nconst ALPHA = 0.2;\nconst FPS_WARNING_THRESHOLD_LOWER = 23;\nconst FPS_WARNING_THRESHOLD_UPPER = 25;\nconst DEFAULT_FPS = 30;\nconst DEVIATION_LIMIT = 0.5;\nconst OUTLIER_PERSISTENCE = 5;\n\n/**\n * Configuration for performance metric thresholds.\n */\nexport type BackgroundFiltersPerformanceThresholds = {\n  /**\n   * The lower FPS threshold for triggering a performance warning.\n   * When the EMA FPS falls below this value, a warning is shown.\n   * @default 23\n   */\n  fpsWarningThresholdLower?: number;\n\n  /**\n   * The upper FPS threshold for clearing a performance warning.\n   * When the EMA FPS rises above this value, the warning is cleared.\n   * @default 25\n   */\n  fpsWarningThresholdUpper?: number;\n\n  /**\n   * The default FPS value used as the initial value for the EMA (Exponential Moving Average)\n   * calculation and when stats are unavailable or when resetting the filter.\n   * @default 30\n   */\n  defaultFps?: number;\n};\n\n/**\n * Represents the available background filter processing engines.\n */\nenum FilterEngine {\n  TF,\n  MEDIA_PIPE,\n  NONE,\n}\n\n/**\n * Represents the possible reasons for background filter performance degradation.\n */\nexport enum PerformanceDegradationReason {\n  FRAME_DROP = 'frame-drop',\n  CPU_THROTTLING = 'cpu-throttling',\n}\n\nexport type BackgroundFiltersProps = PlatformSupportFlags & {\n  /**\n   * A list of URLs to use as background images.\n   */\n  backgroundImages?: string[];\n\n  /**\n   * The background filter to apply to the video (by default).\n   * @default undefined no filter applied\n   */\n  backgroundFilter?: BackgroundFilter;\n\n  /**\n   * The URL of the image to use as the background (by default).\n   */\n  backgroundImage?: string;\n\n  /**\n   * The level of blur to apply to the background (by default).\n   * @default 'high'.\n   */\n  backgroundBlurLevel?: BackgroundBlurLevel;\n\n  /**\n   * The base path for the TensorFlow Lite files.\n   * @default 'https://unpkg.com/@stream-io/video-filters-web/mediapipe'.\n   */\n  basePath?: string;\n\n  /**\n   * The path to the TensorFlow Lite WebAssembly file.\n   *\n   * Override this prop to use a custom path to the TensorFlow Lite WebAssembly file\n   * (e.g., if you choose to host it yourself).\n   */\n  tfFilePath?: string;\n\n  /**\n   * The path to the MediaPipe model file.\n   * Override this prop to use a custom path to the MediaPipe model file\n   * (e.g., if you choose to host it yourself).\n   */\n  modelFilePath?: string;\n\n  /**\n   * When true, the filter uses the legacy TensorFlow-based segmentation model.\n   * When false, it uses the default MediaPipe Tasks Vision model.\n   *\n   * Only enable this if you need to mimic the behavior of older SDK versions.\n   */\n  useLegacyFilter?: boolean;\n\n  /**\n   * When a started filter encounters an error, this callback will be executed.\n   * The default behavior (not overridable) is unregistering a failed filter.\n   * Use this callback to display UI error message, disable the corresponding stream,\n   * or to try registering the filter again.\n   */\n  onError?: (error: any) => void;\n\n  /**\n   * Configuration for performance metric thresholds.\n   * Use this to customize when performance warnings are triggered.\n   */\n  performanceThresholds?: BackgroundFiltersPerformanceThresholds;\n};\n\n/**\n * Performance degradation information for background filters.\n *\n * Performance is calculated using an Exponential Moving Average (EMA) of FPS values\n * to smooth out quick spikes and provide stable performance warnings.\n */\nexport type BackgroundFiltersPerformance = {\n  /**\n   * Whether performance is currently degraded.\n   */\n  degraded: boolean;\n  /**\n   * Reasons for performance degradation.\n   */\n  reason?: Array<PerformanceDegradationReason>;\n};\n\nexport type BackgroundFiltersAPI = {\n  /**\n   * Whether the current platform supports the background filters.\n   */\n  isSupported: boolean;\n\n  /**\n   * Indicates whether the background filters engine is loaded and ready.\n   */\n  isReady: boolean;\n\n  /**\n   * Performance information for background filters.\n   */\n  performance: BackgroundFiltersPerformance;\n\n  /**\n   * Disables all background filters applied to the video.\n   */\n  disableBackgroundFilter: () => void;\n\n  /**\n   * Applies a background blur filter to the video.\n   *\n   * @param blurLevel the level of blur to apply to the background.\n   */\n  applyBackgroundBlurFilter: (blurLevel: BackgroundBlurLevel) => void;\n\n  /**\n   * Applies a background image filter to the video.\n   *\n   * @param imageUrl the URL of the image to use as the background.\n   */\n  applyBackgroundImageFilter: (imageUrl: string) => void;\n};\n\n/**\n * The context value for the background filters context.\n */\nexport type BackgroundFiltersContextValue = BackgroundFiltersProps &\n  BackgroundFiltersAPI;\n\n/**\n * The context for the background filters.\n */\nconst BackgroundFiltersContext = createContext<\n  BackgroundFiltersContextValue | undefined\n>(undefined);\n\n/**\n * A hook to access the background filters context API.\n */\nexport const useBackgroundFilters = () => {\n  const context = useContext(BackgroundFiltersContext);\n  if (!context) {\n    throw new Error(\n      'useBackgroundFilters must be used within a BackgroundFiltersProvider',\n    );\n  }\n  return context;\n};\n\n/**\n * Determines which filter engine is available.\n * MEDIA_PIPE is the default unless legacy filters are requested or MediaPipe is unsupported.\n *\n * Returns NONE if neither is supported.\n */\nconst determineEngine = async (\n  useLegacyFilter: boolean | undefined,\n  forceSafariSupport: boolean | undefined,\n  forceMobileSupport: boolean | undefined,\n): Promise<FilterEngine> => {\n  const isTfPlatformSupported = await isPlatformSupported({\n    forceSafariSupport,\n    forceMobileSupport,\n  });\n\n  if (useLegacyFilter) {\n    return isTfPlatformSupported ? FilterEngine.TF : FilterEngine.NONE;\n  }\n\n  const isMediaPipeSupported = await isMediaPipePlatformSupported({\n    forceSafariSupport,\n    forceMobileSupport,\n  });\n\n  return isMediaPipeSupported ? FilterEngine.MEDIA_PIPE : FilterEngine.NONE;\n};\n\n/**\n * A provider component that enables the use of background filters in your app.\n *\n * Please make sure you have the `@stream-io/video-filters-web` package installed\n * in your project before using this component.\n */\nexport const BackgroundFiltersProvider = (\n  props: PropsWithChildren<BackgroundFiltersProps>,\n) => {\n  const {\n    children,\n    backgroundImages = [],\n    backgroundFilter: bgFilterFromProps = undefined,\n    backgroundImage: bgImageFromProps = undefined,\n    backgroundBlurLevel: bgBlurLevelFromProps = undefined,\n    tfFilePath,\n    modelFilePath,\n    useLegacyFilter,\n    basePath,\n    onError,\n    performanceThresholds,\n    forceSafariSupport,\n    forceMobileSupport,\n  } = props;\n\n  const call = useCall();\n  const { useCallStatsReport } = useCallStateHooks();\n  const callStatsReport = useCallStatsReport();\n\n  const [backgroundFilter, setBackgroundFilter] = useState(bgFilterFromProps);\n  const [backgroundImage, setBackgroundImage] = useState(bgImageFromProps);\n  const [backgroundBlurLevel, setBackgroundBlurLevel] =\n    useState(bgBlurLevelFromProps);\n\n  const [showLowFpsWarning, setShowLowFpsWarning] = useState<boolean>(false);\n\n  const fpsWarningThresholdLower =\n    performanceThresholds?.fpsWarningThresholdLower ??\n    FPS_WARNING_THRESHOLD_LOWER;\n  const fpsWarningThresholdUpper =\n    performanceThresholds?.fpsWarningThresholdUpper ??\n    FPS_WARNING_THRESHOLD_UPPER;\n  const defaultFps = performanceThresholds?.defaultFps ?? DEFAULT_FPS;\n\n  const emaRef = useRef<number>(defaultFps);\n  const outlierStreakRef = useRef<number>(0);\n\n  const handleStats = useCallback(\n    (stats: PerformanceStats) => {\n      const fps = stats?.fps;\n      if (fps === undefined || fps === null) {\n        emaRef.current = defaultFps;\n        outlierStreakRef.current = 0;\n        setShowLowFpsWarning(false);\n        return;\n      }\n\n      const prevEma = emaRef.current;\n      const deviation = Math.abs(fps - prevEma) / prevEma;\n\n      const isOutlier = fps < prevEma && deviation > DEVIATION_LIMIT;\n      outlierStreakRef.current = isOutlier ? outlierStreakRef.current + 1 : 0;\n      if (isOutlier && outlierStreakRef.current < OUTLIER_PERSISTENCE) return;\n\n      emaRef.current = ALPHA * fps + (1 - ALPHA) * prevEma;\n\n      setShowLowFpsWarning((prev) => {\n        if (prev && emaRef.current > fpsWarningThresholdUpper) return false;\n        if (!prev && emaRef.current < fpsWarningThresholdLower) return true;\n\n        return prev;\n      });\n    },\n    [fpsWarningThresholdLower, fpsWarningThresholdUpper, defaultFps],\n  );\n\n  const performance: BackgroundFiltersPerformance = useMemo(() => {\n    if (!backgroundFilter) {\n      return { degraded: false };\n    }\n\n    const reasons: Array<PerformanceDegradationReason> = [];\n\n    if (showLowFpsWarning) {\n      reasons.push(PerformanceDegradationReason.FRAME_DROP);\n    }\n\n    const qualityLimitationReasons =\n      callStatsReport?.publisherStats?.qualityLimitationReasons;\n\n    if (\n      showLowFpsWarning &&\n      qualityLimitationReasons &&\n      qualityLimitationReasons?.includes('cpu')\n    ) {\n      reasons.push(PerformanceDegradationReason.CPU_THROTTLING);\n    }\n\n    return {\n      degraded: reasons.length > 0,\n      reason: reasons.length > 0 ? reasons : undefined,\n    };\n  }, [\n    showLowFpsWarning,\n    callStatsReport?.publisherStats?.qualityLimitationReasons,\n    backgroundFilter,\n  ]);\n\n  const prevDegradedRef = useRef<boolean | undefined>(undefined);\n  useEffect(() => {\n    const currentDegraded = performance.degraded;\n    const prevDegraded = prevDegradedRef.current;\n\n    if (\n      !!backgroundFilter &&\n      prevDegraded !== undefined &&\n      prevDegraded !== currentDegraded\n    ) {\n      call?.tracer.trace('backgroundFilters.performance', {\n        degraded: currentDegraded,\n        reason: performance?.reason,\n        fps: emaRef.current,\n      });\n    }\n    prevDegradedRef.current = currentDegraded;\n  }, [\n    performanceThresholds,\n    performance.degraded,\n    performance.reason,\n    backgroundFilter,\n    call?.tracer,\n  ]);\n\n  const applyBackgroundImageFilter = useCallback((imageUrl: string) => {\n    setBackgroundFilter('image');\n    setBackgroundImage(imageUrl);\n  }, []);\n\n  const applyBackgroundBlurFilter = useCallback(\n    (blurLevel: BackgroundBlurLevel = 'high') => {\n      setBackgroundFilter('blur');\n      setBackgroundBlurLevel(blurLevel);\n    },\n    [],\n  );\n\n  const disableBackgroundFilter = useCallback(() => {\n    setBackgroundFilter(undefined);\n    setBackgroundImage(undefined);\n    setBackgroundBlurLevel(undefined);\n\n    emaRef.current = defaultFps;\n    outlierStreakRef.current = 0;\n    setShowLowFpsWarning(false);\n  }, [defaultFps]);\n\n  const [engine, setEngine] = useState<FilterEngine>(FilterEngine.NONE);\n  const [isSupported, setIsSupported] = useState(false);\n  useEffect(() => {\n    determineEngine(\n      useLegacyFilter,\n      forceSafariSupport,\n      forceMobileSupport,\n    ).then((determinedEngine) => {\n      setEngine(determinedEngine);\n      setIsSupported(determinedEngine !== FilterEngine.NONE);\n    });\n  }, [forceMobileSupport, forceSafariSupport, useLegacyFilter]);\n\n  const [tfLite, setTfLite] = useState<TFLite>();\n  useEffect(() => {\n    if (engine !== FilterEngine.TF) return;\n\n    loadTFLite({ basePath, modelFilePath, tfFilePath })\n      .then(setTfLite)\n      .catch((err) => console.error('Failed to load TFLite', err));\n  }, [basePath, engine, modelFilePath, tfFilePath]);\n\n  const [mediaPipe, setMediaPipe] = useState<ArrayBuffer>();\n  useEffect(() => {\n    if (engine !== FilterEngine.MEDIA_PIPE) return;\n\n    loadMediaPipe({\n      basePath: basePath,\n      modelPath: modelFilePath,\n    })\n      .then(setMediaPipe)\n      .catch((err) => console.error('Failed to preload MediaPipe', err));\n  }, [engine, modelFilePath, basePath]);\n\n  const handleError = useCallback(\n    (error: any) => {\n      console.warn(\n        '[filters] Filter encountered an error and will be disabled',\n      );\n      disableBackgroundFilter();\n      onError?.(error);\n    },\n    [disableBackgroundFilter, onError],\n  );\n\n  const isReady = useLegacyFilter ? !!tfLite : !!mediaPipe;\n  return (\n    <BackgroundFiltersContext.Provider\n      value={{\n        isSupported,\n        performance,\n        isReady,\n        backgroundImage,\n        backgroundBlurLevel,\n        backgroundFilter,\n        disableBackgroundFilter,\n        applyBackgroundBlurFilter,\n        applyBackgroundImageFilter,\n        backgroundImages,\n        tfFilePath,\n        modelFilePath,\n        basePath,\n        onError: handleError,\n      }}\n    >\n      {children}\n      {isReady && (\n        <BackgroundFilters\n          tfLite={tfLite}\n          engine={engine}\n          onStats={handleStats}\n        />\n      )}\n    </BackgroundFiltersContext.Provider>\n  );\n};\n\nconst BackgroundFilters = (props: {\n  tfLite?: TFLite;\n  engine: FilterEngine;\n  onStats: (stats: PerformanceStats) => void;\n}) => {\n  const call = useCall();\n  const { children, start } = useRenderer(props.tfLite, call, props.engine);\n  const { onError, backgroundFilter } = useBackgroundFilters();\n  const handleErrorRef = useRef<((error: any) => void) | undefined>(undefined);\n  handleErrorRef.current = onError;\n\n  const handleStatsRef = useRef<\n    ((stats: PerformanceStats) => void) | undefined\n  >(undefined);\n  handleStatsRef.current = props.onStats;\n\n  useEffect(() => {\n    if (!call || !backgroundFilter) return;\n\n    const { unregister } = call.camera.registerFilter((ms) => {\n      return start(\n        ms,\n        (error) => handleErrorRef.current?.(error),\n        (stats: PerformanceStats) => handleStatsRef.current?.(stats),\n      );\n    });\n    return () => {\n      unregister().catch((err) => console.warn(`Can't unregister filter`, err));\n    };\n  }, [call, start, backgroundFilter]);\n\n  return children;\n};\n\nconst useRenderer = (\n  tfLite: TFLite | undefined,\n  call: Call | undefined,\n  engine: FilterEngine,\n) => {\n  const {\n    backgroundFilter,\n    backgroundBlurLevel,\n    backgroundImage,\n    modelFilePath,\n    basePath,\n  } = useBackgroundFilters();\n\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const bgImageRef = useRef<HTMLImageElement>(null);\n  const [videoSize, setVideoSize] = useState<{ width: number; height: number }>(\n    {\n      width: 1920,\n      height: 1080,\n    },\n  );\n\n  const start = useCallback(\n    (\n      ms: MediaStream,\n      onError?: (error: any) => void,\n      onStats?: (stats: PerformanceStats) => void,\n    ) => {\n      let outputStream: MediaStream | undefined;\n      let processor: VirtualBackground | undefined;\n      let renderer: Renderer | undefined;\n\n      const output = new Promise<MediaStream>((resolve, reject) => {\n        if (!backgroundFilter) {\n          reject(new Error('No filter specified'));\n          return;\n        }\n\n        const videoEl = videoRef.current;\n        const canvasEl = canvasRef.current;\n        const bgImageEl = bgImageRef.current;\n\n        const [track] = ms.getVideoTracks();\n\n        if (!track) {\n          reject(new Error('No video tracks in input media stream'));\n          return;\n        }\n\n        if (engine === FilterEngine.MEDIA_PIPE) {\n          call?.tracer.trace('backgroundFilters.enable', {\n            backgroundFilter,\n            backgroundBlurLevel,\n            backgroundImage,\n            engine,\n          });\n\n          if (!videoEl) {\n            reject(new Error('Renderer started before elements are ready'));\n            return;\n          }\n\n          const trackSettings = track.getSettings();\n          flushSync(() =>\n            setVideoSize({\n              width: trackSettings.width ?? 0,\n              height: trackSettings.height ?? 0,\n            }),\n          );\n\n          processor = new VirtualBackground(\n            track,\n            {\n              basePath: basePath,\n              modelPath: modelFilePath,\n              backgroundBlurLevel,\n              backgroundImage,\n              backgroundFilter,\n            },\n            { onError, onStats },\n          );\n          processor\n            .start()\n            .then((processedTrack) => {\n              outputStream = new MediaStream([processedTrack]);\n              resolve(outputStream);\n            })\n            .catch((error) => {\n              reject(error);\n            });\n\n          return;\n        }\n\n        if (engine === FilterEngine.TF) {\n          if (!videoEl || !canvasEl || (backgroundImage && !bgImageEl)) {\n            reject(new Error('Renderer started before elements are ready'));\n            return;\n          }\n\n          videoEl.srcObject = ms;\n          videoEl.play().then(\n            () => {\n              const trackSettings = track.getSettings();\n              flushSync(() =>\n                setVideoSize({\n                  width: trackSettings.width ?? 0,\n                  height: trackSettings.height ?? 0,\n                }),\n              );\n              call?.tracer.trace('backgroundFilters.enable', {\n                backgroundFilter,\n                backgroundBlurLevel,\n                backgroundImage,\n                engine,\n              });\n\n              if (!tfLite) {\n                reject(new Error('TensorFlow Lite not loaded'));\n                return;\n              }\n\n              renderer = createRenderer(\n                tfLite,\n                videoEl,\n                canvasEl,\n                {\n                  backgroundFilter,\n                  backgroundBlurLevel,\n                  backgroundImage: bgImageEl ?? undefined,\n                },\n                onError,\n              );\n              outputStream = canvasEl.captureStream();\n\n              resolve(outputStream);\n            },\n            () => {\n              reject(new Error('Could not play the source video stream'));\n            },\n          );\n          return;\n        }\n\n        reject(new Error('No supported engine available'));\n      });\n\n      return {\n        output,\n        stop: () => {\n          call?.tracer.trace('backgroundFilters.disable', null);\n          processor?.stop();\n          renderer?.dispose();\n          if (videoRef.current) videoRef.current.srcObject = null;\n          if (outputStream) disposeOfMediaStream(outputStream);\n        },\n      };\n    },\n    [\n      backgroundBlurLevel,\n      backgroundFilter,\n      backgroundImage,\n      call?.tracer,\n      tfLite,\n      engine,\n      modelFilePath,\n      basePath,\n    ],\n  );\n\n  const children = (\n    <div className=\"str-video__background-filters\">\n      <video\n        className={clsx(\n          'str-video__background-filters__video',\n          videoSize.height > videoSize.width &&\n            'str-video__background-filters__video--tall',\n        )}\n        ref={videoRef}\n        playsInline\n        muted\n        controls={false}\n        {...videoSize}\n      />\n      {backgroundImage && (\n        <img\n          className=\"str-video__background-filters__background-image\"\n          alt=\"Background\"\n          ref={bgImageRef}\n          crossOrigin=\"anonymous\"\n          src={backgroundImage}\n          {...videoSize}\n        />\n      )}\n      <canvas\n        className=\"str-video__background-filters__target-canvas\"\n        {...videoSize}\n        ref={canvasRef}\n      />\n    </div>\n  );\n\n  return { start, children };\n};\n", "import { ComponentProps, ForwardedRef, forwardRef } from 'react';\nimport clsx from 'clsx';\n\nimport { Icon, IconProps } from '../Icon';\n\nexport type ButtonWithIconProps = {\n  enabled?: boolean;\n  variant?: string;\n} & ComponentProps<'button'> &\n  IconProps;\n\nexport const IconButton = forwardRef(function IconButton(\n  props: ButtonWithIconProps,\n  ref: ForwardedRef<HTMLButtonElement>,\n) {\n  const { icon, enabled, variant, onClick, className, ...rest } = props;\n  return (\n    <button\n      className={clsx('str-video__call-controls__button', className, {\n        [`str-video__call-controls__button--variant-${variant}`]: variant,\n        'str-video__call-controls__button--enabled': enabled,\n      })}\n      onClick={(e) => {\n        e.preventDefault();\n        onClick?.(e);\n      }}\n      ref={ref}\n      {...rest}\n    >\n      <Icon icon={icon} />\n    </button>\n  );\n});\n", "import clsx from 'clsx';\nimport { MenuToggle, ToggleMenuButtonProps } from '../Menu';\nimport {\n  ComponentProps,\n  ComponentType,\n  forwardRef,\n  PropsWithChildren,\n  ReactElement,\n} from 'react';\nimport { Placement } from '@floating-ui/react';\n\nimport { IconButton } from './IconButton';\nimport { isComponentType } from '../../utilities';\n\nexport type IconButtonWithMenuProps<E extends HTMLElement = HTMLButtonElement> =\n  PropsWithChildren<{\n    active?: boolean;\n    Menu?: ComponentType | ReactElement | null;\n    caption?: string;\n    className?: string;\n    menuPlacement?: Placement;\n    menuOffset?: number;\n    ToggleMenuButton?: ComponentType<ToggleMenuButtonProps<E>>;\n    variant?: 'primary' | 'secondary';\n    onMenuToggle?: (menuShown: boolean) => void;\n  }> &\n    ComponentProps<'button'>;\n\nexport const CompositeButton = forwardRef<\n  HTMLDivElement,\n  IconButtonWithMenuProps\n>(function CompositeButton(\n  {\n    disabled,\n    caption,\n    children,\n    className,\n    active,\n    Menu,\n    menuPlacement,\n    menuOffset,\n    title,\n    ToggleMenuButton = DefaultToggleMenuButton,\n    variant,\n    onClick,\n    onMenuToggle,\n    ...restButtonProps\n  },\n  ref,\n) {\n  return (\n    <div\n      className={clsx('str-video__composite-button', className, {\n        'str-video__composite-button--caption': caption,\n        'str-video__composite-button--menu': Menu,\n      })}\n      title={title}\n      ref={ref}\n    >\n      <div\n        className={clsx('str-video__composite-button__button-group', {\n          'str-video__composite-button__button-group--active': active,\n          'str-video__composite-button__button-group--active-primary':\n            active && variant === 'primary',\n          'str-video__composite-button__button-group--active-secondary':\n            active && variant === 'secondary',\n          'str-video__composite-button__button-group--disabled': disabled,\n        })}\n      >\n        <button\n          type=\"button\"\n          className=\"str-video__composite-button__button\"\n          onClick={(e) => {\n            e.preventDefault();\n            onClick?.(e);\n          }}\n          disabled={disabled}\n          {...restButtonProps}\n        >\n          {children}\n        </button>\n        {Menu && (\n          <MenuToggle\n            offset={menuOffset}\n            placement={menuPlacement}\n            ToggleButton={ToggleMenuButton}\n            onToggle={onMenuToggle}\n          >\n            {isComponentType(Menu) ? <Menu /> : Menu}\n          </MenuToggle>\n        )}\n      </div>\n      {caption && (\n        <div className=\"str-video__composite-button__caption\">{caption}</div>\n      )}\n    </div>\n  );\n});\n\nconst DefaultToggleMenuButton = forwardRef<\n  HTMLButtonElement,\n  ToggleMenuButtonProps\n>(function DefaultToggleMenuButton({ menuShown }, ref) {\n  return (\n    <IconButton\n      className={clsx('str-video__menu-toggle-button', {\n        'str-video__menu-toggle-button--active': menuShown,\n      })}\n      icon={menuShown ? 'caret-down' : 'caret-up'}\n      ref={ref}\n    />\n  );\n});\n", "import { ComponentProps } from 'react';\n\nexport const TextButton = ({\n  children,\n  ...rest\n}: Omit<ComponentProps<'button'>, 'ref' | 'className'>) => {\n  return (\n    <button {...rest} className=\"str-video__text-button\">\n      {children}\n    </button>\n  );\n};\n", "import { MouseEventHandler, useCallback } from 'react';\nimport { IconButton } from '../Button';\nimport { useCall } from '@stream-io/video-react-bindings';\n\nexport type AcceptCallButtonProps = {\n  disabled?: boolean;\n  onClick?: MouseEventHandler<HTMLButtonElement>;\n  onAccept?: () => void;\n};\n\nexport const AcceptCallButton = ({\n  disabled,\n  onAccept,\n  onClick,\n}: AcceptCallButtonProps) => {\n  const call = useCall();\n  const handleClick: MouseEventHandler<HTMLButtonElement> = useCallback(\n    async (e) => {\n      if (onClick) {\n        onClick(e);\n      } else if (call) {\n        await call.join();\n        onAccept?.();\n      }\n    },\n    [onClick, onAccept, call],\n  );\n  return (\n    <IconButton\n      disabled={disabled}\n      icon=\"call-accept\"\n      variant=\"success\"\n      data-testid=\"accept-call-button\"\n      onClick={handleClick}\n    />\n  );\n};\n", "import { PropsWithChildren, ReactNode, useEffect } from 'react';\nimport clsx from 'clsx';\nimport { Placement } from '@floating-ui/react';\nimport { useFloatingUIPreset } from '../../hooks';\n\nexport type NotificationProps = {\n  message?: ReactNode;\n  isVisible?: boolean;\n  visibilityTimeout?: number;\n  resetIsVisible?: () => void;\n  placement?: Placement;\n  className?: string;\n  iconClassName?: string | null;\n  close?: () => void;\n};\n\nexport const Notification = (props: PropsWithChildren<NotificationProps>) => {\n  const {\n    isVisible,\n    message,\n    children,\n    visibilityTimeout,\n    resetIsVisible,\n    placement = 'top',\n    className,\n    iconClassName = 'str-video__notification__icon',\n    close,\n  } = props;\n\n  const { refs, x, y, strategy } = useFloatingUIPreset({\n    placement,\n    strategy: 'absolute',\n  });\n\n  useEffect(() => {\n    if (!isVisible || !visibilityTimeout || !resetIsVisible) return;\n\n    const timeout = setTimeout(() => {\n      resetIsVisible();\n    }, visibilityTimeout);\n\n    return () => clearTimeout(timeout);\n  }, [isVisible, resetIsVisible, visibilityTimeout]);\n\n  return (\n    <div ref={refs.setReference}>\n      {isVisible && (\n        <div\n          className={clsx('str-video__notification', className)}\n          ref={refs.setFloating}\n          style={{\n            position: strategy,\n            top: y ?? 0,\n            left: x ?? 0,\n            overflowY: 'auto',\n          }}\n        >\n          {iconClassName && <i className={iconClassName} />}\n          <span className=\"str-video__notification__message\">{message}</span>\n          {close ? (\n            <i\n              className=\"str-video__icon str-video__icon--close str-video__notification__close\"\n              onClick={close}\n            />\n          ) : null}\n        </div>\n      )}\n      {children}\n    </div>\n  );\n};\n", "import { Notification } from './Notification';\nimport { OwnCapability } from '@stream-io/video-client';\nimport {\n  PropsWithChildren,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { useCallStateHooks } from '@stream-io/video-react-bindings';\n\nexport type PermissionNotificationProps = PropsWithChildren<{\n  /**\n   * Set this to true if there is ongoing request for the permission.\n   */\n  isAwaitingApproval: boolean;\n\n  /**\n   * The message to display in the notification once\n   * the requested permission is granted.\n   */\n  messageApproved: string;\n\n  /**\n   * The message to display in the notification once a permission\n   * is revoked.\n   */\n  messageRevoked: string;\n\n  /**\n   * The message to display in the notification while\n   * the requested permission is awaiting approval.\n   */\n  messageAwaitingApproval: string;\n\n  /**\n   * The permission to check for.\n   */\n  permission: OwnCapability;\n\n  /**\n   * The time in milliseconds to display the notification.\n   * Defaults to 3500ms.\n   */\n  visibilityTimeout?: number;\n}>;\n\nexport const PermissionNotification = (props: PermissionNotificationProps) => {\n  const {\n    permission,\n    isAwaitingApproval,\n    messageApproved,\n    messageAwaitingApproval,\n    messageRevoked,\n    visibilityTimeout = 3500,\n    children,\n  } = props;\n  const { useHasPermissions } = useCallStateHooks();\n  const hasPermission = useHasPermissions(permission);\n  const prevHasPermission = useRef(hasPermission);\n  const [showNotification, setShowNotification] = useState<\n    'granted' | 'revoked'\n  >();\n  useEffect(() => {\n    if (prevHasPermission.current === hasPermission) return;\n\n    if (hasPermission) {\n      setShowNotification('granted');\n      prevHasPermission.current = true;\n    } else {\n      setShowNotification('revoked');\n      prevHasPermission.current = false;\n    }\n  }, [hasPermission]);\n\n  const resetIsVisible = useCallback(() => setShowNotification(undefined), []);\n  if (isAwaitingApproval) {\n    return (\n      <Notification\n        isVisible={isAwaitingApproval && !hasPermission}\n        message={messageAwaitingApproval}\n      >\n        {children}\n      </Notification>\n    );\n  }\n\n  return (\n    <Notification\n      isVisible={!!showNotification}\n      visibilityTimeout={visibilityTimeout}\n      resetIsVisible={resetIsVisible}\n      message={\n        showNotification === 'granted' ? messageApproved : messageRevoked\n      }\n    >\n      {children}\n    </Notification>\n  );\n};\n", "import { PropsWithChildren } from 'react';\nimport { Placement } from '@floating-ui/react';\n\nimport { useCallStateHooks, useI18n } from '@stream-io/video-react-bindings';\nimport { Notification } from './Notification';\n\nexport type SpeakingWhileMutedNotificationProps = {\n  /**\n   * Text message displayed by the notification.\n   */\n  text?: string;\n  placement?: Placement;\n};\n\nexport const SpeakingWhileMutedNotification = ({\n  children,\n  text,\n  placement,\n}: PropsWithChildren<SpeakingWhileMutedNotificationProps>) => {\n  const { useMicrophoneState } = useCallStateHooks();\n  const { isSpeakingWhileMuted } = useMicrophoneState();\n  const { t } = useI18n();\n\n  const message = text ?? t('You are muted. Unmute to speak.');\n  return (\n    <Notification\n      message={message}\n      isVisible={isSpeakingWhileMuted}\n      placement={placement || 'top-start'}\n    >\n      {children}\n    </Notification>\n  );\n};\n", "import { PropsWithChildren, useEffect, useState } from 'react';\nimport {\n  useI18n,\n  useToggleCallRecording,\n} from '@stream-io/video-react-bindings';\nimport { Notification } from './Notification';\n\nexport type RecordingInProgressNotificationProps = {\n  text?: string;\n};\n\nexport const RecordingInProgressNotification = ({\n  children,\n  text,\n}: PropsWithChildren<RecordingInProgressNotificationProps>) => {\n  const { t } = useI18n();\n  const { isCallRecordingInProgress } = useToggleCallRecording();\n\n  const [isVisible, setVisible] = useState(false);\n\n  const message = text ?? t('Recording in progress...');\n\n  useEffect(() => {\n    if (isCallRecordingInProgress) {\n      setVisible(true);\n    } else {\n      setVisible(false);\n    }\n  }, [isCallRecordingInProgress]);\n\n  return (\n    <Notification\n      message={message}\n      iconClassName=\"str-video__icon str-video__icon--recording-on\"\n      isVisible={isVisible}\n      placement=\"top-start\"\n      close={() => setVisible(false)}\n    >\n      {children}\n    </Notification>\n  );\n};\n", "import clsx from 'clsx';\n\nexport type LoadingIndicatorProps = {\n  className?: string;\n  /** String will be injected into class and later used to apply as a CSS mask-image to an element as data URL */\n  type?: string;\n  /** Text to be displayed under the loading indicator icon */\n  text?: string;\n  /** Tooltip to be displayed on hover */\n  tooltip?: string;\n};\n\nexport const LoadingIndicator = ({\n  className,\n  type = 'spinner',\n  text,\n  tooltip,\n}: LoadingIndicatorProps) => {\n  return (\n    <div\n      className={clsx('str-video__loading-indicator', className)}\n      title={tooltip}\n    >\n      <div className={clsx('str-video__loading-indicator__icon', type)}></div>\n      {text && <p className=\"str-video__loading-indicator-text\">{text}</p>}\n    </div>\n  );\n};\n", "import { PropsWithChildren, useEffect, useRef } from 'react';\nimport clsx from 'clsx';\nimport { useFloatingUIPreset } from '../../hooks';\nimport { FloatingArrow, Placement, arrow } from '@floating-ui/react';\n\nexport type TooltipProps<T extends HTMLElement> = PropsWithChildren<{\n  /** Reference element to which the tooltip should attach to */\n  referenceElement: T | null;\n  /** Additional class applied to the tooltip root element */\n  tooltipClassName?: string;\n  /** Popper's modifier (offset) property - [xAxis offset, yAxis offset], default [0, 10] */\n  offset?: [number, number];\n  /** Popper's placement property defining default position of the tooltip, default 'top' */\n  tooltipPlacement?: Placement;\n  /** Tells component whether to render its contents */\n  visible?: boolean;\n}>;\n\nexport const Tooltip = <T extends HTMLElement>({\n  children,\n  referenceElement,\n  tooltipClassName,\n  tooltipPlacement = 'top',\n  visible = false,\n}: TooltipProps<T>) => {\n  const arrowRef = useRef<SVGSVGElement>(null);\n  const { refs, x, y, strategy, context } = useFloatingUIPreset({\n    placement: tooltipPlacement,\n    strategy: 'absolute',\n    middleware: [arrow({ element: arrowRef })],\n  });\n\n  useEffect(() => {\n    refs.setReference(referenceElement);\n  }, [referenceElement, refs]);\n\n  if (!visible) return null;\n\n  return (\n    <div\n      className={clsx('str-video__tooltip', tooltipClassName)}\n      ref={refs.setFloating}\n      style={{\n        position: strategy,\n        top: y ?? 0,\n        left: x ?? 0,\n      }}\n    >\n      <FloatingArrow\n        ref={arrowRef}\n        context={context}\n        fill=\"var(--str-video__tooltip--background-color)\"\n      />\n      {children}\n    </div>\n  );\n};\n", "import { MouseEventHandler, useCallback, useState } from 'react';\n\nexport const useEnterLeaveHandlers = <T extends HTMLElement>({\n  onMouseEnter,\n  onMouseLeave,\n}: Partial<\n  Record<'onMouseEnter' | 'onMouseLeave', MouseEventHandler<T>>\n> = {}) => {\n  const [tooltipVisible, setTooltipVisible] = useState(false);\n\n  const handleMouseEnter: MouseEventHandler<T> = useCallback(\n    (e) => {\n      setTooltipVisible(true);\n      onMouseEnter?.(e);\n    },\n    [onMouseEnter],\n  );\n\n  const handleMouseLeave: MouseEventHandler<T> = useCallback(\n    (e) => {\n      setTooltipVisible(false);\n      onMouseLeave?.(e);\n    },\n    [onMouseLeave],\n  );\n\n  return { handleMouseEnter, handleMouseLeave, tooltipVisible };\n};\n", "import { ComponentProps, useState } from 'react';\nimport { Tooltip, TooltipProps } from './Tooltip';\nimport { useEnterLeaveHandlers } from './hooks';\n\ntype WithPopupProps = ComponentProps<'div'> &\n  Omit<TooltipProps<HTMLDivElement>, 'referenceElement' | 'children'> & {\n    tooltipDisabled?: boolean;\n  };\n\n// todo: duplicate of CallParticipantList.tsx#MediaIndicator - refactor to a single component\nexport const WithTooltip = ({\n  title,\n  tooltipClassName,\n  tooltipPlacement,\n  tooltipDisabled,\n  ...props\n}: WithPopupProps) => {\n  const { handleMouseEnter, handleMouseLeave, tooltipVisible } =\n    useEnterLeaveHandlers<HTMLDivElement>();\n  const [tooltipAnchor, setTooltipAnchor] = useState<HTMLDivElement | null>(\n    null,\n  );\n  const tooltipActuallyVisible =\n    !tooltipDisabled && Boolean(title) && tooltipVisible;\n\n  return (\n    <>\n      <Tooltip\n        referenceElement={tooltipAnchor}\n        visible={tooltipActuallyVisible}\n        tooltipClassName={tooltipClassName}\n        tooltipPlacement={tooltipPlacement}\n      >\n        {title || ''}\n      </Tooltip>\n      <div\n        ref={setTooltipAnchor}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n        {...props}\n      />\n    </>\n  );\n};\n", "import { forwardRef } from 'react';\n\nimport { OwnCapability } from '@stream-io/video-client';\nimport {\n  Restricted,\n  useI18n,\n  useToggleCallRecording,\n} from '@stream-io/video-react-bindings';\nimport { CompositeButton } from '../Button/';\nimport { Icon } from '../Icon';\nimport {\n  MenuToggle,\n  MenuVisualType,\n  ToggleMenuButtonProps,\n  useMenuContext,\n} from '../Menu';\nimport { LoadingIndicator } from '../LoadingIndicator';\nimport { WithTooltip } from '../Tooltip';\n\nexport type RecordCallButtonProps = {\n  caption?: string;\n};\n\nconst RecordEndConfirmation = () => {\n  const { t } = useI18n();\n  const { toggleCallRecording, isAwaitingResponse } = useToggleCallRecording();\n\n  const { close } = useMenuContext();\n\n  return (\n    <div className=\"str-video__end-recording__confirmation\">\n      <div className=\"str-video__end-recording__header\">\n        <Icon icon=\"recording-on\" />\n        <h2 className=\"str-video__end-recording__heading\">\n          {t('End recording')}\n        </h2>\n      </div>\n      <p className=\"str-video__end-recording__description\">\n        {t('Are you sure you want end the recording?')}\n      </p>\n      <div className=\"str-video__end-recording__actions\">\n        <CompositeButton variant=\"secondary\" onClick={close}>\n          {t('Cancel')}\n        </CompositeButton>\n        <CompositeButton variant=\"primary\" onClick={toggleCallRecording}>\n          {isAwaitingResponse ? <LoadingIndicator /> : t('End recording')}\n        </CompositeButton>\n      </div>\n    </div>\n  );\n};\n\nconst ToggleEndRecordingMenuButton = forwardRef<\n  HTMLDivElement,\n  ToggleMenuButtonProps\n>(function ToggleEndRecordingMenuButton(props, ref) {\n  return (\n    <CompositeButton\n      ref={ref}\n      active={true}\n      variant=\"secondary\"\n      data-testid=\"recording-stop-button\"\n    >\n      <Icon icon=\"recording-off\" />\n    </CompositeButton>\n  );\n});\n\nexport const RecordCallConfirmationButton = ({\n  caption,\n}: {\n  caption?: string;\n}) => {\n  const { t } = useI18n();\n  const { toggleCallRecording, isAwaitingResponse, isCallRecordingInProgress } =\n    useToggleCallRecording();\n\n  if (isCallRecordingInProgress) {\n    return (\n      <Restricted\n        requiredGrants={[\n          OwnCapability.START_RECORD_CALL,\n          OwnCapability.STOP_RECORD_CALL,\n        ]}\n      >\n        <MenuToggle\n          ToggleButton={ToggleEndRecordingMenuButton}\n          visualType={MenuVisualType.PORTAL}\n        >\n          <RecordEndConfirmation />\n        </MenuToggle>\n      </Restricted>\n    );\n  }\n\n  const title = isAwaitingResponse\n    ? t('Waiting for recording to start...')\n    : (caption ?? t('Record call'));\n\n  return (\n    <Restricted\n      requiredGrants={[\n        OwnCapability.START_RECORD_CALL,\n        OwnCapability.STOP_RECORD_CALL,\n      ]}\n    >\n      <WithTooltip title={title}>\n        <CompositeButton\n          active={isCallRecordingInProgress}\n          caption={caption}\n          variant=\"secondary\"\n          data-testid=\"recording-start-button\"\n          onClick={isAwaitingResponse ? undefined : toggleCallRecording}\n        >\n          {isAwaitingResponse ? (\n            <LoadingIndicator />\n          ) : (\n            <Icon icon=\"recording-off\" />\n          )}\n        </CompositeButton>\n      </WithTooltip>\n    </Restricted>\n  );\n};\n\nexport const RecordCallButton = ({ caption }: RecordCallButtonProps) => {\n  const { t } = useI18n();\n  const { toggleCallRecording, isAwaitingResponse, isCallRecordingInProgress } =\n    useToggleCallRecording();\n\n  let title = caption ?? t('Record call');\n\n  if (isAwaitingResponse) {\n    title = isCallRecordingInProgress\n      ? t('Waiting for recording to stop...')\n      : t('Waiting for recording to start...');\n  }\n\n  return (\n    <Restricted\n      requiredGrants={[\n        OwnCapability.START_RECORD_CALL,\n        OwnCapability.STOP_RECORD_CALL,\n      ]}\n    >\n      <CompositeButton\n        active={isCallRecordingInProgress}\n        caption={caption}\n        variant=\"secondary\"\n        data-testid={\n          isCallRecordingInProgress\n            ? 'recording-stop-button'\n            : 'recording-start-button'\n        }\n        title={title}\n        onClick={isAwaitingResponse ? undefined : toggleCallRecording}\n      >\n        {isAwaitingResponse ? (\n          <LoadingIndicator />\n        ) : (\n          <Icon\n            icon={isCallRecordingInProgress ? 'recording-on' : 'recording-off'}\n          />\n        )}\n      </CompositeButton>\n    </Restricted>\n  );\n};\n", "import { useEffect } from 'react';\nimport { StreamVideoParticipant } from '@stream-io/video-client';\nimport { useCall } from '@stream-io/video-react-bindings';\n\nexport type ReactionProps = {\n  participant: StreamVideoParticipant;\n  hideAfterTimeoutInMs?: number;\n  emojiReactionMap?: Record<string, string>;\n};\n\nexport const defaultEmojiReactionMap: Record<string, string> = {\n  ':like:': 'ðŸ‘',\n  ':raise-hand:': 'âœ‹',\n  ':fireworks:': 'ðŸŽ‰',\n  ':dislike:': 'ðŸ‘Ž',\n  ':heart:': 'â¤ï¸',\n  ':smile:': 'ðŸ˜€',\n};\n\nexport const Reaction = ({\n  participant: { reaction, sessionId },\n  hideAfterTimeoutInMs = 5500,\n  emojiReactionMap = defaultEmojiReactionMap,\n}: ReactionProps) => {\n  const call = useCall();\n\n  useEffect(() => {\n    if (!call || !reaction) return;\n\n    const timeoutId = setTimeout(() => {\n      call.resetReaction(sessionId);\n    }, hideAfterTimeoutInMs);\n\n    return () => {\n      clearTimeout(timeoutId);\n    };\n  }, [call, hideAfterTimeoutInMs, reaction, sessionId]);\n\n  if (!reaction) return null;\n\n  const { emoji_code: emojiCode } = reaction;\n\n  return (\n    <div className=\"str-video__reaction\">\n      <span className=\"str-video__reaction__emoji\">\n        {emojiCode && emojiReactionMap[emojiCode]}\n      </span>\n    </div>\n  );\n};\n", "import { forwardRef } from 'react';\nimport clsx from 'clsx';\n\nimport { OwnCapability, StreamReaction } from '@stream-io/video-client';\nimport { Restricted, useCall, useI18n } from '@stream-io/video-react-bindings';\n\nimport {\n  MenuToggle,\n  MenuVisualType,\n  ToggleMenuButtonProps,\n  useMenuContext,\n} from '../Menu';\nimport { CompositeButton } from '../Button';\nimport { defaultEmojiReactionMap } from '../Reaction';\nimport { Icon } from '../Icon';\nimport { WithTooltip } from '../Tooltip';\n\nexport const defaultReactions: StreamReaction[] = [\n  {\n    type: 'reaction',\n    emoji_code: ':like:',\n  },\n  {\n    // TODO OL: use `prompt` type?\n    type: 'raised-hand',\n    emoji_code: ':raise-hand:',\n  },\n  {\n    type: 'reaction',\n    emoji_code: ':fireworks:',\n  },\n  {\n    type: 'reaction',\n    emoji_code: ':dislike:',\n  },\n  {\n    type: 'reaction',\n    emoji_code: ':heart:',\n  },\n  {\n    type: 'reaction',\n    emoji_code: ':smile:',\n  },\n];\n\nexport interface ReactionsButtonProps {\n  reactions?: StreamReaction[];\n}\n\nexport const ReactionsButton = ({\n  reactions = defaultReactions,\n}: ReactionsButtonProps) => {\n  return (\n    <Restricted requiredGrants={[OwnCapability.CREATE_REACTION]}>\n      <MenuToggle\n        placement=\"top\"\n        ToggleButton={ToggleReactionsMenuButton}\n        visualType={MenuVisualType.MENU}\n      >\n        <DefaultReactionsMenu reactions={reactions} />\n      </MenuToggle>\n    </Restricted>\n  );\n};\n\nconst ToggleReactionsMenuButton = forwardRef<\n  HTMLDivElement,\n  ToggleMenuButtonProps\n>(function ToggleReactionsMenuButton({ menuShown }, ref) {\n  const { t } = useI18n();\n  return (\n    <WithTooltip title={t('Reactions')} tooltipDisabled={menuShown}>\n      <CompositeButton ref={ref} active={menuShown} variant=\"primary\">\n        <Icon icon=\"reactions\" />\n      </CompositeButton>\n    </WithTooltip>\n  );\n});\n\nexport interface DefaultReactionsMenuProps {\n  reactions: StreamReaction[];\n  layout?: 'horizontal' | 'vertical';\n}\n\nexport const DefaultReactionsMenu = ({\n  reactions,\n  layout = 'horizontal',\n}: DefaultReactionsMenuProps) => {\n  const call = useCall();\n  const { close } = useMenuContext();\n  return (\n    <div\n      className={clsx('str-video__reactions-menu', {\n        'str-video__reactions-menu--horizontal': layout === 'horizontal',\n        'str-video__reactions-menu--vertical': layout === 'vertical',\n      })}\n    >\n      {reactions.map((reaction) => (\n        <button\n          key={reaction.emoji_code}\n          type=\"button\"\n          className=\"str-video__reactions-menu__button\"\n          onClick={() => {\n            call?.sendReaction(reaction);\n            close?.();\n          }}\n        >\n          {reaction.emoji_code && defaultEmojiReactionMap[reaction.emoji_code]}\n        </button>\n      ))}\n    </div>\n  );\n};\n", "export type PropsWithErrorHandler<T = unknown> = T & {\n  /**\n   * Will be called if the call control action failed with an error (e.g. user didn't grant a\n   * browser permission to enable a media device). If no callback is provided, just logs the error.\n   * @param error Exception which caused call control action to fail\n   */\n  onError?: (error: unknown) => void;\n};\n\n/**\n * Wraps an event handler, silencing and logging exceptions (excluding the NotAllowedError\n * DOMException, which is a normal situation handled by the SDK)\n *\n * @param props component props, including the onError callback\n * @param handler event handler to wrap\n */\nexport const createCallControlHandler = (\n  props: PropsWithErrorHandler,\n  handler: () => Promise<void>,\n): (() => Promise<void>) => {\n  return async () => {\n    try {\n      await handler();\n    } catch (error) {\n      if (props.onError) {\n        props.onError(error);\n        return;\n      }\n\n      if (!isNotAllowedError(error)) {\n        console.error('Call control handler failed', error);\n      }\n    }\n  };\n};\n\nfunction isNotAllowedError(error: unknown): error is DOMException {\n  return error instanceof DOMException && error.name === 'NotAllowedError';\n}\n", "import { OwnCapability } from '@stream-io/video-client';\nimport {\n  Restricted,\n  useCallStateHooks,\n  useI18n,\n  UseInputMediaDeviceOptions,\n} from '@stream-io/video-react-bindings';\nimport { CompositeButton } from '../Button/';\nimport { PermissionNotification } from '../Notification';\nimport { useRequestPermission } from '../../hooks';\nimport { Icon } from '../Icon';\nimport { WithTooltip } from '../Tooltip';\nimport {\n  PropsWithErrorHandler,\n  createCallControlHandler,\n} from '../../utilities/callControlHandler';\n\nexport type ScreenShareButtonProps = PropsWithErrorHandler<\n  {\n    caption?: string;\n  } & UseInputMediaDeviceOptions\n>;\n\nexport const ScreenShareButton = (props: ScreenShareButtonProps) => {\n  const { t } = useI18n();\n  const { caption, optimisticUpdates } = props;\n\n  const { useHasOngoingScreenShare, useScreenShareState, useCallSettings } =\n    useCallStateHooks();\n  const isSomeoneScreenSharing = useHasOngoingScreenShare();\n  const { hasPermission, requestPermission, isAwaitingPermission } =\n    useRequestPermission(OwnCapability.SCREENSHARE);\n\n  const callSettings = useCallSettings();\n  const isScreenSharingAllowed = callSettings?.screensharing.enabled;\n\n  const { screenShare, optionsAwareIsMute, isTogglePending } =\n    useScreenShareState({\n      optimisticUpdates,\n    });\n  const amIScreenSharing = !optionsAwareIsMute;\n  const disableScreenShareButton =\n    (!amIScreenSharing &&\n      (isSomeoneScreenSharing || isScreenSharingAllowed === false)) ||\n    (!optimisticUpdates && isTogglePending);\n  const handleClick = createCallControlHandler(props, async () => {\n    if (!hasPermission) {\n      await requestPermission();\n    } else {\n      await screenShare.toggle();\n    }\n  });\n\n  return (\n    <Restricted requiredGrants={[OwnCapability.SCREENSHARE]}>\n      <PermissionNotification\n        permission={OwnCapability.SCREENSHARE}\n        isAwaitingApproval={isAwaitingPermission}\n        messageApproved={t('You can now share your screen.')}\n        messageAwaitingApproval={t('Awaiting for an approval to share screen.')}\n        messageRevoked={t('You can no longer share your screen.')}\n      >\n        <WithTooltip title={caption ?? t('Share screen')}>\n          <CompositeButton\n            active={isSomeoneScreenSharing || amIScreenSharing}\n            caption={caption}\n            variant=\"primary\"\n            data-testid={\n              isSomeoneScreenSharing\n                ? 'screen-share-stop-button'\n                : 'screen-share-start-button'\n            }\n            disabled={disableScreenShareButton}\n            onClick={handleClick}\n          >\n            <Icon\n              icon={\n                isSomeoneScreenSharing ? 'screen-share-on' : 'screen-share-off'\n              }\n            />\n          </CompositeButton>\n        </WithTooltip>\n      </PermissionNotification>\n    </Restricted>\n  );\n};\n", "import { useEffect, useState } from 'react';\nimport { createSoundDetector } from '@stream-io/video-client';\nimport { useCallStateHooks } from '@stream-io/video-react-bindings';\nimport { Icon } from '../Icon';\n\nexport const AudioVolumeIndicator = () => {\n  const { useMicrophoneState } = useCallStateHooks();\n  const { isEnabled, mediaStream } = useMicrophoneState();\n  const [audioLevel, setAudioLevel] = useState(0);\n\n  useEffect(() => {\n    if (!isEnabled || !mediaStream) return;\n    const disposeSoundDetector = createSoundDetector(\n      mediaStream,\n      ({ audioLevel: al }) => setAudioLevel(al),\n      { detectionFrequencyInMs: 80, destroyStreamOnStop: false },\n    );\n    return () => {\n      disposeSoundDetector().catch(console.error);\n    };\n  }, [isEnabled, mediaStream]);\n\n  return (\n    <div className=\"str-video__audio-volume-indicator\">\n      <Icon icon={isEnabled ? 'mic' : 'mic-off'} />\n      <div className=\"str-video__audio-volume-indicator__bar\">\n        <div\n          className=\"str-video__audio-volume-indicator__bar-value\"\n          style={{ transform: `scaleX(${audioLevel / 100})` }}\n        />\n      </div>\n    </div>\n  );\n};\n", "import {\n  createContext,\n  ReactElement,\n  ReactNode,\n  useCallback,\n  useContext,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport clsx from 'clsx';\nimport {\n  autoUpdate,\n  flip,\n  FloatingFocusManager,\n  FloatingList,\n  useClick,\n  useDismiss,\n  useFloating,\n  useInteractions,\n  useListItem,\n  useListNavigation,\n  useRole,\n  useTypeahead,\n} from '@floating-ui/react';\n\nimport { Icon } from '../Icon';\n\ninterface SelectContextValue {\n  activeIndex: number | null;\n  selectedIndex: number | null;\n  getItemProps: ReturnType<typeof useInteractions>['getItemProps'];\n  handleSelect: (index: number | null) => void;\n}\n\nconst SelectContext = createContext<SelectContextValue>(\n  {} as SelectContextValue,\n);\n\nconst Select = (props: {\n  children: ReactNode;\n  icon?: string;\n  defaultSelectedLabel: string;\n  defaultSelectedIndex: number;\n  handleSelect: (index: number) => void;\n}) => {\n  const {\n    children,\n    icon,\n    defaultSelectedLabel,\n    defaultSelectedIndex,\n    handleSelect: handleSelectProp,\n  } = props;\n  const [isOpen, setIsOpen] = useState(false);\n  const [activeIndex, setActiveIndex] = useState<number | null>(null);\n  const [selectedIndex, setSelectedIndex] = useState<number | null>(\n    defaultSelectedIndex,\n  );\n  const [selectedLabel, setSelectedLabel] = useState<string | null>(\n    defaultSelectedLabel,\n  );\n\n  const { refs, context } = useFloating({\n    placement: 'bottom-start',\n    open: isOpen,\n    onOpenChange: setIsOpen,\n    whileElementsMounted: autoUpdate,\n    middleware: [flip()],\n  });\n\n  const elementsRef = useRef<Array<HTMLElement | null>>([]);\n  const labelsRef = useRef<Array<string | null>>([]);\n\n  const handleSelect = useCallback(\n    (index: number | null) => {\n      setSelectedIndex(index);\n      handleSelectProp(index || 0);\n      setIsOpen(false);\n      if (index !== null) {\n        setSelectedLabel(labelsRef.current[index]);\n      }\n    },\n    [handleSelectProp],\n  );\n\n  const handleTypeaheadMatch = (index: number | null) => {\n    if (isOpen) {\n      setActiveIndex(index);\n    } else {\n      handleSelect(index);\n    }\n  };\n\n  const listNav = useListNavigation(context, {\n    listRef: elementsRef,\n    activeIndex,\n    selectedIndex,\n    onNavigate: setActiveIndex,\n  });\n  const typeahead = useTypeahead(context, {\n    listRef: labelsRef,\n    activeIndex,\n    selectedIndex,\n    onMatch: handleTypeaheadMatch,\n  });\n  const click = useClick(context);\n  const dismiss = useDismiss(context);\n  const role = useRole(context, { role: 'listbox' });\n\n  const { getReferenceProps, getFloatingProps, getItemProps } = useInteractions(\n    [listNav, typeahead, click, dismiss, role],\n  );\n\n  const selectContext = useMemo(\n    () => ({\n      activeIndex,\n      selectedIndex,\n      getItemProps,\n      handleSelect,\n    }),\n    [activeIndex, selectedIndex, getItemProps, handleSelect],\n  );\n\n  return (\n    <div className=\"str-video__dropdown\">\n      <div\n        className=\"str-video__dropdown-selected\"\n        ref={refs.setReference}\n        tabIndex={0}\n        {...getReferenceProps()}\n      >\n        <label className=\"str-video__dropdown-selected__label\">\n          {icon && (\n            <Icon className=\"str-video__dropdown-selected__icon\" icon={icon} />\n          )}\n          {selectedLabel}\n        </label>\n        <Icon\n          className=\"str-video__dropdown-selected__chevron\"\n          icon={isOpen ? 'chevron-up' : 'chevron-down'}\n        />\n      </div>\n      <SelectContext.Provider value={selectContext}>\n        {isOpen && (\n          <FloatingFocusManager context={context} modal={false}>\n            <div\n              className=\"str-video__dropdown-list\"\n              ref={refs.setFloating}\n              {...getFloatingProps()}\n            >\n              <FloatingList elementsRef={elementsRef} labelsRef={labelsRef}>\n                {children}\n              </FloatingList>\n            </div>\n          </FloatingFocusManager>\n        )}\n      </SelectContext.Provider>\n    </div>\n  );\n};\n\nexport type DropDownSelectOptionProps = {\n  label: string;\n  selected?: boolean;\n  icon?: string;\n};\n\nexport const DropDownSelectOption = (props: DropDownSelectOptionProps) => {\n  const { selected, label, icon } = props;\n  const { getItemProps, handleSelect } = useContext(SelectContext);\n  const { ref, index } = useListItem();\n  return (\n    <div\n      className={clsx('str-video__dropdown-option', {\n        'str-video__dropdown-option--selected': selected,\n      })}\n      ref={ref}\n      {...getItemProps({\n        onClick: () => handleSelect(index),\n      })}\n    >\n      {icon && <Icon className=\"str-video__dropdown-icon\" icon={icon} />}\n      <span className=\"str-video__dropdown-label\">{label}</span>\n    </div>\n  );\n};\n\nexport const DropDownSelect = (props: {\n  icon?: string;\n  defaultSelectedLabel: string;\n  defaultSelectedIndex: number;\n  handleSelect: (index: number) => void;\n  children:\n    | ReactElement<DropDownSelectOptionProps>\n    | ReactElement<DropDownSelectOptionProps>[];\n}) => {\n  const {\n    children,\n    icon,\n    handleSelect,\n    defaultSelectedLabel,\n    defaultSelectedIndex,\n  } = props;\n  return (\n    <Select\n      icon={icon}\n      handleSelect={handleSelect}\n      defaultSelectedIndex={defaultSelectedIndex}\n      defaultSelectedLabel={defaultSelectedLabel}\n    >\n      {children}\n    </Select>\n  );\n};\n", "import clsx from 'clsx';\nimport { ChangeEventHandler, PropsWithChildren, useCallback } from 'react';\n\nimport { useDeviceList } from '../../hooks';\nimport { DropDownSelect, DropDownSelectOption } from '../DropdownSelect';\nimport { useMenuContext } from '../Menu';\n\ntype DeviceSelectorOptionProps = {\n  id: string;\n  label: string;\n  name?: string;\n  selected?: boolean;\n  value: string;\n  disabled?: boolean;\n  defaultChecked?: boolean;\n  onChange?: ChangeEventHandler<HTMLInputElement>;\n};\n\nconst DeviceSelectorOption = ({\n  disabled,\n  id,\n  label,\n  onChange,\n  name,\n  selected,\n  defaultChecked,\n  value,\n}: DeviceSelectorOptionProps) => {\n  return (\n    <label\n      className={clsx('str-video__device-settings__option', {\n        'str-video__device-settings__option--selected': selected,\n        'str-video__device-settings__option--disabled': disabled,\n      })}\n      htmlFor={id}\n    >\n      <input\n        type=\"radio\"\n        name={name}\n        onChange={onChange}\n        value={value}\n        id={id}\n        checked={selected}\n        defaultChecked={defaultChecked}\n        disabled={disabled}\n      />\n      {label}\n    </label>\n  );\n};\n\nexport type DeviceSelectorType = 'audioinput' | 'audiooutput' | 'videoinput';\n\nconst DeviceSelectorList = (\n  props: PropsWithChildren<{\n    devices: MediaDeviceInfo[];\n    type: DeviceSelectorType;\n    selectedDeviceId?: string;\n    title?: string;\n    onChange?: (deviceId: string) => void;\n  }>,\n) => {\n  const {\n    devices = [],\n    selectedDeviceId,\n    title,\n    type,\n    onChange,\n    children,\n  } = props;\n  const { close } = useMenuContext();\n  const { deviceList } = useDeviceList(devices, selectedDeviceId);\n\n  return (\n    <div className=\"str-video__device-settings__device-kind\">\n      {title && (\n        <div className=\"str-video__device-settings__device-selector-title\">\n          {title}\n        </div>\n      )}\n      {deviceList.map((device) => {\n        return (\n          <DeviceSelectorOption\n            id={`${type}--${device.deviceId}`}\n            value={device.deviceId}\n            label={device.label}\n            key={device.deviceId}\n            onChange={(e) => {\n              const deviceId = e.target.value;\n              if (deviceId !== 'default') {\n                onChange?.(deviceId);\n              }\n              close?.();\n            }}\n            name={type}\n            selected={device.isSelected}\n          />\n        );\n      })}\n      {children}\n    </div>\n  );\n};\n\nconst DeviceSelectorDropdown = (props: {\n  devices: MediaDeviceInfo[];\n  selectedDeviceId?: string;\n  title?: string;\n  onChange?: (deviceId: string) => void;\n  icon: string;\n}) => {\n  const { devices = [], selectedDeviceId, title, onChange, icon } = props;\n  const { deviceList, selectedDeviceInfo, selectedIndex } = useDeviceList(\n    devices,\n    selectedDeviceId,\n  );\n\n  const handleSelect = useCallback(\n    (index: number) => {\n      const deviceId = deviceList[index].deviceId;\n      if (deviceId !== 'default') {\n        onChange?.(deviceId);\n      }\n    },\n    [deviceList, onChange],\n  );\n\n  return (\n    <div className=\"str-video__device-settings__device-kind\">\n      <div className=\"str-video__device-settings__device-selector-title\">\n        {title}\n      </div>\n      <DropDownSelect\n        icon={icon}\n        defaultSelectedIndex={selectedIndex}\n        defaultSelectedLabel={selectedDeviceInfo.label}\n        handleSelect={handleSelect}\n      >\n        {deviceList.map((device) => (\n          <DropDownSelectOption\n            key={device.deviceId}\n            icon={icon}\n            label={device.label}\n            selected={device.isSelected}\n          />\n        ))}\n      </DropDownSelect>\n    </div>\n  );\n};\n\nexport const DeviceSelector = (\n  props: PropsWithChildren<{\n    devices: MediaDeviceInfo[];\n    icon: string;\n    type: DeviceSelectorType;\n    selectedDeviceId?: string;\n    title?: string;\n    onChange?: (deviceId: string) => void;\n    visualType?: 'list' | 'dropdown';\n  }>,\n) => {\n  const { visualType = 'list', icon, ...rest } = props;\n\n  if (visualType === 'list') {\n    return <DeviceSelectorList {...rest} />;\n  }\n  return <DeviceSelectorDropdown {...rest} icon={icon} />;\n};\n", "import { useCallback, useEffect, useRef, useState } from 'react';\nimport { useCallStateHooks, useI18n } from '@stream-io/video-react-bindings';\nimport { CompositeButton } from '../Button';\nimport { Icon } from '../Icon';\n\n/**\n * SpeakerTest component that plays a test audio through the selected speaker.\n * This allows users to verify their audio output device is working correctly.\n */\nexport const SpeakerTest = (props: { audioUrl?: string }) => {\n  const { useSpeakerState } = useCallStateHooks();\n  const { selectedDevice } = useSpeakerState();\n  const audioElementRef = useRef<HTMLAudioElement | null>(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const { t } = useI18n();\n\n  const {\n    audioUrl = `https://unpkg.com/${process.env.PKG_NAME}@${process.env.PKG_VERSION}/assets/piano.mp3`,\n  } = props;\n\n  // Update audio output device when selection changes\n  useEffect(() => {\n    const audio = audioElementRef.current;\n    if (!audio || !selectedDevice) return;\n\n    // Set the sinkId to route audio to the selected speaker\n    if ('setSinkId' in audio) {\n      audio.setSinkId(selectedDevice).catch((err) => {\n        console.error('Failed to set audio output device:', err);\n      });\n    }\n  }, [selectedDevice]);\n\n  const handleStartTest = useCallback(async () => {\n    const audio = audioElementRef.current;\n    if (!audio) return;\n\n    audio.src = audioUrl;\n\n    try {\n      if (isPlaying) {\n        audio.pause();\n        audio.currentTime = 0;\n        setIsPlaying(false);\n      } else {\n        await audio.play();\n        setIsPlaying(true);\n      }\n    } catch (err) {\n      console.error('Failed to play test audio:', err);\n      setIsPlaying(false);\n    }\n  }, [isPlaying, audioUrl]);\n\n  const handleAudioEnded = useCallback(() => setIsPlaying(false), []);\n  return (\n    <div className=\"str-video__speaker-test\">\n      <audio\n        ref={audioElementRef}\n        onEnded={handleAudioEnded}\n        onPause={handleAudioEnded}\n      />\n      <CompositeButton\n        className=\"str-video__speaker-test__button\"\n        onClick={handleStartTest}\n        type=\"button\"\n      >\n        <div className=\"str-video__speaker-test__button-content\">\n          <Icon icon=\"speaker\" />\n          {isPlaying ? t('Stop test') : t('Test speaker')}\n        </div>\n      </CompositeButton>\n    </div>\n  );\n};\n", "import { useCallStateHooks } from '@stream-io/video-react-bindings';\nimport { DeviceSelector } from './DeviceSelector';\nimport { AudioVolumeIndicator } from './AudioVolumeIndicator';\nimport { SpeakerTest } from './SpeakerTest';\n\nexport type DeviceSelectorAudioInputProps = {\n  title?: string;\n  visualType?: 'list' | 'dropdown';\n  volumeIndicatorVisible?: boolean;\n};\n\nexport const DeviceSelectorAudioInput = ({\n  title,\n  visualType,\n  volumeIndicatorVisible = true,\n}: DeviceSelectorAudioInputProps) => {\n  const { useMicrophoneState } = useCallStateHooks();\n  const { microphone, selectedDevice, devices } = useMicrophoneState();\n\n  return (\n    <DeviceSelector\n      devices={devices || []}\n      selectedDeviceId={selectedDevice}\n      type=\"audioinput\"\n      onChange={async (deviceId) => {\n        await microphone.select(deviceId);\n      }}\n      title={title}\n      visualType={visualType}\n      icon=\"mic\"\n    >\n      {volumeIndicatorVisible && (\n        <>\n          <hr className=\"str-video__device-settings__separator\" />\n          <AudioVolumeIndicator />\n        </>\n      )}\n    </DeviceSelector>\n  );\n};\n\nexport type DeviceSelectorAudioOutputProps = {\n  title?: string;\n  visualType?: 'list' | 'dropdown';\n  speakerTestVisible?: boolean;\n  speakerTestAudioUrl?: string;\n};\n\nexport const DeviceSelectorAudioOutput = ({\n  title,\n  visualType,\n  speakerTestVisible = true,\n  speakerTestAudioUrl,\n}: DeviceSelectorAudioOutputProps) => {\n  const { useSpeakerState } = useCallStateHooks();\n  const { speaker, selectedDevice, devices, isDeviceSelectionSupported } =\n    useSpeakerState();\n\n  if (!isDeviceSelectionSupported) return null;\n\n  return (\n    <DeviceSelector\n      devices={devices}\n      type=\"audiooutput\"\n      selectedDeviceId={selectedDevice}\n      onChange={(deviceId) => {\n        speaker.select(deviceId);\n      }}\n      title={title}\n      visualType={visualType}\n      icon=\"speaker\"\n    >\n      {speakerTestVisible && (\n        <>\n          <hr className=\"str-video__device-settings__separator\" />\n          <SpeakerTest audioUrl={speakerTestAudioUrl} />\n        </>\n      )}\n    </DeviceSelector>\n  );\n};\n", "import { DeviceSelector } from './DeviceSelector';\nimport { useCallStateHooks } from '@stream-io/video-react-bindings';\n\nexport type DeviceSelectorVideoProps = {\n  title?: string;\n  visualType?: 'list' | 'dropdown';\n};\n\nexport const DeviceSelectorVideo = ({\n  title,\n  visualType,\n}: DeviceSelectorVideoProps) => {\n  const { useCameraState } = useCallStateHooks();\n  const { camera, devices, selectedDevice } = useCameraState();\n\n  return (\n    <DeviceSelector\n      devices={devices || []}\n      type=\"videoinput\"\n      selectedDeviceId={selectedDevice}\n      onChange={async (deviceId) => {\n        await camera.select(deviceId);\n      }}\n      title={title}\n      visualType={visualType}\n      icon=\"camera\"\n    />\n  );\n};\n", "import { forwardRef } from 'react';\nimport { useI18n } from '@stream-io/video-react-bindings';\nimport clsx from 'clsx';\nimport { MenuToggle, MenuVisualType, ToggleMenuButtonProps } from '../Menu';\nimport {\n  DeviceSelectorAudioInput,\n  DeviceSelectorAudioOutput,\n} from './DeviceSelectorAudio';\nimport { DeviceSelectorVideo } from './DeviceSelectorVideo';\nimport { IconButton } from '../Button';\n\nexport type DeviceSettingsProps = {\n  visualType?: MenuVisualType;\n};\n\nexport const DeviceSettings = ({\n  visualType = MenuVisualType.MENU,\n}: DeviceSettingsProps) => {\n  return (\n    <MenuToggle\n      placement=\"bottom-end\"\n      ToggleButton={ToggleDeviceSettingsMenuButton}\n      visualType={visualType}\n    >\n      <Menu />\n    </MenuToggle>\n  );\n};\n\nconst Menu = () => {\n  const { t } = useI18n();\n  return (\n    <div className=\"str-video__device-settings\">\n      <DeviceSelectorVideo title={t('Select a Camera')} />\n      <DeviceSelectorAudioInput title={t('Select a Mic')} />\n      <DeviceSelectorAudioOutput title={t('Select Speakers')} />\n    </div>\n  );\n};\n\nconst ToggleDeviceSettingsMenuButton = forwardRef<\n  HTMLButtonElement,\n  ToggleMenuButtonProps\n>(function ToggleDeviceSettingsMenuButton({ menuShown }, ref) {\n  const { t } = useI18n();\n  return (\n    <IconButton\n      className={clsx('str-video__device-settings__button', {\n        'str-video__device-settings__button--active': menuShown,\n      })}\n      title={t('Toggle device menu')}\n      icon=\"device-settings\"\n      ref={ref}\n    />\n  );\n});\n", "import { OwnCapability } from '@stream-io/video-client';\nimport {\n  Restricted,\n  useCallStateHooks,\n  useI18n,\n  type UseInputMediaDeviceOptions,\n} from '@stream-io/video-react-bindings';\nimport clsx from 'clsx';\nimport { CompositeButton, IconButtonWithMenuProps } from '../Button';\nimport { DeviceSelectorAudioInput } from '../DeviceSettings';\nimport { PermissionNotification } from '../Notification';\nimport { useRequestPermission } from '../../hooks';\nimport { Icon } from '../Icon';\nimport { WithTooltip } from '../Tooltip';\nimport { useState } from 'react';\nimport {\n  createCallControlHandler,\n  PropsWithErrorHandler,\n} from '../../utilities/callControlHandler';\n\nexport type ToggleAudioPreviewButtonProps = PropsWithErrorHandler<\n  Pick<\n    IconButtonWithMenuProps,\n    'caption' | 'Menu' | 'menuPlacement' | 'onMenuToggle'\n  > &\n    UseInputMediaDeviceOptions\n>;\n\nexport const ToggleAudioPreviewButton = (\n  props: ToggleAudioPreviewButtonProps,\n) => {\n  const {\n    caption,\n    Menu = DeviceSelectorAudioInput,\n    menuPlacement = 'top',\n    onMenuToggle,\n    optimisticUpdates,\n    ...restCompositeButtonProps\n  } = props;\n  const { t } = useI18n();\n  const { useMicrophoneState } = useCallStateHooks();\n  const {\n    microphone,\n    hasBrowserPermission,\n    isPromptingPermission,\n    optionsAwareIsMute,\n    isTogglePending,\n  } = useMicrophoneState({ optimisticUpdates });\n  const [tooltipDisabled, setTooltipDisabled] = useState(false);\n  const handleClick = createCallControlHandler(props, () =>\n    microphone.toggle(),\n  );\n\n  return (\n    <WithTooltip\n      title={\n        !hasBrowserPermission\n          ? t('Check your browser audio permissions')\n          : (caption ?? t('Mic'))\n      }\n      tooltipDisabled={tooltipDisabled}\n    >\n      <CompositeButton\n        active={optionsAwareIsMute}\n        caption={caption}\n        className={clsx(\n          !hasBrowserPermission && 'str-video__device-unavailable',\n        )}\n        variant=\"secondary\"\n        disabled={\n          !hasBrowserPermission || (!optimisticUpdates && isTogglePending)\n        }\n        data-testid={\n          optionsAwareIsMute\n            ? 'preview-audio-unmute-button'\n            : 'preview-audio-mute-button'\n        }\n        onClick={handleClick}\n        Menu={Menu}\n        menuPlacement={menuPlacement}\n        {...restCompositeButtonProps}\n        onMenuToggle={(shown) => {\n          setTooltipDisabled(shown);\n          onMenuToggle?.(shown);\n        }}\n      >\n        <Icon icon={!optionsAwareIsMute ? 'mic' : 'mic-off'} />\n        {!hasBrowserPermission && (\n          <span\n            className=\"str-video__no-media-permission\"\n            title={t('Check your browser audio permissions')}\n            children=\"!\"\n          />\n        )}\n        {isPromptingPermission && (\n          <span\n            className=\"str-video__pending-permission\"\n            title={t('Waiting for permission')}\n            children=\"?\"\n          />\n        )}\n      </CompositeButton>\n    </WithTooltip>\n  );\n};\n\nexport type ToggleAudioPublishingButtonProps = PropsWithErrorHandler<\n  Pick<\n    IconButtonWithMenuProps,\n    'caption' | 'Menu' | 'menuPlacement' | 'onMenuToggle'\n  > &\n    UseInputMediaDeviceOptions\n>;\n\nexport const ToggleAudioPublishingButton = (\n  props: ToggleAudioPublishingButtonProps,\n) => {\n  const { t } = useI18n();\n  const {\n    caption,\n    Menu = <DeviceSelectorAudioInput visualType=\"list\" />,\n    menuPlacement = 'top',\n    onMenuToggle,\n    optimisticUpdates,\n    ...restCompositeButtonProps\n  } = props;\n\n  const { hasPermission, requestPermission, isAwaitingPermission } =\n    useRequestPermission(OwnCapability.SEND_AUDIO);\n\n  const { useMicrophoneState } = useCallStateHooks();\n  const {\n    microphone,\n    hasBrowserPermission,\n    isPromptingPermission,\n    isTogglePending,\n    optionsAwareIsMute,\n  } = useMicrophoneState({ optimisticUpdates });\n\n  const [tooltipDisabled, setTooltipDisabled] = useState(false);\n  const handleClick = createCallControlHandler(props, async () => {\n    if (!hasPermission) {\n      await requestPermission();\n    } else {\n      await microphone.toggle();\n    }\n  });\n\n  return (\n    <Restricted requiredGrants={[OwnCapability.SEND_AUDIO]}>\n      <PermissionNotification\n        permission={OwnCapability.SEND_AUDIO}\n        isAwaitingApproval={isAwaitingPermission}\n        messageApproved={t('You can now speak.')}\n        messageAwaitingApproval={t('Awaiting for an approval to speak.')}\n        messageRevoked={t('You can no longer speak.')}\n      >\n        <WithTooltip\n          title={\n            !hasPermission\n              ? t('You have no permission to share your audio')\n              : !hasBrowserPermission\n                ? t('Check your browser mic permissions')\n                : (caption ?? t('Mic'))\n          }\n          tooltipDisabled={tooltipDisabled}\n        >\n          <CompositeButton\n            active={optionsAwareIsMute}\n            caption={caption}\n            variant=\"secondary\"\n            disabled={\n              !hasBrowserPermission ||\n              !hasPermission ||\n              // disable button while the toggle action is pending when not using optimistic updates\n              (!optimisticUpdates && isTogglePending)\n            }\n            data-testid={\n              optionsAwareIsMute ? 'audio-unmute-button' : 'audio-mute-button'\n            }\n            onClick={handleClick}\n            Menu={Menu}\n            menuPlacement={menuPlacement}\n            menuOffset={16}\n            {...restCompositeButtonProps}\n            onMenuToggle={(shown) => {\n              setTooltipDisabled(shown);\n              onMenuToggle?.(shown);\n            }}\n          >\n            <Icon icon={optionsAwareIsMute ? 'mic-off' : 'mic'} />\n            {(!hasBrowserPermission || !hasPermission) && (\n              <span className=\"str-video__no-media-permission\">!</span>\n            )}\n            {isPromptingPermission && (\n              <span\n                className=\"str-video__pending-permission\"\n                title={t('Waiting for permission')}\n              >\n                ?\n              </span>\n            )}\n          </CompositeButton>\n        </WithTooltip>\n      </PermissionNotification>\n    </Restricted>\n  );\n};\n", "import {\n  Restricted,\n  useCallStateHooks,\n  useI18n,\n  UseInputMediaDeviceOptions,\n} from '@stream-io/video-react-bindings';\nimport clsx from 'clsx';\nimport { OwnCapability } from '@stream-io/video-client';\nimport { CompositeButton, IconButtonWithMenuProps } from '../Button/';\nimport { DeviceSelectorVideo } from '../DeviceSettings';\nimport { PermissionNotification } from '../Notification';\nimport { useRequestPermission } from '../../hooks';\nimport { Icon } from '../Icon';\nimport { WithTooltip } from '../Tooltip';\nimport { useState } from 'react';\nimport {\n  createCallControlHandler,\n  PropsWithErrorHandler,\n} from '../../utilities/callControlHandler';\n\nexport type ToggleVideoPreviewButtonProps = PropsWithErrorHandler<\n  Pick<\n    IconButtonWithMenuProps,\n    'caption' | 'Menu' | 'menuPlacement' | 'onMenuToggle'\n  > &\n    UseInputMediaDeviceOptions\n>;\n\nexport const ToggleVideoPreviewButton = (\n  props: ToggleVideoPreviewButtonProps,\n) => {\n  const {\n    caption,\n    Menu = DeviceSelectorVideo,\n    menuPlacement = 'top',\n    onMenuToggle,\n    optimisticUpdates,\n    ...restCompositeButtonProps\n  } = props;\n  const { t } = useI18n();\n  const { useCameraState } = useCallStateHooks();\n  const {\n    camera,\n    hasBrowserPermission,\n    isPromptingPermission,\n    isTogglePending,\n    optionsAwareIsMute,\n  } = useCameraState({ optimisticUpdates });\n  const [tooltipDisabled, setTooltipDisabled] = useState(false);\n  const handleClick = createCallControlHandler(props, () => camera.toggle());\n\n  return (\n    <WithTooltip\n      title={\n        !hasBrowserPermission\n          ? t('Check your browser video permissions')\n          : (caption ?? t('Video'))\n      }\n      tooltipDisabled={tooltipDisabled}\n    >\n      <CompositeButton\n        active={optionsAwareIsMute}\n        caption={caption}\n        className={clsx(\n          !hasBrowserPermission && 'str-video__device-unavailable',\n        )}\n        variant=\"secondary\"\n        data-testid={\n          optionsAwareIsMute\n            ? 'preview-video-unmute-button'\n            : 'preview-video-mute-button'\n        }\n        onClick={handleClick}\n        disabled={\n          !hasBrowserPermission || (!optimisticUpdates && isTogglePending)\n        }\n        Menu={Menu}\n        menuPlacement={menuPlacement}\n        {...restCompositeButtonProps}\n        onMenuToggle={(shown) => {\n          setTooltipDisabled(shown);\n          onMenuToggle?.(shown);\n        }}\n      >\n        <Icon icon={!optionsAwareIsMute ? 'camera' : 'camera-off'} />\n        {!hasBrowserPermission && (\n          <span\n            className=\"str-video__no-media-permission\"\n            title={t('Check your browser video permissions')}\n            children=\"!\"\n          />\n        )}\n        {isPromptingPermission && (\n          <span\n            className=\"str-video__pending-permission\"\n            title={t('Waiting for permission')}\n            children=\"?\"\n          />\n        )}\n      </CompositeButton>\n    </WithTooltip>\n  );\n};\n\ntype ToggleVideoPublishingButtonProps = PropsWithErrorHandler<\n  Pick<\n    IconButtonWithMenuProps,\n    'caption' | 'Menu' | 'menuPlacement' | 'onMenuToggle'\n  > &\n    UseInputMediaDeviceOptions\n>;\n\nexport const ToggleVideoPublishingButton = (\n  props: ToggleVideoPublishingButtonProps,\n) => {\n  const { t } = useI18n();\n  const {\n    caption,\n    Menu = <DeviceSelectorVideo visualType=\"list\" />,\n    menuPlacement = 'top',\n    onMenuToggle,\n    optimisticUpdates,\n    ...restCompositeButtonProps\n  } = props;\n\n  const { hasPermission, requestPermission, isAwaitingPermission } =\n    useRequestPermission(OwnCapability.SEND_VIDEO);\n\n  const { useCameraState, useCallSettings } = useCallStateHooks();\n  const {\n    camera,\n    optionsAwareIsMute,\n    hasBrowserPermission,\n    isPromptingPermission,\n    isTogglePending,\n  } = useCameraState({ optimisticUpdates });\n  const callSettings = useCallSettings();\n  const isPublishingVideoAllowed = callSettings?.video.enabled;\n  const [tooltipDisabled, setTooltipDisabled] = useState(false);\n  const handleClick = createCallControlHandler(props, async () => {\n    if (!hasPermission) {\n      await requestPermission();\n    } else {\n      await camera.toggle();\n    }\n  });\n\n  return (\n    <Restricted requiredGrants={[OwnCapability.SEND_VIDEO]}>\n      <PermissionNotification\n        permission={OwnCapability.SEND_VIDEO}\n        isAwaitingApproval={isAwaitingPermission}\n        messageApproved={t('You can now share your video.')}\n        messageAwaitingApproval={t(\n          'Awaiting for an approval to share your video.',\n        )}\n        messageRevoked={t('You can no longer share your video.')}\n      >\n        <WithTooltip\n          title={\n            !hasPermission\n              ? t('You have no permission to share your video')\n              : !hasBrowserPermission\n                ? t('Check your browser video permissions')\n                : !isPublishingVideoAllowed\n                  ? t('Video publishing is disabled by the system')\n                  : caption || t('Video')\n          }\n          tooltipDisabled={tooltipDisabled}\n        >\n          <CompositeButton\n            active={optionsAwareIsMute}\n            caption={caption}\n            variant=\"secondary\"\n            disabled={\n              !hasBrowserPermission ||\n              !hasPermission ||\n              !isPublishingVideoAllowed ||\n              (!optimisticUpdates && isTogglePending)\n            }\n            data-testid={\n              optionsAwareIsMute ? 'video-unmute-button' : 'video-mute-button'\n            }\n            onClick={handleClick}\n            Menu={Menu}\n            menuPlacement={menuPlacement}\n            menuOffset={16}\n            {...restCompositeButtonProps}\n            onMenuToggle={(shown) => {\n              setTooltipDisabled(shown);\n              onMenuToggle?.(shown);\n            }}\n          >\n            <Icon icon={optionsAwareIsMute ? 'camera-off' : 'camera'} />\n            {(!hasBrowserPermission ||\n              !hasPermission ||\n              !isPublishingVideoAllowed) && (\n              <span className=\"str-video__no-media-permission\">!</span>\n            )}\n            {isPromptingPermission && (\n              <span\n                className=\"str-video__pending-permission\"\n                title={t('Waiting for permission')}\n              >\n                ?\n              </span>\n            )}\n          </CompositeButton>\n        </WithTooltip>\n      </PermissionNotification>\n    </Restricted>\n  );\n};\n", "import { forwardRef, MouseEventHandler, useCallback } from 'react';\nimport { OwnCapability } from '@stream-io/video-client';\nimport { Restricted, useCall, useI18n } from '@stream-io/video-react-bindings';\n\nimport { MenuToggle, ToggleMenuButtonProps } from '../Menu';\n\nimport { IconButton } from '../Button';\nimport { Icon } from '../Icon';\nimport { WithTooltip } from '../Tooltip';\n\nconst EndCallMenu = (props: {\n  onLeave: MouseEventHandler<HTMLButtonElement>;\n  onEnd: MouseEventHandler<HTMLButtonElement>;\n}) => {\n  const { onLeave, onEnd } = props;\n  const { t } = useI18n();\n  return (\n    <div className=\"str-video__end-call__confirmation\">\n      <button\n        className=\"str-video__button str-video__end-call__leave\"\n        type=\"button\"\n        data-testid=\"leave-call-button\"\n        onClick={onLeave}\n      >\n        <Icon\n          className=\"str-video__button__icon str-video__end-call__leave-icon\"\n          icon=\"logout\"\n        />\n        {t('Leave call')}\n      </button>\n      <Restricted requiredGrants={[OwnCapability.END_CALL]}>\n        <button\n          className=\"str-video__button str-video__end-call__end\"\n          type=\"button\"\n          data-testid=\"end-call-for-all-button\"\n          onClick={onEnd}\n        >\n          <Icon\n            className=\"str-video__button__icon str-video__end-call__end-icon\"\n            icon=\"call-end\"\n          />\n          {t('End call for all')}\n        </button>\n      </Restricted>\n    </div>\n  );\n};\n\nconst CancelCallToggleMenuButton = forwardRef<\n  HTMLButtonElement,\n  ToggleMenuButtonProps\n>(function CancelCallToggleMenuButton({ menuShown }, ref) {\n  const { t } = useI18n();\n  return (\n    <WithTooltip title={t('Leave call')} tooltipDisabled={menuShown}>\n      <IconButton\n        icon={menuShown ? 'close' : 'call-end'}\n        variant={menuShown ? 'active' : 'danger'}\n        data-testid=\"leave-call-button\"\n        ref={ref}\n      />\n    </WithTooltip>\n  );\n});\n\nexport type CancelCallButtonProps = {\n  disabled?: boolean;\n  caption?: string;\n  onClick?: MouseEventHandler<HTMLButtonElement>;\n  onLeave?: () => void;\n};\n\nexport const CancelCallConfirmButton = ({\n  onClick,\n  onLeave,\n}: CancelCallButtonProps) => {\n  const call = useCall();\n\n  const handleLeave: MouseEventHandler<HTMLButtonElement> = useCallback(\n    async (e) => {\n      if (onClick) {\n        onClick(e);\n      } else if (call) {\n        await call.leave();\n        onLeave?.();\n      }\n    },\n    [onClick, onLeave, call],\n  );\n\n  const handleEndCall: MouseEventHandler<HTMLButtonElement> = useCallback(\n    async (e) => {\n      if (onClick) {\n        onClick(e);\n      } else if (call) {\n        await call.endCall();\n        onLeave?.();\n      }\n    },\n    [onClick, onLeave, call],\n  );\n\n  return (\n    <MenuToggle placement=\"top-start\" ToggleButton={CancelCallToggleMenuButton}>\n      <EndCallMenu onEnd={handleEndCall} onLeave={handleLeave} />\n    </MenuToggle>\n  );\n};\n\nexport const CancelCallButton = ({\n  disabled,\n  caption,\n  onClick,\n  onLeave,\n}: CancelCallButtonProps) => {\n  const call = useCall();\n  const { t } = useI18n();\n  const handleClick: MouseEventHandler<HTMLButtonElement> = useCallback(\n    async (e) => {\n      if (onClick) {\n        onClick(e);\n      } else if (call) {\n        await call.leave();\n        onLeave?.();\n      }\n    },\n    [onClick, onLeave, call],\n  );\n  return (\n    <IconButton\n      disabled={disabled}\n      icon=\"call-end\"\n      variant=\"danger\"\n      title={caption ?? t('Leave call')}\n      data-testid=\"cancel-call-button\"\n      onClick={handleClick}\n    />\n  );\n};\n", "import { OwnCapability } from '@stream-io/video-client';\nimport { Restricted } from '@stream-io/video-react-bindings';\nimport { SpeakingWhileMutedNotification } from '../Notification';\nimport { RecordCallButton } from './RecordCallButton';\nimport { ReactionsButton } from './ReactionsButton';\nimport { ScreenShareButton } from './ScreenShareButton';\nimport { ToggleAudioPublishingButton } from './ToggleAudioButton';\nimport { ToggleVideoPublishingButton } from './ToggleVideoButton';\nimport { CancelCallButton } from './CancelCallButton';\n\nexport type CallControlsProps = {\n  onLeave?: () => void;\n};\n\nexport const CallControls = ({ onLeave }: CallControlsProps) => (\n  <div className=\"str-video__call-controls\">\n    <Restricted requiredGrants={[OwnCapability.SEND_AUDIO]}>\n      <SpeakingWhileMutedNotification>\n        <ToggleAudioPublishingButton />\n      </SpeakingWhileMutedNotification>\n    </Restricted>\n    <Restricted requiredGrants={[OwnCapability.SEND_VIDEO]}>\n      <ToggleVideoPublishingButton />\n    </Restricted>\n    <Restricted requiredGrants={[OwnCapability.CREATE_REACTION]}>\n      <ReactionsButton />\n    </Restricted>\n    <Restricted requiredGrants={[OwnCapability.SCREENSHARE]}>\n      <ScreenShareButton />\n    </Restricted>\n    <Restricted\n      requiredGrants={[\n        OwnCapability.START_RECORD_CALL,\n        OwnCapability.STOP_RECORD_CALL,\n      ]}\n    >\n      <RecordCallButton />\n    </Restricted>\n    <CancelCallButton onLeave={onLeave} />\n  </div>\n);\n", "import { lazy, ReactNode, Suspense, useEffect, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport {\n  AggregatedStatsReport,\n  CallStatsReport,\n  SfuModels,\n} from '@stream-io/video-client';\nimport { useCallStateHooks, useI18n } from '@stream-io/video-react-bindings';\nimport { useFloating, useHover, useInteractions } from '@floating-ui/react';\nimport { Icon } from '../Icon';\n\nconst CallStatsLatencyChart = lazy(() => import('./CallStatsLatencyChart'));\n\nenum Status {\n  GOOD = 'Good',\n  OK = 'Ok',\n  BAD = 'Bad',\n}\n\nexport type CallStatsProps = {\n  latencyLowBound?: number;\n  latencyHighBound?: number;\n  showCodecInfo?: boolean;\n  LatencyChartSuspenseFallback?: ReactNode;\n};\n\nexport const CallStats = (props: CallStatsProps) => {\n  const {\n    latencyLowBound = 75,\n    latencyHighBound = 400,\n    showCodecInfo = false,\n    LatencyChartSuspenseFallback = null,\n  } = props;\n  const [latencyBuffer, setLatencyBuffer] = useState<\n    Array<{ x: number; y: number }>\n  >(() => {\n    const now = Date.now();\n    return Array.from({ length: 20 }, (_, i) => ({ x: now + i, y: 0 }));\n  });\n\n  const { t } = useI18n();\n  const [publishBitrate, setPublishBitrate] = useState('-');\n  const [subscribeBitrate, setSubscribeBitrate] = useState('-');\n  const previousStats = useRef<CallStatsReport>(undefined);\n  const { useCallStatsReport } = useCallStateHooks();\n  const callStatsReport = useCallStatsReport();\n\n  useEffect(() => {\n    if (!callStatsReport) return;\n    if (!previousStats.current) {\n      previousStats.current = callStatsReport;\n      return;\n    }\n    const previousCallStatsReport = previousStats.current;\n    setPublishBitrate(() => {\n      return calculatePublishBitrate(previousCallStatsReport, callStatsReport);\n    });\n    setSubscribeBitrate(() => {\n      return calculateSubscribeBitrate(\n        previousCallStatsReport,\n        callStatsReport,\n      );\n    });\n\n    setLatencyBuffer((latencyBuf) => {\n      const newLatencyBuffer = latencyBuf.slice(-19);\n      newLatencyBuffer.push({\n        x: callStatsReport.timestamp,\n        y: callStatsReport.publisherStats.averageRoundTripTimeInMs,\n      });\n      return newLatencyBuffer;\n    });\n\n    previousStats.current = callStatsReport;\n  }, [callStatsReport]);\n\n  const latencyComparison = {\n    lowBound: latencyLowBound,\n    highBound: latencyHighBound,\n    value: callStatsReport?.publisherStats.averageRoundTripTimeInMs || 0,\n  };\n\n  return (\n    <div className=\"str-video__call-stats\">\n      {callStatsReport && (\n        <>\n          <div className=\"str-video__call-stats__header\">\n            <h3 className=\"str-video__call-stats__heading\">\n              <Icon\n                className=\"str-video__call-stats__icon\"\n                icon=\"call-latency\"\n              />\n              {t('Call Latency')}\n            </h3>\n            <p className=\"str-video__call-stats__description\">\n              {t(\n                'Very high latency values may reduce call quality, cause lag, and make the call less enjoyable.',\n              )}\n            </p>\n          </div>\n\n          <div className=\"str-video__call-stats__latencychart\">\n            <Suspense fallback={LatencyChartSuspenseFallback}>\n              <CallStatsLatencyChart values={latencyBuffer} />\n            </Suspense>\n          </div>\n\n          <div className=\"str-video__call-stats__header\">\n            <h3 className=\"str-video__call-stats__heading\">\n              <Icon\n                className=\"str-video__call-stats__icon\"\n                icon=\"network-quality\"\n              />\n              {t('Call performance')}\n            </h3>\n            <p className=\"str-video__call-stats__description\">\n              {t('Review the key data points below to assess call performance')}\n            </p>\n          </div>\n\n          <div className=\"str-video__call-stats__card-container\">\n            <StatCard label={t('Region')} value={callStatsReport.datacenter} />\n            <StatCard\n              label={t('Latency')}\n              value={`${callStatsReport.publisherStats.averageRoundTripTimeInMs} ms.`}\n              comparison={latencyComparison}\n            />\n            <StatCard\n              label={t('Receive jitter')}\n              value={`${callStatsReport.subscriberStats.averageJitterInMs} ms.`}\n              comparison={{\n                ...latencyComparison,\n                value: callStatsReport.subscriberStats.averageJitterInMs,\n              }}\n            />\n            <StatCard\n              label={t('Publish jitter')}\n              value={`${callStatsReport.publisherStats.averageJitterInMs} ms.`}\n              comparison={{\n                ...latencyComparison,\n                value: callStatsReport.publisherStats.averageJitterInMs,\n              }}\n            />\n            <StatCard\n              label={`${t('Publish resolution')}${showCodecInfo ? formatCodec(callStatsReport) : ''}`}\n              value={toFrameSize(callStatsReport.publisherStats)}\n            />\n            <StatCard\n              label={t('Publish quality drop reason')}\n              value={callStatsReport.publisherStats.qualityLimitationReasons}\n            />\n            <StatCard\n              label={t('Receiving resolution')}\n              value={toFrameSize(callStatsReport.subscriberStats)}\n            />\n            <StatCard\n              label={t('Receive quality drop reason')}\n              value={callStatsReport.subscriberStats.qualityLimitationReasons}\n            />\n            <StatCard label={t('Publish bitrate')} value={publishBitrate} />\n            <StatCard label={t('Receiving bitrate')} value={subscribeBitrate} />\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nconst StatCardExplanation = (props: { description: string }) => {\n  const { description } = props;\n  const [isOpen, setIsOpen] = useState(false);\n\n  const { refs, floatingStyles, context } = useFloating({\n    open: isOpen,\n    onOpenChange: setIsOpen,\n  });\n\n  const hover = useHover(context);\n\n  const { getReferenceProps, getFloatingProps } = useInteractions([hover]);\n\n  return (\n    <>\n      <div\n        className=\"str-video__call-explanation\"\n        ref={refs.setReference}\n        {...getReferenceProps()}\n      >\n        <Icon className=\"str-video__call-explanation__icon\" icon=\"info\" />\n      </div>\n      {isOpen && (\n        <div\n          className=\"str-video__call-explanation__description\"\n          ref={refs.setFloating}\n          style={floatingStyles}\n          {...getFloatingProps()}\n        >\n          {description}\n        </div>\n      )}\n    </>\n  );\n};\n\nconst StatsTag = (props: { children: ReactNode; status: Status }) => {\n  const { children, status } = props;\n  return (\n    <div\n      className={clsx('str-video__call-stats__tag', {\n        'str-video__call-stats__tag--good': status === Status.GOOD,\n        'str-video__call-stats__tag--ok': status === Status.OK,\n        'str-video__call-stats__tag--bad': status === Status.BAD,\n      })}\n    >\n      <div className=\"str-video__call-stats__tag__text\">{children}</div>\n    </div>\n  );\n};\n\nexport const StatCard = (props: {\n  label: string;\n  value: string | ReactNode;\n  description?: string;\n  comparison?: { value: number; highBound: number; lowBound: number };\n}) => {\n  const { label, value, description, comparison } = props;\n\n  const { t } = useI18n();\n  const status = comparison ? toStatus(comparison) : undefined;\n\n  return (\n    <div className=\"str-video__call-stats__card\">\n      <div className=\"str-video__call-stats__card-content\">\n        <div className=\"str-video__call-stats__card-label\">\n          {label}\n          {description && <StatCardExplanation description={description} />}\n        </div>\n        <div className=\"str-video__call-stats__card-value\">{value}</div>\n      </div>\n      {status && <StatsTag status={status}>{t(status)}</StatsTag>}\n    </div>\n  );\n};\n\nconst toStatus = (config: {\n  value: number;\n  lowBound: number;\n  highBound: number;\n}): Status => {\n  const { value, lowBound, highBound } = config;\n  if (value <= lowBound) return Status.GOOD;\n  if (value >= lowBound && value <= highBound) return Status.OK;\n  if (value >= highBound) return Status.BAD;\n  return Status.GOOD;\n};\n\nconst toFrameSize = (stats: AggregatedStatsReport) => {\n  const {\n    highestFrameWidth: w,\n    highestFrameHeight: h,\n    highestFramesPerSecond: fps,\n  } = stats;\n  let size = `-`;\n  if (w && h) {\n    size = `${w}x${h}`;\n    if (fps) {\n      size += `@${fps}fps.`;\n    }\n  }\n  return size;\n};\n\nconst formatCodec = (callStatsReport: CallStatsReport): string => {\n  const { codecPerTrackType } = callStatsReport.publisherStats;\n  if (!codecPerTrackType || !codecPerTrackType[SfuModels.TrackType.VIDEO]) {\n    return '';\n  }\n  const [, name] = codecPerTrackType[SfuModels.TrackType.VIDEO].split('/');\n  return name ? ` (${name})` : '';\n};\n\nconst calculatePublishBitrate = (\n  previousCallStatsReport: CallStatsReport,\n  callStatsReport: CallStatsReport,\n) => {\n  const {\n    publisherStats: {\n      totalBytesSent: previousTotalBytesSent,\n      timestamp: previousTimestamp,\n    },\n  } = previousCallStatsReport;\n\n  const {\n    publisherStats: { totalBytesSent, timestamp },\n  } = callStatsReport;\n\n  const bytesSent = totalBytesSent - previousTotalBytesSent;\n  const timeElapsed = timestamp - previousTimestamp;\n  return `${((bytesSent * 8) / timeElapsed).toFixed(2)} kbps`;\n};\n\nconst calculateSubscribeBitrate = (\n  previousCallStatsReport: CallStatsReport,\n  callStatsReport: CallStatsReport,\n) => {\n  const {\n    subscriberStats: {\n      totalBytesReceived: previousTotalBytesReceived,\n      timestamp: previousTimestamp,\n    },\n  } = previousCallStatsReport;\n\n  const {\n    subscriberStats: { totalBytesReceived, timestamp },\n  } = callStatsReport;\n\n  const bytesReceived = totalBytesReceived - previousTotalBytesReceived;\n  const timeElapsed = timestamp - previousTimestamp;\n  return `${((bytesReceived * 8) / timeElapsed).toFixed(2)} kbps`;\n};\n", "import { forwardRef } from 'react';\nimport { useI18n } from '@stream-io/video-react-bindings';\n\nimport { CallStats } from '../CallStats';\nimport { CompositeButton } from '../Button/';\nimport { MenuToggle, ToggleMenuButtonProps } from '../Menu';\nimport { Icon } from '../Icon';\n\nexport type CallStatsButtonProps = {\n  caption?: string;\n};\n\nexport const CallStatsButton = () => (\n  <MenuToggle placement=\"top-end\" ToggleButton={ToggleMenuButton}>\n    <CallStats />\n  </MenuToggle>\n);\n\nconst ToggleMenuButton = forwardRef<\n  HTMLDivElement,\n  ToggleMenuButtonProps<HTMLDivElement> & CallStatsButtonProps\n>(function ToggleMenuButton(props, ref) {\n  const { t } = useI18n();\n  const { caption, menuShown } = props;\n\n  return (\n    <CompositeButton\n      ref={ref}\n      active={menuShown}\n      caption={caption}\n      title={caption || t('Statistics')}\n      data-testid=\"stats-button\"\n    >\n      <Icon icon=\"stats\" />\n    </CompositeButton>\n  );\n});\n", "import { CompositeButton, IconButtonWithMenuProps } from '../Button';\nimport { useI18n } from '@stream-io/video-react-bindings';\nimport { Icon } from '../Icon';\nimport { DeviceSelectorAudioOutput } from '../DeviceSettings';\nimport { WithTooltip } from '../Tooltip';\nimport { useState } from 'react';\n\nexport type ToggleAudioOutputButtonProps = Pick<\n  IconButtonWithMenuProps,\n  'caption' | 'Menu' | 'menuPlacement' | 'onMenuToggle'\n>;\n\nexport const ToggleAudioOutputButton = (\n  props: ToggleAudioOutputButtonProps,\n) => {\n  const { t } = useI18n();\n  const {\n    caption,\n    Menu = DeviceSelectorAudioOutput,\n    menuPlacement = 'top',\n    onMenuToggle,\n  } = props;\n  const [tooltipDisabled, setTooltipDisabled] = useState(false);\n\n  return (\n    <WithTooltip\n      title={caption || t('Speakers')}\n      tooltipDisabled={tooltipDisabled}\n    >\n      <CompositeButton\n        Menu={Menu}\n        menuPlacement={menuPlacement}\n        caption={caption}\n        data-testid=\"audio-output-button\"\n        onMenuToggle={(shown) => {\n          setTooltipDisabled(shown);\n          onMenuToggle?.(shown);\n        }}\n      >\n        <Icon icon=\"speaker\" />\n      </CompositeButton>\n    </WithTooltip>\n  );\n};\n", "import { Restricted, useCall } from '@stream-io/video-react-bindings';\nimport { OwnCapability } from '@stream-io/video-client';\n\nimport { TextButton } from '../Button';\n\nexport const BlockedUserListing = ({ data }: { data: string[] }) => {\n  if (!data.length) return null;\n\n  return (\n    <>\n      <div className=\"str-video__participant-listing\">\n        {data.map((userId) => (\n          <BlockedUserListingItem key={userId} userId={userId} />\n        ))}\n      </div>\n    </>\n  );\n};\n\nconst BlockedUserListingItem = ({ userId }: { userId: string }) => {\n  const call = useCall();\n\n  const unblockUserClickHandler = () => {\n    if (userId) call?.unblockUser(userId);\n  };\n\n  return (\n    <div className=\"str-video__participant-listing-item\">\n      <div className=\"str-video__participant-listing-item__display-name\">\n        {userId}\n      </div>\n      <Restricted requiredGrants={[OwnCapability.BLOCK_USERS]}>\n        <TextButton onClick={unblockUserClickHandler}>Unblock</TextButton>\n      </Restricted>\n    </div>\n  );\n};\n", "import { useCallStateHooks, useI18n } from '@stream-io/video-react-bindings';\n\nimport { IconButton } from '../Button';\n\nexport type CallParticipantListHeaderProps = {\n  /**\n   * Click event listener function to be invoked to dismiss / hide the CallParticipantsList from the UI.\n   */\n  onClose: () => void;\n};\n\nexport const CallParticipantListHeader = ({\n  onClose,\n}: CallParticipantListHeaderProps) => {\n  const { useParticipants, useAnonymousParticipantCount } = useCallStateHooks();\n  const participants = useParticipants();\n  const anonymousParticipantCount = useAnonymousParticipantCount();\n  const { t } = useI18n();\n\n  return (\n    <div className=\"str-video__participant-list-header\">\n      <div className=\"str-video__participant-list-header__title\">\n        {t('Participants')}{' '}\n        <span className=\"str-video__participant-list-header__title-count\">\n          [{participants.length}]\n        </span>\n        {anonymousParticipantCount > 0 && (\n          <span className=\"str-video__participant-list-header__title-anonymous\">\n            {t('Anonymous', { count: anonymousParticipantCount })}\n          </span>\n        )}\n      </div>\n      <IconButton\n        onClick={onClose}\n        className=\"str-video__participant-list-header__close-button\"\n        icon=\"close\"\n      />\n    </div>\n  );\n};\n", "import clsx from 'clsx';\nimport { ComponentProps, ComponentType, forwardRef } from 'react';\nimport { useConnectedUser, useI18n } from '@stream-io/video-react-bindings';\nimport {\n  hasAudio,\n  hasVideo,\n  isPinned,\n  StreamVideoParticipant,\n} from '@stream-io/video-client';\nimport { IconButton } from '../Button';\nimport { MenuToggle, ToggleMenuButtonProps } from '../Menu';\nimport { WithTooltip } from '../Tooltip';\nimport { Avatar } from '../Avatar';\nimport { ParticipantActionsContextMenu } from '../../core/components/ParticipantView/ParticipantActionsContextMenu';\nimport { ParticipantViewContext } from '../../core/components/ParticipantView/ParticipantViewContext';\n\ntype CallParticipantListingItemProps = {\n  /** Participant object be rendered */\n  participant: StreamVideoParticipant;\n  /** Custom component used to display participant's name */\n  DisplayName?: ComponentType<{ participant: StreamVideoParticipant }>;\n};\nexport const CallParticipantListingItem = ({\n  participant,\n  DisplayName = DefaultDisplayName,\n}: CallParticipantListingItemProps) => {\n  const isAudioOn = hasAudio(participant);\n  const isVideoOn = hasVideo(participant);\n  const isPinnedOn = isPinned(participant);\n\n  const { t } = useI18n();\n\n  return (\n    <div className=\"str-video__participant-listing-item\">\n      <Avatar name={participant.name} imageSrc={participant.image} />\n      <DisplayName participant={participant} />\n      <div className=\"str-video__participant-listing-item__media-indicator-group\">\n        <MediaIndicator\n          title={isAudioOn ? t('Microphone on') : t('Microphone off')}\n          className={clsx(\n            'str-video__participant-listing-item__icon',\n            `str-video__participant-listing-item__icon-${\n              isAudioOn ? 'mic' : 'mic-off'\n            }`,\n          )}\n        />\n        <MediaIndicator\n          title={isVideoOn ? t('Camera on') : t('Camera off')}\n          className={clsx(\n            'str-video__participant-listing-item__icon',\n            `str-video__participant-listing-item__icon-${\n              isVideoOn ? 'camera' : 'camera-off'\n            }`,\n          )}\n        />\n        {isPinnedOn && (\n          <MediaIndicator\n            title={t('Pinned')}\n            className={clsx(\n              'str-video__participant-listing-item__icon',\n              'str-video__participant-listing-item__icon-pinned',\n            )}\n          />\n        )}\n\n        <MenuToggle placement=\"bottom-end\" ToggleButton={ToggleButton}>\n          <ParticipantViewContext.Provider\n            value={{ participant, trackType: 'none' }}\n          >\n            <ParticipantActionsContextMenu />\n          </ParticipantViewContext.Provider>\n        </MenuToggle>\n      </div>\n    </div>\n  );\n};\n\nconst MediaIndicator = (props: ComponentProps<'div'>) => (\n  <WithTooltip {...props} />\n);\n\ntype DisplayNameProps = {\n  /** Participant object that provides the data from which display name can be generated */\n  participant: StreamVideoParticipant;\n};\n\nconst DefaultDisplayName = ({ participant }: DisplayNameProps) => {\n  const connectedUser = useConnectedUser();\n  const { t } = useI18n();\n\n  const meFlag = participant.userId === connectedUser?.id ? t('Me') : '';\n  const nameOrId = participant.name || participant.userId || t('Unknown');\n  let displayName;\n  if (!participant.name) {\n    displayName = meFlag || nameOrId || t('Unknown');\n  } else if (meFlag) {\n    displayName = `${nameOrId} (${meFlag})`;\n  } else {\n    displayName = nameOrId;\n  }\n\n  return (\n    <WithTooltip\n      className=\"str-video__participant-listing-item__display-name\"\n      title={displayName}\n    >\n      {displayName}\n    </WithTooltip>\n  );\n};\n\nconst ToggleButton = forwardRef<HTMLButtonElement, ToggleMenuButtonProps>(\n  function ToggleButton(props, ref) {\n    return <IconButton enabled={props.menuShown} icon=\"ellipsis\" ref={ref} />;\n  },\n);\n", "import { ComponentType } from 'react';\nimport { StreamVideoParticipant } from '@stream-io/video-client';\nimport { CallParticipantListingItem } from './CallParticipantListingItem';\n\nexport type CallParticipantListingProps = {\n  /** Array of participant objects to be rendered */\n  data: StreamVideoParticipant[];\n  Header?: ComponentType;\n};\n\nexport const CallParticipantListing = ({\n  data,\n}: CallParticipantListingProps) => (\n  <div className=\"str-video__participant-listing\">\n    {data.map((participant) => (\n      <CallParticipantListingItem\n        key={participant.sessionId}\n        participant={participant}\n      />\n    ))}\n  </div>\n);\n", "import { useI18n } from '@stream-io/video-react-bindings';\n\nexport const EmptyParticipantSearchList = () => {\n  const { t } = useI18n();\n  return (\n    <div className=\"str-video__participant-list--empty\">\n      {t('No participants found')}\n    </div>\n  );\n};\n", "import { ComponentProps, useEffect, useState } from 'react';\nimport clsx from 'clsx';\n\ntype SearchInputProps = ComponentProps<'input'> & {\n  /**\n   * Resets the search to its initial state.\n   * The function is called when Esc key or inputs clear button are pressed\n   */\n  exitSearch: () => void;\n  /**\n   * Flag to signal, whether search input elements should be rendered as active\n   */\n  isActive: boolean;\n};\nexport const SearchInput = ({\n  exitSearch,\n  isActive,\n  ...rest\n}: SearchInputProps) => {\n  const [inputElement, setInputElement] = useState<HTMLInputElement | null>(\n    null,\n  );\n  useEffect(() => {\n    if (!inputElement) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key.toLowerCase() === 'escape') exitSearch();\n    };\n\n    inputElement.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      inputElement.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [exitSearch, inputElement]);\n\n  return (\n    <div\n      className={clsx('str-video__search-input__container', {\n        'str-video__search-input__container--active': isActive,\n      })}\n    >\n      <input placeholder=\"Search\" {...rest} ref={setInputElement} />\n      {isActive ? (\n        <button\n          className=\"str-video__search-input__clear-btn\"\n          onClick={exitSearch}\n        >\n          <span className=\"str-video__search-input__icon--active\" />\n        </button>\n      ) : (\n        <span className=\"str-video__search-input__icon\" />\n      )}\n    </div>\n  );\n};\n", "import { ComponentType } from 'react';\nimport { LoadingIndicator as DefaultLoadingIndicator } from '../LoadingIndicator';\nimport { SearchController } from './hooks';\n\nexport type SearchResultListProps<T> = {\n  data: T[];\n};\n\nexport type SearchResultsProps<T> = Pick<\n  SearchController<T>,\n  'searchResults' | 'searchQueryInProgress'\n> & {\n  /** Component to be displayed, when empty array of search results is provided */\n  EmptySearchResultComponent: ComponentType;\n  /** Component will be used to render non-empty array of search results  */\n  SearchResultList: ComponentType<SearchResultListProps<T>>;\n  /** Component to be displayed while the search query request is in progress */\n  LoadingIndicator?: ComponentType;\n};\n\nexport function SearchResults<T>({\n  EmptySearchResultComponent,\n  LoadingIndicator = DefaultLoadingIndicator,\n  searchQueryInProgress,\n  searchResults,\n  SearchResultList,\n}: SearchResultsProps<T>) {\n  if (searchQueryInProgress) {\n    return (\n      <div className=\"str-video__search-results--loading\">\n        <LoadingIndicator />\n      </div>\n    );\n  }\n  if (!searchResults.length) {\n    return <EmptySearchResultComponent />;\n  }\n\n  return <SearchResultList data={searchResults} />;\n}\n", "import { useEffect, useRef, useState } from 'react';\n\nexport type SearchController<T> = {\n  /** Flag signals that the search request is flight await the response */\n  searchQueryInProgress: boolean;\n  /** Array of items returned by the search query */\n  searchResults: T[];\n};\n\nexport type UseSearchParams<T> = {\n  /** Search function performing the search request */\n  searchFn: (searchQuery: string) => Promise<T[]>;\n  /** Debounce interval applied to the search function */\n  debounceInterval?: number;\n  /** Search query string */\n  searchQuery?: string;\n};\n\nexport const useSearch = <T>({\n  debounceInterval = 200,\n  searchFn,\n  searchQuery = '',\n}: UseSearchParams<T>): SearchController<T> => {\n  const [searchResults, setSearchResults] = useState<T[]>([]);\n  const [searchQueryInProgress, setSearchQueryInProgress] = useState(false);\n\n  const searchFnRef = useRef(searchFn);\n  searchFnRef.current = searchFn;\n\n  useEffect(() => {\n    if (!searchQuery.length) {\n      setSearchQueryInProgress(false);\n      setSearchResults([]);\n      return;\n    }\n\n    setSearchQueryInProgress(true);\n\n    const timeout = setTimeout(async () => {\n      try {\n        const results = await searchFnRef.current(searchQuery);\n        setSearchResults(results);\n      } catch (error) {\n        console.error(error);\n      } finally {\n        setSearchQueryInProgress(false);\n      }\n    }, debounceInterval);\n\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [debounceInterval, searchQuery]);\n\n  return {\n    searchQueryInProgress,\n    searchResults,\n  };\n};\n", "import {\n  Dispatch,\n  forwardRef,\n  SetStateAction,\n  useCallback,\n  useState,\n} from 'react';\nimport {\n  Restricted,\n  useCall,\n  useCallStateHooks,\n  useI18n,\n} from '@stream-io/video-react-bindings';\nimport {\n  name,\n  OwnCapability,\n  StreamVideoParticipant,\n} from '@stream-io/video-client';\n\nimport { BlockedUserListing } from './BlockedUserListing';\nimport { IconButton, TextButton } from '../Button';\nimport { CallParticipantListHeader } from './CallParticipantListHeader';\nimport { CallParticipantListing } from './CallParticipantListing';\nimport { EmptyParticipantSearchList } from './EmptyParticipantSearchList';\nimport { LoadingIndicator } from '../LoadingIndicator';\nimport { SearchInput, SearchResults } from '../Search';\nimport { useSearch, UseSearchParams } from '../Search/hooks';\nimport {\n  GenericMenu,\n  GenericMenuButtonItem,\n  MenuToggle,\n  ToggleMenuButtonProps,\n} from '../Menu';\n\ntype CallParticipantListProps = {\n  /** Click event listener function to be invoked in order to dismiss/hide the CallParticipantsList from the UI */\n  onClose: () => void;\n  /** Custom function to override the searching logic of active participants */\n  activeUsersSearchFn?: UseSearchParams<StreamVideoParticipant>['searchFn'];\n  /** Custom function to override the searching logic of blocked users */\n  blockedUsersSearchFn?: UseSearchParams<string>['searchFn'];\n  /** Interval in ms, during which the participant search calls will be debounced. The default value is 200ms. */\n  debounceSearchInterval?: number;\n};\n\nconst UserListTypes = {\n  active: 'Active users',\n  blocked: 'Blocked users',\n} as const;\n\nexport const CallParticipantsList = ({\n  onClose,\n  activeUsersSearchFn,\n  blockedUsersSearchFn,\n  debounceSearchInterval,\n}: CallParticipantListProps) => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [userListType, setUserListType] =\n    useState<keyof typeof UserListTypes>('active');\n\n  const exitSearch = useCallback(() => setSearchQuery(''), []);\n\n  return (\n    <div className=\"str-video__participant-list\">\n      <CallParticipantListHeader onClose={onClose} />\n      <SearchInput\n        value={searchQuery}\n        onChange={({ currentTarget }) => setSearchQuery(currentTarget.value)}\n        exitSearch={exitSearch}\n        isActive={!!searchQuery}\n      />\n      <CallParticipantListContentHeader\n        userListType={userListType}\n        setUserListType={setUserListType}\n      />\n      <div className=\"str-video__participant-list__content\">\n        {userListType === 'active' && (\n          <ActiveUsersSearchResults\n            searchQuery={searchQuery}\n            activeUsersSearchFn={activeUsersSearchFn}\n            debounceSearchInterval={debounceSearchInterval}\n          />\n        )}\n        {userListType === 'blocked' && (\n          <BlockedUsersSearchResults\n            searchQuery={searchQuery}\n            blockedUsersSearchFn={blockedUsersSearchFn}\n            debounceSearchInterval={debounceSearchInterval}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst CallParticipantListContentHeader = ({\n  userListType,\n  setUserListType,\n}: {\n  userListType: keyof typeof UserListTypes;\n  setUserListType: Dispatch<SetStateAction<keyof typeof UserListTypes>>;\n}) => {\n  const call = useCall();\n  const { t } = useI18n();\n\n  const muteAll = useCallback(() => {\n    call?.muteAllUsers('audio');\n  }, [call]);\n\n  return (\n    <div className=\"str-video__participant-list__content-header\">\n      <div className=\"str-video__participant-list__content-header-title\">\n        {userListType === 'active' && (\n          <Restricted\n            requiredGrants={[OwnCapability.MUTE_USERS]}\n            hasPermissionsOnly\n          >\n            <TextButton onClick={muteAll}>{t('Mute all')}</TextButton>\n          </Restricted>\n        )}\n      </div>\n      <MenuToggle placement=\"bottom-end\" ToggleButton={ToggleButton}>\n        <GenericMenu>\n          {(\n            Object.keys(UserListTypes) as Array<keyof typeof UserListTypes>\n          ).map((lt) => (\n            <GenericMenuButtonItem\n              key={lt}\n              aria-selected={lt === userListType}\n              onClick={() => setUserListType(lt)}\n            >\n              {UserListTypes[lt]}\n            </GenericMenuButtonItem>\n          ))}\n        </GenericMenu>\n      </MenuToggle>\n    </div>\n  );\n};\n\nconst ActiveUsersSearchResults = ({\n  searchQuery,\n  activeUsersSearchFn: activeUsersSearchFnFromProps,\n  debounceSearchInterval,\n}: Pick<\n  CallParticipantListProps,\n  'activeUsersSearchFn' | 'debounceSearchInterval'\n> & { searchQuery: string }) => {\n  const { useParticipants } = useCallStateHooks();\n  const participants = useParticipants({ sortBy: name });\n\n  const activeUsersSearchFn = useCallback(\n    async (queryString: string) => {\n      const queryRegExp = new RegExp(queryString, 'i');\n      return participants.filter((p) => p.name.match(queryRegExp));\n    },\n    [participants],\n  );\n\n  const { searchQueryInProgress, searchResults } = useSearch({\n    searchFn: activeUsersSearchFnFromProps ?? activeUsersSearchFn,\n    debounceInterval: debounceSearchInterval,\n    searchQuery,\n  });\n\n  return (\n    <SearchResults<StreamVideoParticipant>\n      EmptySearchResultComponent={EmptyParticipantSearchList}\n      LoadingIndicator={LoadingIndicator}\n      searchQueryInProgress={searchQueryInProgress}\n      searchResults={searchQuery ? searchResults : participants}\n      SearchResultList={CallParticipantListing}\n    />\n  );\n};\n\nconst BlockedUsersSearchResults = ({\n  blockedUsersSearchFn: blockedUsersSearchFnFromProps,\n  debounceSearchInterval,\n  searchQuery,\n}: Pick<\n  CallParticipantListProps,\n  'blockedUsersSearchFn' | 'debounceSearchInterval'\n> & { searchQuery: string }) => {\n  const { useCallBlockedUserIds } = useCallStateHooks();\n  const blockedUsers = useCallBlockedUserIds();\n\n  const blockedUsersSearchFn = useCallback(\n    async (queryString: string) => {\n      const queryRegExp = new RegExp(queryString, 'i');\n      return blockedUsers.filter((userId) => userId.match(queryRegExp));\n    },\n    [blockedUsers],\n  );\n\n  const { searchQueryInProgress, searchResults } = useSearch({\n    searchFn: blockedUsersSearchFnFromProps ?? blockedUsersSearchFn,\n    debounceInterval: debounceSearchInterval,\n    searchQuery,\n  });\n\n  return (\n    <SearchResults<string>\n      EmptySearchResultComponent={EmptyParticipantSearchList}\n      LoadingIndicator={LoadingIndicator}\n      searchQueryInProgress={searchQueryInProgress}\n      searchResults={searchQuery ? searchResults : blockedUsers}\n      SearchResultList={BlockedUserListing}\n    />\n  );\n};\n\nconst ToggleButton = forwardRef<HTMLButtonElement, ToggleMenuButtonProps>(\n  function ToggleButton(props, ref) {\n    return <IconButton enabled={props.menuShown} icon=\"filter\" ref={ref} />;\n  },\n);\n", "import clsx from 'clsx';\nimport { CSSProperties, useEffect, useState } from 'react';\nimport { useCall, useCallStateHooks } from '@stream-io/video-react-bindings';\n\nexport type CallPreviewProps = {\n  /**\n   * Additional CSS class name to apply to the CallPreview element.\n   */\n  className?: string;\n\n  /**\n   * Additional CSS properties to apply to the CallPreview element.\n   */\n  style?: CSSProperties;\n};\n\nexport const CallPreview = (props: CallPreviewProps) => {\n  const { className, style } = props;\n  const call = useCall();\n  const { useCallThumbnail } = useCallStateHooks();\n  const thumbnail = useCallThumbnail();\n\n  const [imageRef, setImageRef] = useState<HTMLImageElement | null>(null);\n  useEffect(() => {\n    if (!imageRef || !call) return;\n    const cleanup = call.bindCallThumbnailElement(imageRef);\n    return () => cleanup();\n  }, [imageRef, call]);\n\n  if (!thumbnail) return null;\n\n  return (\n    <img\n      className={clsx('str-video__call-preview', className)}\n      style={style}\n      alt=\"Call Preview Thumbnail\"\n      ref={setImageRef}\n    />\n  );\n};\n", "import { CallRecording } from '@stream-io/video-client';\nimport { useI18n } from '@stream-io/video-react-bindings';\nimport { IconButton } from '../Button';\n\nexport type CallRecordingListHeaderProps = {\n  /** Array of CallRecording objects */\n  callRecordings: CallRecording[];\n  /** Callback to be invoked when the refresh button is clicked */\n  onRefresh?: () => void;\n};\n\nexport const CallRecordingListHeader = ({\n  callRecordings,\n  onRefresh,\n}: CallRecordingListHeaderProps) => {\n  const { t } = useI18n();\n  return (\n    <div className=\"str-video__call-recording-list__header\">\n      <div className=\"str-video__call-recording-list__title\">\n        <span>{t('Call Recordings')}</span>\n        {callRecordings.length ? <span>({callRecordings.length})</span> : null}\n      </div>\n      {onRefresh && (\n        <IconButton icon=\"refresh\" title={t('Refresh')} onClick={onRefresh} />\n      )}\n    </div>\n  );\n};\n", "import clsx from 'clsx';\nimport { CallRecording } from '@stream-io/video-client';\nimport { Icon } from '../Icon';\n\nexport type CallRecordingListItemProps = {\n  /** CallRecording object to represent */\n  recording: CallRecording;\n};\n\nconst dateFormat = (date: string) => {\n  const format = new Date(date);\n  return format.toTimeString().split(' ')[0];\n};\nexport const CallRecordingListItem = ({\n  recording,\n}: CallRecordingListItemProps) => {\n  return (\n    <li className=\"str-video__call-recording-list__item\">\n      <div className=\"str-video__call-recording-list__table-cell str-video__call-recording-list__filename\">\n        {recording.filename}\n      </div>\n      <div className=\"str-video__call-recording-list__table-cell str-video__call-recording-list__time\">\n        {dateFormat(recording.start_time)}\n      </div>\n      <div className=\"str-video__call-recording-list__table-cell str-video__call-recording-list__time\">\n        {dateFormat(recording.end_time)}\n      </div>\n      <div className=\"str-video__call-recording-list__table-cell str-video__call-recording-list__download\">\n        <a\n          className={clsx(\n            'str-video__call-recording-list-item__action-button',\n            'str-video__call-recording-list-item__action-button--download',\n          )}\n          role=\"button\"\n          href={recording.url}\n          download={recording.filename}\n          title=\"Download the recording\"\n        >\n          <Icon icon=\"download\" />\n        </a>\n      </div>\n    </li>\n  );\n};\n", "export const EmptyCallRecordingListing = () => {\n  return (\n    <div className=\"str-video__call-recording-list__listing str-video__call-recording-list__listing--empty\">\n      <div className=\"str-video__call-recording-list__listing--icon-empty\" />\n      <p className=\"str-video__call-recording-list__listing--text-empty\">\n        {/* todo: introduce i18n to enable text customization */}\n        No recordings available\n      </p>\n    </div>\n  );\n};\n", "import { CallRecording } from '@stream-io/video-client';\nimport { CallRecordingListItem } from './CallRecordingListItem';\nimport { LoadingIndicator } from '../LoadingIndicator';\n\nexport type LoadingCallRecordingListProps = {\n  /** Array of CallRecording objects */\n  callRecordings: CallRecording[];\n};\n\nexport const LoadingCallRecordingListing = ({\n  callRecordings,\n}: LoadingCallRecordingListProps) => {\n  return (\n    <>\n      {callRecordings.map((recording) => (\n        <CallRecordingListItem recording={recording} key={recording.filename} />\n      ))}\n      <LoadingIndicator text=\"Recording getting ready\" />\n    </>\n  );\n};\n", "import { ComponentType } from 'react';\nimport { CallRecording } from '@stream-io/video-client';\n\nimport {\n  CallRecordingListHeader as DefaultCallRecordingListHeader,\n  CallRecordingListHeaderProps,\n} from './CallRecordingListHeader';\nimport {\n  CallRecordingListItem as DefaultCallRecordingListItem,\n  CallRecordingListItemProps,\n} from './CallRecordingListItem';\nimport { EmptyCallRecordingListing as DefaultEmptyCallRecordingList } from './EmptyCallRecordingListing';\nimport {\n  LoadingCallRecordingListing as DefaultLoadingCallRecordingList,\n  LoadingCallRecordingListProps,\n} from './LoadingCallRecordingListing';\n\nexport type CallRecordingListProps = {\n  /** Array of CallRecording objects to be displayed */\n  callRecordings: CallRecording[];\n  /** Custom component to replace the default header implementation */\n  CallRecordingListHeader?: ComponentType<CallRecordingListHeaderProps>;\n  /** Custom component to replace the default list item implementation */\n  CallRecordingListItem?: ComponentType<CallRecordingListItemProps>;\n  /** Custom component to replace the default empty list component implementation */\n  EmptyCallRecordingList?: ComponentType;\n  /** Signals that a request for new list of CallRecording object has been initiated */\n  loading?: boolean;\n  /** Custom component to be rendered when loading is true */\n  LoadingCallRecordingList?: ComponentType<LoadingCallRecordingListProps>;\n  /** Callback to be invoked when the refresh button is clicked */\n  onRefresh?: () => void;\n};\n\nexport const CallRecordingList = ({\n  callRecordings,\n  CallRecordingListHeader = DefaultCallRecordingListHeader,\n  CallRecordingListItem = DefaultCallRecordingListItem,\n  EmptyCallRecordingList = DefaultEmptyCallRecordingList,\n  loading,\n  LoadingCallRecordingList = DefaultLoadingCallRecordingList,\n  onRefresh,\n}: CallRecordingListProps) => {\n  return (\n    <div className=\"str-video__call-recording-list\">\n      <CallRecordingListHeader\n        callRecordings={callRecordings}\n        onRefresh={onRefresh}\n      />\n      <div className=\"str-video__call-recording-list__listing\">\n        {loading ? (\n          <LoadingCallRecordingList callRecordings={callRecordings} />\n        ) : callRecordings.length ? (\n          <>\n            <ul className=\"str-video__call-recording-list__list\">\n              <li className=\"str-video__call-recording-list__item\">\n                <div className=\"str-video__call-recording-list__filename\">\n                  Name\n                </div>\n                <div className=\"str-video__call-recording-list__time\">\n                  Start time\n                </div>\n                <div className=\"str-video__call-recording-list__time\">\n                  End time\n                </div>\n                <div className=\"str-video__call-recording-list__download\"></div>\n              </li>\n            </ul>\n            <ul className=\"str-video__call-recording-list__list\">\n              {callRecordings.map((recording) => (\n                <CallRecordingListItem\n                  recording={recording}\n                  key={recording.filename}\n                />\n              ))}\n            </ul>\n          </>\n        ) : (\n          <EmptyCallRecordingList />\n        )}\n      </div>\n    </div>\n  );\n};\n", "import {\n  createContext,\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport {\n  NoiseCancellationSettingsModeEnum,\n  OwnCapability,\n} from '@stream-io/video-client';\nimport { useCall, useCallStateHooks } from '@stream-io/video-react-bindings';\nimport type { INoiseCancellation } from '@stream-io/audio-filters-web';\n\nexport type NoiseCancellationProviderProps = {\n  /**\n   * The noise cancellation instance to use.\n   */\n  noiseCancellation: INoiseCancellation;\n};\n\n/**\n * The Noise Cancellation API.\n */\nexport type NoiseCancellationAPI = {\n  /**\n   * A boolean providing information whether Noise Cancelling functionalities\n   * are supported on this platform and for the current user.\n   */\n  isSupported: boolean | undefined;\n  /**\n   * Provides information whether Noise Cancellation is active or not.\n   */\n  isEnabled: boolean;\n  /**\n   * Allows you to temporarily enable or disable the Noise Cancellation filters.\n   *\n   * @param enabled a boolean or a setter.\n   */\n  setEnabled: (enabled: boolean | ((value: boolean) => boolean)) => void;\n\n  /**\n   * Sets the noise suppression level (0-100).\n   *\n   * @param level 0 for no suppression, 100 for maximum suppression.\n   */\n  setSuppressionLevel: (level: number) => void;\n};\n\nconst NoiseCancellationContext = createContext<NoiseCancellationAPI | null>(\n  null,\n);\n\n/**\n * Exposes the NoiseCancellation API.\n * Throws an error if used outside <NoiseCancellationProvider />.\n */\nexport const useNoiseCancellation = (): NoiseCancellationAPI => {\n  const context = useContext(NoiseCancellationContext);\n  if (!context) {\n    throw new Error(\n      'useNoiseCancellation must be used within a NoiseCancellationProvider',\n    );\n  }\n  return context;\n};\n\nexport const NoiseCancellationProvider = (\n  props: PropsWithChildren<NoiseCancellationProviderProps>,\n) => {\n  const { children, noiseCancellation } = props;\n  const call = useCall();\n  const { useCallSettings, useHasPermissions } = useCallStateHooks();\n  const settings = useCallSettings();\n  const noiseCancellationAllowed = !!(\n    settings &&\n    settings.audio.noise_cancellation &&\n    settings.audio.noise_cancellation.mode !==\n      NoiseCancellationSettingsModeEnum.DISABLED\n  );\n\n  const hasCapability = useHasPermissions(\n    OwnCapability.ENABLE_NOISE_CANCELLATION,\n  );\n  const [isSupportedByBrowser, setIsSupportedByBrowser] = useState<boolean>();\n  useEffect(() => {\n    const result = noiseCancellation.isSupported();\n    if (typeof result === 'boolean') {\n      setIsSupportedByBrowser(result);\n    } else {\n      result\n        .then((s) => setIsSupportedByBrowser(s))\n        .catch((err) =>\n          console.error(\n            `Can't determine if noise cancellation is supported`,\n            err,\n          ),\n        );\n    }\n  }, [noiseCancellation]);\n\n  const isSupported =\n    isSupportedByBrowser && hasCapability && noiseCancellationAllowed;\n\n  const [isEnabled, setIsEnabled] = useState(false);\n  const deinit = useRef<Promise<void>>(undefined);\n  useEffect(() => {\n    if (!call || !isSupported) return;\n    noiseCancellation.isEnabled().then((e) => setIsEnabled(e));\n    const unsubscribe = noiseCancellation.on('change', (v) => setIsEnabled(v));\n    const init = (deinit.current || Promise.resolve())\n      .then(() => noiseCancellation.init({ tracer: call.tracer }))\n      .then(() => call.microphone.enableNoiseCancellation(noiseCancellation))\n      .catch((e) => console.error(`Can't initialize noise cancellation`, e));\n\n    return () => {\n      deinit.current = init\n        .then(() => call.microphone.disableNoiseCancellation())\n        .then(() => noiseCancellation.dispose())\n        .then(() => unsubscribe());\n    };\n  }, [call, isSupported, noiseCancellation]);\n\n  const contextValue = useMemo<NoiseCancellationAPI>(\n    () => ({\n      isSupported,\n      isEnabled,\n      setSuppressionLevel: (level) => {\n        if (!noiseCancellation) return;\n        noiseCancellation.setSuppressionLevel(level);\n      },\n      setEnabled: (enabledOrSetter) => {\n        if (!noiseCancellation) return;\n        const enable =\n          typeof enabledOrSetter === 'function'\n            ? enabledOrSetter(isEnabled)\n            : enabledOrSetter;\n        if (enable) {\n          noiseCancellation.enable().catch((err) => {\n            console.error('Failed to enable noise cancellation', err);\n          });\n        } else {\n          noiseCancellation.disable().catch((err) => {\n            console.error('Failed to disable noise cancellation', err);\n          });\n        }\n      },\n    }),\n    [isEnabled, isSupported, noiseCancellation],\n  );\n  return (\n    <NoiseCancellationContext.Provider value={contextValue}>\n      {children}\n    </NoiseCancellationContext.Provider>\n  );\n};\n", "import { CallingState } from '@stream-io/video-client';\nimport { AcceptCallButton, CancelCallButton } from '../CallControls';\nimport { useCall, useCallStateHooks } from '@stream-io/video-react-bindings';\n\nexport const RingingCallControls = () => {\n  const call = useCall();\n  const { useCallCallingState } = useCallStateHooks();\n  const callCallingState = useCallCallingState();\n\n  if (!call) return null;\n\n  const buttonsDisabled = callCallingState !== CallingState.RINGING;\n  return (\n    <div className=\"str-video__pending-call-controls\">\n      {call.isCreatedByMe ? (\n        <CancelCallButton disabled={buttonsDisabled} />\n      ) : (\n        <>\n          <AcceptCallButton disabled={buttonsDisabled} />\n          <CancelCallButton\n            onClick={() => {\n              const reason = call.isCreatedByMe ? 'cancel' : 'decline';\n              call.leave({ reject: true, reason });\n            }}\n            disabled={buttonsDisabled}\n          />\n        </>\n      )}\n    </div>\n  );\n};\n", "import { CallingState, UserResponse } from '@stream-io/video-client';\nimport {\n  useCall,\n  useCallStateHooks,\n  useConnectedUser,\n  useI18n,\n} from '@stream-io/video-react-bindings';\nimport { Avatar } from '../Avatar';\nimport { RingingCallControls } from './RingingCallControls';\n\nconst CALLING_STATE_TO_LABEL: Record<CallingState, string> = {\n  [CallingState.JOINING]: 'Joining',\n  [CallingState.RINGING]: 'Ringing',\n  [CallingState.MIGRATING]: 'Migrating',\n  [CallingState.RECONNECTING]: 'Re-connecting',\n  [CallingState.RECONNECTING_FAILED]: 'Failed',\n  [CallingState.OFFLINE]: 'No internet connection',\n  [CallingState.IDLE]: '',\n  [CallingState.UNKNOWN]: '',\n  [CallingState.JOINED]: 'Joined',\n  [CallingState.LEFT]: 'Left call',\n};\n\nexport type RingingCallProps = {\n  /**\n   * Whether to include the current user in the list of members to show.\n   * @default false.\n   */\n  includeSelf?: boolean;\n\n  /**\n   * The maximum number of members to show.\n   * @default 3.\n   */\n  totalMembersToShow?: number;\n};\n\nexport const RingingCall = (props: RingingCallProps) => {\n  const { includeSelf = false, totalMembersToShow = 3 } = props;\n  const call = useCall();\n  const { t } = useI18n();\n  const { useCallCallingState, useCallMembers } = useCallStateHooks();\n  const callingState = useCallCallingState();\n  const members = useCallMembers();\n  const connectedUser = useConnectedUser();\n\n  if (!call) return null;\n\n  // take the first N members to show their avatars\n  const membersToShow: UserResponse[] = (members || [])\n    .slice(0, totalMembersToShow)\n    .map(({ user }) => user)\n    .filter((user) => user.id !== connectedUser?.id || includeSelf);\n  if (\n    includeSelf &&\n    !membersToShow.find((user) => user.id === connectedUser?.id)\n  ) {\n    // if the current user is not in the initial batch of members,\n    // replace the first item in membersToShow array with the current user\n    const self = members.find(({ user }) => user.id === connectedUser?.id);\n    if (self) {\n      membersToShow.splice(0, 1, self.user);\n    }\n  }\n\n  const callingStateLabel = CALLING_STATE_TO_LABEL[callingState];\n\n  return (\n    <div className=\"str-video__call-panel str-video__call-panel--ringing\">\n      <div className=\"str-video__call-panel__members-list\">\n        {membersToShow.map((user) => (\n          <div key={user.id} className=\"str-video__call-panel__member-box\">\n            <Avatar name={user.name} imageSrc={user.image} />\n            {user.name && (\n              <div className=\"str-video__member_details\">\n                <span className=\"str-video__member_name\">{user.name}</span>\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {callingStateLabel && (\n        <div className=\"str-video__call-panel__calling-state-label\">\n          {t(callingStateLabel)}\n        </div>\n      )}\n\n      {[CallingState.RINGING, CallingState.JOINING].includes(callingState) && (\n        <RingingCallControls />\n      )}\n    </div>\n  );\n};\n", "import {\n  ButtonHTMLAttributes,\n  ComponentProps,\n  forwardRef,\n  Fragment,\n  PropsWithChildren,\n  useEffect,\n  useState,\n} from 'react';\nimport {\n  OwnCapability,\n  PermissionRequestEvent,\n  UserResponse,\n} from '@stream-io/video-client';\nimport {\n  TranslatorFunction,\n  useCall,\n  useCallStateHooks,\n  useI18n,\n} from '@stream-io/video-react-bindings';\nimport clsx from 'clsx';\n\nimport { useFloatingUIPreset } from '../../hooks';\n\nconst byNameOrId = (a: UserResponse, b: UserResponse) => {\n  if (a.name && b.name && a.name < b.name) return -1;\n  if (a.name && b.name && a.name > b.name) return 1;\n  if (a.id < b.id) return -1;\n  if (a.id > b.id) return 1;\n  return 0;\n};\n\ntype HandleUpdatePermission = (\n  request: PermissionRequestEvent,\n  type: 'grant' | 'revoke' | 'dismiss',\n) => () => Promise<void>;\n\nexport const PermissionRequests = () => {\n  const call = useCall();\n  const { useLocalParticipant, useHasPermissions } = useCallStateHooks();\n  const localParticipant = useLocalParticipant();\n  const [expanded, setExpanded] = useState(false);\n  const [permissionRequests, setPermissionRequests] = useState<\n    PermissionRequestEvent[]\n  >([]);\n  const canUpdateCallPermissions = useHasPermissions(\n    OwnCapability.UPDATE_CALL_PERMISSIONS,\n  );\n\n  const localUserId = localParticipant?.userId;\n  useEffect(() => {\n    if (!call || !canUpdateCallPermissions) return;\n    return call.on('call.permission_request', (event) => {\n      if (event.user.id !== localUserId) {\n        setPermissionRequests((requests) =>\n          [...requests, event].sort((a, b) => byNameOrId(a.user, b.user)),\n        );\n      }\n    });\n  }, [call, canUpdateCallPermissions, localUserId]);\n\n  const handleUpdatePermission: HandleUpdatePermission = (request, type) => {\n    return async () => {\n      const { user, permissions } = request;\n      switch (type) {\n        case 'grant':\n          await call?.grantPermissions(user.id, permissions);\n          break;\n        case 'revoke':\n          await call?.revokePermissions(user.id, permissions);\n          break;\n        default:\n          break;\n      }\n      setPermissionRequests((requests) =>\n        requests.filter((r) => r !== request),\n      );\n    };\n  };\n\n  const { refs, x, y, strategy } = useFloatingUIPreset({\n    placement: 'bottom',\n    strategy: 'absolute',\n  });\n\n  // don't render anything if there are no permission requests\n  if (permissionRequests.length === 0) return null;\n\n  return (\n    <div className=\"str-video__permission-requests\" ref={refs.setReference}>\n      <div className=\"str-video__permission-requests__notification\">\n        <span className=\"str-video__permission-requests__notification__message\">\n          {permissionRequests.length} pending permission requests\n        </span>\n        <Button\n          type=\"button\"\n          onClick={() => {\n            setExpanded((e) => !e);\n          }}\n        >\n          {expanded ? 'Hide requests' : 'Show requests'}\n        </Button>\n      </div>\n      {expanded && (\n        <PermissionRequestList\n          ref={refs.setFloating}\n          style={{\n            position: strategy,\n            top: y ?? 0,\n            left: x ?? 0,\n            overflowY: 'auto',\n          }}\n          permissionRequests={permissionRequests}\n          handleUpdatePermission={handleUpdatePermission}\n        />\n      )}\n    </div>\n  );\n};\n\nexport type PermissionRequestListProps = ComponentProps<'div'> & {\n  permissionRequests: PermissionRequestEvent[];\n  handleUpdatePermission: HandleUpdatePermission;\n};\n\nexport const PermissionRequestList = forwardRef<\n  HTMLDivElement,\n  PermissionRequestListProps\n>(function PermissionRequestList(props, ref) {\n  const { permissionRequests, handleUpdatePermission, ...rest } = props;\n\n  const { t } = useI18n();\n\n  return (\n    <div className=\"str-video__permission-requests-list\" ref={ref} {...rest}>\n      {permissionRequests.map((request, reqIndex) => {\n        const { user, permissions } = request;\n        return (\n          <Fragment key={`${user.id}/${reqIndex}`}>\n            {permissions.map((permission) => (\n              <div className=\"str-video__permission-request\" key={permission}>\n                <div className=\"str-video__permission-request__message\">\n                  {messageForPermission(user.name || user.id, permission, t)}\n                </div>\n                <Button\n                  className=\"str-video__permission-request__button--allow\"\n                  type=\"button\"\n                  onClick={handleUpdatePermission(request, 'grant')}\n                >\n                  {t('Allow')}\n                </Button>\n                <Button\n                  className=\"str-video__permission-request__button--reject\"\n                  type=\"button\"\n                  onClick={handleUpdatePermission(request, 'revoke')}\n                >\n                  {t('Revoke')}\n                </Button>\n                <Button\n                  className=\"str-video__permission-request__button--reject\"\n                  type=\"button\"\n                  onClick={handleUpdatePermission(request, 'dismiss')}\n                >\n                  {t('Dismiss')}\n                </Button>\n              </div>\n            ))}\n          </Fragment>\n        );\n      })}\n    </div>\n  );\n});\n\nconst Button = (\n  props: PropsWithChildren<ButtonHTMLAttributes<HTMLButtonElement>>,\n) => {\n  const { className, ...rest } = props;\n  return (\n    <button\n      className={clsx('str-video__permission-request__button', className)}\n      {...rest}\n    />\n  );\n};\n\nconst messageForPermission = (\n  userName: string,\n  permission: string,\n  t: TranslatorFunction,\n) => {\n  switch (permission) {\n    case OwnCapability.SEND_AUDIO:\n      return t('{{ userName }} is requesting to speak', { userName });\n    case OwnCapability.SEND_VIDEO:\n      return t('{{ userName }} is requesting to share their camera', {\n        userName,\n      });\n    case OwnCapability.SCREENSHARE:\n      return t('{{ userName }} is requesting to present their screen', {\n        userName,\n      });\n    default:\n      return t('{{ userName }} is requesting permission: {{ permission }}', {\n        userName,\n        permission,\n      });\n  }\n};\n", "import { ElementType, HTMLProps, PropsWithChildren } from 'react';\nimport clsx from 'clsx';\n\nexport type StreamThemeProps = HTMLProps<HTMLElement> & {\n  as?: ElementType;\n};\n\nexport const StreamTheme = ({\n  as: Component = 'div',\n  className,\n  children,\n  ...props\n}: PropsWithChildren<StreamThemeProps>) => {\n  return (\n    <Component {...props} className={clsx('str-video', className)}>\n      {children}\n    </Component>\n  );\n};\n", "import { ComponentType } from 'react';\nimport clsx from 'clsx';\nimport { useCallStateHooks, useI18n } from '@stream-io/video-react-bindings';\nimport { BaseVideo } from '../../core/components/Video';\nimport { LoadingIndicator } from '../LoadingIndicator';\n\nconst DefaultDisabledVideoPreview = () => {\n  const { t } = useI18n();\n  return (\n    <div className=\"str_video__video-preview__disabled-video-preview\">\n      {t('Video is disabled')}\n    </div>\n  );\n};\n\nconst DefaultNoCameraPreview = () => {\n  const { t } = useI18n();\n  return (\n    <div className=\"str_video__video-preview__no-camera-preview\">\n      {t('No camera found')}\n    </div>\n  );\n};\n\nexport type VideoPreviewProps = {\n  /**\n   * Additional CSS class name to apply to the root element.\n   */\n  className?: string;\n  /**\n   * Enforces mirroring of the video on the X axis. Defaults to true.\n   */\n  mirror?: boolean;\n  /**\n   * Component rendered when user turns off the video.\n   */\n  DisabledVideoPreview?: ComponentType;\n  /**\n   * Component rendered when no camera devices are available.\n   */\n  NoCameraPreview?: ComponentType;\n  /**\n   * Component rendered above the BaseVideo until the video is ready (meaning until the play event is emitted).\n   */\n  StartingCameraPreview?: ComponentType;\n};\n\nexport const VideoPreview = ({\n  className,\n  mirror = true,\n  DisabledVideoPreview = DefaultDisabledVideoPreview,\n  NoCameraPreview = DefaultNoCameraPreview,\n  StartingCameraPreview = LoadingIndicator,\n}: VideoPreviewProps) => {\n  const { useCameraState } = useCallStateHooks();\n  const { devices, status, isMute, mediaStream } = useCameraState();\n\n  let contents;\n  if (isMute && devices?.length === 0) {\n    contents = <NoCameraPreview />;\n  } else if (status === 'enabled') {\n    const loading = !mediaStream;\n    contents = (\n      <>\n        {mediaStream && (\n          <BaseVideo\n            stream={mediaStream}\n            className={clsx('str-video__video-preview', {\n              'str-video__video-preview--mirror': mirror,\n              'str-video__video-preview--loading': loading,\n            })}\n          />\n        )}\n        {loading && <StartingCameraPreview />}\n      </>\n    );\n  } else {\n    contents = <DisabledVideoPreview />;\n  }\n\n  return (\n    <div className={clsx('str-video__video-preview-container', className)}>\n      {contents}\n    </div>\n  );\n};\n", "import { ComponentType, forwardRef } from 'react';\nimport { Placement } from '@floating-ui/react';\nimport {\n  hasAudio,\n  hasPausedTrack,\n  hasScreenShare,\n  hasVideo,\n  SfuModels,\n} from '@stream-io/video-client';\nimport { useCall, useI18n } from '@stream-io/video-react-bindings';\nimport clsx from 'clsx';\n\nimport {\n  Icon,\n  IconButton,\n  MenuToggle,\n  Notification,\n  ToggleMenuButtonProps,\n} from '../../../components';\nimport { ParticipantActionsContextMenu as DefaultParticipantActionsContextMenu } from './ParticipantActionsContextMenu';\nimport { Reaction } from '../../../components/Reaction';\nimport { useParticipantViewContext } from './ParticipantViewContext';\n\nexport type DefaultParticipantViewUIProps = {\n  /**\n   * Turns on/off the status indicator icons (mute, connection quality, etc...).\n   */\n  indicatorsVisible?: boolean;\n  /**\n   * Placement of the context menu component when opened\n   */\n  menuPlacement?: Placement;\n  /**\n   * Option to show/hide menu button component\n   */\n  showMenuButton?: boolean;\n  /**\n   * Custom component to render the context menu\n   */\n  ParticipantActionsContextMenu?: ComponentType;\n};\n\nconst ToggleButton = forwardRef<HTMLButtonElement, ToggleMenuButtonProps>(\n  function ToggleButton(props, ref) {\n    return <IconButton enabled={props.menuShown} icon=\"ellipsis\" ref={ref} />;\n  },\n);\n\nexport const DefaultScreenShareOverlay = () => {\n  const call = useCall();\n  const { t } = useI18n();\n\n  const stopScreenShare = () => {\n    call?.screenShare.disable().catch((err) => {\n      console.error('Failed to stop screen sharing:', err);\n    });\n  };\n\n  return (\n    <div className=\"str-video__screen-share-overlay\">\n      <Icon icon=\"screen-share-off\" />\n      <span className=\"str-video__screen-share-overlay__title\">\n        {t('You are presenting your screen')}\n      </span>\n      <button\n        onClick={stopScreenShare}\n        type=\"button\"\n        className=\"str-video__screen-share-overlay__button\"\n      >\n        <Icon icon=\"close\" /> {t('Stop Screen Sharing')}\n      </button>\n    </div>\n  );\n};\n\nexport const DefaultParticipantViewUI = ({\n  indicatorsVisible = true,\n  menuPlacement = 'bottom-start',\n  showMenuButton = true,\n  ParticipantActionsContextMenu = DefaultParticipantActionsContextMenu,\n}: DefaultParticipantViewUIProps) => {\n  const { participant, trackType } = useParticipantViewContext();\n  const isScreenSharing = hasScreenShare(participant);\n\n  if (\n    participant.isLocalParticipant &&\n    isScreenSharing &&\n    trackType === 'screenShareTrack'\n  ) {\n    return (\n      <>\n        <DefaultScreenShareOverlay />\n        <ParticipantDetails indicatorsVisible={indicatorsVisible} />\n      </>\n    );\n  }\n\n  return (\n    <>\n      {showMenuButton && (\n        <MenuToggle\n          strategy=\"fixed\"\n          placement={menuPlacement}\n          ToggleButton={ToggleButton}\n        >\n          <ParticipantActionsContextMenu />\n        </MenuToggle>\n      )}\n      <Reaction participant={participant} />\n      <ParticipantDetails indicatorsVisible={indicatorsVisible} />\n    </>\n  );\n};\n\nexport const ParticipantDetails = ({\n  indicatorsVisible = true,\n}: Pick<DefaultParticipantViewUIProps, 'indicatorsVisible'>) => {\n  const { participant, trackType } = useParticipantViewContext();\n  const {\n    isLocalParticipant,\n    connectionQuality,\n    pin,\n    sessionId,\n    name,\n    userId,\n  } = participant;\n  const call = useCall();\n\n  const { t } = useI18n();\n  const connectionQualityAsString =\n    !!connectionQuality &&\n    SfuModels.ConnectionQuality[connectionQuality].toLowerCase();\n\n  const hasAudioTrack = hasAudio(participant);\n  const hasVideoTrack = hasVideo(participant);\n  const canUnpin = !!pin && pin.isLocalPin;\n  const isTrackPaused =\n    trackType !== 'none' ? hasPausedTrack(participant, trackType) : false;\n\n  return (\n    <>\n      <div className=\"str-video__participant-details\">\n        <span className=\"str-video__participant-details__name\">\n          {name || userId}\n\n          {indicatorsVisible && !hasAudioTrack && (\n            <span className=\"str-video__participant-details__name--audio-muted\" />\n          )}\n          {indicatorsVisible && !hasVideoTrack && (\n            <span className=\"str-video__participant-details__name--video-muted\" />\n          )}\n          {indicatorsVisible && isTrackPaused && (\n            <span\n              title={t('Video paused due to insufficient bandwidth')}\n              className=\"str-video__participant-details__name--track-paused\"\n            />\n          )}\n          {indicatorsVisible && canUnpin && (\n            // TODO: remove this monstrosity once we have a proper design\n            <span\n              title={t('Unpin')}\n              onClick={() => call?.unpin(sessionId)}\n              className=\"str-video__participant-details__name--pinned\"\n            />\n          )}\n          {indicatorsVisible && <SpeechIndicator />}\n        </span>\n      </div>\n      {indicatorsVisible && (\n        <Notification\n          isVisible={\n            isLocalParticipant &&\n            connectionQuality === SfuModels.ConnectionQuality.POOR\n          }\n          message={t('Poor connection quality')}\n        >\n          {connectionQualityAsString && (\n            <span\n              className={clsx(\n                'str-video__participant-details__connection-quality',\n                `str-video__participant-details__connection-quality--${connectionQualityAsString}`,\n              )}\n              title={connectionQualityAsString}\n            />\n          )}\n        </Notification>\n      )}\n    </>\n  );\n};\n\nexport const SpeechIndicator = () => {\n  const { participant } = useParticipantViewContext();\n  const { isSpeaking, isDominantSpeaker } = participant;\n  return (\n    <span\n      className={clsx(\n        'str-video__speech-indicator',\n        isSpeaking && 'str-video__speech-indicator--speaking',\n        isDominantSpeaker && 'str-video__speech-indicator--dominant',\n      )}\n    >\n      <span className=\"str-video__speech-indicator__bar\" />\n      <span className=\"str-video__speech-indicator__bar\" />\n      <span className=\"str-video__speech-indicator__bar\" />\n    </span>\n  );\n};\n", "import {\n  ComponentType,\n  forwardRef,\n  ReactElement,\n  useMemo,\n  useState,\n} from 'react';\nimport clsx from 'clsx';\nimport {\n  hasAudio,\n  hasScreenShareAudio,\n  hasVideo,\n  StreamVideoParticipant,\n  VideoTrackType,\n} from '@stream-io/video-client';\nimport { useCallStateHooks } from '@stream-io/video-react-bindings';\n\nimport { Audio } from '../Audio';\nimport { Video, VideoProps } from '../Video';\nimport { useTrackElementVisibility } from '../../hooks';\nimport { DefaultParticipantViewUI } from './DefaultParticipantViewUI';\nimport { applyElementToRef, isComponentType } from '../../../utilities';\nimport { ParticipantViewContext } from './ParticipantViewContext';\n\nexport type ParticipantViewProps = {\n  /**\n   * The participant whose video/audio stream we want to play.\n   */\n  participant: StreamVideoParticipant;\n\n  /**\n   * Override the default UI for rendering participant information/actions.\n   * pass `null` if you wish to not render anything\n   * @default DefaultParticipantViewUI\n   */\n  ParticipantViewUI?: ComponentType | ReactElement | null;\n\n  /**\n   * The kind of video stream to play for the given participant.\n   * The default value is `videoTrack`.\n   * You can use `none` if you're building an audio-only call.\n   */\n  trackType?: VideoTrackType | 'none';\n\n  /**\n   * Forces participant's video to be mirrored or unmirrored. By default, video track\n   * from the local participant is mirrored, and all other videos are not mirrored.\n   */\n  mirror?: boolean;\n\n  /**\n   * This prop is only useful for advanced use-cases (for example, building your own layout).\n   * When set to `true` it will mute the give participant's audio stream on the client side.\n   * The local participant is always muted.\n   */\n  muteAudio?: boolean;\n\n  /**\n   * An object with set functions meant for exposing the video\n   * and video placeholder elements to the integrators.\n   * It's useful when you want to attach custom event handlers to these elements.\n   * - `refs.setVideoElement`\n   * - `refs.setVideoPlaceholderElement`\n   */\n  refs?: VideoProps['refs'];\n\n  /**\n   * Custom class applied to the root DOM element.\n   */\n  className?: string;\n} & Pick<VideoProps, 'VideoPlaceholder' | 'PictureInPicturePlaceholder'>;\n\nexport const ParticipantView = forwardRef<HTMLDivElement, ParticipantViewProps>(\n  function ParticipantView(\n    {\n      participant,\n      trackType = 'videoTrack',\n      mirror,\n      muteAudio,\n      refs: { setVideoElement, setVideoPlaceholderElement } = {},\n      className,\n      VideoPlaceholder,\n      PictureInPicturePlaceholder,\n      ParticipantViewUI = DefaultParticipantViewUI as ComponentType,\n    },\n    ref,\n  ) {\n    const { isLocalParticipant, isSpeaking, isDominantSpeaker, sessionId } =\n      participant;\n\n    const hasAudioTrack = hasAudio(participant);\n    const hasVideoTrack = hasVideo(participant);\n    const hasScreenShareAudioTrack = hasScreenShareAudio(participant);\n\n    const [trackedElement, setTrackedElement] = useState<HTMLDivElement | null>(\n      null,\n    );\n\n    const [contextVideoElement, setContextVideoElement] =\n      useState<HTMLVideoElement | null>(null);\n\n    const [contextVideoPlaceholderElement, setContextVideoPlaceholderElement] =\n      useState<HTMLDivElement | null>(null);\n\n    // TODO: allow to pass custom ViewportTracker instance from props\n    useTrackElementVisibility({\n      sessionId,\n      trackedElement,\n      trackType,\n    });\n\n    const { useIncomingVideoSettings } = useCallStateHooks();\n    const { isParticipantVideoEnabled } = useIncomingVideoSettings();\n\n    const participantViewContextValue = useMemo(\n      () => ({\n        participant,\n        participantViewElement: trackedElement,\n        videoElement: contextVideoElement,\n        videoPlaceholderElement: contextVideoPlaceholderElement,\n        trackType,\n      }),\n      [\n        contextVideoElement,\n        contextVideoPlaceholderElement,\n        participant,\n        trackedElement,\n        trackType,\n      ],\n    );\n\n    const videoRefs: VideoProps['refs'] = useMemo(\n      () => ({\n        setVideoElement: (element) => {\n          setVideoElement?.(element);\n          setContextVideoElement(element);\n        },\n        setVideoPlaceholderElement: (element) => {\n          setVideoPlaceholderElement?.(element);\n          setContextVideoPlaceholderElement(element);\n        },\n      }),\n      [setVideoElement, setVideoPlaceholderElement],\n    );\n\n    return (\n      <div\n        data-testid=\"participant-view\"\n        ref={(element) => {\n          applyElementToRef(ref, element);\n          setTrackedElement(element);\n        }}\n        className={clsx(\n          'str-video__participant-view',\n          isDominantSpeaker && 'str-video__participant-view--dominant-speaker',\n          isSpeaking && 'str-video__participant-view--speaking',\n          !hasVideoTrack && 'str-video__participant-view--no-video',\n          !hasAudioTrack && 'str-video__participant-view--no-audio',\n          className,\n        )}\n      >\n        <ParticipantViewContext.Provider value={participantViewContextValue}>\n          {/* mute the local participant, as we don't want to hear ourselves */}\n          {!isLocalParticipant && !muteAudio && (\n            <>\n              {hasAudioTrack && (\n                <Audio participant={participant} trackType=\"audioTrack\" />\n              )}\n              {hasScreenShareAudioTrack && (\n                <Audio\n                  participant={participant}\n                  trackType=\"screenShareAudioTrack\"\n                />\n              )}\n            </>\n          )}\n          <Video\n            VideoPlaceholder={VideoPlaceholder}\n            PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n            participant={participant}\n            trackType={trackType}\n            refs={videoRefs}\n            enabled={\n              isLocalParticipant ||\n              trackType !== 'videoTrack' ||\n              isParticipantVideoEnabled(participant.sessionId)\n            }\n            mirror={mirror}\n            autoPlay\n          />\n          {isComponentType(ParticipantViewUI) ? (\n            <ParticipantViewUI />\n          ) : (\n            ParticipantViewUI\n          )}\n        </ParticipantViewContext.Provider>\n      </div>\n    );\n  },\n);\n\nParticipantView.displayName = 'ParticipantView';\n", "import { ComponentType, PropsWithChildren } from 'react';\nimport {\n  StreamCallProvider,\n  StreamCallProviderProps,\n} from '@stream-io/video-react-bindings';\n\n// re-exporting the StreamCallProvider as StreamCall\nexport const StreamCall: ComponentType<\n  PropsWithChildren<StreamCallProviderProps>\n> = StreamCallProvider;\n\nStreamCall.displayName = 'StreamCall';\n", "import en from './en.json';\n\nexport const translations = { en };\n", "import {\n  StreamVideoProps,\n  StreamVideoProvider,\n} from '@stream-io/video-react-bindings';\nimport { PropsWithChildren } from 'react';\nimport { translations } from '../../../translations';\n\nexport const StreamVideo = (props: PropsWithChildren<StreamVideoProps>) => {\n  return (\n    <StreamVideoProvider translationsOverrides={translations} {...props} />\n  );\n};\n\nStreamVideo.displayName = 'StreamVideo';\n", "export type Filter<T> =\n  | { $and: Array<Filter<T>> }\n  | { $or: Array<Filter<T>> }\n  | { $not: Filter<T> }\n  | Conditions<T>;\n\ntype Conditions<T> = {\n  [K in keyof T]?: T[K] extends Array<infer E>\n    ? ArrayOperator<E>\n    : ScalarOperator<T[K]>;\n};\n\nexport type ScalarOperator<T> =\n  | EqOperator<T>\n  | NeqOperator<T>\n  | InOperator<T>\n  | GtOperator<T>\n  | GteOperator<T>\n  | LtOperator<T>\n  | LteOperator<T>\n  | T;\n\nexport type ArrayOperator<T> = ContainsOperator<T>;\n\nexport type AutocompleteOperator<T> = { $autocomplete: T };\nexport type EqOperator<T> = { $eq: T };\nexport type GtOperator<T> = { $gt: T };\nexport type GteOperator<T> = { $gte: T };\nexport type LtOperator<T> = { $lt: T };\nexport type LteOperator<T> = { $lte: T };\nexport type NeqOperator<T> = { $neq: T };\nexport type InOperator<T> = { $in: Array<T> };\nexport type ContainsOperator<T> = { $contains: T };\n\nexport function applyFilter<T>(obj: T, filter: Filter<T>): boolean {\n  if ('$and' in filter) {\n    return filter.$and.every((f) => applyFilter(obj, f));\n  }\n\n  if ('$or' in filter) {\n    return filter.$or.some((f) => applyFilter(obj, f));\n  }\n\n  if ('$not' in filter) {\n    return !applyFilter(obj, filter.$not);\n  }\n\n  return checkConditions(obj, filter);\n}\n\ntype DateString = string;\nconst isDateString = (value: unknown): value is DateString =>\n  typeof value === 'string' &&\n  /^((?:(\\d{4}-\\d{2}-\\d{2})T(\\d{2}:\\d{2}:\\d{2}(?:\\.\\d+)?))(Z|[+-]\\d{2}:\\d{2})?)$/.test(\n    value,\n  );\n\nfunction checkConditions<T>(obj: T, conditions: Conditions<T>): boolean {\n  let match = true;\n\n  for (const key of Object.keys(conditions) as Array<keyof T>) {\n    const operator = conditions[key];\n    const maybeOperator = operator && typeof operator === 'object';\n    let value: T[keyof T] | number = obj[key];\n\n    if (value instanceof Date) {\n      value = value.getTime();\n    } else if (isDateString(value)) {\n      value = new Date(value).getTime();\n    }\n\n    if (maybeOperator && '$eq' in operator) {\n      const eqOperator = operator as EqOperator<typeof value>;\n      const eqOperatorValue = isDateString(eqOperator.$eq)\n        ? new Date(eqOperator.$eq).getTime()\n        : eqOperator.$eq;\n      match &&= eqOperatorValue === value;\n    } else if (maybeOperator && '$neq' in operator) {\n      const neqOperator = operator as NeqOperator<typeof value>;\n      match &&= neqOperator.$neq !== value;\n    } else if (maybeOperator && '$in' in operator) {\n      const inOperator = operator as InOperator<typeof value>;\n      match &&= inOperator.$in.includes(value);\n    } else if (maybeOperator && '$contains' in operator) {\n      if (Array.isArray(value)) {\n        const containsOperator = operator as ContainsOperator<\n          (typeof value)[number]\n        >;\n        match &&= value.includes(containsOperator.$contains);\n      } else {\n        match = false;\n      }\n    } else if (maybeOperator && '$gt' in operator) {\n      const gtOperator = operator as GtOperator<typeof value>;\n      const gtOperatorValue = isDateString(gtOperator.$gt)\n        ? new Date(gtOperator.$gt).getTime()\n        : gtOperator.$gt;\n      match &&= value > gtOperatorValue;\n    } else if (maybeOperator && '$gte' in operator) {\n      const gteOperator = operator as GteOperator<typeof value>;\n      const gteOperatorValue = isDateString(gteOperator.$gte)\n        ? new Date(gteOperator.$gte).getTime()\n        : gteOperator.$gte;\n      match &&= value >= gteOperatorValue;\n    } else if (maybeOperator && '$lt' in operator) {\n      const ltOperator = operator as LtOperator<typeof value>;\n      const ltOperatorValue = isDateString(ltOperator.$lt)\n        ? new Date(ltOperator.$lt).getTime()\n        : ltOperator.$lt;\n      match &&= value < ltOperatorValue;\n    } else if (maybeOperator && '$lte' in operator) {\n      const lteOperator = operator as LteOperator<typeof value>;\n      const lteOperatorValue = isDateString(lteOperator.$lte)\n        ? new Date(lteOperator.$lte).getTime()\n        : lteOperator.$lte;\n      match &&= value <= lteOperatorValue;\n      // } else if (maybeOperator && '$autocomplete' in operator) {\n      // TODO: regexp solution maybe?\n      // match &&= false;\n    } else {\n      const eqValue = operator as typeof value;\n      match &&= eqValue === value;\n    }\n\n    if (!match) {\n      return false;\n    }\n  }\n\n  return true;\n}\n", "import { useEffect, useMemo } from 'react';\nimport {\n  Call,\n  CallTypes,\n  combineComparators,\n  Comparator,\n  defaultSortPreset,\n  hasAudio,\n  hasScreenShare,\n  hasVideo,\n  isPinned,\n  paginatedLayoutSortPreset,\n  screenSharing,\n  speakerLayoutSortPreset,\n  StreamVideoParticipant,\n} from '@stream-io/video-client';\nimport { useCallStateHooks } from '@stream-io/video-react-bindings';\nimport { applyFilter, Filter } from '../../../utilities/filter';\n\nexport type FilterableParticipant = Pick<\n  StreamVideoParticipant,\n  'userId' | 'isSpeaking' | 'isDominantSpeaker' | 'name' | 'roles'\n> & {\n  isPinned: boolean;\n  hasVideo: boolean;\n  hasAudio: boolean;\n  hasScreenShare: boolean;\n};\n\nexport type ParticipantFilter = Filter<FilterableParticipant>;\nexport type ParticipantPredicate = (\n  participant: StreamVideoParticipant,\n) => boolean;\n\nexport const useFilteredParticipants = ({\n  excludeLocalParticipant = false,\n  filterParticipants,\n}: {\n  excludeLocalParticipant?: boolean;\n  filterParticipants?: ParticipantFilter | ParticipantPredicate;\n}) => {\n  const { useParticipants, useRemoteParticipants } = useCallStateHooks();\n  const allParticipants = useParticipants();\n  const remoteParticipants = useRemoteParticipants();\n  return useMemo(() => {\n    const unfilteredParticipants = excludeLocalParticipant\n      ? remoteParticipants\n      : allParticipants;\n\n    return filterParticipants\n      ? applyParticipantsFilter(unfilteredParticipants, filterParticipants)\n      : unfilteredParticipants;\n  }, [\n    allParticipants,\n    remoteParticipants,\n    excludeLocalParticipant,\n    filterParticipants,\n  ]);\n};\n\nexport const applyParticipantsFilter = (\n  participants: StreamVideoParticipant[],\n  filter: ParticipantPredicate | ParticipantFilter,\n) => {\n  const filterCallback =\n    typeof filter === 'function'\n      ? filter\n      : (participant: StreamVideoParticipant) =>\n          applyFilter(\n            {\n              userId: participant.userId,\n              isSpeaking: participant.isSpeaking,\n              isDominantSpeaker: participant.isDominantSpeaker,\n              name: participant.name,\n              roles: participant.roles,\n              isPinned: isPinned(participant),\n              hasVideo: hasVideo(participant),\n              hasAudio: hasAudio(participant),\n              hasScreenShare: hasScreenShare(participant),\n            },\n            filter,\n          );\n\n  return participants.filter(filterCallback);\n};\n\nexport const usePaginatedLayoutSortPreset = (call: Call | undefined) => {\n  useEffect(() => {\n    if (!call) return;\n    call.setSortParticipantsBy(paginatedLayoutSortPreset);\n    return () => {\n      resetSortPreset(call);\n    };\n  }, [call]);\n};\n\nexport const useSpeakerLayoutSortPreset = (\n  call: Call | undefined,\n  isOneOnOneCall: boolean,\n) => {\n  useEffect(() => {\n    if (!call) return;\n    // always show the remote participant in the spotlight\n    if (isOneOnOneCall) {\n      call.setSortParticipantsBy(combineComparators(screenSharing, loggedIn));\n    } else {\n      call.setSortParticipantsBy(speakerLayoutSortPreset);\n    }\n    return () => {\n      resetSortPreset(call);\n    };\n  }, [call, isOneOnOneCall]);\n};\n\nexport const useRawRemoteParticipants = () => {\n  const { useRawParticipants } = useCallStateHooks();\n  const rawParticipants = useRawParticipants();\n  return useMemo(\n    () => rawParticipants.filter((p) => !p.isLocalParticipant),\n    [rawParticipants],\n  );\n};\n\nconst resetSortPreset = (call: Call) => {\n  // reset the sorting to the default for the call type\n  const callConfig = CallTypes.get(call.type);\n  call.setSortParticipantsBy(\n    callConfig.options.sortParticipantsBy || defaultSortPreset,\n  );\n};\n\nconst loggedIn: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (a.isLocalParticipant) return 1;\n  if (b.isLocalParticipant) return -1;\n  return 0;\n};\n", "import clsx from 'clsx';\nimport {\n  ComponentType,\n  ReactElement,\n  useCallback,\n  useEffect,\n  useState,\n} from 'react';\nimport {\n  useCall,\n  useCallStateHooks,\n  useI18n,\n} from '@stream-io/video-react-bindings';\nimport { hasScreenShare } from '@stream-io/video-client';\nimport { ParticipantView, useParticipantViewContext } from '../ParticipantView';\nimport { ParticipantsAudio } from '../Audio';\nimport {\n  usePaginatedLayoutSortPreset,\n  useRawRemoteParticipants,\n} from './hooks';\n\n/**\n * The props for the {@link LivestreamLayout} component.\n */\nexport type LivestreamLayoutProps = {\n  /**\n   * Whether the livestream is muted. Defaults to `false`.\n   */\n  muted?: boolean;\n\n  /**\n   * Whether to show the participant count. Defaults to `true`.\n   */\n  showParticipantCount?: boolean;\n\n  /**\n   * Whether to enable fullscreen mode. Defaults to `true`.\n   */\n  enableFullScreen?: boolean;\n\n  /**\n   * Whether to show the duration of the call. Defaults to `true`.\n   */\n  showDuration?: boolean;\n\n  /**\n   * Whether to show the live badge. Defaults to `true`.\n   */\n  showLiveBadge?: boolean;\n\n  /**\n   * Whether to show the speaker name. Defaults to `false`.\n   */\n  showSpeakerName?: boolean;\n\n  /**\n   * When set to `false` disables mirroring of the local participant's video.\n   * @default true\n   */\n  mirrorLocalParticipantVideo?: boolean;\n\n  /**\n   * The props to pass to the floating participant element.\n   */\n  floatingParticipantProps?: LivestreamLayoutProps & {\n    /**\n     * The position of the floating participant element. Defaults to `top-right`.\n     */\n    position?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\n  };\n\n  /**\n   * Override the default participant view overlay UI.\n   */\n  ParticipantViewUI?: ComponentType | ReactElement | null;\n};\n\nexport const LivestreamLayout = (props: LivestreamLayoutProps) => {\n  const { useParticipants, useHasOngoingScreenShare } = useCallStateHooks();\n  const call = useCall();\n  const participants = useParticipants();\n  const [currentSpeaker] = participants;\n  const remoteParticipants = useRawRemoteParticipants();\n  const hasOngoingScreenShare = useHasOngoingScreenShare();\n  const presenter = hasOngoingScreenShare\n    ? participants.find(hasScreenShare)\n    : undefined;\n\n  usePaginatedLayoutSortPreset(call);\n\n  const { floatingParticipantProps, muted, ParticipantViewUI } = props;\n  const overlay = ParticipantViewUI ?? (\n    <ParticipantOverlay\n      showParticipantCount={props.showParticipantCount}\n      showDuration={props.showDuration}\n      showLiveBadge={props.showLiveBadge}\n      showSpeakerName={props.showSpeakerName}\n      enableFullScreen={props.enableFullScreen}\n    />\n  );\n\n  const floatingParticipantOverlay =\n    hasOngoingScreenShare &&\n    (ParticipantViewUI ?? (\n      <ParticipantOverlay\n        // these elements aren't needed for the video feed\n        showParticipantCount={\n          floatingParticipantProps?.showParticipantCount ?? false\n        }\n        showDuration={floatingParticipantProps?.showDuration ?? false}\n        showLiveBadge={floatingParticipantProps?.showLiveBadge ?? false}\n        showSpeakerName={floatingParticipantProps?.showSpeakerName ?? true}\n        enableFullScreen={floatingParticipantProps?.enableFullScreen ?? true}\n      />\n    ));\n\n  return (\n    <div className=\"str-video__livestream-layout__wrapper\">\n      {!muted && <ParticipantsAudio participants={remoteParticipants} />}\n      {hasOngoingScreenShare && presenter && (\n        <ParticipantView\n          className=\"str-video__livestream-layout__screen-share\"\n          participant={presenter}\n          ParticipantViewUI={overlay}\n          trackType=\"screenShareTrack\"\n          muteAudio // audio is rendered by ParticipantsAudio\n        />\n      )}\n      {currentSpeaker && (\n        <ParticipantView\n          className={clsx(\n            hasOngoingScreenShare &&\n              clsx(\n                'str-video__livestream-layout__floating-participant',\n                `str-video__livestream-layout__floating-participant--${\n                  floatingParticipantProps?.position ?? 'top-right'\n                }`,\n              ),\n          )}\n          participant={currentSpeaker}\n          ParticipantViewUI={floatingParticipantOverlay || overlay}\n          mirror={\n            props.mirrorLocalParticipantVideo !== false ? undefined : false\n          }\n          muteAudio // audio is rendered by ParticipantsAudio\n        />\n      )}\n    </div>\n  );\n};\n\nLivestreamLayout.displayName = 'LivestreamLayout';\n\n/**\n * The props for the {@link LivestreamLayout} component.\n */\nexport type BackstageLayoutProps = {\n  /**\n   * Whether to show the counter for participants that joined before\n   * the livestream went live. Defaults to `true`.\n   */\n  showEarlyParticipantCount?: boolean;\n};\n\nexport const BackstageLayout = (props: BackstageLayoutProps) => {\n  const { showEarlyParticipantCount = true } = props;\n  const { useParticipantCount, useCallStartsAt } = useCallStateHooks();\n  const participantCount = useParticipantCount();\n  const startsAt = useCallStartsAt();\n  const { t } = useI18n();\n\n  return (\n    <div className=\"str-video__livestream-layout__wrapper\">\n      <div className=\"str-video__livestream-layout__backstage\">\n        {startsAt && (\n          <span className=\"str-video__livestream-layout__starts-at\">\n            {startsAt.getTime() < Date.now()\n              ? t('Livestream starts soon')\n              : t('Livestream starts at {{ startsAt }}', { startsAt })}\n          </span>\n        )}\n        {showEarlyParticipantCount && (\n          <span className=\"str-video__livestream-layout__early-viewers-count\">\n            {t('{{ count }} participants joined early', {\n              count: participantCount,\n            })}\n          </span>\n        )}\n      </div>\n    </div>\n  );\n};\n\nBackstageLayout.displayName = 'BackstageLayout';\n\nconst ParticipantOverlay = (props: {\n  enableFullScreen?: boolean;\n  showParticipantCount?: boolean;\n  showDuration?: boolean;\n  showLiveBadge?: boolean;\n  showSpeakerName?: boolean;\n}) => {\n  const {\n    enableFullScreen = true,\n    showParticipantCount = true,\n    showDuration = true,\n    showLiveBadge = true,\n    showSpeakerName = false,\n  } = props;\n  const overlayBarVisible =\n    enableFullScreen ||\n    showParticipantCount ||\n    showDuration ||\n    showLiveBadge ||\n    showSpeakerName;\n  const { participant } = useParticipantViewContext();\n  const { useParticipantCount } = useCallStateHooks();\n  const participantCount = useParticipantCount();\n  const duration = useUpdateCallDuration();\n  const toggleFullScreen = useToggleFullScreen();\n  const { t } = useI18n();\n  return (\n    <div className=\"str-video__livestream-layout__overlay\">\n      {overlayBarVisible && (\n        <div className=\"str-video__livestream-layout__overlay__bar\">\n          {showLiveBadge && (\n            <span className=\"str-video__livestream-layout__live-badge\">\n              {t('Live')}\n            </span>\n          )}\n          {showParticipantCount && (\n            <span className=\"str-video__livestream-layout__viewers-count\">\n              {participantCount}\n            </span>\n          )}\n          {showSpeakerName && (\n            <span\n              className=\"str-video__livestream-layout__speaker-name\"\n              title={participant.name || participant.userId || ''}\n            >\n              {participant.name || participant.userId || ''}\n            </span>\n          )}\n          {showDuration && (\n            <span className=\"str-video__livestream-layout__duration\">\n              {formatDuration(duration)}\n            </span>\n          )}\n          {enableFullScreen && (\n            <span\n              className=\"str-video__livestream-layout__go-fullscreen\"\n              onClick={toggleFullScreen}\n            />\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst useUpdateCallDuration = () => {\n  const { useIsCallLive, useCallSession } = useCallStateHooks();\n  const isCallLive = useIsCallLive();\n  const session = useCallSession();\n  const [duration, setDuration] = useState(() => {\n    if (!session || !session.live_started_at) return 0;\n    const liveStartTime = new Date(session.live_started_at);\n    const now = new Date();\n    return Math.floor((now.getTime() - liveStartTime.getTime()) / 1000);\n  });\n\n  useEffect(() => {\n    if (!isCallLive) return;\n    const interval = setInterval(() => {\n      setDuration((d) => d + 1);\n    }, 1000);\n    return () => {\n      clearInterval(interval);\n    };\n  }, [isCallLive]);\n\n  return duration;\n};\n\nconst useToggleFullScreen = () => {\n  const { participantViewElement } = useParticipantViewContext();\n  const [isFullscreen, setIsFullscreen] = useState(\n    !!document.fullscreenElement,\n  );\n  useEffect(() => {\n    const handler = () => setIsFullscreen(!!document.fullscreenElement);\n    document.addEventListener('fullscreenchange', handler);\n    return () => {\n      document.removeEventListener('fullscreenchange', handler);\n    };\n  }, []);\n  return useCallback(() => {\n    if (isFullscreen) {\n      document.exitFullscreen().catch((err) => {\n        console.error('Failed to exit fullscreen', err);\n      });\n    } else {\n      participantViewElement?.requestFullscreen().catch((err) => {\n        console.error('Failed to enter fullscreen', err);\n      });\n    }\n  }, [isFullscreen, participantViewElement]);\n};\n\nconst formatDuration = (durationInMs: number) => {\n  const days = Math.floor(durationInMs / 86400);\n  const hours = Math.floor(durationInMs / 3600);\n  const minutes = Math.floor((durationInMs % 3600) / 60);\n  const seconds = durationInMs % 60;\n\n  return `${days ? days + ' ' : ''}${hours ? hours + ':' : ''}${\n    minutes < 10 ? '0' : ''\n  }${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\n};\n", "import { useEffect, useMemo, useState } from 'react';\nimport { useCall } from '@stream-io/video-react-bindings';\nimport { StreamVideoParticipant } from '@stream-io/video-client';\nimport clsx from 'clsx';\n\nimport {\n  DefaultParticipantViewUI,\n  ParticipantView,\n  ParticipantViewProps,\n} from '../ParticipantView';\nimport { ParticipantsAudio } from '../Audio';\nimport { IconButton } from '../../../components';\nimport { chunk } from '../../../utilities';\nimport {\n  ParticipantFilter,\n  ParticipantPredicate,\n  useFilteredParticipants,\n  usePaginatedLayoutSortPreset,\n  useRawRemoteParticipants,\n} from './hooks';\n\nconst GROUP_SIZE = 16;\n\ntype PaginatedGridLayoutGroupProps = {\n  /**\n   * The group of participants to render.\n   */\n  group: Array<StreamVideoParticipant>;\n} & Pick<\n  ParticipantViewProps,\n  'VideoPlaceholder' | 'PictureInPicturePlaceholder' | 'mirror'\n> &\n  Required<Pick<ParticipantViewProps, 'ParticipantViewUI'>>;\n\nconst PaginatedGridLayoutGroup = ({\n  group,\n  mirror,\n  VideoPlaceholder,\n  PictureInPicturePlaceholder,\n  ParticipantViewUI,\n}: PaginatedGridLayoutGroupProps) => {\n  return (\n    <div\n      className={clsx('str-video__paginated-grid-layout__group', {\n        'str-video__paginated-grid-layout--one': group.length === 1,\n        'str-video__paginated-grid-layout--two-four':\n          group.length >= 2 && group.length <= 4,\n        'str-video__paginated-grid-layout--five-nine':\n          group.length >= 5 && group.length <= 9,\n      })}\n    >\n      {group.map((participant) => (\n        <ParticipantView\n          key={participant.sessionId}\n          participant={participant}\n          muteAudio\n          mirror={mirror}\n          VideoPlaceholder={VideoPlaceholder}\n          PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n          ParticipantViewUI={ParticipantViewUI}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport type PaginatedGridLayoutProps = {\n  /**\n   * The number of participants to display per page.\n   */\n  groupSize?: number;\n\n  /**\n   * Whether to exclude the local participant from the grid.\n   * @default false\n   */\n  excludeLocalParticipant?: boolean;\n\n  /**\n   * Predicate to filter call participants or a filter object.\n   * @example\n   * // With a predicate:\n   * <PaginatedGridLayout\n   *   filterParticipants={p => p.roles.includes('student')}\n   * />\n   * @example\n   * // With a filter object:\n   * <PaginatedGridLayout\n   *   filterParticipants={{\n   *     $or: [\n   *       { roles: { $contains: 'student' } },\n   *       { isPinned: true },\n   *     ],\n   *   }}\n   * />\n   */\n  filterParticipants?: ParticipantPredicate | ParticipantFilter;\n\n  /**\n   * When set to `false` disables mirroring of the local partipant's video.\n   * @default true\n   */\n  mirrorLocalParticipantVideo?: boolean;\n\n  /**\n   * Turns on/off the pagination arrows.\n   * @default true\n   */\n  pageArrowsVisible?: boolean;\n\n  /**\n   * Whether the layout is muted. Defaults to `false`.\n   */\n  muted?: boolean;\n} & Pick<\n  ParticipantViewProps,\n  'ParticipantViewUI' | 'VideoPlaceholder' | 'PictureInPicturePlaceholder'\n>;\n\nexport const PaginatedGridLayout = (props: PaginatedGridLayoutProps) => {\n  const {\n    groupSize = (props.groupSize || 0) > 0\n      ? props.groupSize || GROUP_SIZE\n      : GROUP_SIZE,\n    excludeLocalParticipant = false,\n    filterParticipants,\n    mirrorLocalParticipantVideo = true,\n    pageArrowsVisible = true,\n    VideoPlaceholder,\n    ParticipantViewUI = DefaultParticipantViewUI,\n    PictureInPicturePlaceholder,\n    muted,\n  } = props;\n  const [page, setPage] = useState(0);\n  const [\n    paginatedGridLayoutWrapperElement,\n    setPaginatedGridLayoutWrapperElement,\n  ] = useState<HTMLDivElement | null>(null);\n\n  const call = useCall();\n  const remoteParticipants = useRawRemoteParticipants();\n  const participants = useFilteredParticipants({\n    excludeLocalParticipant,\n    filterParticipants,\n  });\n\n  usePaginatedLayoutSortPreset(call);\n\n  useEffect(() => {\n    if (!paginatedGridLayoutWrapperElement || !call) return;\n\n    const cleanup = call.setViewport(paginatedGridLayoutWrapperElement);\n\n    return () => cleanup();\n  }, [paginatedGridLayoutWrapperElement, call]);\n\n  // only used to render video elements\n  const participantGroups = useMemo(\n    () => chunk(participants, groupSize),\n    [participants, groupSize],\n  );\n\n  const pageCount = participantGroups.length;\n\n  // update page when page count is reduced and selected page no longer exists\n  useEffect(() => {\n    if (page > pageCount - 1) {\n      setPage(Math.max(0, pageCount - 1));\n    }\n  }, [page, pageCount]);\n\n  const selectedGroup = participantGroups[page];\n  const mirror = mirrorLocalParticipantVideo ? undefined : false;\n\n  if (!call) return null;\n\n  return (\n    <div\n      className=\"str-video__paginated-grid-layout__wrapper\"\n      ref={setPaginatedGridLayoutWrapperElement}\n    >\n      {!muted && <ParticipantsAudio participants={remoteParticipants} />}\n      <div className=\"str-video__paginated-grid-layout\">\n        {pageArrowsVisible && pageCount > 1 && (\n          <IconButton\n            icon=\"caret-left\"\n            disabled={page === 0}\n            onClick={() =>\n              setPage((currentPage) => Math.max(0, currentPage - 1))\n            }\n          />\n        )}\n        {selectedGroup && (\n          <PaginatedGridLayoutGroup\n            group={selectedGroup}\n            mirror={mirror}\n            VideoPlaceholder={VideoPlaceholder}\n            ParticipantViewUI={ParticipantViewUI}\n            PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n          />\n        )}\n        {pageArrowsVisible && pageCount > 1 && (\n          <IconButton\n            disabled={page === pageCount - 1}\n            icon=\"caret-right\"\n            onClick={() =>\n              setPage((currentPage) => Math.min(pageCount - 1, currentPage + 1))\n            }\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nPaginatedGridLayout.displayName = 'PaginatedGridLayout';\n", "import { useEffect, useState } from 'react';\n\nexport const useCalculateHardLimit = (\n  /**\n   * Element that stretches to 100% of the whole layout component\n   */\n  wrapperElement: HTMLDivElement | null,\n  /**\n   * Element that directly hosts individual `ParticipantView` (or wrapper) elements\n   */\n  hostElement: HTMLDivElement | null,\n  limit?: 'dynamic' | number,\n) => {\n  const [calculatedLimit, setCalculatedLimit] = useState<{\n    vertical: number | null;\n    horizontal: number | null;\n  }>({\n    vertical: typeof limit === 'number' ? limit : null,\n    horizontal: typeof limit === 'number' ? limit : null,\n  });\n\n  useEffect(() => {\n    if (\n      !hostElement ||\n      !wrapperElement ||\n      typeof limit === 'number' ||\n      typeof limit === 'undefined'\n    )\n      return;\n\n    let childWidth: number | null = null;\n    let childHeight: number | null = null;\n\n    const resizeObserver = new ResizeObserver((entries, observer) => {\n      // this part should ideally run as little times as possible\n      // get child measurements and disconnect\n      // does not consider dynamically sized children\n      // this hook is for SpeakerLayout use only, where children in the bar are fixed size\n      if (entries.length > 1) {\n        const child = hostElement.firstChild as HTMLElement | null;\n\n        if (child) {\n          childHeight = child.clientHeight;\n          childWidth = child.clientWidth;\n          observer.unobserve(hostElement);\n        }\n      }\n\n      // keep the state at { vertical: 1, horizontal: 1 }\n      // until we get the proper child measurements\n      if (childHeight === null || childWidth === null) return;\n\n      const vertical = Math.floor(wrapperElement.clientHeight / childHeight);\n      const horizontal = Math.floor(wrapperElement.clientWidth / childWidth);\n\n      setCalculatedLimit((pv) => {\n        if (pv.vertical !== vertical || pv.horizontal !== horizontal)\n          return { vertical, horizontal };\n        return pv;\n      });\n    });\n\n    resizeObserver.observe(wrapperElement);\n    resizeObserver.observe(hostElement);\n\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [hostElement, limit, wrapperElement]);\n\n  return calculatedLimit;\n};\n", "import { useEffect, useState } from 'react';\nimport clsx from 'clsx';\nimport { hasScreenShare } from '@stream-io/video-client';\nimport { useCall, useCallStateHooks } from '@stream-io/video-react-bindings';\n\nimport {\n  DefaultParticipantViewUI,\n  ParticipantView,\n  ParticipantViewProps,\n} from '../ParticipantView';\nimport { IconButton } from '../../../components';\nimport {\n  useHorizontalScrollPosition,\n  useVerticalScrollPosition,\n} from '../../../hooks';\nimport {\n  ParticipantFilter,\n  ParticipantPredicate,\n  useFilteredParticipants,\n  useRawRemoteParticipants,\n  useSpeakerLayoutSortPreset,\n} from './hooks';\nimport { useCalculateHardLimit } from '../../hooks/useCalculateHardLimit';\nimport { ParticipantsAudio } from '../Audio';\n\nexport type SpeakerLayoutProps = {\n  /**\n   * The UI to be used for the participant in the spotlight.\n   */\n  ParticipantViewUISpotlight?: ParticipantViewProps['ParticipantViewUI'];\n\n  /**\n   * The UI to be used for the participants in the participants bar.\n   */\n  ParticipantViewUIBar?: ParticipantViewProps['ParticipantViewUI'];\n\n  /**\n   * The position of the participants who are not in focus.\n   * Providing `null` will hide the bar.\n   */\n  participantsBarPosition?: 'top' | 'bottom' | 'left' | 'right' | null;\n\n  /**\n   * Hard limits the number of the participants rendered in the participants bar.\n   * Providing string `dynamic` will calculate hard limit based on screen width/height.\n   */\n  participantsBarLimit?: 'dynamic' | number;\n\n  /**\n   * When set to `true` will exclude the local participant from layout.\n   * @default false\n   */\n  excludeLocalParticipant?: boolean;\n\n  /**\n   * Predicate to filter call participants or a filter object.\n   * @example\n   * // With a predicate:\n   * <SpeakerLayout\n   *   filterParticipants={p => p.roles.includes('student')}\n   * />\n   * @example\n   * // With a filter object:\n   * <SpeakerLayout\n   *   filterParticipants={{\n   *     $or: [\n   *       { roles: { $contains: 'student' } },\n   *       { isPinned: true },\n   *     ],\n   *   }}\n   * />\n   */\n  filterParticipants?: ParticipantPredicate | ParticipantFilter;\n\n  /**\n   * When set to `false` disables mirroring of the local participant's video.\n   * @default true\n   */\n  mirrorLocalParticipantVideo?: boolean;\n\n  /**\n   * Turns on/off the pagination arrows.\n   * @default true\n   */\n  pageArrowsVisible?: boolean;\n\n  /**\n   * Whether the layout is muted. Defaults to `false`.\n   */\n  muted?: boolean;\n} & Pick<\n  ParticipantViewProps,\n  'VideoPlaceholder' | 'PictureInPicturePlaceholder'\n>;\n\nconst DefaultParticipantViewUIBar = () => (\n  <DefaultParticipantViewUI menuPlacement=\"top-end\" />\n);\n\nexport const SpeakerLayout = ({\n  ParticipantViewUIBar = DefaultParticipantViewUIBar,\n  ParticipantViewUISpotlight = DefaultParticipantViewUI,\n  VideoPlaceholder,\n  PictureInPicturePlaceholder,\n  participantsBarPosition = 'bottom',\n  participantsBarLimit,\n  mirrorLocalParticipantVideo = true,\n  excludeLocalParticipant = false,\n  filterParticipants,\n  pageArrowsVisible = true,\n  muted,\n}: SpeakerLayoutProps) => {\n  const call = useCall();\n  const { useParticipants } = useCallStateHooks();\n  const allParticipants = useParticipants();\n  const remoteParticipants = useRawRemoteParticipants();\n  const [participantInSpotlight, ...otherParticipants] =\n    useFilteredParticipants({ excludeLocalParticipant, filterParticipants });\n  const [participantsBarWrapperElement, setParticipantsBarWrapperElement] =\n    useState<HTMLDivElement | null>(null);\n  const [participantsBarElement, setParticipantsBarElement] =\n    useState<HTMLDivElement | null>(null);\n  const [buttonsWrapperElement, setButtonsWrapperElement] =\n    useState<HTMLDivElement | null>(null);\n\n  const isSpeakerScreenSharing =\n    participantInSpotlight && hasScreenShare(participantInSpotlight);\n  const hardLimit = useCalculateHardLimit(\n    buttonsWrapperElement,\n    participantsBarElement,\n    participantsBarLimit,\n  );\n\n  const isVertical =\n    participantsBarPosition === 'left' || participantsBarPosition === 'right';\n  const isHorizontal =\n    participantsBarPosition === 'top' || participantsBarPosition === 'bottom';\n\n  useEffect(() => {\n    if (!participantsBarWrapperElement || !call) return;\n\n    const cleanup = call.setViewport(participantsBarWrapperElement);\n\n    return () => cleanup();\n  }, [participantsBarWrapperElement, call]);\n\n  const isOneOnOneCall = allParticipants.length === 2;\n  useSpeakerLayoutSortPreset(call, isOneOnOneCall);\n\n  let participantsWithAppliedLimit = otherParticipants;\n\n  const hardLimitToApply = isVertical\n    ? hardLimit.vertical\n    : hardLimit.horizontal;\n\n  if (\n    typeof participantsBarLimit !== 'undefined' &&\n    hardLimitToApply !== null\n  ) {\n    participantsWithAppliedLimit = otherParticipants.slice(\n      0,\n      // subtract 1 if speaker is sharing screen as\n      // that one is rendered independently from otherParticipants array\n      hardLimitToApply - (isSpeakerScreenSharing ? 1 : 0),\n    );\n  }\n\n  const mirror = mirrorLocalParticipantVideo ? undefined : false;\n\n  if (!call) return null;\n\n  const renderParticipantsBar =\n    participantsBarPosition &&\n    (participantsWithAppliedLimit.length > 0 || isSpeakerScreenSharing);\n  return (\n    <div className=\"str-video__speaker-layout__wrapper\">\n      {!muted && <ParticipantsAudio participants={remoteParticipants} />}\n      <div\n        className={clsx(\n          'str-video__speaker-layout',\n          participantsBarPosition &&\n            `str-video__speaker-layout--variant-${participantsBarPosition}`,\n        )}\n      >\n        <div className=\"str-video__speaker-layout__spotlight\">\n          {participantInSpotlight && (\n            <ParticipantView\n              participant={participantInSpotlight}\n              muteAudio={true}\n              mirror={mirror}\n              trackType={\n                isSpeakerScreenSharing ? 'screenShareTrack' : 'videoTrack'\n              }\n              ParticipantViewUI={ParticipantViewUISpotlight}\n              VideoPlaceholder={VideoPlaceholder}\n              PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n            />\n          )}\n        </div>\n        {renderParticipantsBar && (\n          <div\n            ref={setButtonsWrapperElement}\n            className=\"str-video__speaker-layout__participants-bar-buttons-wrapper\"\n          >\n            <div\n              className=\"str-video__speaker-layout__participants-bar-wrapper\"\n              ref={setParticipantsBarWrapperElement}\n            >\n              <div\n                ref={setParticipantsBarElement}\n                className=\"str-video__speaker-layout__participants-bar\"\n              >\n                {isSpeakerScreenSharing && (\n                  <div\n                    className=\"str-video__speaker-layout__participant-tile\"\n                    key={participantInSpotlight.sessionId}\n                  >\n                    <ParticipantView\n                      participant={participantInSpotlight}\n                      ParticipantViewUI={ParticipantViewUIBar}\n                      VideoPlaceholder={VideoPlaceholder}\n                      PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n                      mirror={mirror}\n                      muteAudio={true}\n                    />\n                  </div>\n                )}\n                {participantsWithAppliedLimit.map((participant) => (\n                  <div\n                    className=\"str-video__speaker-layout__participant-tile\"\n                    key={participant.sessionId}\n                  >\n                    <ParticipantView\n                      participant={participant}\n                      ParticipantViewUI={ParticipantViewUIBar}\n                      VideoPlaceholder={VideoPlaceholder}\n                      PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n                      mirror={mirror}\n                      muteAudio={true}\n                    />\n                  </div>\n                ))}\n              </div>\n            </div>\n            {pageArrowsVisible && isVertical && (\n              <VerticalScrollButtons\n                scrollWrapper={participantsBarWrapperElement}\n              />\n            )}\n            {pageArrowsVisible && isHorizontal && (\n              <HorizontalScrollButtons\n                scrollWrapper={participantsBarWrapperElement}\n              />\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nSpeakerLayout.displayName = 'SpeakerLayout';\n\ntype ScrollButtonsProps<T extends HTMLElement> = {\n  scrollWrapper: T | null;\n};\n\nconst HorizontalScrollButtons = <T extends HTMLElement>({\n  scrollWrapper,\n}: ScrollButtonsProps<T>) => {\n  const scrollPosition = useHorizontalScrollPosition(scrollWrapper);\n\n  const scrollStartClickHandler = () => {\n    scrollWrapper?.scrollBy({ left: -150, behavior: 'smooth' });\n  };\n\n  const scrollEndClickHandler = () => {\n    scrollWrapper?.scrollBy({ left: 150, behavior: 'smooth' });\n  };\n  return (\n    <>\n      {scrollPosition && scrollPosition !== 'start' && (\n        <IconButton\n          onClick={scrollStartClickHandler}\n          icon=\"caret-left\"\n          className=\"str-video__speaker-layout__participants-bar--button-left\"\n        />\n      )}\n      {scrollPosition && scrollPosition !== 'end' && (\n        <IconButton\n          onClick={scrollEndClickHandler}\n          icon=\"caret-right\"\n          className=\"str-video__speaker-layout__participants-bar--button-right\"\n        />\n      )}\n    </>\n  );\n};\n\nconst VerticalScrollButtons = <T extends HTMLElement>({\n  scrollWrapper,\n}: ScrollButtonsProps<T>) => {\n  const scrollPosition = useVerticalScrollPosition(scrollWrapper);\n\n  const scrollTopClickHandler = () => {\n    scrollWrapper?.scrollBy({ top: -150, behavior: 'smooth' });\n  };\n\n  const scrollBottomClickHandler = () => {\n    scrollWrapper?.scrollBy({ top: 150, behavior: 'smooth' });\n  };\n  return (\n    <>\n      {scrollPosition && scrollPosition !== 'top' && (\n        <IconButton\n          onClick={scrollTopClickHandler}\n          icon=\"caret-up\"\n          className=\"str-video__speaker-layout__participants-bar--button-top\"\n        />\n      )}\n      {scrollPosition && scrollPosition !== 'bottom' && (\n        <IconButton\n          onClick={scrollBottomClickHandler}\n          icon=\"caret-down\"\n          className=\"str-video__speaker-layout__participants-bar--button-bottom\"\n        />\n      )}\n    </>\n  );\n};\n", "import { useCall, useI18n } from '@stream-io/video-react-bindings';\nimport { useEffect, useState } from 'react';\n\nimport { hasScreenShare } from '@stream-io/video-client';\nimport { Icon } from '../../../components';\nimport { ParticipantsAudio } from '../Audio';\nimport {\n  DefaultParticipantViewUI,\n  ParticipantView,\n  ParticipantViewProps,\n} from '../ParticipantView';\nimport {\n  ParticipantFilter,\n  ParticipantPredicate,\n  useFilteredParticipants,\n  usePaginatedLayoutSortPreset,\n  useRawRemoteParticipants,\n} from './hooks';\n\nexport type PipLayoutProps = {\n  /**\n   * Whether to exclude the local participant from the grid.\n   * @default false\n   */\n  excludeLocalParticipant?: boolean;\n\n  /**\n   * Predicate to filter call participants or a filter object.\n   * @example\n   * // With a predicate:\n   * <PipLayout\n   *   filterParticipants={p => p.roles.includes('student')}\n   * />\n   * @example\n   * // With a filter object:\n   * <PipLayout\n   *   filterParticipants={{\n   *     $or: [\n   *       { roles: { $contains: 'student' } },\n   *       { isPinned: true },\n   *     ],\n   *   }}\n   * />\n   */\n  filterParticipants?: ParticipantPredicate | ParticipantFilter;\n\n  /**\n   * When set to `false` disables mirroring of the local partipant's video.\n   * @default true\n   */\n  mirrorLocalParticipantVideo?: boolean;\n} & Pick<ParticipantViewProps, 'ParticipantViewUI' | 'VideoPlaceholder'>;\n\nconst Pip = (props: PipLayoutProps) => {\n  const { t } = useI18n();\n  const {\n    excludeLocalParticipant = false,\n    filterParticipants,\n    mirrorLocalParticipantVideo = true,\n    VideoPlaceholder,\n    ParticipantViewUI = DefaultParticipantViewUI,\n  } = props;\n  const [layoutWrapperElement, setLayoutWrapperElement] =\n    useState<HTMLDivElement | null>(null);\n\n  const call = useCall();\n  const participants = useFilteredParticipants({\n    excludeLocalParticipant,\n    filterParticipants,\n  });\n  const screenSharingParticipant = participants.find((p) => hasScreenShare(p));\n\n  usePaginatedLayoutSortPreset(call);\n\n  useEffect(() => {\n    if (!layoutWrapperElement || !call) return;\n    return call.setViewport(layoutWrapperElement);\n  }, [layoutWrapperElement, call]);\n\n  const mirror = mirrorLocalParticipantVideo ? undefined : false;\n\n  if (!call) return null;\n\n  return (\n    <div className=\"str-video__pip-layout\" ref={setLayoutWrapperElement}>\n      {screenSharingParticipant &&\n        (screenSharingParticipant.isLocalParticipant ? (\n          <div className=\"str-video__pip-screen-share-local\">\n            <Icon icon=\"screen-share-off\" />\n            <span className=\"str-video__pip-screen-share-local__title\">\n              {t('You are presenting your screen')}\n            </span>\n          </div>\n        ) : (\n          <ParticipantView\n            participant={screenSharingParticipant}\n            trackType=\"screenShareTrack\"\n            muteAudio\n            mirror={false}\n            VideoPlaceholder={VideoPlaceholder}\n            ParticipantViewUI={ParticipantViewUI}\n          />\n        ))}\n      {participants.map((participant) => (\n        <ParticipantView\n          key={participant.sessionId}\n          participant={participant}\n          muteAudio\n          mirror={mirror}\n          VideoPlaceholder={VideoPlaceholder}\n          ParticipantViewUI={ParticipantViewUI}\n        />\n      ))}\n    </div>\n  );\n};\n\nPip.displayName = 'PipLayout.Pip';\n\nconst Host = () => {\n  const remoteParticipants = useRawRemoteParticipants();\n  return <ParticipantsAudio participants={remoteParticipants} />;\n};\n\nHost.displayName = 'PipLayout.Host';\n\nexport const PipLayout = { Pip, Host };\n", "import { PropsWithChildren, useEffect, useState } from 'react';\nimport { Call, CallingState } from '@stream-io/video-client';\nimport {\n  useCall,\n  useCallStateHooks,\n  useEffectEvent,\n  useStreamVideoClient,\n} from '@stream-io/video-react-bindings';\nimport {\n  BackstageLayout,\n  BackstageLayoutProps,\n  LivestreamLayout,\n  LivestreamLayoutProps,\n  StreamCall,\n} from '../../core';\n\nexport type LivestreamPlayerProps = {\n  /**\n   * The call type. Usually `livestream`.\n   */\n  callType: string;\n  /**\n   * The call ID.\n   */\n  callId: string;\n  /**\n   * Determines when the viewer joins the call.\n   *\n   * `\"asap\"` behavior means joining the call as soon as it is possible\n   * (either the `join_ahead_time_seconds` setting allows it, or the user\n   * has the capability to join backstage).\n   *\n   * `\"live\"` behavior means joining the call when it goes live.\n   *\n   * @default \"asap\"\n   */\n  joinBehavior?: 'asap' | 'live';\n  /**\n   * The props for the {@link LivestreamLayout} component.\n   */\n  layoutProps?: LivestreamLayoutProps;\n  /**\n   * The props for the {@link BackstageLayout} component.\n   */\n  backstageProps?: BackstageLayoutProps;\n  /**\n   * Callback to handle errors while fetching or joining livestream.\n   */\n  onError?: (error: any) => void;\n};\n\nexport const LivestreamPlayer = (\n  props: PropsWithChildren<LivestreamPlayerProps>,\n) => {\n  const { callType, callId, children, ...restProps } = props;\n  const client = useStreamVideoClient();\n  const [call, setCall] = useState<Call>();\n  const onError = useEffectEvent(props.onError ?? (() => {}));\n\n  useEffect(() => {\n    if (!client) return;\n    const myCall = client.call(callType, callId);\n    setCall(myCall);\n    myCall.get().catch((e) => {\n      console.error('Failed to fetch call', e);\n      onError(e);\n    });\n    return () => {\n      myCall.leave().catch((e) => {\n        console.error('Failed to leave call', e);\n      });\n      setCall(undefined);\n    };\n  }, [callId, callType, client]);\n\n  if (!call) {\n    return null;\n  }\n\n  return (\n    <StreamCall call={call}>\n      <LivestreamCall {...restProps} />\n      {children}\n    </StreamCall>\n  );\n};\n\nconst LivestreamCall = (props: {\n  joinBehavior?: 'asap' | 'live';\n  layoutProps?: LivestreamLayoutProps;\n  backstageProps?: BackstageLayoutProps;\n  onError?: (error: any) => void;\n}) => {\n  const call = useLivestreamCall(props);\n  const { useIsCallLive } = useCallStateHooks();\n  const isLive = useIsCallLive();\n\n  if (!call) return null;\n\n  if (isLive) {\n    return <LivestreamLayout {...props.layoutProps} />;\n  }\n\n  return <BackstageLayout {...props.backstageProps} />;\n};\n\nconst useLivestreamCall = (props: {\n  joinBehavior?: 'asap' | 'live';\n  onError?: (error: any) => void;\n}) => {\n  const call = useCall();\n  const { useIsCallLive, useOwnCapabilities } = useCallStateHooks();\n  const canJoinLive = useIsCallLive();\n  const canJoinEarly = useCanJoinEarly();\n  const canJoinBackstage =\n    useOwnCapabilities()?.includes('join-backstage') ?? false;\n  const canJoinAsap = canJoinLive || canJoinEarly || canJoinBackstage;\n  const joinBehavior = props.joinBehavior ?? 'asap';\n  const canJoin =\n    (joinBehavior === 'asap' && canJoinAsap) ||\n    (joinBehavior === 'live' && canJoinLive);\n  const onError = useEffectEvent(props.onError ?? (() => {}));\n\n  useEffect(() => {\n    if (call && call.state.callingState === CallingState.IDLE && canJoin) {\n      call.join().catch((e) => {\n        console.error('Failed to join call', e);\n        onError(e);\n      });\n    }\n  }, [call, canJoin]);\n\n  return call;\n};\n\nconst useCanJoinEarly = () => {\n  const { useCallStartsAt, useCallSettings } = useCallStateHooks();\n  const startsAt = useCallStartsAt();\n  const settings = useCallSettings();\n  const joinAheadTimeSeconds = settings?.backstage.join_ahead_time_seconds;\n  const [canJoinEarly, setCanJoinEarly] = useState(() =>\n    checkCanJoinEarly(startsAt, joinAheadTimeSeconds),\n  );\n\n  useEffect(() => {\n    if (!canJoinEarly) {\n      const handle = setInterval(() => {\n        setCanJoinEarly(checkCanJoinEarly(startsAt, joinAheadTimeSeconds));\n      }, 1000);\n\n      return () => clearInterval(handle);\n    }\n  }, [canJoinEarly, startsAt, joinAheadTimeSeconds]);\n\n  return canJoinEarly;\n};\n\nconst checkCanJoinEarly = (\n  startsAt: Date | undefined,\n  joinAheadTimeSeconds: number | undefined,\n) => {\n  if (!startsAt) {\n    return false;\n  }\n\n  return Date.now() >= +startsAt - (joinAheadTimeSeconds ?? 0) * 1000;\n};\n", "import { setSdkInfo, SfuModels } from '@stream-io/video-client';\n\nexport * from '@stream-io/video-client';\nexport * from '@stream-io/video-react-bindings';\n\nexport * from './src/core';\n\nexport * from './src/components';\nexport * from './src/wrappers';\nexport * from './src/translations';\nexport {\n  useHorizontalScrollPosition,\n  useVerticalScrollPosition,\n  useRequestPermission,\n  usePersistedDevicePreferences,\n  useDeviceList,\n} from './src/hooks';\nexport { applyFilter, type Filter } from './src/utilities/filter';\n\nconst [major, minor, patch] = (\n  process.env.PKG_VERSION || '0.0.0-development'\n).split('.');\n\nsetSdkInfo({\n  type: SfuModels.SdkType.REACT,\n  major,\n  minor,\n  patch,\n});\n"],
  "mappings": "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I,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,CAAC,GAAE,CAAC,GAAE,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,CAAC,GAAE,CAAC,GAAE,CAAC,GAAE,CAAC,GAAE,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,IAAG,CAAC,GAAE,CAAC,GAAE,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,GAAE,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,CAAC,GAAE,CAAC,GAAE,CAAC,GAAE,CAAC,GAAE,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,GAAE,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,GAAE,EAAE,GAAE,CAAC,IAAG,CAAC,GAAE,CAAC,GAAE,CAAC,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,GAAE,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,CAAC,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,CAAC,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,CAAC,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,CAAC,GAAE,CAAC,GAAE,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,IAAG,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,GAAE,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,CAAC,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,IAAG,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,CAAC,GAAE,CAAC,GAAE,CAAC,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,IAAG,CAAC,GAAE,CAAC,GAAE,GAAG,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAAI,GAAG,GAAE,CAAC,KAA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",
  "names": ["SDPUtils", "i", "sdp", "pt", "j", "version", "o", "v", "i", "sdp", "j", "s", "i", "x", "n", "sdp", "window", "undefined", "EMPTY", "regexes", "i", "version", "ua", "j", "k", "p", "q", "map", "UAParser", "$", "window", "e", "navigator", "name", "window", "navigator", "c", "cc", "r", "name", "oc", "a", "b", "e", "cs", "window", "window", "e", "te", "r", "pc", "s", "name", "t", "sdp", "shimGetDisplayMedia", "shimGetUserMedia", "shimOnTrack", "shimPeerConnection", "shimGetUserMedia", "window", "navigator", "a", "b", "c", "shimGetDisplayMedia", "window", "shimOnTrack", "window", "shimPeerConnection", "e", "i", "shimGetUserMedia", "window", "e", "pc", "shimGetUserMedia", "navigator", "RTCPeerConnection", "i", "window", "SDPUtils", "e", "version", "isFirefox", "dc", "pc", "sdp", "window", "logging", "adapter", "shimPeerConnection", "shimGetUserMedia", "shimOnTrack", "t", "i", "es", "b", "p", "UnknownFieldHandler", "is", "no", "a", "b", "WireType", "shift", "b", "lo", "hi", "i", "bi", "TWO_PWR_32_DBL", "lo", "hi", "n", "t", "lo", "hi", "s", "i", "offset", "chunk", "lo", "hi", "defaultsWrite", "defaultsRead", "a", "b", "_a", "c", "i", "ScalarType", "LongType", "RepeatType", "_a", "_c", "_a", "n", "k", "name", "i", "map", "_a", "e", "_a", "jsonValue", "i", "_a", "u", "T", "L", "e", "a", "b", "T", "u", "i", "t", "m", "name", "name", "i", "T", "k", "a", "b", "t", "T", "ba", "i", "name", "copy", "a", "b", "_a", "_a", "_c", "m", "i", "m", "k", "v", "o", "a", "c", "k", "v", "DeferredState", "_", "i", "first", "p", "__awaiter", "P", "e", "__awaiter", "P", "e", "__awaiter", "P", "e", "__awaiter", "P", "e", "__awaiter", "P", "e", "_a", "r", "p", "_", "ms", "v", "_a", "_c", "i", "TwirpErrorCode", "k", "v", "i", "_a", "_c", "e", "LogLevelEnum", "instance", "i", "Subscription", "e", "_a", "empty", "timeout", "_i", "_a", "Subscriber", "fn", "ConsumerObserver", "SafeSubscriber", "x", "fn", "Observable", "observable", "_a", "_i", "x", "_a", "OperatorSubscriber", "err", "_a", "ConnectableObservable", "timestamp", "_i", "timestamp", "Subject", "_c", "_a", "observable", "AnonymousSubject", "_a", "BehaviorSubject", "_a", "ReplaySubject", "_a", "copy", "i", "last", "AsyncSubject", "_a", "Action", "delay", "timeout", "_i", "AsyncAction", "delay", "_a", "e", "_i", "AsapAction", "delay", "_a", "Scheduler", "delay", "AsyncScheduler", "AsapScheduler", "QueueAction", "delay", "QueueScheduler", "AnimationFrameAction", "delay", "_a", "AnimationFrameScheduler", "VirtualTimeScheduler", "_a", "VirtualAction", "delay", "a", "b", "x", "_a", "i", "delay", "repeat", "delay", "delay", "i", "iterator", "_a", "iterator", "_i", "NotificationKind", "Notification", "_a", "_a", "_c", "fn", "isArray", "i", "_i", "_a", "i", "expand", "buffer", "a", "i", "b", "ii", "_i", "_a", "_i", "e", "_i", "_i", "first", "a", "b", "x", "y", "p", "_a", "_c", "refCount", "on", "_i", "windowTime", "refCount", "_a", "_c", "_i", "_a", "name", "e", "timeout", "NullValue", "k", "v", "ms", "z", "PeerType", "ConnectionQuality", "VideoQuality", "TrackType", "ParticipantSource", "AudioBitrateProfile", "ErrorCode", "SdkType", "TrackUnpublishReason", "GoAwayReason", "CallEndedReason", "WebsocketReconnectStrategy", "AndroidThermalState", "AppleThermalState", "ClientCapability", "CallState", "ICETrickle", "ICETrickle$Type", "Error", "Error$Type", "Call", "ICETrickle$", "Error$", "VisibilityState", "DebounceType", "name", "m", "r", "isFunction", "max", "min", "s", "i", "isReactNative", "logToConsole", "sdp", "t", "fn", "e", "_a", "ac", "observable", "CallingState", "RxUtils.setCurrentValue", "c", "RxUtils.getCurrentValue", "a", "b", "p", "empty", "ps", "count", "RxUtils.updateValue", "patch", "o", "config", "queue", "os", "major", "version", "pc", "process", "w", "h", "tracer", "timeout", "timestamp", "connectionConfig", "sfuClient", "state", "x", "size", "Subscriber", "ws", "context", "filter", "publish", "ownCapabilities", "type", "members", "client", "error", "interval", "L", "A", "options", "key", "sdkInfo", "apiKey", "_jsx", "translations", "ns", "t", "isReactNative", "getDevices", "e", "useCallSettings", "useOwnCapabilities", "_Fragment", "t", "e", "n", "r", "i", "s", "c", "h", "o", "a", "u", "isMobile", "isSafari", "x", "y", "buffer", "offset", "v", "m", "e", "i", "SegmentationLevel", "err", "instance", "exports", "size", "j", "version", "lastModelFilePath", "modelFileCache", "r", "t", "vs", "fs", "g", "b", "a", "timestamp", "delay", "_jsx", "_jsxs", "Fragment", "x", "y", "context", "useCallSettings", "useCallCallingState", "useMicrophoneState", "useCameraState", "useSpeakerState", "p", "useHasPermissions", "t", "i", "defaultDevice", "MenuVisualType", "_Fragment", "ToggleButton", "offset", "e", "size", "_", "BaseVideo", "name", "n", "DefaultVideoPlaceholder", "DefaultPictureInPicturePlaceholder", "Video", "FilterEngine", "PerformanceDegradationReason", "useCallStatsReport", "performance", "ms", "IconButton", "CompositeButton", "Menu", "ToggleMenuButton", "DefaultToggleMenuButton", "Notification", "timeout", "ToggleEndRecordingMenuButton", "ToggleReactionsMenuButton", "useHasOngoingScreenShare", "useScreenShareState", "role", "ToggleDeviceSettingsMenuButton", "CancelCallToggleMenuButton", "Status", "config", "w", "h", "timestamp", "useParticipants", "useAnonymousParticipantCount", "LoadingIndicator", "DefaultLoadingIndicator", "lt", "useCallBlockedUserIds", "useCallThumbnail", "CallRecordingListHeader", "DefaultCallRecordingListHeader", "CallRecordingListItem", "DefaultCallRecordingListItem", "DefaultEmptyCallRecordingList", "DefaultLoadingCallRecordingList", "s", "v", "useCallMembers", "self", "a", "b", "useLocalParticipant", "r", "PermissionRequestList", "ParticipantActionsContextMenu", "DefaultParticipantActionsContextMenu", "ParticipantView", "useIncomingVideoSettings", "en", "filter", "useRemoteParticipants", "useRawParticipants", "useParticipantCount", "useCallStartsAt", "useIsCallLive", "useCallSession", "interval", "useOwnCapabilities", "major", "minor", "patch"]
}
